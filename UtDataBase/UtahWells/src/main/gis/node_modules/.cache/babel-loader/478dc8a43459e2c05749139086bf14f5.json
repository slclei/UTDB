{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport { rad2deg as t } from \"../../core/mathUtils.js\";\nimport { createScreenPoint as e } from \"../../core/screenUtils.js\";\nimport { InputHandler as a } from \"./InputHandler.js\";\nimport { ViewEventPriorities as n } from \"./InputManager.js\";\nexport { MouseButton } from \"./IViewEvents.js\";\nconst r = [\"click\", \"double-click\", \"immediate-click\", \"immediate-double-click\", \"hold\", \"drag\", \"key-down\", \"key-up\", \"pointer-down\", \"pointer-move\", \"pointer-up\", \"pointer-drag\", \"mouse-wheel\", \"pointer-enter\", \"pointer-leave\", \"gamepad\", \"focus\", \"blur\"],\n      i = {};\n\nfunction o(t) {\n  return !!i[t];\n}\n\nfunction s(t) {\n  for (const e of t) if (!o(e)) return !1;\n\n  return !0;\n}\n\nr.forEach(t => {\n  i[t] = !0;\n});\n\nclass p {\n  constructor(t) {\n    this.handlers = new Map(), this.counter = 0, this.handlerCounts = new Map(), this.view = t, this.inputManager = null;\n  }\n\n  connect(t) {\n    t && this.disconnect(), this.inputManager = t, this.handlers.forEach((_ref, a) => {\n      let {\n        handler: t,\n        priority: e\n      } = _ref;\n      return this.inputManager.installHandlers(a, [t], e);\n    });\n  }\n\n  disconnect() {\n    this.inputManager && this.handlers.forEach((t, e) => this.inputManager.uninstallHandlers(e)), this.inputManager = null;\n  }\n\n  destroy() {\n    this.disconnect(), this.handlers.clear(), this.view = null;\n  }\n\n  on(t, e, a, r) {\n    const i = Array.isArray(t) ? t : t.split(\",\");\n    if (!s(i)) return i.some(o) && console.error(\"Error: registering input events and other events on the view at the same time is not supported.\"), null;\n    let p, l;\n    Array.isArray(e) ? l = e : (p = e, l = []), \"function\" == typeof a ? p = a : r = a, r = null != r ? r : n.DEFAULT;\n\n    const u = this._createUniqueGroupName(),\n          m = new c(this.view, i, l, p);\n\n    this.handlers.set(u, {\n      handler: m,\n      priority: r\n    });\n\n    for (const n of i) {\n      const t = this.handlerCounts.get(n) || 0;\n      this.handlerCounts.set(n, t + 1);\n    }\n\n    return this.inputManager && this.inputManager.installHandlers(u, [m], r), {\n      remove: () => this._removeHandler(u, i)\n    };\n  }\n\n  hasHandler(t) {\n    return !!this.handlerCounts.get(t);\n  }\n\n  _removeHandler(t, e) {\n    if (this.handlers.has(t)) {\n      this.handlers.delete(t);\n\n      for (const t of e) {\n        const e = this.handlerCounts.get(t);\n        void 0 === e ? console.error(\"Trying to remove handler for event that has no handlers registered: \", t) : 1 === e ? this.handlerCounts.delete(t) : this.handlerCounts.set(t, e - 1);\n      }\n    }\n\n    this.inputManager && this.inputManager.uninstallHandlers(t);\n  }\n\n  _createUniqueGroupName() {\n    return this.counter += 1, `viewEvents_${this.counter}`;\n  }\n\n}\n\nclass c extends a {\n  constructor(t, e, a, n) {\n    super(!0), this.view = t;\n\n    for (const r of e) switch (r) {\n      case \"click\":\n        this.registerIncoming(\"click\", a, t => n(this._wrapClick(t)));\n        break;\n\n      case \"double-click\":\n        this.registerIncoming(\"double-click\", a, t => n(this._wrapDoubleClick(t)));\n        break;\n\n      case \"immediate-click\":\n        this.registerIncoming(\"immediate-click\", a, t => n(this._wrapImmediateClick(t)));\n        break;\n\n      case \"immediate-double-click\":\n        this.registerIncoming(\"immediate-double-click\", a, t => n(this._wrapImmediateDoubleClick(t)));\n        break;\n\n      case \"hold\":\n        this.registerIncoming(\"hold\", a, t => n(this._wrapHold(t)));\n        break;\n\n      case \"drag\":\n        this.registerIncoming(\"drag\", a, t => {\n          const e = this._wrapDrag(t);\n\n          e && n(e);\n        });\n        break;\n\n      case \"key-down\":\n        this.registerIncoming(\"key-down\", a, t => n(this._wrapKeyDown(t)));\n        break;\n\n      case \"key-up\":\n        this.registerIncoming(\"key-up\", a, t => n(this._wrapKeyUp(t)));\n        break;\n\n      case \"pointer-down\":\n        this.registerIncoming(\"pointer-down\", a, t => n(this._wrapPointer(t, \"pointer-down\")));\n        break;\n\n      case \"pointer-move\":\n        this.registerIncoming(\"pointer-move\", a, t => n(this._wrapPointer(t, \"pointer-move\")));\n        break;\n\n      case \"pointer-up\":\n        this.registerIncoming(\"pointer-up\", a, t => n(this._wrapPointer(t, \"pointer-up\")));\n        break;\n\n      case \"pointer-drag\":\n        this.registerIncoming(\"pointer-drag\", a, t => n(this._wrapPointerDrag(t)));\n        break;\n\n      case \"mouse-wheel\":\n        this.registerIncoming(\"mouse-wheel\", a, t => n(this._wrapMouseWheel(t)));\n        break;\n\n      case \"pointer-enter\":\n        this.registerIncoming(\"pointer-enter\", a, t => n(this._wrapPointer(t, \"pointer-enter\")));\n        break;\n\n      case \"pointer-leave\":\n        this.registerIncoming(\"pointer-leave\", a, t => n(this._wrapPointer(t, \"pointer-leave\")));\n        break;\n\n      case \"gamepad\":\n        this.registerIncoming(\"gamepad\", a, t => {\n          n(this._wrapGamepad(t));\n        });\n        break;\n\n      case \"focus\":\n        this.registerIncoming(\"focus\", a, t => {\n          n(this._wrapFocus(t));\n        });\n        break;\n\n      case \"blur\":\n        this.registerIncoming(\"blur\", a, t => {\n          n(this._wrapBlur(t));\n        });\n    }\n  }\n\n  _wrapFocus(t) {\n    return {\n      type: \"focus\",\n      timestamp: t.timestamp,\n      native: t.data.native,\n      cancelable: t.cancelable,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapBlur(t) {\n    return {\n      type: \"blur\",\n      timestamp: t.timestamp,\n      native: t.data.native,\n      cancelable: t.cancelable,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapClick(t) {\n    const {\n      pointerType: a,\n      button: n,\n      buttons: r,\n      x: i,\n      y: o,\n      native: s,\n      eventId: p\n    } = t.data,\n          {\n      cancelable: c,\n      timestamp: l\n    } = t;\n    return {\n      type: \"click\",\n      pointerType: a,\n      button: n,\n      buttons: r,\n      x: i,\n      y: o,\n      native: s,\n      timestamp: l,\n      screenPoint: e(i, o),\n      mapPoint: this._getMapPoint(i, o),\n      eventId: p,\n      cancelable: c,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapDoubleClick(t) {\n    const {\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      eventId: s\n    } = t.data,\n          {\n      cancelable: p,\n      timestamp: c\n    } = t;\n    return {\n      type: \"double-click\",\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      timestamp: c,\n      mapPoint: this._getMapPoint(r, i),\n      eventId: s,\n      cancelable: p,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapImmediateClick(t) {\n    const {\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      eventId: s\n    } = t.data,\n          p = o.pointerId,\n          {\n      cancelable: c,\n      timestamp: l\n    } = t;\n    return {\n      type: \"immediate-click\",\n      pointerId: p,\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      timestamp: l,\n      mapPoint: this._getMapPoint(r, i),\n      eventId: s,\n      cancelable: c,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapImmediateDoubleClick(t) {\n    const {\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      eventId: s\n    } = t.data,\n          p = o.pointerId,\n          {\n      cancelable: c,\n      timestamp: l\n    } = t;\n    return {\n      type: \"immediate-double-click\",\n      pointerId: p,\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      timestamp: l,\n      mapPoint: this._getMapPoint(r, i),\n      eventId: s,\n      cancelable: c,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapHold(t) {\n    const {\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o\n    } = t.data,\n          {\n      cancelable: s,\n      timestamp: p\n    } = t;\n    return {\n      type: \"hold\",\n      pointerType: e,\n      button: a,\n      buttons: n,\n      x: r,\n      y: i,\n      native: o,\n      timestamp: p,\n      mapPoint: this._getMapPoint(r, i),\n      cancelable: s,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _getMapPoint(t, a) {\n    return this.view.toMap(e(t, a), {\n      exclude: []\n    });\n  }\n\n  _wrapDrag(e) {\n    const a = e.data,\n          {\n      x: n,\n      y: r\n    } = a.center,\n          {\n      action: i,\n      pointerType: o,\n      button: s\n    } = a;\n    if (\"start\" === i && (this.latestDragStart = a), !this.latestDragStart) return;\n    const p = a.pointer.native,\n          c = a.buttons,\n          {\n      cancelable: l,\n      timestamp: u\n    } = e,\n          m = {\n      x: this.latestDragStart.center.x,\n      y: this.latestDragStart.center.y\n    };\n    return \"end\" === i && (this.latestDragStart = void 0), {\n      type: \"drag\",\n      action: i,\n      x: n,\n      y: r,\n      origin: m,\n      pointerType: o,\n      button: s,\n      buttons: c,\n      radius: a.radius,\n      angle: t(a.angle),\n      native: p,\n      timestamp: u,\n      cancelable: l,\n      stopPropagation: () => e.stopPropagation(),\n      async: t => e.async(t),\n      preventDefault: () => e.preventDefault()\n    };\n  }\n\n  _wrapKeyDown(t) {\n    const {\n      key: e,\n      repeat: a,\n      native: n\n    } = t.data,\n          {\n      cancelable: r,\n      timestamp: i\n    } = t;\n    return {\n      type: \"key-down\",\n      key: e,\n      repeat: a,\n      native: n,\n      timestamp: i,\n      cancelable: r,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapKeyUp(t) {\n    const {\n      key: e,\n      native: a\n    } = t.data,\n          {\n      cancelable: n,\n      timestamp: r\n    } = t;\n    return {\n      type: \"key-up\",\n      key: e,\n      native: a,\n      timestamp: r,\n      cancelable: n,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapPointer(t, e) {\n    const {\n      x: a,\n      y: n,\n      button: r,\n      buttons: i,\n      native: o,\n      eventId: s\n    } = t.data,\n          p = o.pointerId,\n          c = o.pointerType,\n          {\n      cancelable: l,\n      timestamp: u\n    } = t;\n    return {\n      type: e,\n      x: a,\n      y: n,\n      pointerId: p,\n      pointerType: c,\n      button: r,\n      buttons: i,\n      native: o,\n      timestamp: u,\n      eventId: s,\n      cancelable: l,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapPointerDrag(t) {\n    const {\n      x: e,\n      y: a,\n      buttons: n,\n      native: r,\n      eventId: i\n    } = t.data.currentEvent,\n          {\n      button: o\n    } = t.data.startEvent,\n          s = t.data.startEvent.native.pointerId,\n          p = t.data.startEvent.native.pointerType,\n          c = t.data.action,\n          l = {\n      x: t.data.startEvent.x,\n      y: t.data.startEvent.y\n    },\n          {\n      cancelable: u,\n      timestamp: m\n    } = t;\n    return {\n      type: \"pointer-drag\",\n      x: e,\n      y: a,\n      pointerId: s,\n      pointerType: p,\n      button: o,\n      buttons: n,\n      action: c,\n      origin: l,\n      native: r,\n      timestamp: m,\n      eventId: i,\n      cancelable: u,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapMouseWheel(t) {\n    const {\n      cancelable: e,\n      data: a,\n      timestamp: n\n    } = t,\n          {\n      x: r,\n      y: i,\n      deltaY: o,\n      native: s\n    } = a;\n    return {\n      type: \"mouse-wheel\",\n      x: r,\n      y: i,\n      deltaY: o,\n      native: s,\n      timestamp: n,\n      cancelable: e,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n  _wrapGamepad(t) {\n    const {\n      action: e,\n      state: a,\n      device: n\n    } = t.data,\n          {\n      cancelable: r,\n      timestamp: i\n    } = t,\n          {\n      buttons: o,\n      axes: s\n    } = a;\n    return {\n      type: \"gamepad\",\n      device: n,\n      timestamp: i,\n      action: e,\n      buttons: o,\n      axes: s,\n      cancelable: r,\n      stopPropagation: () => t.stopPropagation(),\n      async: e => t.async(e),\n      preventDefault: () => t.preventDefault()\n    };\n  }\n\n}\n\nexport { p as ViewEvents, r as eventTypes };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/input/ViewEvents.js"],"names":["rad2deg","t","createScreenPoint","e","InputHandler","a","ViewEventPriorities","n","MouseButton","r","i","o","s","forEach","p","constructor","handlers","Map","counter","handlerCounts","view","inputManager","connect","disconnect","handler","priority","installHandlers","uninstallHandlers","destroy","clear","on","Array","isArray","split","some","console","error","l","DEFAULT","u","_createUniqueGroupName","m","c","set","get","remove","_removeHandler","hasHandler","has","delete","registerIncoming","_wrapClick","_wrapDoubleClick","_wrapImmediateClick","_wrapImmediateDoubleClick","_wrapHold","_wrapDrag","_wrapKeyDown","_wrapKeyUp","_wrapPointer","_wrapPointerDrag","_wrapMouseWheel","_wrapGamepad","_wrapFocus","_wrapBlur","type","timestamp","native","data","cancelable","stopPropagation","async","preventDefault","pointerType","button","buttons","x","y","eventId","screenPoint","mapPoint","_getMapPoint","pointerId","toMap","exclude","center","action","latestDragStart","pointer","origin","radius","angle","key","repeat","currentEvent","startEvent","deltaY","state","device","axes","ViewEvents","eventTypes"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{rad2deg as t}from\"../../core/mathUtils.js\";import{createScreenPoint as e}from\"../../core/screenUtils.js\";import{InputHandler as a}from\"./InputHandler.js\";import{ViewEventPriorities as n}from\"./InputManager.js\";export{MouseButton}from\"./IViewEvents.js\";const r=[\"click\",\"double-click\",\"immediate-click\",\"immediate-double-click\",\"hold\",\"drag\",\"key-down\",\"key-up\",\"pointer-down\",\"pointer-move\",\"pointer-up\",\"pointer-drag\",\"mouse-wheel\",\"pointer-enter\",\"pointer-leave\",\"gamepad\",\"focus\",\"blur\"],i={};function o(t){return!!i[t]}function s(t){for(const e of t)if(!o(e))return!1;return!0}r.forEach((t=>{i[t]=!0}));class p{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach((({handler:t,priority:e},a)=>this.inputManager.installHandlers(a,[t],e)))}disconnect(){this.inputManager&&this.handlers.forEach(((t,e)=>this.inputManager.uninstallHandlers(e))),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,e,a,r){const i=Array.isArray(t)?t:t.split(\",\");if(!s(i))return i.some(o)&&console.error(\"Error: registering input events and other events on the view at the same time is not supported.\"),null;let p,l;Array.isArray(e)?l=e:(p=e,l=[]),\"function\"==typeof a?p=a:r=a,r=null!=r?r:n.DEFAULT;const u=this._createUniqueGroupName(),m=new c(this.view,i,l,p);this.handlers.set(u,{handler:m,priority:r});for(const n of i){const t=this.handlerCounts.get(n)||0;this.handlerCounts.set(n,t+1)}return this.inputManager&&this.inputManager.installHandlers(u,[m],r),{remove:()=>this._removeHandler(u,i)}}hasHandler(t){return!!this.handlerCounts.get(t)}_removeHandler(t,e){if(this.handlers.has(t)){this.handlers.delete(t);for(const t of e){const e=this.handlerCounts.get(t);void 0===e?console.error(\"Trying to remove handler for event that has no handlers registered: \",t):1===e?this.handlerCounts.delete(t):this.handlerCounts.set(t,e-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class c extends a{constructor(t,e,a,n){super(!0),this.view=t;for(const r of e)switch(r){case\"click\":this.registerIncoming(\"click\",a,(t=>n(this._wrapClick(t))));break;case\"double-click\":this.registerIncoming(\"double-click\",a,(t=>n(this._wrapDoubleClick(t))));break;case\"immediate-click\":this.registerIncoming(\"immediate-click\",a,(t=>n(this._wrapImmediateClick(t))));break;case\"immediate-double-click\":this.registerIncoming(\"immediate-double-click\",a,(t=>n(this._wrapImmediateDoubleClick(t))));break;case\"hold\":this.registerIncoming(\"hold\",a,(t=>n(this._wrapHold(t))));break;case\"drag\":this.registerIncoming(\"drag\",a,(t=>{const e=this._wrapDrag(t);e&&n(e)}));break;case\"key-down\":this.registerIncoming(\"key-down\",a,(t=>n(this._wrapKeyDown(t))));break;case\"key-up\":this.registerIncoming(\"key-up\",a,(t=>n(this._wrapKeyUp(t))));break;case\"pointer-down\":this.registerIncoming(\"pointer-down\",a,(t=>n(this._wrapPointer(t,\"pointer-down\"))));break;case\"pointer-move\":this.registerIncoming(\"pointer-move\",a,(t=>n(this._wrapPointer(t,\"pointer-move\"))));break;case\"pointer-up\":this.registerIncoming(\"pointer-up\",a,(t=>n(this._wrapPointer(t,\"pointer-up\"))));break;case\"pointer-drag\":this.registerIncoming(\"pointer-drag\",a,(t=>n(this._wrapPointerDrag(t))));break;case\"mouse-wheel\":this.registerIncoming(\"mouse-wheel\",a,(t=>n(this._wrapMouseWheel(t))));break;case\"pointer-enter\":this.registerIncoming(\"pointer-enter\",a,(t=>n(this._wrapPointer(t,\"pointer-enter\"))));break;case\"pointer-leave\":this.registerIncoming(\"pointer-leave\",a,(t=>n(this._wrapPointer(t,\"pointer-leave\"))));break;case\"gamepad\":this.registerIncoming(\"gamepad\",a,(t=>{n(this._wrapGamepad(t))}));break;case\"focus\":this.registerIncoming(\"focus\",a,(t=>{n(this._wrapFocus(t))}));break;case\"blur\":this.registerIncoming(\"blur\",a,(t=>{n(this._wrapBlur(t))}))}}_wrapFocus(t){return{type:\"focus\",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapBlur(t){return{type:\"blur\",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapClick(t){const{pointerType:a,button:n,buttons:r,x:i,y:o,native:s,eventId:p}=t.data,{cancelable:c,timestamp:l}=t;return{type:\"click\",pointerType:a,button:n,buttons:r,x:i,y:o,native:s,timestamp:l,screenPoint:e(i,o),mapPoint:this._getMapPoint(i,o),eventId:p,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,{cancelable:p,timestamp:c}=t;return{type:\"double-click\",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:c,mapPoint:this._getMapPoint(r,i),eventId:s,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapImmediateClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:c,timestamp:l}=t;return{type:\"immediate-click\",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this._getMapPoint(r,i),eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapImmediateDoubleClick(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o,eventId:s}=t.data,p=o.pointerId,{cancelable:c,timestamp:l}=t;return{type:\"immediate-double-click\",pointerId:p,pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:l,mapPoint:this._getMapPoint(r,i),eventId:s,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapHold(t){const{pointerType:e,button:a,buttons:n,x:r,y:i,native:o}=t.data,{cancelable:s,timestamp:p}=t;return{type:\"hold\",pointerType:e,button:a,buttons:n,x:r,y:i,native:o,timestamp:p,mapPoint:this._getMapPoint(r,i),cancelable:s,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_getMapPoint(t,a){return this.view.toMap(e(t,a),{exclude:[]})}_wrapDrag(e){const a=e.data,{x:n,y:r}=a.center,{action:i,pointerType:o,button:s}=a;if(\"start\"===i&&(this.latestDragStart=a),!this.latestDragStart)return;const p=a.pointer.native,c=a.buttons,{cancelable:l,timestamp:u}=e,m={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return\"end\"===i&&(this.latestDragStart=void 0),{type:\"drag\",action:i,x:n,y:r,origin:m,pointerType:o,button:s,buttons:c,radius:a.radius,angle:t(a.angle),native:p,timestamp:u,cancelable:l,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(t){const{key:e,repeat:a,native:n}=t.data,{cancelable:r,timestamp:i}=t;return{type:\"key-down\",key:e,repeat:a,native:n,timestamp:i,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapKeyUp(t){const{key:e,native:a}=t.data,{cancelable:n,timestamp:r}=t;return{type:\"key-up\",key:e,native:a,timestamp:r,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapPointer(t,e){const{x:a,y:n,button:r,buttons:i,native:o,eventId:s}=t.data,p=o.pointerId,c=o.pointerType,{cancelable:l,timestamp:u}=t;return{type:e,x:a,y:n,pointerId:p,pointerType:c,button:r,buttons:i,native:o,timestamp:u,eventId:s,cancelable:l,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapPointerDrag(t){const{x:e,y:a,buttons:n,native:r,eventId:i}=t.data.currentEvent,{button:o}=t.data.startEvent,s=t.data.startEvent.native.pointerId,p=t.data.startEvent.native.pointerType,c=t.data.action,l={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:u,timestamp:m}=t;return{type:\"pointer-drag\",x:e,y:a,pointerId:s,pointerType:p,button:o,buttons:n,action:c,origin:l,native:r,timestamp:m,eventId:i,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapMouseWheel(t){const{cancelable:e,data:a,timestamp:n}=t,{x:r,y:i,deltaY:o,native:s}=a;return{type:\"mouse-wheel\",x:r,y:i,deltaY:o,native:s,timestamp:n,cancelable:e,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}_wrapGamepad(t){const{action:e,state:a,device:n}=t.data,{cancelable:r,timestamp:i}=t,{buttons:o,axes:s}=a;return{type:\"gamepad\",device:n,timestamp:i,action:e,buttons:o,axes:s,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:e=>t.async(e),preventDefault:()=>t.preventDefault()}}}export{p as ViewEvents,r as eventTypes};\n"]},"metadata":{},"sourceType":"module"}