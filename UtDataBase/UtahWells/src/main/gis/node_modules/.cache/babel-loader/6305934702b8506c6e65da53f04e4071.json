{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { HandleOwner as t } from \"../../../../core/HandleOwner.js\";\nimport \"../../../../core/has.js\";\nimport { property as r } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as s } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { equals as o } from \"../../../../geometry/support/spatialReferenceUtils.js\";\nimport i from \"../../../../layers/support/TileInfo.js\";\nimport { loadProcessorModule as l } from \"./processors.js\";\nimport n from \"./controllers/FeatureController2D.js\";\nimport a from \"./support/TileStore.js\";\nimport { UpdateToken as c } from \"./support/UpdateToken.js\";\nimport p from \"../../tiling/TileInfoView.js\";\nconst h = new Set();\n\nfunction d() {\n  return h;\n}\n\nlet u = class extends t {\n  constructor() {\n    super(...arguments), this.controller = null, this.processor = null, this.remoteClient = null, this.tileStore = null, this.service = null, this.viewState = null, this._paused = !1, this._pendingTileUpdates = [];\n  }\n\n  initialize() {\n    this.handles.add(this.watch(\"updating\", e => {\n      this.remoteClient.invoke(\"setUpdating\", e).catch(e => {});\n    }));\n  }\n\n  destroy() {\n    var e, t;\n    this.stop(), null == (e = this.controller) || e.destroy(), null == (t = this.processor) || t.destroy(), this.controller = this.processor = this.tileStore = this.remoteClient = null;\n  }\n\n  get updating() {\n    return !this.controller || this.controller.updating;\n  }\n\n  stop() {\n    var e, t, r;\n    this._paused = !0, Array.isArray(null == (e = this.service) ? void 0 : e.source) && (this.service.source.forEach(e => e.close()), this.service.source.length = 0), null == (t = this.tileStore) || t.updateTiles({\n      added: [],\n      removed: this.tileStore.tiles.map(e => e.id)\n    }), null == (r = this.tileStore) || r.destroy(), this.tileStore = null, this._pendingTileUpdates.length = 0;\n  }\n\n  async startup(_ref) {\n    let {\n      service: e,\n      config: t,\n      tileInfo: r,\n      tiles: s\n    } = _ref;\n    var l;\n\n    if (this._paused = !0, Array.isArray(null == (l = this.service) ? void 0 : l.source) && (this.service.source.forEach(e => e.close()), this.service.source.length = 0), this.service = e, !this.tileStore || !o(this.tileStore.tileScheme.spatialReference, r.spatialReference)) {\n      var n, c;\n      const e = new p(i.fromJSON(r));\n      s.added.length = s.removed.length = 0, null == (n = this.tileStore) || n.updateTiles({\n        added: [],\n        removed: this.tileStore.tiles.map(e => e.id)\n      }), null == (c = this.tileStore) || c.destroy(), this.tileStore = new a(e), this._pendingTileUpdates.length = 0;\n    }\n\n    for (await this._createProcessorAndController(t), await this.update({\n      config: t\n    }, !0), this.tileStore.clear(), this.tileStore.updateTiles(s), this._paused = !1; this._pendingTileUpdates.length;) this.tileStore.updateTiles(this._pendingTileUpdates.pop());\n  }\n\n  async updateTiles(e) {\n    this._paused ? this._pendingTileUpdates.push(e) : this.tileStore.updateTiles(e);\n  }\n\n  async update(_ref2) {\n    let {\n      config: e\n    } = _ref2;\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const r = c.empty();\n    return t || this.controller.pause(), await Promise.all([this.processor.update(r, e), this.controller.update(r, e)]), r.toJSON();\n  }\n\n  async applyUpdate(e) {\n    return this.controller.applyUpdate(c.create(e));\n  }\n\n  async _createProcessorAndController(e) {\n    await Promise.all([this._handleControllerConfig(e), this._handleProcessorConfig(e)]), this.controller.processor = this.processor;\n  }\n\n  async _handleControllerConfig(e) {\n    const t = await this._createController(this.service, e);\n    return await t.startup(), t;\n  }\n\n  async _handleProcessorConfig(e) {\n    return this._createProcessor(this.service, e);\n  }\n\n  async _createController(e, t) {\n    this.controller && this.controller.destroy();\n    const {\n      tileStore: r,\n      remoteClient: s\n    } = this,\n          o = new n({\n      service: e,\n      config: t,\n      tileStore: r,\n      remoteClient: s\n    });\n    return this.controller = o, o;\n  }\n\n  async _createProcessor(e, t) {\n    const r = t.schema.processors[0].type,\n          s = (await l(r)).default,\n          {\n      remoteClient: o,\n      tileStore: i\n    } = this,\n          n = new s({\n      service: e,\n      config: t,\n      tileStore: i,\n      remoteClient: o\n    });\n    return this.processor && this.processor.destroy(), this.processor = n, n;\n  }\n\n};\ne([r()], u.prototype, \"controller\", void 0), e([r()], u.prototype, \"processor\", void 0), e([r()], u.prototype, \"updating\", null), e([r()], u.prototype, \"viewState\", void 0), u = e([s(\"esri.views.2d.layers.features.Pipeline\")], u);\nconst m = u;\nexport { m as default, d as getInstances };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/features/Pipeline.js"],"names":["_","e","HandleOwner","t","property","r","subclass","s","equals","o","i","loadProcessorModule","l","n","a","UpdateToken","c","p","h","Set","d","u","constructor","arguments","controller","processor","remoteClient","tileStore","service","viewState","_paused","_pendingTileUpdates","initialize","handles","add","watch","invoke","catch","destroy","stop","updating","Array","isArray","source","forEach","close","length","updateTiles","added","removed","tiles","map","id","startup","config","tileInfo","tileScheme","spatialReference","fromJSON","_createProcessorAndController","update","clear","pop","push","empty","pause","Promise","all","toJSON","applyUpdate","create","_handleControllerConfig","_handleProcessorConfig","_createController","_createProcessor","schema","processors","type","default","prototype","m","getInstances"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{HandleOwner as t}from\"../../../../core/HandleOwner.js\";import\"../../../../core/has.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{equals as o}from\"../../../../geometry/support/spatialReferenceUtils.js\";import i from\"../../../../layers/support/TileInfo.js\";import{loadProcessorModule as l}from\"./processors.js\";import n from\"./controllers/FeatureController2D.js\";import a from\"./support/TileStore.js\";import{UpdateToken as c}from\"./support/UpdateToken.js\";import p from\"../../tiling/TileInfoView.js\";const h=new Set;function d(){return h}let u=class extends t{constructor(){super(...arguments),this.controller=null,this.processor=null,this.remoteClient=null,this.tileStore=null,this.service=null,this.viewState=null,this._paused=!1,this._pendingTileUpdates=[]}initialize(){this.handles.add(this.watch(\"updating\",(e=>{this.remoteClient.invoke(\"setUpdating\",e).catch((e=>{}))})))}destroy(){var e,t;this.stop(),null==(e=this.controller)||e.destroy(),null==(t=this.processor)||t.destroy(),this.controller=this.processor=this.tileStore=this.remoteClient=null}get updating(){return!this.controller||this.controller.updating}stop(){var e,t,r;this._paused=!0,Array.isArray(null==(e=this.service)?void 0:e.source)&&(this.service.source.forEach((e=>e.close())),this.service.source.length=0),null==(t=this.tileStore)||t.updateTiles({added:[],removed:this.tileStore.tiles.map((e=>e.id))}),null==(r=this.tileStore)||r.destroy(),this.tileStore=null,this._pendingTileUpdates.length=0}async startup({service:e,config:t,tileInfo:r,tiles:s}){var l;if(this._paused=!0,Array.isArray(null==(l=this.service)?void 0:l.source)&&(this.service.source.forEach((e=>e.close())),this.service.source.length=0),this.service=e,!this.tileStore||!o(this.tileStore.tileScheme.spatialReference,r.spatialReference)){var n,c;const e=new p(i.fromJSON(r));s.added.length=s.removed.length=0,null==(n=this.tileStore)||n.updateTiles({added:[],removed:this.tileStore.tiles.map((e=>e.id))}),null==(c=this.tileStore)||c.destroy(),this.tileStore=new a(e),this._pendingTileUpdates.length=0}for(await this._createProcessorAndController(t),await this.update({config:t},!0),this.tileStore.clear(),this.tileStore.updateTiles(s),this._paused=!1;this._pendingTileUpdates.length;)this.tileStore.updateTiles(this._pendingTileUpdates.pop())}async updateTiles(e){this._paused?this._pendingTileUpdates.push(e):this.tileStore.updateTiles(e)}async update({config:e},t=!1){const r=c.empty();return t||this.controller.pause(),await Promise.all([this.processor.update(r,e),this.controller.update(r,e)]),r.toJSON()}async applyUpdate(e){return this.controller.applyUpdate(c.create(e))}async _createProcessorAndController(e){await Promise.all([this._handleControllerConfig(e),this._handleProcessorConfig(e)]),this.controller.processor=this.processor}async _handleControllerConfig(e){const t=await this._createController(this.service,e);return await t.startup(),t}async _handleProcessorConfig(e){return this._createProcessor(this.service,e)}async _createController(e,t){this.controller&&this.controller.destroy();const{tileStore:r,remoteClient:s}=this,o=new n({service:e,config:t,tileStore:r,remoteClient:s});return this.controller=o,o}async _createProcessor(e,t){const r=t.schema.processors[0].type,s=(await l(r)).default,{remoteClient:o,tileStore:i}=this,n=new s({service:e,config:t,tileStore:i,remoteClient:o});return this.processor&&this.processor.destroy(),this.processor=n,n}};e([r()],u.prototype,\"controller\",void 0),e([r()],u.prototype,\"processor\",void 0),e([r()],u.prototype,\"updating\",null),e([r()],u.prototype,\"viewState\",void 0),u=e([s(\"esri.views.2d.layers.features.Pipeline\")],u);const m=u;export{m as default,d as getInstances};\n"]},"metadata":{},"sourceType":"module"}