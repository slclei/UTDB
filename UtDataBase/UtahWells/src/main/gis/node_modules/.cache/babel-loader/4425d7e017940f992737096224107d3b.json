{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { pt2px as t } from \"../../../../../core/screenUtils.js\";\nimport { CIMSymbolHelper as e } from \"../../../../../symbols/cim/CIMSymbolHelper.js\";\nimport r from \"../../../../../symbols/cim/Rect.js\";\nimport { AVERAGE_GLYPH_MOSAIC_ITEM as i } from \"../../../engine/webgl/definitions.js\";\nimport { getTextSymbolSize as n } from \"../../graphics/graphicsUtils.js\";\nimport { expandSymbol as s } from \"../../support/cimSymbolUtils.js\";\nconst a = {\n  \"simple-marker\": 1,\n  \"picture-marker\": 1,\n  text: 0,\n  \"simple-line\": 0,\n  \"simple-fill\": 0,\n  \"picture-fill\": 0,\n  cim: 1,\n  \"web-style\": 1\n},\n      o = .707;\n\nfunction m(t) {\n  if (!(\"visualVariables\" in t)) return 0;\n  if (!t.hasVisualVariables(\"size\")) return 0;\n  const e = t.getVisualVariablesForType(\"size\");\n  if (!e[0]) return 0;\n  const r = e[0];\n  if (\"outline\" === r.target) return 0;\n  if (\"stops\" === r.transformationType) return r.stops.map(t => t.size).reduce(g, 0);\n\n  if (\"clamped-linear\" === r.transformationType) {\n    let t = -1 / 0,\n        e = -1 / 0;\n    return t = \"number\" == typeof r.maxSize ? r.maxSize : r.maxSize.stops.map(t => t.size).reduce(g, 0), e = \"number\" == typeof r.minSize ? r.minSize : r.minSize.stops.map(t => t.size).reduce(g, 0), Math.max(t, e);\n  }\n\n  return \"real-world-size\" === r.transformationType ? 30 : void 0;\n}\n\nfunction u(t) {\n  return t.type in a;\n}\n\nasync function c(e, r, i, n, s, a) {\n  if (!e || a && \"cluster\" === a.type) return 0;\n  if (\"heatmap\" === e.type) return Math.round(3 * e.blurRadius);\n  if (\"dot-density\" === e.type) return 0;\n  if (\"dictionary\" === e.type) return \"esriGeometryPoint\" === r || \"esriGeometryMultipoint\" === r ? 100 : 200;\n  const o = e.getSymbols(),\n        u = m(e),\n        c = [];\n\n  for (const t of o) c.push(x(t, u, i, r, n, s));\n\n  const p = await Promise.all(c);\n  return t(p.reduce(g, 0));\n}\n\nconst p = [0, 0, 0, 0];\n\nfunction l(t, e) {\n  return null == t ? e : t;\n}\n\nfunction f(t, e) {\n  return null == t.outline ? e : l(t.outline.width, e);\n}\n\nconst h = {\n  sdf: !0,\n  code: 99,\n  metrics: i.metrics,\n  rect: new r(0, 0, 24, 24),\n  page: 0,\n  textureBinding: 2\n};\n\nfunction y(t) {\n  const e = t.text && t.text.length;\n  if (!e) return {\n    glyphMosaicItems: [h]\n  };\n  const r = [];\n\n  for (let i = 0; i < e; i++) r.push({ ...h,\n    code: t.text.charCodeAt(i)\n  });\n\n  return {\n    glyphMosaicItems: r\n  };\n}\n\nasync function d(t, r, i, a, m, u) {\n  if (\"simple-marker\" === t.type) {\n    const e = Math.max(l(t.size, 12), r);\n    return M(t) + e * o;\n  }\n\n  if (\"picture-marker\" === t.type) {\n    const e = Math.max(l(t.height, 12), r),\n          i = l(t.width, 12) * (e / l(t.height, 12)) / 2,\n          n = e / 2;\n    return M(t) + Math.sqrt(i * i + n * n);\n  }\n\n  if (\"text\" === t.type) {\n    const e = y(t);\n    n(p, t.toJSON(), e);\n    const r = Math.abs(p[0]),\n          i = Math.abs(p[1]),\n          s = p[2],\n          a = p[3];\n    return Math.max(r, i) + Math.max(s, a);\n  }\n\n  if (\"simple-line\" === t.type) {\n    const e = t,\n          i = Math.max(l(e.width, .75), r) / 2;\n    return e.marker ? Math.max(6 * e.width, 2 * r) : i;\n  }\n\n  if (\"simple-fill\" === t.type || \"picture-fill\" === t.type) return Math.max(f(t, 0), r) / 2;\n\n  if (\"cim\" === t.type) {\n    const n = {\n      geometryType: a,\n      fields: m,\n      spatialReference: u\n    },\n          o = {\n      type: \"cim\",\n      rendererKey: 0,\n      data: t.data,\n      maxVVSize: r\n    };\n    await s(o, n, i);\n    const c = e.getEnvelope(t.data, i);\n    return c ? Math.sqrt(c.width * c.width + c.height * c.height) : 0;\n  }\n\n  return \"web-style\" === t.type ? d(await t.fetchCIMSymbol(), r, i, a, m, u) : 0;\n}\n\nasync function x(t, e, r, i, n, s) {\n  return u(t) ? Math.min(await d(t, e, r, i, n, s), 75) : 0;\n}\n\nfunction M(t) {\n  const e = l(t.xoffset, 0),\n        r = l(t.yoffset, 0);\n  return Math.sqrt(e * e + r * r);\n}\n\nfunction g(t, e) {\n  return Math.max(t, e);\n}\n\nexport { c as computePxBuffer, m as getPtMaxVVSize };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/features/support/pixelBuffering.js"],"names":["pt2px","t","CIMSymbolHelper","e","r","AVERAGE_GLYPH_MOSAIC_ITEM","i","getTextSymbolSize","n","expandSymbol","s","a","text","cim","o","m","hasVisualVariables","getVisualVariablesForType","target","transformationType","stops","map","size","reduce","g","maxSize","minSize","Math","max","u","type","c","round","blurRadius","getSymbols","push","x","p","Promise","all","l","f","outline","width","h","sdf","code","metrics","rect","page","textureBinding","y","length","glyphMosaicItems","charCodeAt","d","M","height","sqrt","toJSON","abs","marker","geometryType","fields","spatialReference","rendererKey","data","maxVVSize","getEnvelope","fetchCIMSymbol","min","xoffset","yoffset","computePxBuffer","getPtMaxVVSize"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{pt2px as t}from\"../../../../../core/screenUtils.js\";import{CIMSymbolHelper as e}from\"../../../../../symbols/cim/CIMSymbolHelper.js\";import r from\"../../../../../symbols/cim/Rect.js\";import{AVERAGE_GLYPH_MOSAIC_ITEM as i}from\"../../../engine/webgl/definitions.js\";import{getTextSymbolSize as n}from\"../../graphics/graphicsUtils.js\";import{expandSymbol as s}from\"../../support/cimSymbolUtils.js\";const a={\"simple-marker\":1,\"picture-marker\":1,text:0,\"simple-line\":0,\"simple-fill\":0,\"picture-fill\":0,cim:1,\"web-style\":1},o=.707;function m(t){if(!(\"visualVariables\"in t))return 0;if(!t.hasVisualVariables(\"size\"))return 0;const e=t.getVisualVariablesForType(\"size\");if(!e[0])return 0;const r=e[0];if(\"outline\"===r.target)return 0;if(\"stops\"===r.transformationType)return r.stops.map((t=>t.size)).reduce(g,0);if(\"clamped-linear\"===r.transformationType){let t=-1/0,e=-1/0;return t=\"number\"==typeof r.maxSize?r.maxSize:r.maxSize.stops.map((t=>t.size)).reduce(g,0),e=\"number\"==typeof r.minSize?r.minSize:r.minSize.stops.map((t=>t.size)).reduce(g,0),Math.max(t,e)}return\"real-world-size\"===r.transformationType?30:void 0}function u(t){return t.type in a}async function c(e,r,i,n,s,a){if(!e||a&&\"cluster\"===a.type)return 0;if(\"heatmap\"===e.type)return Math.round(3*e.blurRadius);if(\"dot-density\"===e.type)return 0;if(\"dictionary\"===e.type)return\"esriGeometryPoint\"===r||\"esriGeometryMultipoint\"===r?100:200;const o=e.getSymbols(),u=m(e),c=[];for(const t of o)c.push(x(t,u,i,r,n,s));const p=await Promise.all(c);return t(p.reduce(g,0))}const p=[0,0,0,0];function l(t,e){return null==t?e:t}function f(t,e){return null==t.outline?e:l(t.outline.width,e)}const h={sdf:!0,code:99,metrics:i.metrics,rect:new r(0,0,24,24),page:0,textureBinding:2};function y(t){const e=t.text&&t.text.length;if(!e)return{glyphMosaicItems:[h]};const r=[];for(let i=0;i<e;i++)r.push({...h,code:t.text.charCodeAt(i)});return{glyphMosaicItems:r}}async function d(t,r,i,a,m,u){if(\"simple-marker\"===t.type){const e=Math.max(l(t.size,12),r);return M(t)+e*o}if(\"picture-marker\"===t.type){const e=Math.max(l(t.height,12),r),i=l(t.width,12)*(e/l(t.height,12))/2,n=e/2;return M(t)+Math.sqrt(i*i+n*n)}if(\"text\"===t.type){const e=y(t);n(p,t.toJSON(),e);const r=Math.abs(p[0]),i=Math.abs(p[1]),s=p[2],a=p[3];return Math.max(r,i)+Math.max(s,a)}if(\"simple-line\"===t.type){const e=t,i=Math.max(l(e.width,.75),r)/2;return e.marker?Math.max(6*e.width,2*r):i}if(\"simple-fill\"===t.type||\"picture-fill\"===t.type)return Math.max(f(t,0),r)/2;if(\"cim\"===t.type){const n={geometryType:a,fields:m,spatialReference:u},o={type:\"cim\",rendererKey:0,data:t.data,maxVVSize:r};await s(o,n,i);const c=e.getEnvelope(t.data,i);return c?Math.sqrt(c.width*c.width+c.height*c.height):0}return\"web-style\"===t.type?d(await t.fetchCIMSymbol(),r,i,a,m,u):0}async function x(t,e,r,i,n,s){return u(t)?Math.min(await d(t,e,r,i,n,s),75):0}function M(t){const e=l(t.xoffset,0),r=l(t.yoffset,0);return Math.sqrt(e*e+r*r)}function g(t,e){return Math.max(t,e)}export{c as computePxBuffer,m as getPtMaxVVSize};\n"]},"metadata":{},"sourceType":"module"}