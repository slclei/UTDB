{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../request.js\";\nimport t from \"../../core/Error.js\";\nimport { throwIfAbortError as r } from \"../../core/promiseUtils.js\";\nimport { normalize as o, removeFile as s } from \"../../core/urlUtils.js\";\nimport n from \"../../portal/Portal.js\";\nimport l from \"../../portal/PortalQueryParams.js\";\nimport { enableWebStyleForceWOSR as a } from \"../../support/featureFlags.js\";\nconst f = {};\n\nasync function u(e, t) {\n  try {\n    return {\n      data: (await b(e, t)).data,\n      baseUrl: s(e),\n      styleUrl: e\n    };\n  } catch (o) {\n    return r(o), null;\n  }\n}\n\nfunction i(e, t, r) {\n  const o = t && t.portal || n.getDefault();\n  let s;\n  const l = `${o.url} - ${o.user && o.user.username} - ${e}`;\n  return f[l] || (f[l] = y(e, o, r).then(e => (s = e, e.fetchData())).then(t => ({\n    data: t,\n    baseUrl: s.itemUrl,\n    styleName: e\n  }))), f[l];\n}\n\nfunction y(e, r, o) {\n  return r.load(o).then(() => {\n    const t = new l({\n      disableExtraQuery: !0,\n      query: `owner:${w} AND type:${h} AND typekeywords:\"${e}\"`\n    });\n    return r.queryItems(t, o);\n  }).then(_ref => {\n    let {\n      results: r\n    } = _ref;\n    let s = null;\n    const n = e.toLowerCase();\n    if (r && Array.isArray(r)) for (const e of r) {\n      if (e.typeKeywords.some(e => e.toLowerCase() === n) && e.type === h && e.owner === w) {\n        s = e;\n        break;\n      }\n    }\n    if (!s) throw new t(\"symbolstyleutils:style-not-found\", `The style '${e}' could not be found`, {\n      styleName: e\n    });\n    return s.load(o);\n  });\n}\n\nfunction m(e, r, o) {\n  return e.styleUrl ? u(e.styleUrl, o) : e.styleName ? i(e.styleName, r, o) : Promise.reject(new t(\"symbolstyleutils:style-url-and-name-missing\", \"Either styleUrl or styleName is required to resolve a style\"));\n}\n\nfunction c(e) {\n  return null === e || \"CIMSymbolReference\" === e.type ? e : {\n    type: \"CIMSymbolReference\",\n    symbol: e\n  };\n}\n\nfunction p(e, t) {\n  if (\"cimRef\" === t) return e.cimRef;\n  if (e.formatInfos && !a()) for (const r of e.formatInfos) if (\"gltf\" === r.type) return r.href;\n  return e.webRef;\n}\n\nfunction d(e) {\n  for (const t of e.typeKeywords) if (/^Esri.*Style$/.test(t) && \"Esri Style\" !== t) return t;\n}\n\nfunction b(t, r) {\n  const s = {\n    responseType: \"json\",\n    query: {\n      f: \"json\"\n    },\n    ...r\n  };\n  return e(o(t), s);\n}\n\nconst w = \"esri_en\",\n      h = \"Style\",\n      j = \"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";\nexport { j as Style2DUrlTemplate, m as fetchStyle, c as makeCIMSymbolRef, b as requestJSON, d as styleNameFromItem, p as symbolUrlFromStyleItem };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/support/styleUtils.js"],"names":["e","t","throwIfAbortError","r","normalize","o","removeFile","s","n","l","enableWebStyleForceWOSR","a","f","u","data","b","baseUrl","styleUrl","i","portal","getDefault","url","user","username","y","then","fetchData","itemUrl","styleName","load","disableExtraQuery","query","w","h","queryItems","results","toLowerCase","Array","isArray","typeKeywords","some","type","owner","m","Promise","reject","c","symbol","p","cimRef","formatInfos","href","webRef","d","test","responseType","j","Style2DUrlTemplate","fetchStyle","makeCIMSymbolRef","requestJSON","styleNameFromItem","symbolUrlFromStyleItem"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import t from\"../../core/Error.js\";import{throwIfAbortError as r}from\"../../core/promiseUtils.js\";import{normalize as o,removeFile as s}from\"../../core/urlUtils.js\";import n from\"../../portal/Portal.js\";import l from\"../../portal/PortalQueryParams.js\";import{enableWebStyleForceWOSR as a}from\"../../support/featureFlags.js\";const f={};async function u(e,t){try{return{data:(await b(e,t)).data,baseUrl:s(e),styleUrl:e}}catch(o){return r(o),null}}function i(e,t,r){const o=t&&t.portal||n.getDefault();let s;const l=`${o.url} - ${o.user&&o.user.username} - ${e}`;return f[l]||(f[l]=y(e,o,r).then((e=>(s=e,e.fetchData()))).then((t=>({data:t,baseUrl:s.itemUrl,styleName:e})))),f[l]}function y(e,r,o){return r.load(o).then((()=>{const t=new l({disableExtraQuery:!0,query:`owner:${w} AND type:${h} AND typekeywords:\"${e}\"`});return r.queryItems(t,o)})).then((({results:r})=>{let s=null;const n=e.toLowerCase();if(r&&Array.isArray(r))for(const e of r){if(e.typeKeywords.some((e=>e.toLowerCase()===n))&&e.type===h&&e.owner===w){s=e;break}}if(!s)throw new t(\"symbolstyleutils:style-not-found\",`The style '${e}' could not be found`,{styleName:e});return s.load(o)}))}function m(e,r,o){return e.styleUrl?u(e.styleUrl,o):e.styleName?i(e.styleName,r,o):Promise.reject(new t(\"symbolstyleutils:style-url-and-name-missing\",\"Either styleUrl or styleName is required to resolve a style\"))}function c(e){return null===e||\"CIMSymbolReference\"===e.type?e:{type:\"CIMSymbolReference\",symbol:e}}function p(e,t){if(\"cimRef\"===t)return e.cimRef;if(e.formatInfos&&!a())for(const r of e.formatInfos)if(\"gltf\"===r.type)return r.href;return e.webRef}function d(e){for(const t of e.typeKeywords)if(/^Esri.*Style$/.test(t)&&\"Esri Style\"!==t)return t}function b(t,r){const s={responseType:\"json\",query:{f:\"json\"},...r};return e(o(t),s)}const w=\"esri_en\",h=\"Style\",j=\"https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json\";export{j as Style2DUrlTemplate,m as fetchStyle,c as makeCIMSymbolRef,b as requestJSON,d as styleNameFromItem,p as symbolUrlFromStyleItem};\n"]},"metadata":{},"sourceType":"module"}