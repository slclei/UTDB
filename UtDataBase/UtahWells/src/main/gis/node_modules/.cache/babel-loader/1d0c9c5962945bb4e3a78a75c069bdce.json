{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { PathGeometryCursor as t } from \"../CIMCursor.js\";\nimport { PathHelper as e } from \"../CurveHelper.js\";\nimport { LineDashEnding as s } from \"../enums.js\";\nimport { GeometryWalker as a, DashPattern as i } from \"../GeometryWalker.js\";\n\nclass r {\n  static local() {\n    return null === r.instance && (r.instance = new r()), r.instance;\n  }\n\n  execute(t, e, s, a) {\n    return new n(t, e, s);\n  }\n\n}\n\nr.instance = null;\n\nclass n extends t {\n  constructor(t, e, s) {\n    var r, n;\n    super(t, !0, !0), this._walker = new a(), this._walker.updateTolerance(s), this._endings = e.lineDashEnding, this._customDashPos = -(null != (r = e.offsetAlongLine) ? r : 0) * s, this._offsetAtEnd = (null != (n = e.customEndingOffset) ? n : 0) * s, this._pattern = new i(), this._pattern.init(e.dashTemplate, !0), this._pattern.scale(s);\n  }\n\n  processPath(t) {\n    if (0 === this._pattern.length()) return this.iteratePath = !1, {\n      paths: [t]\n    };\n\n    if (!this.iteratePath) {\n      let e = !0;\n\n      switch (this._endings) {\n        case s.HalfPattern:\n        case s.HalfGap:\n        default:\n          this._pattern.extPtGap = 0;\n          break;\n\n        case s.FullPattern:\n          this.isClosed || (this._pattern.extPtGap = .5 * this._pattern.firstValue());\n          break;\n\n        case s.FullGap:\n          this.isClosed || (this._pattern.extPtGap = .5 * this._pattern.lastValue());\n          break;\n\n        case s.NoConstraint:\n          this.isClosed || (e = !1);\n          break;\n\n        case s.Custom:\n          this.isClosed || (this._pattern.extPtGap = .5 * this._offsetAtEnd);\n      }\n\n      const a = this._walker.calculatePathLength(t);\n\n      if (this._pattern.isEmpty() || a < .1 * this._pattern.length()) return {\n        paths: [t]\n      };\n      if (!this._walker.init(t, this._pattern, e)) return {\n        paths: [t]\n      };\n    }\n\n    let a;\n    if (this.iteratePath) a = this._pattern.nextValue();else {\n      let t;\n\n      switch (this._endings) {\n        case s.HalfPattern:\n        default:\n          t = .5 * this._pattern.firstValue();\n          break;\n\n        case s.HalfGap:\n          t = .5 * -this._pattern.lastValue();\n          break;\n\n        case s.FullGap:\n          t = -this._pattern.lastValue();\n          break;\n\n        case s.FullPattern:\n          t = 0;\n          break;\n\n        case s.NoConstraint:\n        case s.Custom:\n          t = -this._customDashPos;\n      }\n\n      let e = t / this._pattern.length();\n\n      e -= Math.floor(e), t = e * this._pattern.length(), this._pattern.reset(), a = this._pattern.nextValue();\n      let i = !1;\n\n      for (; t >= a;) t -= a, a = this._pattern.nextValue(), i = !i;\n\n      a -= t, i ? (this._walker.nextPosition(a), a = this._pattern.nextValue()) : this.isClosed && (this._firstCurve = this._walker.nextCurve(a), a = this._pattern.nextValue(), this._walker.nextPosition(a), a = this._pattern.nextValue());\n    }\n\n    let i = this._walker.nextCurve(a);\n\n    return i ? this._walker.isPathEnd() ? (this.iteratePath = !1, this._firstCurve && (this._firstCurve.splice(0, 1), e.mergePath(i, this._firstCurve), this._firstCurve = null)) : (a = this._pattern.nextValue(), !this._walker.nextPosition(a) || this._walker.isPathEnd() ? (this.iteratePath = !1, this._firstCurve && (i = this._firstCurve, this._firstCurve = null)) : this.iteratePath = !0) : (this.iteratePath = !1, i = this._firstCurve, this._firstCurve = null), {\n      paths: [i]\n    };\n  }\n\n}\n\nexport { r as EffectDashes };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/effects/EffectDashes.js"],"names":["PathGeometryCursor","t","PathHelper","e","LineDashEnding","s","GeometryWalker","a","DashPattern","i","r","local","instance","execute","n","constructor","_walker","updateTolerance","_endings","lineDashEnding","_customDashPos","offsetAlongLine","_offsetAtEnd","customEndingOffset","_pattern","init","dashTemplate","scale","processPath","length","iteratePath","paths","HalfPattern","HalfGap","extPtGap","FullPattern","isClosed","firstValue","FullGap","lastValue","NoConstraint","Custom","calculatePathLength","isEmpty","nextValue","Math","floor","reset","nextPosition","_firstCurve","nextCurve","isPathEnd","splice","mergePath","EffectDashes"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{PathGeometryCursor as t}from\"../CIMCursor.js\";import{PathHelper as e}from\"../CurveHelper.js\";import{LineDashEnding as s}from\"../enums.js\";import{GeometryWalker as a,DashPattern as i}from\"../GeometryWalker.js\";class r{static local(){return null===r.instance&&(r.instance=new r),r.instance}execute(t,e,s,a){return new n(t,e,s)}}r.instance=null;class n extends t{constructor(t,e,s){var r,n;super(t,!0,!0),this._walker=new a,this._walker.updateTolerance(s),this._endings=e.lineDashEnding,this._customDashPos=-(null!=(r=e.offsetAlongLine)?r:0)*s,this._offsetAtEnd=(null!=(n=e.customEndingOffset)?n:0)*s,this._pattern=new i,this._pattern.init(e.dashTemplate,!0),this._pattern.scale(s)}processPath(t){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[t]};if(!this.iteratePath){let e=!0;switch(this._endings){case s.HalfPattern:case s.HalfGap:default:this._pattern.extPtGap=0;break;case s.FullPattern:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case s.FullGap:this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case s.NoConstraint:this.isClosed||(e=!1);break;case s.Custom:this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}const a=this._walker.calculatePathLength(t);if(this._pattern.isEmpty()||a<.1*this._pattern.length())return{paths:[t]};if(!this._walker.init(t,this._pattern,e))return{paths:[t]}}let a;if(this.iteratePath)a=this._pattern.nextValue();else{let t;switch(this._endings){case s.HalfPattern:default:t=.5*this._pattern.firstValue();break;case s.HalfGap:t=.5*-this._pattern.lastValue();break;case s.FullGap:t=-this._pattern.lastValue();break;case s.FullPattern:t=0;break;case s.NoConstraint:case s.Custom:t=-this._customDashPos}let e=t/this._pattern.length();e-=Math.floor(e),t=e*this._pattern.length(),this._pattern.reset(),a=this._pattern.nextValue();let i=!1;for(;t>=a;)t-=a,a=this._pattern.nextValue(),i=!i;a-=t,i?(this._walker.nextPosition(a),a=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(a),a=this._pattern.nextValue(),this._walker.nextPosition(a),a=this._pattern.nextValue())}let i=this._walker.nextCurve(a);return i?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,1),e.mergePath(i,this._firstCurve),this._firstCurve=null)):(a=this._pattern.nextValue(),!this._walker.nextPosition(a)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(i=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,i=this._firstCurve,this._firstCurve=null),{paths:[i]}}}export{r as EffectDashes};\n"]},"metadata":{},"sourceType":"module"}