{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { clampFloat32 as e } from \"../../core/mathUtils.js\";\nvar t = {};\nt.defaultNoDataValue = e(-1 / 0), t.decode = function (s, r) {\n  var o = (r = r || {}).encodedMaskData || null === r.encodedMaskData,\n      f = l(s, r.inputOffset || 0, o),\n      u = null != r.noDataValue ? e(r.noDataValue) : t.defaultNoDataValue,\n      m = i(f, r.pixelType || Float32Array, r.encodedMaskData, u, r.returnMask),\n      d = {\n    width: f.width,\n    height: f.height,\n    pixelData: m.resultPixels,\n    minValue: f.pixels.minValue,\n    maxValue: f.pixels.maxValue,\n    noDataValue: u\n  };\n  return m.resultMask && (d.maskData = m.resultMask), r.returnEncodedMask && f.mask && (d.encodedMaskData = f.mask.bitset ? f.mask.bitset : null), r.returnFileInfo && (d.fileInfo = n(f, u), r.computeUsedBitDepths && (d.fileInfo.bitDepths = a(f))), d;\n};\n\nvar i = function (e, t, i, n, a) {\n  var l,\n      r,\n      o = 0,\n      f = e.pixels.numBlocksX,\n      u = e.pixels.numBlocksY,\n      m = Math.floor(e.width / f),\n      d = Math.floor(e.height / u),\n      c = 2 * e.maxZError;\n  i = i || (e.mask ? e.mask.bitset : null), l = new t(e.width * e.height), a && i && (r = new Uint8Array(e.width * e.height));\n\n  for (var g, h, k = new Float32Array(m * d), x = 0; x <= u; x++) {\n    var p = x !== u ? d : e.height % u;\n    if (0 !== p) for (var w = 0; w <= f; w++) {\n      var y = w !== f ? m : e.width % f;\n\n      if (0 !== y) {\n        var V,\n            B,\n            v,\n            U,\n            D = x * e.width * d + w * m,\n            M = e.width - y,\n            b = e.pixels.blocks[o];\n        if (b.encoding < 2 ? (0 === b.encoding ? V = b.rawData : (s(b.stuffedData, b.bitsPerPixel, b.numValidPixels, b.offset, c, k, e.pixels.maxValue), V = k), B = 0) : v = 2 === b.encoding ? 0 : b.offset, i) for (h = 0; h < p; h++) {\n          for (7 & D && (U = i[D >> 3], U <<= 7 & D), g = 0; g < y; g++) 7 & D || (U = i[D >> 3]), 128 & U ? (r && (r[D] = 1), l[D++] = b.encoding < 2 ? V[B++] : v) : (r && (r[D] = 0), l[D++] = n), U <<= 1;\n\n          D += M;\n        } else if (b.encoding < 2) for (h = 0; h < p; h++) {\n          for (g = 0; g < y; g++) l[D++] = V[B++];\n\n          D += M;\n        } else for (h = 0; h < p; h++) if (l.fill) l.fill(v, D, D + y), D += y + M;else {\n          for (g = 0; g < y; g++) l[D++] = v;\n\n          D += M;\n        }\n        if (1 === b.encoding && B !== b.numValidPixels) throw \"Block and Mask do not match\";\n        o++;\n      }\n    }\n  }\n\n  return {\n    resultPixels: l,\n    resultMask: r\n  };\n},\n    n = function (e, t) {\n  return {\n    fileIdentifierString: e.fileIdentifierString,\n    fileVersion: e.fileVersion,\n    imageType: e.imageType,\n    height: e.height,\n    width: e.width,\n    maxZError: e.maxZError,\n    eofOffset: e.eofOffset,\n    mask: e.mask ? {\n      numBlocksX: e.mask.numBlocksX,\n      numBlocksY: e.mask.numBlocksY,\n      numBytes: e.mask.numBytes,\n      maxValue: e.mask.maxValue\n    } : null,\n    pixels: {\n      numBlocksX: e.pixels.numBlocksX,\n      numBlocksY: e.pixels.numBlocksY,\n      numBytes: e.pixels.numBytes,\n      maxValue: e.pixels.maxValue,\n      minValue: e.pixels.minValue,\n      noDataValue: t\n    }\n  };\n},\n    a = function (e) {\n  for (var t = e.pixels.numBlocksX * e.pixels.numBlocksY, i = {}, n = 0; n < t; n++) {\n    var a = e.pixels.blocks[n];\n    0 === a.encoding ? i.float32 = !0 : 1 === a.encoding ? i[a.bitsPerPixel] = !0 : i[0] = !0;\n  }\n\n  return Object.keys(i);\n},\n    l = function (e, t, i) {\n  var n = {},\n      a = new Uint8Array(e, t, 10);\n  if (n.fileIdentifierString = String.fromCharCode.apply(null, a), \"CntZImage\" != n.fileIdentifierString.trim()) throw \"Unexpected file identifier string: \" + n.fileIdentifierString;\n  t += 10;\n  var l = new DataView(e, t, 24);\n  if (n.fileVersion = l.getInt32(0, !0), n.imageType = l.getInt32(4, !0), n.height = l.getUint32(8, !0), n.width = l.getUint32(12, !0), n.maxZError = l.getFloat64(16, !0), t += 24, !i) if (l = new DataView(e, t, 16), n.mask = {}, n.mask.numBlocksY = l.getUint32(0, !0), n.mask.numBlocksX = l.getUint32(4, !0), n.mask.numBytes = l.getUint32(8, !0), n.mask.maxValue = l.getFloat32(12, !0), t += 16, n.mask.numBytes > 0) {\n    var s = new Uint8Array(Math.ceil(n.width * n.height / 8)),\n        r = (l = new DataView(e, t, n.mask.numBytes)).getInt16(0, !0),\n        o = 2,\n        f = 0;\n\n    do {\n      if (r > 0) for (; r--;) s[f++] = l.getUint8(o++);else {\n        var u = l.getUint8(o++);\n\n        for (r = -r; r--;) s[f++] = u;\n      }\n      r = l.getInt16(o, !0), o += 2;\n    } while (o < n.mask.numBytes);\n\n    if (-32768 !== r || f < s.length) throw \"Unexpected end of mask RLE encoding\";\n    n.mask.bitset = s, t += n.mask.numBytes;\n  } else if (0 == (n.mask.numBytes | n.mask.numBlocksY | n.mask.maxValue)) {\n    s = new Uint8Array(Math.ceil(n.width * n.height / 8));\n    n.mask.bitset = s;\n  }\n  l = new DataView(e, t, 16), n.pixels = {}, n.pixels.numBlocksY = l.getUint32(0, !0), n.pixels.numBlocksX = l.getUint32(4, !0), n.pixels.numBytes = l.getUint32(8, !0), n.pixels.maxValue = l.getFloat32(12, !0), t += 16;\n  var m = n.pixels.numBlocksX,\n      d = n.pixels.numBlocksY,\n      c = m + (n.width % m > 0 ? 1 : 0),\n      g = d + (n.height % d > 0 ? 1 : 0);\n  n.pixels.blocks = new Array(c * g);\n\n  for (var h = 1e9, k = 0, x = 0; x < g; x++) for (var p = 0; p < c; p++) {\n    var w = 0,\n        y = e.byteLength - t;\n    l = new DataView(e, t, Math.min(10, y));\n    var V = {};\n    n.pixels.blocks[k++] = V;\n    var B = l.getUint8(0);\n    if (w++, V.encoding = 63 & B, V.encoding > 3) throw \"Invalid block encoding (\" + V.encoding + \")\";\n\n    if (2 !== V.encoding) {\n      if (0 !== B && 2 !== B) {\n        if (B >>= 6, V.offsetType = B, 2 === B) V.offset = l.getInt8(1), w++;else if (1 === B) V.offset = l.getInt16(1, !0), w += 2;else {\n          if (0 !== B) throw \"Invalid block offset type\";\n          V.offset = l.getFloat32(1, !0), w += 4;\n        }\n        if (h = Math.min(V.offset, h), 1 === V.encoding) if (B = l.getUint8(w), w++, V.bitsPerPixel = 63 & B, B >>= 6, V.numValidPixelsType = B, 2 === B) V.numValidPixels = l.getUint8(w), w++;else if (1 === B) V.numValidPixels = l.getUint16(w, !0), w += 2;else {\n          if (0 !== B) throw \"Invalid valid pixel count type\";\n          V.numValidPixels = l.getUint32(w, !0), w += 4;\n        }\n      }\n\n      var v;\n      if (t += w, 3 != V.encoding) if (0 === V.encoding) {\n        var U = (n.pixels.numBytes - 1) / 4;\n        if (U !== Math.floor(U)) throw \"uncompressed block has invalid length\";\n        v = new ArrayBuffer(4 * U), new Uint8Array(v).set(new Uint8Array(e, t, 4 * U));\n\n        for (var D = new Float32Array(v), M = 0; M < D.length; M++) h = Math.min(h, D[M]);\n\n        V.rawData = D, t += 4 * U;\n      } else if (1 === V.encoding) {\n        var b = Math.ceil(V.numValidPixels * V.bitsPerPixel / 8),\n            I = Math.ceil(b / 4);\n        v = new ArrayBuffer(4 * I), new Uint8Array(v).set(new Uint8Array(e, t, b)), V.stuffedData = new Uint32Array(v), t += b;\n      }\n    } else t++, h = Math.min(h, 0);\n  }\n\n  return n.pixels.minValue = h, n.eofOffset = t, n;\n},\n    s = function (e, t, i, n, a, l, s) {\n  var r,\n      o,\n      f,\n      u = (1 << t) - 1,\n      m = 0,\n      d = 0,\n      c = Math.ceil((s - n) / a),\n      g = 4 * e.length - Math.ceil(t * i / 8);\n\n  for (e[e.length - 1] <<= 8 * g, r = 0; r < i; r++) {\n    if (0 === d && (f = e[m++], d = 32), d >= t) o = f >>> d - t & u, d -= t;else {\n      var h = t - d;\n      o = (f & u) << h & u, o += (f = e[m++]) >>> (d = 32 - h);\n    }\n    l[r] = o < c ? n + o * a : s;\n  }\n\n  return l;\n};\n\nconst r = t.decode;\n\nclass o {\n  _decode(e) {\n    const t = r(e.buffer, e.options);\n    return Promise.resolve({\n      result: t,\n      transferList: [t.pixelData.buffer]\n    });\n  }\n\n}\n\nfunction f() {\n  return new o();\n}\n\nexport { f as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/support/LercWorker.js"],"names":["clampFloat32","e","t","defaultNoDataValue","decode","s","r","o","encodedMaskData","f","l","inputOffset","u","noDataValue","m","i","pixelType","Float32Array","returnMask","d","width","height","pixelData","resultPixels","minValue","pixels","maxValue","resultMask","maskData","returnEncodedMask","mask","bitset","returnFileInfo","fileInfo","n","computeUsedBitDepths","bitDepths","a","numBlocksX","numBlocksY","Math","floor","c","maxZError","Uint8Array","g","h","k","x","p","w","y","V","B","v","U","D","M","b","blocks","encoding","rawData","stuffedData","bitsPerPixel","numValidPixels","offset","fill","fileIdentifierString","fileVersion","imageType","eofOffset","numBytes","float32","Object","keys","String","fromCharCode","apply","trim","DataView","getInt32","getUint32","getFloat64","getFloat32","ceil","getInt16","getUint8","length","Array","byteLength","min","offsetType","getInt8","numValidPixelsType","getUint16","ArrayBuffer","set","I","Uint32Array","_decode","buffer","options","Promise","resolve","result","transferList","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{clampFloat32 as e}from\"../../core/mathUtils.js\";var t={};t.defaultNoDataValue=e(-1/0),t.decode=function(s,r){var o=(r=r||{}).encodedMaskData||null===r.encodedMaskData,f=l(s,r.inputOffset||0,o),u=null!=r.noDataValue?e(r.noDataValue):t.defaultNoDataValue,m=i(f,r.pixelType||Float32Array,r.encodedMaskData,u,r.returnMask),d={width:f.width,height:f.height,pixelData:m.resultPixels,minValue:f.pixels.minValue,maxValue:f.pixels.maxValue,noDataValue:u};return m.resultMask&&(d.maskData=m.resultMask),r.returnEncodedMask&&f.mask&&(d.encodedMaskData=f.mask.bitset?f.mask.bitset:null),r.returnFileInfo&&(d.fileInfo=n(f,u),r.computeUsedBitDepths&&(d.fileInfo.bitDepths=a(f))),d};var i=function(e,t,i,n,a){var l,r,o=0,f=e.pixels.numBlocksX,u=e.pixels.numBlocksY,m=Math.floor(e.width/f),d=Math.floor(e.height/u),c=2*e.maxZError;i=i||(e.mask?e.mask.bitset:null),l=new t(e.width*e.height),a&&i&&(r=new Uint8Array(e.width*e.height));for(var g,h,k=new Float32Array(m*d),x=0;x<=u;x++){var p=x!==u?d:e.height%u;if(0!==p)for(var w=0;w<=f;w++){var y=w!==f?m:e.width%f;if(0!==y){var V,B,v,U,D=x*e.width*d+w*m,M=e.width-y,b=e.pixels.blocks[o];if(b.encoding<2?(0===b.encoding?V=b.rawData:(s(b.stuffedData,b.bitsPerPixel,b.numValidPixels,b.offset,c,k,e.pixels.maxValue),V=k),B=0):v=2===b.encoding?0:b.offset,i)for(h=0;h<p;h++){for(7&D&&(U=i[D>>3],U<<=7&D),g=0;g<y;g++)7&D||(U=i[D>>3]),128&U?(r&&(r[D]=1),l[D++]=b.encoding<2?V[B++]:v):(r&&(r[D]=0),l[D++]=n),U<<=1;D+=M}else if(b.encoding<2)for(h=0;h<p;h++){for(g=0;g<y;g++)l[D++]=V[B++];D+=M}else for(h=0;h<p;h++)if(l.fill)l.fill(v,D,D+y),D+=y+M;else{for(g=0;g<y;g++)l[D++]=v;D+=M}if(1===b.encoding&&B!==b.numValidPixels)throw\"Block and Mask do not match\";o++}}}return{resultPixels:l,resultMask:r}},n=function(e,t){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:t}}},a=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,i={},n=0;n<t;n++){var a=e.pixels.blocks[n];0===a.encoding?i.float32=!0:1===a.encoding?i[a.bitsPerPixel]=!0:i[0]=!0}return Object.keys(i)},l=function(e,t,i){var n={},a=new Uint8Array(e,t,10);if(n.fileIdentifierString=String.fromCharCode.apply(null,a),\"CntZImage\"!=n.fileIdentifierString.trim())throw\"Unexpected file identifier string: \"+n.fileIdentifierString;t+=10;var l=new DataView(e,t,24);if(n.fileVersion=l.getInt32(0,!0),n.imageType=l.getInt32(4,!0),n.height=l.getUint32(8,!0),n.width=l.getUint32(12,!0),n.maxZError=l.getFloat64(16,!0),t+=24,!i)if(l=new DataView(e,t,16),n.mask={},n.mask.numBlocksY=l.getUint32(0,!0),n.mask.numBlocksX=l.getUint32(4,!0),n.mask.numBytes=l.getUint32(8,!0),n.mask.maxValue=l.getFloat32(12,!0),t+=16,n.mask.numBytes>0){var s=new Uint8Array(Math.ceil(n.width*n.height/8)),r=(l=new DataView(e,t,n.mask.numBytes)).getInt16(0,!0),o=2,f=0;do{if(r>0)for(;r--;)s[f++]=l.getUint8(o++);else{var u=l.getUint8(o++);for(r=-r;r--;)s[f++]=u}r=l.getInt16(o,!0),o+=2}while(o<n.mask.numBytes);if(-32768!==r||f<s.length)throw\"Unexpected end of mask RLE encoding\";n.mask.bitset=s,t+=n.mask.numBytes}else if(0==(n.mask.numBytes|n.mask.numBlocksY|n.mask.maxValue)){s=new Uint8Array(Math.ceil(n.width*n.height/8));n.mask.bitset=s}l=new DataView(e,t,16),n.pixels={},n.pixels.numBlocksY=l.getUint32(0,!0),n.pixels.numBlocksX=l.getUint32(4,!0),n.pixels.numBytes=l.getUint32(8,!0),n.pixels.maxValue=l.getFloat32(12,!0),t+=16;var m=n.pixels.numBlocksX,d=n.pixels.numBlocksY,c=m+(n.width%m>0?1:0),g=d+(n.height%d>0?1:0);n.pixels.blocks=new Array(c*g);for(var h=1e9,k=0,x=0;x<g;x++)for(var p=0;p<c;p++){var w=0,y=e.byteLength-t;l=new DataView(e,t,Math.min(10,y));var V={};n.pixels.blocks[k++]=V;var B=l.getUint8(0);if(w++,V.encoding=63&B,V.encoding>3)throw\"Invalid block encoding (\"+V.encoding+\")\";if(2!==V.encoding){if(0!==B&&2!==B){if(B>>=6,V.offsetType=B,2===B)V.offset=l.getInt8(1),w++;else if(1===B)V.offset=l.getInt16(1,!0),w+=2;else{if(0!==B)throw\"Invalid block offset type\";V.offset=l.getFloat32(1,!0),w+=4}if(h=Math.min(V.offset,h),1===V.encoding)if(B=l.getUint8(w),w++,V.bitsPerPixel=63&B,B>>=6,V.numValidPixelsType=B,2===B)V.numValidPixels=l.getUint8(w),w++;else if(1===B)V.numValidPixels=l.getUint16(w,!0),w+=2;else{if(0!==B)throw\"Invalid valid pixel count type\";V.numValidPixels=l.getUint32(w,!0),w+=4}}var v;if(t+=w,3!=V.encoding)if(0===V.encoding){var U=(n.pixels.numBytes-1)/4;if(U!==Math.floor(U))throw\"uncompressed block has invalid length\";v=new ArrayBuffer(4*U),new Uint8Array(v).set(new Uint8Array(e,t,4*U));for(var D=new Float32Array(v),M=0;M<D.length;M++)h=Math.min(h,D[M]);V.rawData=D,t+=4*U}else if(1===V.encoding){var b=Math.ceil(V.numValidPixels*V.bitsPerPixel/8),I=Math.ceil(b/4);v=new ArrayBuffer(4*I),new Uint8Array(v).set(new Uint8Array(e,t,b)),V.stuffedData=new Uint32Array(v),t+=b}}else t++,h=Math.min(h,0)}return n.pixels.minValue=h,n.eofOffset=t,n},s=function(e,t,i,n,a,l,s){var r,o,f,u=(1<<t)-1,m=0,d=0,c=Math.ceil((s-n)/a),g=4*e.length-Math.ceil(t*i/8);for(e[e.length-1]<<=8*g,r=0;r<i;r++){if(0===d&&(f=e[m++],d=32),d>=t)o=f>>>d-t&u,d-=t;else{var h=t-d;o=(f&u)<<h&u,o+=(f=e[m++])>>>(d=32-h)}l[r]=o<c?n+o*a:s}return l};const r=t.decode;class o{_decode(e){const t=r(e.buffer,e.options);return Promise.resolve({result:t,transferList:[t.pixelData.buffer]})}}function f(){return new o}export{f as default};\n"]},"metadata":{},"sourceType":"module"}