{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { releaseMaybe as t, isNone as e, isSome as i } from \"../../../../core/maybe.js\";\nimport { isPromiseLike as r } from \"../../../../core/promiseUtils.js\";\nimport { ResourceState as s } from \"./basicInterfaces.js\";\nimport u from \"./GLMaterial.js\";\n\nclass o extends u {\n  constructor(t) {\n    super(t), this._numLoading = 0, this._disposed = !1, this._textureRepository = t.textureRep, this._textureId = t.textureId, this._acquire(t.textureId, t => this._texture = t), this._acquire(t.normalTextureId, t => this._textureNormal = t), this._acquire(t.emissiveTextureId, t => this._textureEmissive = t), this._acquire(t.occlusionTextureId, t => this._textureOcclusion = t), this._acquire(t.metallicRoughnessTextureId, t => this._textureMetallicRoughness = t);\n  }\n\n  dispose() {\n    this._texture = t(this._texture), this._textureNormal = t(this._textureNormal), this._textureEmissive = t(this._textureEmissive), this._textureOcclusion = t(this._textureOcclusion), this._textureMetallicRoughness = t(this._textureMetallicRoughness), this._disposed = !0;\n  }\n\n  ensureResources(t) {\n    return 0 === this._numLoading ? s.LOADED : s.LOADING;\n  }\n\n  updateTexture(i) {\n    (e(this._texture) || i !== this._texture.id) && (this._texture = t(this._texture), this._textureId = i, this._acquire(this._textureId, t => this._texture = t));\n  }\n\n  bindTextures(t) {\n    i(this._texture) && t.bindTexture(this._texture.glTexture, \"tex\"), i(this._textureNormal) && t.bindTexture(this._textureNormal.glTexture, \"normalTexture\"), i(this._textureEmissive) && t.bindTexture(this._textureEmissive.glTexture, \"texEmission\"), i(this._textureOcclusion) && t.bindTexture(this._textureOcclusion.glTexture, \"texOcclusion\"), i(this._textureMetallicRoughness) && t.bindTexture(this._textureMetallicRoughness.glTexture, \"texMetallicRoughness\");\n  }\n\n  bindTextureScale(t) {\n    const e = i(this._texture) ? this._texture.glTexture : null;\n    i(e) && e.descriptor.textureCoordinateScaleFactor ? t.setUniform2fv(\"textureCoordinateScaleFactor\", e.descriptor.textureCoordinateScaleFactor) : t.setUniform2f(\"textureCoordinateScaleFactor\", 1, 1);\n  }\n\n  _acquire(i, s) {\n    if (e(i)) return void s(null);\n\n    const u = this._textureRepository.acquire(i);\n\n    if (r(u)) return ++this._numLoading, void u.then(e => {\n      if (this._disposed) return t(e), void s(null);\n      s(e);\n    }).finally(() => --this._numLoading);\n    s(u);\n  }\n\n}\n\nexport { o as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialTexture.js"],"names":["releaseMaybe","t","isNone","e","isSome","i","isPromiseLike","r","ResourceState","s","u","o","constructor","_numLoading","_disposed","_textureRepository","textureRep","_textureId","textureId","_acquire","_texture","normalTextureId","_textureNormal","emissiveTextureId","_textureEmissive","occlusionTextureId","_textureOcclusion","metallicRoughnessTextureId","_textureMetallicRoughness","dispose","ensureResources","LOADED","LOADING","updateTexture","id","bindTextures","bindTexture","glTexture","bindTextureScale","descriptor","textureCoordinateScaleFactor","setUniform2fv","setUniform2f","acquire","then","finally","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{releaseMaybe as t,isNone as e,isSome as i}from\"../../../../core/maybe.js\";import{isPromiseLike as r}from\"../../../../core/promiseUtils.js\";import{ResourceState as s}from\"./basicInterfaces.js\";import u from\"./GLMaterial.js\";class o extends u{constructor(t){super(t),this._numLoading=0,this._disposed=!1,this._textureRepository=t.textureRep,this._textureId=t.textureId,this._acquire(t.textureId,(t=>this._texture=t)),this._acquire(t.normalTextureId,(t=>this._textureNormal=t)),this._acquire(t.emissiveTextureId,(t=>this._textureEmissive=t)),this._acquire(t.occlusionTextureId,(t=>this._textureOcclusion=t)),this._acquire(t.metallicRoughnessTextureId,(t=>this._textureMetallicRoughness=t))}dispose(){this._texture=t(this._texture),this._textureNormal=t(this._textureNormal),this._textureEmissive=t(this._textureEmissive),this._textureOcclusion=t(this._textureOcclusion),this._textureMetallicRoughness=t(this._textureMetallicRoughness),this._disposed=!0}ensureResources(t){return 0===this._numLoading?s.LOADED:s.LOADING}updateTexture(i){(e(this._texture)||i!==this._texture.id)&&(this._texture=t(this._texture),this._textureId=i,this._acquire(this._textureId,(t=>this._texture=t)))}bindTextures(t){i(this._texture)&&t.bindTexture(this._texture.glTexture,\"tex\"),i(this._textureNormal)&&t.bindTexture(this._textureNormal.glTexture,\"normalTexture\"),i(this._textureEmissive)&&t.bindTexture(this._textureEmissive.glTexture,\"texEmission\"),i(this._textureOcclusion)&&t.bindTexture(this._textureOcclusion.glTexture,\"texOcclusion\"),i(this._textureMetallicRoughness)&&t.bindTexture(this._textureMetallicRoughness.glTexture,\"texMetallicRoughness\")}bindTextureScale(t){const e=i(this._texture)?this._texture.glTexture:null;i(e)&&e.descriptor.textureCoordinateScaleFactor?t.setUniform2fv(\"textureCoordinateScaleFactor\",e.descriptor.textureCoordinateScaleFactor):t.setUniform2f(\"textureCoordinateScaleFactor\",1,1)}_acquire(i,s){if(e(i))return void s(null);const u=this._textureRepository.acquire(i);if(r(u))return++this._numLoading,void u.then((e=>{if(this._disposed)return t(e),void s(null);s(e)})).finally((()=>--this._numLoading));s(u)}}export{o as default};\n"]},"metadata":{},"sourceType":"module"}