{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { e as n } from \"../../chunks/earcut.js\";\nimport { isClockwise as t } from \"./coordsUtils.js\";\nimport { deduplicate as e } from \"./meshUtils/deduplicate.js\";\n\nfunction o(t) {\n  const o = l(t.rings, t.hasZ, c.CCW_IS_HOLE),\n        s = [];\n  let i = 0,\n      h = 0;\n\n  for (const e of o.polygons) {\n    const t = e.count,\n          r = e.index,\n          l = new Float64Array(o.position.buffer, 3 * r * o.position.BYTES_PER_ELEMENT, 3 * t),\n          c = e.holeIndices.map(n => n - r),\n          f = new Uint32Array(n(l, c, 3));\n    s.push({\n      position: l,\n      faces: f\n    }), i += l.length, h += f.length;\n  }\n\n  const f = r(s, i, h),\n        a = e(f.position.buffer, 6, {\n    originalIndices: f.faces\n  });\n  return f.position = new Float64Array(a.buffer), f.faces = a.indices, f;\n}\n\nfunction r(n, t, e) {\n  if (1 === n.length) return n[0];\n  const o = new Float64Array(t),\n        r = new Uint32Array(e);\n  let l = 0,\n      s = 0,\n      i = 0;\n\n  for (const c of n) {\n    for (let n = 0; n < c.position.length; n++) o[l++] = c.position[n];\n\n    for (let n = 0; n < c.faces.length; n++) r[s++] = c.faces[n] + i;\n\n    i = l / 3;\n  }\n\n  return {\n    position: o,\n    faces: r\n  };\n}\n\nfunction l(n, t, e) {\n  const o = n.length,\n        r = new Array(o),\n        l = new Array(o),\n        h = new Array(o);\n  let f = 0,\n      a = 0,\n      g = 0,\n      u = 0;\n\n  for (let s = 0; s < o; ++s) u += n[s].length;\n\n  const p = new Float64Array(3 * u);\n  let d = 0;\n\n  for (let y = o - 1; y >= 0; y--) {\n    const u = n[y],\n          w = e === c.CCW_IS_HOLE && i(u);\n    if (w && 1 !== o) r[f++] = u;else {\n      let n = u.length;\n\n      for (let t = 0; t < f; ++t) n += r[t].length;\n\n      const e = {\n        index: d,\n        pathLengths: new Array(f + 1),\n        count: n,\n        holeIndices: new Array(f)\n      };\n      e.pathLengths[0] = u.length, u.length > 0 && (h[g++] = {\n        index: d,\n        count: u.length\n      }), d = w ? s(u, u.length - 1, -1, p, d, u.length, t) : s(u, 0, 1, p, d, u.length, t);\n\n      for (let o = 0; o < f; ++o) {\n        const n = r[o];\n        e.holeIndices[o] = d, e.pathLengths[o + 1] = n.length, n.length > 0 && (h[g++] = {\n          index: d,\n          count: n.length\n        }), d = s(n, 0, 1, p, d, n.length, t);\n      }\n\n      f = 0, e.count > 0 && (l[a++] = e);\n    }\n  }\n\n  for (let i = 0; i < f; ++i) {\n    const n = r[i];\n    n.length > 0 && (h[g++] = {\n      index: d,\n      count: n.length\n    }), d = s(n, 0, 1, p, d, n.length, t);\n  }\n\n  return a < o && (l.length = a), g < o && (h.length = g), {\n    position: p,\n    polygons: l,\n    outlines: h\n  };\n}\n\nfunction s(n, t, e, o, r, l, s) {\n  r *= 3;\n\n  for (let i = 0; i < l; ++i) {\n    const l = n[t];\n    o[r++] = l[0], o[r++] = l[1], o[r++] = s ? l[2] : 0, t += e;\n  }\n\n  return r / 3;\n}\n\nfunction i(n) {\n  return !t(n, !1, !1);\n}\n\nvar c;\n!function (n) {\n  n[n.NONE = 0] = \"NONE\", n[n.CCW_IS_HOLE = 1] = \"CCW_IS_HOLE\";\n}(c || (c = {}));\nexport { c as CounterClockwiseMode, l as pathsToTriangulationInfo, o as triangulate };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/geometry/support/triangulationUtils.js"],"names":["e","n","isClockwise","t","deduplicate","o","l","rings","hasZ","c","CCW_IS_HOLE","s","i","h","polygons","count","r","index","Float64Array","position","buffer","BYTES_PER_ELEMENT","holeIndices","map","f","Uint32Array","push","faces","length","a","originalIndices","indices","Array","g","u","p","d","y","w","pathLengths","outlines","NONE","CounterClockwiseMode","pathsToTriangulationInfo","triangulate"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{e as n}from\"../../chunks/earcut.js\";import{isClockwise as t}from\"./coordsUtils.js\";import{deduplicate as e}from\"./meshUtils/deduplicate.js\";function o(t){const o=l(t.rings,t.hasZ,c.CCW_IS_HOLE),s=[];let i=0,h=0;for(const e of o.polygons){const t=e.count,r=e.index,l=new Float64Array(o.position.buffer,3*r*o.position.BYTES_PER_ELEMENT,3*t),c=e.holeIndices.map((n=>n-r)),f=new Uint32Array(n(l,c,3));s.push({position:l,faces:f}),i+=l.length,h+=f.length}const f=r(s,i,h),a=e(f.position.buffer,6,{originalIndices:f.faces});return f.position=new Float64Array(a.buffer),f.faces=a.indices,f}function r(n,t,e){if(1===n.length)return n[0];const o=new Float64Array(t),r=new Uint32Array(e);let l=0,s=0,i=0;for(const c of n){for(let n=0;n<c.position.length;n++)o[l++]=c.position[n];for(let n=0;n<c.faces.length;n++)r[s++]=c.faces[n]+i;i=l/3}return{position:o,faces:r}}function l(n,t,e){const o=n.length,r=new Array(o),l=new Array(o),h=new Array(o);let f=0,a=0,g=0,u=0;for(let s=0;s<o;++s)u+=n[s].length;const p=new Float64Array(3*u);let d=0;for(let y=o-1;y>=0;y--){const u=n[y],w=e===c.CCW_IS_HOLE&&i(u);if(w&&1!==o)r[f++]=u;else{let n=u.length;for(let t=0;t<f;++t)n+=r[t].length;const e={index:d,pathLengths:new Array(f+1),count:n,holeIndices:new Array(f)};e.pathLengths[0]=u.length,u.length>0&&(h[g++]={index:d,count:u.length}),d=w?s(u,u.length-1,-1,p,d,u.length,t):s(u,0,1,p,d,u.length,t);for(let o=0;o<f;++o){const n=r[o];e.holeIndices[o]=d,e.pathLengths[o+1]=n.length,n.length>0&&(h[g++]={index:d,count:n.length}),d=s(n,0,1,p,d,n.length,t)}f=0,e.count>0&&(l[a++]=e)}}for(let i=0;i<f;++i){const n=r[i];n.length>0&&(h[g++]={index:d,count:n.length}),d=s(n,0,1,p,d,n.length,t)}return a<o&&(l.length=a),g<o&&(h.length=g),{position:p,polygons:l,outlines:h}}function s(n,t,e,o,r,l,s){r*=3;for(let i=0;i<l;++i){const l=n[t];o[r++]=l[0],o[r++]=l[1],o[r++]=s?l[2]:0,t+=e}return r/3}function i(n){return!t(n,!1,!1)}var c;!function(n){n[n.NONE=0]=\"NONE\",n[n.CCW_IS_HOLE=1]=\"CCW_IS_HOLE\"}(c||(c={}));export{c as CounterClockwiseMode,l as pathsToTriangulationInfo,o as triangulate};\n"]},"metadata":{},"sourceType":"module"}