{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../../../../core/has.js\";\nimport t from \"../../../../../core/Error.js\";\nimport { isSome as e, isNone as n } from \"../../../../../core/maybe.js\";\nimport { isDataProtocol as r, dataComponents as a } from \"../../../../../core/urlUtils.js\";\n\nfunction i(t) {\n  const n = m(t);\n  return e(n) ? n.toDataURL() : \"\";\n}\n\nasync function o(e) {\n  const r = m(e);\n  if (n(r)) throw new t(\"imageToArrayBuffer\", \"Unsupported image type\");\n  const a = await c(e),\n        i = await new Promise(t => r.toBlob(t, a));\n  if (!i) throw new t(\"imageToArrayBuffer\", \"Failed to encode image\");\n  return {\n    data: await i.arrayBuffer(),\n    type: a\n  };\n}\n\nasync function c(t) {\n  if (!(t instanceof HTMLImageElement)) return \"image/png\";\n  const e = t.src;\n\n  if (r(e)) {\n    const {\n      mediaType: t\n    } = a(e);\n    return \"image/jpeg\" === t ? t : \"image/png\";\n  }\n\n  return /\\.png$/i.test(e) ? \"image/png\" : /\\.(jpg|jpeg)$/i.test(e) ? \"image/jpeg\" : \"image/png\";\n}\n\nfunction m(t) {\n  if (t instanceof HTMLCanvasElement) return t;\n  if (t instanceof HTMLVideoElement) return null;\n  const e = document.createElement(\"canvas\");\n  e.width = t.width, e.height = t.height;\n  const n = e.getContext(\"2d\");\n  return t instanceof HTMLImageElement ? n.drawImage(t, 0, 0, t.width, t.height) : t instanceof ImageData && n.putImageData(t, t.width, t.height), e;\n}\n\nfunction g(t) {\n  const e = [],\n        n = new Uint8Array(t);\n\n  for (let r = 0; r < n.length; r++) e.push(String.fromCharCode(n[r]));\n\n  return \"data:application/octet-stream;base64,\" + btoa(e.join(\"\"));\n}\n\nfunction s(t) {\n  if (t.byteLength < 8) return !1;\n  const e = new Uint8Array(t);\n  return 137 === e[0] && 80 === e[1] && 78 === e[2] && 71 === e[3] && 13 === e[4] && 10 === e[5] && 26 === e[6] && 10 === e[7];\n}\n\nexport { g as encodeBase64DataUri, o as imageToArrayBuffer, i as imageToDataURI, s as isArrayBufferPNG };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/imageutils.js"],"names":["t","isSome","e","isNone","n","isDataProtocol","r","dataComponents","a","i","m","toDataURL","o","c","Promise","toBlob","data","arrayBuffer","type","HTMLImageElement","src","mediaType","test","HTMLCanvasElement","HTMLVideoElement","document","createElement","width","height","getContext","drawImage","ImageData","putImageData","g","Uint8Array","length","push","String","fromCharCode","btoa","join","s","byteLength","encodeBase64DataUri","imageToArrayBuffer","imageToDataURI","isArrayBufferPNG"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import t from\"../../../../../core/Error.js\";import{isSome as e,isNone as n}from\"../../../../../core/maybe.js\";import{isDataProtocol as r,dataComponents as a}from\"../../../../../core/urlUtils.js\";function i(t){const n=m(t);return e(n)?n.toDataURL():\"\"}async function o(e){const r=m(e);if(n(r))throw new t(\"imageToArrayBuffer\",\"Unsupported image type\");const a=await c(e),i=await new Promise((t=>r.toBlob(t,a)));if(!i)throw new t(\"imageToArrayBuffer\",\"Failed to encode image\");return{data:await i.arrayBuffer(),type:a}}async function c(t){if(!(t instanceof HTMLImageElement))return\"image/png\";const e=t.src;if(r(e)){const{mediaType:t}=a(e);return\"image/jpeg\"===t?t:\"image/png\"}return/\\.png$/i.test(e)?\"image/png\":/\\.(jpg|jpeg)$/i.test(e)?\"image/jpeg\":\"image/png\"}function m(t){if(t instanceof HTMLCanvasElement)return t;if(t instanceof HTMLVideoElement)return null;const e=document.createElement(\"canvas\");e.width=t.width,e.height=t.height;const n=e.getContext(\"2d\");return t instanceof HTMLImageElement?n.drawImage(t,0,0,t.width,t.height):t instanceof ImageData&&n.putImageData(t,t.width,t.height),e}function g(t){const e=[],n=new Uint8Array(t);for(let r=0;r<n.length;r++)e.push(String.fromCharCode(n[r]));return\"data:application/octet-stream;base64,\"+btoa(e.join(\"\"))}function s(t){if(t.byteLength<8)return!1;const e=new Uint8Array(t);return 137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]}export{g as encodeBase64DataUri,o as imageToArrayBuffer,i as imageToDataURI,s as isArrayBufferPNG};\n"]},"metadata":{},"sourceType":"module"}