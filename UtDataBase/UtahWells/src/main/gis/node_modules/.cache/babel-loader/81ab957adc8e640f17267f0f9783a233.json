{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { nextTick as e } from \"../nextTick.js\";\nimport s from \"./RemoteClient.js\";\nimport { MessageType as r, receiveMessage as t } from \"./utils.js\";\n\nclass n {\n  constructor() {\n    const e = document.createDocumentFragment();\n    [\"addEventListener\", \"dispatchEvent\", \"removeEventListener\"].forEach(s => {\n      this[s] = function () {\n        return e[s](...arguments);\n      };\n    });\n  }\n\n}\n\nclass a {\n  constructor() {\n    this._dispatcher = new n(), this._workerPostMessage({\n      type: r.HANDSHAKE\n    });\n  }\n\n  terminate() {}\n\n  get onmessage() {\n    return this._onmessageHandler;\n  }\n\n  set onmessage(e) {\n    this._onmessageHandler && this.removeEventListener(\"message\", this._onmessageHandler), this._onmessageHandler = e, e && this.addEventListener(\"message\", e);\n  }\n\n  get onmessageerror() {\n    return this._onmessageerrorHandler;\n  }\n\n  set onmessageerror(e) {\n    this._onmessageerrorHandler && this.removeEventListener(\"messageerror\", this._onmessageerrorHandler), this._onmessageerrorHandler = e, e && this.addEventListener(\"messageerror\", e);\n  }\n\n  get onerror() {\n    return this._onerrorHandler;\n  }\n\n  set onerror(e) {\n    this._onerrorHandler && this.removeEventListener(\"error\", this._onerrorHandler), this._onerrorHandler = e, e && this.addEventListener(\"error\", e);\n  }\n\n  postMessage(s) {\n    e(() => {\n      this._workerMessageHandler(new MessageEvent(\"message\", {\n        data: s\n      }));\n    });\n  }\n\n  dispatchEvent(e) {\n    return this._dispatcher.dispatchEvent(e);\n  }\n\n  addEventListener(e, s, r) {\n    this._dispatcher.addEventListener(e, s, r);\n  }\n\n  removeEventListener(e, s, r) {\n    this._dispatcher.removeEventListener(e, s, r);\n  }\n\n  _workerPostMessage(s) {\n    e(() => {\n      this.dispatchEvent(new MessageEvent(\"message\", {\n        data: s\n      }));\n    });\n  }\n\n  async _workerMessageHandler(e) {\n    const n = t(e);\n\n    if (n && n.type === r.OPEN) {\n      const {\n        modulePath: e,\n        jobId: t\n      } = n;\n      let a = await s.loadWorker(e);\n      a || (a = await import(\n      /* @vite-ignore */\n\n      /* webpackIgnore: true */\n      e));\n      const o = s.connect(a);\n\n      this._workerPostMessage({\n        type: r.OPENED,\n        jobId: t,\n        data: o\n      });\n    }\n  }\n\n}\n\nexport { a as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/core/workers/WorkerFallback.js"],"names":["nextTick","e","s","MessageType","r","receiveMessage","t","n","constructor","document","createDocumentFragment","forEach","a","_dispatcher","_workerPostMessage","type","HANDSHAKE","terminate","onmessage","_onmessageHandler","removeEventListener","addEventListener","onmessageerror","_onmessageerrorHandler","onerror","_onerrorHandler","postMessage","_workerMessageHandler","MessageEvent","data","dispatchEvent","OPEN","modulePath","jobId","loadWorker","o","connect","OPENED","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{nextTick as e}from\"../nextTick.js\";import s from\"./RemoteClient.js\";import{MessageType as r,receiveMessage as t}from\"./utils.js\";class n{constructor(){const e=document.createDocumentFragment();[\"addEventListener\",\"dispatchEvent\",\"removeEventListener\"].forEach((s=>{this[s]=(...r)=>e[s](...r)}))}}class a{constructor(){this._dispatcher=new n,this._workerPostMessage({type:r.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener(\"message\",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener(\"message\",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener(\"messageerror\",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener(\"messageerror\",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener(\"error\",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener(\"error\",e)}postMessage(s){e((()=>{this._workerMessageHandler(new MessageEvent(\"message\",{data:s}))}))}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,s,r){this._dispatcher.addEventListener(e,s,r)}removeEventListener(e,s,r){this._dispatcher.removeEventListener(e,s,r)}_workerPostMessage(s){e((()=>{this.dispatchEvent(new MessageEvent(\"message\",{data:s}))}))}async _workerMessageHandler(e){const n=t(e);if(n&&n.type===r.OPEN){const{modulePath:e,jobId:t}=n;let a=await s.loadWorker(e);a||(a=await import(\n/* @vite-ignore */\n/* webpackIgnore: true */\ne));const o=s.connect(a);this._workerPostMessage({type:r.OPENED,jobId:t,data:o})}}}export{a as default};\n"]},"metadata":{},"sourceType":"module"}