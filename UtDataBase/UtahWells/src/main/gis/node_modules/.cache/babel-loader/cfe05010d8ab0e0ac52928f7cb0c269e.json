{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport \"../geometry.js\";\nimport t from \"../Graphic.js\";\nimport \"../symbols.js\";\nimport r from \"../core/Collection.js\";\nimport o from \"../core/Error.js\";\nimport { clone as i } from \"../core/lang.js\";\nimport { isNone as l, isSome as a } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as n } from \"../core/MultiOriginJSONSupport.js\";\nimport { setDeepValue as s } from \"../core/object.js\";\nimport p from \"../core/Warning.js\";\nimport { property as y } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { reader as m } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as u } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as c } from \"../core/accessorSupport/decorators/writer.js\";\nimport { canProjectWithoutEngine as f, isLoaded as d, load as g, project as b } from \"../geometry/projection.js\";\nimport { normalizeCentralMeridian as S } from \"../geometry/support/normalizeUtils.js\";\nimport { equals as h } from \"../geometry/support/spatialReferenceUtils.js\";\nimport O from \"./FeatureLayer.js\";\nimport w from \"./GraphicsLayer.js\";\nimport j from \"./Layer.js\";\nimport { findLastObjectIdFromFeatures as N } from \"./graphics/objectIdUtils.js\";\nimport { BlendLayer as v } from \"./mixins/BlendLayer.js\";\nimport { OperationalLayer as L } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as J } from \"./mixins/PortalLayer.js\";\nimport { ScaleRangeLayer as x } from \"./mixins/ScaleRangeLayer.js\";\nimport T from \"./support/Field.js\";\nimport C from \"../symbols/SimpleFillSymbol.js\";\nimport M from \"../symbols/SimpleLineSymbol.js\";\nimport I from \"../symbols/SimpleMarkerSymbol.js\";\nimport R from \"../symbols/TextSymbol.js\";\nimport E from \"../geometry/SpatialReference.js\";\nimport D from \"../geometry/Extent.js\";\n\nfunction F(e) {\n  return e.layers.some(e => null != e.layerDefinition.visibilityField);\n}\n\nconst G = new T({\n  name: \"OBJECTID\",\n  alias: \"OBJECTID\",\n  type: \"oid\",\n  nullable: !1,\n  editable: !1\n}),\n      _ = new T({\n  name: \"title\",\n  alias: \"Title\",\n  type: \"string\",\n  nullable: !0,\n  editable: !0\n});\n\nlet P = class extends w {\n  constructor() {\n    super(...arguments), this.visibilityMode = \"inherited\";\n  }\n\n  initialize() {\n    for (const e of this.graphics) e.sourceLayer = this.layer;\n\n    this.graphics.on(\"after-add\", e => {\n      e.item.sourceLayer = this.layer;\n    }), this.graphics.on(\"after-remove\", e => {\n      e.item.sourceLayer = null;\n    });\n  }\n\n  get sublayers() {\n    return this.graphics;\n  }\n\n};\ne([y({\n  readOnly: !0\n})], P.prototype, \"sublayers\", null), e([y()], P.prototype, \"layer\", void 0), e([y({\n  readOnly: !0\n})], P.prototype, \"visibilityMode\", void 0), P = e([u(\"esri.layers.MapNotesLayer.MapNotesSublayer\")], P);\nconst k = [{\n  geometryType: \"polygon\",\n  geometryTypeJSON: \"esriGeometryPolygon\",\n  layerId: \"polygonLayer\",\n  title: \"Polygons\",\n  identifyingSymbol: new C().toJSON()\n}, {\n  geometryType: \"polyline\",\n  geometryTypeJSON: \"esriGeometryPolyline\",\n  layerId: \"polylineLayer\",\n  title: \"Polylines\",\n  identifyingSymbol: new M().toJSON()\n}, {\n  geometryType: \"multipoint\",\n  geometryTypeJSON: \"esriGeometryMultipoint\",\n  layerId: \"multipointLayer\",\n  title: \"Multipoints\",\n  identifyingSymbol: new I().toJSON()\n}, {\n  geometryType: \"point\",\n  geometryTypeJSON: \"esriGeometryPoint\",\n  layerId: \"pointLayer\",\n  title: \"Points\",\n  identifyingSymbol: new I().toJSON()\n}, {\n  geometryType: \"point\",\n  geometryTypeJSON: \"esriGeometryPoint\",\n  layerId: \"textLayer\",\n  title: \"Text\",\n  identifyingSymbol: new R().toJSON()\n}];\nlet z = class extends v(x(L(J(n(j))))) {\n  constructor(e) {\n    super(e), this.capabilities = {\n      operations: {\n        supportsMapNotesEditing: !0\n      }\n    }, this.featureCollections = null, this.featureCollectionJSON = null, this.featureCollectionType = \"notes\", this.legendEnabled = !1, this.minScale = 0, this.maxScale = 0, this.spatialReference = E.WGS84, this.sublayers = new r(k.map(e => new P({\n      id: e.layerId,\n      title: e.title,\n      layer: this\n    }))), this.title = \"Map Notes\", this.type = \"map-notes\", this.visibilityMode = \"inherited\";\n  }\n\n  readCapabilities(e, t, r) {\n    return {\n      operations: {\n        supportsMapNotesEditing: !F(t) && \"portal-item\" !== (null == r ? void 0 : r.origin)\n      }\n    };\n  }\n\n  readFeatureCollections(e, t, o) {\n    if (!F(t)) return null;\n    const i = t.layers.map(e => {\n      const t = new O();\n      return t.read(e, o), t;\n    });\n    return new r({\n      items: i\n    });\n  }\n\n  readLegacyfeatureCollectionJSON(e, t) {\n    return F(t) ? i(t.featureCollection) : null;\n  }\n\n  readFullExtent(e, t) {\n    if (!t.layers.length || t.layers.every(e => !e.layerDefinition.extent)) return new D({\n      xmin: -180,\n      ymin: -90,\n      xmax: 180,\n      ymax: 90,\n      spatialReference: E.WGS84\n    });\n    const r = E.fromJSON(t.layers[0].layerDefinition.spatialReference);\n    return t.layers.reduce((e, t) => {\n      const r = t.layerDefinition.extent;\n      return r ? D.fromJSON(r).union(e) : e;\n    }, new D({\n      spatialReference: r\n    }));\n  }\n\n  readMinScale(e, t) {\n    for (const r of t.layers) if (null != r.layerDefinition.minScale) return r.layerDefinition.minScale;\n\n    return 0;\n  }\n\n  readMaxScale(e, t) {\n    for (const r of t.layers) if (null != r.layerDefinition.maxScale) return r.layerDefinition.maxScale;\n\n    return 0;\n  }\n\n  get multipointLayer() {\n    return this._findSublayer(\"multipointLayer\");\n  }\n\n  get pointLayer() {\n    return this._findSublayer(\"pointLayer\");\n  }\n\n  get polygonLayer() {\n    return this._findSublayer(\"polygonLayer\");\n  }\n\n  get polylineLayer() {\n    return this._findSublayer(\"polylineLayer\");\n  }\n\n  readSpatialReference(e, t) {\n    return t.layers.length ? E.fromJSON(t.layers[0].layerDefinition.spatialReference) : E.WGS84;\n  }\n\n  readSublayers(e, o, i) {\n    if (F(o)) return null;\n    const l = [];\n\n    for (let r = 0; r < o.layers.length; r++) {\n      var a;\n      const {\n        layerDefinition: e,\n        featureSet: i\n      } = o.layers[r],\n            n = null != (a = e.geometryType) ? a : i.geometryType,\n            s = k.find(t => {\n        var r, o, i;\n        return n === t.geometryTypeJSON && (null == (r = e.drawingInfo) || null == (o = r.renderer) || null == (i = o.symbol) ? void 0 : i.type) === t.identifyingSymbol.type;\n      });\n\n      if (s) {\n        const r = new P({\n          id: s.layerId,\n          title: e.name,\n          layer: this,\n          graphics: i.features.map(_ref => {\n            let {\n              geometry: e,\n              symbol: r,\n              attributes: o,\n              popupInfo: i\n            } = _ref;\n            return t.fromJSON({\n              attributes: o,\n              geometry: e,\n              symbol: r,\n              popupTemplate: i\n            });\n          })\n        });\n        l.push(r);\n      }\n    }\n\n    return new r(l);\n  }\n\n  writeSublayers(e, t, r, i) {\n    const {\n      minScale: n,\n      maxScale: p\n    } = this;\n    if (l(e)) return;\n    const y = e.some(e => e.graphics.length > 0);\n\n    if (!this.capabilities.operations.supportsMapNotesEditing) {\n      var m;\n      if (y) null == i || null == (m = i.messages) || m.push(new o(\"map-notes-layer:editing-not-supported\", \"New map notes cannot be added to this layer\"));\n      return;\n    }\n\n    const u = [];\n    let c = this.spatialReference.toJSON();\n\n    e: for (const o of e) for (const e of o.graphics) if (a(e.geometry)) {\n      c = e.geometry.spatialReference.toJSON();\n      break e;\n    }\n\n    for (const o of k) {\n      const t = e.find(e => o.layerId === e.id);\n\n      this._writeMapNoteSublayer(u, t, o, n, p, c, i);\n    }\n\n    s(\"featureCollection.layers\", u, t);\n  }\n\n  get textLayer() {\n    return this._findSublayer(\"textLayer\");\n  }\n\n  load(e) {\n    return this.addResolvingPromise(this.loadFromPortal({\n      supportedTypes: [\"Feature Collection\"]\n    }, e)), Promise.resolve(this);\n  }\n\n  read(e, t) {\n    \"featureCollection\" in e && (e = i(e), Object.assign(e, e.featureCollection)), super.read(e, t);\n  }\n\n  async beforeSave() {\n    if (l(this.sublayers)) return;\n    let e = null;\n    const t = [];\n\n    for (const o of this.sublayers) for (const r of o.graphics) if (a(r.geometry)) {\n      const o = r.geometry;\n      e ? h(o.spatialReference, e) || (f(o.spatialReference, e) || d() || (await g()), r.geometry = b(o, e)) : e = o.spatialReference, t.push(r);\n    }\n\n    const r = await S(t.map(e => e.geometry));\n    t.forEach((e, t) => e.geometry = r[t]);\n  }\n\n  _findSublayer(e) {\n    var t, r;\n    return l(this.sublayers) ? null : null != (t = null == (r = this.sublayers) ? void 0 : r.find(t => t.id === e)) ? t : null;\n  }\n\n  _writeMapNoteSublayer(e, t, r, o, a, n, s) {\n    const p = [];\n\n    if (!l(t)) {\n      for (const e of t.graphics) this._writeMapNote(p, e, r.geometryType, s);\n\n      this._normalizeObjectIds(p, G), e.push({\n        layerDefinition: {\n          name: t.title,\n          drawingInfo: {\n            renderer: {\n              type: \"simple\",\n              symbol: i(r.identifyingSymbol)\n            }\n          },\n          geometryType: r.geometryTypeJSON,\n          minScale: o,\n          maxScale: a,\n          objectIdField: \"OBJECTID\",\n          fields: [G.toJSON(), _.toJSON()],\n          spatialReference: n\n        },\n        featureSet: {\n          features: p,\n          geometryType: r.geometryTypeJSON\n        }\n      });\n    }\n  }\n\n  _writeMapNote(e, t, r, o) {\n    if (l(t)) return;\n    const {\n      geometry: i,\n      symbol: n,\n      popupTemplate: s\n    } = t;\n    if (l(i)) return;\n    var y, m;\n    if (i.type !== r) return void (null == o || null == (y = o.messages) || y.push(new p(\"map-notes-layer:invalid-geometry-type\", `Geometry \"${i.type}\" cannot be saved in \"${r}\" layer`, {\n      graphic: t\n    })));\n    if (l(n)) return void (null == o || null == (m = o.messages) || m.push(new p(\"map-notes-layer:no-symbol\", \"Skipping map notes with no symbol\", {\n      graphic: t\n    })));\n    const u = {\n      attributes: { ...t.attributes\n      },\n      geometry: i.toJSON(),\n      symbol: n.toJSON()\n    };\n    a(s) && (u.popupInfo = s.toJSON()), e.push(u);\n  }\n\n  _normalizeObjectIds(e, t) {\n    const r = t.name;\n    let o = N(r, e) + 1;\n    const i = new Set();\n\n    for (const l of e) {\n      l.attributes || (l.attributes = {});\n      const {\n        attributes: e\n      } = l;\n      (null == e[r] || i.has(e[r])) && (e[r] = o++), i.add(e[r]);\n    }\n  }\n\n};\ne([y({\n  readOnly: !0\n})], z.prototype, \"capabilities\", void 0), e([m([\"portal-item\", \"web-map\"], \"capabilities\", [\"layers\"])], z.prototype, \"readCapabilities\", null), e([y({\n  readOnly: !0\n})], z.prototype, \"featureCollections\", void 0), e([m([\"web-map\", \"portal-item\"], \"featureCollections\", [\"layers\"])], z.prototype, \"readFeatureCollections\", null), e([y({\n  readOnly: !0,\n  json: {\n    origins: {\n      \"web-map\": {\n        write: {\n          enabled: !0,\n          target: \"featureCollection\"\n        }\n      }\n    }\n  }\n})], z.prototype, \"featureCollectionJSON\", void 0), e([m([\"web-map\", \"portal-item\"], \"featureCollectionJSON\", [\"featureCollection\"])], z.prototype, \"readLegacyfeatureCollectionJSON\", null), e([y({\n  readOnly: !0,\n  json: {\n    read: !1,\n    write: {\n      enabled: !0,\n      ignoreOrigin: !0\n    }\n  }\n})], z.prototype, \"featureCollectionType\", void 0), e([y({\n  json: {\n    write: !1\n  }\n})], z.prototype, \"fullExtent\", void 0), e([m([\"web-map\", \"portal-item\"], \"fullExtent\", [\"layers\"])], z.prototype, \"readFullExtent\", null), e([y({\n  readOnly: !0,\n  json: {\n    origins: {\n      \"web-map\": {\n        write: {\n          target: \"featureCollection.showLegend\",\n\n          overridePolicy() {\n            return {\n              enabled: null != this.featureCollectionJSON\n            };\n          }\n\n        }\n      }\n    }\n  }\n})], z.prototype, \"legendEnabled\", void 0), e([y({\n  type: [\"show\", \"hide\"]\n})], z.prototype, \"listMode\", void 0), e([y({\n  type: Number,\n  nonNullable: !0,\n  json: {\n    write: !1\n  }\n})], z.prototype, \"minScale\", void 0), e([m([\"web-map\", \"portal-item\"], \"minScale\", [\"layers\"])], z.prototype, \"readMinScale\", null), e([y({\n  type: Number,\n  nonNullable: !0,\n  json: {\n    write: !1\n  }\n})], z.prototype, \"maxScale\", void 0), e([m([\"web-map\", \"portal-item\"], \"maxScale\", [\"layers\"])], z.prototype, \"readMaxScale\", null), e([y({\n  readOnly: !0\n})], z.prototype, \"multipointLayer\", null), e([y({\n  value: \"ArcGISFeatureLayer\",\n  type: [\"ArcGISFeatureLayer\"]\n})], z.prototype, \"operationalLayerType\", void 0), e([y({\n  readOnly: !0\n})], z.prototype, \"pointLayer\", null), e([y({\n  readOnly: !0\n})], z.prototype, \"polygonLayer\", null), e([y({\n  readOnly: !0\n})], z.prototype, \"polylineLayer\", null), e([y({\n  type: E\n})], z.prototype, \"spatialReference\", void 0), e([m([\"web-map\", \"portal-item\"], \"spatialReference\", [\"layers\"])], z.prototype, \"readSpatialReference\", null), e([y({\n  readOnly: !0,\n  json: {\n    origins: {\n      \"web-map\": {\n        write: {\n          ignoreOrigin: !0\n        }\n      }\n    }\n  }\n})], z.prototype, \"sublayers\", void 0), e([m(\"web-map\", \"sublayers\", [\"layers\"])], z.prototype, \"readSublayers\", null), e([c(\"web-map\", \"sublayers\")], z.prototype, \"writeSublayers\", null), e([y({\n  readOnly: !0\n})], z.prototype, \"textLayer\", null), e([y()], z.prototype, \"title\", void 0), e([y({\n  readOnly: !0,\n  json: {\n    read: !1\n  }\n})], z.prototype, \"type\", void 0), z = e([u(\"esri.layers.MapNotesLayer\")], z);\nconst B = z;\nexport { B as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/MapNotesLayer.js"],"names":["_","e","t","r","o","clone","i","isNone","l","isSome","a","MultiOriginJSONMixin","n","setDeepValue","s","p","property","y","reader","m","subclass","u","writer","c","canProjectWithoutEngine","f","isLoaded","d","load","g","project","b","normalizeCentralMeridian","S","equals","h","O","w","j","findLastObjectIdFromFeatures","N","BlendLayer","v","OperationalLayer","L","PortalLayer","J","ScaleRangeLayer","x","T","C","M","I","R","E","D","F","layers","some","layerDefinition","visibilityField","G","name","alias","type","nullable","editable","P","constructor","arguments","visibilityMode","initialize","graphics","sourceLayer","layer","on","item","sublayers","readOnly","prototype","k","geometryType","geometryTypeJSON","layerId","title","identifyingSymbol","toJSON","z","capabilities","operations","supportsMapNotesEditing","featureCollections","featureCollectionJSON","featureCollectionType","legendEnabled","minScale","maxScale","spatialReference","WGS84","map","id","readCapabilities","origin","readFeatureCollections","read","items","readLegacyfeatureCollectionJSON","featureCollection","readFullExtent","length","every","extent","xmin","ymin","xmax","ymax","fromJSON","reduce","union","readMinScale","readMaxScale","multipointLayer","_findSublayer","pointLayer","polygonLayer","polylineLayer","readSpatialReference","readSublayers","featureSet","find","drawingInfo","renderer","symbol","features","geometry","attributes","popupInfo","popupTemplate","push","writeSublayers","messages","_writeMapNoteSublayer","textLayer","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","Object","assign","beforeSave","forEach","_writeMapNote","_normalizeObjectIds","objectIdField","fields","graphic","Set","has","add","json","origins","write","enabled","target","ignoreOrigin","overridePolicy","Number","nonNullable","value","B","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import t from\"../Graphic.js\";import\"../symbols.js\";import r from\"../core/Collection.js\";import o from\"../core/Error.js\";import{clone as i}from\"../core/lang.js\";import{isNone as l,isSome as a}from\"../core/maybe.js\";import{MultiOriginJSONMixin as n}from\"../core/MultiOriginJSONSupport.js\";import{setDeepValue as s}from\"../core/object.js\";import p from\"../core/Warning.js\";import{property as y}from\"../core/accessorSupport/decorators/property.js\";import\"../core/accessorSupport/ensureType.js\";import{reader as m}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as u}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as c}from\"../core/accessorSupport/decorators/writer.js\";import{canProjectWithoutEngine as f,isLoaded as d,load as g,project as b}from\"../geometry/projection.js\";import{normalizeCentralMeridian as S}from\"../geometry/support/normalizeUtils.js\";import{equals as h}from\"../geometry/support/spatialReferenceUtils.js\";import O from\"./FeatureLayer.js\";import w from\"./GraphicsLayer.js\";import j from\"./Layer.js\";import{findLastObjectIdFromFeatures as N}from\"./graphics/objectIdUtils.js\";import{BlendLayer as v}from\"./mixins/BlendLayer.js\";import{OperationalLayer as L}from\"./mixins/OperationalLayer.js\";import{PortalLayer as J}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as x}from\"./mixins/ScaleRangeLayer.js\";import T from\"./support/Field.js\";import C from\"../symbols/SimpleFillSymbol.js\";import M from\"../symbols/SimpleLineSymbol.js\";import I from\"../symbols/SimpleMarkerSymbol.js\";import R from\"../symbols/TextSymbol.js\";import E from\"../geometry/SpatialReference.js\";import D from\"../geometry/Extent.js\";function F(e){return e.layers.some((e=>null!=e.layerDefinition.visibilityField))}const G=new T({name:\"OBJECTID\",alias:\"OBJECTID\",type:\"oid\",nullable:!1,editable:!1}),_=new T({name:\"title\",alias:\"Title\",type:\"string\",nullable:!0,editable:!0});let P=class extends w{constructor(){super(...arguments),this.visibilityMode=\"inherited\"}initialize(){for(const e of this.graphics)e.sourceLayer=this.layer;this.graphics.on(\"after-add\",(e=>{e.item.sourceLayer=this.layer})),this.graphics.on(\"after-remove\",(e=>{e.item.sourceLayer=null}))}get sublayers(){return this.graphics}};e([y({readOnly:!0})],P.prototype,\"sublayers\",null),e([y()],P.prototype,\"layer\",void 0),e([y({readOnly:!0})],P.prototype,\"visibilityMode\",void 0),P=e([u(\"esri.layers.MapNotesLayer.MapNotesSublayer\")],P);const k=[{geometryType:\"polygon\",geometryTypeJSON:\"esriGeometryPolygon\",layerId:\"polygonLayer\",title:\"Polygons\",identifyingSymbol:(new C).toJSON()},{geometryType:\"polyline\",geometryTypeJSON:\"esriGeometryPolyline\",layerId:\"polylineLayer\",title:\"Polylines\",identifyingSymbol:(new M).toJSON()},{geometryType:\"multipoint\",geometryTypeJSON:\"esriGeometryMultipoint\",layerId:\"multipointLayer\",title:\"Multipoints\",identifyingSymbol:(new I).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"pointLayer\",title:\"Points\",identifyingSymbol:(new I).toJSON()},{geometryType:\"point\",geometryTypeJSON:\"esriGeometryPoint\",layerId:\"textLayer\",title:\"Text\",identifyingSymbol:(new R).toJSON()}];let z=class extends(v(x(L(J(n(j)))))){constructor(e){super(e),this.capabilities={operations:{supportsMapNotesEditing:!0}},this.featureCollections=null,this.featureCollectionJSON=null,this.featureCollectionType=\"notes\",this.legendEnabled=!1,this.minScale=0,this.maxScale=0,this.spatialReference=E.WGS84,this.sublayers=new r(k.map((e=>new P({id:e.layerId,title:e.title,layer:this})))),this.title=\"Map Notes\",this.type=\"map-notes\",this.visibilityMode=\"inherited\"}readCapabilities(e,t,r){return{operations:{supportsMapNotesEditing:!F(t)&&\"portal-item\"!==(null==r?void 0:r.origin)}}}readFeatureCollections(e,t,o){if(!F(t))return null;const i=t.layers.map((e=>{const t=new O;return t.read(e,o),t}));return new r({items:i})}readLegacyfeatureCollectionJSON(e,t){return F(t)?i(t.featureCollection):null}readFullExtent(e,t){if(!t.layers.length||t.layers.every((e=>!e.layerDefinition.extent)))return new D({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:E.WGS84});const r=E.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce(((e,t)=>{const r=t.layerDefinition.extent;return r?D.fromJSON(r).union(e):e}),new D({spatialReference:r}))}readMinScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.minScale)return r.layerDefinition.minScale;return 0}readMaxScale(e,t){for(const r of t.layers)if(null!=r.layerDefinition.maxScale)return r.layerDefinition.maxScale;return 0}get multipointLayer(){return this._findSublayer(\"multipointLayer\")}get pointLayer(){return this._findSublayer(\"pointLayer\")}get polygonLayer(){return this._findSublayer(\"polygonLayer\")}get polylineLayer(){return this._findSublayer(\"polylineLayer\")}readSpatialReference(e,t){return t.layers.length?E.fromJSON(t.layers[0].layerDefinition.spatialReference):E.WGS84}readSublayers(e,o,i){if(F(o))return null;const l=[];for(let r=0;r<o.layers.length;r++){var a;const{layerDefinition:e,featureSet:i}=o.layers[r],n=null!=(a=e.geometryType)?a:i.geometryType,s=k.find((t=>{var r,o,i;return n===t.geometryTypeJSON&&(null==(r=e.drawingInfo)||null==(o=r.renderer)||null==(i=o.symbol)?void 0:i.type)===t.identifyingSymbol.type}));if(s){const r=new P({id:s.layerId,title:e.name,layer:this,graphics:i.features.map((({geometry:e,symbol:r,attributes:o,popupInfo:i})=>t.fromJSON({attributes:o,geometry:e,symbol:r,popupTemplate:i})))});l.push(r)}}return new r(l)}writeSublayers(e,t,r,i){const{minScale:n,maxScale:p}=this;if(l(e))return;const y=e.some((e=>e.graphics.length>0));if(!this.capabilities.operations.supportsMapNotesEditing){var m;if(y)null==i||null==(m=i.messages)||m.push(new o(\"map-notes-layer:editing-not-supported\",\"New map notes cannot be added to this layer\"));return}const u=[];let c=this.spatialReference.toJSON();e:for(const o of e)for(const e of o.graphics)if(a(e.geometry)){c=e.geometry.spatialReference.toJSON();break e}for(const o of k){const t=e.find((e=>o.layerId===e.id));this._writeMapNoteSublayer(u,t,o,n,p,c,i)}s(\"featureCollection.layers\",u,t)}get textLayer(){return this._findSublayer(\"textLayer\")}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Collection\"]},e)),Promise.resolve(this)}read(e,t){\"featureCollection\"in e&&(e=i(e),Object.assign(e,e.featureCollection)),super.read(e,t)}async beforeSave(){if(l(this.sublayers))return;let e=null;const t=[];for(const o of this.sublayers)for(const r of o.graphics)if(a(r.geometry)){const o=r.geometry;e?h(o.spatialReference,e)||(f(o.spatialReference,e)||d()||await g(),r.geometry=b(o,e)):e=o.spatialReference,t.push(r)}const r=await S(t.map((e=>e.geometry)));t.forEach(((e,t)=>e.geometry=r[t]))}_findSublayer(e){var t,r;return l(this.sublayers)?null:null!=(t=null==(r=this.sublayers)?void 0:r.find((t=>t.id===e)))?t:null}_writeMapNoteSublayer(e,t,r,o,a,n,s){const p=[];if(!l(t)){for(const e of t.graphics)this._writeMapNote(p,e,r.geometryType,s);this._normalizeObjectIds(p,G),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:\"simple\",symbol:i(r.identifyingSymbol)}},geometryType:r.geometryTypeJSON,minScale:o,maxScale:a,objectIdField:\"OBJECTID\",fields:[G.toJSON(),_.toJSON()],spatialReference:n},featureSet:{features:p,geometryType:r.geometryTypeJSON}})}}_writeMapNote(e,t,r,o){if(l(t))return;const{geometry:i,symbol:n,popupTemplate:s}=t;if(l(i))return;var y,m;if(i.type!==r)return void(null==o||null==(y=o.messages)||y.push(new p(\"map-notes-layer:invalid-geometry-type\",`Geometry \"${i.type}\" cannot be saved in \"${r}\" layer`,{graphic:t})));if(l(n))return void(null==o||null==(m=o.messages)||m.push(new p(\"map-notes-layer:no-symbol\",\"Skipping map notes with no symbol\",{graphic:t})));const u={attributes:{...t.attributes},geometry:i.toJSON(),symbol:n.toJSON()};a(s)&&(u.popupInfo=s.toJSON()),e.push(u)}_normalizeObjectIds(e,t){const r=t.name;let o=N(r,e)+1;const i=new Set;for(const l of e){l.attributes||(l.attributes={});const{attributes:e}=l;(null==e[r]||i.has(e[r]))&&(e[r]=o++),i.add(e[r])}}};e([y({readOnly:!0})],z.prototype,\"capabilities\",void 0),e([m([\"portal-item\",\"web-map\"],\"capabilities\",[\"layers\"])],z.prototype,\"readCapabilities\",null),e([y({readOnly:!0})],z.prototype,\"featureCollections\",void 0),e([m([\"web-map\",\"portal-item\"],\"featureCollections\",[\"layers\"])],z.prototype,\"readFeatureCollections\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{enabled:!0,target:\"featureCollection\"}}}}})],z.prototype,\"featureCollectionJSON\",void 0),e([m([\"web-map\",\"portal-item\"],\"featureCollectionJSON\",[\"featureCollection\"])],z.prototype,\"readLegacyfeatureCollectionJSON\",null),e([y({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],z.prototype,\"featureCollectionType\",void 0),e([y({json:{write:!1}})],z.prototype,\"fullExtent\",void 0),e([m([\"web-map\",\"portal-item\"],\"fullExtent\",[\"layers\"])],z.prototype,\"readFullExtent\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{target:\"featureCollection.showLegend\",overridePolicy(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],z.prototype,\"legendEnabled\",void 0),e([y({type:[\"show\",\"hide\"]})],z.prototype,\"listMode\",void 0),e([y({type:Number,nonNullable:!0,json:{write:!1}})],z.prototype,\"minScale\",void 0),e([m([\"web-map\",\"portal-item\"],\"minScale\",[\"layers\"])],z.prototype,\"readMinScale\",null),e([y({type:Number,nonNullable:!0,json:{write:!1}})],z.prototype,\"maxScale\",void 0),e([m([\"web-map\",\"portal-item\"],\"maxScale\",[\"layers\"])],z.prototype,\"readMaxScale\",null),e([y({readOnly:!0})],z.prototype,\"multipointLayer\",null),e([y({value:\"ArcGISFeatureLayer\",type:[\"ArcGISFeatureLayer\"]})],z.prototype,\"operationalLayerType\",void 0),e([y({readOnly:!0})],z.prototype,\"pointLayer\",null),e([y({readOnly:!0})],z.prototype,\"polygonLayer\",null),e([y({readOnly:!0})],z.prototype,\"polylineLayer\",null),e([y({type:E})],z.prototype,\"spatialReference\",void 0),e([m([\"web-map\",\"portal-item\"],\"spatialReference\",[\"layers\"])],z.prototype,\"readSpatialReference\",null),e([y({readOnly:!0,json:{origins:{\"web-map\":{write:{ignoreOrigin:!0}}}}})],z.prototype,\"sublayers\",void 0),e([m(\"web-map\",\"sublayers\",[\"layers\"])],z.prototype,\"readSublayers\",null),e([c(\"web-map\",\"sublayers\")],z.prototype,\"writeSublayers\",null),e([y({readOnly:!0})],z.prototype,\"textLayer\",null),e([y()],z.prototype,\"title\",void 0),e([y({readOnly:!0,json:{read:!1}})],z.prototype,\"type\",void 0),z=e([u(\"esri.layers.MapNotesLayer\")],z);const B=z;export{B as default};\n"]},"metadata":{},"sourceType":"module"}