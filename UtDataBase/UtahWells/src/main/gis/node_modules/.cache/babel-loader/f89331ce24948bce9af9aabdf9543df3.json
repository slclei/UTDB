{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { Placement as t } from \"../CIMPlacements.js\";\nimport { PlacementGridType as s } from \"../enums.js\";\n\nfunction i(t) {\n  return void 0 !== t.rings;\n}\n\nclass h {\n  static local() {\n    return null === h.instance && (h.instance = new h()), h.instance;\n  }\n\n  execute(t, s, i, h) {\n    return new e(t, s, i, h);\n  }\n\n}\n\nh.instance = null;\n\nclass e {\n  constructor(h, e, n, _) {\n    if (this._xMin = 0, this._xMax = 0, this._yMin = 0, this._yMax = 0, this._currentX = 0, this._currentY = 0, this._stepX = (void 0 !== e.stepX ? Math.abs(e.stepX) : 16) * n, this._stepY = (void 0 !== e.stepY ? Math.abs(e.stepY) : 16) * n, 0 !== this._stepX && 0 !== this._stepY && h && i(h) && h.rings) {\n      if (this._gridType = void 0 !== e.gridType ? e.gridType : s.Fixed, this._gridType === s.Random) this._randomness = void 0 !== e.randomness ? e.randomness / 100 : 1, this._gridAngle = 0, this._shiftOddRows = !1, this._cosAngle = 1, this._sinAngle = 0, this._offsetX = 0, this._offsetY = 0;else {\n        if (this._randomness = 0, this._gridAngle = void 0 !== e.gridAngle ? e.gridAngle : 0, this._shiftOddRows = void 0 !== e.shiftOddRows && e.shiftOddRows, this._offsetX = void 0 !== e.offsetX ? e.offsetX * n : 0, this._offsetY = void 0 !== e.offsetY ? e.offsetY * n : 0, this._cosAngle = Math.cos(this._gridAngle / 180 * Math.PI), this._sinAngle = -Math.sin(this._gridAngle / 180 * Math.PI), this._stepX) if (this._offsetX < 0) for (; this._offsetX < -.5 * this._stepX;) this._offsetX += this._stepX;else for (; this._offsetX >= .5 * this._stepX;) this._offsetX -= this._stepX;\n        if (this._stepY) if (this._offsetY < 0) for (; this._offsetY < -.5 * this._stepY;) this._offsetY += this._stepY;else for (; this._offsetY >= .5 * this._stepY;) this._offsetY -= this._stepY;\n      }\n      this._graphicOriginX = 0, this._graphicOriginY = 0, this._internalPlacement = new t(), this._calculateMinMax(h), this._geometry = h;\n    }\n  }\n\n  next() {\n    return this._geometry ? this._nextInside() : null;\n  }\n\n  _calculateMinMax(t) {\n    let s, i, h, e, n, _, r, o;\n\n    this._xMin = 0, this._xMax = 0, this._yMin = 0, this._yMax = 0, n = _ = Number.MAX_VALUE, r = o = -Number.MAX_VALUE;\n\n    for (const a of t.rings) {\n      const t = a ? a.length : 0;\n\n      for (let f = 0; f < t; ++f) s = a[f][0] - this._graphicOriginX - this._offsetX, i = a[f][1] - this._graphicOriginY - this._offsetY, h = this._cosAngle * s - this._sinAngle * i, e = this._sinAngle * s + this._cosAngle * i, n = Math.min(n, h), r = Math.max(r, h), _ = Math.min(_, e), o = Math.max(o, e);\n    }\n\n    n += this._graphicOriginX, r += this._graphicOriginX, _ += this._graphicOriginY, o += this._graphicOriginY, this._xMin = Math.round(n / this._stepX), this._xMax = Math.round(r / this._stepX), this._yMin = Math.round(_ / this._stepY), this._yMax = Math.round(o / this._stepY), this._currentX = this._xMax + 1, this._currentY = this._yMin - 1;\n  }\n\n  _nextInside() {\n    for (;;) {\n      if (this._currentX > this._xMax) {\n        if (this._currentY++, this._currentY > this._yMax) return null;\n        this._currentX = this._xMin, this._shiftOddRows && this._currentY % 2 && this._currentX--;\n      }\n\n      let t = this._currentX * this._stepX + this._offsetX;\n      this._shiftOddRows && this._currentY % 2 && (t += .5 * this._stepX);\n      const i = this._currentY * this._stepY + this._offsetY;\n      let h, e;\n      return this._currentX++, this._gridType === s.Random ? (h = this._graphicOriginX + t + this._stepX * this._randomness * (.5 - Math.random()) * 2 / 3, e = this._graphicOriginY + i + this._stepY * this._randomness * (.5 - Math.random()) * 2 / 3) : (h = this._graphicOriginX + this._cosAngle * t + this._sinAngle * i, e = this._graphicOriginY - this._sinAngle * t + this._cosAngle * i), this._internalPlacement.setTranslate(h, e), this._internalPlacement;\n    }\n  }\n\n}\n\nexport { h as PlacementInsidePolygon };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/placements/PlacementInsidePolygon.js"],"names":["Placement","t","PlacementGridType","s","i","rings","h","local","instance","execute","e","constructor","n","_","_xMin","_xMax","_yMin","_yMax","_currentX","_currentY","_stepX","stepX","Math","abs","_stepY","stepY","_gridType","gridType","Fixed","Random","_randomness","randomness","_gridAngle","_shiftOddRows","_cosAngle","_sinAngle","_offsetX","_offsetY","gridAngle","shiftOddRows","offsetX","offsetY","cos","PI","sin","_graphicOriginX","_graphicOriginY","_internalPlacement","_calculateMinMax","_geometry","next","_nextInside","r","o","Number","MAX_VALUE","a","length","f","min","max","round","random","setTranslate","PlacementInsidePolygon"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{Placement as t}from\"../CIMPlacements.js\";import{PlacementGridType as s}from\"../enums.js\";function i(t){return void 0!==t.rings}class h{static local(){return null===h.instance&&(h.instance=new h),h.instance}execute(t,s,i,h){return new e(t,s,i,h)}}h.instance=null;class e{constructor(h,e,n,_){if(this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,this._currentX=0,this._currentY=0,this._stepX=(void 0!==e.stepX?Math.abs(e.stepX):16)*n,this._stepY=(void 0!==e.stepY?Math.abs(e.stepY):16)*n,0!==this._stepX&&0!==this._stepY&&h&&i(h)&&h.rings){if(this._gridType=void 0!==e.gridType?e.gridType:s.Fixed,this._gridType===s.Random)this._randomness=void 0!==e.randomness?e.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._sinAngle=0,this._offsetX=0,this._offsetY=0;else{if(this._randomness=0,this._gridAngle=void 0!==e.gridAngle?e.gridAngle:0,this._shiftOddRows=void 0!==e.shiftOddRows&&e.shiftOddRows,this._offsetX=void 0!==e.offsetX?e.offsetX*n:0,this._offsetY=void 0!==e.offsetY?e.offsetY*n:0,this._cosAngle=Math.cos(this._gridAngle/180*Math.PI),this._sinAngle=-Math.sin(this._gridAngle/180*Math.PI),this._stepX)if(this._offsetX<0)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(this._offsetY<0)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginX=0,this._graphicOriginY=0,this._internalPlacement=new t,this._calculateMinMax(h),this._geometry=h}}next(){return this._geometry?this._nextInside():null}_calculateMinMax(t){let s,i,h,e,n,_,r,o;this._xMin=0,this._xMax=0,this._yMin=0,this._yMax=0,n=_=Number.MAX_VALUE,r=o=-Number.MAX_VALUE;for(const a of t.rings){const t=a?a.length:0;for(let f=0;f<t;++f)s=a[f][0]-this._graphicOriginX-this._offsetX,i=a[f][1]-this._graphicOriginY-this._offsetY,h=this._cosAngle*s-this._sinAngle*i,e=this._sinAngle*s+this._cosAngle*i,n=Math.min(n,h),r=Math.max(r,h),_=Math.min(_,e),o=Math.max(o,e)}n+=this._graphicOriginX,r+=this._graphicOriginX,_+=this._graphicOriginY,o+=this._graphicOriginY,this._xMin=Math.round(n/this._stepX),this._xMax=Math.round(r/this._stepX),this._yMin=Math.round(_/this._stepY),this._yMax=Math.round(o/this._stepY),this._currentX=this._xMax+1,this._currentY=this._yMin-1}_nextInside(){for(;;){if(this._currentX>this._xMax){if(this._currentY++,this._currentY>this._yMax)return null;this._currentX=this._xMin,this._shiftOddRows&&this._currentY%2&&this._currentX--}let t=this._currentX*this._stepX+this._offsetX;this._shiftOddRows&&this._currentY%2&&(t+=.5*this._stepX);const i=this._currentY*this._stepY+this._offsetY;let h,e;return this._currentX++,this._gridType===s.Random?(h=this._graphicOriginX+t+this._stepX*this._randomness*(.5-Math.random())*2/3,e=this._graphicOriginY+i+this._stepY*this._randomness*(.5-Math.random())*2/3):(h=this._graphicOriginX+this._cosAngle*t+this._sinAngle*i,e=this._graphicOriginY-this._sinAngle*t+this._cosAngle*i),this._internalPlacement.setTranslate(h,e),this._internalPlacement}}}export{h as PlacementInsidePolygon};\n"]},"metadata":{},"sourceType":"module"}