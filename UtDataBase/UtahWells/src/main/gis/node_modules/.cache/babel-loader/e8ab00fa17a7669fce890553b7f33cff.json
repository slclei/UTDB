{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { getNamedColor as t } from \"../../colorUtils.js\";\nimport { px2pt as s } from \"../../core/screenUtils.js\";\nimport { c as r } from \"../../chunks/mat4f32.js\";\nimport { sepia as o, saturate as e, invert as i, grayscale as a, contrast as h, brightness as n, rotateHue as u } from \"./colorMatrixFunctions.js\";\n\nfunction c(t) {\n  return \"colorMatrix\" in t;\n}\n\nclass l {\n  constructor(t, s, r) {\n    this.strength = t, this.radius = s, this.threshold = r, this.type = \"bloom\";\n  }\n\n  interpolate(t, s, r) {\n    this.strength = y(t.strength, s.strength, r), this.radius = y(t.radius, s.radius, r), this.threshold = y(t.threshold, s.threshold, r);\n  }\n\n  clone() {\n    return new l(this.strength, this.radius, this.threshold);\n  }\n\n  toJSON() {\n    return {\n      type: \"bloom\",\n      radius: x(this.radius),\n      strength: this.strength,\n      threshold: this.threshold\n    };\n  }\n\n}\n\nclass p {\n  constructor(t) {\n    this.radius = t, this.type = \"blur\";\n  }\n\n  interpolate(t, s, r) {\n    this.radius = Math.round(y(t.radius, s.radius, r));\n  }\n\n  clone() {\n    return new p(this.radius);\n  }\n\n  toJSON() {\n    return {\n      type: \"blur\",\n      radius: x(this.radius)\n    };\n  }\n\n}\n\nclass d {\n  constructor(t, s) {\n    this.type = t, this.amount = s, \"invert\" !== this.type && \"grayscale\" !== this.type && \"sepia\" !== this.type || (this.amount = Math.min(this.amount, 1));\n  }\n\n  get colorMatrix() {\n    return this._colorMatrix || this._updateMatrix(), this._colorMatrix;\n  }\n\n  interpolate(t, s, r) {\n    this.amount = y(t.amount, s.amount, r), this._updateMatrix();\n  }\n\n  clone() {\n    return new d(this.type, this.amount);\n  }\n\n  toJSON() {\n    return {\n      type: this.type,\n      amount: this.amount\n    };\n  }\n\n  _updateMatrix() {\n    const t = this._colorMatrix || r();\n\n    switch (this.type) {\n      case \"brightness\":\n        this._colorMatrix = n(t, this.amount);\n        break;\n\n      case \"contrast\":\n        this._colorMatrix = h(t, this.amount);\n        break;\n\n      case \"grayscale\":\n        this._colorMatrix = a(t, this.amount);\n        break;\n\n      case \"invert\":\n        this._colorMatrix = i(t, this.amount);\n        break;\n\n      case \"saturate\":\n        this._colorMatrix = e(t, this.amount);\n        break;\n\n      case \"sepia\":\n        this._colorMatrix = o(t, this.amount);\n    }\n  }\n\n}\n\nclass m {\n  constructor(t, s, r, o) {\n    this.offsetX = t, this.offsetY = s, this.blurRadius = r, this.color = o, this.type = \"drop-shadow\";\n  }\n\n  interpolate(t, s, r) {\n    this.offsetX = y(t.offsetX, s.offsetX, r), this.offsetY = y(t.offsetY, s.offsetY, r), this.blurRadius = y(t.blurRadius, s.blurRadius, r), this.color[0] = Math.round(y(t.color[0], s.color[0], r)), this.color[1] = Math.round(y(t.color[1], s.color[1], r)), this.color[2] = Math.round(y(t.color[2], s.color[2], r)), this.color[3] = y(t.color[3], s.color[3], r);\n  }\n\n  clone() {\n    return new m(this.offsetX, this.offsetY, this.blurRadius, [...this.color]);\n  }\n\n  toJSON() {\n    const t = [...this.color];\n    return t[3] *= 255, {\n      type: \"drop-shadow\",\n      xoffset: x(this.offsetX),\n      yoffset: x(this.offsetY),\n      blurRadius: x(this.blurRadius),\n      color: t\n    };\n  }\n\n}\n\nclass f {\n  constructor(t) {\n    this.angle = t, this.type = \"hue-rotate\";\n  }\n\n  get colorMatrix() {\n    return this._colorMatrix || this._updateMatrix(), this._colorMatrix;\n  }\n\n  interpolate(t, s, r) {\n    this.angle = y(t.angle, s.angle, r), this._updateMatrix();\n  }\n\n  clone() {\n    return new f(this.angle);\n  }\n\n  toJSON() {\n    return {\n      type: \"hue-rotate\",\n      angle: this.angle\n    };\n  }\n\n  _updateMatrix() {\n    const t = this._colorMatrix || r();\n    this._colorMatrix = u(t, this.angle);\n  }\n\n}\n\nclass M {\n  constructor(t) {\n    this.amount = t, this.type = \"opacity\", this.amount = Math.min(this.amount, 1);\n  }\n\n  interpolate(t, s, r) {\n    this.amount = y(t.amount, s.amount, r);\n  }\n\n  clone() {\n    return new M(this.amount);\n  }\n\n  toJSON() {\n    return {\n      type: \"opacity\",\n      amount: this.amount\n    };\n  }\n\n}\n\nfunction y(t, s, r) {\n  return t + (s - t) * r;\n}\n\nfunction x(t) {\n  return Math.round(1e3 * s(t)) / 1e3;\n}\n\nfunction g(s) {\n  switch (s.type) {\n    case \"grayscale\":\n    case \"sepia\":\n    case \"invert\":\n      return new d(s.type, 0);\n\n    case \"saturate\":\n    case \"brightness\":\n    case \"contrast\":\n      return new d(s.type, 1);\n\n    case \"opacity\":\n      return new M(1);\n\n    case \"hue-rotate\":\n      return new f(0);\n\n    case \"blur\":\n      return new p(0);\n\n    case \"drop-shadow\":\n      return new m(0, 0, 0, [...t(\"transparent\")]);\n\n    case \"bloom\":\n      return new l(0, 0, 1);\n  }\n}\n\nexport { l as BloomEffect, p as BlurEffect, d as ColorMatrixEffect, m as DropShadowEffect, f as HueRotateEffect, M as OpacityEffect, g as createEffectWithInitialValues, c as isColorMatrixEffect };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/effects/effects.js"],"names":["getNamedColor","t","px2pt","s","c","r","sepia","o","saturate","e","invert","i","grayscale","a","contrast","h","brightness","n","rotateHue","u","l","constructor","strength","radius","threshold","type","interpolate","y","clone","toJSON","x","p","Math","round","d","amount","min","colorMatrix","_colorMatrix","_updateMatrix","m","offsetX","offsetY","blurRadius","color","xoffset","yoffset","f","angle","M","g","BloomEffect","BlurEffect","ColorMatrixEffect","DropShadowEffect","HueRotateEffect","OpacityEffect","createEffectWithInitialValues","isColorMatrixEffect"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{getNamedColor as t}from\"../../colorUtils.js\";import{px2pt as s}from\"../../core/screenUtils.js\";import{c as r}from\"../../chunks/mat4f32.js\";import{sepia as o,saturate as e,invert as i,grayscale as a,contrast as h,brightness as n,rotateHue as u}from\"./colorMatrixFunctions.js\";function c(t){return\"colorMatrix\"in t}class l{constructor(t,s,r){this.strength=t,this.radius=s,this.threshold=r,this.type=\"bloom\"}interpolate(t,s,r){this.strength=y(t.strength,s.strength,r),this.radius=y(t.radius,s.radius,r),this.threshold=y(t.threshold,s.threshold,r)}clone(){return new l(this.strength,this.radius,this.threshold)}toJSON(){return{type:\"bloom\",radius:x(this.radius),strength:this.strength,threshold:this.threshold}}}class p{constructor(t){this.radius=t,this.type=\"blur\"}interpolate(t,s,r){this.radius=Math.round(y(t.radius,s.radius,r))}clone(){return new p(this.radius)}toJSON(){return{type:\"blur\",radius:x(this.radius)}}}class d{constructor(t,s){this.type=t,this.amount=s,\"invert\"!==this.type&&\"grayscale\"!==this.type&&\"sepia\"!==this.type||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,s,r){this.amount=y(t.amount,s.amount,r),this._updateMatrix()}clone(){return new d(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||r();switch(this.type){case\"brightness\":this._colorMatrix=n(t,this.amount);break;case\"contrast\":this._colorMatrix=h(t,this.amount);break;case\"grayscale\":this._colorMatrix=a(t,this.amount);break;case\"invert\":this._colorMatrix=i(t,this.amount);break;case\"saturate\":this._colorMatrix=e(t,this.amount);break;case\"sepia\":this._colorMatrix=o(t,this.amount)}}}class m{constructor(t,s,r,o){this.offsetX=t,this.offsetY=s,this.blurRadius=r,this.color=o,this.type=\"drop-shadow\"}interpolate(t,s,r){this.offsetX=y(t.offsetX,s.offsetX,r),this.offsetY=y(t.offsetY,s.offsetY,r),this.blurRadius=y(t.blurRadius,s.blurRadius,r),this.color[0]=Math.round(y(t.color[0],s.color[0],r)),this.color[1]=Math.round(y(t.color[1],s.color[1],r)),this.color[2]=Math.round(y(t.color[2],s.color[2],r)),this.color[3]=y(t.color[3],s.color[3],r)}clone(){return new m(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:\"drop-shadow\",xoffset:x(this.offsetX),yoffset:x(this.offsetY),blurRadius:x(this.blurRadius),color:t}}}class f{constructor(t){this.angle=t,this.type=\"hue-rotate\"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,s,r){this.angle=y(t.angle,s.angle,r),this._updateMatrix()}clone(){return new f(this.angle)}toJSON(){return{type:\"hue-rotate\",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||r();this._colorMatrix=u(t,this.angle)}}class M{constructor(t){this.amount=t,this.type=\"opacity\",this.amount=Math.min(this.amount,1)}interpolate(t,s,r){this.amount=y(t.amount,s.amount,r)}clone(){return new M(this.amount)}toJSON(){return{type:\"opacity\",amount:this.amount}}}function y(t,s,r){return t+(s-t)*r}function x(t){return Math.round(1e3*s(t))/1e3}function g(s){switch(s.type){case\"grayscale\":case\"sepia\":case\"invert\":return new d(s.type,0);case\"saturate\":case\"brightness\":case\"contrast\":return new d(s.type,1);case\"opacity\":return new M(1);case\"hue-rotate\":return new f(0);case\"blur\":return new p(0);case\"drop-shadow\":return new m(0,0,0,[...t(\"transparent\")]);case\"bloom\":return new l(0,0,1)}}export{l as BloomEffect,p as BlurEffect,d as ColorMatrixEffect,m as DropShadowEffect,f as HueRotateEffect,M as OpacityEffect,g as createEffectWithInitialValues,c as isColorMatrixEffect};\n"]},"metadata":{},"sourceType":"module"}