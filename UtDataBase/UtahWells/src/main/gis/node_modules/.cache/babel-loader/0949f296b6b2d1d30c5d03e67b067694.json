{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../../../../core/maybe.js\";\nimport { e } from \"../../../../../../chunks/earcut.js\";\nimport { triangulate as n } from \"../../../../../../geometry/libtess.js\";\nimport o from \"../../../../../../layers/graphics/OptimizedGeometry.js\";\nimport { TILE_SIZE as r } from \"../../definitions.js\";\nimport { GeometryType as s } from \"../../Geometry.js\";\nimport { TileClipper as l } from \"../../TileClipper.js\";\nimport { bufcut as i } from \"../bufcut.js\";\nconst f = 1e-5,\n      c = new l(0, 0, 0, 1, 0),\n      u = new l(0, 0, 0, 1, 0);\n\nfunction h(t, e, n) {\n  let o = 0;\n\n  for (let r = 1; r < n; r++) {\n    const n = t[2 * (e + r - 1)],\n          s = t[2 * (e + r - 1) + 1];\n    o += (t[2 * (e + r)] - n) * (t[2 * (e + r) + 1] + s);\n  }\n\n  return o;\n}\n\nfunction a(t, e, n, o, r) {\n  let s = 0;\n  const l = 2;\n\n  for (let i = n; i < o; i += 3) {\n    const n = (t[i] - r) * l,\n          o = (t[i + 1] - r) * l,\n          f = (t[i + 2] - r) * l;\n    s += Math.abs((e[n] - e[f]) * (e[o + 1] - e[n + 1]) - (e[n] - e[o]) * (e[f + 1] - e[n + 1]));\n  }\n\n  return s;\n}\n\nfunction g(t, e, n, o, r) {\n  let s = 0;\n  const l = 2;\n\n  for (let i = n; i < o; i += 3) {\n    const n = (t.getValue(i) - r) * l,\n          o = (t.getValue(i + 1) - r) * l,\n          f = (t.getValue(i + 2) - r) * l;\n    s += Math.abs((e[n] - e[f]) * (e[o + 1] - e[n + 1]) - (e[n] - e[o]) * (e[f + 1] - e[n + 1]));\n  }\n\n  return s;\n}\n\nfunction m(t, e) {\n  const {\n    coords: n,\n    lengths: o,\n    hasIndeterminateRingOrder: r\n  } = e,\n        s = 0,\n        l = t;\n  if (r) return !1;\n  let c = 0;\n\n  for (let u = 0; u < o.length;) {\n    let t = u,\n        e = o[u],\n        r = h(n, c, e);\n    const g = [];\n\n    for (; ++t < o.length;) {\n      const s = o[t],\n            l = h(n, c + e, s);\n      if (!(l > 0)) break;\n      r += l, g.push(c + e), e += s;\n    }\n\n    const m = l.length;\n    i(l, n, c, c + e, g, 2, s);\n    const p = a(l, n, m, l.length, s),\n          d = Math.abs(r);\n    if (Math.abs((p - d) / Math.max(1e-7, d)) > f) return l.length = 0, !1;\n    u = t, c += e;\n  }\n\n  return !0;\n}\n\nfunction p(t, n, o) {\n  const {\n    coords: r,\n    lengths: s,\n    hasIndeterminateRingOrder: l\n  } = n;\n  if (l) return !1;\n  let i = 0;\n\n  for (let f = 0; f < s.length;) {\n    let l = f,\n        c = s[f];\n    const u = [];\n\n    for (; ++l < s.length;) {\n      const t = s[l];\n      if (!(h(r, i + c, t) > 0)) break;\n      u.push(i + c - i), c += t;\n    }\n\n    const a = i + c,\n          g = n.coords.slice(2 * i, 2 * a),\n          m = e(g, u, 2);\n\n    for (const e of m) t.push(e + o + i);\n\n    f = l, i += c;\n  }\n\n  return !0;\n}\n\nfunction d(t) {\n  const {\n    coords: e,\n    lengths: o\n  } = t,\n        {\n    buffer: r\n  } = n(e, o);\n  return r;\n}\n\nfunction b(t, e, n) {\n  let o = 0;\n\n  for (let r = 0; r < t.lengths.length; r++) {\n    const s = t.lengths[r];\n\n    for (let r = 0; r < s; r++) {\n      const s = t.coords[2 * (r + o)],\n            l = t.coords[2 * (r + o) + 1];\n      if (s < e || s > n || l < e || l > n) return !0;\n    }\n\n    o += s;\n  }\n\n  return !1;\n}\n\nfunction x(e, n) {\n  if (t(e)) return null;\n  if (!b(e, -128, r + 128)) return e;\n  c.setPixelMargin(n), c.reset(s.Polygon);\n  let l = 0;\n\n  for (let t = 0; t < e.lengths.length; t++) {\n    const n = e.lengths[t];\n    let o = e.coords[2 * (0 + l)],\n        r = e.coords[2 * (0 + l) + 1];\n    c.moveTo(o, r);\n\n    for (let t = 1; t < n; t++) o = e.coords[2 * (t + l)], r = e.coords[2 * (t + l) + 1], c.lineTo(o, r);\n\n    c.close(), l += n;\n  }\n\n  const i = c.result(!1);\n  if (!i) return null;\n  const f = [],\n        u = [];\n\n  for (const t of i) {\n    let e = 0;\n\n    for (const n of t) u.push(n.x), u.push(n.y), e++;\n\n    f.push(e);\n  }\n\n  return new o(f, u);\n}\n\nfunction y(t, e) {\n  u.setPixelMargin(e);\n  const n = u,\n        o = -e,\n        l = r + e;\n  let i = [],\n      f = !1,\n      c = 0;\n\n  for (; c < t.length;) {\n    const e = [],\n          r = t[c];\n    if (!r) return null;\n    n.reset(s.LineString);\n    let [u, h] = r[0];\n    if (f) n.moveTo(u, h);else {\n      if (u < o || u > l || h < o || h > l) {\n        f = !0;\n        continue;\n      }\n\n      e.push({\n        x: u,\n        y: h\n      });\n    }\n    let a = !1;\n    const g = r.length;\n\n    for (let t = 1; t < g; ++t) if (u += r[t][0], h += r[t][1], f) n.lineTo(u, h);else {\n      if (u < o || u > l || h < o || h > l) {\n        a = !0;\n        break;\n      }\n\n      e.push({\n        x: u,\n        y: h\n      });\n    }\n\n    if (a) f = !0;else {\n      if (f) {\n        const t = n.resultWithStarts();\n        if (t) for (const e of t) i.push(e);\n      } else i.push({\n        line: e,\n        start: 0\n      });\n\n      c++, f = !1;\n    }\n  }\n\n  return i = i.filter(t => t.line.length > 1), 0 === i.length ? null : i;\n}\n\nc.setExtent(r), u.setExtent(r);\nexport { h as area, y as clipLinesMarshall, x as clipMarshall, g as triangleArea, a as triangleAreaArray, m as triangulate, p as triangulateEarcut, d as triangulateLibtess };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/templateUtils.js"],"names":["isNone","t","e","triangulate","n","o","TILE_SIZE","r","GeometryType","s","TileClipper","l","bufcut","i","f","c","u","h","a","Math","abs","g","getValue","m","coords","lengths","hasIndeterminateRingOrder","length","push","p","d","max","slice","buffer","b","x","setPixelMargin","reset","Polygon","moveTo","lineTo","close","result","y","LineString","resultWithStarts","line","start","filter","setExtent","area","clipLinesMarshall","clipMarshall","triangleArea","triangleAreaArray","triangulateEarcut","triangulateLibtess"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../../../../core/maybe.js\";import{e}from\"../../../../../../chunks/earcut.js\";import{triangulate as n}from\"../../../../../../geometry/libtess.js\";import o from\"../../../../../../layers/graphics/OptimizedGeometry.js\";import{TILE_SIZE as r}from\"../../definitions.js\";import{GeometryType as s}from\"../../Geometry.js\";import{TileClipper as l}from\"../../TileClipper.js\";import{bufcut as i}from\"../bufcut.js\";const f=1e-5,c=new l(0,0,0,1,0),u=new l(0,0,0,1,0);function h(t,e,n){let o=0;for(let r=1;r<n;r++){const n=t[2*(e+r-1)],s=t[2*(e+r-1)+1];o+=(t[2*(e+r)]-n)*(t[2*(e+r)+1]+s)}return o}function a(t,e,n,o,r){let s=0;const l=2;for(let i=n;i<o;i+=3){const n=(t[i]-r)*l,o=(t[i+1]-r)*l,f=(t[i+2]-r)*l;s+=Math.abs((e[n]-e[f])*(e[o+1]-e[n+1])-(e[n]-e[o])*(e[f+1]-e[n+1]))}return s}function g(t,e,n,o,r){let s=0;const l=2;for(let i=n;i<o;i+=3){const n=(t.getValue(i)-r)*l,o=(t.getValue(i+1)-r)*l,f=(t.getValue(i+2)-r)*l;s+=Math.abs((e[n]-e[f])*(e[o+1]-e[n+1])-(e[n]-e[o])*(e[f+1]-e[n+1]))}return s}function m(t,e){const{coords:n,lengths:o,hasIndeterminateRingOrder:r}=e,s=0,l=t;if(r)return!1;let c=0;for(let u=0;u<o.length;){let t=u,e=o[u],r=h(n,c,e);const g=[];for(;++t<o.length;){const s=o[t],l=h(n,c+e,s);if(!(l>0))break;r+=l,g.push(c+e),e+=s}const m=l.length;i(l,n,c,c+e,g,2,s);const p=a(l,n,m,l.length,s),d=Math.abs(r);if(Math.abs((p-d)/Math.max(1e-7,d))>f)return l.length=0,!1;u=t,c+=e}return!0}function p(t,n,o){const{coords:r,lengths:s,hasIndeterminateRingOrder:l}=n;if(l)return!1;let i=0;for(let f=0;f<s.length;){let l=f,c=s[f];const u=[];for(;++l<s.length;){const t=s[l];if(!(h(r,i+c,t)>0))break;u.push(i+c-i),c+=t}const a=i+c,g=n.coords.slice(2*i,2*a),m=e(g,u,2);for(const e of m)t.push(e+o+i);f=l,i+=c}return!0}function d(t){const{coords:e,lengths:o}=t,{buffer:r}=n(e,o);return r}function b(t,e,n){let o=0;for(let r=0;r<t.lengths.length;r++){const s=t.lengths[r];for(let r=0;r<s;r++){const s=t.coords[2*(r+o)],l=t.coords[2*(r+o)+1];if(s<e||s>n||l<e||l>n)return!0}o+=s}return!1}function x(e,n){if(t(e))return null;if(!b(e,-128,r+128))return e;c.setPixelMargin(n),c.reset(s.Polygon);let l=0;for(let t=0;t<e.lengths.length;t++){const n=e.lengths[t];let o=e.coords[2*(0+l)],r=e.coords[2*(0+l)+1];c.moveTo(o,r);for(let t=1;t<n;t++)o=e.coords[2*(t+l)],r=e.coords[2*(t+l)+1],c.lineTo(o,r);c.close(),l+=n}const i=c.result(!1);if(!i)return null;const f=[],u=[];for(const t of i){let e=0;for(const n of t)u.push(n.x),u.push(n.y),e++;f.push(e)}return new o(f,u)}function y(t,e){u.setPixelMargin(e);const n=u,o=-e,l=r+e;let i=[],f=!1,c=0;for(;c<t.length;){const e=[],r=t[c];if(!r)return null;n.reset(s.LineString);let[u,h]=r[0];if(f)n.moveTo(u,h);else{if(u<o||u>l||h<o||h>l){f=!0;continue}e.push({x:u,y:h})}let a=!1;const g=r.length;for(let t=1;t<g;++t)if(u+=r[t][0],h+=r[t][1],f)n.lineTo(u,h);else{if(u<o||u>l||h<o||h>l){a=!0;break}e.push({x:u,y:h})}if(a)f=!0;else{if(f){const t=n.resultWithStarts();if(t)for(const e of t)i.push(e)}else i.push({line:e,start:0});c++,f=!1}}return i=i.filter((t=>t.line.length>1)),0===i.length?null:i}c.setExtent(r),u.setExtent(r);export{h as area,y as clipLinesMarshall,x as clipMarshall,g as triangleArea,a as triangleAreaArray,m as triangulate,p as triangulateEarcut,d as triangulateLibtess};\n"]},"metadata":{},"sourceType":"module"}