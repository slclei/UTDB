{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from \"../../../Color.js\";\nimport e from \"../../../request.js\";\nimport { getOrCreateMapValue as r } from \"../../../core/MapUtils.js\";\nimport { unwrap as o, applySome as n, isSome as s, isNone as i } from \"../../../core/maybe.js\";\nimport { a } from \"../../../chunks/mat3.js\";\nimport { c } from \"../../../chunks/mat3f64.js\";\nimport { f as l } from \"../../../chunks/vec3f64.js\";\nimport { f as u } from \"../../../chunks/vec4f64.js\";\nimport f from \"../MeshComponent.js\";\nimport m from \"../MeshMaterialMetallicRoughness.js\";\nimport p from \"../MeshTexture.js\";\nimport { MeshVertexAttributes as d } from \"../MeshVertexAttributes.js\";\nimport { BufferViewVec3f64 as g, BufferViewVec3f as x, BufferViewVec4f as h, BufferViewVec4u8 as v, BufferViewVec2f as w, BufferViewVec4u16 as b, BufferViewVec3u8 as j, BufferViewVec3u16 as y } from \"../buffer/BufferView.js\";\nimport { t as A, a as M, s as C, b as T } from \"../../../chunks/vec32.js\";\nimport { t as E, s as R, a as k } from \"../../../chunks/vec42.js\";\nimport { createBuffer as B } from \"../buffer/utils.js\";\nimport { georeferenceByTransform as F } from \"./georeference.js\";\nimport { DefaultLoadingContext as $ } from \"../../../views/3d/glTF/DefaultLoadingContext.js\";\nimport { load as I } from \"../../../views/3d/glTF/loader.js\";\nimport { triangleFanToTriangles as L, triangleStripToTriangles as S, trianglesToTriangles as N } from \"../../../views/3d/glTF/internal/indexUtils.js\";\nimport { generateIndexArray as O } from \"../../../views/3d/webgl-engine/lib/geometryDataUtils.js\";\nimport { COLOR_GAMMA as _ } from \"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";\nimport { PrimitiveType as D, TextureWrapMode as G } from \"../../../views/webgl/enums.js\";\nimport { f as P, c as U } from \"../../../chunks/vec33.js\";\nimport { f as V, c as q } from \"../../../chunks/vec43.js\";\nimport { n as z, f as K } from \"../../../chunks/vec22.js\";\n\nasync function Q(t, e, r) {\n  const o = new $(H(r)),\n        n = (await I(o, e, r, !0)).model,\n        i = n.lods.shift(),\n        a = new Map(),\n        c = new Map();\n  n.textures.forEach((t, e) => a.set(e, Y(t))), n.materials.forEach((t, e) => c.set(e, Z(t, a)));\n  const l = X(i);\n\n  for (const s of l.parts) tt(l, s, c);\n\n  const {\n    position: u,\n    normal: f,\n    tangent: m,\n    color: p,\n    texCoord0: g\n  } = l.vertexAttributes,\n        x = {\n    position: u.typedBuffer,\n    normal: s(f) ? f.typedBuffer : null,\n    tangent: s(m) ? m.typedBuffer : null,\n    uv: s(g) ? g.typedBuffer : null,\n    color: s(p) ? p.typedBuffer : null\n  },\n        h = F(x, t, r);\n  return {\n    transform: h.transform,\n    components: l.components,\n    spatialReference: t.spatialReference,\n    vertexAttributes: new d({\n      position: h.vertexAttributes.position,\n      normal: h.vertexAttributes.normal,\n      tangent: h.vertexAttributes.tangent,\n      color: x.color,\n      uv: x.uv\n    })\n  };\n}\n\nfunction H(t) {\n  return null != t && t.resolveFile ? {\n    busy: !1,\n    request: async (r, o, n) => {\n      const i = t.resolveFile(r),\n            a = \"image\" === o ? \"image\" : \"binary\" === o ? \"array-buffer\" : \"json\";\n      return (await e(i, {\n        responseType: a,\n        signal: s(n) ? n.signal : null\n      })).data;\n    }\n  } : null;\n}\n\nfunction J(t, e) {\n  if (i(t)) return \"-\";\n  const o = t.typedBuffer;\n  return `${r(e, o.buffer, () => e.size)}/${o.byteOffset}/${o.byteLength}`;\n}\n\nfunction W(t) {\n  return s(t) ? t.toString() : \"-\";\n}\n\nfunction X(t) {\n  let e = 0;\n  const o = {\n    color: !1,\n    tangent: !1,\n    normal: !1,\n    texCoord0: !1\n  },\n        n = new Map(),\n        s = new Map(),\n        i = [];\n\n  for (const a of t.parts) {\n    const {\n      attributes: {\n        position: t,\n        normal: c,\n        color: l,\n        tangent: u,\n        texCoord0: f\n      }\n    } = a,\n          m = `\\n      ${J(t, n)}/\\n      ${J(c, n)}/\\n      ${J(l, n)}/\\n      ${J(u, n)}/\\n      ${J(f, n)}/\\n      ${W(a.transform)}\\n    `;\n    let p = !1;\n    const d = r(s, m, () => (p = !0, {\n      start: e,\n      length: t.count\n    }));\n    p && (e += t.count), c && (o.normal = !0), l && (o.color = !0), u && (o.tangent = !0), f && (o.texCoord0 = !0), i.push({\n      gltf: a,\n      writeVertices: p,\n      region: d\n    });\n  }\n\n  return {\n    vertexAttributes: {\n      position: B(g, e),\n      normal: o.normal ? B(x, e) : null,\n      tangent: o.tangent ? B(h, e) : null,\n      color: o.color ? B(v, e) : null,\n      texCoord0: o.texCoord0 ? B(w, e) : null\n    },\n    parts: i,\n    components: []\n  };\n}\n\nfunction Y(t) {\n  return new p({\n    data: t.data,\n    wrap: nt(t.parameters.wrap)\n  });\n}\n\nfunction Z(e, r) {\n  const s = new t(at(e.color, e.opacity)),\n        i = e.emissiveFactor ? new t(ct(e.emissiveFactor)) : null;\n  return new m({\n    color: s,\n    colorTexture: o(n(e.textureColor, t => r.get(t))),\n    normalTexture: o(n(e.textureNormal, t => r.get(t))),\n    emissiveColor: i,\n    emissiveTexture: o(n(e.textureEmissive, t => r.get(t))),\n    occlusionTexture: o(n(e.textureOcclusion, t => r.get(t))),\n    alphaMode: ot(e.alphaMode),\n    alphaCutoff: e.alphaCutoff,\n    doubleSided: e.doubleSided,\n    metallic: e.metallicFactor,\n    roughness: e.roughnessFactor,\n    metallicRoughnessTexture: o(n(e.textureMetallicRoughness, t => r.get(t)))\n  });\n}\n\nfunction tt(t, e, r) {\n  e.writeVertices && et(t, e);\n  const o = e.gltf,\n        n = rt(o.indices || o.attributes.position.count, o.primitiveType),\n        s = e.region.start;\n  if (s) for (let i = 0; i < n.length; i++) n[i] += s;\n  t.components.push(new f({\n    faces: n,\n    material: r.get(o.material),\n    trustSourceNormals: !0\n  }));\n}\n\nfunction et(t, e) {\n  const {\n    position: r,\n    normal: o,\n    tangent: n,\n    color: i,\n    texCoord0: l\n  } = t.vertexAttributes,\n        u = e.region.start,\n        {\n    attributes: f,\n    transform: m\n  } = e.gltf,\n        p = f.position.count;\n\n  if (A(r.slice(u, p), f.position, m), s(f.normal) && s(o)) {\n    const t = a(c(), m);\n    M(o.slice(u, p), f.normal, t);\n  } else s(o) && P(o, 0, 0, 1, {\n    dstIndex: u,\n    count: p\n  });\n\n  if (s(f.tangent) && s(n)) {\n    const t = a(c(), m);\n    E(n.slice(u, p), f.tangent, t);\n  } else s(n) && V(n, 0, 0, 1, 1, {\n    dstIndex: u,\n    count: p\n  });\n\n  if (s(f.texCoord0) && s(l) ? z(l.slice(u, p), f.texCoord0) : s(l) && K(l, 0, 0, {\n    dstIndex: u,\n    count: p\n  }), s(f.color) && s(i)) {\n    const t = f.color,\n          e = i.slice(u, p);\n    if (4 === t.elementCount) t instanceof h ? R(e, t, 255) : t instanceof v ? q(e, t) : t instanceof b && k(e, t, 8);else {\n      V(e, 255, 255, 255, 255);\n      const r = j.fromTypedArray(e.typedBuffer, e.typedBufferStride);\n      t instanceof x ? C(r, t, 255) : t instanceof j ? U(r, t) : t instanceof y && T(r, t, 8);\n    }\n  } else s(i) && V(i.slice(u, p), 255, 255, 255, 255);\n}\n\nfunction rt(t, e) {\n  switch (e) {\n    case D.TRIANGLES:\n      return N(t, O);\n\n    case D.TRIANGLE_STRIP:\n      return S(t);\n\n    case D.TRIANGLE_FAN:\n      return L(t);\n  }\n}\n\nfunction ot(t) {\n  switch (t) {\n    case \"OPAQUE\":\n      return \"opaque\";\n\n    case \"MASK\":\n      return \"mask\";\n\n    case \"BLEND\":\n      return \"blend\";\n  }\n}\n\nfunction nt(t) {\n  return {\n    horizontal: st(t.s),\n    vertical: st(t.t)\n  };\n}\n\nfunction st(t) {\n  switch (t) {\n    case G.CLAMP_TO_EDGE:\n      return \"clamp\";\n\n    case G.MIRRORED_REPEAT:\n      return \"mirror\";\n\n    case G.REPEAT:\n      return \"repeat\";\n  }\n}\n\nfunction it(t) {\n  return t ** (1 / _) * 255;\n}\n\nfunction at(t, e) {\n  return u(it(t[0]), it(t[1]), it(t[2]), e);\n}\n\nfunction ct(t) {\n  return l(it(t[0]), it(t[1]), it(t[2]));\n}\n\nexport { Q as loadGLTFMesh };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js"],"names":["t","e","getOrCreateMapValue","r","unwrap","o","applySome","n","isSome","s","isNone","i","a","c","f","l","u","m","p","MeshVertexAttributes","d","BufferViewVec3f64","g","BufferViewVec3f","x","BufferViewVec4f","h","BufferViewVec4u8","v","BufferViewVec2f","w","BufferViewVec4u16","b","BufferViewVec3u8","j","BufferViewVec3u16","y","A","M","C","T","E","R","k","createBuffer","B","georeferenceByTransform","F","DefaultLoadingContext","$","load","I","triangleFanToTriangles","L","triangleStripToTriangles","S","trianglesToTriangles","N","generateIndexArray","O","COLOR_GAMMA","_","PrimitiveType","D","TextureWrapMode","G","P","U","V","q","z","K","Q","H","model","lods","shift","Map","textures","forEach","set","Y","materials","Z","X","parts","tt","position","normal","tangent","color","texCoord0","vertexAttributes","typedBuffer","uv","transform","components","spatialReference","resolveFile","busy","request","responseType","signal","data","J","buffer","size","byteOffset","byteLength","W","toString","attributes","start","length","count","push","gltf","writeVertices","region","wrap","nt","parameters","at","opacity","emissiveFactor","ct","colorTexture","textureColor","get","normalTexture","textureNormal","emissiveColor","emissiveTexture","textureEmissive","occlusionTexture","textureOcclusion","alphaMode","ot","alphaCutoff","doubleSided","metallic","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","textureMetallicRoughness","et","rt","indices","primitiveType","faces","material","trustSourceNormals","slice","dstIndex","elementCount","fromTypedArray","typedBufferStride","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","horizontal","st","vertical","CLAMP_TO_EDGE","MIRRORED_REPEAT","REPEAT","it","loadGLTFMesh"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from\"../../../Color.js\";import e from\"../../../request.js\";import{getOrCreateMapValue as r}from\"../../../core/MapUtils.js\";import{unwrap as o,applySome as n,isSome as s,isNone as i}from\"../../../core/maybe.js\";import{a}from\"../../../chunks/mat3.js\";import{c}from\"../../../chunks/mat3f64.js\";import{f as l}from\"../../../chunks/vec3f64.js\";import{f as u}from\"../../../chunks/vec4f64.js\";import f from\"../MeshComponent.js\";import m from\"../MeshMaterialMetallicRoughness.js\";import p from\"../MeshTexture.js\";import{MeshVertexAttributes as d}from\"../MeshVertexAttributes.js\";import{BufferViewVec3f64 as g,BufferViewVec3f as x,BufferViewVec4f as h,BufferViewVec4u8 as v,BufferViewVec2f as w,BufferViewVec4u16 as b,BufferViewVec3u8 as j,BufferViewVec3u16 as y}from\"../buffer/BufferView.js\";import{t as A,a as M,s as C,b as T}from\"../../../chunks/vec32.js\";import{t as E,s as R,a as k}from\"../../../chunks/vec42.js\";import{createBuffer as B}from\"../buffer/utils.js\";import{georeferenceByTransform as F}from\"./georeference.js\";import{DefaultLoadingContext as $}from\"../../../views/3d/glTF/DefaultLoadingContext.js\";import{load as I}from\"../../../views/3d/glTF/loader.js\";import{triangleFanToTriangles as L,triangleStripToTriangles as S,trianglesToTriangles as N}from\"../../../views/3d/glTF/internal/indexUtils.js\";import{generateIndexArray as O}from\"../../../views/3d/webgl-engine/lib/geometryDataUtils.js\";import{COLOR_GAMMA as _}from\"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{PrimitiveType as D,TextureWrapMode as G}from\"../../../views/webgl/enums.js\";import{f as P,c as U}from\"../../../chunks/vec33.js\";import{f as V,c as q}from\"../../../chunks/vec43.js\";import{n as z,f as K}from\"../../../chunks/vec22.js\";async function Q(t,e,r){const o=new $(H(r)),n=(await I(o,e,r,!0)).model,i=n.lods.shift(),a=new Map,c=new Map;n.textures.forEach(((t,e)=>a.set(e,Y(t)))),n.materials.forEach(((t,e)=>c.set(e,Z(t,a))));const l=X(i);for(const s of l.parts)tt(l,s,c);const{position:u,normal:f,tangent:m,color:p,texCoord0:g}=l.vertexAttributes,x={position:u.typedBuffer,normal:s(f)?f.typedBuffer:null,tangent:s(m)?m.typedBuffer:null,uv:s(g)?g.typedBuffer:null,color:s(p)?p.typedBuffer:null},h=F(x,t,r);return{transform:h.transform,components:l.components,spatialReference:t.spatialReference,vertexAttributes:new d({position:h.vertexAttributes.position,normal:h.vertexAttributes.normal,tangent:h.vertexAttributes.tangent,color:x.color,uv:x.uv})}}function H(t){return null!=t&&t.resolveFile?{busy:!1,request:async(r,o,n)=>{const i=t.resolveFile(r),a=\"image\"===o?\"image\":\"binary\"===o?\"array-buffer\":\"json\";return(await e(i,{responseType:a,signal:s(n)?n.signal:null})).data}}:null}function J(t,e){if(i(t))return\"-\";const o=t.typedBuffer;return`${r(e,o.buffer,(()=>e.size))}/${o.byteOffset}/${o.byteLength}`}function W(t){return s(t)?t.toString():\"-\"}function X(t){let e=0;const o={color:!1,tangent:!1,normal:!1,texCoord0:!1},n=new Map,s=new Map,i=[];for(const a of t.parts){const{attributes:{position:t,normal:c,color:l,tangent:u,texCoord0:f}}=a,m=`\\n      ${J(t,n)}/\\n      ${J(c,n)}/\\n      ${J(l,n)}/\\n      ${J(u,n)}/\\n      ${J(f,n)}/\\n      ${W(a.transform)}\\n    `;let p=!1;const d=r(s,m,(()=>(p=!0,{start:e,length:t.count})));p&&(e+=t.count),c&&(o.normal=!0),l&&(o.color=!0),u&&(o.tangent=!0),f&&(o.texCoord0=!0),i.push({gltf:a,writeVertices:p,region:d})}return{vertexAttributes:{position:B(g,e),normal:o.normal?B(x,e):null,tangent:o.tangent?B(h,e):null,color:o.color?B(v,e):null,texCoord0:o.texCoord0?B(w,e):null},parts:i,components:[]}}function Y(t){return new p({data:t.data,wrap:nt(t.parameters.wrap)})}function Z(e,r){const s=new t(at(e.color,e.opacity)),i=e.emissiveFactor?new t(ct(e.emissiveFactor)):null;return new m({color:s,colorTexture:o(n(e.textureColor,(t=>r.get(t)))),normalTexture:o(n(e.textureNormal,(t=>r.get(t)))),emissiveColor:i,emissiveTexture:o(n(e.textureEmissive,(t=>r.get(t)))),occlusionTexture:o(n(e.textureOcclusion,(t=>r.get(t)))),alphaMode:ot(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:o(n(e.textureMetallicRoughness,(t=>r.get(t))))})}function tt(t,e,r){e.writeVertices&&et(t,e);const o=e.gltf,n=rt(o.indices||o.attributes.position.count,o.primitiveType),s=e.region.start;if(s)for(let i=0;i<n.length;i++)n[i]+=s;t.components.push(new f({faces:n,material:r.get(o.material),trustSourceNormals:!0}))}function et(t,e){const{position:r,normal:o,tangent:n,color:i,texCoord0:l}=t.vertexAttributes,u=e.region.start,{attributes:f,transform:m}=e.gltf,p=f.position.count;if(A(r.slice(u,p),f.position,m),s(f.normal)&&s(o)){const t=a(c(),m);M(o.slice(u,p),f.normal,t)}else s(o)&&P(o,0,0,1,{dstIndex:u,count:p});if(s(f.tangent)&&s(n)){const t=a(c(),m);E(n.slice(u,p),f.tangent,t)}else s(n)&&V(n,0,0,1,1,{dstIndex:u,count:p});if(s(f.texCoord0)&&s(l)?z(l.slice(u,p),f.texCoord0):s(l)&&K(l,0,0,{dstIndex:u,count:p}),s(f.color)&&s(i)){const t=f.color,e=i.slice(u,p);if(4===t.elementCount)t instanceof h?R(e,t,255):t instanceof v?q(e,t):t instanceof b&&k(e,t,8);else{V(e,255,255,255,255);const r=j.fromTypedArray(e.typedBuffer,e.typedBufferStride);t instanceof x?C(r,t,255):t instanceof j?U(r,t):t instanceof y&&T(r,t,8)}}else s(i)&&V(i.slice(u,p),255,255,255,255)}function rt(t,e){switch(e){case D.TRIANGLES:return N(t,O);case D.TRIANGLE_STRIP:return S(t);case D.TRIANGLE_FAN:return L(t)}}function ot(t){switch(t){case\"OPAQUE\":return\"opaque\";case\"MASK\":return\"mask\";case\"BLEND\":return\"blend\"}}function nt(t){return{horizontal:st(t.s),vertical:st(t.t)}}function st(t){switch(t){case G.CLAMP_TO_EDGE:return\"clamp\";case G.MIRRORED_REPEAT:return\"mirror\";case G.REPEAT:return\"repeat\"}}function it(t){return t**(1/_)*255}function at(t,e){return u(it(t[0]),it(t[1]),it(t[2]),e)}function ct(t){return l(it(t[0]),it(t[1]),it(t[2]))}export{Q as loadGLTFMesh};\n"]},"metadata":{},"sourceType":"module"}