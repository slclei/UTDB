{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { packFloatRGBA as t } from \"../../../../core/floatRGBA.js\";\nimport { onAbort as s, createAbortError as e } from \"../../../../core/promiseUtils.js\";\nconst i = 1e20;\n\nclass r {\n  constructor(t) {\n    this.size = t;\n    const s = document.createElement(\"canvas\");\n    s.width = s.height = t, this._context = s.getContext(\"2d\"), this._gridOuter = new Float64Array(t * t), this._gridInner = new Float64Array(t * t), this._f = new Float64Array(t), this._d = new Float64Array(t), this._z = new Float64Array(t + 1), this._v = new Int16Array(t);\n  }\n\n  dispose() {\n    this._context = this._gridOuter = this._gridInner = this._f = this._d = this._z = this._v = null, this._svg && (document.body.removeChild(this._svg), this._svg = null);\n  }\n\n  draw(r, h) {\n    let n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 31;\n\n    this._initSVG();\n\n    const o = this.createSVGString(r);\n    return new Promise((r, a) => {\n      const d = new Image();\n      d.src = \"data:image/svg+xml; charset=utf8, \" + encodeURIComponent(o), d.onload = () => {\n        d.onload = null, this._context.clearRect(0, 0, this.size, this.size), this._context.drawImage(d, 0, 0, this.size, this.size);\n\n        const s = this._context.getImageData(0, 0, this.size, this.size),\n              e = new Uint8Array(this.size * this.size * 4);\n\n        for (let t = 0; t < this.size * this.size; t++) {\n          const e = s.data[4 * t + 3] / 255;\n          this._gridOuter[t] = 1 === e ? 0 : 0 === e ? i : Math.max(0, .5 - e) ** 2, this._gridInner[t] = 1 === e ? i : 0 === e ? 0 : Math.max(0, e - .5) ** 2;\n        }\n\n        this._edt(this._gridOuter, this.size, this.size), this._edt(this._gridInner, this.size, this.size);\n\n        for (let i = 0; i < this.size * this.size; i++) {\n          const s = this._gridOuter[i] - this._gridInner[i];\n          t(.5 - s / (2 * n), e, 4 * i);\n        }\n\n        r(e);\n      };\n      const l = h && h.signal;\n      l && s(l, () => a(e()));\n    });\n  }\n\n  _initSVG() {\n    if (!this._svg) {\n      const t = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n      t.setAttribute(\"style\", \"position: absolute;\"), t.setAttribute(\"width\", \"0\"), t.setAttribute(\"height\", \"0\"), t.setAttribute(\"aria-hidden\", \"true\"), t.setAttribute(\"role\", \"presentation\"), document.body.appendChild(t), this._svg = t;\n    }\n  }\n\n  createSVGString(t) {\n    this._initSVG();\n\n    const s = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    s.setAttribute(\"d\", t), this._svg.appendChild(s);\n    const e = s.getBBox(),\n          i = e.width / e.height,\n          r = this.size / 2;\n    let h, n, o, a;\n\n    if (i > 1) {\n      n = h = r / e.width;\n      const t = r * (1 / i);\n      o = this.size / 4, a = r - t / 2;\n    } else {\n      h = n = r / e.height;\n      o = r - r * i / 2, a = this.size / 4;\n    }\n\n    const d = -e.x * h + o,\n          l = -e.y * n + a;\n    s.setAttribute(\"style\", `transform: matrix(${h}, 0, 0, ${n}, ${d}, ${l})`);\n    const _ = `<svg style=\"fill:red;\" height=\"${this.size}\" width=\"${this.size}\" xmlns=\"http://www.w3.org/2000/svg\">${this._svg.innerHTML}</svg>`;\n    return this._svg.removeChild(s), _;\n  }\n\n  _edt(t, s, e) {\n    const i = this._f,\n          r = this._d,\n          h = this._v,\n          n = this._z;\n\n    for (let o = 0; o < s; o++) {\n      for (let r = 0; r < e; r++) i[r] = t[r * s + o];\n\n      this._edt1d(i, r, h, n, e);\n\n      for (let i = 0; i < e; i++) t[i * s + o] = r[i];\n    }\n\n    for (let o = 0; o < e; o++) {\n      for (let e = 0; e < s; e++) i[e] = t[o * s + e];\n\n      this._edt1d(i, r, h, n, s);\n\n      for (let e = 0; e < s; e++) t[o * s + e] = Math.sqrt(r[e]);\n    }\n  }\n\n  _edt1d(t, s, e, r, h) {\n    e[0] = 0, r[0] = -i, r[1] = +i;\n\n    for (let n = 1, o = 0; n < h; n++) {\n      let s = (t[n] + n * n - (t[e[o]] + e[o] * e[o])) / (2 * n - 2 * e[o]);\n\n      for (; s <= r[o];) o--, s = (t[n] + n * n - (t[e[o]] + e[o] * e[o])) / (2 * n - 2 * e[o]);\n\n      o++, e[o] = n, r[o] = s, r[o + 1] = +i;\n    }\n\n    for (let i = 0, n = 0; i < h; i++) {\n      for (; r[n + 1] < i;) n++;\n\n      s[i] = (i - e[n]) * (i - e[n]) + t[e[n]];\n    }\n  }\n\n}\n\nexport { r as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/SDFConverter.js"],"names":["packFloatRGBA","t","onAbort","s","createAbortError","e","i","r","constructor","size","document","createElement","width","height","_context","getContext","_gridOuter","Float64Array","_gridInner","_f","_d","_z","_v","Int16Array","dispose","_svg","body","removeChild","draw","h","n","_initSVG","o","createSVGString","Promise","a","d","Image","src","encodeURIComponent","onload","clearRect","drawImage","getImageData","Uint8Array","data","Math","max","_edt","l","signal","createElementNS","setAttribute","appendChild","getBBox","x","y","_","innerHTML","_edt1d","sqrt","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as t}from\"../../../../core/floatRGBA.js\";import{onAbort as s,createAbortError as e}from\"../../../../core/promiseUtils.js\";const i=1e20;class r{constructor(t){this.size=t;const s=document.createElement(\"canvas\");s.width=s.height=t,this._context=s.getContext(\"2d\"),this._gridOuter=new Float64Array(t*t),this._gridInner=new Float64Array(t*t),this._f=new Float64Array(t),this._d=new Float64Array(t),this._z=new Float64Array(t+1),this._v=new Int16Array(t)}dispose(){this._context=this._gridOuter=this._gridInner=this._f=this._d=this._z=this._v=null,this._svg&&(document.body.removeChild(this._svg),this._svg=null)}draw(r,h,n=31){this._initSVG();const o=this.createSVGString(r);return new Promise(((r,a)=>{const d=new Image;d.src=\"data:image/svg+xml; charset=utf8, \"+encodeURIComponent(o),d.onload=()=>{d.onload=null,this._context.clearRect(0,0,this.size,this.size),this._context.drawImage(d,0,0,this.size,this.size);const s=this._context.getImageData(0,0,this.size,this.size),e=new Uint8Array(this.size*this.size*4);for(let t=0;t<this.size*this.size;t++){const e=s.data[4*t+3]/255;this._gridOuter[t]=1===e?0:0===e?i:Math.max(0,.5-e)**2,this._gridInner[t]=1===e?i:0===e?0:Math.max(0,e-.5)**2}this._edt(this._gridOuter,this.size,this.size),this._edt(this._gridInner,this.size,this.size);for(let i=0;i<this.size*this.size;i++){const s=this._gridOuter[i]-this._gridInner[i];t(.5-s/(2*n),e,4*i)}r(e)};const l=h&&h.signal;l&&s(l,(()=>a(e())))}))}_initSVG(){if(!this._svg){const t=document.createElementNS(\"http://www.w3.org/2000/svg\",\"svg\");t.setAttribute(\"style\",\"position: absolute;\"),t.setAttribute(\"width\",\"0\"),t.setAttribute(\"height\",\"0\"),t.setAttribute(\"aria-hidden\",\"true\"),t.setAttribute(\"role\",\"presentation\"),document.body.appendChild(t),this._svg=t}}createSVGString(t){this._initSVG();const s=document.createElementNS(\"http://www.w3.org/2000/svg\",\"path\");s.setAttribute(\"d\",t),this._svg.appendChild(s);const e=s.getBBox(),i=e.width/e.height,r=this.size/2;let h,n,o,a;if(i>1){n=h=r/e.width;const t=r*(1/i);o=this.size/4,a=r-t/2}else{h=n=r/e.height;o=r-r*i/2,a=this.size/4}const d=-e.x*h+o,l=-e.y*n+a;s.setAttribute(\"style\",`transform: matrix(${h}, 0, 0, ${n}, ${d}, ${l})`);const _=`<svg style=\"fill:red;\" height=\"${this.size}\" width=\"${this.size}\" xmlns=\"http://www.w3.org/2000/svg\">${this._svg.innerHTML}</svg>`;return this._svg.removeChild(s),_}_edt(t,s,e){const i=this._f,r=this._d,h=this._v,n=this._z;for(let o=0;o<s;o++){for(let r=0;r<e;r++)i[r]=t[r*s+o];this._edt1d(i,r,h,n,e);for(let i=0;i<e;i++)t[i*s+o]=r[i]}for(let o=0;o<e;o++){for(let e=0;e<s;e++)i[e]=t[o*s+e];this._edt1d(i,r,h,n,s);for(let e=0;e<s;e++)t[o*s+e]=Math.sqrt(r[e])}}_edt1d(t,s,e,r,h){e[0]=0,r[0]=-i,r[1]=+i;for(let n=1,o=0;n<h;n++){let s=(t[n]+n*n-(t[e[o]]+e[o]*e[o]))/(2*n-2*e[o]);for(;s<=r[o];)o--,s=(t[n]+n*n-(t[e[o]]+e[o]*e[o]))/(2*n-2*e[o]);o++,e[o]=n,r[o]=s,r[o+1]=+i}for(let i=0,n=0;i<h;i++){for(;r[n+1]<i;)n++;s[i]=(i-e[n])*(i-e[n])+t[e[n]]}}}export{r as default};\n"]},"metadata":{},"sourceType":"module"}