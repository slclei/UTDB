{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport e from \"../../core/Error.js\";\nimport { isSome as t } from \"../../core/maybe.js\";\nimport n from \"../HeightModelInfo.js\";\nimport { parse as i } from \"../../layers/support/arcgisLayerUrl.js\";\n\nfunction r(t, i) {\n  if (!t) return null;\n  if (!c(t)) return new e(\"webscene:unsupported-height-model-info\", \"The vertical coordinate system of the scene is not supported\", {\n    heightModelInfo: t\n  });\n  const r = t.heightUnit,\n        o = n.deriveUnitFromSR(t, i).heightUnit;\n  return r !== o ? new e(\"webscene:incompatible-height-unit\", `The vertical units of the scene (${r}) must match the horizontal units of the scene (${o})`, {\n    verticalUnit: r,\n    horizontalUnit: o\n  }) : null;\n}\n\nfunction o(t, i, r) {\n  const o = h(t),\n        c = i,\n        u = a(o, c, r);\n\n  if (o) {\n    const i = n.deriveUnitFromSR(o, t.spatialReference).heightUnit;\n\n    if (!r && i !== o.heightUnit) {\n      const t = new e(\"layerview:unmatched-height-unit\", `The vertical units of the layer must match the horizontal units (${i})`, {\n        horizontalUnit: i\n      });\n      return new e(\"layerview:unsupported-height-model-info\", \"The vertical coordinate system of the layer is not supported\", {\n        heightModelInfo: o,\n        error: t\n      });\n    }\n  }\n\n  if (!l(t) || u === s.Unsupported) return new e(\"layerview:unsupported-height-model-info\", \"The vertical coordinate system of the layer is not supported\", {\n    heightModelInfo: o\n  });\n\n  switch (u) {\n    case s.Units:\n      {\n        const t = o.heightUnit || \"unknown\",\n              n = c.heightUnit || \"unknown\",\n              i = new e(\"layerview:incompatible-height-unit\", `The vertical units of the layer (${t}) must match the vertical units of the scene (${n})`, {\n          layerUnit: t,\n          sceneUnit: n\n        });\n        return new e(\"layerview:incompatible-height-model-info\", \"The vertical coordinate system of the layer is incompatible with the scene\", {\n          layerHeightModelInfo: o,\n          sceneHeightModelInfo: c,\n          error: i\n        });\n      }\n\n    case s.HeightModel:\n      {\n        const t = o.heightModel || \"unknown\",\n              n = c.heightModel || \"unknown\",\n              i = new e(\"layerview:incompatible-height-model\", `The height model of the layer (${t}) must match the height model of the scene (${n})`, {\n          layerHeightModel: t,\n          sceneHeightModel: n\n        });\n        return new e(\"layerview:incompatible-height-model-info\", \"The vertical coordinate system of the layer is incompatible with the scene\", {\n          layerHeightModelInfo: o,\n          sceneHeightModelInfo: c,\n          error: i\n        });\n      }\n\n    case s.CRS:\n      {\n        const t = o.vertCRS || \"unknown\",\n              n = c.vertCRS || \"unknown\",\n              i = new e(\"layerview:incompatible-vertical-datum\", `The vertical datum of the layer (${t}) must match the vertical datum of the scene (${n})`, {\n          layerDatum: t,\n          sceneDatum: n\n        });\n        return new e(\"layerview:incompatible-height-model-info\", \"The vertical coordinate system of the layer is incompatible with the scene\", {\n          layerHeightModelInfo: o,\n          sceneHeightModelInfo: c,\n          error: i\n        });\n      }\n  }\n\n  return null;\n}\n\nfunction a(e, t, n) {\n  if (!c(e) || !c(t)) return s.Unsupported;\n  if (null == e || null == t) return s.Ok;\n  if (!n && e.heightUnit !== t.heightUnit) return s.Units;\n  if (e.heightModel !== t.heightModel) return s.HeightModel;\n\n  switch (e.heightModel) {\n    case \"gravity-related-height\":\n      return s.Ok;\n\n    case \"ellipsoidal\":\n      return e.vertCRS === t.vertCRS ? s.Ok : s.CRS;\n\n    default:\n      return s.Unsupported;\n  }\n}\n\nvar s;\n\nfunction c(e) {\n  return null == e || null != e.heightModel && null != e.heightUnit;\n}\n\nfunction l(e) {\n  return \"heightModelInfo\" in e && null != e.heightModelInfo || null != e.spatialReference || !d(e);\n}\n\nfunction h(e) {\n  const r = e.url && i(e.url);\n  return !(null == (e.spatialReference && e.spatialReference.vcsWkid) && t(r) && \"ImageServer\" === r.serverType) && u(e) && e.heightModelInfo ? e.heightModelInfo : d(e) ? n.deriveUnitFromSR(m, e.spatialReference) : null;\n}\n\nfunction u(e) {\n  return \"heightModelInfo\" in e;\n}\n\nfunction f(e) {\n  if (\"unknown\" === e.type || !(\"capabilities\" in e)) return !1;\n\n  switch (e.type) {\n    case \"csv\":\n    case \"feature\":\n    case \"geojson\":\n    case \"subtype-group\":\n    case \"ogc-feature\":\n    case \"wfs\":\n      return !0;\n\n    default:\n      return !1;\n  }\n}\n\nfunction d(e) {\n  return f(e) ? !!(e.capabilities && e.capabilities.data && e.capabilities.data.supportsZ) : p(e);\n}\n\nfunction g(e) {\n  return null != e.layers || p(e) || f(e) || u(e);\n}\n\nfunction p(e) {\n  switch (e.type) {\n    case \"building-scene\":\n    case \"elevation\":\n    case \"integrated-mesh\":\n    case \"point-cloud\":\n    case \"scene\":\n    case \"voxel\":\n      return !0;\n\n    case \"analysis\":\n    case \"base-dynamic\":\n    case \"base-elevation\":\n    case \"base-tile\":\n    case \"bing-maps\":\n    case \"csv\":\n    case \"geojson\":\n    case \"feature\":\n    case \"subtype-group\":\n    case \"geo-rss\":\n    case \"graphics\":\n    case \"group\":\n    case \"imagery\":\n    case \"imagery-tile\":\n    case \"kml\":\n    case \"map-image\":\n    case \"map-notes\":\n    case \"ogc-feature\":\n    case \"open-street-map\":\n    case \"route\":\n    case \"stream\":\n    case \"tile\":\n    case \"unknown\":\n    case \"unsupported\":\n    case \"vector-tile\":\n    case \"wcs\":\n    case \"web-tile\":\n    case \"wfs\":\n    case \"wms\":\n    case \"wmts\":\n    case null:\n      return !1;\n  }\n\n  return !1;\n}\n\n!function (e) {\n  e[e.Ok = 0] = \"Ok\", e[e.Units = 1] = \"Units\", e[e.HeightModel = 2] = \"HeightModel\", e[e.CRS = 3] = \"CRS\", e[e.Unsupported = 4] = \"Unsupported\";\n}(s || (s = {}));\nconst m = new n({\n  heightModel: \"gravity-related-height\"\n});\nexport { h as deriveHeightModelInfoFromLayer, g as mayHaveHeightModelInfo, o as rejectLayerError, r as validateWebSceneError };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/geometry/support/heightModelInfoUtils.js"],"names":["e","isSome","t","n","parse","i","r","c","heightModelInfo","heightUnit","o","deriveUnitFromSR","verticalUnit","horizontalUnit","h","u","a","spatialReference","error","l","s","Unsupported","Units","layerUnit","sceneUnit","layerHeightModelInfo","sceneHeightModelInfo","HeightModel","heightModel","layerHeightModel","sceneHeightModel","CRS","vertCRS","layerDatum","sceneDatum","Ok","d","url","vcsWkid","serverType","m","f","type","capabilities","data","supportsZ","p","g","layers","deriveHeightModelInfoFromLayer","mayHaveHeightModelInfo","rejectLayerError","validateWebSceneError"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import e from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import n from\"../HeightModelInfo.js\";import{parse as i}from\"../../layers/support/arcgisLayerUrl.js\";function r(t,i){if(!t)return null;if(!c(t))return new e(\"webscene:unsupported-height-model-info\",\"The vertical coordinate system of the scene is not supported\",{heightModelInfo:t});const r=t.heightUnit,o=n.deriveUnitFromSR(t,i).heightUnit;return r!==o?new e(\"webscene:incompatible-height-unit\",`The vertical units of the scene (${r}) must match the horizontal units of the scene (${o})`,{verticalUnit:r,horizontalUnit:o}):null}function o(t,i,r){const o=h(t),c=i,u=a(o,c,r);if(o){const i=n.deriveUnitFromSR(o,t.spatialReference).heightUnit;if(!r&&i!==o.heightUnit){const t=new e(\"layerview:unmatched-height-unit\",`The vertical units of the layer must match the horizontal units (${i})`,{horizontalUnit:i});return new e(\"layerview:unsupported-height-model-info\",\"The vertical coordinate system of the layer is not supported\",{heightModelInfo:o,error:t})}}if(!l(t)||u===s.Unsupported)return new e(\"layerview:unsupported-height-model-info\",\"The vertical coordinate system of the layer is not supported\",{heightModelInfo:o});switch(u){case s.Units:{const t=o.heightUnit||\"unknown\",n=c.heightUnit||\"unknown\",i=new e(\"layerview:incompatible-height-unit\",`The vertical units of the layer (${t}) must match the vertical units of the scene (${n})`,{layerUnit:t,sceneUnit:n});return new e(\"layerview:incompatible-height-model-info\",\"The vertical coordinate system of the layer is incompatible with the scene\",{layerHeightModelInfo:o,sceneHeightModelInfo:c,error:i})}case s.HeightModel:{const t=o.heightModel||\"unknown\",n=c.heightModel||\"unknown\",i=new e(\"layerview:incompatible-height-model\",`The height model of the layer (${t}) must match the height model of the scene (${n})`,{layerHeightModel:t,sceneHeightModel:n});return new e(\"layerview:incompatible-height-model-info\",\"The vertical coordinate system of the layer is incompatible with the scene\",{layerHeightModelInfo:o,sceneHeightModelInfo:c,error:i})}case s.CRS:{const t=o.vertCRS||\"unknown\",n=c.vertCRS||\"unknown\",i=new e(\"layerview:incompatible-vertical-datum\",`The vertical datum of the layer (${t}) must match the vertical datum of the scene (${n})`,{layerDatum:t,sceneDatum:n});return new e(\"layerview:incompatible-height-model-info\",\"The vertical coordinate system of the layer is incompatible with the scene\",{layerHeightModelInfo:o,sceneHeightModelInfo:c,error:i})}}return null}function a(e,t,n){if(!c(e)||!c(t))return s.Unsupported;if(null==e||null==t)return s.Ok;if(!n&&e.heightUnit!==t.heightUnit)return s.Units;if(e.heightModel!==t.heightModel)return s.HeightModel;switch(e.heightModel){case\"gravity-related-height\":return s.Ok;case\"ellipsoidal\":return e.vertCRS===t.vertCRS?s.Ok:s.CRS;default:return s.Unsupported}}var s;function c(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function l(e){return\"heightModelInfo\"in e&&null!=e.heightModelInfo||null!=e.spatialReference||!d(e)}function h(e){const r=e.url&&i(e.url);return!(null==(e.spatialReference&&e.spatialReference.vcsWkid)&&t(r)&&\"ImageServer\"===r.serverType)&&u(e)&&e.heightModelInfo?e.heightModelInfo:d(e)?n.deriveUnitFromSR(m,e.spatialReference):null}function u(e){return\"heightModelInfo\"in e}function f(e){if(\"unknown\"===e.type||!(\"capabilities\"in e))return!1;switch(e.type){case\"csv\":case\"feature\":case\"geojson\":case\"subtype-group\":case\"ogc-feature\":case\"wfs\":return!0;default:return!1}}function d(e){return f(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):p(e)}function g(e){return null!=e.layers||p(e)||f(e)||u(e)}function p(e){switch(e.type){case\"building-scene\":case\"elevation\":case\"integrated-mesh\":case\"point-cloud\":case\"scene\":case\"voxel\":return!0;case\"analysis\":case\"base-dynamic\":case\"base-elevation\":case\"base-tile\":case\"bing-maps\":case\"csv\":case\"geojson\":case\"feature\":case\"subtype-group\":case\"geo-rss\":case\"graphics\":case\"group\":case\"imagery\":case\"imagery-tile\":case\"kml\":case\"map-image\":case\"map-notes\":case\"ogc-feature\":case\"open-street-map\":case\"route\":case\"stream\":case\"tile\":case\"unknown\":case\"unsupported\":case\"vector-tile\":case\"wcs\":case\"web-tile\":case\"wfs\":case\"wms\":case\"wmts\":case null:return!1}return!1}!function(e){e[e.Ok=0]=\"Ok\",e[e.Units=1]=\"Units\",e[e.HeightModel=2]=\"HeightModel\",e[e.CRS=3]=\"CRS\",e[e.Unsupported=4]=\"Unsupported\"}(s||(s={}));const m=new n({heightModel:\"gravity-related-height\"});export{h as deriveHeightModelInfoFromLayer,g as mayHaveHeightModelInfo,o as rejectLayerError,r as validateWebSceneError};\n"]},"metadata":{},"sourceType":"module"}