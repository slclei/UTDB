{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isNone as t } from \"../../../../core/maybe.js\";\nimport { PrimitiveType as e } from \"./basicInterfaces.js\";\nimport { BoundingInfo as i } from \"./BoundingInfo.js\";\nimport { ContentObject as n } from \"./ContentObject.js\";\nimport { ContentObjectType as s } from \"./ContentObjectType.js\";\nimport { generateDefaultIndexArray as r, computeAttachmentOriginTriangles as o, computeAttachmentOriginPoints as u } from \"./geometryDataUtils.js\";\nimport { assert as h } from \"./Util.js\";\nimport { VertexAttribute as c } from \"./VertexAttribute.js\";\n\nclass g extends n {\n  constructor(t) {\n    let i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    let n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : e.Triangle;\n    let o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : -1;\n    super(), this._primitiveType = n, this.edgeIndicesLength = o, this.type = s.Geometry, this._vertexAttributes = new Map(), this._indices = new Map(), this._boundingInfo = null;\n\n    for (const [e, s] of t) s && this._vertexAttributes.set(e, { ...s\n    });\n\n    if (null == i || 0 === i.length) {\n      const t = d(this._vertexAttributes),\n            e = r(t);\n      this.edgeIndicesLength = this.edgeIndicesLength < 0 ? t : this.edgeIndicesLength;\n\n      for (const i of this._vertexAttributes.keys()) this._indices.set(i, e);\n    } else for (const [e, s] of i) s && (this._indices.set(e, l(s)), e === c.POSITION && (this.edgeIndicesLength = this.edgeIndicesLength < 0 ? this._indices.get(e).length : this.edgeIndicesLength));\n  }\n\n  cloneShallow() {\n    const t = new g([], void 0, this._primitiveType, void 0),\n          {\n      _vertexAttributes: e,\n      _indices: i\n    } = t;\n    return this._vertexAttributes.forEach((t, i) => {\n      e.set(i, t);\n    }), this._indices.forEach((t, e) => {\n      i.set(e, t);\n    }), t.screenToWorldRatio = this.screenToWorldRatio, t._boundingInfo = this._boundingInfo, t;\n  }\n\n  get vertexAttributes() {\n    return this._vertexAttributes;\n  }\n\n  getMutableAttribute(t) {\n    const e = this._vertexAttributes.get(t);\n\n    return e && !e.exclusive && (e.data = Array.from(e.data), e.exclusive = !0), e;\n  }\n\n  get indices() {\n    return this._indices;\n  }\n\n  get indexCount() {\n    const t = this._indices.values().next().value;\n\n    return t ? t.length : 0;\n  }\n\n  get primitiveType() {\n    return this._primitiveType;\n  }\n\n  get faceCount() {\n    return this.indexCount / 3;\n  }\n\n  get boundingInfo() {\n    return t(this._boundingInfo) && (this._boundingInfo = this._calculateBoundingInfo()), this._boundingInfo;\n  }\n\n  computeAttachmentOrigin(t) {\n    return this.primitiveType === e.Triangle ? this._computeAttachmentOriginTriangles(t) : this._computeAttachmentOriginPoints(t);\n  }\n\n  _computeAttachmentOriginTriangles(t) {\n    const e = this.indices.get(c.POSITION),\n          i = this.vertexAttributes.get(c.POSITION);\n    return o(i, e, t);\n  }\n\n  _computeAttachmentOriginPoints(t) {\n    const e = this.indices.get(c.POSITION),\n          i = this.vertexAttributes.get(c.POSITION);\n    return u(i, e, t);\n  }\n\n  invalidateBoundingInfo() {\n    this._boundingInfo = null;\n  }\n\n  _calculateBoundingInfo() {\n    const t = this.indices.get(c.POSITION);\n    if (0 === t.length) return null;\n    const n = this.primitiveType === e.Triangle ? 3 : 1;\n    h(t.length % n == 0, \"Indexing error: \" + t.length + \" not divisible by \" + n);\n    const s = r(t.length / n),\n          o = this.vertexAttributes.get(c.POSITION);\n    return new i(s, n, t, o);\n  }\n\n}\n\nfunction d(t) {\n  const e = t.values().next().value;\n  return null == e ? 0 : e.data.length / e.size;\n}\n\nfunction l(t) {\n  if (t.BYTES_PER_ELEMENT === Uint16Array.BYTES_PER_ELEMENT) return t;\n\n  for (const e of t) if (e >= 65536) return t;\n\n  return new Uint16Array(t);\n}\n\nexport { g as Geometry };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/3d/webgl-engine/lib/Geometry.js"],"names":["isNone","t","PrimitiveType","e","BoundingInfo","i","ContentObject","n","ContentObjectType","s","generateDefaultIndexArray","r","computeAttachmentOriginTriangles","o","computeAttachmentOriginPoints","u","assert","h","VertexAttribute","c","g","constructor","Triangle","_primitiveType","edgeIndicesLength","type","Geometry","_vertexAttributes","Map","_indices","_boundingInfo","set","length","d","keys","l","POSITION","get","cloneShallow","forEach","screenToWorldRatio","vertexAttributes","getMutableAttribute","exclusive","data","Array","from","indices","indexCount","values","next","value","primitiveType","faceCount","boundingInfo","_calculateBoundingInfo","computeAttachmentOrigin","_computeAttachmentOriginTriangles","_computeAttachmentOriginPoints","invalidateBoundingInfo","size","BYTES_PER_ELEMENT","Uint16Array"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isNone as t}from\"../../../../core/maybe.js\";import{PrimitiveType as e}from\"./basicInterfaces.js\";import{BoundingInfo as i}from\"./BoundingInfo.js\";import{ContentObject as n}from\"./ContentObject.js\";import{ContentObjectType as s}from\"./ContentObjectType.js\";import{generateDefaultIndexArray as r,computeAttachmentOriginTriangles as o,computeAttachmentOriginPoints as u}from\"./geometryDataUtils.js\";import{assert as h}from\"./Util.js\";import{VertexAttribute as c}from\"./VertexAttribute.js\";class g extends n{constructor(t,i=[],n=e.Triangle,o=-1){super(),this._primitiveType=n,this.edgeIndicesLength=o,this.type=s.Geometry,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[e,s]of t)s&&this._vertexAttributes.set(e,{...s});if(null==i||0===i.length){const t=d(this._vertexAttributes),e=r(t);this.edgeIndicesLength=this.edgeIndicesLength<0?t:this.edgeIndicesLength;for(const i of this._vertexAttributes.keys())this._indices.set(i,e)}else for(const[e,s]of i)s&&(this._indices.set(e,l(s)),e===c.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(e).length:this.edgeIndicesLength))}cloneShallow(){const t=new g([],void 0,this._primitiveType,void 0),{_vertexAttributes:e,_indices:i}=t;return this._vertexAttributes.forEach(((t,i)=>{e.set(i,t)})),this._indices.forEach(((t,e)=>{i.set(e,t)})),t.screenToWorldRatio=this.screenToWorldRatio,t._boundingInfo=this._boundingInfo,t}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(t){const e=this._vertexAttributes.get(t);return e&&!e.exclusive&&(e.data=Array.from(e.data),e.exclusive=!0),e}get indices(){return this._indices}get indexCount(){const t=this._indices.values().next().value;return t?t.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return t(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return this.primitiveType===e.Triangle?this._computeAttachmentOriginTriangles(t):this._computeAttachmentOriginPoints(t)}_computeAttachmentOriginTriangles(t){const e=this.indices.get(c.POSITION),i=this.vertexAttributes.get(c.POSITION);return o(i,e,t)}_computeAttachmentOriginPoints(t){const e=this.indices.get(c.POSITION),i=this.vertexAttributes.get(c.POSITION);return u(i,e,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.indices.get(c.POSITION);if(0===t.length)return null;const n=this.primitiveType===e.Triangle?3:1;h(t.length%n==0,\"Indexing error: \"+t.length+\" not divisible by \"+n);const s=r(t.length/n),o=this.vertexAttributes.get(c.POSITION);return new i(s,n,t,o)}}function d(t){const e=t.values().next().value;return null==e?0:e.data.length/e.size}function l(t){if(t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return t;for(const e of t)if(e>=65536)return t;return new Uint16Array(t)}export{g as Geometry};\n"]},"metadata":{},"sourceType":"module"}