{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { getId as t } from \"./CIMCursor.js\";\nimport { CurveHelper as s, PIXEL_TOLERANCE as e } from \"./CurveHelper.js\";\nconst i = 1e-7;\n\nclass n {\n  constructor() {\n    this._values = [], this.extPtGap = 0, this.ctrlPtGap = 0, this._length = 0, this._currentValue = 0;\n  }\n\n  isEmpty() {\n    return 0 === this._values.length;\n  }\n\n  size() {\n    return this._values.length;\n  }\n\n  init(t, s) {\n    let e = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n    if (this._setEmpty(), !t || 0 === t.length) return !1;\n\n    for (let n = 0; n < t.length; n++) {\n      let s = Math.abs(t[n]);\n      e && s < i && (s = i), this._values.push(s), this._length += s;\n    }\n\n    return s && 1 & t.length && (this._length *= 2), 0 !== this._length && (this.ctrlPtGap = this.extPtGap = 0, this._currentValue = -1, !0);\n  }\n\n  scale(t) {\n    const s = this._values ? this._values.length : 0;\n\n    for (let e = 0; e < s; ++e) this._values[e] *= t;\n\n    this._length *= t, this.extPtGap *= t, this.ctrlPtGap *= t;\n  }\n\n  addValue(t) {\n    this._length += t, this._values.push(t);\n  }\n\n  firstValue() {\n    return this._values[0];\n  }\n\n  lastValue() {\n    return this._values[this._values.length - 1];\n  }\n\n  nextValue() {\n    return this._currentValue++, this._currentValue === this._values.length && (this._currentValue = 0), this._values[this._currentValue];\n  }\n\n  reset() {\n    this._currentValue = -1;\n  }\n\n  length() {\n    return this._length;\n  }\n\n  _setEmpty() {\n    this.extPtGap = this.ctrlPtGap = this._length = 0, this._currentValue = -1, this._values.length = 0;\n  }\n\n}\n\nvar h;\n!function (t) {\n  t[t.FAIL = 0] = \"FAIL\", t[t.END = 1] = \"END\", t[t.CONTINUE = 2] = \"CONTINUE\";\n}(h || (h = {}));\n\nclass r {\n  constructor() {\n    this.reset();\n  }\n\n  reset() {\n    this.segment = -1, this.segmentLength = 0, this.abscissa = 0, this.isPathEnd = !1, this.isPartEnd = !1;\n  }\n\n  isValid() {\n    return -1 !== this.segment;\n  }\n\n  copyTo(t) {\n    t.segment = this.segment, t.segmentLength = this.segmentLength, t.abscissa = this.abscissa, t.isPathEnd = this.isPathEnd, t.isPartEnd = this.isPartEnd;\n  }\n\n}\n\nclass a extends s {\n  constructor() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    super(t, s), this._tolerance = e, this._currentPosition = new r();\n  }\n\n  updateTolerance(t) {\n    this._tolerance = e * t;\n  }\n\n  init(t, s) {\n    let e = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !0;\n    return e ? (this._patternLength = s.length(), this._partExtPtGap = s.extPtGap, this._partCtrlPtGap = s.ctrlPtGap) : (this._patternLength = 0, this._partExtPtGap = 0, this._partCtrlPtGap = 0), this._currentPosition.reset(), this._partSegCount = 0, this._path = t, this._seg = -1, this._setPosAtNextPart();\n  }\n\n  curPositionIsValid() {\n    return this._currentPosition.isValid();\n  }\n\n  nextPosition(t) {\n    let s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : h.FAIL;\n    const e = new r();\n    return !!this._nextPosition(t, e, null, s) && (e.copyTo(this._currentPosition), !0);\n  }\n\n  curPointAndAngle(t) {\n    t.pt = this._getPoint(this._currentPosition);\n\n    const [s, e] = this._getAngle(this._currentPosition);\n\n    t.ca = s, t.sa = e;\n  }\n\n  nextPointAndAngle(t, s) {\n    let e = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : h.FAIL;\n    const i = new r();\n    if (!this._nextPosition(t, i, null, e)) return !1;\n    i.copyTo(this._currentPosition), s.pt = this._getPoint(i);\n\n    const [n, a] = this._getAngle(i);\n\n    return s.ca = n, s.sa = a, !0;\n  }\n\n  nextCurve(t) {\n    if (0 === t) return null;\n    const s = [],\n          e = new r();\n    return this._nextPosition(t, e, s, h.END) ? (e.copyTo(this._currentPosition), s) : null;\n  }\n\n  isPathEnd() {\n    return this._currentPosition.isPathEnd;\n  }\n\n  getPathEnd() {\n    if (-1 === this._currentPosition.segment) throw new Error(\"missing segment\");\n    return this._path[this._currentPosition.segment + 1];\n  }\n\n  _nextPosition(t, s, e, i) {\n    if (this._currentPosition.isPathEnd) return !1;\n    let n = this._currentPosition.abscissa;\n\n    for (this._currentPosition.segmentLength > 0 && (n /= this._currentPosition.segmentLength), this._currentPosition.copyTo(s); s.abscissa + t * this._partLengthRatio > s.segmentLength + this._tolerance;) {\n      if (e) {\n        if (0 === e.length) if (0 === n) {\n          const t = this._path[s.segment];\n          e.push([t[0], t[1]]);\n        } else e.push(this.getSegCoord2D(this._path, s.segment, n));\n        const t = this._path[s.segment + 1];\n        e.push([t[0], t[1]]);\n      }\n\n      if (n = 0, t -= (s.segmentLength - s.abscissa) / this._partLengthRatio, this._partSegCount) s.segment = this._nextSegment(), s.segmentLength = this.calculateSegLength(this._path, s.segment), s.abscissa = 0, this._partSegCount--;else {\n        if (!this._setPosAtNextPart()) return i !== h.FAIL && (s.segmentLength = this.calculateSegLength(this._path, s.segment), s.isPartEnd = !0, i === h.END ? (s.abscissa = s.segmentLength, s.isPathEnd = !0) : s.abscissa = s.segmentLength + t, !0);\n\n        this._currentPosition.copyTo(s);\n      }\n    }\n\n    if (s.abscissa += t * this._partLengthRatio, e) {\n      if (0 === e.length) if (0 === n) {\n        const t = this._path[s.segment];\n        e.push([t[0], t[1]]);\n      } else e.push(this.getSegCoord2D(this._path, s.segment, n));\n      const t = s.abscissa / s.segmentLength;\n\n      if (1 === t) {\n        const t = this._path[s.segment + 1];\n        e.push([t[0], t[1]]);\n      } else e.push(this.getSegCoord2D(this._path, s.segment, t));\n    }\n\n    return this._partSegCount || Math.abs(s.abscissa - s.segmentLength) < this._tolerance && (s.isPathEnd = this._partIsLast, s.isPartEnd = !0), !0;\n  }\n\n  _getPoint(t) {\n    if (-1 === t.segment) throw new Error(\"missing segment\");\n    const s = t.segmentLength <= 0 ? 0 : t.abscissa / t.segmentLength;\n    return this.getSegCoord2D(this._path, t.segment, s);\n  }\n\n  _getAngle(t) {\n    if (-1 === t.segment) throw new Error(\"missing segment\");\n    const s = t.segmentLength <= 0 ? 0 : t.abscissa / t.segmentLength;\n    return this.getSegAngleCS(this._path, t.segment, s);\n  }\n\n  _setPosAtNextPart() {\n    for (; this._partSegCount;) this._hasNextSegment() && this._nextSegment(), this._partSegCount--;\n\n    if (!this._hasNextSegment()) return !1;\n\n    for (this._partLength = 0, this._partIsLast = !0, this._partSegCount = 0; this._hasNextSegment();) if (this._partLength += this.calculateSegLength(this._path, this._nextSegment()), this._partSegCount++, 1 === t(this._path[this._getEndPointIndex()])) {\n      this._partIsLast = !this._hasNextSegment();\n      break;\n    }\n\n    let s = this._partSegCount;\n\n    for (; s;) this._previousSegment(), --s;\n\n    this._currentPosition.segment = this._nextSegment(), this._currentPosition.segmentLength = this.calculateSegLength(this._path, this._currentPosition.segment), this._currentPosition.abscissa = 0, this._currentPosition.isPathEnd = this._currentPosition.isPartEnd = !1, --this._partSegCount;\n\n    const e = this._getStartPointIndex();\n\n    this._ctrlPtBegin = 1 === t(this._path[e]);\n    let i = e + this._partSegCount + 1;\n\n    if (i >= this._path.length && (i = 0), this._ctrlPtEnd = 1 === t(this._path[i]), this._patternLength > 0) {\n      const t = this._ctrlPtBegin ? this._partCtrlPtGap : this._partExtPtGap,\n            s = this._ctrlPtEnd ? this._partCtrlPtGap : this._partExtPtGap;\n      let e = Math.round((this._partLength - (t + s)) / this._patternLength);\n      e <= 0 && (e = t + s > 0 ? 0 : 1), this._partLengthRatio = this._partLength / (t + s + e * this._patternLength), this._partLengthRatio < .01 && (this._partLengthRatio = 1);\n    } else this._partLengthRatio = 1;\n\n    return !0;\n  }\n\n  _hasNextSegment() {\n    return this._seg < this._path.length - 2;\n  }\n\n  _previousSegment() {\n    return --this._seg;\n  }\n\n  _nextSegment() {\n    return ++this._seg;\n  }\n\n  _getStartPointIndex() {\n    return this._seg;\n  }\n\n  _getEndPointIndex() {\n    return this._seg + 1;\n  }\n\n}\n\nexport { n as DashPattern, h as EndType, a as GeometryWalker };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/GeometryWalker.js"],"names":["getId","t","CurveHelper","s","PIXEL_TOLERANCE","e","i","n","constructor","_values","extPtGap","ctrlPtGap","_length","_currentValue","isEmpty","length","size","init","_setEmpty","Math","abs","push","scale","addValue","firstValue","lastValue","nextValue","reset","h","FAIL","END","CONTINUE","r","segment","segmentLength","abscissa","isPathEnd","isPartEnd","isValid","copyTo","a","_tolerance","_currentPosition","updateTolerance","_patternLength","_partExtPtGap","_partCtrlPtGap","_partSegCount","_path","_seg","_setPosAtNextPart","curPositionIsValid","nextPosition","_nextPosition","curPointAndAngle","pt","_getPoint","_getAngle","ca","sa","nextPointAndAngle","nextCurve","getPathEnd","Error","_partLengthRatio","getSegCoord2D","_nextSegment","calculateSegLength","_partIsLast","getSegAngleCS","_hasNextSegment","_partLength","_getEndPointIndex","_previousSegment","_getStartPointIndex","_ctrlPtBegin","_ctrlPtEnd","round","DashPattern","EndType","GeometryWalker"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{getId as t}from\"./CIMCursor.js\";import{CurveHelper as s,PIXEL_TOLERANCE as e}from\"./CurveHelper.js\";const i=1e-7;class n{constructor(){this._values=[],this.extPtGap=0,this.ctrlPtGap=0,this._length=0,this._currentValue=0}isEmpty(){return 0===this._values.length}size(){return this._values.length}init(t,s,e=!0){if(this._setEmpty(),!t||0===t.length)return!1;for(let n=0;n<t.length;n++){let s=Math.abs(t[n]);e&&s<i&&(s=i),this._values.push(s),this._length+=s}return s&&1&t.length&&(this._length*=2),0!==this._length&&(this.ctrlPtGap=this.extPtGap=0,this._currentValue=-1,!0)}scale(t){const s=this._values?this._values.length:0;for(let e=0;e<s;++e)this._values[e]*=t;this._length*=t,this.extPtGap*=t,this.ctrlPtGap*=t}addValue(t){this._length+=t,this._values.push(t)}firstValue(){return this._values[0]}lastValue(){return this._values[this._values.length-1]}nextValue(){return this._currentValue++,this._currentValue===this._values.length&&(this._currentValue=0),this._values[this._currentValue]}reset(){this._currentValue=-1}length(){return this._length}_setEmpty(){this.extPtGap=this.ctrlPtGap=this._length=0,this._currentValue=-1,this._values.length=0}}var h;!function(t){t[t.FAIL=0]=\"FAIL\",t[t.END=1]=\"END\",t[t.CONTINUE=2]=\"CONTINUE\"}(h||(h={}));class r{constructor(){this.reset()}reset(){this.segment=-1,this.segmentLength=0,this.abscissa=0,this.isPathEnd=!1,this.isPartEnd=!1}isValid(){return-1!==this.segment}copyTo(t){t.segment=this.segment,t.segmentLength=this.segmentLength,t.abscissa=this.abscissa,t.isPathEnd=this.isPathEnd,t.isPartEnd=this.isPartEnd}}class a extends s{constructor(t=0,s=!1){super(t,s),this._tolerance=e,this._currentPosition=new r}updateTolerance(t){this._tolerance=e*t}init(t,s,e=!0){return e?(this._patternLength=s.length(),this._partExtPtGap=s.extPtGap,this._partCtrlPtGap=s.ctrlPtGap):(this._patternLength=0,this._partExtPtGap=0,this._partCtrlPtGap=0),this._currentPosition.reset(),this._partSegCount=0,this._path=t,this._seg=-1,this._setPosAtNextPart()}curPositionIsValid(){return this._currentPosition.isValid()}nextPosition(t,s=h.FAIL){const e=new r;return!!this._nextPosition(t,e,null,s)&&(e.copyTo(this._currentPosition),!0)}curPointAndAngle(t){t.pt=this._getPoint(this._currentPosition);const[s,e]=this._getAngle(this._currentPosition);t.ca=s,t.sa=e}nextPointAndAngle(t,s,e=h.FAIL){const i=new r;if(!this._nextPosition(t,i,null,e))return!1;i.copyTo(this._currentPosition),s.pt=this._getPoint(i);const[n,a]=this._getAngle(i);return s.ca=n,s.sa=a,!0}nextCurve(t){if(0===t)return null;const s=[],e=new r;return this._nextPosition(t,e,s,h.END)?(e.copyTo(this._currentPosition),s):null}isPathEnd(){return this._currentPosition.isPathEnd}getPathEnd(){if(-1===this._currentPosition.segment)throw new Error(\"missing segment\");return this._path[this._currentPosition.segment+1]}_nextPosition(t,s,e,i){if(this._currentPosition.isPathEnd)return!1;let n=this._currentPosition.abscissa;for(this._currentPosition.segmentLength>0&&(n/=this._currentPosition.segmentLength),this._currentPosition.copyTo(s);s.abscissa+t*this._partLengthRatio>s.segmentLength+this._tolerance;){if(e){if(0===e.length)if(0===n){const t=this._path[s.segment];e.push([t[0],t[1]])}else e.push(this.getSegCoord2D(this._path,s.segment,n));const t=this._path[s.segment+1];e.push([t[0],t[1]])}if(n=0,t-=(s.segmentLength-s.abscissa)/this._partLengthRatio,this._partSegCount)s.segment=this._nextSegment(),s.segmentLength=this.calculateSegLength(this._path,s.segment),s.abscissa=0,this._partSegCount--;else{if(!this._setPosAtNextPart())return i!==h.FAIL&&(s.segmentLength=this.calculateSegLength(this._path,s.segment),s.isPartEnd=!0,i===h.END?(s.abscissa=s.segmentLength,s.isPathEnd=!0):s.abscissa=s.segmentLength+t,!0);this._currentPosition.copyTo(s)}}if(s.abscissa+=t*this._partLengthRatio,e){if(0===e.length)if(0===n){const t=this._path[s.segment];e.push([t[0],t[1]])}else e.push(this.getSegCoord2D(this._path,s.segment,n));const t=s.abscissa/s.segmentLength;if(1===t){const t=this._path[s.segment+1];e.push([t[0],t[1]])}else e.push(this.getSegCoord2D(this._path,s.segment,t))}return this._partSegCount||Math.abs(s.abscissa-s.segmentLength)<this._tolerance&&(s.isPathEnd=this._partIsLast,s.isPartEnd=!0),!0}_getPoint(t){if(-1===t.segment)throw new Error(\"missing segment\");const s=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegCoord2D(this._path,t.segment,s)}_getAngle(t){if(-1===t.segment)throw new Error(\"missing segment\");const s=t.segmentLength<=0?0:t.abscissa/t.segmentLength;return this.getSegAngleCS(this._path,t.segment,s)}_setPosAtNextPart(){for(;this._partSegCount;)this._hasNextSegment()&&this._nextSegment(),this._partSegCount--;if(!this._hasNextSegment())return!1;for(this._partLength=0,this._partIsLast=!0,this._partSegCount=0;this._hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,this._nextSegment()),this._partSegCount++,1===t(this._path[this._getEndPointIndex()])){this._partIsLast=!this._hasNextSegment();break}let s=this._partSegCount;for(;s;)this._previousSegment(),--s;this._currentPosition.segment=this._nextSegment(),this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment),this._currentPosition.abscissa=0,this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1,--this._partSegCount;const e=this._getStartPointIndex();this._ctrlPtBegin=1===t(this._path[e]);let i=e+this._partSegCount+1;if(i>=this._path.length&&(i=0),this._ctrlPtEnd=1===t(this._path[i]),this._patternLength>0){const t=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap,s=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let e=Math.round((this._partLength-(t+s))/this._patternLength);e<=0&&(e=t+s>0?0:1),this._partLengthRatio=this._partLength/(t+s+e*this._patternLength),this._partLengthRatio<.01&&(this._partLengthRatio=1)}else this._partLengthRatio=1;return!0}_hasNextSegment(){return this._seg<this._path.length-2}_previousSegment(){return--this._seg}_nextSegment(){return++this._seg}_getStartPointIndex(){return this._seg}_getEndPointIndex(){return this._seg+1}}export{n as DashPattern,h as EndType,a as GeometryWalker};\n"]},"metadata":{},"sourceType":"module"}