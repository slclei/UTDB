{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isExtent as t, isPolygon as e, isPolyline as s } from \"../../../geometry/support/jsonUtils.js\";\nimport { CurveHelper as i, PIXEL_TOLERANCE as n } from \"../CurveHelper.js\";\nimport { GeometricEffectOffsetMethod as o } from \"../enums.js\";\n\nclass r {\n  static local() {\n    return null === r.instance && (r.instance = new r()), r.instance;\n  }\n\n  execute(t, e, s, i) {\n    return new f(t, e, s);\n  }\n\n}\n\nr.instance = null;\n\nclass f {\n  constructor(t, e, s) {\n    var o;\n    this._inputGeometries = t, this._curveHelper = new i(), this._offset = (null != (o = e.offset) ? o : 1) * s, this._method = e.method, this._option = e.option, this._offsetFlattenError = n * s;\n  }\n\n  next() {\n    let i = this._inputGeometries.next();\n\n    for (; i;) {\n      if (0 === this._offset) return i;\n\n      if (t(i)) {\n        if (this._method === o.Rounded && this._offset > 0) {\n          const t = [[i.xmin, i.ymin], [i.xmin, i.ymax], [i.xmax, i.ymax], [i.xmax, i.ymin], [i.xmin, i.ymin]],\n                e = this._curveHelper.offset(t, -this._offset, this._method, 4, this._offsetFlattenError);\n\n          return e ? {\n            rings: [e]\n          } : null;\n        }\n\n        if (Math.min(i.xmax - i.xmin, i.ymax - i.ymin) + 2 * this._offset > 0) return {\n          xmin: i.xmin - this._offset,\n          xmax: i.xmax + this._offset,\n          ymin: i.ymin - this._offset,\n          ymax: i.ymax + this._offset\n        };\n      }\n\n      if (e(i)) {\n        const t = [];\n\n        for (const e of i.rings) {\n          const s = this._curveHelper.offset(e, -this._offset, this._method, 4, this._offsetFlattenError);\n\n          s && t.push(s);\n        }\n\n        if (t.length) return {\n          rings: t\n        };\n      }\n\n      if (s(i)) {\n        const t = [];\n\n        for (const e of i.paths) {\n          const s = this._curveHelper.offset(e, -this._offset, this._method, 4, this._offsetFlattenError);\n\n          s && t.push(s);\n        }\n\n        if (t.length) return {\n          paths: t\n        };\n      }\n\n      i = this._inputGeometries.next();\n    }\n\n    return null;\n  }\n\n}\n\nexport { r as EffectOffset };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/effects/EffectOffset.js"],"names":["isExtent","t","isPolygon","e","isPolyline","s","CurveHelper","i","PIXEL_TOLERANCE","n","GeometricEffectOffsetMethod","o","r","local","instance","execute","f","constructor","_inputGeometries","_curveHelper","_offset","offset","_method","method","_option","option","_offsetFlattenError","next","Rounded","xmin","ymin","ymax","xmax","rings","Math","min","push","length","paths","EffectOffset"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isExtent as t,isPolygon as e,isPolyline as s}from\"../../../geometry/support/jsonUtils.js\";import{CurveHelper as i,PIXEL_TOLERANCE as n}from\"../CurveHelper.js\";import{GeometricEffectOffsetMethod as o}from\"../enums.js\";class r{static local(){return null===r.instance&&(r.instance=new r),r.instance}execute(t,e,s,i){return new f(t,e,s)}}r.instance=null;class f{constructor(t,e,s){var o;this._inputGeometries=t,this._curveHelper=new i,this._offset=(null!=(o=e.offset)?o:1)*s,this._method=e.method,this._option=e.option,this._offsetFlattenError=n*s}next(){let i=this._inputGeometries.next();for(;i;){if(0===this._offset)return i;if(t(i)){if(this._method===o.Rounded&&this._offset>0){const t=[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]],e=this._curveHelper.offset(t,-this._offset,this._method,4,this._offsetFlattenError);return e?{rings:[e]}:null}if(Math.min(i.xmax-i.xmin,i.ymax-i.ymin)+2*this._offset>0)return{xmin:i.xmin-this._offset,xmax:i.xmax+this._offset,ymin:i.ymin-this._offset,ymax:i.ymax+this._offset}}if(e(i)){const t=[];for(const e of i.rings){const s=this._curveHelper.offset(e,-this._offset,this._method,4,this._offsetFlattenError);s&&t.push(s)}if(t.length)return{rings:t}}if(s(i)){const t=[];for(const e of i.paths){const s=this._curveHelper.offset(e,-this._offset,this._method,4,this._offsetFlattenError);s&&t.push(s)}if(t.length)return{paths:t}}i=this._inputGeometries.next()}return null}}export{r as EffectOffset};\n"]},"metadata":{},"sourceType":"module"}