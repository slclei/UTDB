{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/CircularArray.js\";\nimport s from \"../../../../core/Evented.js\";\nimport t from \"../../../../core/has.js\";\nimport { isSome as r } from \"../../../../core/maybe.js\";\nimport { createDisjointTimerQuery as n } from \"../../../webgl/capabilities/DisjointTimerQuery.js\";\nconst i = t(\"esri-2d-profiler\");\n\nclass o {\n  constructor(t, r) {\n    var _this = this;\n\n    if (this._events = new s(), this._entries = new Map(), this._timings = new e(10), !i) return;\n    this._ext = n(t.gl, {}), this._debugOutput = r;\n    const o = t.gl;\n    if (this.enableCommandLogging) for (const e in o) if (\"function\" == typeof o[e]) {\n      const s = o[e],\n            t = -1 !== e.indexOf(\"draw\");\n\n      o[e] = function () {\n        for (var _len = arguments.length, r = new Array(_len), _key = 0; _key < _len; _key++) {\n          r[_key] = arguments[_key];\n        }\n\n        return _this._events.emit(\"command\", {\n          container: _this._currentContainer,\n          pass: _this._currentPass,\n          brush: _this._currentBrush,\n          method: e,\n          args: r,\n          isDrawCommand: t\n        }), _this._currentSummary && (_this._currentSummary.commands++, t && _this._currentSummary.drawCommands++), s.apply(o, r);\n      };\n    }\n  }\n\n  get enableCommandLogging() {\n    return !(\"object\" == typeof i && i.disableCommands);\n  }\n\n  recordContainerStart(e) {\n    i && (this._currentContainer = e);\n  }\n\n  recordContainerEnd() {\n    i && (this._currentContainer = null);\n  }\n\n  recordPassStart(e) {\n    i && (this._currentPass = e, this._initSummary());\n  }\n\n  recordPassEnd() {\n    i && (this._currentPass = null, this._emitSummary());\n  }\n\n  recordBrushStart(e) {\n    i && (this._currentBrush = e);\n  }\n\n  recordBrushEnd() {\n    i && (this._currentBrush = null);\n  }\n\n  recordStart(e) {\n    if (i && r(this._ext)) {\n      if (this._entries.has(e)) {\n        const s = this._entries.get(e),\n              t = this._ext.resultAvailable(s.query),\n              n = this._ext.disjoint();\n\n        if (t && !n) {\n          const t = this._ext.getResult(s.query) / 1e6;\n          let n = 0;\n\n          if (r(this._timings.enqueue(t))) {\n            const e = this._timings.entries,\n                  s = e.length;\n            let t = 0;\n\n            for (const r of e) t += r;\n\n            n = t / s;\n          }\n\n          const i = t.toFixed(2),\n                o = n ? n.toFixed(2) : \"--\";\n          this.enableCommandLogging ? (console.groupCollapsed(`Frame report for ${e}, ${i} ms (${o} last 10 avg)\\n${s.commandsLen} Commands (${s.drawCommands} draw)`), console.log(\"RenderPass breakdown: \"), console.table(s.summaries), console.log(\"Commands: \", s.commands), console.groupEnd()) : console.log(`Frame report for ${e}, ${i} ms (${o} last 10 avg)`), this._debugOutput.innerHTML = `${i} (${o})`;\n        }\n\n        for (const e of s.handles) e.remove();\n\n        this._entries.delete(e);\n      }\n\n      const s = {\n        name: e,\n        query: this._ext.createQuery(),\n        commands: [],\n        commandsLen: 0,\n        drawCommands: 0,\n        summaries: [],\n        handles: []\n      };\n      this.enableCommandLogging && (s.handles.push(this._events.on(\"command\", e => {\n        s.commandsLen++, s.commands.push(e), e.isDrawCommand && s.drawCommands++;\n      })), s.handles.push(this._events.on(\"summary\", e => {\n        s.summaries.push(e);\n      }))), this._ext.beginTimeElapsed(s.query), this._entries.set(e, s);\n    }\n  }\n\n  recordEnd(e) {\n    i && r(this._ext) && this._entries.has(e) && this._ext.endTimeElapsed();\n  }\n\n  _initSummary() {\n    this.enableCommandLogging && (this._currentSummary = {\n      container: this._currentContainer,\n      pass: this._currentPass,\n      drawCommands: 0,\n      commands: 0\n    });\n  }\n\n  _emitSummary() {\n    this.enableCommandLogging && this._events.emit(\"summary\", this._currentSummary);\n  }\n\n}\n\nexport { o as Profiler };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/Profiler.js"],"names":["e","s","t","isSome","r","createDisjointTimerQuery","n","i","o","constructor","_events","_entries","Map","_timings","_ext","gl","_debugOutput","enableCommandLogging","indexOf","emit","container","_currentContainer","pass","_currentPass","brush","_currentBrush","method","args","isDrawCommand","_currentSummary","commands","drawCommands","apply","disableCommands","recordContainerStart","recordContainerEnd","recordPassStart","_initSummary","recordPassEnd","_emitSummary","recordBrushStart","recordBrushEnd","recordStart","has","get","resultAvailable","query","disjoint","getResult","enqueue","entries","length","toFixed","console","groupCollapsed","commandsLen","log","table","summaries","groupEnd","innerHTML","handles","remove","delete","name","createQuery","push","on","beginTimeElapsed","set","recordEnd","endTimeElapsed","Profiler"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/CircularArray.js\";import s from\"../../../../core/Evented.js\";import t from\"../../../../core/has.js\";import{isSome as r}from\"../../../../core/maybe.js\";import{createDisjointTimerQuery as n}from\"../../../webgl/capabilities/DisjointTimerQuery.js\";const i=t(\"esri-2d-profiler\");class o{constructor(t,r){if(this._events=new s,this._entries=new Map,this._timings=new e(10),!i)return;this._ext=n(t.gl,{}),this._debugOutput=r;const o=t.gl;if(this.enableCommandLogging)for(const e in o)if(\"function\"==typeof o[e]){const s=o[e],t=-1!==e.indexOf(\"draw\");o[e]=(...r)=>(this._events.emit(\"command\",{container:this._currentContainer,pass:this._currentPass,brush:this._currentBrush,method:e,args:r,isDrawCommand:t}),this._currentSummary&&(this._currentSummary.commands++,t&&this._currentSummary.drawCommands++),s.apply(o,r))}}get enableCommandLogging(){return!(\"object\"==typeof i&&i.disableCommands)}recordContainerStart(e){i&&(this._currentContainer=e)}recordContainerEnd(){i&&(this._currentContainer=null)}recordPassStart(e){i&&(this._currentPass=e,this._initSummary())}recordPassEnd(){i&&(this._currentPass=null,this._emitSummary())}recordBrushStart(e){i&&(this._currentBrush=e)}recordBrushEnd(){i&&(this._currentBrush=null)}recordStart(e){if(i&&r(this._ext)){if(this._entries.has(e)){const s=this._entries.get(e),t=this._ext.resultAvailable(s.query),n=this._ext.disjoint();if(t&&!n){const t=this._ext.getResult(s.query)/1e6;let n=0;if(r(this._timings.enqueue(t))){const e=this._timings.entries,s=e.length;let t=0;for(const r of e)t+=r;n=t/s}const i=t.toFixed(2),o=n?n.toFixed(2):\"--\";this.enableCommandLogging?(console.groupCollapsed(`Frame report for ${e}, ${i} ms (${o} last 10 avg)\\n${s.commandsLen} Commands (${s.drawCommands} draw)`),console.log(\"RenderPass breakdown: \"),console.table(s.summaries),console.log(\"Commands: \",s.commands),console.groupEnd()):console.log(`Frame report for ${e}, ${i} ms (${o} last 10 avg)`),this._debugOutput.innerHTML=`${i} (${o})`}for(const e of s.handles)e.remove();this._entries.delete(e)}const s={name:e,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(s.handles.push(this._events.on(\"command\",(e=>{s.commandsLen++,s.commands.push(e),e.isDrawCommand&&s.drawCommands++}))),s.handles.push(this._events.on(\"summary\",(e=>{s.summaries.push(e)})))),this._ext.beginTimeElapsed(s.query),this._entries.set(e,s)}}recordEnd(e){i&&r(this._ext)&&this._entries.has(e)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._events.emit(\"summary\",this._currentSummary)}}export{o as Profiler};\n"]},"metadata":{},"sourceType":"module"}