{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSome as t, isNone as e } from \"../../../core/maybe.js\";\nimport n from \"../PixelBlock.js\";\n\nfunction i(e) {\n  return t(e) && \"esri.layers.support.PixelBlock\" === e.declaredClass && e.pixels && e.pixels.length > 0;\n}\n\nfunction l(t, e) {\n  if (null == e || !e.length || !i(t)) return t;\n  const l = t.pixels.length;\n  return e && e.some(t => t >= l) || 1 === l && 1 === e.length && 0 === e[0] ? t : l !== e.length || e.some((t, e) => t !== e) ? new n({\n    pixelType: t.pixelType,\n    width: t.width,\n    height: t.height,\n    mask: t.mask,\n    validPixelCount: t.validPixelCount,\n    maskIsAlpha: t.maskIsAlpha,\n    pixels: e.map(e => t.pixels[e]),\n    statistics: t.statistics && e.map(e => t.statistics[e])\n  }) : t;\n}\n\nfunction o(t) {\n  if (!t) return;\n  const e = t.colormap;\n  if (!e || 0 === e.length) return;\n  const n = e.sort((t, e) => t[0] - e[0]);\n  let i = 0;\n  n[0][0] < 0 && (i = n[0][0]);\n  const l = Math.max(256, n[n.length - 1][0] - i + 1),\n        o = new Uint8Array(4 * l),\n        r = [];\n  let s,\n      a = 0,\n      f = 0;\n  const h = 5 === n[0].length;\n  if (l > 65536) return n.forEach(t => {\n    r[t[0] - i] = h ? t.slice(1) : t.slice(1).concat([255]);\n  }), {\n    indexed2DColormap: r,\n    offset: i,\n    alphaSpecified: h\n  };\n  if (t.fillUnspecified) for (s = n[f], a = s[0] - i; a < l; a++) o[4 * a] = s[1], o[4 * a + 1] = s[2], o[4 * a + 2] = s[3], o[4 * a + 3] = h ? s[4] : 255, a === s[0] - i && (s = f === n.length - 1 ? s : n[++f]);else for (a = 0; a < n.length; a++) s = n[a], f = 4 * (s[0] - i), o[f] = s[1], o[f + 1] = s[2], o[f + 2] = s[3], o[f + 3] = h ? s[4] : 255;\n  return {\n    indexedColormap: o,\n    offset: i,\n    alphaSpecified: h\n  };\n}\n\nfunction r(t, e) {\n  if (!i(t)) return t;\n  if (!e && (e.indexedColormap || e.indexed2DColormap)) return t;\n  const n = t.clone(),\n        l = n.pixels;\n  let o = n.mask;\n  const r = n.width * n.height;\n  if (1 !== l.length) return t;\n  const {\n    indexedColormap: s,\n    indexed2DColormap: a,\n    offset: f,\n    alphaSpecified: h\n  } = e,\n        c = s.length - 1;\n  let u = 0;\n  const x = l[0],\n        p = new Uint8Array(x.length),\n        m = new Uint8Array(x.length),\n        d = new Uint8Array(x.length);\n  let g,\n      y = 0;\n  if (s) {\n    if (o) for (u = 0; u < r; u++) o[u] && (y = 4 * (x[u] - f), y < f || y > c ? o[u] = 0 : (p[u] = s[y], m[u] = s[y + 1], d[u] = s[y + 2], o[u] = s[y + 3]));else {\n      for (o = new Uint8Array(r), u = 0; u < r; u++) y = 4 * (x[u] - f), y < f || y > c ? o[u] = 0 : (p[u] = s[y], m[u] = s[y + 1], d[u] = s[y + 2], o[u] = s[y + 3]);\n\n      n.mask = o;\n    }\n  } else if (o) for (u = 0; u < r; u++) o[u] && (g = a[x[u]], p[u] = g[0], m[u] = g[1], d[u] = g[2], o[u] = g[3]);else {\n    for (o = new Uint8Array(r), u = 0; u < r; u++) g = a[x[u]], p[u] = g[0], m[u] = g[1], d[u] = g[2], o[u] = g[3];\n\n    n.mask = o;\n  }\n  return n.pixels = [p, m, d], n.statistics = null, n.pixelType = \"u8\", n.maskIsAlpha = h, n;\n}\n\nfunction s(t) {\n  if (!i(t)) return null;\n  t.statistics || t.updateStatistics();\n  const {\n    pixels: e,\n    mask: n,\n    pixelType: l,\n    statistics: o\n  } = t,\n        r = t.width * t.height,\n        s = e.length;\n  let a, f, h, c, u;\n  const x = [],\n        p = [];\n  let m, d, g, y, w, M, k, A, U, C;\n  const T = 256;\n\n  for (c = 0; c < s; c++) {\n    if (m = new Uint32Array(T), g = e[c], \"u8\" === l) {\n      if (a = -.5, f = 255.5, n) for (u = 0; u < r; u++) n[u] && m[g[u]]++;else for (u = 0; u < r; u++) m[g[u]]++;\n    } else {\n      if (a = o[c].minValue, f = o[c].maxValue, h = (f - a) / T, d = new Uint32Array(T + 1), n) for (u = 0; u < r; u++) n[u] && d[Math.floor((g[u] - a) / h)]++;else for (u = 0; u < r; u++) d[Math.floor((g[u] - a) / h)]++;\n\n      for (u = 0; u < 255; u++) m[u] = d[u];\n\n      m[255] = d[255] + d[256];\n    }\n\n    for (x.push({\n      min: a,\n      max: f,\n      size: T,\n      counts: m\n    }), y = 0, w = 0, A = 0, u = 0; u < T; u++) y += m[u], w += u * m[u];\n\n    for (U = w / y, u = 0; u < T; u++) A += m[u] * (u - U) ** 2;\n\n    C = Math.sqrt(A / (y - 1)), h = (f - a) / T, M = (U + .5) * h + a, k = C * h, p.push({\n      min: a,\n      max: f,\n      avg: M,\n      stddev: k\n    });\n  }\n\n  return {\n    statistics: p,\n    histograms: x\n  };\n}\n\nfunction a(t) {\n  const e = [];\n\n  for (let n = 0; n < t.length; n++) {\n    const {\n      min: i,\n      max: l,\n      size: o,\n      counts: r\n    } = t[n];\n    let s = 0,\n        a = 0;\n\n    for (let t = 0; t < o; t++) s += r[t], a += t * r[t];\n\n    const f = a / s;\n    let h = 0;\n\n    for (let t = 0; t < o; t++) h += r[t] * (t - f) ** 2;\n\n    const c = (l - i) / o,\n          u = (f + .5) * c + i,\n          x = Math.sqrt(h / (s - 1)) * c;\n    e.push({\n      min: i,\n      max: l,\n      avg: u,\n      stddev: x\n    });\n  }\n\n  return e;\n}\n\nfunction f(t) {\n  const {\n    minCutOff: e,\n    maxCutOff: n,\n    gamma: i,\n    pixelType: l\n  } = t,\n        o = t.outMin || 0,\n        r = t.outMax || 255;\n  if (-1 === [\"u8\", \"u16\", \"s8\", \"s16\"].indexOf(l)) return null;\n  const s = e.length;\n  let a,\n      f,\n      c = 0;\n  \"s8\" === l ? c = -127 : \"s16\" === l && (c = -32767);\n  let u = 256;\n  [\"u16\", \"s16\"].indexOf(l) > -1 && (u = 65536);\n  const x = [],\n        p = [],\n        m = r - o;\n\n  for (a = 0; a < s; a++) p[a] = n[a] - e[a], x[a] = m / (n[a] - e[a]);\n\n  const d = i && i.length >= s,\n        g = [];\n  if (d) for (a = 0; a < s; a++) i[a] > 1 ? i[a] > 2 ? g[a] = 6.5 + (i[a] - 2) ** 2.5 : g[a] = 6.5 + 100 * (2 - i[a]) ** 4 : g[a] = 1;\n  let y;\n  const w = [];\n  let M, k, A;\n  if (d) for (a = 0; a < s; a++) {\n    for (A = [], f = 0; f < u; f++) M = f + c, y = (M - e[a]) / p[a], k = 1, i[a] > 1 && (k -= (1 / m) ** (y * g[a])), M < n[a] && M > e[a] ? A[f] = Math.floor(k * m * y ** (1 / i[a])) + o : M >= n[a] ? A[f] = r : A[f] = o;\n\n    w[a] = A;\n  } else for (a = 0; a < s; a++) {\n    for (A = [], f = 0; f < u; f++) M = f + c, M <= e[a] ? A[f] = o : M >= n[a] ? A[f] = r : A[f] = Math.floor((M - e[a]) / p[a] * m) + o;\n\n    w[a] = A;\n  }\n\n  if (null != t.contrastOffset) {\n    const e = h(t.contrastOffset, t.brightnessOffset);\n\n    for (a = 0; a < s; a++) for (A = w[a], f = 0; f < u; f++) A[f] = e[A[f]];\n  }\n\n  return {\n    lut: w,\n    offset: c\n  };\n}\n\nfunction h(t, e) {\n  const n = Math.min(Math.max(t, -100), 100),\n        i = Math.min(Math.max(e, -100), 100),\n        l = 255,\n        o = 128;\n  let r, s;\n  const a = new Uint8Array(256);\n\n  for (r = 0; r < 256; r++) n > 0 && n < 100 ? s = (200 * r - 100 * l + 2 * l * i) / (2 * (100 - n)) + o : n <= 0 && n > -100 ? s = (200 * r - 100 * l + 2 * l * i) * (100 + n) / 2e4 + o : 100 === n ? (s = 200 * r - 100 * l + (l + 1) * (100 - n) + 2 * l * i, s = s > 0 ? l : 0) : -100 === n && (s = o), a[r] = s > l ? l : s < 0 ? 0 : s;\n\n  return a;\n}\n\nfunction c(t) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 256;\n  e = Math.min(e, 256);\n  const {\n    size: n,\n    counts: i\n  } = t,\n        l = new Uint8Array(n),\n        o = i.reduce((t, n) => t + n / e, 0);\n  let r = 0,\n      s = 0,\n      a = 0,\n      f = o;\n\n  for (let h = 0; h < n; h++) if (a += i[h], !(h < n - 1 && a + i[h + 1] < f)) {\n    for (; r < e - 1 && f < a;) r++, f += o;\n\n    for (let t = s; t <= h; t++) l[t] = r;\n\n    s = h + 1;\n  }\n\n  for (let h = s; h < n; h++) l[h] = e - 1;\n\n  return l;\n}\n\nfunction u(t, e) {\n  if (!i(t)) return null;\n  const n = t.clone(),\n        {\n    pixels: l,\n    mask: o\n  } = n,\n        {\n    minCutOff: r,\n    maxCutOff: s,\n    gamma: a\n  } = e,\n        f = e.outMin || 0,\n        h = e.outMax || 255,\n        c = n.width * n.height,\n        u = l.length;\n  let x, p, m, d, g;\n  const y = h - f,\n        w = [],\n        M = [];\n\n  for (x = 0; x < u; x++) M[x] = s[x] - r[x], w[x] = y / (s[x] - r[x]);\n\n  const k = a && a.length >= u,\n        A = [];\n  if (k) for (x = 0; x < u; x++) a[x] > 1 ? a[x] > 2 ? A[x] = 6.5 + (a[x] - 2) ** 2.5 : A[x] = 6.5 + 100 * (2 - a[x]) ** 4 : A[x] = 1;\n  if (k) {\n    if (null != o) {\n      for (p = 0; p < c; p++) if (o[p]) for (x = 0; x < u; x++) m = l[x][p], g = (m - r[x]) / M[x], d = 1, a[x] > 1 && (d -= (1 / y) ** (g * A[x])), m < s[x] && m > r[x] ? l[x][p] = Math.floor(d * y * g ** (1 / a[x])) + f : m >= s[x] ? l[x][p] = h : l[x][p] = f;\n    } else for (p = 0; p < c; p++) for (x = 0; x < u; x++) m = l[x][p], g = (m - r[x]) / M[x], d = 1, a[x] > 1 && (d -= (1 / y) ** (g * A[x])), m < s[x] && m > r[x] ? l[x][p] = Math.floor(d * y * g ** (1 / a[x])) + f : m >= s[x] ? l[x][p] = h : l[x][p] = f;\n  } else if (null != o) {\n    for (p = 0; p < c; p++) if (o[p]) for (x = 0; x < u; x++) m = l[x][p], m < s[x] && m > r[x] ? l[x][p] = Math.floor((m - r[x]) / M[x] * y) + f : m >= s[x] ? l[x][p] = h : l[x][p] = f;\n  } else for (p = 0; p < c; p++) for (x = 0; x < u; x++) m = l[x][p], m < s[x] && m > r[x] ? l[x][p] = Math.floor((m - r[x]) / M[x] * y) + f : m >= s[x] ? l[x][p] = h : l[x][p] = f;\n  return n.pixelType = \"u8\", n.updateStatistics(), n;\n}\n\nfunction x(t, e) {\n  if (!i(t)) return null;\n  const {\n    pixels: l,\n    mask: o\n  } = t,\n        r = t.width * t.height,\n        s = l.length;\n  let a = e.lut;\n  const {\n    offset: f\n  } = e;\n  let h, c;\n  a && 1 === a[0].length && (a = l.map(() => a));\n  const u = [];\n  let x, p, m;\n  if (f) {\n    if (null == o) for (h = 0; h < s; h++) {\n      for (x = l[h], p = a[h], m = new Uint8Array(r), c = 0; c < r; c++) m[c] = p[x[c] - f];\n\n      u.push(m);\n    } else for (h = 0; h < s; h++) {\n      for (x = l[h], p = a[h], m = new Uint8Array(r), c = 0; c < r; c++) o[c] && (m[c] = p[x[c] - f]);\n\n      u.push(m);\n    }\n  } else if (null == o) for (h = 0; h < s; h++) {\n    for (x = l[h], p = a[h], m = new Uint8Array(r), c = 0; c < r; c++) m[c] = p[x[c]];\n\n    u.push(m);\n  } else for (h = 0; h < s; h++) {\n    for (x = l[h], p = a[h], m = new Uint8Array(r), c = 0; c < r; c++) o[c] && (m[c] = p[x[c]]);\n\n    u.push(m);\n  }\n  const d = new n({\n    width: t.width,\n    height: t.height,\n    pixels: u,\n    mask: o,\n    pixelType: \"u8\"\n  });\n  return d.updateStatistics(), d;\n}\n\nfunction p(t, e) {\n  if (!i(t)) return null;\n  const n = t.clone(),\n        {\n    pixels: l\n  } = n,\n        o = n.width * n.height,\n        r = e.length,\n        s = Math.floor(r / 2),\n        a = e[Math.floor(s)],\n        f = l[0];\n  let h,\n      c,\n      u,\n      x,\n      p,\n      m,\n      d = !1;\n  const g = new Uint8Array(o),\n        y = new Uint8Array(o),\n        w = new Uint8Array(o);\n  let M = n.mask;\n  const k = 4 === e[0].mappedColor.length;\n\n  for (M || (M = new Uint8Array(o), M.fill(k ? 255 : 1), n.mask = M), p = 0; p < o; p++) if (M[p]) {\n    for (h = f[p], d = !1, m = s, c = a, u = 0, x = r - 1; x - u > 1;) {\n      if (h === c.value) {\n        d = !0;\n        break;\n      }\n\n      h > c.value ? u = m : x = m, m = Math.floor((u + x) / 2), c = e[Math.floor(m)];\n    }\n\n    d || (h === e[u].value ? (c = e[u], d = !0) : h === e[x].value ? (c = e[x], d = !0) : h < e[u].value ? (d = !1, c = null) : h > e[u].value && (h < e[x].value ? (c = e[u], d = !0) : x === r - 1 ? (d = !1, c = null) : (c = e[x], d = !0))), d ? (g[p] = c.mappedColor[0], y[p] = c.mappedColor[1], w[p] = c.mappedColor[2], M[p] = c.mappedColor[3]) : g[p] = y[p] = w[p] = M[p] = 0;\n  }\n\n  return n.pixels = [g, y, w], n.mask = M, n.pixelType = \"u8\", n.maskIsAlpha = k, n;\n}\n\nfunction m(t, e, n, i, l, o, r, s) {\n  return {\n    xmin: l <= n * t ? 0 : l < n * t + t ? l - n * t : t,\n    ymin: o <= i * e ? 0 : o < i * e + e ? o - i * e : e,\n    xmax: l + r <= n * t ? 0 : l + r < n * t + t ? l + r - n * t : t,\n    ymax: o + s <= i * e ? 0 : o + s < i * e + e ? o + s - i * e : e\n  };\n}\n\nfunction d(t, n) {\n  if (!t || 0 === t.length) return null;\n  const i = t.find(t => t.pixelBlock);\n  if (!i || e(i.pixelBlock)) return null;\n  const l = (i.extent.xmax - i.extent.xmin) / i.pixelBlock.width,\n        o = (i.extent.ymax - i.extent.ymin) / i.pixelBlock.height,\n        r = .01 * Math.min(l, o),\n        s = t.sort((t, e) => Math.abs(t.extent.ymax - e.extent.ymax) > r ? e.extent.ymax - t.extent.ymax : Math.abs(t.extent.xmin - e.extent.xmin) > r ? t.extent.xmin - e.extent.xmin : 0),\n        a = Math.min.apply(null, s.map(t => t.extent.xmin)),\n        f = Math.min.apply(null, s.map(t => t.extent.ymin)),\n        h = Math.max.apply(null, s.map(t => t.extent.xmax)),\n        c = Math.max.apply(null, s.map(t => t.extent.ymax)),\n        u = {\n    x: Math.round((n.xmin - a) / l),\n    y: Math.round((c - n.ymax) / o)\n  },\n        x = {\n    width: Math.round((h - a) / l),\n    height: Math.round((c - f) / o)\n  },\n        p = {\n    width: Math.round((n.xmax - n.xmin) / l),\n    height: Math.round((n.ymax - n.ymin) / o)\n  };\n  if (Math.round(x.width / i.pixelBlock.width) * Math.round(x.height / i.pixelBlock.height) !== s.length || u.x < 0 || u.y < 0 || x.width < p.width || x.height < p.height) return null;\n  return {\n    extent: n,\n    pixelBlock: y(s.map(t => t.pixelBlock), x, {\n      clipOffset: u,\n      clipSize: p\n    })\n  };\n}\n\nfunction g(t, e, n, i, l, o) {\n  const {\n    width: r,\n    height: s\n  } = n.block,\n        {\n    x: a,\n    y: f\n  } = n.offset,\n        {\n    width: h,\n    height: c\n  } = n.mosaic,\n        u = m(r, s, i, l, a, f, h, c);\n  let x = 0,\n      p = 0;\n\n  if (o) {\n    const t = o.hasGCSSShiftTransform ? 360 : o.halfWorldWidth,\n          e = r * o.resolutionX,\n          n = o.startX + i * e,\n          l = n + e;\n    n < t && l > t ? p = o.rightPadding : n >= t && (x = o.leftMargin - o.rightPadding, p = 0);\n  }\n\n  if (u.xmax -= p, \"number\" != typeof e) for (let m = u.ymin; m < u.ymax; m++) {\n    const n = (l * s + m - f) * h + (i * r - a) + x,\n          o = m * r;\n\n    for (let i = u.xmin; i < u.xmax; i++) t[n + i] = e[o + i];\n  } else for (let m = u.ymin; m < u.ymax; m++) {\n    const n = (l * s + m - f) * h + (i * r - a) + x;\n\n    for (let i = u.xmin; i < u.xmax; i++) t[n + i] = e;\n  }\n}\n\nfunction y(l, o) {\n  let r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const {\n    clipOffset: s,\n    clipSize: a,\n    alignmentInfo: f,\n    blockWidths: h\n  } = r;\n  if (h) return w(l, o, {\n    blockWidths: h\n  });\n  const c = l.find(t => i(t));\n  if (e(c)) return null;\n  const u = a ? a.width : o.width,\n        x = a ? a.height : o.height,\n        p = c.width,\n        m = c.height,\n        d = o.width / p,\n        y = o.height / m,\n        M = {\n    offset: s || {\n      x: 0,\n      y: 0\n    },\n    mosaic: a || o,\n    block: {\n      width: p,\n      height: m\n    }\n  },\n        k = c.pixelType,\n        A = n.getPixelArrayConstructor(k),\n        U = c.pixels.length,\n        C = [];\n  let T, S;\n\n  for (let t = 0; t < U; t++) {\n    S = new A(u * x);\n\n    for (let e = 0; e < y; e++) for (let n = 0; n < d; n++) {\n      const o = l[e * d + n];\n      i(o) && (T = o.pixels[t], g(S, T, M, n, e, f));\n    }\n\n    C.push(S);\n  }\n\n  let v;\n\n  if (l.some(t => e(t) || t.mask && t.mask.length > 0)) {\n    v = new Uint8Array(u * x);\n\n    for (let e = 0; e < y; e++) for (let n = 0; n < d; n++) {\n      const i = l[e * d + n],\n            o = t(i) ? i.mask : null;\n      g(v, o || (i ? 1 : 0), M, n, e, f);\n    }\n  }\n\n  const B = new n({\n    width: u,\n    height: x,\n    pixels: C,\n    pixelType: k,\n    mask: v\n  });\n  return B.updateStatistics(), B;\n}\n\nfunction w(e, l, o) {\n  const r = e.find(e => t(e));\n  if (!t(r)) return null;\n  const s = e.some(e => !t(e) || !!e.mask),\n        {\n    width: a,\n    height: f\n  } = l,\n        h = s ? new Uint8Array(a * f) : null,\n        {\n    blockWidths: c\n  } = o,\n        u = [],\n        x = r.getPlaneCount(),\n        p = n.getPixelArrayConstructor(r.pixelType);\n  if (s) for (let t = 0, n = 0; t < e.length; n += c[t], t++) {\n    const l = e[t];\n    if (!i(l)) continue;\n    const o = l.mask;\n\n    for (let e = 0; e < f; e++) for (let i = 0; i < c[t]; i++) h[e * a + i + n] = null == o ? 255 : o[e * l.width + i];\n  }\n\n  for (let t = 0; t < x; t++) {\n    const n = new p(a * f);\n\n    for (let l = 0, o = 0; l < e.length; o += c[l], l++) {\n      const r = e[l];\n      if (!i(r)) continue;\n      const s = r.pixels[t];\n      if (null != s) for (let t = 0; t < f; t++) for (let e = 0; e < c[l]; e++) n[t * a + e + o] = s[t * r.width + e];\n    }\n\n    u.push(n);\n  }\n\n  const m = new n({\n    width: a,\n    height: f,\n    mask: h,\n    pixels: u,\n    pixelType: r.pixelType\n  });\n  return m.updateStatistics(), m;\n}\n\nfunction M(t, e, n) {\n  if (!i(t)) return null;\n  const {\n    width: l,\n    height: o\n  } = t,\n        r = e.x,\n        s = e.y,\n        a = n.width + r,\n        f = n.height + s;\n  if (r < 0 || s < 0 || a > l || f > o) return t;\n  if (0 === r && 0 === s && a === l && f === o) return t;\n  t.mask || (t.mask = new Uint8Array(l * o));\n  const h = t.mask;\n\n  for (let i = 0; i < o; i++) {\n    const t = i * l;\n\n    for (let e = 0; e < l; e++) h[t + e] = i < s || i >= f || e < r || e >= a ? 0 : 1;\n  }\n\n  return t.updateStatistics(), t;\n}\n\nfunction k(t) {\n  if (!i(t)) return null;\n  const e = t.clone(),\n        {\n    width: n,\n    height: l,\n    pixels: o,\n    mask: r\n  } = t,\n        s = o[0],\n        a = e.pixels[0];\n\n  for (let i = 2; i < l - 1; i++) {\n    const t = new Map();\n\n    for (let l = i - 2; l < i + 2; l++) for (let e = 0; e < 4; e++) {\n      const i = l * n + e;\n      C(t, s[i], r ? r[i] : 1);\n    }\n\n    a[i * n] = A(t), a[i * n + 1] = a[i * n + 2] = a[i * n];\n    let e = 3;\n\n    for (; e < n - 1; e++) {\n      let l = (i - 2) * n + e + 1;\n      C(t, s[l], r ? r[l] : 1), l = (i - 1) * n + e + 1, C(t, s[l], r ? r[l] : 1), l = i * n + e + 1, C(t, s[l], r ? r[l] : 1), l = (i + 1) * n + e + 1, C(t, s[l], r ? r[l] : 1), l = (i - 2) * n + e - 3, U(t, s[l], r ? r[l] : 1), l = (i - 1) * n + e - 3, U(t, s[l], r ? r[l] : 1), l = i * n + e - 3, U(t, s[l], r ? r[l] : 1), l = (i + 1) * n + e - 3, U(t, s[l], r ? r[l] : 1), a[i * n + e] = A(t);\n    }\n\n    a[i * n + e + 1] = a[i * n + e];\n  }\n\n  for (let i = 0; i < n; i++) a[i] = a[n + i] = a[2 * n + i], a[(l - 1) * n + i] = a[(l - 2) * n + i];\n\n  return e.updateStatistics(), e;\n}\n\nfunction A(t) {\n  if (0 === t.size) return 0;\n  let e = 0,\n      n = -1,\n      i = 0;\n  const l = t.keys();\n  let o = l.next();\n\n  for (; !o.done;) i = t.get(o.value), i > e && (n = o.value, e = i), o = l.next();\n\n  return n;\n}\n\nfunction U(t, e, n) {\n  if (0 === n) return;\n  const i = t.get(e);\n  1 === i ? t.delete(e) : t.set(e, i - 1);\n}\n\nfunction C(t, e, n) {\n  0 !== n && t.set(e, t.has(e) ? t.get(e) + 1 : 1);\n}\n\nfunction T(t, e, l) {\n  let {\n    x: o,\n    y: r\n  } = e;\n  const {\n    width: s,\n    height: a\n  } = l;\n  if (0 === o && 0 === r && a === t.height && s === t.width) return t;\n  const {\n    width: f,\n    height: h\n  } = t,\n        c = Math.max(0, r),\n        u = Math.max(0, o),\n        x = Math.min(o + s, f),\n        p = Math.min(r + a, h);\n  if (x < 0 || p < 0 || !i(t)) return null;\n  o = Math.max(0, -o), r = Math.max(0, -r);\n  const {\n    pixels: m,\n    mask: d\n  } = t,\n        g = s * a,\n        y = m.length,\n        w = [];\n\n  for (let i = 0; i < y; i++) {\n    const e = m[i],\n          l = n.createEmptyBand(t.pixelType, g);\n\n    for (let t = c; t < p; t++) {\n      const n = t * f;\n      let i = (t + r - c) * s + o;\n\n      for (let t = u; t < x; t++) l[i++] = e[n + t];\n    }\n\n    w.push(l);\n  }\n\n  const M = new Uint8Array(g);\n\n  for (let n = c; n < p; n++) {\n    const t = n * f;\n    let e = (n + r - c) * s + o;\n\n    for (let n = u; n < x; n++) M[e++] = d ? d[t + n] : 1;\n  }\n\n  const k = new n({\n    width: l.width,\n    height: l.height,\n    pixelType: t.pixelType,\n    pixels: w,\n    mask: M\n  });\n  return k.updateStatistics(), k;\n}\n\nfunction S(t) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !0;\n  if (!i(t)) return null;\n  const {\n    pixels: l,\n    width: o,\n    height: r,\n    mask: s,\n    pixelType: a\n  } = t,\n        f = [],\n        h = Math.round(o / 2),\n        c = Math.round(r / 2),\n        u = r - 1,\n        x = o - 1;\n\n  for (let i = 0; i < l.length; i++) {\n    const t = l[i],\n          s = n.createEmptyBand(a, h * c);\n    let p = 0;\n\n    for (let n = 0; n < r; n += 2) for (let i = 0; i < o; i += 2) {\n      const l = t[n * o + i];\n\n      if (e) {\n        const e = i === x ? l : t[n * o + i + 1],\n              r = n === u ? l : t[n * o + i + o],\n              a = i === x ? r : n === u ? e : t[n * o + i + o + 1];\n        s[p++] = (l + e + r + a) / 4;\n      } else s[p++] = l;\n    }\n\n    f.push(s);\n  }\n\n  let p = null;\n\n  if (s) {\n    p = new Uint8Array(h * c);\n    let t = 0;\n\n    for (let n = 0; n < r; n += 2) for (let i = 0; i < o; i += 2) {\n      const l = s[n * o + i];\n\n      if (e) {\n        const e = i === x ? l : s[n * o + i + 1],\n              r = n === u ? l : s[n * o + i + o],\n              a = i === x ? r : n === u ? e : s[n * o + i + o + 1];\n        p[t++] = l * e * r * a ? 1 : 0;\n      } else p[t++] = l;\n    }\n  }\n\n  return new n({\n    width: h,\n    height: c,\n    pixelType: a,\n    pixels: f,\n    mask: p\n  });\n}\n\nfunction v(t, e, n) {\n  if (!i(t)) return null;\n  const {\n    width: l,\n    height: o\n  } = e;\n  let {\n    width: r,\n    height: s\n  } = t;\n  const a = new Map(),\n        f = {\n    x: 0,\n    y: 0\n  },\n        h = null == n ? 1 : 1 + n;\n  let c = t;\n\n  for (let i = 0; i < h; i++) {\n    const t = Math.ceil(r / l),\n          n = Math.ceil(s / o);\n\n    for (let r = 0; r < n; r++) {\n      f.y = r * o;\n\n      for (let n = 0; n < t; n++) {\n        f.x = n * l;\n        const t = T(c, f, e);\n        a.set(`${i}/${r}/${n}`, t);\n      }\n    }\n\n    i < h - 1 && (c = S(c)), r = Math.round(r / 2), s = Math.round(s / 2);\n  }\n\n  return a;\n}\n\nfunction B(t, e, n, i) {\n  let l = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : .5;\n  const {\n    width: o,\n    height: r\n  } = t,\n        {\n    width: s,\n    height: a\n  } = e,\n        f = i.cols,\n        h = i.rows,\n        c = Math.ceil(s / f - .1 / f),\n        u = Math.ceil(a / h - .1 / h);\n  let x, p, m, d, g, y, w;\n  const M = c * f,\n        k = M * u * h,\n        A = new Float32Array(k),\n        U = new Float32Array(k),\n        C = new Uint32Array(k),\n        T = new Uint32Array(k);\n  let S,\n      v,\n      B = 0;\n\n  for (let b = 0; b < u; b++) for (let t = 0; t < c; t++) {\n    x = 12 * (b * c + t), p = n[x], m = n[x + 1], d = n[x + 2], g = n[x + 3], y = n[x + 4], w = n[x + 5];\n\n    for (let e = 0; e < h; e++) {\n      B = (b * h + e) * M + t * f, v = (e + .5) / h;\n\n      for (let t = 0; t < e; t++) S = (t + .5) / f, A[B + t] = (p * S + m * v + d) * o - l, U[B + t] = (g * S + y * v + w) * r - l, C[B + t] = Math.round(A[B + t]), T[B + t] = Math.round(U[B + t]);\n    }\n\n    x += 6, p = n[x], m = n[x + 1], d = n[x + 2], g = n[x + 3], y = n[x + 4], w = n[x + 5];\n\n    for (let e = 0; e < h; e++) {\n      B = (b * h + e) * M + t * f, v = (e + .5) / h;\n\n      for (let t = e; t < f; t++) S = (t + .5) / f, A[B + t] = (p * S + m * v + d) * o - l, U[B + t] = (g * S + y * v + w) * r - l, C[B + t] = Math.round(A[B + t]), T[B + t] = Math.round(U[B + t]);\n    }\n  }\n\n  return {\n    offsets_x: A,\n    offsets_y: U,\n    offsets_xi: C,\n    offsets_yi: T,\n    gridWidth: M\n  };\n}\n\nfunction b(t, e) {\n  const {\n    coefficients: n,\n    spacing: i\n  } = e,\n        {\n    offsets_x: l,\n    offsets_y: o,\n    gridWidth: r\n  } = B(t, t, n, {\n    rows: i[0],\n    cols: i[1]\n  }, .5),\n        {\n    width: s,\n    height: a\n  } = t,\n        f = new Float32Array(s * a),\n        h = 180 / Math.PI;\n\n  for (let c = 0; c < a; c++) for (let t = 0; t < s; t++) {\n    const e = c * r + t,\n          n = 0 === c ? e : e - r,\n          i = c === a - 1 ? e : e + r,\n          u = l[n] - l[i],\n          x = o[i] - o[n];\n    if (isNaN(u) || isNaN(x)) f[c * s + t] = 90;else {\n      let e = Math.atan2(x, u) * h;\n      e = (360 + e) % 360, f[c * s + t] = e;\n    }\n  }\n\n  return f;\n}\n\nfunction O(t, e, l, o) {\n  let r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"nearest\";\n  if (!i(t)) return null;\n  \"majority\" === r && (t = k(t));\n  const {\n    pixels: s,\n    mask: a,\n    pixelType: f\n  } = t,\n        h = t.width,\n        c = t.height,\n        u = n.getPixelArrayConstructor(f),\n        x = s.length,\n        {\n    width: p,\n    height: m\n  } = e;\n  let d = !1;\n\n  for (let n = 0; n < l.length; n += 3) -1 === l[n] && -1 === l[n + 1] && -1 === l[n + 2] && (d = !0);\n\n  const {\n    offsets_x: g,\n    offsets_y: y,\n    offsets_xi: w,\n    offsets_yi: M,\n    gridWidth: A\n  } = B({\n    width: h,\n    height: c\n  }, e, l, o, \"majority\" === r ? 0 : .5);\n  let U;\n\n  const C = (t, e, n) => {\n    const i = t instanceof Float32Array || t instanceof Float64Array ? 0 : .5;\n\n    for (let l = 0; l < m; l++) {\n      U = l * A;\n\n      for (let o = 0; o < p; o++) {\n        if (g[U] < 0 || y[U] < 0) t[l * p + o] = 0;else if (n) t[l * p + o] = e[w[U] + M[U] * h];else {\n          const n = Math.floor(g[U]),\n                r = Math.floor(y[U]),\n                s = Math.ceil(g[U]),\n                f = Math.ceil(y[U]),\n                c = g[U] - n,\n                u = y[U] - r;\n\n          if (!a || a[n + r * h] && a[n + r * h] && a[n + f * h] && a[s + f * h]) {\n            const a = (1 - c) * e[n + r * h] + c * e[s + r * h],\n                  x = (1 - c) * e[n + f * h] + c * e[s + f * h];\n            t[l * p + o] = (1 - u) * a + u * x + i;\n          } else t[l * p + o] = e[w[U] + M[U] * h];\n        }\n        U++;\n      }\n    }\n  },\n        T = [];\n\n  let S;\n\n  for (let n = 0; n < x; n++) S = new u(p * m), C(S, s[n], \"nearest\" === r || \"majority\" === r), T.push(S);\n\n  const v = new n({\n    width: p,\n    height: m,\n    pixelType: f,\n    pixels: T\n  });\n  if (a) v.mask = new Uint8Array(p * m), C(v.mask, a, !0);else if (d) {\n    v.mask = new Uint8Array(p * m);\n\n    for (let t = 0; t < p * m; t++) v.mask[t] = g[t] < 0 || y[t] < 0 ? 0 : 1;\n  }\n  return v.updateStatistics(), v;\n}\n\nexport { O as approximateTransform, T as clip, r as colorize, o as createColormapLUT, h as createContrastBrightnessLUT, c as createHistogramEqualizationLUT, f as createStretchLUT, a as estimateStatisticsFromHistograms, s as estimateStatisticsHistograms, l as extractBands, m as getClipBounds, b as getLocalArithmeticNorthRotations, i as isValidPixelBlock, x as lookupPixels, y as mosaic, d as mosaicPixelData, p as remapColor, k as resampleByMajority, M as setValidBoundary, v as split, u as stretch };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/support/rasterFunctions/pixelUtils.js"],"names":["isSome","t","isNone","e","n","i","declaredClass","pixels","length","l","some","pixelType","width","height","mask","validPixelCount","maskIsAlpha","map","statistics","o","colormap","sort","Math","max","Uint8Array","r","s","a","f","h","forEach","slice","concat","indexed2DColormap","offset","alphaSpecified","fillUnspecified","indexedColormap","clone","c","u","x","p","m","d","g","y","updateStatistics","w","M","k","A","U","C","T","Uint32Array","minValue","maxValue","floor","push","min","size","counts","sqrt","avg","stddev","histograms","minCutOff","maxCutOff","gamma","outMin","outMax","indexOf","contrastOffset","brightnessOffset","lut","reduce","mappedColor","fill","value","xmin","ymin","xmax","ymax","find","pixelBlock","extent","abs","apply","round","clipOffset","clipSize","block","mosaic","hasGCSSShiftTransform","halfWorldWidth","resolutionX","startX","rightPadding","leftMargin","alignmentInfo","blockWidths","getPixelArrayConstructor","S","v","B","getPlaneCount","Map","keys","next","done","get","delete","set","has","createEmptyBand","ceil","cols","rows","Float32Array","b","offsets_x","offsets_y","offsets_xi","offsets_yi","gridWidth","coefficients","spacing","PI","isNaN","atan2","O","Float64Array","approximateTransform","clip","colorize","createColormapLUT","createContrastBrightnessLUT","createHistogramEqualizationLUT","createStretchLUT","estimateStatisticsFromHistograms","estimateStatisticsHistograms","extractBands","getClipBounds","getLocalArithmeticNorthRotations","isValidPixelBlock","lookupPixels","mosaicPixelData","remapColor","resampleByMajority","setValidBoundary","split","stretch"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as e}from\"../../../core/maybe.js\";import n from\"../PixelBlock.js\";function i(e){return t(e)&&\"esri.layers.support.PixelBlock\"===e.declaredClass&&e.pixels&&e.pixels.length>0}function l(t,e){if(null==e||!e.length||!i(t))return t;const l=t.pixels.length;return e&&e.some((t=>t>=l))||1===l&&1===e.length&&0===e[0]?t:l!==e.length||e.some(((t,e)=>t!==e))?new n({pixelType:t.pixelType,width:t.width,height:t.height,mask:t.mask,validPixelCount:t.validPixelCount,maskIsAlpha:t.maskIsAlpha,pixels:e.map((e=>t.pixels[e])),statistics:t.statistics&&e.map((e=>t.statistics[e]))}):t}function o(t){if(!t)return;const e=t.colormap;if(!e||0===e.length)return;const n=e.sort(((t,e)=>t[0]-e[0]));let i=0;n[0][0]<0&&(i=n[0][0]);const l=Math.max(256,n[n.length-1][0]-i+1),o=new Uint8Array(4*l),r=[];let s,a=0,f=0;const h=5===n[0].length;if(l>65536)return n.forEach((t=>{r[t[0]-i]=h?t.slice(1):t.slice(1).concat([255])})),{indexed2DColormap:r,offset:i,alphaSpecified:h};if(t.fillUnspecified)for(s=n[f],a=s[0]-i;a<l;a++)o[4*a]=s[1],o[4*a+1]=s[2],o[4*a+2]=s[3],o[4*a+3]=h?s[4]:255,a===s[0]-i&&(s=f===n.length-1?s:n[++f]);else for(a=0;a<n.length;a++)s=n[a],f=4*(s[0]-i),o[f]=s[1],o[f+1]=s[2],o[f+2]=s[3],o[f+3]=h?s[4]:255;return{indexedColormap:o,offset:i,alphaSpecified:h}}function r(t,e){if(!i(t))return t;if(!e&&(e.indexedColormap||e.indexed2DColormap))return t;const n=t.clone(),l=n.pixels;let o=n.mask;const r=n.width*n.height;if(1!==l.length)return t;const{indexedColormap:s,indexed2DColormap:a,offset:f,alphaSpecified:h}=e,c=s.length-1;let u=0;const x=l[0],p=new Uint8Array(x.length),m=new Uint8Array(x.length),d=new Uint8Array(x.length);let g,y=0;if(s)if(o)for(u=0;u<r;u++)o[u]&&(y=4*(x[u]-f),y<f||y>c?o[u]=0:(p[u]=s[y],m[u]=s[y+1],d[u]=s[y+2],o[u]=s[y+3]));else{for(o=new Uint8Array(r),u=0;u<r;u++)y=4*(x[u]-f),y<f||y>c?o[u]=0:(p[u]=s[y],m[u]=s[y+1],d[u]=s[y+2],o[u]=s[y+3]);n.mask=o}else if(o)for(u=0;u<r;u++)o[u]&&(g=a[x[u]],p[u]=g[0],m[u]=g[1],d[u]=g[2],o[u]=g[3]);else{for(o=new Uint8Array(r),u=0;u<r;u++)g=a[x[u]],p[u]=g[0],m[u]=g[1],d[u]=g[2],o[u]=g[3];n.mask=o}return n.pixels=[p,m,d],n.statistics=null,n.pixelType=\"u8\",n.maskIsAlpha=h,n}function s(t){if(!i(t))return null;t.statistics||t.updateStatistics();const{pixels:e,mask:n,pixelType:l,statistics:o}=t,r=t.width*t.height,s=e.length;let a,f,h,c,u;const x=[],p=[];let m,d,g,y,w,M,k,A,U,C;const T=256;for(c=0;c<s;c++){if(m=new Uint32Array(T),g=e[c],\"u8\"===l)if(a=-.5,f=255.5,n)for(u=0;u<r;u++)n[u]&&m[g[u]]++;else for(u=0;u<r;u++)m[g[u]]++;else{if(a=o[c].minValue,f=o[c].maxValue,h=(f-a)/T,d=new Uint32Array(T+1),n)for(u=0;u<r;u++)n[u]&&d[Math.floor((g[u]-a)/h)]++;else for(u=0;u<r;u++)d[Math.floor((g[u]-a)/h)]++;for(u=0;u<255;u++)m[u]=d[u];m[255]=d[255]+d[256]}for(x.push({min:a,max:f,size:T,counts:m}),y=0,w=0,A=0,u=0;u<T;u++)y+=m[u],w+=u*m[u];for(U=w/y,u=0;u<T;u++)A+=m[u]*(u-U)**2;C=Math.sqrt(A/(y-1)),h=(f-a)/T,M=(U+.5)*h+a,k=C*h,p.push({min:a,max:f,avg:M,stddev:k})}return{statistics:p,histograms:x}}function a(t){const e=[];for(let n=0;n<t.length;n++){const{min:i,max:l,size:o,counts:r}=t[n];let s=0,a=0;for(let t=0;t<o;t++)s+=r[t],a+=t*r[t];const f=a/s;let h=0;for(let t=0;t<o;t++)h+=r[t]*(t-f)**2;const c=(l-i)/o,u=(f+.5)*c+i,x=Math.sqrt(h/(s-1))*c;e.push({min:i,max:l,avg:u,stddev:x})}return e}function f(t){const{minCutOff:e,maxCutOff:n,gamma:i,pixelType:l}=t,o=t.outMin||0,r=t.outMax||255;if(-1===[\"u8\",\"u16\",\"s8\",\"s16\"].indexOf(l))return null;const s=e.length;let a,f,c=0;\"s8\"===l?c=-127:\"s16\"===l&&(c=-32767);let u=256;[\"u16\",\"s16\"].indexOf(l)>-1&&(u=65536);const x=[],p=[],m=r-o;for(a=0;a<s;a++)p[a]=n[a]-e[a],x[a]=m/(n[a]-e[a]);const d=i&&i.length>=s,g=[];if(d)for(a=0;a<s;a++)i[a]>1?i[a]>2?g[a]=6.5+(i[a]-2)**2.5:g[a]=6.5+100*(2-i[a])**4:g[a]=1;let y;const w=[];let M,k,A;if(d)for(a=0;a<s;a++){for(A=[],f=0;f<u;f++)M=f+c,y=(M-e[a])/p[a],k=1,i[a]>1&&(k-=(1/m)**(y*g[a])),M<n[a]&&M>e[a]?A[f]=Math.floor(k*m*y**(1/i[a]))+o:M>=n[a]?A[f]=r:A[f]=o;w[a]=A}else for(a=0;a<s;a++){for(A=[],f=0;f<u;f++)M=f+c,M<=e[a]?A[f]=o:M>=n[a]?A[f]=r:A[f]=Math.floor((M-e[a])/p[a]*m)+o;w[a]=A}if(null!=t.contrastOffset){const e=h(t.contrastOffset,t.brightnessOffset);for(a=0;a<s;a++)for(A=w[a],f=0;f<u;f++)A[f]=e[A[f]]}return{lut:w,offset:c}}function h(t,e){const n=Math.min(Math.max(t,-100),100),i=Math.min(Math.max(e,-100),100),l=255,o=128;let r,s;const a=new Uint8Array(256);for(r=0;r<256;r++)n>0&&n<100?s=(200*r-100*l+2*l*i)/(2*(100-n))+o:n<=0&&n>-100?s=(200*r-100*l+2*l*i)*(100+n)/2e4+o:100===n?(s=200*r-100*l+(l+1)*(100-n)+2*l*i,s=s>0?l:0):-100===n&&(s=o),a[r]=s>l?l:s<0?0:s;return a}function c(t,e=256){e=Math.min(e,256);const{size:n,counts:i}=t,l=new Uint8Array(n),o=i.reduce(((t,n)=>t+n/e),0);let r=0,s=0,a=0,f=o;for(let h=0;h<n;h++)if(a+=i[h],!(h<n-1&&a+i[h+1]<f)){for(;r<e-1&&f<a;)r++,f+=o;for(let t=s;t<=h;t++)l[t]=r;s=h+1}for(let h=s;h<n;h++)l[h]=e-1;return l}function u(t,e){if(!i(t))return null;const n=t.clone(),{pixels:l,mask:o}=n,{minCutOff:r,maxCutOff:s,gamma:a}=e,f=e.outMin||0,h=e.outMax||255,c=n.width*n.height,u=l.length;let x,p,m,d,g;const y=h-f,w=[],M=[];for(x=0;x<u;x++)M[x]=s[x]-r[x],w[x]=y/(s[x]-r[x]);const k=a&&a.length>=u,A=[];if(k)for(x=0;x<u;x++)a[x]>1?a[x]>2?A[x]=6.5+(a[x]-2)**2.5:A[x]=6.5+100*(2-a[x])**4:A[x]=1;if(k)if(null!=o){for(p=0;p<c;p++)if(o[p])for(x=0;x<u;x++)m=l[x][p],g=(m-r[x])/M[x],d=1,a[x]>1&&(d-=(1/y)**(g*A[x])),m<s[x]&&m>r[x]?l[x][p]=Math.floor(d*y*g**(1/a[x]))+f:m>=s[x]?l[x][p]=h:l[x][p]=f}else for(p=0;p<c;p++)for(x=0;x<u;x++)m=l[x][p],g=(m-r[x])/M[x],d=1,a[x]>1&&(d-=(1/y)**(g*A[x])),m<s[x]&&m>r[x]?l[x][p]=Math.floor(d*y*g**(1/a[x]))+f:m>=s[x]?l[x][p]=h:l[x][p]=f;else if(null!=o){for(p=0;p<c;p++)if(o[p])for(x=0;x<u;x++)m=l[x][p],m<s[x]&&m>r[x]?l[x][p]=Math.floor((m-r[x])/M[x]*y)+f:m>=s[x]?l[x][p]=h:l[x][p]=f}else for(p=0;p<c;p++)for(x=0;x<u;x++)m=l[x][p],m<s[x]&&m>r[x]?l[x][p]=Math.floor((m-r[x])/M[x]*y)+f:m>=s[x]?l[x][p]=h:l[x][p]=f;return n.pixelType=\"u8\",n.updateStatistics(),n}function x(t,e){if(!i(t))return null;const{pixels:l,mask:o}=t,r=t.width*t.height,s=l.length;let a=e.lut;const{offset:f}=e;let h,c;a&&1===a[0].length&&(a=l.map((()=>a)));const u=[];let x,p,m;if(f)if(null==o)for(h=0;h<s;h++){for(x=l[h],p=a[h],m=new Uint8Array(r),c=0;c<r;c++)m[c]=p[x[c]-f];u.push(m)}else for(h=0;h<s;h++){for(x=l[h],p=a[h],m=new Uint8Array(r),c=0;c<r;c++)o[c]&&(m[c]=p[x[c]-f]);u.push(m)}else if(null==o)for(h=0;h<s;h++){for(x=l[h],p=a[h],m=new Uint8Array(r),c=0;c<r;c++)m[c]=p[x[c]];u.push(m)}else for(h=0;h<s;h++){for(x=l[h],p=a[h],m=new Uint8Array(r),c=0;c<r;c++)o[c]&&(m[c]=p[x[c]]);u.push(m)}const d=new n({width:t.width,height:t.height,pixels:u,mask:o,pixelType:\"u8\"});return d.updateStatistics(),d}function p(t,e){if(!i(t))return null;const n=t.clone(),{pixels:l}=n,o=n.width*n.height,r=e.length,s=Math.floor(r/2),a=e[Math.floor(s)],f=l[0];let h,c,u,x,p,m,d=!1;const g=new Uint8Array(o),y=new Uint8Array(o),w=new Uint8Array(o);let M=n.mask;const k=4===e[0].mappedColor.length;for(M||(M=new Uint8Array(o),M.fill(k?255:1),n.mask=M),p=0;p<o;p++)if(M[p]){for(h=f[p],d=!1,m=s,c=a,u=0,x=r-1;x-u>1;){if(h===c.value){d=!0;break}h>c.value?u=m:x=m,m=Math.floor((u+x)/2),c=e[Math.floor(m)]}d||(h===e[u].value?(c=e[u],d=!0):h===e[x].value?(c=e[x],d=!0):h<e[u].value?(d=!1,c=null):h>e[u].value&&(h<e[x].value?(c=e[u],d=!0):x===r-1?(d=!1,c=null):(c=e[x],d=!0))),d?(g[p]=c.mappedColor[0],y[p]=c.mappedColor[1],w[p]=c.mappedColor[2],M[p]=c.mappedColor[3]):g[p]=y[p]=w[p]=M[p]=0}return n.pixels=[g,y,w],n.mask=M,n.pixelType=\"u8\",n.maskIsAlpha=k,n}function m(t,e,n,i,l,o,r,s){return{xmin:l<=n*t?0:l<n*t+t?l-n*t:t,ymin:o<=i*e?0:o<i*e+e?o-i*e:e,xmax:l+r<=n*t?0:l+r<n*t+t?l+r-n*t:t,ymax:o+s<=i*e?0:o+s<i*e+e?o+s-i*e:e}}function d(t,n){if(!t||0===t.length)return null;const i=t.find((t=>t.pixelBlock));if(!i||e(i.pixelBlock))return null;const l=(i.extent.xmax-i.extent.xmin)/i.pixelBlock.width,o=(i.extent.ymax-i.extent.ymin)/i.pixelBlock.height,r=.01*Math.min(l,o),s=t.sort(((t,e)=>Math.abs(t.extent.ymax-e.extent.ymax)>r?e.extent.ymax-t.extent.ymax:Math.abs(t.extent.xmin-e.extent.xmin)>r?t.extent.xmin-e.extent.xmin:0)),a=Math.min.apply(null,s.map((t=>t.extent.xmin))),f=Math.min.apply(null,s.map((t=>t.extent.ymin))),h=Math.max.apply(null,s.map((t=>t.extent.xmax))),c=Math.max.apply(null,s.map((t=>t.extent.ymax))),u={x:Math.round((n.xmin-a)/l),y:Math.round((c-n.ymax)/o)},x={width:Math.round((h-a)/l),height:Math.round((c-f)/o)},p={width:Math.round((n.xmax-n.xmin)/l),height:Math.round((n.ymax-n.ymin)/o)};if(Math.round(x.width/i.pixelBlock.width)*Math.round(x.height/i.pixelBlock.height)!==s.length||u.x<0||u.y<0||x.width<p.width||x.height<p.height)return null;return{extent:n,pixelBlock:y(s.map((t=>t.pixelBlock)),x,{clipOffset:u,clipSize:p})}}function g(t,e,n,i,l,o){const{width:r,height:s}=n.block,{x:a,y:f}=n.offset,{width:h,height:c}=n.mosaic,u=m(r,s,i,l,a,f,h,c);let x=0,p=0;if(o){const t=o.hasGCSSShiftTransform?360:o.halfWorldWidth,e=r*o.resolutionX,n=o.startX+i*e,l=n+e;n<t&&l>t?p=o.rightPadding:n>=t&&(x=o.leftMargin-o.rightPadding,p=0)}if(u.xmax-=p,\"number\"!=typeof e)for(let m=u.ymin;m<u.ymax;m++){const n=(l*s+m-f)*h+(i*r-a)+x,o=m*r;for(let i=u.xmin;i<u.xmax;i++)t[n+i]=e[o+i]}else for(let m=u.ymin;m<u.ymax;m++){const n=(l*s+m-f)*h+(i*r-a)+x;for(let i=u.xmin;i<u.xmax;i++)t[n+i]=e}}function y(l,o,r={}){const{clipOffset:s,clipSize:a,alignmentInfo:f,blockWidths:h}=r;if(h)return w(l,o,{blockWidths:h});const c=l.find((t=>i(t)));if(e(c))return null;const u=a?a.width:o.width,x=a?a.height:o.height,p=c.width,m=c.height,d=o.width/p,y=o.height/m,M={offset:s||{x:0,y:0},mosaic:a||o,block:{width:p,height:m}},k=c.pixelType,A=n.getPixelArrayConstructor(k),U=c.pixels.length,C=[];let T,S;for(let t=0;t<U;t++){S=new A(u*x);for(let e=0;e<y;e++)for(let n=0;n<d;n++){const o=l[e*d+n];i(o)&&(T=o.pixels[t],g(S,T,M,n,e,f))}C.push(S)}let v;if(l.some((t=>e(t)||t.mask&&t.mask.length>0))){v=new Uint8Array(u*x);for(let e=0;e<y;e++)for(let n=0;n<d;n++){const i=l[e*d+n],o=t(i)?i.mask:null;g(v,o||(i?1:0),M,n,e,f)}}const B=new n({width:u,height:x,pixels:C,pixelType:k,mask:v});return B.updateStatistics(),B}function w(e,l,o){const r=e.find((e=>t(e)));if(!t(r))return null;const s=e.some((e=>!t(e)||!!e.mask)),{width:a,height:f}=l,h=s?new Uint8Array(a*f):null,{blockWidths:c}=o,u=[],x=r.getPlaneCount(),p=n.getPixelArrayConstructor(r.pixelType);if(s)for(let t=0,n=0;t<e.length;n+=c[t],t++){const l=e[t];if(!i(l))continue;const o=l.mask;for(let e=0;e<f;e++)for(let i=0;i<c[t];i++)h[e*a+i+n]=null==o?255:o[e*l.width+i]}for(let t=0;t<x;t++){const n=new p(a*f);for(let l=0,o=0;l<e.length;o+=c[l],l++){const r=e[l];if(!i(r))continue;const s=r.pixels[t];if(null!=s)for(let t=0;t<f;t++)for(let e=0;e<c[l];e++)n[t*a+e+o]=s[t*r.width+e]}u.push(n)}const m=new n({width:a,height:f,mask:h,pixels:u,pixelType:r.pixelType});return m.updateStatistics(),m}function M(t,e,n){if(!i(t))return null;const{width:l,height:o}=t,r=e.x,s=e.y,a=n.width+r,f=n.height+s;if(r<0||s<0||a>l||f>o)return t;if(0===r&&0===s&&a===l&&f===o)return t;t.mask||(t.mask=new Uint8Array(l*o));const h=t.mask;for(let i=0;i<o;i++){const t=i*l;for(let e=0;e<l;e++)h[t+e]=i<s||i>=f||e<r||e>=a?0:1}return t.updateStatistics(),t}function k(t){if(!i(t))return null;const e=t.clone(),{width:n,height:l,pixels:o,mask:r}=t,s=o[0],a=e.pixels[0];for(let i=2;i<l-1;i++){const t=new Map;for(let l=i-2;l<i+2;l++)for(let e=0;e<4;e++){const i=l*n+e;C(t,s[i],r?r[i]:1)}a[i*n]=A(t),a[i*n+1]=a[i*n+2]=a[i*n];let e=3;for(;e<n-1;e++){let l=(i-2)*n+e+1;C(t,s[l],r?r[l]:1),l=(i-1)*n+e+1,C(t,s[l],r?r[l]:1),l=i*n+e+1,C(t,s[l],r?r[l]:1),l=(i+1)*n+e+1,C(t,s[l],r?r[l]:1),l=(i-2)*n+e-3,U(t,s[l],r?r[l]:1),l=(i-1)*n+e-3,U(t,s[l],r?r[l]:1),l=i*n+e-3,U(t,s[l],r?r[l]:1),l=(i+1)*n+e-3,U(t,s[l],r?r[l]:1),a[i*n+e]=A(t)}a[i*n+e+1]=a[i*n+e]}for(let i=0;i<n;i++)a[i]=a[n+i]=a[2*n+i],a[(l-1)*n+i]=a[(l-2)*n+i];return e.updateStatistics(),e}function A(t){if(0===t.size)return 0;let e=0,n=-1,i=0;const l=t.keys();let o=l.next();for(;!o.done;)i=t.get(o.value),i>e&&(n=o.value,e=i),o=l.next();return n}function U(t,e,n){if(0===n)return;const i=t.get(e);1===i?t.delete(e):t.set(e,i-1)}function C(t,e,n){0!==n&&t.set(e,t.has(e)?t.get(e)+1:1)}function T(t,e,l){let{x:o,y:r}=e;const{width:s,height:a}=l;if(0===o&&0===r&&a===t.height&&s===t.width)return t;const{width:f,height:h}=t,c=Math.max(0,r),u=Math.max(0,o),x=Math.min(o+s,f),p=Math.min(r+a,h);if(x<0||p<0||!i(t))return null;o=Math.max(0,-o),r=Math.max(0,-r);const{pixels:m,mask:d}=t,g=s*a,y=m.length,w=[];for(let i=0;i<y;i++){const e=m[i],l=n.createEmptyBand(t.pixelType,g);for(let t=c;t<p;t++){const n=t*f;let i=(t+r-c)*s+o;for(let t=u;t<x;t++)l[i++]=e[n+t]}w.push(l)}const M=new Uint8Array(g);for(let n=c;n<p;n++){const t=n*f;let e=(n+r-c)*s+o;for(let n=u;n<x;n++)M[e++]=d?d[t+n]:1}const k=new n({width:l.width,height:l.height,pixelType:t.pixelType,pixels:w,mask:M});return k.updateStatistics(),k}function S(t,e=!0){if(!i(t))return null;const{pixels:l,width:o,height:r,mask:s,pixelType:a}=t,f=[],h=Math.round(o/2),c=Math.round(r/2),u=r-1,x=o-1;for(let i=0;i<l.length;i++){const t=l[i],s=n.createEmptyBand(a,h*c);let p=0;for(let n=0;n<r;n+=2)for(let i=0;i<o;i+=2){const l=t[n*o+i];if(e){const e=i===x?l:t[n*o+i+1],r=n===u?l:t[n*o+i+o],a=i===x?r:n===u?e:t[n*o+i+o+1];s[p++]=(l+e+r+a)/4}else s[p++]=l}f.push(s)}let p=null;if(s){p=new Uint8Array(h*c);let t=0;for(let n=0;n<r;n+=2)for(let i=0;i<o;i+=2){const l=s[n*o+i];if(e){const e=i===x?l:s[n*o+i+1],r=n===u?l:s[n*o+i+o],a=i===x?r:n===u?e:s[n*o+i+o+1];p[t++]=l*e*r*a?1:0}else p[t++]=l}}return new n({width:h,height:c,pixelType:a,pixels:f,mask:p})}function v(t,e,n){if(!i(t))return null;const{width:l,height:o}=e;let{width:r,height:s}=t;const a=new Map,f={x:0,y:0},h=null==n?1:1+n;let c=t;for(let i=0;i<h;i++){const t=Math.ceil(r/l),n=Math.ceil(s/o);for(let r=0;r<n;r++){f.y=r*o;for(let n=0;n<t;n++){f.x=n*l;const t=T(c,f,e);a.set(`${i}/${r}/${n}`,t)}}i<h-1&&(c=S(c)),r=Math.round(r/2),s=Math.round(s/2)}return a}function B(t,e,n,i,l=.5){const{width:o,height:r}=t,{width:s,height:a}=e,f=i.cols,h=i.rows,c=Math.ceil(s/f-.1/f),u=Math.ceil(a/h-.1/h);let x,p,m,d,g,y,w;const M=c*f,k=M*u*h,A=new Float32Array(k),U=new Float32Array(k),C=new Uint32Array(k),T=new Uint32Array(k);let S,v,B=0;for(let b=0;b<u;b++)for(let t=0;t<c;t++){x=12*(b*c+t),p=n[x],m=n[x+1],d=n[x+2],g=n[x+3],y=n[x+4],w=n[x+5];for(let e=0;e<h;e++){B=(b*h+e)*M+t*f,v=(e+.5)/h;for(let t=0;t<e;t++)S=(t+.5)/f,A[B+t]=(p*S+m*v+d)*o-l,U[B+t]=(g*S+y*v+w)*r-l,C[B+t]=Math.round(A[B+t]),T[B+t]=Math.round(U[B+t])}x+=6,p=n[x],m=n[x+1],d=n[x+2],g=n[x+3],y=n[x+4],w=n[x+5];for(let e=0;e<h;e++){B=(b*h+e)*M+t*f,v=(e+.5)/h;for(let t=e;t<f;t++)S=(t+.5)/f,A[B+t]=(p*S+m*v+d)*o-l,U[B+t]=(g*S+y*v+w)*r-l,C[B+t]=Math.round(A[B+t]),T[B+t]=Math.round(U[B+t])}}return{offsets_x:A,offsets_y:U,offsets_xi:C,offsets_yi:T,gridWidth:M}}function b(t,e){const{coefficients:n,spacing:i}=e,{offsets_x:l,offsets_y:o,gridWidth:r}=B(t,t,n,{rows:i[0],cols:i[1]},.5),{width:s,height:a}=t,f=new Float32Array(s*a),h=180/Math.PI;for(let c=0;c<a;c++)for(let t=0;t<s;t++){const e=c*r+t,n=0===c?e:e-r,i=c===a-1?e:e+r,u=l[n]-l[i],x=o[i]-o[n];if(isNaN(u)||isNaN(x))f[c*s+t]=90;else{let e=Math.atan2(x,u)*h;e=(360+e)%360,f[c*s+t]=e}}return f}function O(t,e,l,o,r=\"nearest\"){if(!i(t))return null;\"majority\"===r&&(t=k(t));const{pixels:s,mask:a,pixelType:f}=t,h=t.width,c=t.height,u=n.getPixelArrayConstructor(f),x=s.length,{width:p,height:m}=e;let d=!1;for(let n=0;n<l.length;n+=3)-1===l[n]&&-1===l[n+1]&&-1===l[n+2]&&(d=!0);const{offsets_x:g,offsets_y:y,offsets_xi:w,offsets_yi:M,gridWidth:A}=B({width:h,height:c},e,l,o,\"majority\"===r?0:.5);let U;const C=(t,e,n)=>{const i=t instanceof Float32Array||t instanceof Float64Array?0:.5;for(let l=0;l<m;l++){U=l*A;for(let o=0;o<p;o++){if(g[U]<0||y[U]<0)t[l*p+o]=0;else if(n)t[l*p+o]=e[w[U]+M[U]*h];else{const n=Math.floor(g[U]),r=Math.floor(y[U]),s=Math.ceil(g[U]),f=Math.ceil(y[U]),c=g[U]-n,u=y[U]-r;if(!a||a[n+r*h]&&a[n+r*h]&&a[n+f*h]&&a[s+f*h]){const a=(1-c)*e[n+r*h]+c*e[s+r*h],x=(1-c)*e[n+f*h]+c*e[s+f*h];t[l*p+o]=(1-u)*a+u*x+i}else t[l*p+o]=e[w[U]+M[U]*h]}U++}}},T=[];let S;for(let n=0;n<x;n++)S=new u(p*m),C(S,s[n],\"nearest\"===r||\"majority\"===r),T.push(S);const v=new n({width:p,height:m,pixelType:f,pixels:T});if(a)v.mask=new Uint8Array(p*m),C(v.mask,a,!0);else if(d){v.mask=new Uint8Array(p*m);for(let t=0;t<p*m;t++)v.mask[t]=g[t]<0||y[t]<0?0:1}return v.updateStatistics(),v}export{O as approximateTransform,T as clip,r as colorize,o as createColormapLUT,h as createContrastBrightnessLUT,c as createHistogramEqualizationLUT,f as createStretchLUT,a as estimateStatisticsFromHistograms,s as estimateStatisticsHistograms,l as extractBands,m as getClipBounds,b as getLocalArithmeticNorthRotations,i as isValidPixelBlock,x as lookupPixels,y as mosaic,d as mosaicPixelData,p as remapColor,k as resampleByMajority,M as setValidBoundary,v as split,u as stretch};\n"]},"metadata":{},"sourceType":"module"}