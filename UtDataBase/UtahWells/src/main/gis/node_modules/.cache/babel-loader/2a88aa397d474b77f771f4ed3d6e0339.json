{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport t from \"../../core/Accessor.js\";\nimport s from \"../../core/Error.js\";\nimport { HandleOwnerMixin as i } from \"../../core/HandleOwner.js\";\nimport r from \"../../core/Logger.js\";\nimport { throttle as o } from \"../../core/throttle.js\";\nimport { property as a } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as l } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport { CollisionEngine as p } from \"./engine/webgl/collisions/CollisionEngine.js\";\nconst n = 32,\n      d = r.getLogger(\"esri.views.2d.layers.labels.LabelManager\");\nlet u = class extends i(t) {\n  constructor(e) {\n    super(e), this._applyVisibilityPassThrottled = o(this._applyVisibilityPass, n, this), this.lastUpdateId = -1, this.updateRequested = !1, this.view = null;\n  }\n\n  initialize() {\n    this.collisionEngine = new p();\n  }\n\n  destroy() {\n    this.collisionEngine = null, this._applyVisibilityPassThrottled.remove(), this._applyVisibilityPassThrottled = null;\n  }\n\n  get updating() {\n    return this.updateRequested;\n  }\n\n  update(e) {\n    this._applyVisibilityPassThrottled(e);\n  }\n\n  viewChange() {\n    this.requestUpdate();\n  }\n\n  requestUpdate() {\n    this.updateRequested || (this.updateRequested = !0, this.view.requestUpdate());\n  }\n\n  processUpdate(e) {\n    this._set(\"updateParameters\", e), this.updateRequested && (this.updateRequested = !1, this.update(e));\n  }\n\n  _applyVisibilityPass(e) {\n    try {\n      const t = this.view.featuresTilingScheme.getClosestInfoForScale(e.state.scale).level;\n      this.collisionEngine.run(this.view.allLayerViews.items, e, t);\n    } catch (t) {\n      d.error(new s(\"mapview-labeling\", \"Encountered an error during label decluttering\", t));\n    }\n  }\n\n};\ne([a()], u.prototype, \"updateRequested\", void 0), e([a({\n  readOnly: !0\n})], u.prototype, \"updateParameters\", void 0), e([a()], u.prototype, \"updating\", null), e([a()], u.prototype, \"view\", void 0), u = e([l(\"esri.views.2d.layers.labels.LabelManager\")], u);\nconst c = u;\nexport { c as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/LabelManager.js"],"names":["_","e","t","s","HandleOwnerMixin","i","r","throttle","o","property","a","subclass","l","CollisionEngine","p","n","d","getLogger","u","constructor","_applyVisibilityPassThrottled","_applyVisibilityPass","lastUpdateId","updateRequested","view","initialize","collisionEngine","destroy","remove","updating","update","viewChange","requestUpdate","processUpdate","_set","featuresTilingScheme","getClosestInfoForScale","state","scale","level","run","allLayerViews","items","error","prototype","readOnly","c","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import s from\"../../core/Error.js\";import{HandleOwnerMixin as i}from\"../../core/HandleOwner.js\";import r from\"../../core/Logger.js\";import{throttle as o}from\"../../core/throttle.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import{CollisionEngine as p}from\"./engine/webgl/collisions/CollisionEngine.js\";const n=32,d=r.getLogger(\"esri.views.2d.layers.labels.LabelManager\");let u=class extends(i(t)){constructor(e){super(e),this._applyVisibilityPassThrottled=o(this._applyVisibilityPass,n,this),this.lastUpdateId=-1,this.updateRequested=!1,this.view=null}initialize(){this.collisionEngine=new p}destroy(){this.collisionEngine=null,this._applyVisibilityPassThrottled.remove(),this._applyVisibilityPassThrottled=null}get updating(){return this.updateRequested}update(e){this._applyVisibilityPassThrottled(e)}viewChange(){this.requestUpdate()}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}processUpdate(e){this._set(\"updateParameters\",e),this.updateRequested&&(this.updateRequested=!1,this.update(e))}_applyVisibilityPass(e){try{const t=this.view.featuresTilingScheme.getClosestInfoForScale(e.state.scale).level;this.collisionEngine.run(this.view.allLayerViews.items,e,t)}catch(t){d.error(new s(\"mapview-labeling\",\"Encountered an error during label decluttering\",t))}}};e([a()],u.prototype,\"updateRequested\",void 0),e([a({readOnly:!0})],u.prototype,\"updateParameters\",void 0),e([a()],u.prototype,\"updating\",null),e([a()],u.prototype,\"view\",void 0),u=e([l(\"esri.views.2d.layers.labels.LabelManager\")],u);const c=u;export{c as default};\n"]},"metadata":{},"sourceType":"module"}