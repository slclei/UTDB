{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport { isSome as t, isNone as o } from \"../../core/maybe.js\";\nimport { webglValidateShadersEnabled as i } from \"./checkWebGLError.js\";\nimport { ContextType as r } from \"./context-util.js\";\nimport { ShaderType as n, ResourceType as e } from \"./enums.js\";\nimport { transpileShader as s } from \"./ShaderTranspiler.js\";\nconst m = 4294967295;\n\nclass a {\n  constructor(t, o, m, a) {\n    let h = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : new Map();\n    this._context = t, this._locations = a, this._uniformBlockBindings = h, this._refCount = 1, this._compiled = !1, this._nameToUniformLocation = {}, this._nameToUniform1 = {}, this._nameToUniform1v = {}, this._nameToUniform2 = {}, this._nameToUniform3 = {}, this._nameToUniform4 = {}, this._nameToUniformMatrix3 = {}, this._nameToUniformMatrix4 = {}, t || console.error(\"RenderingContext isn't initialized!\"), 0 === o.length && console.error(\"Shaders source should not be empty!\"), this._context.type === r.WEBGL2 && (o = s(o, n.VERTEX_SHADER), m = s(m, n.FRAGMENT_SHADER)), this._vShader = f(this._context, n.VERTEX_SHADER, o), this._fShader = f(this._context, n.FRAGMENT_SHADER, m), this._vShader && this._fShader || console.error(\"Error loading shaders!\"), this._context.instanceCounter.increment(e.Shader, this), i() && (this.vertexShader = o, this.fragmentShader = m);\n  }\n\n  get glName() {\n    if (t(this._glName)) return this._glName;\n    if (o(this._vShader)) return null;\n    const n = this._context.gl,\n          s = n.createProgram();\n\n    if (n.attachShader(s, this._vShader), n.attachShader(s, this._fShader), this._locations.forEach((t, o) => n.bindAttribLocation(s, t, o)), n.linkProgram(s), i() && !n.getProgramParameter(s, n.LINK_STATUS) && console.error(`Could not link shader\\nvalidated: ${n.getProgramParameter(s, n.VALIDATE_STATUS)}, gl error ${n.getError()}, vertex: ${n.getShaderParameter(this._vShader, n.COMPILE_STATUS)}, fragment: ${n.getShaderParameter(this._fShader, n.COMPILE_STATUS)}, info log: ${n.getProgramInfoLog(s)}, vertex source: ${this.vertexShader}, fragment source: ${this.fragmentShader}`), this._context.type === r.WEBGL2) {\n      const t = n;\n\n      for (const [o, i] of this._uniformBlockBindings) {\n        const r = t.getUniformBlockIndex(s, o);\n        r < m && t.uniformBlockBinding(s, r, i);\n      }\n    }\n\n    return this._glName = s, this._context.instanceCounter.increment(e.Program, this), s;\n  }\n\n  get hasGLName() {\n    return t(this._glName);\n  }\n\n  get isCompiled() {\n    if (this._compiled) return !0;\n\n    const t = this._context.gl.getExtension(\"KHR_parallel_shader_compile\");\n\n    return null == t ? (this._compiled = !0, !0) : (this._compiled = !!this._context.gl.getProgramParameter(this.glName, t.COMPLETION_STATUS_KHR), this._compiled);\n  }\n\n  dispose() {\n    if (--this._refCount > 0) return;\n    const t = this._context.gl;\n    this._vShader && (t.deleteShader(this._vShader), this._vShader = null, this._context.instanceCounter.decrement(e.Shader, this)), this._fShader && (t.deleteShader(this._fShader), this._fShader = null), this._glName && (t.deleteProgram(this._glName), this._glName = null, this._context.instanceCounter.decrement(e.Program, this));\n  }\n\n  ref() {\n    ++this._refCount;\n  }\n\n  _getUniformLocation(t) {\n    return void 0 === this._nameToUniformLocation[t] && (this._nameToUniformLocation[t] = this._context.gl.getUniformLocation(this.glName, t)), this._nameToUniformLocation[t];\n  }\n\n  hasUniform(t) {\n    return null !== this._getUniformLocation(t);\n  }\n\n  setUniform1i(t, o) {\n    const i = this._nameToUniform1[t];\n\n    if (void 0 === i || o !== i) {\n      this._context.gl.uniform1i(this._getUniformLocation(t), o), this._nameToUniform1[t] = o;\n    }\n  }\n\n  setUniform1iv(t, o) {\n    const i = this._nameToUniform1v[t];\n\n    if (h(i, o)) {\n      this._context.gl.uniform1iv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform1v[t] = Array.from(o) : l(o, i);\n    }\n  }\n\n  setUniform2iv(t, o) {\n    const i = this._nameToUniform2[t];\n\n    if (h(i, o)) {\n      this._context.gl.uniform2iv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform2[t] = Array.from(o) : l(o, i);\n    }\n  }\n\n  setUniform3iv(t, o) {\n    const i = this._nameToUniform3[t];\n\n    if (h(i, o)) {\n      this._context.gl.uniform3iv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform3[t] = Array.from(o) : l(o, i);\n    }\n  }\n\n  setUniform4iv(t, o) {\n    const i = this._nameToUniform4[t];\n\n    if (h(i, o)) {\n      this._context.gl.uniform4iv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform4[t] = Array.from(o) : l(o, i);\n    }\n  }\n\n  setUniform1f(t, o) {\n    const i = this._nameToUniform1[t];\n\n    if (void 0 === i || o !== i) {\n      this._context.gl.uniform1f(this._getUniformLocation(t), o), this._nameToUniform1[t] = o;\n    }\n  }\n\n  setUniform1fv(t, o) {\n    const i = this._nameToUniform1v[t];\n\n    if (h(i, o)) {\n      this._context.gl.uniform1fv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform1v[t] = Array.from(o) : l(o, i);\n    }\n  }\n\n  setUniform2f(t, o, i) {\n    const r = this._nameToUniform2[t];\n\n    if (void 0 === r || o !== r[0] || i !== r[1]) {\n      this._context.gl.uniform2f(this._getUniformLocation(t), o, i), void 0 === r ? this._nameToUniform2[t] = [o, i] : (r[0] = o, r[1] = i);\n    }\n  }\n\n  setUniform2fv(t, o) {\n    const i = this._nameToUniform2[t];\n\n    if (h(i, o)) {\n      this._context.gl.uniform2fv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform2[t] = Array.from(o) : l(o, i);\n    }\n  }\n\n  setUniform3f(t, o, i, r) {\n    const n = this._nameToUniform3[t];\n\n    if (void 0 === n || o !== n[0] || i !== n[1] || r !== n[2]) {\n      this._context.gl.uniform3f(this._getUniformLocation(t), o, i, r), void 0 === n ? this._nameToUniform3[t] = [o, i, r] : (n[0] = o, n[1] = i, n[2] = r);\n    }\n  }\n\n  setUniform3fv(t, o) {\n    const i = this._nameToUniform3[t];\n\n    if (h(i, o)) {\n      this._context.gl.uniform3fv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform3[t] = Array.from(o) : l(o, i);\n    }\n  }\n\n  setUniform4f(t, o, i, r, n) {\n    const e = this._nameToUniform4[t];\n\n    if (void 0 === e || o !== e[0] || i !== e[1] || r !== e[2] || n !== e[3]) {\n      this._context.gl.uniform4f(this._getUniformLocation(t), o, i, r, n), void 0 === e ? this._nameToUniform4[t] = [o, i, r, n] : (e[0] = o, e[1] = i, e[2] = r, e[3] = n);\n    }\n  }\n\n  setUniform4fv(t, o) {\n    const i = this._nameToUniform4[t];\n\n    if (h(i, o)) {\n      this._context.gl.uniform4fv(this._getUniformLocation(t), o), void 0 === i ? this._nameToUniform4[t] = Array.from(o) : l(o, i);\n    }\n  }\n\n  setUniformMatrix3fv(t, o) {\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    const r = this._nameToUniformMatrix3[t];\n\n    if (g(r, o)) {\n      this._context.gl.uniformMatrix3fv(this._getUniformLocation(t), i, o), void 0 === r ? this._nameToUniformMatrix3[t] = Array.from(o) : l(o, r);\n    }\n  }\n\n  setUniformMatrix4fv(t, o) {\n    let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    const r = this._nameToUniformMatrix4[t];\n\n    if (d(r, o)) {\n      this._context.gl.uniformMatrix4fv(this._getUniformLocation(t), i, o), void 0 === r ? this._nameToUniformMatrix4[t] = Array.from(o) : l(o, r);\n    }\n  }\n\n  stop() {}\n\n}\n\nfunction h(t, i) {\n  if (o(t) || t.length !== i.length) return !0;\n\n  for (let o = 0; o < t.length; ++o) if (t[o] !== i[o]) return !0;\n\n  return !1;\n}\n\nfunction f(t, o, e) {\n  const s = t.gl,\n        m = s.createShader(o);\n  return s.shaderSource(m, e), s.compileShader(m), i() && !s.getShaderParameter(m, s.COMPILE_STATUS) && (console.error(\"Compile error in \".concat(o === n.VERTEX_SHADER ? \"vertex\" : \"fragment\", \" shader\")), console.error(s.getShaderInfoLog(m)), console.error(_(e)), t.type === r.WEBGL2 && (console.log(\"Shader source before transpilation:\"), console.log(e))), m;\n}\n\nfunction _(t) {\n  let o = 2;\n  return t.replace(/\\n/g, () => \"\\n\" + c(o++) + \":\");\n}\n\nfunction c(t) {\n  return t >= 1e3 ? t.toString() : (\"  \" + t).slice(-3);\n}\n\nfunction l(t, o) {\n  for (let i = 0; i < t.length; ++i) o[i] = t[i];\n}\n\nfunction g(t, i) {\n  return !!o(t) || (9 !== t.length ? h(t, i) : 9 !== t.length || t[0] !== i[0] || t[1] !== i[1] || t[2] !== i[2] || t[3] !== i[3] || t[4] !== i[4] || t[5] !== i[5] || t[6] !== i[6] || t[7] !== i[7] || t[8] !== i[8]);\n}\n\nfunction d(t, i) {\n  return !!o(t) || (16 !== t.length ? h(t, i) : 16 !== t.length || t[0] !== i[0] || t[1] !== i[1] || t[2] !== i[2] || t[3] !== i[3] || t[4] !== i[4] || t[5] !== i[5] || t[6] !== i[6] || t[7] !== i[7] || t[8] !== i[8] || t[9] !== i[9] || t[10] !== i[10] || t[11] !== i[11] || t[12] !== i[12] || t[13] !== i[13] || t[14] !== i[14] || t[15] !== i[15]);\n}\n\nexport { a as Program };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/webgl/Program.js"],"names":["isSome","t","isNone","o","webglValidateShadersEnabled","i","ContextType","r","ShaderType","n","ResourceType","e","transpileShader","s","m","a","constructor","h","Map","_context","_locations","_uniformBlockBindings","_refCount","_compiled","_nameToUniformLocation","_nameToUniform1","_nameToUniform1v","_nameToUniform2","_nameToUniform3","_nameToUniform4","_nameToUniformMatrix3","_nameToUniformMatrix4","console","error","length","type","WEBGL2","VERTEX_SHADER","FRAGMENT_SHADER","_vShader","f","_fShader","instanceCounter","increment","Shader","vertexShader","fragmentShader","glName","_glName","gl","createProgram","attachShader","forEach","bindAttribLocation","linkProgram","getProgramParameter","LINK_STATUS","VALIDATE_STATUS","getError","getShaderParameter","COMPILE_STATUS","getProgramInfoLog","getUniformBlockIndex","uniformBlockBinding","Program","hasGLName","isCompiled","getExtension","COMPLETION_STATUS_KHR","dispose","deleteShader","decrement","deleteProgram","ref","_getUniformLocation","getUniformLocation","hasUniform","setUniform1i","uniform1i","setUniform1iv","uniform1iv","Array","from","l","setUniform2iv","uniform2iv","setUniform3iv","uniform3iv","setUniform4iv","uniform4iv","setUniform1f","uniform1f","setUniform1fv","uniform1fv","setUniform2f","uniform2f","setUniform2fv","uniform2fv","setUniform3f","uniform3f","setUniform3fv","uniform3fv","setUniform4f","uniform4f","setUniform4fv","uniform4fv","setUniformMatrix3fv","g","uniformMatrix3fv","setUniformMatrix4fv","d","uniformMatrix4fv","stop","createShader","shaderSource","compileShader","concat","getShaderInfoLog","_","log","replace","c","toString","slice"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{isSome as t,isNone as o}from\"../../core/maybe.js\";import{webglValidateShadersEnabled as i}from\"./checkWebGLError.js\";import{ContextType as r}from\"./context-util.js\";import{ShaderType as n,ResourceType as e}from\"./enums.js\";import{transpileShader as s}from\"./ShaderTranspiler.js\";const m=4294967295;class a{constructor(t,o,m,a,h=new Map){this._context=t,this._locations=a,this._uniformBlockBindings=h,this._refCount=1,this._compiled=!1,this._nameToUniformLocation={},this._nameToUniform1={},this._nameToUniform1v={},this._nameToUniform2={},this._nameToUniform3={},this._nameToUniform4={},this._nameToUniformMatrix3={},this._nameToUniformMatrix4={},t||console.error(\"RenderingContext isn't initialized!\"),0===o.length&&console.error(\"Shaders source should not be empty!\"),this._context.type===r.WEBGL2&&(o=s(o,n.VERTEX_SHADER),m=s(m,n.FRAGMENT_SHADER)),this._vShader=f(this._context,n.VERTEX_SHADER,o),this._fShader=f(this._context,n.FRAGMENT_SHADER,m),this._vShader&&this._fShader||console.error(\"Error loading shaders!\"),this._context.instanceCounter.increment(e.Shader,this),i()&&(this.vertexShader=o,this.fragmentShader=m)}get glName(){if(t(this._glName))return this._glName;if(o(this._vShader))return null;const n=this._context.gl,s=n.createProgram();if(n.attachShader(s,this._vShader),n.attachShader(s,this._fShader),this._locations.forEach(((t,o)=>n.bindAttribLocation(s,t,o))),n.linkProgram(s),i()&&!n.getProgramParameter(s,n.LINK_STATUS)&&console.error(`Could not link shader\\nvalidated: ${n.getProgramParameter(s,n.VALIDATE_STATUS)}, gl error ${n.getError()}, vertex: ${n.getShaderParameter(this._vShader,n.COMPILE_STATUS)}, fragment: ${n.getShaderParameter(this._fShader,n.COMPILE_STATUS)}, info log: ${n.getProgramInfoLog(s)}, vertex source: ${this.vertexShader}, fragment source: ${this.fragmentShader}`),this._context.type===r.WEBGL2){const t=n;for(const[o,i]of this._uniformBlockBindings){const r=t.getUniformBlockIndex(s,o);r<m&&t.uniformBlockBinding(s,r,i)}}return this._glName=s,this._context.instanceCounter.increment(e.Program,this),s}get hasGLName(){return t(this._glName)}get isCompiled(){if(this._compiled)return!0;const t=this._context.gl.getExtension(\"KHR_parallel_shader_compile\");return null==t?(this._compiled=!0,!0):(this._compiled=!!this._context.gl.getProgramParameter(this.glName,t.COMPLETION_STATUS_KHR),this._compiled)}dispose(){if(--this._refCount>0)return;const t=this._context.gl;this._vShader&&(t.deleteShader(this._vShader),this._vShader=null,this._context.instanceCounter.decrement(e.Shader,this)),this._fShader&&(t.deleteShader(this._fShader),this._fShader=null),this._glName&&(t.deleteProgram(this._glName),this._glName=null,this._context.instanceCounter.decrement(e.Program,this))}ref(){++this._refCount}_getUniformLocation(t){return void 0===this._nameToUniformLocation[t]&&(this._nameToUniformLocation[t]=this._context.gl.getUniformLocation(this.glName,t)),this._nameToUniformLocation[t]}hasUniform(t){return null!==this._getUniformLocation(t)}setUniform1i(t,o){const i=this._nameToUniform1[t];if(void 0===i||o!==i){this._context.gl.uniform1i(this._getUniformLocation(t),o),this._nameToUniform1[t]=o}}setUniform1iv(t,o){const i=this._nameToUniform1v[t];if(h(i,o)){this._context.gl.uniform1iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform1v[t]=Array.from(o):l(o,i)}}setUniform2iv(t,o){const i=this._nameToUniform2[t];if(h(i,o)){this._context.gl.uniform2iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform2[t]=Array.from(o):l(o,i)}}setUniform3iv(t,o){const i=this._nameToUniform3[t];if(h(i,o)){this._context.gl.uniform3iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform3[t]=Array.from(o):l(o,i)}}setUniform4iv(t,o){const i=this._nameToUniform4[t];if(h(i,o)){this._context.gl.uniform4iv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform4[t]=Array.from(o):l(o,i)}}setUniform1f(t,o){const i=this._nameToUniform1[t];if(void 0===i||o!==i){this._context.gl.uniform1f(this._getUniformLocation(t),o),this._nameToUniform1[t]=o}}setUniform1fv(t,o){const i=this._nameToUniform1v[t];if(h(i,o)){this._context.gl.uniform1fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform1v[t]=Array.from(o):l(o,i)}}setUniform2f(t,o,i){const r=this._nameToUniform2[t];if(void 0===r||o!==r[0]||i!==r[1]){this._context.gl.uniform2f(this._getUniformLocation(t),o,i),void 0===r?this._nameToUniform2[t]=[o,i]:(r[0]=o,r[1]=i)}}setUniform2fv(t,o){const i=this._nameToUniform2[t];if(h(i,o)){this._context.gl.uniform2fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform2[t]=Array.from(o):l(o,i)}}setUniform3f(t,o,i,r){const n=this._nameToUniform3[t];if(void 0===n||o!==n[0]||i!==n[1]||r!==n[2]){this._context.gl.uniform3f(this._getUniformLocation(t),o,i,r),void 0===n?this._nameToUniform3[t]=[o,i,r]:(n[0]=o,n[1]=i,n[2]=r)}}setUniform3fv(t,o){const i=this._nameToUniform3[t];if(h(i,o)){this._context.gl.uniform3fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform3[t]=Array.from(o):l(o,i)}}setUniform4f(t,o,i,r,n){const e=this._nameToUniform4[t];if(void 0===e||o!==e[0]||i!==e[1]||r!==e[2]||n!==e[3]){this._context.gl.uniform4f(this._getUniformLocation(t),o,i,r,n),void 0===e?this._nameToUniform4[t]=[o,i,r,n]:(e[0]=o,e[1]=i,e[2]=r,e[3]=n)}}setUniform4fv(t,o){const i=this._nameToUniform4[t];if(h(i,o)){this._context.gl.uniform4fv(this._getUniformLocation(t),o),void 0===i?this._nameToUniform4[t]=Array.from(o):l(o,i)}}setUniformMatrix3fv(t,o,i=!1){const r=this._nameToUniformMatrix3[t];if(g(r,o)){this._context.gl.uniformMatrix3fv(this._getUniformLocation(t),i,o),void 0===r?this._nameToUniformMatrix3[t]=Array.from(o):l(o,r)}}setUniformMatrix4fv(t,o,i=!1){const r=this._nameToUniformMatrix4[t];if(d(r,o)){this._context.gl.uniformMatrix4fv(this._getUniformLocation(t),i,o),void 0===r?this._nameToUniformMatrix4[t]=Array.from(o):l(o,r)}}stop(){}}function h(t,i){if(o(t)||t.length!==i.length)return!0;for(let o=0;o<t.length;++o)if(t[o]!==i[o])return!0;return!1}function f(t,o,e){const s=t.gl,m=s.createShader(o);return s.shaderSource(m,e),s.compileShader(m),i()&&!s.getShaderParameter(m,s.COMPILE_STATUS)&&(console.error(\"Compile error in \".concat(o===n.VERTEX_SHADER?\"vertex\":\"fragment\",\" shader\")),console.error(s.getShaderInfoLog(m)),console.error(_(e)),t.type===r.WEBGL2&&(console.log(\"Shader source before transpilation:\"),console.log(e))),m}function _(t){let o=2;return t.replace(/\\n/g,(()=>\"\\n\"+c(o++)+\":\"))}function c(t){return t>=1e3?t.toString():(\"  \"+t).slice(-3)}function l(t,o){for(let i=0;i<t.length;++i)o[i]=t[i]}function g(t,i){return!!o(t)||(9!==t.length?h(t,i):9!==t.length||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[3]!==i[3]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[7]!==i[7]||t[8]!==i[8])}function d(t,i){return!!o(t)||(16!==t.length?h(t,i):16!==t.length||t[0]!==i[0]||t[1]!==i[1]||t[2]!==i[2]||t[3]!==i[3]||t[4]!==i[4]||t[5]!==i[5]||t[6]!==i[6]||t[7]!==i[7]||t[8]!==i[8]||t[9]!==i[9]||t[10]!==i[10]||t[11]!==i[11]||t[12]!==i[12]||t[13]!==i[13]||t[14]!==i[14]||t[15]!==i[15])}export{a as Program};\n"]},"metadata":{},"sourceType":"module"}