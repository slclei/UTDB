{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from \"../Error.js\";\nimport r from \"../has.js\";\nimport { throwIfAborted as e } from \"../promiseUtils.js\";\nimport o from \"./Connection.js\";\nexport { default as Connection } from \"./Connection.js\";\nimport n from \"./RemoteClient.js\";\nexport { default as RemoteClient } from \"./RemoteClient.js\";\nimport i from \"./WorkerOwner.js\";\nlet s = r(\"esri-workers-debug\") ? 1 : r(\"host-browser\") ? navigator.hardwareConcurrency - 1 : 0;\ns || (s = r(\"safari\") && r(\"mac\") || r(\"trident\") ? 7 : 2);\nlet a = 0;\nconst l = [];\n\nfunction c() {\n  h();\n}\n\nfunction m(t, r) {\n  return f(t, {\n    client: r\n  });\n}\n\nasync function f(t, r) {\n  const e = new o();\n  return await e.open(t, r), e;\n}\n\nasync function u(o) {\n  let i = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (\"string\" != typeof o) throw new t(\"workers:undefined-module\", \"modulePath is missing\");\n  let c = i.strategy || \"distributed\";\n\n  if (r(\"host-webworker\") && !r(\"esri-workers\") && (c = \"local\"), \"local\" === c) {\n    let t = await n.loadWorker(o);\n    t || (t = await import(\n    /* @vite-ignore */\n\n    /* webpackIgnore: true */\n    o)), e(i.signal);\n    const r = i.client || t;\n    return f([n.connect(t)], { ...i,\n      client: r\n    });\n  }\n\n  if (await h(), e(i.signal), \"dedicated\" === c) {\n    const t = a++ % s;\n    return f([await l[t].open(o, i)], i);\n  }\n\n  if (i.maxNumWorkers && i.maxNumWorkers > 0) {\n    const t = Math.min(i.maxNumWorkers, s);\n\n    if (t < s) {\n      const r = new Array(t);\n\n      for (let e = 0; e < t; ++e) {\n        const t = a++ % s;\n        r[e] = l[t].open(o, i);\n      }\n\n      return f(r, i);\n    }\n  }\n\n  return f(l.map(t => t.open(o, i)), i);\n}\n\nfunction p() {\n  d && (w.abort(), d = null);\n\n  for (let t = 0; t < l.length; t++) l[t] && l[t].terminate();\n\n  l.length = 0;\n}\n\nlet w,\n    d = null;\n\nasync function h() {\n  if (d) return d;\n  w = new AbortController();\n  const t = [];\n\n  for (let r = 0; r < s; r++) {\n    const e = i.create(r).then(t => (l[r] = t, t));\n    t.push(e);\n  }\n\n  return d = Promise.all(t), d;\n}\n\nexport { c as initialize, u as open, m as openWithPorts, p as terminate };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/core/workers/workers.js"],"names":["t","r","throwIfAborted","e","o","default","Connection","n","RemoteClient","i","s","navigator","hardwareConcurrency","a","l","c","h","m","f","client","open","u","strategy","loadWorker","signal","connect","maxNumWorkers","Math","min","Array","map","p","d","w","abort","length","terminate","AbortController","create","then","push","Promise","all","initialize","openWithPorts"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from\"../Error.js\";import r from\"../has.js\";import{throwIfAborted as e}from\"../promiseUtils.js\";import o from\"./Connection.js\";export{default as Connection}from\"./Connection.js\";import n from\"./RemoteClient.js\";export{default as RemoteClient}from\"./RemoteClient.js\";import i from\"./WorkerOwner.js\";let s=r(\"esri-workers-debug\")?1:r(\"host-browser\")?navigator.hardwareConcurrency-1:0;s||(s=r(\"safari\")&&r(\"mac\")||r(\"trident\")?7:2);let a=0;const l=[];function c(){h()}function m(t,r){return f(t,{client:r})}async function f(t,r){const e=new o;return await e.open(t,r),e}async function u(o,i={}){if(\"string\"!=typeof o)throw new t(\"workers:undefined-module\",\"modulePath is missing\");let c=i.strategy||\"distributed\";if(r(\"host-webworker\")&&!r(\"esri-workers\")&&(c=\"local\"),\"local\"===c){let t=await n.loadWorker(o);t||(t=await import(\n/* @vite-ignore */\n/* webpackIgnore: true */\no)),e(i.signal);const r=i.client||t;return f([n.connect(t)],{...i,client:r})}if(await h(),e(i.signal),\"dedicated\"===c){const t=a++%s;return f([await l[t].open(o,i)],i)}if(i.maxNumWorkers&&i.maxNumWorkers>0){const t=Math.min(i.maxNumWorkers,s);if(t<s){const r=new Array(t);for(let e=0;e<t;++e){const t=a++%s;r[e]=l[t].open(o,i)}return f(r,i)}}return f(l.map((t=>t.open(o,i))),i)}function p(){d&&(w.abort(),d=null);for(let t=0;t<l.length;t++)l[t]&&l[t].terminate();l.length=0}let w,d=null;async function h(){if(d)return d;w=new AbortController;const t=[];for(let r=0;r<s;r++){const e=i.create(r).then((t=>(l[r]=t,t)));t.push(e)}return d=Promise.all(t),d}export{c as initialize,u as open,m as openWithPorts,p as terminate};\n"]},"metadata":{},"sourceType":"module"}