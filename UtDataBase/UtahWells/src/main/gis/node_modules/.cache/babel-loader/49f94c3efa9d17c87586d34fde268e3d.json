{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../../core/maybe.js\";\nimport { WGLGeometryType as e } from \"../enums.js\";\nimport { createProgramDescriptor as o } from \"../Utils.js\";\nimport a from \"./WGLGeometryBrush.js\";\nimport { MarkerMaterialKey as n } from \"../materialKey/MaterialKey.js\";\nimport { DataType as i, PrimitiveType as r } from \"../../../../webgl/enums.js\";\n\nconst s = t => o(t.data, {\n  geometry: [{\n    location: 0,\n    name: \"a_pos\",\n    count: 2,\n    type: i.SHORT\n  }, {\n    location: 1,\n    name: \"a_vertexOffset\",\n    count: 2,\n    type: i.SHORT\n  }, {\n    location: 2,\n    name: \"a_texCoords\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }, {\n    location: 3,\n    name: \"a_bitSetAndDistRatio\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }, {\n    location: 4,\n    name: \"a_id\",\n    count: 4,\n    type: i.UNSIGNED_BYTE\n  }, {\n    location: 5,\n    name: \"a_color\",\n    count: 4,\n    type: i.UNSIGNED_BYTE,\n    normalized: !0\n  }, {\n    location: 6,\n    name: \"a_outlineColor\",\n    count: 4,\n    type: i.UNSIGNED_BYTE,\n    normalized: !0\n  }, {\n    location: 7,\n    name: \"a_sizeAndOutlineWidth\",\n    count: 4,\n    type: i.UNSIGNED_BYTE\n  }, {\n    location: 8,\n    name: \"a_zoomRange\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }]\n});\n\nclass m extends a {\n  dispose() {}\n\n  getGeometryType() {\n    return e.MARKER;\n  }\n\n  drawGeometry(e, o, a, m) {\n    const {\n      context: l,\n      painter: c,\n      rendererInfo: p,\n      state: d,\n      passOptions: u\n    } = e,\n          y = n.load(a.materialKey),\n          {\n      bufferLayouts: _,\n      attributes: E\n    } = s(y),\n          N = c.materialManager.getMaterialProgram(e, y, \"materials/icon\", E, m);\n    l.useProgram(N), y.textureBinding && c.textureManager.bindTextures(l, N, y, !0);\n    let S = r.TRIANGLES;\n    t(u) && \"hittest\" === u.type && (S = r.POINTS), this._setSharedUniforms(N, e, o);\n    const f = y.vvRotation ? d.displayViewMat3 : d.displayMat3;\n    N.setUniformMatrix3fv(\"u_displayMat3\", f), this._setSizeVVUniforms(y, N, p, o), this._setColorAndOpacityVVUniforms(y, N, p), this._setRotationVVUniforms(y, N, p);\n    const T = a.target.getVAO(l, _, E),\n          U = a.indexFrom * Uint32Array.BYTES_PER_ELEMENT;\n    l.bindVAO(T), l.drawElements(S, a.indexCount, i.UNSIGNED_INT, U);\n  }\n\n}\n\nexport { m as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushMarker.js"],"names":["isSome","t","WGLGeometryType","e","createProgramDescriptor","o","a","MarkerMaterialKey","n","DataType","i","PrimitiveType","r","s","data","geometry","location","name","count","type","SHORT","UNSIGNED_SHORT","UNSIGNED_BYTE","normalized","m","dispose","getGeometryType","MARKER","drawGeometry","context","l","painter","c","rendererInfo","p","state","d","passOptions","u","y","load","materialKey","bufferLayouts","_","attributes","E","N","materialManager","getMaterialProgram","useProgram","textureBinding","textureManager","bindTextures","S","TRIANGLES","POINTS","_setSharedUniforms","f","vvRotation","displayViewMat3","displayMat3","setUniformMatrix3fv","_setSizeVVUniforms","_setColorAndOpacityVVUniforms","_setRotationVVUniforms","T","target","getVAO","U","indexFrom","Uint32Array","BYTES_PER_ELEMENT","bindVAO","drawElements","indexCount","UNSIGNED_INT","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../core/maybe.js\";import{WGLGeometryType as e}from\"../enums.js\";import{createProgramDescriptor as o}from\"../Utils.js\";import a from\"./WGLGeometryBrush.js\";import{MarkerMaterialKey as n}from\"../materialKey/MaterialKey.js\";import{DataType as i,PrimitiveType as r}from\"../../../../webgl/enums.js\";const s=t=>o(t.data,{geometry:[{location:0,name:\"a_pos\",count:2,type:i.SHORT},{location:1,name:\"a_vertexOffset\",count:2,type:i.SHORT},{location:2,name:\"a_texCoords\",count:2,type:i.UNSIGNED_SHORT},{location:3,name:\"a_bitSetAndDistRatio\",count:2,type:i.UNSIGNED_SHORT},{location:4,name:\"a_id\",count:4,type:i.UNSIGNED_BYTE},{location:5,name:\"a_color\",count:4,type:i.UNSIGNED_BYTE,normalized:!0},{location:6,name:\"a_outlineColor\",count:4,type:i.UNSIGNED_BYTE,normalized:!0},{location:7,name:\"a_sizeAndOutlineWidth\",count:4,type:i.UNSIGNED_BYTE},{location:8,name:\"a_zoomRange\",count:2,type:i.UNSIGNED_SHORT}]});class m extends a{dispose(){}getGeometryType(){return e.MARKER}drawGeometry(e,o,a,m){const{context:l,painter:c,rendererInfo:p,state:d,passOptions:u}=e,y=n.load(a.materialKey),{bufferLayouts:_,attributes:E}=s(y),N=c.materialManager.getMaterialProgram(e,y,\"materials/icon\",E,m);l.useProgram(N),y.textureBinding&&c.textureManager.bindTextures(l,N,y,!0);let S=r.TRIANGLES;t(u)&&\"hittest\"===u.type&&(S=r.POINTS),this._setSharedUniforms(N,e,o);const f=y.vvRotation?d.displayViewMat3:d.displayMat3;N.setUniformMatrix3fv(\"u_displayMat3\",f),this._setSizeVVUniforms(y,N,p,o),this._setColorAndOpacityVVUniforms(y,N,p),this._setRotationVVUniforms(y,N,p);const T=a.target.getVAO(l,_,E),U=a.indexFrom*Uint32Array.BYTES_PER_ELEMENT;l.bindVAO(T),l.drawElements(S,a.indexCount,i.UNSIGNED_INT,U)}}export{m as default};\n"]},"metadata":{},"sourceType":"module"}