{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { DISPLAY_RECORD_INT_PER_ELEMENT as e } from \"../definitions.js\";\nimport { getMeshSizeHint as t } from \"./heuristics.js\";\nimport s from \"../util/Writer.js\";\n\nclass r {\n  constructor(e, r, i) {\n    this._start = {\n      index: 0,\n      vertex: 0\n    };\n    const h = t(e, r, i),\n          c = r / 4;\n    this.geometryType = e, this._records = new s(Int32Array, h.recordBytes), this._indices = new s(Uint32Array, h.indexBytes), this._vertices = new s(Uint32Array, h.vertexBytes), this._metrics = new s(Float32Array, 0), this._strideInt = c;\n  }\n\n  serialize(e) {\n    const t = this._records.buffer(),\n          s = this._indices.buffer(),\n          r = this._vertices.buffer(),\n          i = this._metrics.length ? this._metrics.buffer() : null,\n          h = 4 * this._strideInt;\n\n    return e.push(t, s, r), {\n      stride: h,\n      records: t,\n      indices: s,\n      vertices: r,\n      metrics: i\n    };\n  }\n\n  get strideInt() {\n    return this._strideInt;\n  }\n\n  get recordCount() {\n    return this._records.length / e;\n  }\n\n  get vertexCount() {\n    return this._vertices.length / this._strideInt;\n  }\n\n  get indexCount() {\n    return this._indices.length;\n  }\n\n  get indexWriter() {\n    return this._indices;\n  }\n\n  get vertexWriter() {\n    return this._vertices;\n  }\n\n  get metricWriter() {\n    return this._metrics;\n  }\n\n  vertexEnsureSize(e) {\n    this._vertices.ensureSize(e);\n  }\n\n  indexEnsureSize(e) {\n    this._indices.ensureSize(e);\n  }\n\n  recordStart() {\n    this._start.index = this._indices.length, this._start.vertex = this._vertices.length;\n  }\n\n  recordEnd(e, t, s, r, i, h, c, n) {\n    this._records.push(e), this._records.push(t), this._records.push(s), this._records.push(r), this._records.push(i), this._records.push(h), this._records.push(c), this._records.writeF32(n);\n  }\n\n  writeIndex(e) {\n    this._indices.push(e);\n  }\n\n  writeVertex(e) {\n    this._vertices.push(e);\n  }\n\n  writeVertexF32(e) {\n    this._vertices.writeF32(e);\n  }\n\n  copyLastFrom(t, s, r) {\n    const i = t._records.length - e,\n          h = t._records.getValue(i),\n          c = t._records.getValue(i + 1),\n          n = t._records.getValue(i + 2),\n          _ = t._records.getValue(i + 4),\n          d = t._records.getValue(i + 6),\n          o = t._records.getValue(i + 7),\n          u = this._vertices.length,\n          l = (t._start.vertex - this._vertices.length) / this._strideInt,\n          g = this._indices.length,\n          p = this.vertexCount;\n\n    for (let e = t._start.index; e !== t._indices.length; e++) {\n      const s = t._indices.getValue(e);\n\n      this._indices.push(s - l);\n    }\n\n    for (let e = t._start.vertex; e !== t._vertices.length; e++) {\n      const s = t._vertices.getValue(e);\n\n      this._vertices.push(s);\n    }\n\n    for (let e = u; e <= this._vertices.length; e += this._strideInt) this._vertices.i1616Add(e, s, r);\n\n    this._records.push(h), this._records.push(c), this._records.push(n), this._records.push(g), this._records.push(_), this._records.push(p), this._records.push(d), this._records.push(o);\n  }\n\n}\n\nexport { r as VertexDataWriter };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/VertexDataWriter.js"],"names":["DISPLAY_RECORD_INT_PER_ELEMENT","e","getMeshSizeHint","t","s","r","constructor","i","_start","index","vertex","h","c","geometryType","_records","Int32Array","recordBytes","_indices","Uint32Array","indexBytes","_vertices","vertexBytes","_metrics","Float32Array","_strideInt","serialize","buffer","length","push","stride","records","indices","vertices","metrics","strideInt","recordCount","vertexCount","indexCount","indexWriter","vertexWriter","metricWriter","vertexEnsureSize","ensureSize","indexEnsureSize","recordStart","recordEnd","n","writeF32","writeIndex","writeVertex","writeVertexF32","copyLastFrom","getValue","_","d","o","u","l","g","p","i1616Add","VertexDataWriter"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{DISPLAY_RECORD_INT_PER_ELEMENT as e}from\"../definitions.js\";import{getMeshSizeHint as t}from\"./heuristics.js\";import s from\"../util/Writer.js\";class r{constructor(e,r,i){this._start={index:0,vertex:0};const h=t(e,r,i),c=r/4;this.geometryType=e,this._records=new s(Int32Array,h.recordBytes),this._indices=new s(Uint32Array,h.indexBytes),this._vertices=new s(Uint32Array,h.vertexBytes),this._metrics=new s(Float32Array,0),this._strideInt=c}serialize(e){const t=this._records.buffer(),s=this._indices.buffer(),r=this._vertices.buffer(),i=this._metrics.length?this._metrics.buffer():null,h=4*this._strideInt;return e.push(t,s,r),{stride:h,records:t,indices:s,vertices:r,metrics:i}}get strideInt(){return this._strideInt}get recordCount(){return this._records.length/e}get vertexCount(){return this._vertices.length/this._strideInt}get indexCount(){return this._indices.length}get indexWriter(){return this._indices}get vertexWriter(){return this._vertices}get metricWriter(){return this._metrics}vertexEnsureSize(e){this._vertices.ensureSize(e)}indexEnsureSize(e){this._indices.ensureSize(e)}recordStart(){this._start.index=this._indices.length,this._start.vertex=this._vertices.length}recordEnd(e,t,s,r,i,h,c,n){this._records.push(e),this._records.push(t),this._records.push(s),this._records.push(r),this._records.push(i),this._records.push(h),this._records.push(c),this._records.writeF32(n)}writeIndex(e){this._indices.push(e)}writeVertex(e){this._vertices.push(e)}writeVertexF32(e){this._vertices.writeF32(e)}copyLastFrom(t,s,r){const i=t._records.length-e,h=t._records.getValue(i),c=t._records.getValue(i+1),n=t._records.getValue(i+2),_=t._records.getValue(i+4),d=t._records.getValue(i+6),o=t._records.getValue(i+7),u=this._vertices.length,l=(t._start.vertex-this._vertices.length)/this._strideInt,g=this._indices.length,p=this.vertexCount;for(let e=t._start.index;e!==t._indices.length;e++){const s=t._indices.getValue(e);this._indices.push(s-l)}for(let e=t._start.vertex;e!==t._vertices.length;e++){const s=t._vertices.getValue(e);this._vertices.push(s)}for(let e=u;e<=this._vertices.length;e+=this._strideInt)this._vertices.i1616Add(e,s,r);this._records.push(h),this._records.push(c),this._records.push(n),this._records.push(g),this._records.push(_),this._records.push(p),this._records.push(d),this._records.push(o)}}export{r as VertexDataWriter};\n"]},"metadata":{},"sourceType":"module"}