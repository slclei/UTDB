{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../../core/maybe.js\";\nimport { WGLGeometryType as e } from \"../enums.js\";\nimport { createProgramDescriptor as a } from \"../Utils.js\";\nimport o from \"./WGLGeometryBrush.js\";\nimport { LineMaterialKey as n } from \"../materialKey/MaterialKey.js\";\nimport { DataType as i, PrimitiveType as r } from \"../../../../webgl/enums.js\";\n\nconst s = t => a(t.data, {\n  geometry: [{\n    location: 0,\n    name: \"a_pos\",\n    count: 2,\n    type: i.SHORT\n  }, {\n    location: 1,\n    name: \"a_id\",\n    count: 4,\n    type: i.UNSIGNED_BYTE\n  }, {\n    location: 2,\n    name: \"a_color\",\n    count: 4,\n    type: i.UNSIGNED_BYTE,\n    normalized: !0\n  }, {\n    location: 3,\n    name: \"a_offsetAndNormal\",\n    count: 4,\n    type: i.BYTE\n  }, {\n    location: 4,\n    name: \"a_accumulatedDistanceAndHalfWidth\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }, {\n    location: 5,\n    name: \"a_tlbr\",\n    count: 4,\n    type: i.UNSIGNED_SHORT\n  }, {\n    location: 6,\n    name: \"a_segmentDirection\",\n    count: 4,\n    type: i.BYTE\n  }, {\n    location: 7,\n    name: \"a_aux\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }, {\n    location: 8,\n    name: \"a_zoomRange\",\n    count: 2,\n    type: i.UNSIGNED_SHORT\n  }]\n});\n\nclass m extends o {\n  dispose() {}\n\n  getGeometryType() {\n    return e.LINE;\n  }\n\n  drawGeometry(e, a, o, m) {\n    const {\n      context: l,\n      painter: c,\n      rendererInfo: u,\n      displayLevel: p,\n      passOptions: y\n    } = e,\n          _ = n.load(o.materialKey);\n\n    let d = s(_),\n        f = r.TRIANGLES;\n    t(y) && \"hittest\" === y.type && (d = this._getTriangleDesc(o.materialKey, d), f = r.POINTS);\n    const {\n      attributes: E,\n      bufferLayouts: N\n    } = d,\n          g = c.materialManager.getMaterialProgram(e, _, \"materials/line\", E, m),\n          S = 1 / e.pixelRatio,\n          T = 0;\n    l.useProgram(g), this._setSharedUniforms(g, e, a), _.textureBinding && c.textureManager.bindTextures(l, g, _);\n    const U = 2 ** (p - a.key.level) / e.pixelRatio;\n    g.setUniform1f(\"u_zoomFactor\", U), g.setUniform1f(\"u_blur\", T + S), g.setUniform1f(\"u_antialiasing\", S), this._setSizeVVUniforms(_, g, u, a), this._setColorAndOpacityVVUniforms(_, g, u), l.setFaceCullingEnabled(!1);\n    const G = t(y) && \"hittest\" === y.type,\n          I = o.target.getVAO(l, N, E, G);\n    let x = o.indexCount,\n        D = o.indexFrom * Uint32Array.BYTES_PER_ELEMENT;\n    G && (x /= 3, D /= 3), l.bindVAO(I), l.drawElements(f, x, i.UNSIGNED_INT, D);\n  }\n\n}\n\nexport { m as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushLine.js"],"names":["isSome","t","WGLGeometryType","e","createProgramDescriptor","a","o","LineMaterialKey","n","DataType","i","PrimitiveType","r","s","data","geometry","location","name","count","type","SHORT","UNSIGNED_BYTE","normalized","BYTE","UNSIGNED_SHORT","m","dispose","getGeometryType","LINE","drawGeometry","context","l","painter","c","rendererInfo","u","displayLevel","p","passOptions","y","_","load","materialKey","d","f","TRIANGLES","_getTriangleDesc","POINTS","attributes","E","bufferLayouts","N","g","materialManager","getMaterialProgram","S","pixelRatio","T","useProgram","_setSharedUniforms","textureBinding","textureManager","bindTextures","U","key","level","setUniform1f","_setSizeVVUniforms","_setColorAndOpacityVVUniforms","setFaceCullingEnabled","G","I","target","getVAO","x","indexCount","D","indexFrom","Uint32Array","BYTES_PER_ELEMENT","bindVAO","drawElements","UNSIGNED_INT","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../core/maybe.js\";import{WGLGeometryType as e}from\"../enums.js\";import{createProgramDescriptor as a}from\"../Utils.js\";import o from\"./WGLGeometryBrush.js\";import{LineMaterialKey as n}from\"../materialKey/MaterialKey.js\";import{DataType as i,PrimitiveType as r}from\"../../../../webgl/enums.js\";const s=t=>a(t.data,{geometry:[{location:0,name:\"a_pos\",count:2,type:i.SHORT},{location:1,name:\"a_id\",count:4,type:i.UNSIGNED_BYTE},{location:2,name:\"a_color\",count:4,type:i.UNSIGNED_BYTE,normalized:!0},{location:3,name:\"a_offsetAndNormal\",count:4,type:i.BYTE},{location:4,name:\"a_accumulatedDistanceAndHalfWidth\",count:2,type:i.UNSIGNED_SHORT},{location:5,name:\"a_tlbr\",count:4,type:i.UNSIGNED_SHORT},{location:6,name:\"a_segmentDirection\",count:4,type:i.BYTE},{location:7,name:\"a_aux\",count:2,type:i.UNSIGNED_SHORT},{location:8,name:\"a_zoomRange\",count:2,type:i.UNSIGNED_SHORT}]});class m extends o{dispose(){}getGeometryType(){return e.LINE}drawGeometry(e,a,o,m){const{context:l,painter:c,rendererInfo:u,displayLevel:p,passOptions:y}=e,_=n.load(o.materialKey);let d=s(_),f=r.TRIANGLES;t(y)&&\"hittest\"===y.type&&(d=this._getTriangleDesc(o.materialKey,d),f=r.POINTS);const{attributes:E,bufferLayouts:N}=d,g=c.materialManager.getMaterialProgram(e,_,\"materials/line\",E,m),S=1/e.pixelRatio,T=0;l.useProgram(g),this._setSharedUniforms(g,e,a),_.textureBinding&&c.textureManager.bindTextures(l,g,_);const U=2**(p-a.key.level)/e.pixelRatio;g.setUniform1f(\"u_zoomFactor\",U),g.setUniform1f(\"u_blur\",T+S),g.setUniform1f(\"u_antialiasing\",S),this._setSizeVVUniforms(_,g,u,a),this._setColorAndOpacityVVUniforms(_,g,u),l.setFaceCullingEnabled(!1);const G=t(y)&&\"hittest\"===y.type,I=o.target.getVAO(l,N,E,G);let x=o.indexCount,D=o.indexFrom*Uint32Array.BYTES_PER_ELEMENT;G&&(x/=3,D/=3),l.bindVAO(I),l.drawElements(f,x,i.UNSIGNED_INT,D)}}export{m as default};\n"]},"metadata":{},"sourceType":"module"}