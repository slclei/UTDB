{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../../../core/maybe.js\";\nimport { WGLGeometryType as e } from \"../enums.js\";\nimport { createProgramDescriptor as o } from \"../Utils.js\";\nimport a from \"./WGLGeometryBrush.js\";\nimport { TextMaterialKey as r } from \"../materialKey/MaterialKey.js\";\nimport { DataType as n, PrimitiveType as i } from \"../../../../webgl/enums.js\";\n\nconst s = t => o(t.data, {\n  geometry: [{\n    location: 0,\n    name: \"a_pos\",\n    count: 2,\n    type: n.SHORT\n  }, {\n    location: 1,\n    name: \"a_id\",\n    count: 4,\n    type: n.UNSIGNED_BYTE\n  }, {\n    location: 2,\n    name: \"a_color\",\n    count: 4,\n    type: n.UNSIGNED_BYTE,\n    normalized: !0\n  }, {\n    location: 3,\n    name: \"a_haloColor\",\n    count: 4,\n    type: n.UNSIGNED_BYTE,\n    normalized: !0\n  }, {\n    location: 4,\n    name: \"a_texFontSize\",\n    count: 4,\n    type: n.UNSIGNED_BYTE\n  }, {\n    location: 5,\n    name: \"a_aux\",\n    count: 4,\n    type: n.BYTE\n  }, {\n    location: 6,\n    name: \"a_zoomRange\",\n    count: 2,\n    type: n.UNSIGNED_SHORT\n  }, {\n    location: 7,\n    name: \"a_vertexOffset\",\n    count: 2,\n    type: n.SHORT\n  }, {\n    location: 8,\n    name: \"a_texCoords\",\n    count: 2,\n    type: n.UNSIGNED_SHORT\n  }]\n});\n\nclass m extends a {\n  dispose() {}\n\n  getGeometryType() {\n    return e.TEXT;\n  }\n\n  drawGeometry(e, o, a, m) {\n    const {\n      context: l,\n      painter: p,\n      rendererInfo: u,\n      state: _,\n      passOptions: c\n    } = e,\n          y = r.load(a.materialKey),\n          {\n      bufferLayouts: d,\n      attributes: f\n    } = s(y),\n          E = p.materialManager.getMaterialProgram(e, y, \"materials/text\", f, m);\n    l.useProgram(E);\n    let N = i.TRIANGLES;\n    t(c) && \"hittest\" === c.type && (N = i.POINTS), this._setSharedUniforms(E, e, o), p.textureManager.bindTextures(l, E, y), E.setUniformMatrix3fv(\"u_displayMat3\", _.displayMat3), E.setUniformMatrix3fv(\"u_displayViewMat3\", _.displayViewMat3), this._setSizeVVUniforms(y, E, u, o), this._setColorAndOpacityVVUniforms(y, E, u), this._setRotationVVUniforms(y, E, u), E.setUniform1f(\"u_isHalo\", 1);\n    const T = a.target.getVAO(l, d, f),\n          S = a.indexFrom * Uint32Array.BYTES_PER_ELEMENT;\n    l.bindVAO(T), l.drawElements(i.TRIANGLES, a.indexCount, n.UNSIGNED_INT, S), E.setUniform1f(\"u_isHalo\", 0), l.drawElements(N, a.indexCount, n.UNSIGNED_INT, S);\n  }\n\n}\n\nexport { m as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLGeometryBrushText.js"],"names":["isSome","t","WGLGeometryType","e","createProgramDescriptor","o","a","TextMaterialKey","r","DataType","n","PrimitiveType","i","s","data","geometry","location","name","count","type","SHORT","UNSIGNED_BYTE","normalized","BYTE","UNSIGNED_SHORT","m","dispose","getGeometryType","TEXT","drawGeometry","context","l","painter","p","rendererInfo","u","state","_","passOptions","c","y","load","materialKey","bufferLayouts","d","attributes","f","E","materialManager","getMaterialProgram","useProgram","N","TRIANGLES","POINTS","_setSharedUniforms","textureManager","bindTextures","setUniformMatrix3fv","displayMat3","displayViewMat3","_setSizeVVUniforms","_setColorAndOpacityVVUniforms","_setRotationVVUniforms","setUniform1f","T","target","getVAO","S","indexFrom","Uint32Array","BYTES_PER_ELEMENT","bindVAO","drawElements","indexCount","UNSIGNED_INT","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../../core/maybe.js\";import{WGLGeometryType as e}from\"../enums.js\";import{createProgramDescriptor as o}from\"../Utils.js\";import a from\"./WGLGeometryBrush.js\";import{TextMaterialKey as r}from\"../materialKey/MaterialKey.js\";import{DataType as n,PrimitiveType as i}from\"../../../../webgl/enums.js\";const s=t=>o(t.data,{geometry:[{location:0,name:\"a_pos\",count:2,type:n.SHORT},{location:1,name:\"a_id\",count:4,type:n.UNSIGNED_BYTE},{location:2,name:\"a_color\",count:4,type:n.UNSIGNED_BYTE,normalized:!0},{location:3,name:\"a_haloColor\",count:4,type:n.UNSIGNED_BYTE,normalized:!0},{location:4,name:\"a_texFontSize\",count:4,type:n.UNSIGNED_BYTE},{location:5,name:\"a_aux\",count:4,type:n.BYTE},{location:6,name:\"a_zoomRange\",count:2,type:n.UNSIGNED_SHORT},{location:7,name:\"a_vertexOffset\",count:2,type:n.SHORT},{location:8,name:\"a_texCoords\",count:2,type:n.UNSIGNED_SHORT}]});class m extends a{dispose(){}getGeometryType(){return e.TEXT}drawGeometry(e,o,a,m){const{context:l,painter:p,rendererInfo:u,state:_,passOptions:c}=e,y=r.load(a.materialKey),{bufferLayouts:d,attributes:f}=s(y),E=p.materialManager.getMaterialProgram(e,y,\"materials/text\",f,m);l.useProgram(E);let N=i.TRIANGLES;t(c)&&\"hittest\"===c.type&&(N=i.POINTS),this._setSharedUniforms(E,e,o),p.textureManager.bindTextures(l,E,y),E.setUniformMatrix3fv(\"u_displayMat3\",_.displayMat3),E.setUniformMatrix3fv(\"u_displayViewMat3\",_.displayViewMat3),this._setSizeVVUniforms(y,E,u,o),this._setColorAndOpacityVVUniforms(y,E,u),this._setRotationVVUniforms(y,E,u),E.setUniform1f(\"u_isHalo\",1);const T=a.target.getVAO(l,d,f),S=a.indexFrom*Uint32Array.BYTES_PER_ELEMENT;l.bindVAO(T),l.drawElements(i.TRIANGLES,a.indexCount,n.UNSIGNED_INT,S),E.setUniform1f(\"u_isHalo\",0),l.drawElements(N,a.indexCount,n.UNSIGNED_INT,S)}}export{m as default};\n"]},"metadata":{},"sourceType":"module"}