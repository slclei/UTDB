{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Accessor.js\";\nimport { property as o } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as s } from \"../../../core/accessorSupport/decorators/subclass.js\";\nvar i;\nlet a = i = class extends t {\n  constructor(e) {\n    super(e), this._lodByScale = {}, this._scales = [], this.effectiveLODs = null, this.effectiveMinZoom = -1, this.effectiveMaxZoom = -1, this.effectiveMinScale = 0, this.effectiveMaxScale = 0, this.lods = null, this.minZoom = -1, this.maxZoom = -1, this.minScale = 0, this.maxScale = 0, this.snapToZoom = !0;\n  }\n\n  initialize() {\n    let e,\n        {\n      lods: t,\n      minScale: o,\n      maxScale: s,\n      minZoom: i,\n      maxZoom: a\n    } = this,\n        c = -1,\n        r = -1,\n        l = !1,\n        n = !1;\n    if (0 !== o && 0 !== s && o < s && ([o, s] = [s, o]), !t || !t.length) return this._set(\"effectiveMinScale\", o), void this._set(\"effectiveMaxScale\", s);\n    t = t.map(e => e.clone()), t.sort((e, t) => t.scale - e.scale), t.forEach((e, t) => e.level = t);\n\n    for (const f of t) !l && o > 0 && o >= f.scale && (c = f.level, l = !0), !n && s > 0 && s >= f.scale && (r = e ? e.level : -1, n = !0), e = f;\n\n    -1 === i && (i = 0 === o ? 0 : c), -1 === a && (a = 0 === s ? t.length - 1 : r), i = Math.max(i, 0), i = Math.min(i, t.length - 1), a = Math.max(a, 0), a = Math.min(a, t.length - 1), i > a && ([i, a] = [a, i]), o = t[i].scale, s = t[a].scale, t.splice(0, i), t.splice(a - i + 1, t.length), t.forEach((e, t) => {\n      this._lodByScale[e.scale] = e, this._scales[t] = e.scale;\n    }), this._set(\"effectiveLODs\", t), this._set(\"effectiveMinZoom\", i), this._set(\"effectiveMaxZoom\", a), this._set(\"effectiveMinScale\", o), this._set(\"effectiveMaxScale\", s);\n  }\n\n  constrain(e, t) {\n    if (t && e.scale === t.scale) return e;\n    const o = this.effectiveMinScale,\n          s = this.effectiveMaxScale,\n          i = e.targetGeometry,\n          a = t && t.targetGeometry,\n          c = 0 !== s && e.scale < s,\n          r = 0 !== o && e.scale > o;\n\n    if (c || r) {\n      const c = r ? o : s;\n\n      if (a) {\n        const o = (c - t.scale) / (e.scale - t.scale);\n        i.x = a.x + (i.x - a.x) * o, i.y = a.y + (i.y - a.y) * o;\n      }\n\n      e.scale = c;\n    }\n\n    return this.snapToZoom && this.effectiveLODs && (e.scale = this._getClosestScale(e.scale)), e;\n  }\n\n  fit(e) {\n    if (!this.effectiveLODs || !this.snapToZoom) return this.constrain(e, null);\n    const t = this.scaleToZoom(e.scale),\n          o = Math.abs(t - Math.floor(t));\n    return e.scale = this.zoomToScale(o > .99 ? Math.round(t) : Math.floor(t)), e;\n  }\n\n  zoomToScale(e) {\n    if (!this.effectiveLODs) return 0;\n    e -= this.effectiveMinZoom, e = Math.max(0, e);\n    const t = this._scales;\n    if (e <= 0) return t[0];\n    if (e >= t.length) return t[t.length - 1];\n    const o = Math.round(e - .5),\n          s = Math.round(e);\n    return t[s] + (s - e) * (t[o] - t[s]);\n  }\n\n  scaleToZoom(e) {\n    if (!this.effectiveLODs) return -1;\n    const t = this._scales;\n    let o, s;\n    if (e >= t[0]) return this.effectiveMinZoom;\n    if (e <= t[t.length - 1]) return this.effectiveMaxZoom;\n\n    for (let i = 0; i < t.length - 1; i++) {\n      if (o = t[i], s = t[i + 1], s === e) {\n        return i + this.effectiveMinZoom + 1;\n      }\n\n      if (o > e && s < e) {\n        return i + this.effectiveMinZoom + 1 - (e - s) / (o - s);\n      }\n    }\n  }\n\n  snapToClosestScale(e) {\n    if (!this.effectiveLODs) return e;\n    const t = this.scaleToZoom(e);\n    return this.zoomToScale(Math.round(t));\n  }\n\n  snapToNextScale(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .5;\n    if (!this.effectiveLODs) return e * t;\n    const o = Math.round(this.scaleToZoom(e));\n    return this.zoomToScale(o + 1);\n  }\n\n  snapToPreviousScale(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n    if (!this.effectiveLODs) return e * t;\n    const o = Math.round(this.scaleToZoom(e));\n    return this.zoomToScale(o - 1);\n  }\n\n  clone() {\n    return new i({\n      lods: this.lods,\n      minZoom: this.minZoom,\n      maxZoom: this.maxZoom,\n      minScale: this.minScale,\n      maxScale: this.maxScale\n    });\n  }\n\n  _getClosestScale(e) {\n    return this._lodByScale[e] || (e = this._scales.reduce((t, o) => Math.abs(o - e) <= Math.abs(t - e) ? o : t, this._scales[0])), this._lodByScale[e].scale;\n  }\n\n};\ne([o({\n  readOnly: !0\n})], a.prototype, \"effectiveLODs\", void 0), e([o({\n  readOnly: !0\n})], a.prototype, \"effectiveMinZoom\", void 0), e([o({\n  readOnly: !0\n})], a.prototype, \"effectiveMaxZoom\", void 0), e([o({\n  readOnly: !0\n})], a.prototype, \"effectiveMinScale\", void 0), e([o({\n  readOnly: !0\n})], a.prototype, \"effectiveMaxScale\", void 0), e([o()], a.prototype, \"lods\", void 0), e([o()], a.prototype, \"minZoom\", void 0), e([o()], a.prototype, \"maxZoom\", void 0), e([o()], a.prototype, \"minScale\", void 0), e([o()], a.prototype, \"maxScale\", void 0), e([o()], a.prototype, \"snapToZoom\", void 0), a = i = e([s(\"esri.views.2d.constraints.ZoomConstraint\")], a);\nconst c = a;\nexport { c as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/constraints/ZoomConstraint.js"],"names":["_","e","t","property","o","subclass","s","i","a","constructor","_lodByScale","_scales","effectiveLODs","effectiveMinZoom","effectiveMaxZoom","effectiveMinScale","effectiveMaxScale","lods","minZoom","maxZoom","minScale","maxScale","snapToZoom","initialize","c","r","l","n","length","_set","map","clone","sort","scale","forEach","level","f","Math","max","min","splice","constrain","targetGeometry","x","y","_getClosestScale","fit","scaleToZoom","abs","floor","zoomToScale","round","snapToClosestScale","snapToNextScale","snapToPreviousScale","reduce","readOnly","prototype","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";var i;let a=i=class extends t{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:o,maxScale:s,minZoom:i,maxZoom:a}=this,c=-1,r=-1,l=!1,n=!1;if(0!==o&&0!==s&&o<s&&([o,s]=[s,o]),!t||!t.length)return this._set(\"effectiveMinScale\",o),void this._set(\"effectiveMaxScale\",s);t=t.map((e=>e.clone())),t.sort(((e,t)=>t.scale-e.scale)),t.forEach(((e,t)=>e.level=t));for(const f of t)!l&&o>0&&o>=f.scale&&(c=f.level,l=!0),!n&&s>0&&s>=f.scale&&(r=e?e.level:-1,n=!0),e=f;-1===i&&(i=0===o?0:c),-1===a&&(a=0===s?t.length-1:r),i=Math.max(i,0),i=Math.min(i,t.length-1),a=Math.max(a,0),a=Math.min(a,t.length-1),i>a&&([i,a]=[a,i]),o=t[i].scale,s=t[a].scale,t.splice(0,i),t.splice(a-i+1,t.length),t.forEach(((e,t)=>{this._lodByScale[e.scale]=e,this._scales[t]=e.scale})),this._set(\"effectiveLODs\",t),this._set(\"effectiveMinZoom\",i),this._set(\"effectiveMaxZoom\",a),this._set(\"effectiveMinScale\",o),this._set(\"effectiveMaxScale\",s)}constrain(e,t){if(t&&e.scale===t.scale)return e;const o=this.effectiveMinScale,s=this.effectiveMaxScale,i=e.targetGeometry,a=t&&t.targetGeometry,c=0!==s&&e.scale<s,r=0!==o&&e.scale>o;if(c||r){const c=r?o:s;if(a){const o=(c-t.scale)/(e.scale-t.scale);i.x=a.x+(i.x-a.x)*o,i.y=a.y+(i.y-a.y)*o}e.scale=c}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),o=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(o>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const o=Math.round(e-.5),s=Math.round(e);return t[s]+(s-e)*(t[o]-t[s])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let o,s;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let i=0;i<t.length-1;i++){if(o=t[i],s=t[i+1],s===e){return i+this.effectiveMinZoom+1}if(o>e&&s<e){return i+this.effectiveMinZoom+1-(e-s)/(o-s)}}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const o=Math.round(this.scaleToZoom(e));return this.zoomToScale(o-1)}clone(){return new i({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce(((t,o)=>Math.abs(o-e)<=Math.abs(t-e)?o:t),this._scales[0])),this._lodByScale[e].scale}};e([o({readOnly:!0})],a.prototype,\"effectiveLODs\",void 0),e([o({readOnly:!0})],a.prototype,\"effectiveMinZoom\",void 0),e([o({readOnly:!0})],a.prototype,\"effectiveMaxZoom\",void 0),e([o({readOnly:!0})],a.prototype,\"effectiveMinScale\",void 0),e([o({readOnly:!0})],a.prototype,\"effectiveMaxScale\",void 0),e([o()],a.prototype,\"lods\",void 0),e([o()],a.prototype,\"minZoom\",void 0),e([o()],a.prototype,\"maxZoom\",void 0),e([o()],a.prototype,\"minScale\",void 0),e([o()],a.prototype,\"maxScale\",void 0),e([o()],a.prototype,\"snapToZoom\",void 0),a=i=e([s(\"esri.views.2d.constraints.ZoomConstraint\")],a);const c=a;export{c as default};\n"]},"metadata":{},"sourceType":"module"}