{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { neverReached as e } from \"../../../core/compilerUtils.js\";\nimport { isNone as t } from \"../../../core/maybe.js\";\nimport { getGeometryZScaler as r } from \"../../../geometry/support/zscale.js\";\nimport { unquantizeOptimizedGeometry as s, convertToGeometry as o } from \"../../../layers/graphics/featureConversionUtils.js\";\n\nfunction i(e, t) {\n  return t;\n}\n\nfunction n(e, t, r, s) {\n  switch (r) {\n    case 0:\n      return d(e, t + s, 0);\n\n    case 1:\n      return \"lowerLeft\" === e.originPosition ? d(e, t + s, 1) : l(e, t + s, 1);\n  }\n}\n\nfunction a(e, t, r, s) {\n  return 2 === r ? d(e, t, 2) : n(e, t, r, s);\n}\n\nfunction h(e, t, r, s) {\n  return 2 === r ? d(e, t, 3) : n(e, t, r, s);\n}\n\nfunction u(e, t, r, s) {\n  return 3 === r ? d(e, t, 3) : a(e, t, r, s);\n}\n\nfunction d(_ref, r, s) {\n  let {\n    translate: e,\n    scale: t\n  } = _ref;\n  return e[s] + r * t[s];\n}\n\nfunction l(_ref2, r, s) {\n  let {\n    translate: e,\n    scale: t\n  } = _ref2;\n  return e[s] - r * t[s];\n}\n\nclass c {\n  constructor(e) {\n    this.options = e, this.geometryTypes = [\"esriGeometryPoint\", \"esriGeometryMultipoint\", \"esriGeometryPolyline\", \"esriGeometryPolygon\"], this.previousCoordinate = [0, 0], this.transform = null, this.applyTransform = i, this.lengths = [], this.currentLengthIndex = 0, this.toAddInCurrentPath = 0, this.vertexDimension = 0, this.coordinateBuffer = null, this.coordinateBufferPtr = 0, this._attributesConstructor = function () {};\n  }\n\n  createFeatureResult() {\n    return {\n      fields: [],\n      features: []\n    };\n  }\n\n  finishFeatureResult(e) {\n    if (this.options.applyTransform && (e.transform = null), this._attributesConstructor = function () {}, this.coordinateBuffer = null, this.lengths.length = 0, !e.hasZ) return;\n    const s = r(e.geometryType, this.options.sourceSpatialReference, e.spatialReference);\n    if (!t(s)) for (const t of e.features) s(t.geometry);\n  }\n\n  createSpatialReference() {\n    return {};\n  }\n\n  addField(e, t) {\n    e.fields.push(t);\n    const r = e.fields.map(e => e.name);\n\n    this._attributesConstructor = function () {\n      for (const e of r) this[e] = null;\n    };\n  }\n\n  addFeature(e, t) {\n    e.features.push(t);\n  }\n\n  prepareFeatures(t) {\n    switch (this.transform = t.transform, this.options.applyTransform && t.transform && (this.applyTransform = this._deriveApplyTransform(t)), this.vertexDimension = 2, t.hasZ && this.vertexDimension++, t.hasM && this.vertexDimension++, t.geometryType) {\n      case \"esriGeometryPoint\":\n        this.addCoordinate = (e, t, r) => this.addCoordinatePoint(e, t, r), this.createGeometry = e => this.createPointGeometry(e);\n        break;\n\n      case \"esriGeometryPolygon\":\n        this.addCoordinate = (e, t, r) => this._addCoordinatePolygon(e, t, r), this.createGeometry = e => this._createPolygonGeometry(e);\n        break;\n\n      case \"esriGeometryPolyline\":\n        this.addCoordinate = (e, t, r) => this._addCoordinatePolyline(e, t, r), this.createGeometry = e => this._createPolylineGeometry(e);\n        break;\n\n      case \"esriGeometryMultipoint\":\n        this.addCoordinate = (e, t, r) => this._addCoordinateMultipoint(e, t, r), this.createGeometry = e => this._createMultipointGeometry(e);\n        break;\n\n      default:\n        e(t.geometryType);\n    }\n  }\n\n  createFeature() {\n    return this.lengths.length = 0, this.currentLengthIndex = 0, this.previousCoordinate[0] = 0, this.previousCoordinate[1] = 0, this.coordinateBuffer = null, this.coordinateBufferPtr = 0, {\n      attributes: new this._attributesConstructor()\n    };\n  }\n\n  allocateCoordinates() {}\n\n  addLength(e, t, r) {\n    0 === this.lengths.length && (this.toAddInCurrentPath = t), this.lengths.push(t);\n  }\n\n  addQueryGeometry(e, t) {\n    const {\n      queryGeometry: r,\n      queryGeometryType: i\n    } = t,\n          n = s(r.clone(), r, !1, !1, this.transform),\n          a = o(n, i, !1, !1);\n    e.queryGeometryType = i, e.queryGeometry = { ...a\n    };\n  }\n\n  createPointGeometry(e) {\n    const t = {\n      x: 0,\n      y: 0,\n      spatialReference: e.spatialReference\n    };\n    return e.hasZ && (t.z = 0), e.hasM && (t.m = 0), t;\n  }\n\n  addCoordinatePoint(e, t, r) {\n    switch (t = this.applyTransform(this.transform, t, r, 0), r) {\n      case 0:\n        e.x = t;\n        break;\n\n      case 1:\n        e.y = t;\n        break;\n\n      case 2:\n        \"z\" in e ? e.z = t : e.m = t;\n        break;\n\n      case 3:\n        e.m = t;\n    }\n  }\n\n  _transformPathLikeValue(e, t) {\n    let r = 0;\n    return t <= 1 && (r = this.previousCoordinate[t], this.previousCoordinate[t] += e), this.applyTransform(this.transform, e, t, r);\n  }\n\n  _addCoordinatePolyline(e, t, r) {\n    this._dehydratedAddPointsCoordinate(e.paths, t, r);\n  }\n\n  _addCoordinatePolygon(e, t, r) {\n    this._dehydratedAddPointsCoordinate(e.rings, t, r);\n  }\n\n  _addCoordinateMultipoint(e, t, r) {\n    0 === r && e.points.push([]);\n\n    const s = this._transformPathLikeValue(t, r);\n\n    e.points[e.points.length - 1].push(s);\n  }\n\n  _createPolygonGeometry(e) {\n    return {\n      rings: [[]],\n      spatialReference: e.spatialReference,\n      hasZ: !!e.hasZ,\n      hasM: !!e.hasM\n    };\n  }\n\n  _createPolylineGeometry(e) {\n    return {\n      paths: [[]],\n      spatialReference: e.spatialReference,\n      hasZ: !!e.hasZ,\n      hasM: !!e.hasM\n    };\n  }\n\n  _createMultipointGeometry(e) {\n    return {\n      points: [],\n      spatialReference: e.spatialReference,\n      hasZ: !!e.hasZ,\n      hasM: !!e.hasM\n    };\n  }\n\n  _dehydratedAddPointsCoordinate(e, t, r) {\n    0 === r && 0 == this.toAddInCurrentPath-- && (e.push([]), this.toAddInCurrentPath = this.lengths[++this.currentLengthIndex] - 1, this.previousCoordinate[0] = 0, this.previousCoordinate[1] = 0);\n\n    const s = this._transformPathLikeValue(t, r),\n          o = e[e.length - 1];\n\n    0 === r && (this.coordinateBufferPtr = 0, this.coordinateBuffer = new Array(this.vertexDimension), o.push(this.coordinateBuffer)), this.coordinateBuffer[this.coordinateBufferPtr++] = s;\n  }\n\n  _deriveApplyTransform(e) {\n    const {\n      hasZ: t,\n      hasM: r\n    } = e;\n    return t && r ? u : t ? a : r ? h : n;\n  }\n\n}\n\nexport { c as JSONFeatureSetParserContext };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/rest/query/operations/pbfJSONFeatureSet.js"],"names":["neverReached","e","isNone","t","getGeometryZScaler","r","unquantizeOptimizedGeometry","s","convertToGeometry","o","i","n","d","originPosition","l","a","h","u","translate","scale","c","constructor","options","geometryTypes","previousCoordinate","transform","applyTransform","lengths","currentLengthIndex","toAddInCurrentPath","vertexDimension","coordinateBuffer","coordinateBufferPtr","_attributesConstructor","createFeatureResult","fields","features","finishFeatureResult","length","hasZ","geometryType","sourceSpatialReference","spatialReference","geometry","createSpatialReference","addField","push","map","name","addFeature","prepareFeatures","_deriveApplyTransform","hasM","addCoordinate","addCoordinatePoint","createGeometry","createPointGeometry","_addCoordinatePolygon","_createPolygonGeometry","_addCoordinatePolyline","_createPolylineGeometry","_addCoordinateMultipoint","_createMultipointGeometry","createFeature","attributes","allocateCoordinates","addLength","addQueryGeometry","queryGeometry","queryGeometryType","clone","x","y","z","m","_transformPathLikeValue","_dehydratedAddPointsCoordinate","paths","rings","points","Array","JSONFeatureSetParserContext"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../core/compilerUtils.js\";import{isNone as t}from\"../../../core/maybe.js\";import{getGeometryZScaler as r}from\"../../../geometry/support/zscale.js\";import{unquantizeOptimizedGeometry as s,convertToGeometry as o}from\"../../../layers/graphics/featureConversionUtils.js\";function i(e,t){return t}function n(e,t,r,s){switch(r){case 0:return d(e,t+s,0);case 1:return\"lowerLeft\"===e.originPosition?d(e,t+s,1):l(e,t+s,1)}}function a(e,t,r,s){return 2===r?d(e,t,2):n(e,t,r,s)}function h(e,t,r,s){return 2===r?d(e,t,3):n(e,t,r,s)}function u(e,t,r,s){return 3===r?d(e,t,3):a(e,t,r,s)}function d({translate:e,scale:t},r,s){return e[s]+r*t[s]}function l({translate:e,scale:t},r,s){return e[s]-r*t[s]}class c{constructor(e){this.options=e,this.geometryTypes=[\"esriGeometryPoint\",\"esriGeometryMultipoint\",\"esriGeometryPolyline\",\"esriGeometryPolygon\"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=i,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this._attributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this.options.applyTransform&&(e.transform=null),this._attributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!e.hasZ)return;const s=r(e.geometryType,this.options.sourceSpatialReference,e.spatialReference);if(!t(s))for(const t of e.features)s(t.geometry)}createSpatialReference(){return{}}addField(e,t){e.fields.push(t);const r=e.fields.map((e=>e.name));this._attributesConstructor=function(){for(const e of r)this[e]=null}}addFeature(e,t){e.features.push(t)}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this._deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case\"esriGeometryPoint\":this.addCoordinate=(e,t,r)=>this.addCoordinatePoint(e,t,r),this.createGeometry=e=>this.createPointGeometry(e);break;case\"esriGeometryPolygon\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolygon(e,t,r),this.createGeometry=e=>this._createPolygonGeometry(e);break;case\"esriGeometryPolyline\":this.addCoordinate=(e,t,r)=>this._addCoordinatePolyline(e,t,r),this.createGeometry=e=>this._createPolylineGeometry(e);break;case\"esriGeometryMultipoint\":this.addCoordinate=(e,t,r)=>this._addCoordinateMultipoint(e,t,r),this.createGeometry=e=>this._createMultipointGeometry(e);break;default:e(t.geometryType)}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)}addQueryGeometry(e,t){const{queryGeometry:r,queryGeometryType:i}=t,n=s(r.clone(),r,!1,!1,this.transform),a=o(n,i,!1,!1);e.queryGeometryType=i,e.queryGeometry={...a}}createPointGeometry(e){const t={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(t.z=0),e.hasM&&(t.m=0),t}addCoordinatePoint(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:\"z\"in e?e.z=t:e.m=t;break;case 3:e.m=t}}_transformPathLikeValue(e,t){let r=0;return t<=1&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)}_addCoordinatePolyline(e,t,r){this._dehydratedAddPointsCoordinate(e.paths,t,r)}_addCoordinatePolygon(e,t,r){this._dehydratedAddPointsCoordinate(e.rings,t,r)}_addCoordinateMultipoint(e,t,r){0===r&&e.points.push([]);const s=this._transformPathLikeValue(t,r);e.points[e.points.length-1].push(s)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,t,r){0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const s=this._transformPathLikeValue(t,r),o=e[e.length-1];0===r&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),o.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=s}_deriveApplyTransform(e){const{hasZ:t,hasM:r}=e;return t&&r?u:t?a:r?h:n}}export{c as JSONFeatureSetParserContext};\n"]},"metadata":{},"sourceType":"module"}