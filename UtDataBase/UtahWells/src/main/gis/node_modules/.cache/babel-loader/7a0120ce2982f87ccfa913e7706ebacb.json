{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport i from \"../../../../Viewpoint.js\";\nimport o from \"../../../../core/Accessor.js\";\nimport { when as m } from \"../../../../core/reactiveUtils.js\";\nimport { createScreenPointArray as s } from \"../../../../core/screenUtils.js\";\nimport { property as e } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport { a as r } from \"../../../../chunks/vec3.js\";\nimport { c as a, f as p } from \"../../../../chunks/vec3f64.js\";\nimport { translateBy as h } from \"../../viewpointUtils.js\";\nimport { PanPlanarMomentumEstimator as u } from \"../../../navigation/PanPlanarMomentumEstimator.js\";\nimport c from \"../../../../geometry/Point.js\";\nlet d = class extends o {\n  constructor(t) {\n    super(t), this.animationTime = 0, this.momentumEstimator = new u(500, 6, .92), this.momentum = null, this.tmpMomentum = a(), this.momentumFinished = !1, this.viewpoint = new i({\n      targetGeometry: new c(),\n      scale: 0,\n      rotation: 0\n    }), m(() => this.momentumFinished, () => this.navigation.stop());\n  }\n\n  begin(t, i) {\n    this.navigation.begin(), this.momentumEstimator.reset(), this.addToEstimator(i), this.previousDrag = i;\n  }\n\n  update(t, i) {\n    this.addToEstimator(i);\n    let o = i.center.x,\n        m = i.center.y;\n    const s = this.previousDrag;\n    o = s ? s.center.x - o : -o, m = s ? m - s.center.y : m, t.viewpoint = h(this.viewpoint, t.viewpoint, [o || 0, m || 0]), this.previousDrag = i;\n  }\n\n  end(t, i) {\n    this.addToEstimator(i);\n    const o = t.navigation.momentumEnabled;\n    this.momentum = o ? this.momentumEstimator.evaluateMomentum() : null, this.animationTime = 0, this.momentum && this.onAnimationUpdate(t), this.previousDrag = null, this.navigation.end();\n  }\n\n  addToEstimator(t) {\n    const i = t.center.x,\n          o = t.center.y,\n          m = s(-i, o),\n          e = p(-i, o, 0);\n    this.momentumEstimator.add(m, e, .001 * t.timestamp);\n  }\n\n  onAnimationUpdate(t) {\n    this.navigation.animationManager.animateContinous(t.viewpoint, (i, o) => {\n      this.momentumFinished = !this.momentum || this.momentum.isFinished(this.animationTime);\n      const m = .001 * o;\n\n      if (!this.momentumFinished) {\n        const o = this.momentum.valueDelta(this.animationTime, m);\n        r(this.tmpMomentum, this.momentum.direction, o), h(i, i, this.tmpMomentum), t.constraints.constrainByGeometry(i);\n      }\n\n      this.animationTime += m;\n    });\n  }\n\n  stopMomentumNavigation() {\n    this.momentum && (this.momentumEstimator.reset(), this.momentum = null, this.navigation.stop());\n  }\n\n};\nt([e()], d.prototype, \"momentumFinished\", void 0), t([e()], d.prototype, \"viewpoint\", void 0), t([e()], d.prototype, \"navigation\", void 0), d = t([n(\"esri.views.2d.navigation.actions.Pan\")], d);\nconst v = d;\nexport { v as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/navigation/actions/Pan.js"],"names":["_","t","i","o","when","m","createScreenPointArray","s","property","e","subclass","n","a","r","c","f","p","translateBy","h","PanPlanarMomentumEstimator","u","d","constructor","animationTime","momentumEstimator","momentum","tmpMomentum","momentumFinished","viewpoint","targetGeometry","scale","rotation","navigation","stop","begin","reset","addToEstimator","previousDrag","update","center","x","y","end","momentumEnabled","evaluateMomentum","onAnimationUpdate","add","timestamp","animationManager","animateContinous","isFinished","valueDelta","direction","constraints","constrainByGeometry","stopMomentumNavigation","prototype","v","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import i from\"../../../../Viewpoint.js\";import o from\"../../../../core/Accessor.js\";import{when as m}from\"../../../../core/reactiveUtils.js\";import{createScreenPointArray as s}from\"../../../../core/screenUtils.js\";import{property as e}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{a as r}from\"../../../../chunks/vec3.js\";import{c as a,f as p}from\"../../../../chunks/vec3f64.js\";import{translateBy as h}from\"../../viewpointUtils.js\";import{PanPlanarMomentumEstimator as u}from\"../../../navigation/PanPlanarMomentumEstimator.js\";import c from\"../../../../geometry/Point.js\";let d=class extends o{constructor(t){super(t),this.animationTime=0,this.momentumEstimator=new u(500,6,.92),this.momentum=null,this.tmpMomentum=a(),this.momentumFinished=!1,this.viewpoint=new i({targetGeometry:new c,scale:0,rotation:0}),m((()=>this.momentumFinished),(()=>this.navigation.stop()))}begin(t,i){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(i),this.previousDrag=i}update(t,i){this.addToEstimator(i);let o=i.center.x,m=i.center.y;const s=this.previousDrag;o=s?s.center.x-o:-o,m=s?m-s.center.y:m,t.viewpoint=h(this.viewpoint,t.viewpoint,[o||0,m||0]),this.previousDrag=i}end(t,i){this.addToEstimator(i);const o=t.navigation.momentumEnabled;this.momentum=o?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(t),this.previousDrag=null,this.navigation.end()}addToEstimator(t){const i=t.center.x,o=t.center.y,m=s(-i,o),e=p(-i,o,0);this.momentumEstimator.add(m,e,.001*t.timestamp)}onAnimationUpdate(t){this.navigation.animationManager.animateContinous(t.viewpoint,((i,o)=>{this.momentumFinished=!this.momentum||this.momentum.isFinished(this.animationTime);const m=.001*o;if(!this.momentumFinished){const o=this.momentum.valueDelta(this.animationTime,m);r(this.tmpMomentum,this.momentum.direction,o),h(i,i,this.tmpMomentum),t.constraints.constrainByGeometry(i)}this.animationTime+=m}))}stopMomentumNavigation(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())}};t([e()],d.prototype,\"momentumFinished\",void 0),t([e()],d.prototype,\"viewpoint\",void 0),t([e()],d.prototype,\"navigation\",void 0),d=t([n(\"esri.views.2d.navigation.actions.Pan\")],d);const v=d;export{v as default};\n"]},"metadata":{},"sourceType":"module"}