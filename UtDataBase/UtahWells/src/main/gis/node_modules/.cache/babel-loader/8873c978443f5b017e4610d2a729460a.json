{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as s } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../core/Accessor.js\";\nimport { isAborted as t, createAbortError as e, isPromiseLike as o } from \"../../core/promiseUtils.js\";\nimport { property as c } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as n } from \"../../core/accessorSupport/decorators/subclass.js\";\nlet i = class extends r {\n  constructor() {\n    super(...arguments), this._tasks = new Array(), this.running = !1;\n  }\n\n  get length() {\n    return this._tasks.length;\n  }\n\n  destroy() {\n    this.cancelAll();\n  }\n\n  runTask(s) {\n    for (; !s.done && this._process(s);) s.madeProgress();\n  }\n\n  push(s, r, t) {\n    return this.running = !0, new Promise((e, o) => this._tasks.push(new a(e, o, s, r, t)));\n  }\n\n  unshift(s, r, t) {\n    return this.running = !0, new Promise((e, o) => this._tasks.unshift(new a(e, o, s, r, t)));\n  }\n\n  _process(s) {\n    if (0 === this._tasks.length) return !1;\n\n    const r = this._tasks.shift();\n\n    try {\n      const c = t(r.signal);\n      if (c && !r.abortCallback) r.reject(e());else {\n        const t = c ? r.abortCallback(e()) : r.callback(s);\n        o(t) ? t.then(r.resolve, r.reject) : r.resolve(t);\n      }\n    } catch (c) {\n      r.reject(c);\n    }\n\n    return this.running = this._tasks.length > 0, !0;\n  }\n\n  cancelAll() {\n    const s = e();\n\n    for (const r of this._tasks) if (r.abortCallback) {\n      const t = r.abortCallback(s);\n      r.resolve(t);\n    } else r.reject(s);\n\n    this._tasks.length = 0, this.running = !1;\n  }\n\n};\ns([c()], i.prototype, \"running\", void 0), i = s([n(\"esri.layers.support.PromiseQueue\")], i);\n\nclass a {\n  constructor(s, r, t, e, o) {\n    this.resolve = s, this.reject = r, this.callback = t, this.signal = e, this.abortCallback = o;\n  }\n\n}\n\nexport { i as PromiseQueue };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/support/PromiseQueue.js"],"names":["_","s","r","isAborted","t","createAbortError","e","isPromiseLike","o","property","c","subclass","n","i","constructor","arguments","_tasks","Array","running","length","destroy","cancelAll","runTask","done","_process","madeProgress","push","Promise","a","unshift","shift","signal","abortCallback","reject","callback","then","resolve","prototype","PromiseQueue"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{isAborted as t,createAbortError as e,isPromiseLike as o}from\"../../core/promiseUtils.js\";import{property as c}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";let i=class extends r{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(s){for(;!s.done&&this._process(s);)s.madeProgress()}push(s,r,t){return this.running=!0,new Promise(((e,o)=>this._tasks.push(new a(e,o,s,r,t))))}unshift(s,r,t){return this.running=!0,new Promise(((e,o)=>this._tasks.unshift(new a(e,o,s,r,t))))}_process(s){if(0===this._tasks.length)return!1;const r=this._tasks.shift();try{const c=t(r.signal);if(c&&!r.abortCallback)r.reject(e());else{const t=c?r.abortCallback(e()):r.callback(s);o(t)?t.then(r.resolve,r.reject):r.resolve(t)}}catch(c){r.reject(c)}return this.running=this._tasks.length>0,!0}cancelAll(){const s=e();for(const r of this._tasks)if(r.abortCallback){const t=r.abortCallback(s);r.resolve(t)}else r.reject(s);this._tasks.length=0,this.running=!1}};s([c()],i.prototype,\"running\",void 0),i=s([n(\"esri.layers.support.PromiseQueue\")],i);class a{constructor(s,r,t,e,o){this.resolve=s,this.reject=r,this.callback=t,this.signal=e,this.abortCallback=o}}export{i as PromiseQueue};\n"]},"metadata":{},"sourceType":"module"}