{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport \"../geometry.js\";\nimport r from \"../PopupTemplate.js\";\nimport \"../renderers/ClassBreaksRenderer.js\";\nimport \"../renderers/DictionaryRenderer.js\";\nimport \"../renderers/DotDensityRenderer.js\";\nimport \"../renderers/HeatmapRenderer.js\";\nimport \"../renderers/Renderer.js\";\nimport t from \"../renderers/SimpleRenderer.js\";\nimport o from \"../renderers/UniqueValueRenderer.js\";\nimport { read as i } from \"../renderers/support/jsonUtils.js\";\nimport { rendererTypes as s, webSceneRendererTypes as n } from \"../renderers/support/types.js\";\nimport p from \"../request.js\";\nimport { symbolTypesRenderer as a } from \"../symbols.js\";\nimport l from \"../core/Error.js\";\nimport m from \"../core/Logger.js\";\nimport { isSome as d } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as y } from \"../core/MultiOriginJSONSupport.js\";\nimport { throwIfAbortError as u } from \"../core/promiseUtils.js\";\nimport { property as f } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/has.js\";\nimport { Integer as c } from \"../core/accessorSupport/ensureType.js\";\nimport { reader as h } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as g } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { createTypeReader as j } from \"../core/accessorSupport/extensions/serializableProperty/reader.js\";\nimport { featureGeometryTypeKebabDictionary as v } from \"../geometry/support/typeUtils.js\";\nimport S from \"./Layer.js\";\nimport { ArcGISService as b } from \"./mixins/ArcGISService.js\";\nimport { BlendLayer as I } from \"./mixins/BlendLayer.js\";\nimport { CustomParametersMixin as w } from \"./mixins/CustomParametersMixin.js\";\nimport { FeatureEffectLayer as x } from \"./mixins/FeatureEffectLayer.js\";\nimport { OperationalLayer as R } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as T } from \"./mixins/PortalLayer.js\";\nimport { RefreshableLayer as P } from \"./mixins/RefreshableLayer.js\";\nimport { ScaleRangeLayer as L } from \"./mixins/ScaleRangeLayer.js\";\nimport { TemporalLayer as F } from \"./mixins/TemporalLayer.js\";\nimport { labelsVisible as U, legendEnabled as D, maxScale as E, minScale as O, popupEnabled as k, screenSizePerspectiveEnabled as N, url as _ } from \"./support/commonProperties.js\";\nimport { featureReductionProperty as J } from \"./support/featureReductionUtils.js\";\nimport { defineFieldProperties as A } from \"./support/fieldProperties.js\";\nimport { fixRendererFields as G, fixTimeInfoFields as q } from \"./support/fieldUtils.js\";\nimport V from \"./support/LabelClass.js\";\nimport { reader as z } from \"./support/labelingInfo.js\";\nimport C from \"./support/PurgeOptions.js\";\nimport { loadStyleRenderer as M } from \"../renderers/support/styleUtils.js\";\nimport W from \"../rest/support/Query.js\";\nimport { createPopupTemplate as B } from \"../support/popupUtils.js\";\nimport Q from \"../symbols/support/ElevationInfo.js\";\nimport H from \"../geometry/SpatialReference.js\";\nimport K from \"../geometry/Extent.js\";\nconst X = m.getLogger(\"esri.layers.StreamLayer\"),\n      Y = A();\nlet Z = class extends x(I(F(L(P(b(R(T(y(w(S)))))))))) {\n  constructor() {\n    super(...arguments), this.copyright = null, this.definitionExpression = null, this.displayField = null, this.elevationInfo = null, this.featureReduction = null, this.fields = null, this.fieldsIndex = null, this.geometryDefinition = null, this.geometryType = null, this.labelsVisible = !0, this.labelingInfo = null, this.legendEnabled = !0, this.maxReconnectionAttempts = 0, this.maxReconnectionInterval = 20, this.maxScale = 0, this.minScale = 0, this.objectIdField = null, this.operationalLayerType = \"ArcGISStreamLayer\", this.popupEnabled = !0, this.popupTemplate = null, this.purgeOptions = new C(), this.screenSizePerspectiveEnabled = !0, this.sourceJSON = null, this.spatialReference = H.WGS84, this.type = \"stream\", this.url = null, this.updateInterval = 300, this.webSocketUrl = null;\n  }\n\n  normalizeCtorArgs(e, r) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...r\n    } : e;\n  }\n\n  load(e) {\n    if (!(\"WebSocket\" in globalThis)) return this.addResolvingPromise(Promise.reject(new l(\"stream-layer:websocket-unsupported\", \"WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service.\"))), Promise.resolve(this);\n    const r = d(e) ? e.signal : null;\n    return this.addResolvingPromise(this.loadFromPortal({\n      supportedTypes: [\"Stream Service\", \"Feed\"]\n    }, e).catch(u).then(() => this._fetchService(r))), Promise.resolve(this);\n  }\n\n  get defaultPopupTemplate() {\n    return this.createPopupTemplate();\n  }\n\n  set renderer(e) {\n    G(e, this.fieldsIndex), this._set(\"renderer\", e);\n  }\n\n  readRenderer(e, r, s) {\n    const n = (r = r.layerDefinition || r).drawingInfo && r.drawingInfo.renderer || void 0;\n\n    if (n) {\n      const e = i(n, r, s) || void 0;\n      return e || X.error(\"Failed to create renderer\", {\n        rendererDefinition: r.drawingInfo.renderer,\n        layer: this,\n        context: s\n      }), e;\n    }\n\n    if (r.defaultSymbol) return r.types && r.types.length ? new o({\n      defaultSymbol: $(r.defaultSymbol, r, s),\n      field: r.typeIdField,\n      uniqueValueInfos: r.types.map(e => ({\n        id: e.id,\n        symbol: $(e.symbol, e, s)\n      }))\n    }) : new t({\n      symbol: $(r.defaultSymbol, r, s)\n    });\n  }\n\n  createPopupTemplate(e) {\n    return B(this, e);\n  }\n\n  createQuery() {\n    const e = new W();\n    return e.returnGeometry = !0, e.outFields = [\"*\"], e.where = this.definitionExpression || \"1=1\", e;\n  }\n\n  getFieldDomain(e, r) {\n    if (!this.fields) return null;\n    let t = null;\n    return this.fields.some(r => (r.name === e && (t = r.domain), !!t)), t;\n  }\n\n  getField(e) {\n    return this.fieldsIndex.get(e);\n  }\n\n  serviceSupportsSpatialReference(e) {\n    return !0;\n  }\n\n  async _fetchService(e) {\n    var r;\n\n    if (!!this.webSocketUrl) {\n      var t;\n      if (null == (t = this.timeInfo) || !t.trackIdField) throw new l(\"stream-layer:missing-metadata\", \"The stream layer trackIdField must be specified.\");\n      if (!this.objectIdField) throw new l(\"stream-layer:missing-metadata\", \"The stream layer objectIdField must be specified.\");\n      if (!this.fields) throw new l(\"stream-layer:missing-metadata\", \"The stream layer fields must be specified.\");\n      if (!this.geometryType) throw new l(\"stream-layer:missing-metadata\", \"The stream layer geometryType must be specified.\");\n      this.url = this.webSocketUrl;\n    } else if (!this.sourceJSON) {\n      const {\n        data: r\n      } = await p(this.parsedUrl.path, {\n        query: {\n          f: \"json\",\n          ...this.customParameters,\n          ...this.parsedUrl.query\n        },\n        responseType: \"json\",\n        signal: e\n      });\n      this.sourceJSON = r;\n    }\n\n    return this.sourceJSON = { ...(null != (r = this.sourceJSON) ? r : {}),\n      objectIdField: \"__esri_stream_id__\"\n    }, this.read(this.sourceJSON, {\n      origin: \"service\",\n      url: this.parsedUrl\n    }), G(this.renderer, this.fieldsIndex), q(this.timeInfo, this.fieldsIndex), M(this, {\n      origin: \"service\"\n    });\n  }\n\n};\ne([f({\n  type: String\n})], Z.prototype, \"copyright\", void 0), e([f({\n  readOnly: !0\n})], Z.prototype, \"defaultPopupTemplate\", null), e([f({\n  type: String,\n  json: {\n    name: \"layerDefinition.definitionExpression\",\n    write: {\n      enabled: !0,\n      allowNull: !0\n    }\n  }\n})], Z.prototype, \"definitionExpression\", void 0), e([f({\n  type: String\n})], Z.prototype, \"displayField\", void 0), e([f({\n  type: Q\n})], Z.prototype, \"elevationInfo\", void 0), e([f(J)], Z.prototype, \"featureReduction\", void 0), e([f(Y.fields)], Z.prototype, \"fields\", void 0), e([f(Y.fieldsIndex)], Z.prototype, \"fieldsIndex\", void 0), e([f({\n  type: K\n})], Z.prototype, \"geometryDefinition\", void 0), e([f({\n  type: v.apiValues,\n  json: {\n    read: {\n      reader: v.read\n    }\n  }\n})], Z.prototype, \"geometryType\", void 0), e([f(U)], Z.prototype, \"labelsVisible\", void 0), e([f({\n  type: [V],\n  json: {\n    read: {\n      source: \"layerDefinition.drawingInfo.labelingInfo\",\n      reader: z\n    },\n    write: {\n      target: \"layerDefinition.drawingInfo.labelingInfo\"\n    }\n  }\n})], Z.prototype, \"labelingInfo\", void 0), e([f(D)], Z.prototype, \"legendEnabled\", void 0), e([f({\n  type: [\"show\", \"hide\"]\n})], Z.prototype, \"listMode\", void 0), e([f({\n  type: c\n})], Z.prototype, \"maxReconnectionAttempts\", void 0), e([f({\n  type: c\n})], Z.prototype, \"maxReconnectionInterval\", void 0), e([f(E)], Z.prototype, \"maxScale\", void 0), e([f(O)], Z.prototype, \"minScale\", void 0), e([f({\n  type: String\n})], Z.prototype, \"objectIdField\", void 0), e([f({\n  value: \"ArcGISStreamLayer\",\n  type: [\"ArcGISStreamLayer\"]\n})], Z.prototype, \"operationalLayerType\", void 0), e([f(k)], Z.prototype, \"popupEnabled\", void 0), e([f({\n  type: r,\n  json: {\n    read: {\n      source: \"popupInfo\"\n    },\n    write: {\n      target: \"popupInfo\"\n    }\n  }\n})], Z.prototype, \"popupTemplate\", void 0), e([f({\n  type: C\n})], Z.prototype, \"purgeOptions\", void 0), e([f({\n  types: s,\n  json: {\n    origins: {\n      service: {\n        write: {\n          target: \"drawingInfo.renderer\",\n          enabled: !1\n        }\n      },\n      \"web-scene\": {\n        name: \"layerDefinition.drawingInfo.renderer\",\n        types: n,\n        write: !0\n      }\n    },\n    write: {\n      target: \"layerDefinition.drawingInfo.renderer\"\n    }\n  }\n})], Z.prototype, \"renderer\", null), e([h(\"service\", \"renderer\", [\"drawingInfo.renderer\", \"defaultSymbol\"]), h(\"renderer\", [\"layerDefinition.drawingInfo.renderer\", \"layerDefinition.defaultSymbol\"])], Z.prototype, \"readRenderer\", null), e([f(N)], Z.prototype, \"screenSizePerspectiveEnabled\", void 0), e([f()], Z.prototype, \"sourceJSON\", void 0), e([f({\n  type: H,\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"spatialReference\"\n        }\n      }\n    }\n  }\n})], Z.prototype, \"spatialReference\", void 0), e([f({\n  json: {\n    read: !1\n  }\n})], Z.prototype, \"type\", void 0), e([f(_)], Z.prototype, \"url\", void 0), e([f({\n  type: Number\n})], Z.prototype, \"updateInterval\", void 0), e([f({\n  type: String\n})], Z.prototype, \"webSocketUrl\", void 0), Z = e([g(\"esri.layers.StreamLayer\")], Z);\nconst $ = j({\n  types: a\n}),\n      ee = Z;\nexport { ee as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/StreamLayer.js"],"names":["_","e","r","t","o","read","i","rendererTypes","s","webSceneRendererTypes","n","p","symbolTypesRenderer","a","l","m","isSome","d","MultiOriginJSONMixin","y","throwIfAbortError","u","property","f","Integer","c","reader","h","subclass","g","createTypeReader","j","featureGeometryTypeKebabDictionary","v","S","ArcGISService","b","BlendLayer","I","CustomParametersMixin","w","FeatureEffectLayer","x","OperationalLayer","R","PortalLayer","T","RefreshableLayer","P","ScaleRangeLayer","L","TemporalLayer","F","labelsVisible","U","legendEnabled","D","maxScale","E","minScale","O","popupEnabled","k","screenSizePerspectiveEnabled","N","url","featureReductionProperty","J","defineFieldProperties","A","fixRendererFields","G","fixTimeInfoFields","q","V","z","C","loadStyleRenderer","M","W","createPopupTemplate","B","Q","H","K","X","getLogger","Y","Z","constructor","copyright","definitionExpression","displayField","elevationInfo","featureReduction","fields","fieldsIndex","geometryDefinition","geometryType","labelingInfo","maxReconnectionAttempts","maxReconnectionInterval","objectIdField","operationalLayerType","popupTemplate","purgeOptions","sourceJSON","spatialReference","WGS84","type","updateInterval","webSocketUrl","normalizeCtorArgs","load","globalThis","addResolvingPromise","Promise","reject","resolve","signal","loadFromPortal","supportedTypes","catch","then","_fetchService","defaultPopupTemplate","renderer","_set","readRenderer","layerDefinition","drawingInfo","error","rendererDefinition","layer","context","defaultSymbol","types","length","$","field","typeIdField","uniqueValueInfos","map","id","symbol","createQuery","returnGeometry","outFields","where","getFieldDomain","some","name","domain","getField","get","serviceSupportsSpatialReference","timeInfo","trackIdField","data","parsedUrl","path","query","customParameters","responseType","origin","String","prototype","readOnly","json","write","enabled","allowNull","apiValues","source","target","value","origins","service","Number","ee","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import r from\"../PopupTemplate.js\";import\"../renderers/ClassBreaksRenderer.js\";import\"../renderers/DictionaryRenderer.js\";import\"../renderers/DotDensityRenderer.js\";import\"../renderers/HeatmapRenderer.js\";import\"../renderers/Renderer.js\";import t from\"../renderers/SimpleRenderer.js\";import o from\"../renderers/UniqueValueRenderer.js\";import{read as i}from\"../renderers/support/jsonUtils.js\";import{rendererTypes as s,webSceneRendererTypes as n}from\"../renderers/support/types.js\";import p from\"../request.js\";import{symbolTypesRenderer as a}from\"../symbols.js\";import l from\"../core/Error.js\";import m from\"../core/Logger.js\";import{isSome as d}from\"../core/maybe.js\";import{MultiOriginJSONMixin as y}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as u}from\"../core/promiseUtils.js\";import{property as f}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{Integer as c}from\"../core/accessorSupport/ensureType.js\";import{reader as h}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as g}from\"../core/accessorSupport/decorators/subclass.js\";import{createTypeReader as j}from\"../core/accessorSupport/extensions/serializableProperty/reader.js\";import{featureGeometryTypeKebabDictionary as v}from\"../geometry/support/typeUtils.js\";import S from\"./Layer.js\";import{ArcGISService as b}from\"./mixins/ArcGISService.js\";import{BlendLayer as I}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as w}from\"./mixins/CustomParametersMixin.js\";import{FeatureEffectLayer as x}from\"./mixins/FeatureEffectLayer.js\";import{OperationalLayer as R}from\"./mixins/OperationalLayer.js\";import{PortalLayer as T}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as P}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{TemporalLayer as F}from\"./mixins/TemporalLayer.js\";import{labelsVisible as U,legendEnabled as D,maxScale as E,minScale as O,popupEnabled as k,screenSizePerspectiveEnabled as N,url as _}from\"./support/commonProperties.js\";import{featureReductionProperty as J}from\"./support/featureReductionUtils.js\";import{defineFieldProperties as A}from\"./support/fieldProperties.js\";import{fixRendererFields as G,fixTimeInfoFields as q}from\"./support/fieldUtils.js\";import V from\"./support/LabelClass.js\";import{reader as z}from\"./support/labelingInfo.js\";import C from\"./support/PurgeOptions.js\";import{loadStyleRenderer as M}from\"../renderers/support/styleUtils.js\";import W from\"../rest/support/Query.js\";import{createPopupTemplate as B}from\"../support/popupUtils.js\";import Q from\"../symbols/support/ElevationInfo.js\";import H from\"../geometry/SpatialReference.js\";import K from\"../geometry/Extent.js\";const X=m.getLogger(\"esri.layers.StreamLayer\"),Y=A();let Z=class extends(x(I(F(L(P(b(R(T(y(w(S))))))))))){constructor(...e){super(...e),this.copyright=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.geometryDefinition=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.maxReconnectionAttempts=0,this.maxReconnectionInterval=20,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.operationalLayerType=\"ArcGISStreamLayer\",this.popupEnabled=!0,this.popupTemplate=null,this.purgeOptions=new C,this.screenSizePerspectiveEnabled=!0,this.sourceJSON=null,this.spatialReference=H.WGS84,this.type=\"stream\",this.url=null,this.updateInterval=300,this.webSocketUrl=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){if(!(\"WebSocket\"in globalThis))return this.addResolvingPromise(Promise.reject(new l(\"stream-layer:websocket-unsupported\",\"WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service.\"))),Promise.resolve(this);const r=d(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Stream Service\",\"Feed\"]},e).catch(u).then((()=>this._fetchService(r)))),Promise.resolve(this)}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){G(e,this.fieldsIndex),this._set(\"renderer\",e)}readRenderer(e,r,s){const n=(r=r.layerDefinition||r).drawingInfo&&r.drawingInfo.renderer||void 0;if(n){const e=i(n,r,s)||void 0;return e||X.error(\"Failed to create renderer\",{rendererDefinition:r.drawingInfo.renderer,layer:this,context:s}),e}if(r.defaultSymbol)return r.types&&r.types.length?new o({defaultSymbol:$(r.defaultSymbol,r,s),field:r.typeIdField,uniqueValueInfos:r.types.map((e=>({id:e.id,symbol:$(e.symbol,e,s)})))}):new t({symbol:$(r.defaultSymbol,r,s)})}createPopupTemplate(e){return B(this,e)}createQuery(){const e=new W;return e.returnGeometry=!0,e.outFields=[\"*\"],e.where=this.definitionExpression||\"1=1\",e}getFieldDomain(e,r){if(!this.fields)return null;let t=null;return this.fields.some((r=>(r.name===e&&(t=r.domain),!!t))),t}getField(e){return this.fieldsIndex.get(e)}serviceSupportsSpatialReference(e){return!0}async _fetchService(e){var r;if(!!this.webSocketUrl){var t;if(null==(t=this.timeInfo)||!t.trackIdField)throw new l(\"stream-layer:missing-metadata\",\"The stream layer trackIdField must be specified.\");if(!this.objectIdField)throw new l(\"stream-layer:missing-metadata\",\"The stream layer objectIdField must be specified.\");if(!this.fields)throw new l(\"stream-layer:missing-metadata\",\"The stream layer fields must be specified.\");if(!this.geometryType)throw new l(\"stream-layer:missing-metadata\",\"The stream layer geometryType must be specified.\");this.url=this.webSocketUrl}else if(!this.sourceJSON){const{data:r}=await p(this.parsedUrl.path,{query:{f:\"json\",...this.customParameters,...this.parsedUrl.query},responseType:\"json\",signal:e});this.sourceJSON=r}return this.sourceJSON={...null!=(r=this.sourceJSON)?r:{},objectIdField:\"__esri_stream_id__\"},this.read(this.sourceJSON,{origin:\"service\",url:this.parsedUrl}),G(this.renderer,this.fieldsIndex),q(this.timeInfo,this.fieldsIndex),M(this,{origin:\"service\"})}};e([f({type:String})],Z.prototype,\"copyright\",void 0),e([f({readOnly:!0})],Z.prototype,\"defaultPopupTemplate\",null),e([f({type:String,json:{name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],Z.prototype,\"definitionExpression\",void 0),e([f({type:String})],Z.prototype,\"displayField\",void 0),e([f({type:Q})],Z.prototype,\"elevationInfo\",void 0),e([f(J)],Z.prototype,\"featureReduction\",void 0),e([f(Y.fields)],Z.prototype,\"fields\",void 0),e([f(Y.fieldsIndex)],Z.prototype,\"fieldsIndex\",void 0),e([f({type:K})],Z.prototype,\"geometryDefinition\",void 0),e([f({type:v.apiValues,json:{read:{reader:v.read}}})],Z.prototype,\"geometryType\",void 0),e([f(U)],Z.prototype,\"labelsVisible\",void 0),e([f({type:[V],json:{read:{source:\"layerDefinition.drawingInfo.labelingInfo\",reader:z},write:{target:\"layerDefinition.drawingInfo.labelingInfo\"}}})],Z.prototype,\"labelingInfo\",void 0),e([f(D)],Z.prototype,\"legendEnabled\",void 0),e([f({type:[\"show\",\"hide\"]})],Z.prototype,\"listMode\",void 0),e([f({type:c})],Z.prototype,\"maxReconnectionAttempts\",void 0),e([f({type:c})],Z.prototype,\"maxReconnectionInterval\",void 0),e([f(E)],Z.prototype,\"maxScale\",void 0),e([f(O)],Z.prototype,\"minScale\",void 0),e([f({type:String})],Z.prototype,\"objectIdField\",void 0),e([f({value:\"ArcGISStreamLayer\",type:[\"ArcGISStreamLayer\"]})],Z.prototype,\"operationalLayerType\",void 0),e([f(k)],Z.prototype,\"popupEnabled\",void 0),e([f({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\"}}})],Z.prototype,\"popupTemplate\",void 0),e([f({type:C})],Z.prototype,\"purgeOptions\",void 0),e([f({types:s,json:{origins:{service:{write:{target:\"drawingInfo.renderer\",enabled:!1}},\"web-scene\":{name:\"layerDefinition.drawingInfo.renderer\",types:n,write:!0}},write:{target:\"layerDefinition.drawingInfo.renderer\"}}})],Z.prototype,\"renderer\",null),e([h(\"service\",\"renderer\",[\"drawingInfo.renderer\",\"defaultSymbol\"]),h(\"renderer\",[\"layerDefinition.drawingInfo.renderer\",\"layerDefinition.defaultSymbol\"])],Z.prototype,\"readRenderer\",null),e([f(N)],Z.prototype,\"screenSizePerspectiveEnabled\",void 0),e([f()],Z.prototype,\"sourceJSON\",void 0),e([f({type:H,json:{origins:{service:{read:{source:\"spatialReference\"}}}}})],Z.prototype,\"spatialReference\",void 0),e([f({json:{read:!1}})],Z.prototype,\"type\",void 0),e([f(_)],Z.prototype,\"url\",void 0),e([f({type:Number})],Z.prototype,\"updateInterval\",void 0),e([f({type:String})],Z.prototype,\"webSocketUrl\",void 0),Z=e([g(\"esri.layers.StreamLayer\")],Z);const $=j({types:a}),ee=Z;export{ee as default};\n"]},"metadata":{},"sourceType":"module"}