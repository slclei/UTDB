{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../chunks/tslib.es6.js\";\nimport { EsriPromise as t } from \"../../../../core/Promise.js\";\nimport { createResolver as r, ignoreAbortErrors as s, throwIfNotAbortError as o } from \"../../../../core/promiseUtils.js\";\nimport { open as i } from \"../../../../core/workers/workers.js\";\nimport { property as n } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as a } from \"../../../../core/accessorSupport/decorators/subclass.js\";\n\nfunction c(e) {\n  return Array.isArray(e);\n}\n\nlet l = class extends t {\n  constructor(e) {\n    super(e), this._startupResolver = r(), this.isReady = !1;\n  }\n\n  initialize() {\n    this._controller = new AbortController(), this.addResolvingPromise(this._startWorker(this._controller.signal));\n  }\n\n  destroy() {\n    this._controller.abort(), this._connection && this._connection.close();\n  }\n\n  set tileRenderer(e) {\n    this.client.tileRenderer = e;\n  }\n\n  get closed() {\n    return this._connection.closed;\n  }\n\n  async startup(e, t, r, s) {\n    await this.when();\n    const o = this._controller.signal,\n          i = c(r.source) ? {\n      transferList: r.source,\n      signal: o\n    } : void 0,\n          n = {\n      service: r,\n      config: t,\n      tileInfo: e.tileInfo.toJSON(),\n      tiles: s\n    };\n    await this._connection.invoke(\"startup\", n, i), this._startupResolver.resolve(), this._set(\"isReady\", !0);\n  }\n\n  async updateTiles(e) {\n    return await this._startupResolver.promise, s(this._connection.invoke(\"updateTiles\", e));\n  }\n\n  async update(e) {\n    const t = {\n      config: e\n    };\n    return await this._startupResolver.promise, this._connection.invoke(\"update\", t);\n  }\n\n  async applyUpdate(e) {\n    return await this._startupResolver.promise, this._connection.invoke(\"applyUpdate\", e);\n  }\n\n  async setHighlight(e) {\n    return await this._startupResolver.promise, s(this._connection.invoke(\"controller.setHighlight\", e));\n  }\n\n  async stop() {\n    if (await this._startupResolver.promise, !this.closed) return s(this._connection.invoke(\"stop\"));\n  }\n\n  async refresh(e) {\n    return await this._startupResolver.promise, s(this._connection.invoke(\"controller.refresh\", e));\n  }\n\n  async querySummaryStatistics(e, t, r) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.querySummaryStatistics\", {\n      query: e.toJSON(),\n      params: t\n    }, r);\n  }\n\n  async queryUniqueValues(e, t, r) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryUniqueValues\", {\n      query: e.toJSON(),\n      params: t\n    }, r);\n  }\n\n  async queryClassBreaks(e, t, r) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryClassBreaks\", {\n      query: e.toJSON(),\n      params: t\n    }, r);\n  }\n\n  async queryHistogram(e, t, r) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryHistogram\", {\n      query: e.toJSON(),\n      params: t\n    }, r);\n  }\n\n  async queryFeatures(e, t) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryFeatures\", e.toJSON(), t);\n  }\n\n  async queryVisibleFeatures(e, t) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryVisibleFeatures\", e.toJSON(), t);\n  }\n\n  async queryObjectIds(e, t) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryObjectIds\", e.toJSON(), t);\n  }\n\n  async queryFeatureCount(e, t) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryFeatureCount\", e.toJSON(), t);\n  }\n\n  async queryExtent(e, t) {\n    return this._connection.invoke(\"controller.queryExtent\", e.toJSON(), t);\n  }\n\n  async queryLatestObservations(e, t) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryLatestObservations\", e.toJSON(), t);\n  }\n\n  async queryStatistics(e) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.queryStatistics\", e);\n  }\n\n  async getObjectId(e) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.getObjectId\", e);\n  }\n\n  async getDisplayId(e) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.getDisplayId\", e);\n  }\n\n  async getFeatures(e) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.getFeatures\", e);\n  }\n\n  async getAggregates() {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.getAggregates\");\n  }\n\n  async getAggregateValueRanges() {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.getAggregateValueRanges\");\n  }\n\n  async mapValidDisplayIds(e) {\n    return await this._startupResolver.promise, this._connection.invoke(\"controller.mapValidDisplayIds\", e);\n  }\n\n  async onEdits(e) {\n    return await this._startupResolver.promise, s(this._connection.invoke(\"controller.onEdits\", e));\n  }\n\n  async enableEvent(e, t) {\n    return await this._startupResolver.promise, s(this._connection.invoke(\"controller.enableEvent\", {\n      name: e,\n      value: t\n    }));\n  }\n\n  pauseStream() {\n    return s(this._connection.invoke(\"controller.pauseStream\"));\n  }\n\n  resumeStream() {\n    return s(this._connection.invoke(\"controller.resumeStream\"));\n  }\n\n  async _startWorker(e) {\n    try {\n      this._connection = await i(\"Pipeline\", {\n        client: this.client,\n        strategy: \"dedicated\",\n        signal: e\n      });\n    } catch (t) {\n      o(t);\n    }\n  }\n\n};\ne([n()], l.prototype, \"isReady\", void 0), e([n()], l.prototype, \"client\", void 0), e([n()], l.prototype, \"tileRenderer\", null), l = e([a(\"esri.views.2d.layers.support.FeatureLayerProxy\")], l);\nconst u = l;\nexport { u as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js"],"names":["_","e","EsriPromise","t","createResolver","r","ignoreAbortErrors","s","throwIfNotAbortError","o","open","i","property","n","subclass","a","c","Array","isArray","l","constructor","_startupResolver","isReady","initialize","_controller","AbortController","addResolvingPromise","_startWorker","signal","destroy","abort","_connection","close","tileRenderer","client","closed","startup","when","source","transferList","service","config","tileInfo","toJSON","tiles","invoke","resolve","_set","updateTiles","promise","update","applyUpdate","setHighlight","stop","refresh","querySummaryStatistics","query","params","queryUniqueValues","queryClassBreaks","queryHistogram","queryFeatures","queryVisibleFeatures","queryObjectIds","queryFeatureCount","queryExtent","queryLatestObservations","queryStatistics","getObjectId","getDisplayId","getFeatures","getAggregates","getAggregateValueRanges","mapValidDisplayIds","onEdits","enableEvent","name","value","pauseStream","resumeStream","strategy","prototype","u","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{EsriPromise as t}from\"../../../../core/Promise.js\";import{createResolver as r,ignoreAbortErrors as s,throwIfNotAbortError as o}from\"../../../../core/promiseUtils.js\";import{open as i}from\"../../../../core/workers/workers.js\";import{property as n}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";function c(e){return Array.isArray(e)}let l=class extends t{constructor(e){super(e),this._startupResolver=r(),this.isReady=!1}initialize(){this._controller=new AbortController,this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=c(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke(\"startup\",n,i),this._startupResolver.resolve(),this._set(\"isReady\",!0)}async updateTiles(e){return await this._startupResolver.promise,s(this._connection.invoke(\"updateTiles\",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke(\"update\",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke(\"applyUpdate\",e)}async setHighlight(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.setHighlight\",e))}async stop(){if(await this._startupResolver.promise,!this.closed)return s(this._connection.invoke(\"stop\"))}async refresh(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.refresh\",e))}async querySummaryStatistics(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.querySummaryStatistics\",{query:e.toJSON(),params:t},r)}async queryUniqueValues(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryUniqueValues\",{query:e.toJSON(),params:t},r)}async queryClassBreaks(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryClassBreaks\",{query:e.toJSON(),params:t},r)}async queryHistogram(e,t,r){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryHistogram\",{query:e.toJSON(),params:t},r)}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatures\",e.toJSON(),t)}async queryVisibleFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryVisibleFeatures\",e.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryObjectIds\",e.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryFeatureCount\",e.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke(\"controller.queryExtent\",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryLatestObservations\",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.queryStatistics\",e)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getObjectId\",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getDisplayId\",e)}async getFeatures(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.getFeatures\",e)}async getAggregates(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregates\")}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke(\"controller.getAggregateValueRanges\")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke(\"controller.mapValidDisplayIds\",e)}async onEdits(e){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.onEdits\",e))}async enableEvent(e,t){return await this._startupResolver.promise,s(this._connection.invoke(\"controller.enableEvent\",{name:e,value:t}))}pauseStream(){return s(this._connection.invoke(\"controller.pauseStream\"))}resumeStream(){return s(this._connection.invoke(\"controller.resumeStream\"))}async _startWorker(e){try{this._connection=await i(\"Pipeline\",{client:this.client,strategy:\"dedicated\",signal:e})}catch(t){o(t)}}};e([n()],l.prototype,\"isReady\",void 0),e([n()],l.prototype,\"client\",void 0),e([n()],l.prototype,\"tileRenderer\",null),l=e([a(\"esri.views.2d.layers.support.FeatureLayerProxy\")],l);const u=l;export{u as default};\n"]},"metadata":{},"sourceType":"module"}