{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport \"../../geometry.js\";\nimport i from \"../../Viewpoint.js\";\nimport s from \"../../core/Accessor.js\";\nimport { addFrameTask as e } from \"../../core/scheduling.js\";\nimport { property as o } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as n } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"../ViewAnimation.js\";\nimport { easingFunctions as r, parse as h } from \"./unitBezier.js\";\nimport { copy as p } from \"./viewpointUtils.js\";\nimport c from \"../../geometry/Point.js\";\n\nclass m {\n  constructor(t, i, s, e) {\n    const o = t.targetGeometry,\n          n = i.targetGeometry;\n    e ? \"string\" == typeof e && (e = h(e) || r.ease) : e = r.ease, this.easing = e, this.duration = s, this.sCenterX = o.x, this.sCenterY = o.y, this.sScale = t.scale, this.sRotation = t.rotation, this.tCenterX = n.x, this.tCenterY = n.y, this.tScale = i.scale, this.tRotation = i.rotation, this.dCenterX = this.tCenterX - this.sCenterX, this.dCenterY = this.tCenterY - this.sCenterY, this.dScale = this.tScale - this.sScale, this.dRotation = this.tRotation - this.sRotation, this.dRotation > 180 ? this.dRotation -= 360 : this.dRotation < -180 && (this.dRotation += 360);\n  }\n\n  applyRatio(t, i) {\n    const s = this.easing(i);\n    let e, o, n, a;\n    i >= 1 ? (e = this.tCenterX, o = this.tCenterY, n = this.tRotation, a = this.tScale) : (e = this.sCenterX + s * this.dCenterX, o = this.sCenterY + s * this.dCenterY, n = this.sRotation + s * this.dRotation, a = this.sScale + s * this.dScale), t.targetGeometry.x = e, t.targetGeometry.y = o, t.scale = a, t.rotation = n;\n  }\n\n}\n\nlet u = class extends s {\n  constructor(t) {\n    super(t), this.duration = 200, this.transition = null, this.easing = r.ease, this.view = null, this.viewpoint = null, this.viewpoint = new i({\n      targetGeometry: new c(),\n      scale: 0,\n      rotation: 0\n    }), this._updateTask = e({\n      postRender: this._postRender.bind(this)\n    }), this._updateTask.pause();\n  }\n\n  destroy() {\n    this._updateTask.remove(), this._updateTask = null;\n  }\n\n  animate(t, i, s) {\n    this.stop();\n    const e = this.viewpoint;\n    p(e, i), this.transition = new m(this.viewpoint, t.target, s && s.duration || this.duration, s && s.easing || this.easing);\n\n    const o = () => {\n      this.animation === t && this._updateTask && (\"finished\" === t.state && (this.transition.applyRatio(this.viewpoint, 1), this.view.state && (this.view.state.viewpoint = this.viewpoint.clone())), this.animation = null, this.updateFunction = null);\n    };\n\n    return t.when(o, o), this._startTime = performance.now(), this._updateTask.resume(), this.animation = t, t;\n  }\n\n  animateContinous(t, i) {\n    this.stop(), this.updateFunction = i, this.viewpoint = t;\n\n    const s = new a({\n      target: t.clone()\n    }),\n          e = () => {\n      this.animation === s && this._updateTask && (this.animation = null, this.updateFunction = null);\n    };\n\n    return s.when(e, e), this._startTime = performance.now(), this._updateTask.resume(), this.animation = s, s;\n  }\n\n  stop() {\n    this.animation && (this.animation.stop(), this.animation = null, this.updateFunction = null);\n  }\n\n  _postRender(t) {\n    const i = this.animation;\n\n    if (i && i.state !== a.State.STOPPED) {\n      if (this.updateFunction) this.updateFunction(this.viewpoint, t.deltaTime);else {\n        const t = (performance.now() - this._startTime) / this.transition.duration,\n              i = t >= 1;\n        this.transition.applyRatio(this.viewpoint, t), i && this.animation.finish();\n      }\n      this.view.state && (this.view.state.viewpoint = this.viewpoint.clone());\n    } else this._updateTask.pause();\n  }\n\n};\nt([o()], u.prototype, \"animation\", void 0), t([o()], u.prototype, \"duration\", void 0), t([o()], u.prototype, \"transition\", void 0), t([o()], u.prototype, \"easing\", void 0), t([o()], u.prototype, \"view\", void 0), t([o()], u.prototype, \"viewpoint\", void 0), u = t([n(\"esri.views.2d.AnimationManager\")], u);\nconst d = u;\nexport { d as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/AnimationManager.js"],"names":["_","t","i","s","addFrameTask","e","property","o","subclass","n","a","easingFunctions","r","parse","h","copy","p","c","m","constructor","targetGeometry","ease","easing","duration","sCenterX","x","sCenterY","y","sScale","scale","sRotation","rotation","tCenterX","tCenterY","tScale","tRotation","dCenterX","dCenterY","dScale","dRotation","applyRatio","u","transition","view","viewpoint","_updateTask","postRender","_postRender","bind","pause","destroy","remove","animate","stop","target","animation","state","clone","updateFunction","when","_startTime","performance","now","resume","animateContinous","State","STOPPED","deltaTime","finish","prototype","d","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import i from\"../../Viewpoint.js\";import s from\"../../core/Accessor.js\";import{addFrameTask as e}from\"../../core/scheduling.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../core/accessorSupport/decorators/subclass.js\";import a from\"../ViewAnimation.js\";import{easingFunctions as r,parse as h}from\"./unitBezier.js\";import{copy as p}from\"./viewpointUtils.js\";import c from\"../../geometry/Point.js\";class m{constructor(t,i,s,e){const o=t.targetGeometry,n=i.targetGeometry;e?\"string\"==typeof e&&(e=h(e)||r.ease):e=r.ease,this.easing=e,this.duration=s,this.sCenterX=o.x,this.sCenterY=o.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=n.x,this.tCenterY=n.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,i){const s=this.easing(i);let e,o,n,a;i>=1?(e=this.tCenterX,o=this.tCenterY,n=this.tRotation,a=this.tScale):(e=this.sCenterX+s*this.dCenterX,o=this.sCenterY+s*this.dCenterY,n=this.sRotation+s*this.dRotation,a=this.sScale+s*this.dScale),t.targetGeometry.x=e,t.targetGeometry.y=o,t.scale=a,t.rotation=n}}let u=class extends s{constructor(t){super(t),this.duration=200,this.transition=null,this.easing=r.ease,this.view=null,this.viewpoint=null,this.viewpoint=new i({targetGeometry:new c,scale:0,rotation:0}),this._updateTask=e({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(t,i,s){this.stop();const e=this.viewpoint;p(e,i),this.transition=new m(this.viewpoint,t.target,s&&s.duration||this.duration,s&&s.easing||this.easing);const o=()=>{this.animation===t&&this._updateTask&&(\"finished\"===t.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(o,o),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,i){this.stop(),this.updateFunction=i,this.viewpoint=t;const s=new a({target:t.clone()}),e=()=>{this.animation===s&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return s.when(e,e),this._startTime=performance.now(),this._updateTask.resume(),this.animation=s,s}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const i=this.animation;if(i&&i.state!==a.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{const t=(performance.now()-this._startTime)/this.transition.duration,i=t>=1;this.transition.applyRatio(this.viewpoint,t),i&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};t([o()],u.prototype,\"animation\",void 0),t([o()],u.prototype,\"duration\",void 0),t([o()],u.prototype,\"transition\",void 0),t([o()],u.prototype,\"easing\",void 0),t([o()],u.prototype,\"view\",void 0),t([o()],u.prototype,\"viewpoint\",void 0),u=t([n(\"esri.views.2d.AnimationManager\")],u);const d=u;export{d as default};\n"]},"metadata":{},"sourceType":"module"}