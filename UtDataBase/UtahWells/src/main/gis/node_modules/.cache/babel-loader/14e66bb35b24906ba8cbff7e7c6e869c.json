{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { ErrorHandler as e } from \"./error-handler.js\";\nimport { AssignmentOperators as t, BinaryOperators as s, LogicalOperators as n, UnaryOperators as r } from \"./nodes.js\";\nimport { Scanner as i } from \"./scanner.js\";\nimport { TokenName as a, TokenType as o } from \"./token.js\";\n\nclass c {\n  constructor() {\n    this.values = [], this.curly = this.paren = -1;\n  }\n\n  beforeFunctionExpression(e) {\n    return [\"(\", \"{\", \"[\", \"return\", \",\", ...t, ...s, ...n, ...r].indexOf(e) >= 0;\n  }\n\n  isRegexStart() {\n    const e = this.values[this.values.length - 1];\n    let t = null !== e;\n\n    switch (e) {\n      case \"this\":\n      case \"]\":\n        t = !1;\n        break;\n\n      case \")\":\n        {\n          const e = this.values[this.paren - 1];\n          t = \"if\" === e || \"while\" === e || \"for\" === e || \"with\" === e;\n        }\n        break;\n\n      case \"}\":\n        if (t = !0, \"function\" === this.values[this.curly - 3]) {\n          const e = this.values[this.curly - 4];\n          t = !!e && !this.beforeFunctionExpression(e);\n        } else if (\"function\" === this.values[this.curly - 4]) {\n          const e = this.values[this.curly - 5];\n          t = !e || !this.beforeFunctionExpression(e);\n        }\n\n    }\n\n    return t;\n  }\n\n  push(e) {\n    e.type === o.Punctuator || e.type === o.Keyword ? (\"{\" === e.value ? this.curly = this.values.length : \"(\" === e.value && (this.paren = this.values.length), this.values.push(e.value)) : this.values.push(null);\n  }\n\n}\n\nclass l {\n  constructor(t, s) {\n    this.errorHandler = new e(), this.errorHandler.tolerant = !!s && \"boolean\" == typeof s.tolerant && s.tolerant, this.scanner = new i(t, this.errorHandler), this.scanner.trackComment = !!s && \"boolean\" == typeof s.comment && s.comment, this.trackRange = !!s && \"boolean\" == typeof s.range && s.range, this.trackLoc = !!s && \"boolean\" == typeof s.loc && s.loc, this.buffer = [], this.reader = new c();\n  }\n\n  errors() {\n    return this.errorHandler.errors;\n  }\n\n  getNextToken() {\n    if (0 === this.buffer.length) {\n      const t = this.scanner.scanComments();\n      if (t) for (let e = 0; e < t.length; ++e) {\n        const s = t[e],\n              n = this.scanner.source.slice(s.slice[0], s.slice[1]),\n              r = {\n          type: s.multiLine ? \"BlockComment\" : \"LineComment\",\n          value: n\n        };\n        this.trackRange && (r.range = s.range), this.trackLoc && (r.loc = s.loc), this.buffer.push(r);\n      }\n\n      if (!this.scanner.eof()) {\n        let t = null;\n        this.trackLoc && (t = {\n          start: {\n            line: this.scanner.lineNumber,\n            column: this.scanner.index - this.scanner.lineStart\n          },\n          end: {\n            line: 0,\n            column: 0\n          }\n        });\n        let s;\n\n        if (\"/\" === this.scanner.source[this.scanner.index] && this.reader.isRegexStart()) {\n          const t = this.scanner.saveState();\n\n          try {\n            s = this.scanner.scanRegExp();\n          } catch (e) {\n            this.scanner.restoreState(t), s = this.scanner.lex();\n          }\n        } else s = this.scanner.lex();\n\n        this.reader.push(s);\n        const n = {\n          type: a[s.type],\n          value: this.scanner.source.slice(s.start, s.end)\n        };\n\n        if (this.trackRange && (n.range = [s.start, s.end]), this.trackLoc && t && (t.end = {\n          line: this.scanner.lineNumber,\n          column: this.scanner.index - this.scanner.lineStart\n        }, n.loc = t), s.type === o.RegularExpression) {\n          const e = s.pattern,\n                t = s.flags;\n          n.regex = {\n            pattern: e,\n            flags: t\n          };\n        }\n\n        this.buffer.push(n);\n      }\n    }\n\n    return this.buffer.shift();\n  }\n\n}\n\nexport { l as Tokenizer };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/arcade/lib/tokenizer.js"],"names":["ErrorHandler","e","AssignmentOperators","t","BinaryOperators","s","LogicalOperators","n","UnaryOperators","r","Scanner","i","TokenName","a","TokenType","o","c","constructor","values","curly","paren","beforeFunctionExpression","indexOf","isRegexStart","length","push","type","Punctuator","Keyword","value","l","errorHandler","tolerant","scanner","trackComment","comment","trackRange","range","trackLoc","loc","buffer","reader","errors","getNextToken","scanComments","source","slice","multiLine","eof","start","line","lineNumber","column","index","lineStart","end","saveState","scanRegExp","restoreState","lex","RegularExpression","pattern","flags","regex","shift","Tokenizer"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ErrorHandler as e}from\"./error-handler.js\";import{AssignmentOperators as t,BinaryOperators as s,LogicalOperators as n,UnaryOperators as r}from\"./nodes.js\";import{Scanner as i}from\"./scanner.js\";import{TokenName as a,TokenType as o}from\"./token.js\";class c{constructor(){this.values=[],this.curly=this.paren=-1}beforeFunctionExpression(e){return[\"(\",\"{\",\"[\",\"return\",\",\",...t,...s,...n,...r].indexOf(e)>=0}isRegexStart(){const e=this.values[this.values.length-1];let t=null!==e;switch(e){case\"this\":case\"]\":t=!1;break;case\")\":{const e=this.values[this.paren-1];t=\"if\"===e||\"while\"===e||\"for\"===e||\"with\"===e}break;case\"}\":if(t=!0,\"function\"===this.values[this.curly-3]){const e=this.values[this.curly-4];t=!!e&&!this.beforeFunctionExpression(e)}else if(\"function\"===this.values[this.curly-4]){const e=this.values[this.curly-5];t=!e||!this.beforeFunctionExpression(e)}}return t}push(e){e.type===o.Punctuator||e.type===o.Keyword?(\"{\"===e.value?this.curly=this.values.length:\"(\"===e.value&&(this.paren=this.values.length),this.values.push(e.value)):this.values.push(null)}}class l{constructor(t,s){this.errorHandler=new e,this.errorHandler.tolerant=!!s&&(\"boolean\"==typeof s.tolerant&&s.tolerant),this.scanner=new i(t,this.errorHandler),this.scanner.trackComment=!!s&&(\"boolean\"==typeof s.comment&&s.comment),this.trackRange=!!s&&(\"boolean\"==typeof s.range&&s.range),this.trackLoc=!!s&&(\"boolean\"==typeof s.loc&&s.loc),this.buffer=[],this.reader=new c}errors(){return this.errorHandler.errors}getNextToken(){if(0===this.buffer.length){const t=this.scanner.scanComments();if(t)for(let e=0;e<t.length;++e){const s=t[e],n=this.scanner.source.slice(s.slice[0],s.slice[1]),r={type:s.multiLine?\"BlockComment\":\"LineComment\",value:n};this.trackRange&&(r.range=s.range),this.trackLoc&&(r.loc=s.loc),this.buffer.push(r)}if(!this.scanner.eof()){let t=null;this.trackLoc&&(t={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{line:0,column:0}});let s;if(\"/\"===this.scanner.source[this.scanner.index]&&this.reader.isRegexStart()){const t=this.scanner.saveState();try{s=this.scanner.scanRegExp()}catch(e){this.scanner.restoreState(t),s=this.scanner.lex()}}else s=this.scanner.lex();this.reader.push(s);const n={type:a[s.type],value:this.scanner.source.slice(s.start,s.end)};if(this.trackRange&&(n.range=[s.start,s.end]),this.trackLoc&&t&&(t.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},n.loc=t),s.type===o.RegularExpression){const e=s.pattern,t=s.flags;n.regex={pattern:e,flags:t}}this.buffer.push(n)}}return this.buffer.shift()}}export{l as Tokenizer};\n"]},"metadata":{},"sourceType":"module"}