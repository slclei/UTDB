{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSymbol3D as t } from \"../../symbols.js\";\nimport { isDevEnvironment as e, adjustStaticAGOUrl as r } from \"../../core/devEnvironmentUtils.js\";\nimport o from \"../../core/Error.js\";\nimport { urlToObject as l, removeFile as n } from \"../../core/urlUtils.js\";\nimport s from \"../../portal/Portal.js\";\nimport { f as m } from \"../../chunks/persistableUrlUtils.js\";\nimport { fromJSON as i } from \"./jsonUtils.js\";\nimport a from \"./StyleOrigin.js\";\nimport { requestJSON as u, makeCIMSymbolRef as p, fetchStyle as y, symbolUrlFromStyleItem as f, Style2DUrlTemplate as c } from \"./styleUtils.js\";\nimport { Thumbnail as b } from \"./Thumbnail.js\";\n\nfunction g(t, e, r, l) {\n  return t.name ? t.styleName && \"Esri2DPointSymbolsStyle\" === t.styleName ? j(t, e, l) : y(t, e, l).then(o => h(o, t.name, e, r, l)) : Promise.reject(new o(\"symbolstyleutils:style-symbol-reference-name-missing\", \"Missing name in style symbol reference\"));\n}\n\nfunction h(y, c, g, h, j) {\n  const d = y.data,\n        U = {\n    portal: g && g.portal || s.getDefault(),\n    url: l(y.baseUrl),\n    origin: \"portal-item\"\n  },\n        N = d.items.find(t => t.name === c);\n\n  if (!N) {\n    const t = `The symbol name '${c}' could not be found`;\n    return Promise.reject(new o(\"symbolstyleutils:symbol-name-not-found\", t, {\n      symbolName: c\n    }));\n  }\n\n  let w = m(f(N, h), U),\n      P = N.thumbnail && N.thumbnail.href;\n  const S = N.thumbnail && N.thumbnail.imageData;\n  e() && (w = r(w), P = r(P));\n  const D = {\n    portal: g.portal,\n    url: l(n(w)),\n    origin: \"portal-item\"\n  };\n  return u(w, j).then(e => {\n    const r = \"cimRef\" === h ? p(e.data) : e.data,\n          o = i(r, D);\n\n    if (o && t(o)) {\n      if (P) {\n        const t = m(P, U);\n        o.thumbnail = new b({\n          url: t\n        });\n      } else S && (o.thumbnail = new b({\n        url: `data:image/png;base64,${S}`\n      }));\n\n      y.styleUrl ? o.styleOrigin = new a({\n        portal: g.portal,\n        styleUrl: y.styleUrl,\n        name: c\n      }) : y.styleName && (o.styleOrigin = new a({\n        portal: g.portal,\n        styleName: y.styleName,\n        name: c\n      }));\n    }\n\n    return o;\n  });\n}\n\nfunction j(t, e, r) {\n  const o = c.replace(/\\{SymbolName\\}/gi, t.name);\n  return u(o, r).then(t => {\n    const r = p(t.data);\n    return i(r, {\n      portal: e.portal,\n      url: l(n(o)),\n      origin: \"portal-item\"\n    });\n  });\n}\n\nexport { h as fetchSymbolFromStyle, g as resolveWebStyleSymbol };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"names":["isSymbol3D","t","isDevEnvironment","e","adjustStaticAGOUrl","r","o","urlToObject","l","removeFile","n","s","f","m","fromJSON","i","a","requestJSON","u","makeCIMSymbolRef","p","fetchStyle","y","symbolUrlFromStyleItem","Style2DUrlTemplate","c","Thumbnail","b","g","name","styleName","j","then","h","Promise","reject","d","data","U","portal","getDefault","url","baseUrl","origin","N","items","find","symbolName","w","P","thumbnail","href","S","imageData","D","styleUrl","styleOrigin","replace","fetchSymbolFromStyle","resolveWebStyleSymbol"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import o from\"../../core/Error.js\";import{urlToObject as l,removeFile as n}from\"../../core/urlUtils.js\";import s from\"../../portal/Portal.js\";import{f as m}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as i}from\"./jsonUtils.js\";import a from\"./StyleOrigin.js\";import{requestJSON as u,makeCIMSymbolRef as p,fetchStyle as y,symbolUrlFromStyleItem as f,Style2DUrlTemplate as c}from\"./styleUtils.js\";import{Thumbnail as b}from\"./Thumbnail.js\";function g(t,e,r,l){return t.name?t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName?j(t,e,l):y(t,e,l).then((o=>h(o,t.name,e,r,l))):Promise.reject(new o(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\"))}function h(y,c,g,h,j){const d=y.data,U={portal:g&&g.portal||s.getDefault(),url:l(y.baseUrl),origin:\"portal-item\"},N=d.items.find((t=>t.name===c));if(!N){const t=`The symbol name '${c}' could not be found`;return Promise.reject(new o(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:c}))}let w=m(f(N,h),U),P=N.thumbnail&&N.thumbnail.href;const S=N.thumbnail&&N.thumbnail.imageData;e()&&(w=r(w),P=r(P));const D={portal:g.portal,url:l(n(w)),origin:\"portal-item\"};return u(w,j).then((e=>{const r=\"cimRef\"===h?p(e.data):e.data,o=i(r,D);if(o&&t(o)){if(P){const t=m(P,U);o.thumbnail=new b({url:t})}else S&&(o.thumbnail=new b({url:`data:image/png;base64,${S}`}));y.styleUrl?o.styleOrigin=new a({portal:g.portal,styleUrl:y.styleUrl,name:c}):y.styleName&&(o.styleOrigin=new a({portal:g.portal,styleName:y.styleName,name:c}))}return o}))}function j(t,e,r){const o=c.replace(/\\{SymbolName\\}/gi,t.name);return u(o,r).then((t=>{const r=p(t.data);return i(r,{portal:e.portal,url:l(n(o)),origin:\"portal-item\"})}))}export{h as fetchSymbolFromStyle,g as resolveWebStyleSymbol};\n"]},"metadata":{},"sourceType":"module"}