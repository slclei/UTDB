{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { ContextType as e } from \"./context-util.js\";\nimport { PixelType as t, TextureType as n, PixelFormat as a, SizedPixelFormat as r, TextureSamplingMode as i, TextureWrapMode as o, TargetType as s, DepthStencilTargetType as u, UniformType as f } from \"./enums.js\";\nimport { FramebufferObject as l } from \"./FramebufferObject.js\";\nimport { Texture as m } from \"./Texture.js\";\n\nfunction c(s, u) {\n  let f = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"nearest\";\n  let l = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n  var c;\n\n  const _ = !(l && \"u8\" === u.pixelType),\n        p = _ ? t.FLOAT : t.UNSIGNED_BYTE,\n        E = null == u.pixels || 0 === u.pixels.length ? null : _ ? u.getAsRGBAFloat() : u.getAsRGBA(),\n        T = null == (c = s.capabilities.textureFloat) ? void 0 : c.textureFloatLinear,\n        g = {\n    width: u.width,\n    height: u.height,\n    target: n.TEXTURE_2D,\n    pixelFormat: a.RGBA,\n    internalFormat: s.type === e.WEBGL2 && _ ? r.RGBA32F : a.RGBA,\n    samplingMode: !T || \"bilinear\" !== f && \"cubic\" !== f ? i.NEAREST : i.LINEAR,\n    dataType: p,\n    wrapMode: o.CLAMP_TO_EDGE,\n    flipped: !1\n  };\n\n  return new m(s, g, E);\n}\n\nfunction _(e, r, f, c) {\n  const _ = c ? t.UNSIGNED_BYTE : t.FLOAT,\n        p = {\n    width: r,\n    height: f,\n    target: n.TEXTURE_2D,\n    pixelFormat: a.RGBA,\n    internalFormat: a.RGBA,\n    samplingMode: i.NEAREST,\n    dataType: _,\n    wrapMode: o.CLAMP_TO_EDGE,\n    flipped: !1\n  },\n        E = new m(e, p);\n\n  return new l(e, {\n    colorTarget: s.TEXTURE,\n    depthStencilTarget: u.DEPTH_STENCIL_RENDER_BUFFER,\n    width: r,\n    height: f\n  }, E);\n}\n\nfunction p(s, u) {\n  const {\n    spacing: f,\n    offsets: l,\n    coefficients: c,\n    size: [_, p]\n  } = u,\n        E = f[0] > 1,\n        T = {\n    width: E ? 4 * _ : _,\n    height: p,\n    target: n.TEXTURE_2D,\n    pixelFormat: a.RGBA,\n    internalFormat: s.type === e.WEBGL2 ? r.RGBA32F : a.RGBA,\n    dataType: t.FLOAT,\n    samplingMode: i.NEAREST,\n    wrapMode: o.CLAMP_TO_EDGE,\n    flipped: !1\n  },\n        g = new Float32Array(E ? _ * p * 16 : 2 * l.length);\n  if (E) for (let e = 0, t = 0; e < c.length; e++) g[t++] = c[e], e % 3 == 2 && (g[t++] = 1);else for (let e = 0; e < p; e++) for (let t = 0; t < _; t++) {\n    const n = 4 * (e * _ + t),\n          a = 2 * (t * p + e);\n    g[n] = l[a], g[n + 1] = l[a + 1], g[n + 3] = -1 === l[a] ? 0 : 1;\n  }\n  return new m(s, T, g);\n}\n\nfunction E(e, r) {\n  const s = {\n    width: r.length / 4,\n    height: 1,\n    target: n.TEXTURE_2D,\n    pixelFormat: a.RGBA,\n    internalFormat: a.RGBA,\n    dataType: t.UNSIGNED_BYTE,\n    samplingMode: i.NEAREST,\n    wrapMode: o.CLAMP_TO_EDGE,\n    flipped: !1\n  };\n  return new m(e, s, r);\n}\n\nfunction T(e, t, n) {\n  let a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  let r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !0;\n  let i = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : !1;\n  return {\n    u_flipY: r,\n    u_isFloatTexture: i,\n    u_applyTransform: !!e,\n    u_opacity: a,\n    u_transformSpacing: e ? e.spacing : null,\n    u_transformGridSize: e ? e.size : null,\n    u_targetImageSize: t,\n    u_srcImageSize: n\n  };\n}\n\nfunction g(e, t) {\n  return {\n    u_colormapOffset: t || 0,\n    u_colormapMaxIndex: e ? e.length / 4 - 1 : null\n  };\n}\n\nfunction A(e, t) {\n  return {\n    u_scale: e,\n    u_offset: t\n  };\n}\n\nfunction h(e) {\n  return {\n    u_bandCount: e.bandCount,\n    u_minOutput: e.outMin,\n    u_maxOutput: e.outMax,\n    u_minCutOff: e.minCutOff,\n    u_maxCutOff: e.maxCutOff,\n    u_factor: e.factor,\n    u_useGamma: e.useGamma,\n    u_gamma: e.gamma,\n    u_gammaCorrection: e.gammaCorrection\n  };\n}\n\nfunction d(e) {\n  return {\n    u_hillshadeType: e.hillshadeType,\n    u_sinZcosAs: e.sinZcosAs,\n    u_sinZsinAs: e.sinZsinAs,\n    u_cosZs: e.cosZs,\n    u_weights: e.weights,\n    u_factor: e.factor,\n    u_minValue: e.minValue,\n    u_maxValue: e.maxValue\n  };\n}\n\nfunction O(e, t) {\n  const n = e.gl,\n        a = t.glName,\n        r = n.getProgramParameter(a, n.ACTIVE_UNIFORMS),\n        i = new Map();\n  let o;\n\n  for (let s = 0; s < r; s++) o = n.getActiveUniform(a, s), o && i.set(o.name, {\n    location: n.getUniformLocation(a, o.name),\n    info: o\n  });\n\n  return i;\n}\n\nfunction F(e, t, n) {\n  Object.keys(n).forEach(a => {\n    const r = t.get(a) || t.get(a + \"[0]\");\n    r && U(e, a, n[a], r);\n  });\n}\n\nfunction R(e, t, n, a) {\n  n.length === a.length && (a.some(e => null == e) || n.some(e => null == e) || n.forEach((n, r) => {\n    t.setUniform1i(n, r), e.bindTexture(a[r], r);\n  }));\n}\n\nfunction U(e, t, n, a) {\n  if (null === a || null == n) return !1;\n  const {\n    info: r\n  } = a;\n\n  switch (r.type) {\n    case f.FLOAT:\n      r.size > 1 ? e.setUniform1fv(t, n) : e.setUniform1f(t, n);\n      break;\n\n    case f.FLOAT_VEC2:\n      e.setUniform2fv(t, n);\n      break;\n\n    case f.FLOAT_VEC3:\n      e.setUniform3fv(t, n);\n      break;\n\n    case f.FLOAT_VEC4:\n      e.setUniform4fv(t, n);\n      break;\n\n    case f.FLOAT_MAT3:\n      e.setUniformMatrix3fv(t, n);\n      break;\n\n    case f.FLOAT_MAT4:\n      e.setUniformMatrix4fv(t, n);\n      break;\n\n    case f.INT:\n      r.size > 1 ? e.setUniform1iv(t, n) : e.setUniform1i(t, n);\n      break;\n\n    case f.BOOL:\n      e.setUniform1i(t, n ? 1 : 0);\n      break;\n\n    case f.INT_VEC2:\n    case f.BOOL_VEC2:\n      e.setUniform2iv(t, n);\n      break;\n\n    case f.INT_VEC3:\n    case f.BOOL_VEC3:\n      e.setUniform3iv(t, n);\n      break;\n\n    case f.INT_VEC4:\n    case f.BOOL_VEC4:\n      e.setUniform4iv(t, n);\n      break;\n\n    default:\n      return !1;\n  }\n\n  return !0;\n}\n\nexport { E as createColormapTexture, _ as createFrameBuffer, c as createRasterTexture, p as createTransformTexture, A as getBasicGridUniforms, g as getColormapUniforms, T as getCommonUniforms, d as getShadedReliefUniforms, h as getStretchUniforms, O as getUniformLocationInfos, R as setTextures, F as setUniforms };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/webgl/rasterUtils.js"],"names":["ContextType","e","PixelType","t","TextureType","n","PixelFormat","a","SizedPixelFormat","r","TextureSamplingMode","i","TextureWrapMode","o","TargetType","s","DepthStencilTargetType","u","UniformType","f","FramebufferObject","l","Texture","m","c","_","pixelType","p","FLOAT","UNSIGNED_BYTE","E","pixels","length","getAsRGBAFloat","getAsRGBA","T","capabilities","textureFloat","textureFloatLinear","g","width","height","target","TEXTURE_2D","pixelFormat","RGBA","internalFormat","type","WEBGL2","RGBA32F","samplingMode","NEAREST","LINEAR","dataType","wrapMode","CLAMP_TO_EDGE","flipped","colorTarget","TEXTURE","depthStencilTarget","DEPTH_STENCIL_RENDER_BUFFER","spacing","offsets","coefficients","size","Float32Array","u_flipY","u_isFloatTexture","u_applyTransform","u_opacity","u_transformSpacing","u_transformGridSize","u_targetImageSize","u_srcImageSize","u_colormapOffset","u_colormapMaxIndex","A","u_scale","u_offset","h","u_bandCount","bandCount","u_minOutput","outMin","u_maxOutput","outMax","u_minCutOff","minCutOff","u_maxCutOff","maxCutOff","u_factor","factor","u_useGamma","useGamma","u_gamma","gamma","u_gammaCorrection","gammaCorrection","d","u_hillshadeType","hillshadeType","u_sinZcosAs","sinZcosAs","u_sinZsinAs","sinZsinAs","u_cosZs","cosZs","u_weights","weights","u_minValue","minValue","u_maxValue","maxValue","O","gl","glName","getProgramParameter","ACTIVE_UNIFORMS","Map","getActiveUniform","set","name","location","getUniformLocation","info","F","Object","keys","forEach","get","U","R","some","setUniform1i","bindTexture","setUniform1fv","setUniform1f","FLOAT_VEC2","setUniform2fv","FLOAT_VEC3","setUniform3fv","FLOAT_VEC4","setUniform4fv","FLOAT_MAT3","setUniformMatrix3fv","FLOAT_MAT4","setUniformMatrix4fv","INT","setUniform1iv","BOOL","INT_VEC2","BOOL_VEC2","setUniform2iv","INT_VEC3","BOOL_VEC3","setUniform3iv","INT_VEC4","BOOL_VEC4","setUniform4iv","createColormapTexture","createFrameBuffer","createRasterTexture","createTransformTexture","getBasicGridUniforms","getColormapUniforms","getCommonUniforms","getShadedReliefUniforms","getStretchUniforms","getUniformLocationInfos","setTextures","setUniforms"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ContextType as e}from\"./context-util.js\";import{PixelType as t,TextureType as n,PixelFormat as a,SizedPixelFormat as r,TextureSamplingMode as i,TextureWrapMode as o,TargetType as s,DepthStencilTargetType as u,UniformType as f}from\"./enums.js\";import{FramebufferObject as l}from\"./FramebufferObject.js\";import{Texture as m}from\"./Texture.js\";function c(s,u,f=\"nearest\",l=!1){var c;const _=!(l&&\"u8\"===u.pixelType),p=_?t.FLOAT:t.UNSIGNED_BYTE,E=null==u.pixels||0===u.pixels.length?null:_?u.getAsRGBAFloat():u.getAsRGBA(),T=null==(c=s.capabilities.textureFloat)?void 0:c.textureFloatLinear,g={width:u.width,height:u.height,target:n.TEXTURE_2D,pixelFormat:a.RGBA,internalFormat:s.type===e.WEBGL2&&_?r.RGBA32F:a.RGBA,samplingMode:!T||\"bilinear\"!==f&&\"cubic\"!==f?i.NEAREST:i.LINEAR,dataType:p,wrapMode:o.CLAMP_TO_EDGE,flipped:!1};return new m(s,g,E)}function _(e,r,f,c){const _=c?t.UNSIGNED_BYTE:t.FLOAT,p={width:r,height:f,target:n.TEXTURE_2D,pixelFormat:a.RGBA,internalFormat:a.RGBA,samplingMode:i.NEAREST,dataType:_,wrapMode:o.CLAMP_TO_EDGE,flipped:!1},E=new m(e,p);return new l(e,{colorTarget:s.TEXTURE,depthStencilTarget:u.DEPTH_STENCIL_RENDER_BUFFER,width:r,height:f},E)}function p(s,u){const{spacing:f,offsets:l,coefficients:c,size:[_,p]}=u,E=f[0]>1,T={width:E?4*_:_,height:p,target:n.TEXTURE_2D,pixelFormat:a.RGBA,internalFormat:s.type===e.WEBGL2?r.RGBA32F:a.RGBA,dataType:t.FLOAT,samplingMode:i.NEAREST,wrapMode:o.CLAMP_TO_EDGE,flipped:!1},g=new Float32Array(E?_*p*16:2*l.length);if(E)for(let e=0,t=0;e<c.length;e++)g[t++]=c[e],e%3==2&&(g[t++]=1);else for(let e=0;e<p;e++)for(let t=0;t<_;t++){const n=4*(e*_+t),a=2*(t*p+e);g[n]=l[a],g[n+1]=l[a+1],g[n+3]=-1===l[a]?0:1}return new m(s,T,g)}function E(e,r){const s={width:r.length/4,height:1,target:n.TEXTURE_2D,pixelFormat:a.RGBA,internalFormat:a.RGBA,dataType:t.UNSIGNED_BYTE,samplingMode:i.NEAREST,wrapMode:o.CLAMP_TO_EDGE,flipped:!1};return new m(e,s,r)}function T(e,t,n,a=1,r=!0,i=!1){return{u_flipY:r,u_isFloatTexture:i,u_applyTransform:!!e,u_opacity:a,u_transformSpacing:e?e.spacing:null,u_transformGridSize:e?e.size:null,u_targetImageSize:t,u_srcImageSize:n}}function g(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:null}}function A(e,t){return{u_scale:e,u_offset:t}}function h(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function d(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function O(e,t){const n=e.gl,a=t.glName,r=n.getProgramParameter(a,n.ACTIVE_UNIFORMS),i=new Map;let o;for(let s=0;s<r;s++)o=n.getActiveUniform(a,s),o&&i.set(o.name,{location:n.getUniformLocation(a,o.name),info:o});return i}function F(e,t,n){Object.keys(n).forEach((a=>{const r=t.get(a)||t.get(a+\"[0]\");r&&U(e,a,n[a],r)}))}function R(e,t,n,a){n.length===a.length&&(a.some((e=>null==e))||n.some((e=>null==e))||n.forEach(((n,r)=>{t.setUniform1i(n,r),e.bindTexture(a[r],r)})))}function U(e,t,n,a){if(null===a||null==n)return!1;const{info:r}=a;switch(r.type){case f.FLOAT:r.size>1?e.setUniform1fv(t,n):e.setUniform1f(t,n);break;case f.FLOAT_VEC2:e.setUniform2fv(t,n);break;case f.FLOAT_VEC3:e.setUniform3fv(t,n);break;case f.FLOAT_VEC4:e.setUniform4fv(t,n);break;case f.FLOAT_MAT3:e.setUniformMatrix3fv(t,n);break;case f.FLOAT_MAT4:e.setUniformMatrix4fv(t,n);break;case f.INT:r.size>1?e.setUniform1iv(t,n):e.setUniform1i(t,n);break;case f.BOOL:e.setUniform1i(t,n?1:0);break;case f.INT_VEC2:case f.BOOL_VEC2:e.setUniform2iv(t,n);break;case f.INT_VEC3:case f.BOOL_VEC3:e.setUniform3iv(t,n);break;case f.INT_VEC4:case f.BOOL_VEC4:e.setUniform4iv(t,n);break;default:return!1}return!0}export{E as createColormapTexture,_ as createFrameBuffer,c as createRasterTexture,p as createTransformTexture,A as getBasicGridUniforms,g as getColormapUniforms,T as getCommonUniforms,d as getShadedReliefUniforms,h as getStretchUniforms,O as getUniformLocationInfos,R as setTextures,F as setUniforms};\n"]},"metadata":{},"sourceType":"module"}