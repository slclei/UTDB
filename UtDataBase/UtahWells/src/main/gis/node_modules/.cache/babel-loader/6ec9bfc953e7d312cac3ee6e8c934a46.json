{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../ArrayPool.js\";\nimport { equals as t } from \"../lang.js\";\nimport { ReentrantObjectPool as r } from \"../ReentrantObjectPool.js\";\nimport { schedule as o } from \"../scheduling.js\";\nimport { someSet as l } from \"../SetUtils.js\";\nimport { generateUID as n } from \"../uid.js\";\nimport { valueOf as i } from \"./get.js\";\nimport { reaction as s, reactionDeferred as u } from \"./trackingUtils.js\";\nimport { once as c, parse as a } from \"./utils.js\";\nvar d;\n!function (e) {\n  e[e.Untracked = 0] = \"Untracked\", e[e.Tracked = 1] = \"Tracked\";\n}(d || (d = {}));\n\nclass h {\n  constructor() {\n    this.uid = n(), this.removed = !1, this.type = null, this.oldValue = null, this.callback = null, this.getValue = null, this.target = null, this.path = null, this.equals = null;\n  }\n\n  static acquireUntracked(e, r, o, l, n) {\n    return this.pool.acquire(d.Untracked, e, r, o, l, n, t);\n  }\n\n  static acquireTracked(e, t, r, o) {\n    return this.pool.acquire(d.Tracked, e, t, r, null, null, o);\n  }\n\n  notify(e, t) {\n    this.type === d.Untracked ? this.callback.call(this.target, e, t, this.path, this.target) : this.callback.call(null, e, t);\n  }\n\n  acquire(e, t, r, o, l, i, s) {\n    this.uid = n(), this.removed = !1, this.type = e, this.oldValue = t, this.callback = r, this.getValue = o, this.target = l, this.path = i, this.equals = s;\n  }\n\n  release() {\n    this.target = this.path = this.oldValue = this.callback = this.getValue = null, this.uid = n(), this.removed = !0;\n  }\n\n}\n\nh.pool = new r(h);\nconst f = new e(),\n      m = new Set();\nlet p;\n\nfunction v(e) {\n  m.delete(e), m.add(e), p || (p = o(q));\n}\n\nfunction g(e) {\n  if (e.removed) return;\n  const t = e.oldValue,\n        r = e.getValue();\n  e.equals(t, r) || (e.oldValue = r, e.notify(r, t));\n}\n\nfunction k(e) {\n  const t = Array.from(m);\n\n  for (let r = 0; r < t.length; r++) {\n    const o = t[r];\n    o.target === e && (g(o), m.delete(o));\n  }\n}\n\nfunction _(e) {\n  for (const t of m.values()) t.target === e && (t.removed = !0);\n}\n\nfunction q() {\n  let e = 10;\n\n  for (; p && e--;) {\n    p = null;\n    const e = j(),\n          t = f.acquire();\n\n    for (const r of e) {\n      const e = r.uid;\n      g(r), e === r.uid && r.removed && t.push(r);\n    }\n\n    for (const r of m) r.removed && (t.push(r), m.delete(r));\n\n    for (const r of t) h.pool.release(r);\n\n    f.release(t), f.release(e), y.forEach(e => e());\n  }\n}\n\nfunction j() {\n  const e = f.acquire();\n  e.length = m.size;\n  let t = 0;\n\n  for (const r of m) e[t] = r, ++t;\n\n  return m.clear(), e;\n}\n\nconst y = new Set();\n\nfunction V(e) {\n  return y.add(e), {\n    remove() {\n      y.delete(e);\n    }\n\n  };\n}\n\nfunction U(e, t, r) {\n  let o = a(e, t, r, (e, t, r) => {\n    let l,\n        n,\n        s = u(() => i(e, t), (i, s) => {\n      e.__accessor__.destroyed || l && l.uid !== n ? o.remove() : (l || (l = h.acquireUntracked(i, r, s, e, t), n = l.uid), v(l));\n    });\n    return {\n      remove: c(() => {\n        s.remove(), l && (l.uid !== n || l.removed || (l.removed = !0, v(l)), l = null), o = s = null;\n      })\n    };\n  });\n  return o;\n}\n\nfunction b(e, r, o) {\n  const l = a(e, r, o, (e, r, o) => {\n    let n = !1;\n    return s(() => i(e, r), (i, s) => {\n      e.__accessor__.destroyed ? l.remove() : n || (n = !0, t(s, i) || o.call(e, i, s, r, e), n = !1);\n    });\n  });\n  return l;\n}\n\nfunction T(e, t, r) {\n  let o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !1;\n  return !e.__accessor__ || e.__accessor__.destroyed ? {\n    remove() {}\n\n  } : o ? b(e, t, r) : U(e, t, r);\n}\n\nfunction w(e, t, r) {\n  let o,\n      l,\n      n = u(e, (e, i) => {\n    o && o.uid !== l ? n.remove() : (o || (o = h.acquireTracked(e, t, i, r), l = o.uid), v(o));\n  });\n  return {\n    remove: c(() => {\n      n.remove(), o && (o.uid !== l || o.removed || (o.removed = !0, v(o)), o = null), n = null;\n    })\n  };\n}\n\nfunction S(e, t, r) {\n  let o = !1;\n  return s(e, (e, l) => {\n    o || (o = !0, r(l, e) || t(e, l), o = !1);\n  });\n}\n\nfunction A(e, r) {\n  let o = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n  let l = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : t;\n  return o ? S(e, r, l) : w(e, r, l);\n}\n\nfunction P(e) {\n  return l(m, t => t.oldValue === e);\n}\n\nexport { V as afterDispatch, q as dispatch, k as dispatchTarget, P as isValueInUse, _ as removeTarget, S as syncWatchTracked, T as watch, A as watchTracked };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/core/accessorSupport/watch.js"],"names":["e","equals","t","ReentrantObjectPool","r","schedule","o","someSet","l","generateUID","n","valueOf","i","reaction","s","reactionDeferred","u","once","c","parse","a","d","Untracked","Tracked","h","constructor","uid","removed","type","oldValue","callback","getValue","target","path","acquireUntracked","pool","acquire","acquireTracked","notify","call","release","f","m","Set","p","v","delete","add","q","g","k","Array","from","length","_","values","j","push","y","forEach","size","clear","V","remove","U","__accessor__","destroyed","b","T","w","S","A","P","afterDispatch","dispatch","dispatchTarget","isValueInUse","removeTarget","syncWatchTracked","watch","watchTracked"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../ArrayPool.js\";import{equals as t}from\"../lang.js\";import{ReentrantObjectPool as r}from\"../ReentrantObjectPool.js\";import{schedule as o}from\"../scheduling.js\";import{someSet as l}from\"../SetUtils.js\";import{generateUID as n}from\"../uid.js\";import{valueOf as i}from\"./get.js\";import{reaction as s,reactionDeferred as u}from\"./trackingUtils.js\";import{once as c,parse as a}from\"./utils.js\";var d;!function(e){e[e.Untracked=0]=\"Untracked\",e[e.Tracked=1]=\"Tracked\"}(d||(d={}));class h{constructor(){this.uid=n(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,r,o,l,n){return this.pool.acquire(d.Untracked,e,r,o,l,n,t)}static acquireTracked(e,t,r,o){return this.pool.acquire(d.Tracked,e,t,r,null,null,o)}notify(e,t){this.type===d.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t)}acquire(e,t,r,o,l,i,s){this.uid=n(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=r,this.getValue=o,this.target=l,this.path=i,this.equals=s}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=n(),this.removed=!0}}h.pool=new r(h);const f=new e,m=new Set;let p;function v(e){m.delete(e),m.add(e),p||(p=o(q))}function g(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function k(e){const t=Array.from(m);for(let r=0;r<t.length;r++){const o=t[r];o.target===e&&(g(o),m.delete(o))}}function _(e){for(const t of m.values())t.target===e&&(t.removed=!0)}function q(){let e=10;for(;p&&e--;){p=null;const e=j(),t=f.acquire();for(const r of e){const e=r.uid;g(r),e===r.uid&&r.removed&&t.push(r)}for(const r of m)r.removed&&(t.push(r),m.delete(r));for(const r of t)h.pool.release(r);f.release(t),f.release(e),y.forEach((e=>e()))}}function j(){const e=f.acquire();e.length=m.size;let t=0;for(const r of m)e[t]=r,++t;return m.clear(),e}const y=new Set;function V(e){return y.add(e),{remove(){y.delete(e)}}}function U(e,t,r){let o=a(e,t,r,((e,t,r)=>{let l,n,s=u((()=>i(e,t)),((i,s)=>{e.__accessor__.destroyed||l&&l.uid!==n?o.remove():(l||(l=h.acquireUntracked(i,r,s,e,t),n=l.uid),v(l))}));return{remove:c((()=>{s.remove(),l&&(l.uid!==n||l.removed||(l.removed=!0,v(l)),l=null),o=s=null}))}}));return o}function b(e,r,o){const l=a(e,r,o,((e,r,o)=>{let n=!1;return s((()=>i(e,r)),((i,s)=>{e.__accessor__.destroyed?l.remove():n||(n=!0,t(s,i)||o.call(e,i,s,r,e),n=!1)}))}));return l}function T(e,t,r,o=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:o?b(e,t,r):U(e,t,r)}function w(e,t,r){let o,l,n=u(e,((e,i)=>{o&&o.uid!==l?n.remove():(o||(o=h.acquireTracked(e,t,i,r),l=o.uid),v(o))}));return{remove:c((()=>{n.remove(),o&&(o.uid!==l||o.removed||(o.removed=!0,v(o)),o=null),n=null}))}}function S(e,t,r){let o=!1;return s(e,((e,l)=>{o||(o=!0,r(l,e)||t(e,l),o=!1)}))}function A(e,r,o=!1,l=t){return o?S(e,r,l):w(e,r,l)}function P(e){return l(m,(t=>t.oldValue===e))}export{V as afterDispatch,q as dispatch,k as dispatchTarget,P as isValueInUse,_ as removeTarget,S as syncWatchTracked,T as watch,A as watchTracked};\n"]},"metadata":{},"sourceType":"module"}