{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../../../core/has.js\";\nimport { isNone as e, isSome as r } from \"../../../../core/maybe.js\";\nimport { c as s } from \"../../../../chunks/mat3f32.js\";\nimport { brushes as t } from \"../brushes.js\";\nimport { Container as i } from \"../Container.js\";\nimport n from \"./ClippingInfo.js\";\nimport { WGLDrawPhase as o } from \"./enums.js\";\n\nclass a extends i {\n  constructor() {\n    super(...arguments), this.name = this.constructor.name;\n  }\n\n  set clips(e) {\n    this._clips = e, this.children.forEach(r => r.clips = e), this._updateClippingInfo();\n  }\n\n  _createTransforms() {\n    return {\n      dvs: s()\n    };\n  }\n\n  doRender(e) {\n    const r = this.createRenderParams(e),\n          {\n      painter: s,\n      globalOpacity: t,\n      profiler: i,\n      drawPhase: n\n    } = r,\n          a = n === o.LABEL || n === o.HIGHLIGHT ? 1 : t * this.computedOpacity;\n    i.recordContainerStart(this.name), s.beforeRenderLayer(r, this._clippingInfos ? 255 : 0, a), this.updateTransforms(e.state), this.renderChildren(r), s.compositeLayer(r, a), i.recordContainerEnd();\n  }\n\n  renderChildren(r) {\n    e(this._renderPasses) && (this._renderPasses = this.prepareRenderPasses(r.painter));\n\n    for (const e of this.children) e.beforeRender(r);\n\n    for (const e of this._renderPasses) try {\n      e.render(r);\n    } catch (s) {}\n\n    for (const e of this.children) e.afterRender(r);\n  }\n\n  createRenderParams(e) {\n    return e.requireFBO = this.requiresDedicatedFBO, e;\n  }\n\n  prepareRenderPasses(e) {\n    return [e.registerRenderPass({\n      name: \"clip\",\n      brushes: [t.clip],\n      target: () => this._clippingInfos,\n      drawPhase: o.MAP | o.LABEL | o.LABEL_ALPHA | o.DEBUG | o.HIGHLIGHT\n    })];\n  }\n\n  updateTransforms(e) {\n    for (const r of this.children) r.setTransform(e);\n  }\n\n  onAttach() {\n    super.onAttach(), this._updateClippingInfo();\n  }\n\n  onDetach() {\n    super.onDetach(), this._updateClippingInfo();\n  }\n\n  _updateClippingInfo() {\n    if (r(this._clippingInfos) && (this._clippingInfos.forEach(e => e.destroy()), this._clippingInfos = null), !this.stage) return;\n    const e = this._clips;\n    r(e) && e.length && (this._clippingInfos = e.items.map(e => n.fromClipArea(this.stage, e))), this.requestRender();\n  }\n\n}\n\nexport { a as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js"],"names":["isNone","e","isSome","r","c","s","brushes","t","Container","i","n","WGLDrawPhase","o","a","constructor","arguments","name","clips","_clips","children","forEach","_updateClippingInfo","_createTransforms","dvs","doRender","createRenderParams","painter","globalOpacity","profiler","drawPhase","LABEL","HIGHLIGHT","computedOpacity","recordContainerStart","beforeRenderLayer","_clippingInfos","updateTransforms","state","renderChildren","compositeLayer","recordContainerEnd","_renderPasses","prepareRenderPasses","beforeRender","render","afterRender","requireFBO","requiresDedicatedFBO","registerRenderPass","clip","target","MAP","LABEL_ALPHA","DEBUG","setTransform","onAttach","onDetach","destroy","stage","length","items","map","fromClipArea","requestRender","default"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAM,yBAAN;AAAgC,SAAOA,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,2BAAnC;AAA+D,SAAOC,CAAC,IAAIC,CAAZ,QAAkB,+BAAlB;AAAkD,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,eAAxB;AAAwC,SAAOC,SAAS,IAAIC,CAApB,QAA0B,iBAA1B;AAA4C,OAAOC,CAAP,MAAa,mBAAb;AAAiC,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,YAA7B;;AAA0C,MAAMC,CAAN,SAAgBJ,CAAhB,CAAiB;AAACK,EAAAA,WAAW,GAAE;AAAC,UAAM,GAAGC,SAAT,GAAoB,KAAKC,IAAL,GAAU,KAAKF,WAAL,CAAiBE,IAA/C;AAAoD;;AAAS,MAALC,KAAK,CAAChB,CAAD,EAAG;AAAC,SAAKiB,MAAL,GAAYjB,CAAZ,EAAc,KAAKkB,QAAL,CAAcC,OAAd,CAAuBjB,CAAC,IAAEA,CAAC,CAACc,KAAF,GAAQhB,CAAlC,CAAd,EAAoD,KAAKoB,mBAAL,EAApD;AAA+E;;AAAAC,EAAAA,iBAAiB,GAAE;AAAC,WAAM;AAACC,MAAAA,GAAG,EAAClB,CAAC;AAAN,KAAN;AAAgB;;AAAAmB,EAAAA,QAAQ,CAACvB,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKsB,kBAAL,CAAwBxB,CAAxB,CAAR;AAAA,UAAmC;AAACyB,MAAAA,OAAO,EAACrB,CAAT;AAAWsB,MAAAA,aAAa,EAACpB,CAAzB;AAA2BqB,MAAAA,QAAQ,EAACnB,CAApC;AAAsCoB,MAAAA,SAAS,EAACnB;AAAhD,QAAmDP,CAAtF;AAAA,UAAwFU,CAAC,GAACH,CAAC,KAAGE,CAAC,CAACkB,KAAN,IAAapB,CAAC,KAAGE,CAAC,CAACmB,SAAnB,GAA6B,CAA7B,GAA+BxB,CAAC,GAAC,KAAKyB,eAAhI;AAAgJvB,IAAAA,CAAC,CAACwB,oBAAF,CAAuB,KAAKjB,IAA5B,GAAkCX,CAAC,CAAC6B,iBAAF,CAAoB/B,CAApB,EAAsB,KAAKgC,cAAL,GAAoB,GAApB,GAAwB,CAA9C,EAAgDtB,CAAhD,CAAlC,EAAqF,KAAKuB,gBAAL,CAAsBnC,CAAC,CAACoC,KAAxB,CAArF,EAAoH,KAAKC,cAAL,CAAoBnC,CAApB,CAApH,EAA2IE,CAAC,CAACkC,cAAF,CAAiBpC,CAAjB,EAAmBU,CAAnB,CAA3I,EAAiKJ,CAAC,CAAC+B,kBAAF,EAAjK;AAAwL;;AAAAF,EAAAA,cAAc,CAACnC,CAAD,EAAG;AAACF,IAAAA,CAAC,CAAC,KAAKwC,aAAN,CAAD,KAAwB,KAAKA,aAAL,GAAmB,KAAKC,mBAAL,CAAyBvC,CAAC,CAACuB,OAA3B,CAA3C;;AAAgF,SAAI,MAAMzB,CAAV,IAAe,KAAKkB,QAApB,EAA6BlB,CAAC,CAAC0C,YAAF,CAAexC,CAAf;;AAAkB,SAAI,MAAMF,CAAV,IAAe,KAAKwC,aAApB,EAAkC,IAAG;AAACxC,MAAAA,CAAC,CAAC2C,MAAF,CAASzC,CAAT;AAAY,KAAhB,CAAgB,OAAME,CAAN,EAAQ,CAAE;;AAAA,SAAI,MAAMJ,CAAV,IAAe,KAAKkB,QAApB,EAA6BlB,CAAC,CAAC4C,WAAF,CAAc1C,CAAd;AAAiB;;AAAAsB,EAAAA,kBAAkB,CAACxB,CAAD,EAAG;AAAC,WAAOA,CAAC,CAAC6C,UAAF,GAAa,KAAKC,oBAAlB,EAAuC9C,CAA9C;AAAgD;;AAAAyC,EAAAA,mBAAmB,CAACzC,CAAD,EAAG;AAAC,WAAM,CAACA,CAAC,CAAC+C,kBAAF,CAAqB;AAAChC,MAAAA,IAAI,EAAC,MAAN;AAAaV,MAAAA,OAAO,EAAC,CAACC,CAAC,CAAC0C,IAAH,CAArB;AAA8BC,MAAAA,MAAM,EAAC,MAAI,KAAKf,cAA9C;AAA6DN,MAAAA,SAAS,EAACjB,CAAC,CAACuC,GAAF,GAAMvC,CAAC,CAACkB,KAAR,GAAclB,CAAC,CAACwC,WAAhB,GAA4BxC,CAAC,CAACyC,KAA9B,GAAoCzC,CAAC,CAACmB;AAA7G,KAArB,CAAD,CAAN;AAAsJ;;AAAAK,EAAAA,gBAAgB,CAACnC,CAAD,EAAG;AAAC,SAAI,MAAME,CAAV,IAAe,KAAKgB,QAApB,EAA6BhB,CAAC,CAACmD,YAAF,CAAerD,CAAf;AAAkB;;AAAAsD,EAAAA,QAAQ,GAAE;AAAC,UAAMA,QAAN,IAAiB,KAAKlC,mBAAL,EAAjB;AAA4C;;AAAAmC,EAAAA,QAAQ,GAAE;AAAC,UAAMA,QAAN,IAAiB,KAAKnC,mBAAL,EAAjB;AAA4C;;AAAAA,EAAAA,mBAAmB,GAAE;AAAC,QAAGlB,CAAC,CAAC,KAAKgC,cAAN,CAAD,KAAyB,KAAKA,cAAL,CAAoBf,OAApB,CAA6BnB,CAAC,IAAEA,CAAC,CAACwD,OAAF,EAAhC,GAA8C,KAAKtB,cAAL,GAAoB,IAA3F,GAAiG,CAAC,KAAKuB,KAA1G,EAAgH;AAAO,UAAMzD,CAAC,GAAC,KAAKiB,MAAb;AAAoBf,IAAAA,CAAC,CAACF,CAAD,CAAD,IAAMA,CAAC,CAAC0D,MAAR,KAAiB,KAAKxB,cAAL,GAAoBlC,CAAC,CAAC2D,KAAF,CAAQC,GAAR,CAAa5D,CAAC,IAAES,CAAC,CAACoD,YAAF,CAAe,KAAKJ,KAApB,EAA0BzD,CAA1B,CAAhB,CAArC,GAAqF,KAAK8D,aAAL,EAArF;AAA0G;;AAAj8C;;AAAk8C,SAAOlD,CAAC,IAAImD,OAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isNone as e,isSome as r}from\"../../../../core/maybe.js\";import{c as s}from\"../../../../chunks/mat3f32.js\";import{brushes as t}from\"../brushes.js\";import{Container as i}from\"../Container.js\";import n from\"./ClippingInfo.js\";import{WGLDrawPhase as o}from\"./enums.js\";class a extends i{constructor(){super(...arguments),this.name=this.constructor.name}set clips(e){this._clips=e,this.children.forEach((r=>r.clips=e)),this._updateClippingInfo()}_createTransforms(){return{dvs:s()}}doRender(e){const r=this.createRenderParams(e),{painter:s,globalOpacity:t,profiler:i,drawPhase:n}=r,a=n===o.LABEL||n===o.HIGHLIGHT?1:t*this.computedOpacity;i.recordContainerStart(this.name),s.beforeRenderLayer(r,this._clippingInfos?255:0,a),this.updateTransforms(e.state),this.renderChildren(r),s.compositeLayer(r,a),i.recordContainerEnd()}renderChildren(r){e(this._renderPasses)&&(this._renderPasses=this.prepareRenderPasses(r.painter));for(const e of this.children)e.beforeRender(r);for(const e of this._renderPasses)try{e.render(r)}catch(s){}for(const e of this.children)e.afterRender(r)}createRenderParams(e){return e.requireFBO=this.requiresDedicatedFBO,e}prepareRenderPasses(e){return[e.registerRenderPass({name:\"clip\",brushes:[t.clip],target:()=>this._clippingInfos,drawPhase:o.MAP|o.LABEL|o.LABEL_ALPHA|o.DEBUG|o.HIGHLIGHT})]}updateTransforms(e){for(const r of this.children)r.setTransform(e)}onAttach(){super.onAttach(),this._updateClippingInfo()}onDetach(){super.onDetach(),this._updateClippingInfo()}_updateClippingInfo(){if(r(this._clippingInfos)&&(this._clippingInfos.forEach((e=>e.destroy())),this._clippingInfos=null),!this.stage)return;const e=this._clips;r(e)&&e.length&&(this._clippingInfos=e.items.map((e=>n.fromClipArea(this.stage,e)))),this.requestRender()}}export{a as default};\n"]},"metadata":{},"sourceType":"module"}