{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { getAssetUrl as e } from \"../../assets.js\";\nimport { toHSV as t, toRGB as s } from \"../../core/colorUtils.js\";\nimport \"../../core/has.js\";\nimport r from \"../../core/Error.js\";\nimport o from \"../../core/Logger.js\";\nimport { isNone as n, isSome as a } from \"../../core/maybe.js\";\nimport { eachAlways as l } from \"../../core/promiseUtils.js\";\nimport { pt2px as i } from \"../../core/screenUtils.js\";\nimport { defaultThematicColor as c, getPatternUrlWithColor as p, dekebabifyLineStyle as u } from \"./gfxUtils.js\";\nimport { defaultPrimitive as h } from \"./IconSymbol3DLayerResource.js\";\nimport { defaultPrimitive as m } from \"./ObjectSymbol3DLayerResource.js\";\nimport { SymbolSizeDefaults as f, adjustColorComponentBrightness as y, getPathSymbolShapes as d, shapes as b, getExtrudeSymbolShapes as v, getTetrahedronShapes as g, getDiamondShapes as k, getCylinderShapes as w, getCubeShapes as x, getInvertedConeShapes as M, getConeShapes as j, getWaterSymbolShapes as L } from \"./previewUtils.js\";\nimport { renderSymbol as z, tintImageWithColor as S } from \"./renderUtils.js\";\nimport { isVolumetricSymbol as P, getIconHref as U } from \"./utils.js\";\nimport { resolveWebStyleSymbol as D } from \"./webStyleSymbolUtils.js\";\nconst O = f.size,\n      C = f.maxSize,\n      I = f.maxOutlineSize,\n      R = f.lineWidth,\n      E = f.tallSymbolWidth,\n      Z = o.getLogger(\"esri.symbols.support.previewSymbol3D\");\n\nfunction q(e) {\n  const t = e.outline,\n        s = a(e.material) ? e.material.color : null,\n        r = a(s) ? s.toHex() : null;\n  if (n(t) || \"pattern\" in t && a(t.pattern) && \"style\" === t.pattern.type && \"none\" === t.pattern.style) return \"fill\" === e.type && \"#ffffff\" === r ? {\n    color: \"#bdc3c7\",\n    width: .75\n  } : null;\n  const o = i(t.size) || 0;\n  return {\n    color: \"rgba(\" + (a(t.color) ? t.color.toRgba() : \"255,255,255,1\") + \")\",\n    width: Math.min(o, I),\n    style: \"pattern\" in t && a(t.pattern) && \"style\" === t.pattern.type ? u(t.pattern.style) : null,\n    join: \"butt\",\n    cap: \"patternCap\" in t ? t.patternCap : \"butt\"\n  };\n}\n\nfunction A(t, s) {\n  const r = s && s.resource,\n        o = r && r.href;\n  if (t.thumbnail && t.thumbnail.url) return Promise.resolve(t.thumbnail.url);\n  if (o && \"object\" !== s.type) return Promise.resolve(U(t, s));\n  const n = e(\"esri/images/Legend/legend3dsymboldefault.png\");\n  return t.styleOrigin && (t.styleOrigin.styleName || t.styleOrigin.styleUrl) ? D(t.styleOrigin, {\n    portal: t.styleOrigin.portal\n  }, \"webRef\").catch(e => e).then(e => {\n    var t;\n    return (null == e || null == (t = e.thumbnail) ? void 0 : t.url) || n;\n  }) : Promise.resolve(n);\n}\n\nfunction H(e) {\n  let r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  const o = e.a,\n        n = t(e),\n        a = n.h,\n        l = n.s / r,\n        i = 100 - (100 - n.v) / r,\n        {\n    r: c,\n    g: p,\n    b: u\n  } = s({\n    h: a,\n    s: l,\n    v: i\n  });\n  return [c, p, u, o];\n}\n\nfunction N(e) {\n  return \"water\" === e.type ? n(e.color) ? null : e.color : n(e.material) || n(e.material.color) ? null : e.material.color;\n}\n\nfunction T(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  const s = N(e);\n\n  if (!s) {\n    if (\"fill\" === e.type) return null;\n    const s = c.r,\n          r = y(s, t);\n    return [r, r, r, 100];\n  }\n\n  const r = s.toRgba();\n\n  for (let o = 0; o < 3; o++) r[o] = y(r[o], t);\n\n  return r;\n}\n\nasync function W(t, s) {\n  const r = t.style;\n  if (\"none\" === r) return null;\n  return {\n    type: \"pattern\",\n    x: 0,\n    y: 0,\n    src: await p(e(`esri/symbols/patterns/${r}.png`), s.toCss(!0)),\n    width: 5,\n    height: 5\n  };\n}\n\nfunction $(e) {\n  return e.outline ? q(e) : {\n    color: \"rgba(0, 0, 0, 1)\",\n    width: 1.5\n  };\n}\n\nfunction B(e, t) {\n  const s = N(e);\n  if (!s) return null;\n  let r = \"rgba(\";\n  return r += y(s.r, t) + \",\", r += y(s.g, t) + \",\", r += y(s.b, t) + \",\", r + s.a + \");\";\n}\n\nfunction F(e, t) {\n  const s = B(e, t);\n  if (!s) return {};\n  if (\"pattern\" in e && a(e.pattern) && \"style\" === e.pattern.type && \"none\" === e.pattern.style) return null;\n  return {\n    color: s,\n    width: Math.min(e.size ? i(e.size) : .75, I),\n    style: \"pattern\" in e && a(e.pattern) && \"style\" === e.pattern.type ? u(e.pattern.style) : null,\n    cap: \"cap\" in e ? e.cap : null,\n    join: \"join\" in e ? \"miter\" === e.join ? i(2) : e.join : null\n  };\n}\n\nfunction G(e, t, s) {\n  const r = .75 * s;\n  return {\n    type: \"linear\",\n    x1: r ? .25 * r : 0,\n    y1: r ? .5 * r : 0,\n    x2: r || 4,\n    y2: r ? .5 * r : 4,\n    colors: [{\n      color: e,\n      offset: 0\n    }, {\n      color: t,\n      offset: 1\n    }]\n  };\n}\n\nfunction J(e) {\n  const t = e.depth,\n        s = e.height,\n        r = e.width;\n  return r && t && s && r === t && r < s;\n}\n\nfunction K(e, t, s) {\n  const r = [];\n  if (!e) return r;\n\n  switch (e.type) {\n    case \"icon\":\n      {\n        const s = 0,\n              o = 0,\n              n = t,\n              a = t;\n\n        switch (e.resource && e.resource.primitive || h) {\n          case \"circle\":\n            r.push({\n              shape: {\n                type: \"circle\",\n                cx: 0,\n                cy: 0,\n                r: .5 * t\n              },\n              fill: T(e, 0),\n              stroke: q(e)\n            });\n            break;\n\n          case \"square\":\n            r.push({\n              shape: {\n                type: \"path\",\n                path: [{\n                  command: \"M\",\n                  values: [s, a]\n                }, {\n                  command: \"L\",\n                  values: [s, o]\n                }, {\n                  command: \"L\",\n                  values: [n, o]\n                }, {\n                  command: \"L\",\n                  values: [n, a]\n                }, {\n                  command: \"Z\",\n                  values: []\n                }]\n              },\n              fill: T(e, 0),\n              stroke: q(e)\n            });\n            break;\n\n          case \"triangle\":\n            r.push({\n              shape: {\n                type: \"path\",\n                path: [{\n                  command: \"M\",\n                  values: [s, a]\n                }, {\n                  command: \"L\",\n                  values: [.5 * n, o]\n                }, {\n                  command: \"L\",\n                  values: [n, a]\n                }, {\n                  command: \"Z\",\n                  values: []\n                }]\n              },\n              fill: T(e, 0),\n              stroke: q(e)\n            });\n            break;\n\n          case \"cross\":\n            r.push({\n              shape: {\n                type: \"path\",\n                path: [{\n                  command: \"M\",\n                  values: [.5 * n, o]\n                }, {\n                  command: \"L\",\n                  values: [.5 * n, a]\n                }, {\n                  command: \"M\",\n                  values: [s, .5 * a]\n                }, {\n                  command: \"L\",\n                  values: [n, .5 * a]\n                }]\n              },\n              stroke: $(e)\n            });\n            break;\n\n          case \"x\":\n            r.push({\n              shape: {\n                type: \"path\",\n                path: [{\n                  command: \"M\",\n                  values: [s, o]\n                }, {\n                  command: \"L\",\n                  values: [n, a]\n                }, {\n                  command: \"M\",\n                  values: [n, o]\n                }, {\n                  command: \"L\",\n                  values: [s, a]\n                }]\n              },\n              stroke: $(e)\n            });\n            break;\n\n          case \"kite\":\n            r.push({\n              shape: {\n                type: \"path\",\n                path: [{\n                  command: \"M\",\n                  values: [s, .5 * a]\n                }, {\n                  command: \"L\",\n                  values: [.5 * n, o]\n                }, {\n                  command: \"L\",\n                  values: [n, .5 * a]\n                }, {\n                  command: \"L\",\n                  values: [.5 * n, a]\n                }, {\n                  command: \"Z\",\n                  values: []\n                }]\n              },\n              fill: T(e, 0),\n              stroke: q(e)\n            });\n        }\n\n        break;\n      }\n\n    case \"object\":\n      switch (e.resource && e.resource.primitive || m) {\n        case \"cone\":\n          {\n            const o = G(T(e, 0), T(e, -.6), s ? E : t),\n                  n = j(t, s);\n            r.push({\n              shape: n[0],\n              fill: o\n            }), r.push({\n              shape: n[1],\n              fill: o\n            });\n            break;\n          }\n\n        case \"inverted-cone\":\n          {\n            const s = T(e, 0),\n                  o = G(s, T(e, -.6), t),\n                  n = M(t);\n            r.push({\n              shape: n[0],\n              fill: o\n            }), r.push({\n              shape: n[1],\n              fill: s\n            });\n            break;\n          }\n\n        case \"cube\":\n          {\n            const o = x(t, s);\n            r.push({\n              shape: o[0],\n              fill: T(e, 0)\n            }), r.push({\n              shape: o[1],\n              fill: T(e, -.3)\n            }), r.push({\n              shape: o[2],\n              fill: T(e, -.5)\n            });\n            break;\n          }\n\n        case \"cylinder\":\n          {\n            const o = G(T(e, 0), T(e, -.6), s ? E : t),\n                  n = w(t, s);\n            r.push({\n              shape: n[0],\n              fill: o\n            }), r.push({\n              shape: n[1],\n              fill: o\n            }), r.push({\n              shape: n[2],\n              fill: T(e, 0)\n            });\n            break;\n          }\n\n        case \"diamond\":\n          {\n            const s = k(t);\n            r.push({\n              shape: s[0],\n              fill: T(e, -.3)\n            }), r.push({\n              shape: s[1],\n              fill: T(e, 0)\n            }), r.push({\n              shape: s[2],\n              fill: T(e, -.3)\n            }), r.push({\n              shape: s[3],\n              fill: T(e, -.7)\n            });\n            break;\n          }\n\n        case \"sphere\":\n          {\n            const s = G(T(e, 0), T(e, -.6));\n            s.x1 = 0, s.y1 = 0, s.x2 = .25 * t, s.y2 = .25 * t, r.push({\n              shape: {\n                type: \"circle\",\n                cx: 0,\n                cy: 0,\n                r: .5 * t\n              },\n              fill: s\n            });\n            break;\n          }\n\n        case \"tetrahedron\":\n          {\n            const s = g(t);\n            r.push({\n              shape: s[0],\n              fill: T(e, -.3)\n            }), r.push({\n              shape: s[1],\n              fill: T(e, 0)\n            }), r.push({\n              shape: s[2],\n              fill: T(e, -.6)\n            });\n            break;\n          }\n      }\n\n      break;\n  }\n\n  return r;\n}\n\nfunction Q(e) {\n  const t = \"number\" == typeof (null == e ? void 0 : e.size) ? null == e ? void 0 : e.size : null;\n  return t ? i(t) : null;\n}\n\nfunction V(e) {\n  return \"icon\" === e.type ? \"multiply\" : \"tint\";\n}\n\nfunction X(e, t) {\n  const s = Q(t),\n        r = t && t.maxSize ? i(t.maxSize) : null,\n        o = t && t.disableUpsampling,\n        n = e.symbolLayers,\n        a = [];\n  let c = 0,\n      p = 0;\n  const u = n.getItemAt(n.length - 1);\n  let h;\n  return u && \"icon\" === u.type && (h = u.size && i(u.size)), n.forEach(n => {\n    if (\"icon\" !== n.type && \"object\" !== n.type) return;\n    const l = \"icon\" === n.type ? n.size && i(n.size) : 0,\n          u = s || l ? Math.ceil(Math.min(s || l, r || C)) : O;\n\n    if (n && n.resource && n.resource.href) {\n      const t = A(e, n).then(function (e) {\n        const t = n.get(\"material.color\"),\n              s = V(n);\n        return S(e, u, t, s, o);\n      }).then(function (e) {\n        const t = e.width,\n              s = e.height;\n        return c = Math.max(c, t), p = Math.max(p, s), [{\n          shape: {\n            type: \"image\",\n            x: 0,\n            y: 0,\n            width: t,\n            height: s,\n            src: e.url\n          },\n          fill: null,\n          stroke: null\n        }];\n      });\n      a.push(t);\n    } else {\n      var m;\n      let e = u;\n      \"icon\" === n.type && h && s && (e = u * (l / h));\n      const r = \"tall\" === (null == t ? void 0 : t.symbolConfig) || (null == t || null == (m = t.symbolConfig) ? void 0 : m.isTall) || \"object\" === n.type && J(n);\n      c = Math.max(c, r ? E : e), p = Math.max(p, e), a.push(Promise.resolve(K(n, e, r)));\n    }\n  }), l(a).then(function (e) {\n    const s = [];\n    return e.forEach(function (e) {\n      e.value ? s.push(e.value) : e.error && Z.warn(\"error while building swatchInfo!\", e.error);\n    }), z(s, [c, p], {\n      node: t && t.node,\n      scale: !1,\n      opacity: t && t.opacity\n    });\n  });\n}\n\nfunction Y(e, t) {\n  const s = e.symbolLayers,\n        r = [],\n        o = P(e),\n        a = Q(t),\n        l = (t && t.maxSize ? i(t.maxSize) : null) || I;\n  let c,\n      p = 0,\n      u = 0;\n  return s.forEach((e, t) => {\n    if (!e) return;\n    if (\"line\" !== e.type && \"path\" !== e.type) return;\n    const s = [];\n\n    switch (e.type) {\n      case \"line\":\n        {\n          const r = F(e, 0);\n          if (n(r)) break;\n          const o = r && r.width || 0;\n          0 === t && (c = o);\n          const i = Math.min(a || o, l),\n                h = 0 === t ? i : a ? i * (o / c) : i,\n                m = h > R / 2 ? 2 * h : R;\n          u = Math.max(u, h), p = Math.max(p, m), r.width = h, s.push({\n            shape: {\n              type: \"path\",\n              path: [{\n                command: \"M\",\n                values: [0, .5 * u]\n              }, {\n                command: \"L\",\n                values: [p, .5 * u]\n              }]\n            },\n            stroke: r\n          });\n          break;\n        }\n\n      case \"path\":\n        {\n          const t = Math.min(a || O, l),\n                r = T(e, 0),\n                o = T(e, -.2),\n                n = B(e, -.4),\n                i = n ? {\n            color: n,\n            width: 1\n          } : {};\n\n          if (\"quad\" === e.profile) {\n            const t = e.width,\n                  n = e.height,\n                  a = d(t && n ? t / n : 1, 0 === n, 0 === t),\n                  l = { ...i,\n              join: \"bevel\"\n            };\n            s.push({\n              shape: a[0],\n              fill: o,\n              stroke: l\n            }), s.push({\n              shape: a[1],\n              fill: o,\n              stroke: l\n            }), s.push({\n              shape: a[2],\n              fill: r,\n              stroke: l\n            });\n          } else s.push({\n            shape: b.pathSymbol3DLayer[0],\n            fill: o,\n            stroke: i\n          }), s.push({\n            shape: b.pathSymbol3DLayer[1],\n            fill: r,\n            stroke: i\n          });\n\n          u = Math.max(u, t), p = u;\n        }\n    }\n\n    r.push(s);\n  }), Promise.resolve(z(r, [p, u], {\n    node: t && t.node,\n    scale: o,\n    opacity: t && t.opacity\n  }));\n}\n\nasync function _(e, t) {\n  const s = \"mesh-3d\" === e.type,\n        r = e.symbolLayers,\n        o = Q(t),\n        l = t && t.maxSize ? i(t.maxSize) : null,\n        c = o || O,\n        p = [];\n  let u = 0,\n      h = 0,\n      m = !1;\n\n  for (let i = 0; i < r.length; i++) {\n    const e = r.getItemAt(i),\n          t = [];\n    if (s && \"fill\" !== e.type) continue;\n    const o = b.fill[0];\n\n    switch (e.type) {\n      case \"fill\":\n        {\n          const r = q(e),\n                n = Math.min(c, l || C);\n          u = Math.max(u, n), h = Math.max(h, n), m = !0;\n          let i = T(e, 0);\n          const p = \"pattern\" in e && e.pattern,\n                f = N(e);\n          !s && a(p) && \"style\" === p.type && \"solid\" !== p.style && f && (i = await W(p, f)), t.push({\n            shape: o,\n            fill: i,\n            stroke: r\n          });\n          break;\n        }\n\n      case \"line\":\n        {\n          const s = F(e, 0);\n          if (n(s)) break;\n          const r = {\n            stroke: s,\n            shape: o\n          };\n          u = Math.max(u, O), h = Math.max(h, O), t.push(r);\n          break;\n        }\n\n      case \"extrude\":\n        {\n          const s = {\n            join: \"round\",\n            width: 1,\n            ...F(e, -.4)\n          },\n                r = T(e, 0),\n                o = T(e, -.2),\n                n = Math.min(c, l || C),\n                a = v(n);\n          s.width = 1, t.push({\n            shape: a[0],\n            fill: o,\n            stroke: s\n          }), t.push({\n            shape: a[1],\n            fill: o,\n            stroke: s\n          }), t.push({\n            shape: a[2],\n            fill: r,\n            stroke: s\n          });\n          const i = O,\n                p = .7 * O + .5 * n;\n          u = Math.max(u, i), h = Math.max(h, p);\n          break;\n        }\n\n      case \"water\":\n        {\n          const s = N(e),\n                r = H(s),\n                o = H(s, 2),\n                n = H(s, 3),\n                a = L();\n          m = !0, t.push({\n            shape: a[0],\n            fill: r\n          }), t.push({\n            shape: a[1],\n            fill: o\n          }), t.push({\n            shape: a[2],\n            fill: n\n          });\n          const i = Math.min(c, l || C);\n          u = Math.max(u, i), h = Math.max(h, i);\n          break;\n        }\n    }\n\n    p.push(t);\n  }\n\n  return Promise.resolve(z(p, [u, h], {\n    node: t && t.node,\n    scale: m,\n    opacity: t && t.opacity\n  }));\n}\n\nfunction ee(e, t) {\n  if (0 === e.symbolLayers.length) return Promise.reject(new r(\"symbolPreview: renderPreviewHTML3D\", \"No symbolLayers in the symbol.\"));\n\n  switch (e.type) {\n    case \"point-3d\":\n      return X(e, t);\n\n    case \"line-3d\":\n      return Y(e, t);\n\n    case \"polygon-3d\":\n    case \"mesh-3d\":\n      return _(e, t);\n  }\n\n  return Promise.reject(new r(\"symbolPreview: swatchInfo3D\", \"symbol not supported.\"));\n}\n\nexport { W as getPatternDescriptor, Q as getSizeFromOptions, T as getSymbolLayerFill, ee as previewSymbol3D };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/support/previewSymbol3D.js"],"names":["getAssetUrl","e","toHSV","t","toRGB","s","r","o","isNone","n","isSome","a","eachAlways","l","pt2px","i","defaultThematicColor","c","getPatternUrlWithColor","p","dekebabifyLineStyle","u","defaultPrimitive","h","m","SymbolSizeDefaults","f","adjustColorComponentBrightness","y","getPathSymbolShapes","d","shapes","b","getExtrudeSymbolShapes","v","getTetrahedronShapes","g","getDiamondShapes","k","getCylinderShapes","w","getCubeShapes","x","getInvertedConeShapes","M","getConeShapes","j","getWaterSymbolShapes","L","renderSymbol","z","tintImageWithColor","S","isVolumetricSymbol","P","getIconHref","U","resolveWebStyleSymbol","D","O","size","C","maxSize","I","maxOutlineSize","R","lineWidth","E","tallSymbolWidth","Z","getLogger","q","outline","material","color","toHex","pattern","type","style","width","toRgba","Math","min","join","cap","patternCap","A","resource","href","thumbnail","url","Promise","resolve","styleOrigin","styleName","styleUrl","portal","catch","then","H","N","T","W","src","toCss","height","$","B","F","G","x1","y1","x2","y2","colors","offset","J","depth","K","primitive","push","shape","cx","cy","fill","stroke","path","command","values","Q","V","X","disableUpsampling","symbolLayers","getItemAt","length","forEach","ceil","get","max","symbolConfig","isTall","value","error","warn","node","scale","opacity","Y","profile","pathSymbol3DLayer","_","ee","reject","getPatternDescriptor","getSizeFromOptions","getSymbolLayerFill","previewSymbol3D"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as e}from\"../../assets.js\";import{toHSV as t,toRGB as s}from\"../../core/colorUtils.js\";import\"../../core/has.js\";import r from\"../../core/Error.js\";import o from\"../../core/Logger.js\";import{isNone as n,isSome as a}from\"../../core/maybe.js\";import{eachAlways as l}from\"../../core/promiseUtils.js\";import{pt2px as i}from\"../../core/screenUtils.js\";import{defaultThematicColor as c,getPatternUrlWithColor as p,dekebabifyLineStyle as u}from\"./gfxUtils.js\";import{defaultPrimitive as h}from\"./IconSymbol3DLayerResource.js\";import{defaultPrimitive as m}from\"./ObjectSymbol3DLayerResource.js\";import{SymbolSizeDefaults as f,adjustColorComponentBrightness as y,getPathSymbolShapes as d,shapes as b,getExtrudeSymbolShapes as v,getTetrahedronShapes as g,getDiamondShapes as k,getCylinderShapes as w,getCubeShapes as x,getInvertedConeShapes as M,getConeShapes as j,getWaterSymbolShapes as L}from\"./previewUtils.js\";import{renderSymbol as z,tintImageWithColor as S}from\"./renderUtils.js\";import{isVolumetricSymbol as P,getIconHref as U}from\"./utils.js\";import{resolveWebStyleSymbol as D}from\"./webStyleSymbolUtils.js\";const O=f.size,C=f.maxSize,I=f.maxOutlineSize,R=f.lineWidth,E=f.tallSymbolWidth,Z=o.getLogger(\"esri.symbols.support.previewSymbol3D\");function q(e){const t=e.outline,s=a(e.material)?e.material.color:null,r=a(s)?s.toHex():null;if(n(t)||\"pattern\"in t&&a(t.pattern)&&\"style\"===t.pattern.type&&\"none\"===t.pattern.style)return\"fill\"===e.type&&\"#ffffff\"===r?{color:\"#bdc3c7\",width:.75}:null;const o=i(t.size)||0;return{color:\"rgba(\"+(a(t.color)?t.color.toRgba():\"255,255,255,1\")+\")\",width:Math.min(o,I),style:\"pattern\"in t&&a(t.pattern)&&\"style\"===t.pattern.type?u(t.pattern.style):null,join:\"butt\",cap:\"patternCap\"in t?t.patternCap:\"butt\"}}function A(t,s){const r=s&&s.resource,o=r&&r.href;if(t.thumbnail&&t.thumbnail.url)return Promise.resolve(t.thumbnail.url);if(o&&\"object\"!==s.type)return Promise.resolve(U(t,s));const n=e(\"esri/images/Legend/legend3dsymboldefault.png\");return t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)?D(t.styleOrigin,{portal:t.styleOrigin.portal},\"webRef\").catch((e=>e)).then((e=>{var t;return(null==e||null==(t=e.thumbnail)?void 0:t.url)||n})):Promise.resolve(n)}function H(e,r=1){const o=e.a,n=t(e),a=n.h,l=n.s/r,i=100-(100-n.v)/r,{r:c,g:p,b:u}=s({h:a,s:l,v:i});return[c,p,u,o]}function N(e){return\"water\"===e.type?n(e.color)?null:e.color:n(e.material)||n(e.material.color)?null:e.material.color}function T(e,t=0){const s=N(e);if(!s){if(\"fill\"===e.type)return null;const s=c.r,r=y(s,t);return[r,r,r,100]}const r=s.toRgba();for(let o=0;o<3;o++)r[o]=y(r[o],t);return r}async function W(t,s){const r=t.style;if(\"none\"===r)return null;return{type:\"pattern\",x:0,y:0,src:await p(e(`esri/symbols/patterns/${r}.png`),s.toCss(!0)),width:5,height:5}}function $(e){return e.outline?q(e):{color:\"rgba(0, 0, 0, 1)\",width:1.5}}function B(e,t){const s=N(e);if(!s)return null;let r=\"rgba(\";return r+=y(s.r,t)+\",\",r+=y(s.g,t)+\",\",r+=y(s.b,t)+\",\",r+s.a+\");\"}function F(e,t){const s=B(e,t);if(!s)return{};if(\"pattern\"in e&&a(e.pattern)&&\"style\"===e.pattern.type&&\"none\"===e.pattern.style)return null;return{color:s,width:Math.min(e.size?i(e.size):.75,I),style:\"pattern\"in e&&a(e.pattern)&&\"style\"===e.pattern.type?u(e.pattern.style):null,cap:\"cap\"in e?e.cap:null,join:\"join\"in e?\"miter\"===e.join?i(2):e.join:null}}function G(e,t,s){const r=.75*s;return{type:\"linear\",x1:r?.25*r:0,y1:r?.5*r:0,x2:r||4,y2:r?.5*r:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function J(e){const t=e.depth,s=e.height,r=e.width;return r&&t&&s&&r===t&&r<s}function K(e,t,s){const r=[];if(!e)return r;switch(e.type){case\"icon\":{const s=0,o=0,n=t,a=t;switch(e.resource&&e.resource.primitive||h){case\"circle\":r.push({shape:{type:\"circle\",cx:0,cy:0,r:.5*t},fill:T(e,0),stroke:q(e)});break;case\"square\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[s,a]},{command:\"L\",values:[s,o]},{command:\"L\",values:[n,o]},{command:\"L\",values:[n,a]},{command:\"Z\",values:[]}]},fill:T(e,0),stroke:q(e)});break;case\"triangle\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[s,a]},{command:\"L\",values:[.5*n,o]},{command:\"L\",values:[n,a]},{command:\"Z\",values:[]}]},fill:T(e,0),stroke:q(e)});break;case\"cross\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[.5*n,o]},{command:\"L\",values:[.5*n,a]},{command:\"M\",values:[s,.5*a]},{command:\"L\",values:[n,.5*a]}]},stroke:$(e)});break;case\"x\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[s,o]},{command:\"L\",values:[n,a]},{command:\"M\",values:[n,o]},{command:\"L\",values:[s,a]}]},stroke:$(e)});break;case\"kite\":r.push({shape:{type:\"path\",path:[{command:\"M\",values:[s,.5*a]},{command:\"L\",values:[.5*n,o]},{command:\"L\",values:[n,.5*a]},{command:\"L\",values:[.5*n,a]},{command:\"Z\",values:[]}]},fill:T(e,0),stroke:q(e)})}break}case\"object\":switch(e.resource&&e.resource.primitive||m){case\"cone\":{const o=G(T(e,0),T(e,-.6),s?E:t),n=j(t,s);r.push({shape:n[0],fill:o}),r.push({shape:n[1],fill:o});break}case\"inverted-cone\":{const s=T(e,0),o=G(s,T(e,-.6),t),n=M(t);r.push({shape:n[0],fill:o}),r.push({shape:n[1],fill:s});break}case\"cube\":{const o=x(t,s);r.push({shape:o[0],fill:T(e,0)}),r.push({shape:o[1],fill:T(e,-.3)}),r.push({shape:o[2],fill:T(e,-.5)});break}case\"cylinder\":{const o=G(T(e,0),T(e,-.6),s?E:t),n=w(t,s);r.push({shape:n[0],fill:o}),r.push({shape:n[1],fill:o}),r.push({shape:n[2],fill:T(e,0)});break}case\"diamond\":{const s=k(t);r.push({shape:s[0],fill:T(e,-.3)}),r.push({shape:s[1],fill:T(e,0)}),r.push({shape:s[2],fill:T(e,-.3)}),r.push({shape:s[3],fill:T(e,-.7)});break}case\"sphere\":{const s=G(T(e,0),T(e,-.6));s.x1=0,s.y1=0,s.x2=.25*t,s.y2=.25*t,r.push({shape:{type:\"circle\",cx:0,cy:0,r:.5*t},fill:s});break}case\"tetrahedron\":{const s=g(t);r.push({shape:s[0],fill:T(e,-.3)}),r.push({shape:s[1],fill:T(e,0)}),r.push({shape:s[2],fill:T(e,-.6)});break}}break}return r}function Q(e){const t=\"number\"==typeof(null==e?void 0:e.size)?null==e?void 0:e.size:null;return t?i(t):null}function V(e){return\"icon\"===e.type?\"multiply\":\"tint\"}function X(e,t){const s=Q(t),r=t&&t.maxSize?i(t.maxSize):null,o=t&&t.disableUpsampling,n=e.symbolLayers,a=[];let c=0,p=0;const u=n.getItemAt(n.length-1);let h;return u&&\"icon\"===u.type&&(h=u.size&&i(u.size)),n.forEach((n=>{if(\"icon\"!==n.type&&\"object\"!==n.type)return;const l=\"icon\"===n.type?n.size&&i(n.size):0,u=s||l?Math.ceil(Math.min(s||l,r||C)):O;if(n&&n.resource&&n.resource.href){const t=A(e,n).then((function(e){const t=n.get(\"material.color\"),s=V(n);return S(e,u,t,s,o)})).then((function(e){const t=e.width,s=e.height;return c=Math.max(c,t),p=Math.max(p,s),[{shape:{type:\"image\",x:0,y:0,width:t,height:s,src:e.url},fill:null,stroke:null}]}));a.push(t)}else{var m;let e=u;\"icon\"===n.type&&h&&s&&(e=u*(l/h));const r=\"tall\"===(null==t?void 0:t.symbolConfig)||(null==t||null==(m=t.symbolConfig)?void 0:m.isTall)||\"object\"===n.type&&J(n);c=Math.max(c,r?E:e),p=Math.max(p,e),a.push(Promise.resolve(K(n,e,r)))}})),l(a).then((function(e){const s=[];return e.forEach((function(e){e.value?s.push(e.value):e.error&&Z.warn(\"error while building swatchInfo!\",e.error)})),z(s,[c,p],{node:t&&t.node,scale:!1,opacity:t&&t.opacity})}))}function Y(e,t){const s=e.symbolLayers,r=[],o=P(e),a=Q(t),l=(t&&t.maxSize?i(t.maxSize):null)||I;let c,p=0,u=0;return s.forEach(((e,t)=>{if(!e)return;if(\"line\"!==e.type&&\"path\"!==e.type)return;const s=[];switch(e.type){case\"line\":{const r=F(e,0);if(n(r))break;const o=r&&r.width||0;0===t&&(c=o);const i=Math.min(a||o,l),h=0===t?i:a?i*(o/c):i,m=h>R/2?2*h:R;u=Math.max(u,h),p=Math.max(p,m),r.width=h,s.push({shape:{type:\"path\",path:[{command:\"M\",values:[0,.5*u]},{command:\"L\",values:[p,.5*u]}]},stroke:r});break}case\"path\":{const t=Math.min(a||O,l),r=T(e,0),o=T(e,-.2),n=B(e,-.4),i=n?{color:n,width:1}:{};if(\"quad\"===e.profile){const t=e.width,n=e.height,a=d(t&&n?t/n:1,0===n,0===t),l={...i,join:\"bevel\"};s.push({shape:a[0],fill:o,stroke:l}),s.push({shape:a[1],fill:o,stroke:l}),s.push({shape:a[2],fill:r,stroke:l})}else s.push({shape:b.pathSymbol3DLayer[0],fill:o,stroke:i}),s.push({shape:b.pathSymbol3DLayer[1],fill:r,stroke:i});u=Math.max(u,t),p=u}}r.push(s)})),Promise.resolve(z(r,[p,u],{node:t&&t.node,scale:o,opacity:t&&t.opacity}))}async function _(e,t){const s=\"mesh-3d\"===e.type,r=e.symbolLayers,o=Q(t),l=t&&t.maxSize?i(t.maxSize):null,c=o||O,p=[];let u=0,h=0,m=!1;for(let i=0;i<r.length;i++){const e=r.getItemAt(i),t=[];if(s&&\"fill\"!==e.type)continue;const o=b.fill[0];switch(e.type){case\"fill\":{const r=q(e),n=Math.min(c,l||C);u=Math.max(u,n),h=Math.max(h,n),m=!0;let i=T(e,0);const p=\"pattern\"in e&&e.pattern,f=N(e);!s&&a(p)&&\"style\"===p.type&&\"solid\"!==p.style&&f&&(i=await W(p,f)),t.push({shape:o,fill:i,stroke:r});break}case\"line\":{const s=F(e,0);if(n(s))break;const r={stroke:s,shape:o};u=Math.max(u,O),h=Math.max(h,O),t.push(r);break}case\"extrude\":{const s={join:\"round\",width:1,...F(e,-.4)},r=T(e,0),o=T(e,-.2),n=Math.min(c,l||C),a=v(n);s.width=1,t.push({shape:a[0],fill:o,stroke:s}),t.push({shape:a[1],fill:o,stroke:s}),t.push({shape:a[2],fill:r,stroke:s});const i=O,p=.7*O+.5*n;u=Math.max(u,i),h=Math.max(h,p);break}case\"water\":{const s=N(e),r=H(s),o=H(s,2),n=H(s,3),a=L();m=!0,t.push({shape:a[0],fill:r}),t.push({shape:a[1],fill:o}),t.push({shape:a[2],fill:n});const i=Math.min(c,l||C);u=Math.max(u,i),h=Math.max(h,i);break}}p.push(t)}return Promise.resolve(z(p,[u,h],{node:t&&t.node,scale:m,opacity:t&&t.opacity}))}function ee(e,t){if(0===e.symbolLayers.length)return Promise.reject(new r(\"symbolPreview: renderPreviewHTML3D\",\"No symbolLayers in the symbol.\"));switch(e.type){case\"point-3d\":return X(e,t);case\"line-3d\":return Y(e,t);case\"polygon-3d\":case\"mesh-3d\":return _(e,t)}return Promise.reject(new r(\"symbolPreview: swatchInfo3D\",\"symbol not supported.\"))}export{W as getPatternDescriptor,Q as getSizeFromOptions,T as getSymbolLayerFill,ee as previewSymbol3D};\n"]},"metadata":{},"sourceType":"module"}