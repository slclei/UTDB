{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { px2pt as e } from \"../../core/screenUtils.js\";\nimport { getSize as r, getColor as t, getOpacity as n, getRotationAngle as i } from \"../../renderers/visualVariables/support/visualVariableUtils.js\";\nconst o = \"simple-marker\",\n      u = \"picture-marker\",\n      a = \"simple-line\",\n      l = \"simple-fill\",\n      s = \"shield-label-symbol\",\n      f = \"text\";\n\nfunction y(y, c) {\n  const {\n    graphic: p,\n    renderer: m,\n    symbol: g\n  } = c,\n        d = g.type;\n  if (d === f || d === s || !(\"visualVariables\" in m) || !m.visualVariables) return;\n  const b = m.getVisualVariablesForType(\"size\"),\n        h = m.getVisualVariablesForType(\"color\"),\n        w = m.getVisualVariablesForType(\"opacity\"),\n        V = m.getVisualVariablesForType(\"rotation\"),\n        T = b[0],\n        v = h[0],\n        G = w[0],\n        k = V[0];\n\n  if (T) {\n    const t = d === o ? g.style : null,\n          n = r(T, p, {\n      shape: t\n    });\n    null != n && (d === o ? y.size = e(n) : d === u ? (y.width = e(n), y.height = e(n)) : d === a ? y.width = e(n) : y.outline && (y.outline.width = e(n)));\n  }\n\n  if (v) {\n    const e = t(v, p);\n    (e && d === o || d === a || d === l) && (y.color = e ? e.toJSON() : void 0);\n  }\n\n  if (G) {\n    const e = n(G, p);\n    null != e && y.color && (y.color[3] = Math.round(255 * e));\n  }\n\n  k && (y.angle = -i(m, p));\n}\n\nfunction c() {\n  return {\n    layerDefinition: {\n      name: \"multipointLayer\",\n      geometryType: \"esriGeometryMultipoint\",\n      drawingInfo: {\n        renderer: null\n      }\n    },\n    featureSet: {\n      geometryType: \"esriGeometryMultipoint\",\n      features: []\n    }\n  };\n}\n\nfunction p() {\n  return {\n    layerDefinition: {\n      name: \"polygonLayer\",\n      geometryType: \"esriGeometryPolygon\",\n      drawingInfo: {\n        renderer: null\n      }\n    },\n    featureSet: {\n      geometryType: \"esriGeometryPolygon\",\n      features: []\n    }\n  };\n}\n\nfunction m() {\n  return {\n    layerDefinition: {\n      name: \"pointLayer\",\n      geometryType: \"esriGeometryPoint\",\n      drawingInfo: {\n        renderer: null\n      }\n    },\n    featureSet: {\n      geometryType: \"esriGeometryPoint\",\n      features: []\n    }\n  };\n}\n\nfunction g() {\n  return {\n    layerDefinition: {\n      name: \"polylineLayer\",\n      geometryType: \"esriGeometryPolyline\",\n      drawingInfo: {\n        renderer: null\n      }\n    },\n    featureSet: {\n      geometryType: \"esriGeometryPolyline\",\n      features: []\n    }\n  };\n}\n\nfunction d(e) {\n  let r = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 15;\n  const t = e.canvas.width,\n        n = e.canvas.height,\n        i = e.getImageData(0, 0, t, n).data;\n  let o, u, a, l, s, f;\n\n  e: for (u = n; u--;) for (o = t; o--;) if (i[4 * (t * u + o) + 3] > r) {\n    f = u;\n    break e;\n  }\n\n  if (!f) return null;\n\n  e: for (o = t; o--;) for (u = f + 1; u--;) if (i[4 * (t * u + o) + 3] > r) {\n    s = o;\n    break e;\n  }\n\n  e: for (o = 0; o <= s; ++o) for (u = f + 1; u--;) if (i[4 * (t * u + o) + 3] > r) {\n    a = o;\n    break e;\n  }\n\n  e: for (u = 0; u <= f; ++u) for (o = a; o <= s; ++o) if (i[4 * (t * u + o) + 3] > r) {\n    l = u;\n    break e;\n  }\n\n  return {\n    x: a,\n    y: l,\n    width: s - a,\n    height: f - l\n  };\n}\n\nfunction b(e, r) {\n  const t = e.allLayerViews.items;\n  if (r === e.scale) return t.filter(e => !e.suspended);\n  const n = new Array();\n\n  for (const i of t) S(i.parent) && !n.includes(i.parent) || !i.visible || r && \"isVisibleAtScale\" in i && !i.isVisibleAtScale(r) || n.push(i);\n\n  return n;\n}\n\nfunction h(e) {\n  return e && \"bing-maps\" === e.type;\n}\n\nfunction w(e) {\n  return e && \"blendMode\" in e && \"effect\" in e;\n}\n\nfunction V(e) {\n  return e && \"csv\" === e.type;\n}\n\nfunction T(e) {\n  return e && \"feature\" === e.type;\n}\n\nfunction v(e) {\n  return e && \"geojson\" === e.type;\n}\n\nfunction G(e) {\n  return e && \"graphics\" === e.type;\n}\n\nfunction k(e) {\n  return e && \"group\" === e.type;\n}\n\nfunction S(e) {\n  return e && \"esri.views.2d.layers.GroupLayerView2D\" === e.declaredClass;\n}\n\nfunction D(e) {\n  return e && \"imagery\" === e.type;\n}\n\nfunction L(e) {\n  return e && \"imagery-tile\" === e.type;\n}\n\nfunction P(e) {\n  return e && \"kml\" === e.type;\n}\n\nfunction I(e) {\n  return e && \"map-image\" === e.type;\n}\n\nfunction M(e) {\n  return e && \"map-notes\" === e.type;\n}\n\nfunction F(e) {\n  return e && \"open-street-map\" === e.type;\n}\n\nfunction j(e) {\n  const r = e.layer;\n\n  if (w(r)) {\n    const t = r.blendMode;\n    if ((!t || \"normal\" === t) && (r.effect || \"featureEffect\" in e && e.featureEffect)) return !0;\n  }\n\n  return !1;\n}\n\nfunction x(e) {\n  return e && \"stream\" === e.type;\n}\n\nfunction A(e) {\n  return e && \"tile\" === e.type;\n}\n\nfunction z(e) {\n  return e && \"vector-tile\" === e.type;\n}\n\nfunction E(e) {\n  return e && \"web-tile\" === e.type;\n}\n\nfunction U(e) {\n  return e && \"wms\" === e.type;\n}\n\nfunction C(e) {\n  return e && \"wmts\" === e.type;\n}\n\nexport { y as applyVisualVariables, c as createMultipointLayer, m as createPointLayer, p as createPolygonLayer, g as createPolylineLayer, d as getContextBoundingBox, b as getVisibleLayerViews, h as isBingMapsLayer, w as isBlendLayer, V as isCSVLayer, T as isFeatureLayer, v as isGeoJSONLayer, G as isGraphicsLayer, k as isGroupLayer, D as isImageryLayer, L as isImageryTileLayer, P as isKMLLayer, I as isMapImageLayer, M as isMapNotesLayer, F as isOpenStreetMapLayer, j as isScreenshotRequired, x as isStreamLayer, A as isTileLayer, z as isVectorTileLayer, U as isWMSLayer, C as isWMTSLayer, E as isWebTileLayer };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/rest/support/printTaskUtils.js"],"names":["px2pt","e","getSize","r","getColor","t","getOpacity","n","getRotationAngle","i","o","u","a","l","s","f","y","c","graphic","p","renderer","m","symbol","g","d","type","visualVariables","b","getVisualVariablesForType","h","w","V","T","v","G","k","style","shape","size","width","height","outline","color","toJSON","Math","round","angle","layerDefinition","name","geometryType","drawingInfo","featureSet","features","canvas","getImageData","data","x","allLayerViews","items","scale","filter","suspended","Array","S","parent","includes","visible","isVisibleAtScale","push","declaredClass","D","L","P","I","M","F","j","layer","blendMode","effect","featureEffect","A","z","E","U","C","applyVisualVariables","createMultipointLayer","createPointLayer","createPolygonLayer","createPolylineLayer","getContextBoundingBox","getVisibleLayerViews","isBingMapsLayer","isBlendLayer","isCSVLayer","isFeatureLayer","isGeoJSONLayer","isGraphicsLayer","isGroupLayer","isImageryLayer","isImageryTileLayer","isKMLLayer","isMapImageLayer","isMapNotesLayer","isOpenStreetMapLayer","isScreenshotRequired","isStreamLayer","isTileLayer","isVectorTileLayer","isWMSLayer","isWMTSLayer","isWebTileLayer"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{px2pt as e}from\"../../core/screenUtils.js\";import{getSize as r,getColor as t,getOpacity as n,getRotationAngle as i}from\"../../renderers/visualVariables/support/visualVariableUtils.js\";const o=\"simple-marker\",u=\"picture-marker\",a=\"simple-line\",l=\"simple-fill\",s=\"shield-label-symbol\",f=\"text\";function y(y,c){const{graphic:p,renderer:m,symbol:g}=c,d=g.type;if(d===f||d===s||!(\"visualVariables\"in m)||!m.visualVariables)return;const b=m.getVisualVariablesForType(\"size\"),h=m.getVisualVariablesForType(\"color\"),w=m.getVisualVariablesForType(\"opacity\"),V=m.getVisualVariablesForType(\"rotation\"),T=b[0],v=h[0],G=w[0],k=V[0];if(T){const t=d===o?g.style:null,n=r(T,p,{shape:t});null!=n&&(d===o?y.size=e(n):d===u?(y.width=e(n),y.height=e(n)):d===a?y.width=e(n):y.outline&&(y.outline.width=e(n)))}if(v){const e=t(v,p);(e&&d===o||d===a||d===l)&&(y.color=e?e.toJSON():void 0)}if(G){const e=n(G,p);null!=e&&y.color&&(y.color[3]=Math.round(255*e))}k&&(y.angle=-i(m,p))}function c(){return{layerDefinition:{name:\"multipointLayer\",geometryType:\"esriGeometryMultipoint\",drawingInfo:{renderer:null}},featureSet:{geometryType:\"esriGeometryMultipoint\",features:[]}}}function p(){return{layerDefinition:{name:\"polygonLayer\",geometryType:\"esriGeometryPolygon\",drawingInfo:{renderer:null}},featureSet:{geometryType:\"esriGeometryPolygon\",features:[]}}}function m(){return{layerDefinition:{name:\"pointLayer\",geometryType:\"esriGeometryPoint\",drawingInfo:{renderer:null}},featureSet:{geometryType:\"esriGeometryPoint\",features:[]}}}function g(){return{layerDefinition:{name:\"polylineLayer\",geometryType:\"esriGeometryPolyline\",drawingInfo:{renderer:null}},featureSet:{geometryType:\"esriGeometryPolyline\",features:[]}}}function d(e,r=15){const t=e.canvas.width,n=e.canvas.height,i=e.getImageData(0,0,t,n).data;let o,u,a,l,s,f;e:for(u=n;u--;)for(o=t;o--;)if(i[4*(t*u+o)+3]>r){f=u;break e}if(!f)return null;e:for(o=t;o--;)for(u=f+1;u--;)if(i[4*(t*u+o)+3]>r){s=o;break e}e:for(o=0;o<=s;++o)for(u=f+1;u--;)if(i[4*(t*u+o)+3]>r){a=o;break e}e:for(u=0;u<=f;++u)for(o=a;o<=s;++o)if(i[4*(t*u+o)+3]>r){l=u;break e}return{x:a,y:l,width:s-a,height:f-l}}function b(e,r){const t=e.allLayerViews.items;if(r===e.scale)return t.filter((e=>!e.suspended));const n=new Array;for(const i of t)S(i.parent)&&!n.includes(i.parent)||!i.visible||r&&\"isVisibleAtScale\"in i&&!i.isVisibleAtScale(r)||n.push(i);return n}function h(e){return e&&\"bing-maps\"===e.type}function w(e){return e&&\"blendMode\"in e&&\"effect\"in e}function V(e){return e&&\"csv\"===e.type}function T(e){return e&&\"feature\"===e.type}function v(e){return e&&\"geojson\"===e.type}function G(e){return e&&\"graphics\"===e.type}function k(e){return e&&\"group\"===e.type}function S(e){return e&&\"esri.views.2d.layers.GroupLayerView2D\"===e.declaredClass}function D(e){return e&&\"imagery\"===e.type}function L(e){return e&&\"imagery-tile\"===e.type}function P(e){return e&&\"kml\"===e.type}function I(e){return e&&\"map-image\"===e.type}function M(e){return e&&\"map-notes\"===e.type}function F(e){return e&&\"open-street-map\"===e.type}function j(e){const r=e.layer;if(w(r)){const t=r.blendMode;if((!t||\"normal\"===t)&&(r.effect||\"featureEffect\"in e&&e.featureEffect))return!0}return!1}function x(e){return e&&\"stream\"===e.type}function A(e){return e&&\"tile\"===e.type}function z(e){return e&&\"vector-tile\"===e.type}function E(e){return e&&\"web-tile\"===e.type}function U(e){return e&&\"wms\"===e.type}function C(e){return e&&\"wmts\"===e.type}export{y as applyVisualVariables,c as createMultipointLayer,m as createPointLayer,p as createPolygonLayer,g as createPolylineLayer,d as getContextBoundingBox,b as getVisibleLayerViews,h as isBingMapsLayer,w as isBlendLayer,V as isCSVLayer,T as isFeatureLayer,v as isGeoJSONLayer,G as isGraphicsLayer,k as isGroupLayer,D as isImageryLayer,L as isImageryTileLayer,P as isKMLLayer,I as isMapImageLayer,M as isMapNotesLayer,F as isOpenStreetMapLayer,j as isScreenshotRequired,x as isStreamLayer,A as isTileLayer,z as isVectorTileLayer,U as isWMSLayer,C as isWMTSLayer,E as isWebTileLayer};\n"]},"metadata":{},"sourceType":"module"}