{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { applySome as t, isNone as e, isSome as s, unwrapOr as i } from \"../../core/maybe.js\";\nimport { after as a } from \"../../core/promiseUtils.js\";\nimport { Milliseconds as r } from \"../../core/time.js\";\nimport \"./BufferObject.js\";\nimport \"./FramebufferObject.js\";\nimport \"../../core/has.js\";\nimport { webglDebugEnabled as n } from \"./checkWebGLError.js\";\nimport { ContextType as l } from \"./context-util.js\";\nimport { BufferType as h, Face as f, BASE_TEXTURE_UNIT as o, ClearBufferBit as u, FramebufferTarget as _, TextureSamplingMode as c, ResourceType as d, SyncCondition as b, ClientWaitSyncStatus as F, BlendFactor as g, BlendOperation as p, CullMode as E, CompareFunction as B, StencilOperation as m, ColorAttachment as R, TextureType as T, PrimitiveType as A } from \"./enums.js\";\nimport \"./ShaderTranspiler.js\";\nimport { ProgramCache as x } from \"./ProgramCache.js\";\nimport { Texture as O } from \"./Texture.js\";\nimport \"./VertexArrayObject.js\";\nimport { ContextState as U } from \"./ContextState.js\";\nimport { InstanceCounter as C } from \"./InstanceCounter.js\";\nimport { StateTracker as S } from \"./renderState.js\";\nimport { getErrorString as P } from \"./Util.js\";\nimport { WebGLDriverTest as M } from \"./WebGLDriverTest.js\";\nimport { Capabilities as v } from \"./capabilities/Capabilities.js\";\nimport N from \"./capabilities/isWebGL2Context.js\";\n\nclass k {\n  constructor(t, e) {\n    this.gl = t, this.instanceCounter = new C(), this.programCache = new x(this), this._state = new U(), this._numOfDrawCalls = 0, this._numOfTriangles = 0, this.type = N(t) ? l.WEBGL2 : l.WEBGL1, this._loadExtensions(), this.configure(e);\n  }\n\n  configure(t) {\n    this._capabilities = new v(this.gl, t), this._parameters = this._loadParameters(t);\n    const e = this.gl.getParameter(this.gl.VIEWPORT);\n    this._state = new U(), this._state.viewport = {\n      x: e[0],\n      y: e[1],\n      width: e[2],\n      height: e[3]\n    }, this._stateTracker = new S({\n      setBlending: t => {\n        if (t) {\n          this.setBlendingEnabled(!0), this.setBlendEquationSeparate(t.opRgb, t.opAlpha), this.setBlendFunctionSeparate(t.srcRgb, t.dstRgb, t.srcAlpha, t.dstAlpha);\n          const e = t.color;\n          this.setBlendColor(e.r, e.g, e.b, e.a);\n        } else this.setBlendingEnabled(!1);\n      },\n      setCulling: t => {\n        t ? (this.setFaceCullingEnabled(!0), this.setCullFace(t.face), this.setFrontFace(t.mode)) : this.setFaceCullingEnabled(!1);\n      },\n      setPolygonOffset: t => {\n        t ? (this.setPolygonOffsetFillEnabled(!0), this.setPolygonOffset(t.factor, t.units)) : this.setPolygonOffsetFillEnabled(!1);\n      },\n      setDepthTest: t => {\n        t ? (this.setDepthTestEnabled(!0), this.setDepthFunction(t.func)) : this.setDepthTestEnabled(!1);\n      },\n      setStencilTest: t => {\n        if (t) {\n          this.setStencilTestEnabled(!0);\n          const e = t.function;\n          this.setStencilFunction(e.func, e.ref, e.mask);\n          const s = t.operation;\n          this.setStencilOp(s.fail, s.zFail, s.zPass);\n        } else this.setStencilTestEnabled(!1);\n      },\n      setDepthWrite: t => {\n        t ? (this.setDepthWriteEnabled(!0), this.setDepthRange(t.zNear, t.zFar)) : this.setDepthWriteEnabled(!1);\n      },\n      setColorWrite: t => {\n        t ? this.setColorMask(t.r, t.g, t.b, t.a) : this.setColorMask(!1, !1, !1, !1);\n      },\n      setStencilWrite: t => {\n        t ? this.setStencilWriteMask(t.mask) : this.setStencilWriteMask(0);\n      }\n    }), this.enforceState(), this._driverTest = new M(this);\n  }\n\n  get driverTest() {\n    return this._driverTest;\n  }\n\n  get contextAttributes() {\n    return this.gl.getContextAttributes();\n  }\n\n  get parameters() {\n    return this._parameters;\n  }\n\n  dispose() {\n    this.programCache.dispose(), this.bindVAO(null), this.unbindBuffer(h.ARRAY_BUFFER), this.unbindBuffer(h.ELEMENT_ARRAY_BUFFER), N(this.gl) && (this.unbindBuffer(h.UNIFORM_BUFFER), this._state.uniformBufferBindingPoints.length = 0, this.unbindBuffer(h.PIXEL_PACK_BUFFER), this.unbindBuffer(h.PIXEL_UNPACK_BUFFER), this.unbindBuffer(h.COPY_READ_BUFFER), this.unbindBuffer(h.COPY_WRITE_BUFFER)), this._state.textureUnitMap.length = 0, n() && this.instanceCounter.printResourceCount();\n  }\n\n  setPipelineState(t) {\n    this._stateTracker.setPipeline(t);\n  }\n\n  setBlendingEnabled(t) {\n    this._state.blend !== t && (!0 === t ? this.gl.enable(this.gl.BLEND) : this.gl.disable(this.gl.BLEND), this._state.blend = t, this._stateTracker.invalidateBlending());\n  }\n\n  externalProgramUpdate() {\n    var t;\n    null == (t = this._state.program) || t.stop(), this._state.program = null;\n  }\n\n  externalTextureUnitUpdate(t, e) {\n    for (let s = 0; s < t.length; ++s) this._state.textureUnitMap[t[s]] = null;\n\n    e >= 0 && (this._state.activeTexture = e);\n  }\n\n  externalVertexArrayObjectUpdate() {\n    const t = this.capabilities.vao;\n    t && (t.bindVertexArray(null), this._state.vertexArrayObject = null), this._state.vertexBuffer = null, this._state.indexBuffer = null;\n  }\n\n  externalVertexBufferUpdate() {\n    this._state.vertexBuffer = null;\n  }\n\n  externalIndexBufferUpdate() {\n    this._state.indexBuffer = null;\n  }\n\n  setBlendColor(t, e, s, i) {\n    t === this._state.blendColor.r && e === this._state.blendColor.g && s === this._state.blendColor.b && i === this._state.blendColor.a || (this.gl.blendColor(t, e, s, i), this._state.blendColor.r = t, this._state.blendColor.g = e, this._state.blendColor.b = s, this._state.blendColor.a = i, this._stateTracker.invalidateBlending());\n  }\n\n  setBlendFunction(t, e) {\n    t === this._state.blendFunction.srcRGB && e === this._state.blendFunction.dstRGB || (this.gl.blendFunc(t, e), this._state.blendFunction.srcRGB = t, this._state.blendFunction.srcAlpha = t, this._state.blendFunction.dstRGB = e, this._state.blendFunction.dstAlpha = e, this._stateTracker.invalidateBlending());\n  }\n\n  setBlendFunctionSeparate(t, e, s, i) {\n    this._state.blendFunction.srcRGB === t && this._state.blendFunction.srcAlpha === s && this._state.blendFunction.dstRGB === e && this._state.blendFunction.dstAlpha === i || (this.gl.blendFuncSeparate(t, e, s, i), this._state.blendFunction.srcRGB = t, this._state.blendFunction.srcAlpha = s, this._state.blendFunction.dstRGB = e, this._state.blendFunction.dstAlpha = i, this._stateTracker.invalidateBlending());\n  }\n\n  setBlendEquation(t) {\n    this._state.blendEquation.mode !== t && (this.gl.blendEquation(t), this._state.blendEquation.mode = t, this._state.blendEquation.modeAlpha = t, this._stateTracker.invalidateBlending());\n  }\n\n  setBlendEquationSeparate(t, e) {\n    this._state.blendEquation.mode === t && this._state.blendEquation.modeAlpha === e || (this.gl.blendEquationSeparate(t, e), this._state.blendEquation.mode = t, this._state.blendEquation.modeAlpha = e, this._stateTracker.invalidateBlending());\n  }\n\n  setColorMask(t, e, s, i) {\n    this._state.colorMask.r === t && this._state.colorMask.g === e && this._state.colorMask.b === s && this._state.colorMask.a === i || (this.gl.colorMask(t, e, s, i), this._state.colorMask.r = t, this._state.colorMask.g = e, this._state.colorMask.b = s, this._state.colorMask.a = i, this._stateTracker.invalidateColorWrite());\n  }\n\n  setClearColor(t, e, s, i) {\n    this._state.clearColor.r === t && this._state.clearColor.g === e && this._state.clearColor.b === s && this._state.clearColor.a === i || (this.gl.clearColor(t, e, s, i), this._state.clearColor.r = t, this._state.clearColor.g = e, this._state.clearColor.b = s, this._state.clearColor.a = i);\n  }\n\n  setFaceCullingEnabled(t) {\n    this._state.faceCulling !== t && (!0 === t ? this.gl.enable(this.gl.CULL_FACE) : this.gl.disable(this.gl.CULL_FACE), this._state.faceCulling = t, this._stateTracker.invalidateCulling());\n  }\n\n  setPolygonOffsetFillEnabled(t) {\n    this._state.polygonOffsetFill !== t && (!0 === t ? this.gl.enable(this.gl.POLYGON_OFFSET_FILL) : this.gl.disable(this.gl.POLYGON_OFFSET_FILL), this._state.polygonOffsetFill = t, this._stateTracker.invalidatePolygonOffset());\n  }\n\n  setPolygonOffset(t, e) {\n    this._state.polygonOffset[0] === t && this._state.polygonOffset[1] === e || (this._state.polygonOffset[0] = t, this._state.polygonOffset[1] = e, this.gl.polygonOffset(t, e), this._stateTracker.invalidatePolygonOffset());\n  }\n\n  setCullFace(t) {\n    this._state.cullFace !== t && (this.gl.cullFace(t), this._state.cullFace = t, this._stateTracker.invalidateCulling());\n  }\n\n  setFrontFace(t) {\n    this._state.frontFace !== t && (this.gl.frontFace(t), this._state.frontFace = t, this._stateTracker.invalidateCulling());\n  }\n\n  setScissorTestEnabled(t) {\n    this._state.scissorTest !== t && (!0 === t ? this.gl.enable(this.gl.SCISSOR_TEST) : this.gl.disable(this.gl.SCISSOR_TEST), this._state.scissorTest = t);\n  }\n\n  setScissorRect(t, e, s, i) {\n    this._state.scissorRect.x === t && this._state.scissorRect.y === e && this._state.scissorRect.width === s && this._state.scissorRect.height === i || (this.gl.scissor(t, e, s, i), this._state.scissorRect.x = t, this._state.scissorRect.y = e, this._state.scissorRect.width = s, this._state.scissorRect.height = i);\n  }\n\n  setDepthTestEnabled(t) {\n    this._state.depthTest !== t && (!0 === t ? this.gl.enable(this.gl.DEPTH_TEST) : this.gl.disable(this.gl.DEPTH_TEST), this._state.depthTest = t, this._stateTracker.invalidateDepthTest());\n  }\n\n  setClearDepth(t) {\n    this._state.clearDepth !== t && (this.gl.clearDepth(t), this._state.clearDepth = t);\n  }\n\n  setDepthFunction(t) {\n    this._state.depthFunction !== t && (this.gl.depthFunc(t), this._state.depthFunction = t, this._stateTracker.invalidateDepthTest());\n  }\n\n  setDepthWriteEnabled(t) {\n    this._state.depthWrite !== t && (this.gl.depthMask(t), this._state.depthWrite = t, this._stateTracker.invalidateDepthWrite());\n  }\n\n  setDepthRange(t, e) {\n    this._state.depthRange.zNear === t && this._state.depthRange.zFar === e || (this.gl.depthRange(t, e), this._state.depthRange.zNear = t, this._state.depthRange.zFar = e, this._stateTracker.invalidateDepthWrite());\n  }\n\n  setStencilTestEnabled(t) {\n    this._state.stencilTest !== t && (!0 === t ? this.gl.enable(this.gl.STENCIL_TEST) : this.gl.disable(this.gl.STENCIL_TEST), this._state.stencilTest = t, this._stateTracker.invalidateStencilTest());\n  }\n\n  setClearStencil(t) {\n    t !== this._state.clearStencil && (this.gl.clearStencil(t), this._state.clearStencil = t);\n  }\n\n  setStencilFunction(t, e, s) {\n    this._state.stencilFunction.func === t && this._state.stencilFunction.ref === e && this._state.stencilFunction.mask === s || (this.gl.stencilFunc(t, e, s), this._state.stencilFunction.face = f.FRONT_AND_BACK, this._state.stencilFunction.func = t, this._state.stencilFunction.ref = e, this._state.stencilFunction.mask = s, this._stateTracker.invalidateStencilTest());\n  }\n\n  setStencilFunctionSeparate(t, e, s, i) {\n    this._state.stencilFunction.face === t && this._state.stencilFunction.func === e && this._state.stencilFunction.ref === s && this._state.stencilFunction.mask === i || (this.gl.stencilFuncSeparate(t, e, s, i), this._state.stencilFunction.face = t, this._state.stencilFunction.func = e, this._state.stencilFunction.ref = s, this._state.stencilFunction.mask = i, this._stateTracker.invalidateStencilTest());\n  }\n\n  setStencilWriteMask(t) {\n    this._state.stencilWriteMask !== t && (this.gl.stencilMask(t), this._state.stencilWriteMask = t, this._stateTracker.invalidateStencilWrite());\n  }\n\n  setStencilOp(t, e, s) {\n    this._state.stencilOperation.face === f.FRONT_AND_BACK && this._state.stencilOperation.fail === t && this._state.stencilOperation.zFail === e && this._state.stencilOperation.zPass === s || (this.gl.stencilOp(t, e, s), this._state.stencilOperation.face = f.FRONT_AND_BACK, this._state.stencilOperation.fail = t, this._state.stencilOperation.zFail = e, this._state.stencilOperation.zPass = s, this._stateTracker.invalidateStencilTest());\n  }\n\n  setStencilOpSeparate(t, e, s, i) {\n    this._state.stencilOperation.face === t && this._state.stencilOperation.fail === e && this._state.stencilOperation.zFail === s && this._state.stencilOperation.zPass === i || (this.gl.stencilOpSeparate(t, e, s, i), this._state.stencilOperation.face = t, this._state.stencilOperation.fail = e, this._state.stencilOperation.zFail = s, this._state.stencilOperation.zPass = i, this._stateTracker.invalidateStencilTest());\n  }\n\n  setActiveTexture(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    const s = this._state.activeTexture;\n    return t >= 0 && (e || t !== this._state.activeTexture) && (this.gl.activeTexture(o + t), this._state.activeTexture = t), s;\n  }\n\n  clear(t) {\n    t && this.gl.clear(t);\n  }\n\n  clearSafe(t) {\n    let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 255;\n    t && (t & u.COLOR_BUFFER_BIT && this.setColorMask(!0, !0, !0, !0), t & u.DEPTH_BUFFER_BIT && this.setDepthWriteEnabled(!0), t & u.STENCIL_BUFFER_BIT && this.setStencilWriteMask(e), this.gl.clear(t));\n  }\n\n  drawArrays(t, e, s) {\n    if (n() && (this._numOfDrawCalls++, this._numOfTriangles += I(t, s)), this.gl.drawArrays(t, e, s), n()) {\n      const t = P(this);\n      t && console.error(\"drawArrays:\", t);\n    }\n  }\n\n  drawElements(e, s, i, a) {\n    if (n() && (this._numOfDrawCalls++, this._numOfTriangles += I(e, s)), this.gl.drawElements(e, s, i, a), n()) {\n      const n = P(this);\n\n      if (n) {\n        var r;\n\n        const l = this.getBoundVAO(),\n              h = null == l ? void 0 : l.indexBuffer,\n              f = {\n          indexBuffer: h,\n          vertexBuffers: null == l ? void 0 : l.vertexBuffers\n        },\n              o = {\n          mode: e,\n          count: s,\n          type: i,\n          offset: a\n        },\n              u = null != (r = t(h, t => t.size)) ? r : 0,\n              _ = a + s,\n              c = u < _ ? `. Buffer is too small. Attempted to draw index ${_} of ${u}` : \"\";\n\n        console.error(`drawElements: ${n}${c}`, {\n          args: o,\n          vao: f\n        });\n      }\n    }\n  }\n\n  logIno() {\n    n() && console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`);\n  }\n\n  get capabilities() {\n    return this._capabilities;\n  }\n\n  setViewport(t, e, s, i) {\n    s = Math.max(Math.round(s), 1), i = Math.max(Math.round(i), 1);\n    const a = this._state.viewport;\n    a.x === t && a.y === e && a.width === s && a.height === i || (a.x = t, a.y = e, a.width = s, a.height = i, this.gl.viewport(t, e, s, i));\n  }\n\n  getViewport() {\n    return {\n      x: this._state.viewport.x,\n      y: this._state.viewport.y,\n      width: this._state.viewport.width,\n      height: this._state.viewport.height\n    };\n  }\n\n  useProgram(t) {\n    var e, s;\n    this._state.program !== t && (null == (e = this._state.program) || e.stop(), this._state.program = t, this.gl.useProgram(null != (s = null == t ? void 0 : t.glName) ? s : null));\n  }\n\n  bindTexture(t, i) {\n    let a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    (i >= this.parameters.maxTextureImageUnits || i < 0) && console.error(\"Input texture unit is out of range of available units!\");\n    const r = this._state.textureUnitMap[i];\n    return e(t) || null == t.glName ? (s(r) && (this.setActiveTexture(i, a), this.gl.bindTexture(r.descriptor.target, null)), this._state.textureUnitMap[i] = null, r) : a || r !== t ? (this.setActiveTexture(i, a), this.gl.bindTexture(t.descriptor.target, t.glName), t.applyChanges(), this._state.textureUnitMap[i] = t, r) : (t.isDirty && (this.setActiveTexture(i, a), t.applyChanges()), r);\n  }\n\n  unbindTextureAllUnits(t) {\n    for (let e = 0; e < this.parameters.maxTextureImageUnits; e++) this._state.textureUnitMap[e] === t && (this.bindTexture(null, e), this._state.textureUnitMap[e] = null);\n  }\n\n  bindFramebuffer(t) {\n    let s = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n\n    if (s || this._state.readFramebuffer !== t || this._state.drawFramebuffer !== t) {\n      if (e(t)) return this.gl.bindFramebuffer(_.FRAMEBUFFER, null), this._state.readFramebuffer = null, void (this._state.drawFramebuffer = null);\n      t.initializeAndBind(_.FRAMEBUFFER), this._state.readFramebuffer = t, this._state.drawFramebuffer = t;\n    }\n  }\n\n  bindFramebufferSeparate(t, s) {\n    let a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n    const r = s === _.READ_FRAMEBUFFER,\n          n = r ? this._state.readFramebuffer : this._state.drawFramebuffer;\n    (a || n !== t) && (e(t) ? this.gl.bindFramebuffer(s, null) : t.initializeAndBind(s), r ? this._state.readFramebuffer = i(t, null) : this._state.drawFramebuffer = i(t, null));\n  }\n\n  blitFramebuffer(t, e) {\n    let s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    let i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n    let a = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : t.width;\n    let r = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : t.height;\n    let n = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 0;\n    let l = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : 0;\n    let h = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : e.width;\n    let f = arguments.length > 9 && arguments[9] !== undefined ? arguments[9] : e.height;\n    let o = arguments.length > 10 && arguments[10] !== undefined ? arguments[10] : u.COLOR_BUFFER_BIT;\n    let d = arguments.length > 11 && arguments[11] !== undefined ? arguments[11] : c.NEAREST;\n    this.bindFramebufferSeparate(t, _.READ_FRAMEBUFFER), this.bindFramebufferSeparate(e, _.DRAW_FRAMEBUFFER);\n    this.gl.blitFramebuffer(s, i, a, r, n, l, h, f, o, d);\n  }\n\n  bindBuffer(t, e) {\n    if (t) switch (null != e || (e = t.bufferType), e) {\n      case h.ARRAY_BUFFER:\n        this._state.vertexBuffer = y(this.gl, t, e, this._state.vertexBuffer);\n        break;\n\n      case h.ELEMENT_ARRAY_BUFFER:\n        this._state.indexBuffer = y(this.gl, t, e, this._state.indexBuffer);\n        break;\n\n      case h.UNIFORM_BUFFER:\n        this._state.uniformBuffer = y(this.gl, t, e, this._state.uniformBuffer);\n        break;\n\n      case h.PIXEL_PACK_BUFFER:\n        this._state.pixelPackBuffer = y(this.gl, t, e, this._state.pixelPackBuffer);\n        break;\n\n      case h.PIXEL_UNPACK_BUFFER:\n        this._state.pixelUnpackBuffer = y(this.gl, t, e, this._state.pixelUnpackBuffer);\n        break;\n\n      case h.COPY_READ_BUFFER:\n        this._state.copyReadBuffer = y(this.gl, t, e, this._state.copyReadBuffer);\n        break;\n\n      case h.COPY_WRITE_BUFFER:\n        this._state.copyWriteBuffer = y(this.gl, t, e, this._state.copyWriteBuffer);\n    }\n  }\n\n  bindRenderbuffer(t) {\n    const e = this.gl;\n    t || (e.bindRenderbuffer(e.RENDERBUFFER, null), this._state.renderbuffer = null), this._state.renderbuffer !== t && (e.bindRenderbuffer(e.RENDERBUFFER, t.glName), this._state.renderbuffer = t);\n  }\n\n  _getBufferBinding(t, s) {\n    if (s >= this.parameters.maxUniformBufferBindings || s < 0) return console.error(\"Uniform buffer binding point is out of range!\"), null;\n    const i = this._state.uniformBufferBindingPoints;\n    let a = i[s];\n    return e(a) && (a = {\n      buffer: null,\n      offset: 0,\n      size: 0\n    }, i[s] = a), a;\n  }\n\n  bindBufferBase(t, s, i) {\n    const a = this._getBufferBinding(t, s);\n\n    if (e(a)) return;\n    if (a.buffer === i && 0 === a.offset && 0 === a.size) return;\n    this.gl.bindBufferBase(t, s, i ? i.glName : null), a.buffer = i, a.offset = 0, a.size = 0;\n  }\n\n  bindBufferRange(t, s, i, a, r) {\n    const n = this._getBufferBinding(t, s);\n\n    if (e(n)) return;\n    if (n.buffer === i && n.offset === a && n.size === r) return;\n    if (a % this._parameters.uniformBufferOffsetAlignment != 0) return void console.error(\"Uniform buffer binding offset is not a multiple of the context offset alignment\");\n    this.gl.bindBufferRange(t, s, i.glName, a, r), n.buffer = i, n.offset = a, n.size = r;\n  }\n\n  bindUBO(t, s, i, a) {\n    e(s) ? this.bindBufferBase(h.UNIFORM_BUFFER, t, null) : (n() && (null != a ? a : s.byteLength) > this._parameters.maxUniformBlockSize && console.error(\"Attempting to bind more data than the maximum uniform block size\"), s.initialize(), void 0 !== i && void 0 !== a ? this.bindBufferRange(h.UNIFORM_BUFFER, t, s.buffer, i, a) : this.bindBufferBase(h.UNIFORM_BUFFER, t, s.buffer));\n  }\n\n  unbindUBO(t) {\n    for (let e = 0, i = this._state.uniformBufferBindingPoints.length; e < i; e++) {\n      const i = this._state.uniformBufferBindingPoints[e];\n      s(i) && i.buffer === t.buffer && this.bindBufferBase(h.UNIFORM_BUFFER, e, null);\n    }\n  }\n\n  unbindBuffer(t) {\n    switch (t) {\n      case h.ARRAY_BUFFER:\n        this._state.vertexBuffer = y(this.gl, null, t, this._state.vertexBuffer);\n        break;\n\n      case h.ELEMENT_ARRAY_BUFFER:\n        this._state.indexBuffer = y(this.gl, null, t, this._state.indexBuffer);\n        break;\n\n      case h.UNIFORM_BUFFER:\n        this._state.uniformBuffer = y(this.gl, null, t, this._state.uniformBuffer);\n        break;\n\n      case h.PIXEL_PACK_BUFFER:\n        this._state.pixelPackBuffer = y(this.gl, null, t, this._state.pixelPackBuffer);\n        break;\n\n      case h.PIXEL_UNPACK_BUFFER:\n        this._state.pixelUnpackBuffer = y(this.gl, null, t, this._state.pixelUnpackBuffer);\n        break;\n\n      case h.COPY_READ_BUFFER:\n        this._state.copyReadBuffer = y(this.gl, null, t, this._state.copyReadBuffer);\n        break;\n\n      case h.COPY_WRITE_BUFFER:\n        this._state.copyWriteBuffer = y(this.gl, null, t, this._state.copyWriteBuffer);\n    }\n  }\n\n  bindVAO() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    e(t) ? this._state.vertexArrayObject && (this._state.vertexArrayObject.unbind(), this._state.vertexArrayObject = null) : this._state.vertexArrayObject !== t && (t.bind(), this._state.vertexArrayObject = t);\n  }\n\n  async clientWaitAsync() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : r(10);\n    const e = {};\n    this.instanceCounter.increment(d.Sync, e);\n    const s = this.gl,\n          i = s.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE, 0);\n    let n;\n    s.flush();\n\n    do {\n      await a(t), n = s.clientWaitSync(i, 0, 0);\n    } while (n === F.TIMEOUT_EXPIRED);\n\n    if (s.deleteSync(i), this.instanceCounter.decrement(d.Sync, e), n === F.WAIT_FAILED) throw new Error(\"Client wait failed\");\n  }\n\n  getBoundFramebufferObject() {\n    let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _.FRAMEBUFFER;\n    return t === _.READ_FRAMEBUFFER ? this._state.readFramebuffer : this._state.drawFramebuffer;\n  }\n\n  getBoundVAO() {\n    return this._state.vertexArrayObject;\n  }\n\n  resetState() {\n    this.useProgram(null), this.bindVAO(null), this.bindFramebuffer(null, !0), this.unbindBuffer(h.ARRAY_BUFFER), this.unbindBuffer(h.ELEMENT_ARRAY_BUFFER), N(this.gl) && (this.unbindBuffer(h.UNIFORM_BUFFER), this._state.uniformBufferBindingPoints.length = 0, this.unbindBuffer(h.PIXEL_PACK_BUFFER), this.unbindBuffer(h.PIXEL_UNPACK_BUFFER), this.unbindBuffer(h.COPY_READ_BUFFER), this.unbindBuffer(h.COPY_WRITE_BUFFER));\n\n    for (let t = 0; t < this.parameters.maxTextureImageUnits; ++t) this.bindTexture(null, t);\n\n    this.setBlendingEnabled(!1), this.setBlendFunction(g.ONE, g.ZERO), this.setBlendEquation(p.ADD), this.setBlendColor(0, 0, 0, 0), this.setFaceCullingEnabled(!1), this.setCullFace(f.BACK), this.setFrontFace(E.CCW), this.setPolygonOffsetFillEnabled(!1), this.setPolygonOffset(0, 0), this.setScissorTestEnabled(!1), this.setScissorRect(0, 0, this.gl.canvas.width, this.gl.canvas.height), this.setDepthTestEnabled(!1), this.setDepthFunction(B.LESS), this.setDepthRange(0, 1), this.setStencilTestEnabled(!1), this.setStencilFunction(B.ALWAYS, 0, 0), this.setStencilOp(m.KEEP, m.KEEP, m.KEEP), this.setClearColor(0, 0, 0, 0), this.setClearDepth(1), this.setClearStencil(0), this.setColorMask(!0, !0, !0, !0), this.setStencilWriteMask(4294967295), this.setDepthWriteEnabled(!0), this.setViewport(0, 0, this.gl.canvas.width, this.gl.canvas.height);\n  }\n\n  enforceState() {\n    var t, e;\n    const i = this.gl,\n          a = this.capabilities.vao;\n    a && a.bindVertexArray(null);\n\n    for (let s = 0; s < this.parameters.maxVertexAttributes; s++) i.disableVertexAttribArray(s);\n\n    if (this._state.vertexBuffer ? i.bindBuffer(this._state.vertexBuffer.bufferType, this._state.vertexBuffer.glName) : i.bindBuffer(h.ARRAY_BUFFER, null), this._state.indexBuffer ? i.bindBuffer(this._state.indexBuffer.bufferType, this._state.indexBuffer.glName) : i.bindBuffer(h.ELEMENT_ARRAY_BUFFER, null), N(i)) {\n      var r, l;\n      this._state.uniformBuffer ? i.bindBuffer(this._state.uniformBuffer.bufferType, this._state.uniformBuffer.glName) : i.bindBuffer(h.UNIFORM_BUFFER, null);\n\n      for (let t = 0; t < this._parameters.maxUniformBufferBindings; t++) {\n        const e = this._state.uniformBufferBindingPoints[t];\n\n        if (s(e) && null !== e.buffer) {\n          const {\n            buffer: s,\n            offset: a,\n            size: r\n          } = e;\n          0 === a && 0 === r ? i.bindBufferBase(h.UNIFORM_BUFFER, t, s.glName) : i.bindBufferRange(h.UNIFORM_BUFFER, t, s.glName, a, r);\n        } else i.bindBufferBase(h.UNIFORM_BUFFER, t, null);\n      }\n\n      this._state.pixelPackBuffer ? i.bindBuffer(this._state.pixelPackBuffer.bufferType, this._state.pixelPackBuffer.glName) : i.bindBuffer(h.PIXEL_PACK_BUFFER, null), this._state.pixelUnpackBuffer ? i.bindBuffer(this._state.pixelUnpackBuffer.bufferType, this._state.pixelUnpackBuffer.glName) : i.bindBuffer(h.PIXEL_UNPACK_BUFFER, null), this._state.copyReadBuffer ? i.bindBuffer(this._state.copyReadBuffer.bufferType, this._state.copyReadBuffer.glName) : i.bindBuffer(h.COPY_READ_BUFFER, null), this._state.copyWriteBuffer ? i.bindBuffer(this._state.copyWriteBuffer.bufferType, this._state.copyWriteBuffer.glName) : i.bindBuffer(h.COPY_WRITE_BUFFER, null), i.bindFramebuffer(_.READ_FRAMEBUFFER, null), i.readBuffer(i.BACK), this._state.readFramebuffer && (i.bindFramebuffer(_.READ_FRAMEBUFFER, this._state.readFramebuffer.glName), i.readBuffer(R.COLOR_ATTACHMENT0)), i.bindFramebuffer(_.DRAW_FRAMEBUFFER, null != (r = null == (l = this._state.drawFramebuffer) ? void 0 : l.glName) ? r : null);\n    } else {\n      var f, u;\n      this._state.readFramebuffer = this._state.drawFramebuffer, i.bindFramebuffer(_.FRAMEBUFFER, null != (f = null == (u = this._state.drawFramebuffer) ? void 0 : u.glName) ? f : null);\n    }\n\n    if (a && this._state.vertexArrayObject) {\n      const t = this._state.vertexArrayObject;\n      this._state.vertexArrayObject && (this._state.vertexArrayObject.unbind(), this._state.vertexArrayObject = null), this.bindVAO(t);\n    }\n\n    i.useProgram(null != (t = null == (e = this._state.program) ? void 0 : e.glName) ? t : null), i.blendColor(this._state.blendColor.r, this._state.blendColor.g, this._state.blendColor.b, this._state.blendColor.a), i.bindRenderbuffer(i.RENDERBUFFER, this._state.renderbuffer ? this._state.renderbuffer.glName : null), !0 === this._state.blend ? i.enable(this.gl.BLEND) : i.disable(this.gl.BLEND), i.blendEquationSeparate(this._state.blendEquation.mode, this._state.blendEquation.modeAlpha), i.blendFuncSeparate(this._state.blendFunction.srcRGB, this._state.blendFunction.dstRGB, this._state.blendFunction.srcAlpha, this._state.blendFunction.dstAlpha), i.clearColor(this._state.clearColor.r, this._state.clearColor.g, this._state.clearColor.b, this._state.clearColor.a), i.clearDepth(this._state.clearDepth), i.clearStencil(this._state.clearStencil), i.colorMask(this._state.colorMask.r, this._state.colorMask.g, this._state.colorMask.b, this._state.colorMask.a), i.cullFace(this._state.cullFace), i.depthFunc(this._state.depthFunction), i.depthRange(this._state.depthRange.zNear, this._state.depthRange.zFar), !0 === this._state.depthTest ? i.enable(i.DEPTH_TEST) : i.disable(i.DEPTH_TEST), i.depthMask(this._state.depthWrite), i.frontFace(this._state.frontFace), i.lineWidth(1), !0 === this._state.faceCulling ? i.enable(i.CULL_FACE) : i.disable(i.CULL_FACE), i.polygonOffset(this._state.polygonOffset[0], this._state.polygonOffset[1]), !0 === this._state.polygonOffsetFill ? i.enable(i.POLYGON_OFFSET_FILL) : i.disable(i.POLYGON_OFFSET_FILL), i.scissor(this._state.scissorRect.x, this._state.scissorRect.y, this._state.scissorRect.width, this._state.scissorRect.height), !0 === this._state.scissorTest ? i.enable(i.SCISSOR_TEST) : i.disable(i.SCISSOR_TEST), i.stencilFunc(this._state.stencilFunction.func, this._state.stencilFunction.ref, this._state.stencilFunction.mask), i.stencilOpSeparate(this._state.stencilOperation.face, this._state.stencilOperation.fail, this._state.stencilOperation.zFail, this._state.stencilOperation.zPass), !0 === this._state.stencilTest ? i.enable(i.STENCIL_TEST) : i.disable(i.STENCIL_TEST), i.stencilMask(this._state.stencilWriteMask);\n\n    for (let n = 0; n < this.parameters.maxTextureImageUnits; n++) {\n      i.activeTexture(o + n), i.bindTexture(T.TEXTURE_2D, null), i.bindTexture(T.TEXTURE_CUBE_MAP, null), N(i) && (i.bindTexture(T.TEXTURE_3D, null), i.bindTexture(T.TEXTURE_2D_ARRAY, null));\n      const t = this._state.textureUnitMap[n];\n      s(t) && i.bindTexture(t.descriptor.target, t.glName);\n    }\n\n    i.activeTexture(o + this._state.activeTexture), i.viewport(this._state.viewport.x, this._state.viewport.y, this._state.viewport.width, this._state.viewport.height), n() && (this._numOfDrawCalls = 0, this._numOfTriangles = 0);\n  }\n\n  _loadExtensions() {\n    this.type === l.WEBGL1 && this.gl.getExtension(\"OES_element_index_uint\"), this.gl.getExtension(\"KHR_parallel_shader_compile\");\n  }\n\n  _loadParameters(t) {\n    var e;\n    const s = this.capabilities.textureFilterAnisotropic,\n          i = null != (e = t.maxAnisotropy) ? e : 1 / 0,\n          a = N(this.gl),\n          r = this.gl,\n          n = {\n      versionString: this.gl.getParameter(this.gl.VERSION),\n      maxVertexTextureImageUnits: this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),\n      maxVertexAttributes: this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),\n      maxMaxAnisotropy: s ? Math.min(this.gl.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY), i) : 1,\n      maxTextureImageUnits: this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),\n      maxTextureSize: this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),\n      maxUniformBufferBindings: a ? r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS) : 0,\n      maxVertexUniformBlocks: a ? r.getParameter(r.MAX_VERTEX_UNIFORM_BLOCKS) : 0,\n      maxFragmentUniformBlocks: a ? r.getParameter(r.MAX_FRAGMENT_UNIFORM_BLOCKS) : 0,\n      maxUniformBlockSize: a ? r.getParameter(r.MAX_UNIFORM_BLOCK_SIZE) : 0,\n      uniformBufferOffsetAlignment: a ? r.getParameter(r.UNIFORM_BUFFER_OFFSET_ALIGNMENT) : 1,\n      maxArrayTextureLayers: a ? r.getParameter(r.MAX_ARRAY_TEXTURE_LAYERS) : 1,\n      maxSamples: a ? r.getParameter(r.MAX_SAMPLES) : 1\n    };\n    return O.TEXTURE_UNIT_FOR_UPDATES = n.maxTextureImageUnits - 1, n;\n  }\n\n}\n\nfunction y(t, e, s, i) {\n  return e ? i !== e && t.bindBuffer(s, e.glName) : t.bindBuffer(s, null), e;\n}\n\nfunction I(t, e) {\n  switch (t) {\n    case A.POINTS:\n      return 2 * e;\n\n    case A.TRIANGLES:\n      return e / 3;\n\n    case A.TRIANGLE_STRIP:\n    case A.TRIANGLE_FAN:\n      return e - 2;\n\n    default:\n      return 0;\n  }\n}\n\nexport { k as RenderingContext };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/webgl/RenderingContext.js"],"names":["applySome","t","isNone","e","isSome","s","unwrapOr","i","after","a","Milliseconds","r","webglDebugEnabled","n","ContextType","l","BufferType","h","Face","f","BASE_TEXTURE_UNIT","o","ClearBufferBit","u","FramebufferTarget","_","TextureSamplingMode","c","ResourceType","d","SyncCondition","b","ClientWaitSyncStatus","F","BlendFactor","g","BlendOperation","p","CullMode","E","CompareFunction","B","StencilOperation","m","ColorAttachment","R","TextureType","T","PrimitiveType","A","ProgramCache","x","Texture","O","ContextState","U","InstanceCounter","C","StateTracker","S","getErrorString","P","WebGLDriverTest","M","Capabilities","v","N","k","constructor","gl","instanceCounter","programCache","_state","_numOfDrawCalls","_numOfTriangles","type","WEBGL2","WEBGL1","_loadExtensions","configure","_capabilities","_parameters","_loadParameters","getParameter","VIEWPORT","viewport","y","width","height","_stateTracker","setBlending","setBlendingEnabled","setBlendEquationSeparate","opRgb","opAlpha","setBlendFunctionSeparate","srcRgb","dstRgb","srcAlpha","dstAlpha","color","setBlendColor","setCulling","setFaceCullingEnabled","setCullFace","face","setFrontFace","mode","setPolygonOffset","setPolygonOffsetFillEnabled","factor","units","setDepthTest","setDepthTestEnabled","setDepthFunction","func","setStencilTest","setStencilTestEnabled","function","setStencilFunction","ref","mask","operation","setStencilOp","fail","zFail","zPass","setDepthWrite","setDepthWriteEnabled","setDepthRange","zNear","zFar","setColorWrite","setColorMask","setStencilWrite","setStencilWriteMask","enforceState","_driverTest","driverTest","contextAttributes","getContextAttributes","parameters","dispose","bindVAO","unbindBuffer","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","UNIFORM_BUFFER","uniformBufferBindingPoints","length","PIXEL_PACK_BUFFER","PIXEL_UNPACK_BUFFER","COPY_READ_BUFFER","COPY_WRITE_BUFFER","textureUnitMap","printResourceCount","setPipelineState","setPipeline","blend","enable","BLEND","disable","invalidateBlending","externalProgramUpdate","program","stop","externalTextureUnitUpdate","activeTexture","externalVertexArrayObjectUpdate","capabilities","vao","bindVertexArray","vertexArrayObject","vertexBuffer","indexBuffer","externalVertexBufferUpdate","externalIndexBufferUpdate","blendColor","setBlendFunction","blendFunction","srcRGB","dstRGB","blendFunc","blendFuncSeparate","setBlendEquation","blendEquation","modeAlpha","blendEquationSeparate","colorMask","invalidateColorWrite","setClearColor","clearColor","faceCulling","CULL_FACE","invalidateCulling","polygonOffsetFill","POLYGON_OFFSET_FILL","invalidatePolygonOffset","polygonOffset","cullFace","frontFace","setScissorTestEnabled","scissorTest","SCISSOR_TEST","setScissorRect","scissorRect","scissor","depthTest","DEPTH_TEST","invalidateDepthTest","setClearDepth","clearDepth","depthFunction","depthFunc","depthWrite","depthMask","invalidateDepthWrite","depthRange","stencilTest","STENCIL_TEST","invalidateStencilTest","setClearStencil","clearStencil","stencilFunction","stencilFunc","FRONT_AND_BACK","setStencilFunctionSeparate","stencilFuncSeparate","stencilWriteMask","stencilMask","invalidateStencilWrite","stencilOperation","stencilOp","setStencilOpSeparate","stencilOpSeparate","setActiveTexture","clear","clearSafe","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","drawArrays","I","console","error","drawElements","getBoundVAO","vertexBuffers","count","offset","size","args","logIno","log","setViewport","Math","max","round","getViewport","useProgram","glName","bindTexture","maxTextureImageUnits","descriptor","target","applyChanges","isDirty","unbindTextureAllUnits","bindFramebuffer","readFramebuffer","drawFramebuffer","FRAMEBUFFER","initializeAndBind","bindFramebufferSeparate","READ_FRAMEBUFFER","blitFramebuffer","NEAREST","DRAW_FRAMEBUFFER","bindBuffer","bufferType","uniformBuffer","pixelPackBuffer","pixelUnpackBuffer","copyReadBuffer","copyWriteBuffer","bindRenderbuffer","RENDERBUFFER","renderbuffer","_getBufferBinding","maxUniformBufferBindings","buffer","bindBufferBase","bindBufferRange","uniformBufferOffsetAlignment","bindUBO","byteLength","maxUniformBlockSize","initialize","unbindUBO","unbind","bind","clientWaitAsync","increment","Sync","fenceSync","SYNC_GPU_COMMANDS_COMPLETE","flush","clientWaitSync","TIMEOUT_EXPIRED","deleteSync","decrement","WAIT_FAILED","Error","getBoundFramebufferObject","resetState","ONE","ZERO","ADD","BACK","CCW","canvas","LESS","ALWAYS","KEEP","maxVertexAttributes","disableVertexAttribArray","readBuffer","COLOR_ATTACHMENT0","lineWidth","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_3D","TEXTURE_2D_ARRAY","getExtension","textureFilterAnisotropic","maxAnisotropy","versionString","VERSION","maxVertexTextureImageUnits","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_VERTEX_ATTRIBS","maxMaxAnisotropy","min","MAX_TEXTURE_MAX_ANISOTROPY","MAX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","MAX_UNIFORM_BUFFER_BINDINGS","maxVertexUniformBlocks","MAX_VERTEX_UNIFORM_BLOCKS","maxFragmentUniformBlocks","MAX_FRAGMENT_UNIFORM_BLOCKS","MAX_UNIFORM_BLOCK_SIZE","UNIFORM_BUFFER_OFFSET_ALIGNMENT","maxArrayTextureLayers","MAX_ARRAY_TEXTURE_LAYERS","maxSamples","MAX_SAMPLES","TEXTURE_UNIT_FOR_UPDATES","POINTS","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","RenderingContext"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{applySome as t,isNone as e,isSome as s,unwrapOr as i}from\"../../core/maybe.js\";import{after as a}from\"../../core/promiseUtils.js\";import{Milliseconds as r}from\"../../core/time.js\";import\"./BufferObject.js\";import\"./FramebufferObject.js\";import\"../../core/has.js\";import{webglDebugEnabled as n}from\"./checkWebGLError.js\";import{ContextType as l}from\"./context-util.js\";import{BufferType as h,Face as f,BASE_TEXTURE_UNIT as o,ClearBufferBit as u,FramebufferTarget as _,TextureSamplingMode as c,ResourceType as d,SyncCondition as b,ClientWaitSyncStatus as F,BlendFactor as g,BlendOperation as p,CullMode as E,CompareFunction as B,StencilOperation as m,ColorAttachment as R,TextureType as T,PrimitiveType as A}from\"./enums.js\";import\"./ShaderTranspiler.js\";import{ProgramCache as x}from\"./ProgramCache.js\";import{Texture as O}from\"./Texture.js\";import\"./VertexArrayObject.js\";import{ContextState as U}from\"./ContextState.js\";import{InstanceCounter as C}from\"./InstanceCounter.js\";import{StateTracker as S}from\"./renderState.js\";import{getErrorString as P}from\"./Util.js\";import{WebGLDriverTest as M}from\"./WebGLDriverTest.js\";import{Capabilities as v}from\"./capabilities/Capabilities.js\";import N from\"./capabilities/isWebGL2Context.js\";class k{constructor(t,e){this.gl=t,this.instanceCounter=new C,this.programCache=new x(this),this._state=new U,this._numOfDrawCalls=0,this._numOfTriangles=0,this.type=N(t)?l.WEBGL2:l.WEBGL1,this._loadExtensions(),this.configure(e)}configure(t){this._capabilities=new v(this.gl,t),this._parameters=this._loadParameters(t);const e=this.gl.getParameter(this.gl.VIEWPORT);this._state=new U,this._state.viewport={x:e[0],y:e[1],width:e[2],height:e[3]},this._stateTracker=new S({setBlending:t=>{if(t){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(t.opRgb,t.opAlpha),this.setBlendFunctionSeparate(t.srcRgb,t.dstRgb,t.srcAlpha,t.dstAlpha);const e=t.color;this.setBlendColor(e.r,e.g,e.b,e.a)}else this.setBlendingEnabled(!1)},setCulling:t=>{t?(this.setFaceCullingEnabled(!0),this.setCullFace(t.face),this.setFrontFace(t.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:t=>{t?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(t.factor,t.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:t=>{t?(this.setDepthTestEnabled(!0),this.setDepthFunction(t.func)):this.setDepthTestEnabled(!1)},setStencilTest:t=>{if(t){this.setStencilTestEnabled(!0);const e=t.function;this.setStencilFunction(e.func,e.ref,e.mask);const s=t.operation;this.setStencilOp(s.fail,s.zFail,s.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:t=>{t?(this.setDepthWriteEnabled(!0),this.setDepthRange(t.zNear,t.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:t=>{t?this.setColorMask(t.r,t.g,t.b,t.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:t=>{t?this.setStencilWriteMask(t.mask):this.setStencilWriteMask(0)}}),this.enforceState(),this._driverTest=new M(this)}get driverTest(){return this._driverTest}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){return this._parameters}dispose(){this.programCache.dispose(),this.bindVAO(null),this.unbindBuffer(h.ARRAY_BUFFER),this.unbindBuffer(h.ELEMENT_ARRAY_BUFFER),N(this.gl)&&(this.unbindBuffer(h.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(h.PIXEL_PACK_BUFFER),this.unbindBuffer(h.PIXEL_UNPACK_BUFFER),this.unbindBuffer(h.COPY_READ_BUFFER),this.unbindBuffer(h.COPY_WRITE_BUFFER)),this._state.textureUnitMap.length=0,n()&&this.instanceCounter.printResourceCount()}setPipelineState(t){this._stateTracker.setPipeline(t)}setBlendingEnabled(t){this._state.blend!==t&&(!0===t?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._state.blend=t,this._stateTracker.invalidateBlending())}externalProgramUpdate(){var t;null==(t=this._state.program)||t.stop(),this._state.program=null}externalTextureUnitUpdate(t,e){for(let s=0;s<t.length;++s)this._state.textureUnitMap[t[s]]=null;e>=0&&(this._state.activeTexture=e)}externalVertexArrayObjectUpdate(){const t=this.capabilities.vao;t&&(t.bindVertexArray(null),this._state.vertexArrayObject=null),this._state.vertexBuffer=null,this._state.indexBuffer=null}externalVertexBufferUpdate(){this._state.vertexBuffer=null}externalIndexBufferUpdate(){this._state.indexBuffer=null}setBlendColor(t,e,s,i){t===this._state.blendColor.r&&e===this._state.blendColor.g&&s===this._state.blendColor.b&&i===this._state.blendColor.a||(this.gl.blendColor(t,e,s,i),this._state.blendColor.r=t,this._state.blendColor.g=e,this._state.blendColor.b=s,this._state.blendColor.a=i,this._stateTracker.invalidateBlending())}setBlendFunction(t,e){t===this._state.blendFunction.srcRGB&&e===this._state.blendFunction.dstRGB||(this.gl.blendFunc(t,e),this._state.blendFunction.srcRGB=t,this._state.blendFunction.srcAlpha=t,this._state.blendFunction.dstRGB=e,this._state.blendFunction.dstAlpha=e,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(t,e,s,i){this._state.blendFunction.srcRGB===t&&this._state.blendFunction.srcAlpha===s&&this._state.blendFunction.dstRGB===e&&this._state.blendFunction.dstAlpha===i||(this.gl.blendFuncSeparate(t,e,s,i),this._state.blendFunction.srcRGB=t,this._state.blendFunction.srcAlpha=s,this._state.blendFunction.dstRGB=e,this._state.blendFunction.dstAlpha=i,this._stateTracker.invalidateBlending())}setBlendEquation(t){this._state.blendEquation.mode!==t&&(this.gl.blendEquation(t),this._state.blendEquation.mode=t,this._state.blendEquation.modeAlpha=t,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(t,e){this._state.blendEquation.mode===t&&this._state.blendEquation.modeAlpha===e||(this.gl.blendEquationSeparate(t,e),this._state.blendEquation.mode=t,this._state.blendEquation.modeAlpha=e,this._stateTracker.invalidateBlending())}setColorMask(t,e,s,i){this._state.colorMask.r===t&&this._state.colorMask.g===e&&this._state.colorMask.b===s&&this._state.colorMask.a===i||(this.gl.colorMask(t,e,s,i),this._state.colorMask.r=t,this._state.colorMask.g=e,this._state.colorMask.b=s,this._state.colorMask.a=i,this._stateTracker.invalidateColorWrite())}setClearColor(t,e,s,i){this._state.clearColor.r===t&&this._state.clearColor.g===e&&this._state.clearColor.b===s&&this._state.clearColor.a===i||(this.gl.clearColor(t,e,s,i),this._state.clearColor.r=t,this._state.clearColor.g=e,this._state.clearColor.b=s,this._state.clearColor.a=i)}setFaceCullingEnabled(t){this._state.faceCulling!==t&&(!0===t?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._state.faceCulling=t,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(t){this._state.polygonOffsetFill!==t&&(!0===t?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._state.polygonOffsetFill=t,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(t,e){this._state.polygonOffset[0]===t&&this._state.polygonOffset[1]===e||(this._state.polygonOffset[0]=t,this._state.polygonOffset[1]=e,this.gl.polygonOffset(t,e),this._stateTracker.invalidatePolygonOffset())}setCullFace(t){this._state.cullFace!==t&&(this.gl.cullFace(t),this._state.cullFace=t,this._stateTracker.invalidateCulling())}setFrontFace(t){this._state.frontFace!==t&&(this.gl.frontFace(t),this._state.frontFace=t,this._stateTracker.invalidateCulling())}setScissorTestEnabled(t){this._state.scissorTest!==t&&(!0===t?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._state.scissorTest=t)}setScissorRect(t,e,s,i){this._state.scissorRect.x===t&&this._state.scissorRect.y===e&&this._state.scissorRect.width===s&&this._state.scissorRect.height===i||(this.gl.scissor(t,e,s,i),this._state.scissorRect.x=t,this._state.scissorRect.y=e,this._state.scissorRect.width=s,this._state.scissorRect.height=i)}setDepthTestEnabled(t){this._state.depthTest!==t&&(!0===t?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._state.depthTest=t,this._stateTracker.invalidateDepthTest())}setClearDepth(t){this._state.clearDepth!==t&&(this.gl.clearDepth(t),this._state.clearDepth=t)}setDepthFunction(t){this._state.depthFunction!==t&&(this.gl.depthFunc(t),this._state.depthFunction=t,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(t){this._state.depthWrite!==t&&(this.gl.depthMask(t),this._state.depthWrite=t,this._stateTracker.invalidateDepthWrite())}setDepthRange(t,e){this._state.depthRange.zNear===t&&this._state.depthRange.zFar===e||(this.gl.depthRange(t,e),this._state.depthRange.zNear=t,this._state.depthRange.zFar=e,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(t){this._state.stencilTest!==t&&(!0===t?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._state.stencilTest=t,this._stateTracker.invalidateStencilTest())}setClearStencil(t){t!==this._state.clearStencil&&(this.gl.clearStencil(t),this._state.clearStencil=t)}setStencilFunction(t,e,s){this._state.stencilFunction.func===t&&this._state.stencilFunction.ref===e&&this._state.stencilFunction.mask===s||(this.gl.stencilFunc(t,e,s),this._state.stencilFunction.face=f.FRONT_AND_BACK,this._state.stencilFunction.func=t,this._state.stencilFunction.ref=e,this._state.stencilFunction.mask=s,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(t,e,s,i){this._state.stencilFunction.face===t&&this._state.stencilFunction.func===e&&this._state.stencilFunction.ref===s&&this._state.stencilFunction.mask===i||(this.gl.stencilFuncSeparate(t,e,s,i),this._state.stencilFunction.face=t,this._state.stencilFunction.func=e,this._state.stencilFunction.ref=s,this._state.stencilFunction.mask=i,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(t){this._state.stencilWriteMask!==t&&(this.gl.stencilMask(t),this._state.stencilWriteMask=t,this._stateTracker.invalidateStencilWrite())}setStencilOp(t,e,s){this._state.stencilOperation.face===f.FRONT_AND_BACK&&this._state.stencilOperation.fail===t&&this._state.stencilOperation.zFail===e&&this._state.stencilOperation.zPass===s||(this.gl.stencilOp(t,e,s),this._state.stencilOperation.face=f.FRONT_AND_BACK,this._state.stencilOperation.fail=t,this._state.stencilOperation.zFail=e,this._state.stencilOperation.zPass=s,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(t,e,s,i){this._state.stencilOperation.face===t&&this._state.stencilOperation.fail===e&&this._state.stencilOperation.zFail===s&&this._state.stencilOperation.zPass===i||(this.gl.stencilOpSeparate(t,e,s,i),this._state.stencilOperation.face=t,this._state.stencilOperation.fail=e,this._state.stencilOperation.zFail=s,this._state.stencilOperation.zPass=i,this._stateTracker.invalidateStencilTest())}setActiveTexture(t,e=!1){const s=this._state.activeTexture;return t>=0&&(e||t!==this._state.activeTexture)&&(this.gl.activeTexture(o+t),this._state.activeTexture=t),s}clear(t){t&&this.gl.clear(t)}clearSafe(t,e=255){t&&(t&u.COLOR_BUFFER_BIT&&this.setColorMask(!0,!0,!0,!0),t&u.DEPTH_BUFFER_BIT&&this.setDepthWriteEnabled(!0),t&u.STENCIL_BUFFER_BIT&&this.setStencilWriteMask(e),this.gl.clear(t))}drawArrays(t,e,s){if(n()&&(this._numOfDrawCalls++,this._numOfTriangles+=I(t,s)),this.gl.drawArrays(t,e,s),n()){const t=P(this);t&&console.error(\"drawArrays:\",t)}}drawElements(e,s,i,a){if(n()&&(this._numOfDrawCalls++,this._numOfTriangles+=I(e,s)),this.gl.drawElements(e,s,i,a),n()){const n=P(this);if(n){var r;const l=this.getBoundVAO(),h=null==l?void 0:l.indexBuffer,f={indexBuffer:h,vertexBuffers:null==l?void 0:l.vertexBuffers},o={mode:e,count:s,type:i,offset:a},u=null!=(r=t(h,(t=>t.size)))?r:0,_=a+s,c=u<_?`. Buffer is too small. Attempted to draw index ${_} of ${u}`:\"\";console.error(`drawElements: ${n}${c}`,{args:o,vao:f})}}}logIno(){n()&&console.log(`DrawCalls: ${this._numOfDrawCalls}, Triangles: ${this._numOfTriangles}`)}get capabilities(){return this._capabilities}setViewport(t,e,s,i){s=Math.max(Math.round(s),1),i=Math.max(Math.round(i),1);const a=this._state.viewport;a.x===t&&a.y===e&&a.width===s&&a.height===i||(a.x=t,a.y=e,a.width=s,a.height=i,this.gl.viewport(t,e,s,i))}getViewport(){return{x:this._state.viewport.x,y:this._state.viewport.y,width:this._state.viewport.width,height:this._state.viewport.height}}useProgram(t){var e,s;this._state.program!==t&&(null==(e=this._state.program)||e.stop(),this._state.program=t,this.gl.useProgram(null!=(s=null==t?void 0:t.glName)?s:null))}bindTexture(t,i,a=!1){(i>=this.parameters.maxTextureImageUnits||i<0)&&console.error(\"Input texture unit is out of range of available units!\");const r=this._state.textureUnitMap[i];return e(t)||null==t.glName?(s(r)&&(this.setActiveTexture(i,a),this.gl.bindTexture(r.descriptor.target,null)),this._state.textureUnitMap[i]=null,r):a||r!==t?(this.setActiveTexture(i,a),this.gl.bindTexture(t.descriptor.target,t.glName),t.applyChanges(),this._state.textureUnitMap[i]=t,r):(t.isDirty&&(this.setActiveTexture(i,a),t.applyChanges()),r)}unbindTextureAllUnits(t){for(let e=0;e<this.parameters.maxTextureImageUnits;e++)this._state.textureUnitMap[e]===t&&(this.bindTexture(null,e),this._state.textureUnitMap[e]=null)}bindFramebuffer(t,s=!1){if(s||this._state.readFramebuffer!==t||this._state.drawFramebuffer!==t){if(e(t))return this.gl.bindFramebuffer(_.FRAMEBUFFER,null),this._state.readFramebuffer=null,void(this._state.drawFramebuffer=null);t.initializeAndBind(_.FRAMEBUFFER),this._state.readFramebuffer=t,this._state.drawFramebuffer=t}}bindFramebufferSeparate(t,s,a=!1){const r=s===_.READ_FRAMEBUFFER,n=r?this._state.readFramebuffer:this._state.drawFramebuffer;(a||n!==t)&&(e(t)?this.gl.bindFramebuffer(s,null):t.initializeAndBind(s),r?this._state.readFramebuffer=i(t,null):this._state.drawFramebuffer=i(t,null))}blitFramebuffer(t,e,s=0,i=0,a=t.width,r=t.height,n=0,l=0,h=e.width,f=e.height,o=u.COLOR_BUFFER_BIT,d=c.NEAREST){this.bindFramebufferSeparate(t,_.READ_FRAMEBUFFER),this.bindFramebufferSeparate(e,_.DRAW_FRAMEBUFFER);this.gl.blitFramebuffer(s,i,a,r,n,l,h,f,o,d)}bindBuffer(t,e){if(t)switch(null!=e||(e=t.bufferType),e){case h.ARRAY_BUFFER:this._state.vertexBuffer=y(this.gl,t,e,this._state.vertexBuffer);break;case h.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=y(this.gl,t,e,this._state.indexBuffer);break;case h.UNIFORM_BUFFER:this._state.uniformBuffer=y(this.gl,t,e,this._state.uniformBuffer);break;case h.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=y(this.gl,t,e,this._state.pixelPackBuffer);break;case h.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=y(this.gl,t,e,this._state.pixelUnpackBuffer);break;case h.COPY_READ_BUFFER:this._state.copyReadBuffer=y(this.gl,t,e,this._state.copyReadBuffer);break;case h.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=y(this.gl,t,e,this._state.copyWriteBuffer)}}bindRenderbuffer(t){const e=this.gl;t||(e.bindRenderbuffer(e.RENDERBUFFER,null),this._state.renderbuffer=null),this._state.renderbuffer!==t&&(e.bindRenderbuffer(e.RENDERBUFFER,t.glName),this._state.renderbuffer=t)}_getBufferBinding(t,s){if(s>=this.parameters.maxUniformBufferBindings||s<0)return console.error(\"Uniform buffer binding point is out of range!\"),null;const i=this._state.uniformBufferBindingPoints;let a=i[s];return e(a)&&(a={buffer:null,offset:0,size:0},i[s]=a),a}bindBufferBase(t,s,i){const a=this._getBufferBinding(t,s);if(e(a))return;if(a.buffer===i&&0===a.offset&&0===a.size)return;this.gl.bindBufferBase(t,s,i?i.glName:null),a.buffer=i,a.offset=0,a.size=0}bindBufferRange(t,s,i,a,r){const n=this._getBufferBinding(t,s);if(e(n))return;if(n.buffer===i&&n.offset===a&&n.size===r)return;if(a%this._parameters.uniformBufferOffsetAlignment!=0)return void console.error(\"Uniform buffer binding offset is not a multiple of the context offset alignment\");this.gl.bindBufferRange(t,s,i.glName,a,r),n.buffer=i,n.offset=a,n.size=r}bindUBO(t,s,i,a){e(s)?this.bindBufferBase(h.UNIFORM_BUFFER,t,null):(n()&&(null!=a?a:s.byteLength)>this._parameters.maxUniformBlockSize&&console.error(\"Attempting to bind more data than the maximum uniform block size\"),s.initialize(),void 0!==i&&void 0!==a?this.bindBufferRange(h.UNIFORM_BUFFER,t,s.buffer,i,a):this.bindBufferBase(h.UNIFORM_BUFFER,t,s.buffer))}unbindUBO(t){for(let e=0,i=this._state.uniformBufferBindingPoints.length;e<i;e++){const i=this._state.uniformBufferBindingPoints[e];s(i)&&i.buffer===t.buffer&&this.bindBufferBase(h.UNIFORM_BUFFER,e,null)}}unbindBuffer(t){switch(t){case h.ARRAY_BUFFER:this._state.vertexBuffer=y(this.gl,null,t,this._state.vertexBuffer);break;case h.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=y(this.gl,null,t,this._state.indexBuffer);break;case h.UNIFORM_BUFFER:this._state.uniformBuffer=y(this.gl,null,t,this._state.uniformBuffer);break;case h.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=y(this.gl,null,t,this._state.pixelPackBuffer);break;case h.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=y(this.gl,null,t,this._state.pixelUnpackBuffer);break;case h.COPY_READ_BUFFER:this._state.copyReadBuffer=y(this.gl,null,t,this._state.copyReadBuffer);break;case h.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=y(this.gl,null,t,this._state.copyWriteBuffer)}}bindVAO(t=null){e(t)?this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null):this._state.vertexArrayObject!==t&&(t.bind(),this._state.vertexArrayObject=t)}async clientWaitAsync(t=r(10)){const e={};this.instanceCounter.increment(d.Sync,e);const s=this.gl,i=s.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);let n;s.flush();do{await a(t),n=s.clientWaitSync(i,0,0)}while(n===F.TIMEOUT_EXPIRED);if(s.deleteSync(i),this.instanceCounter.decrement(d.Sync,e),n===F.WAIT_FAILED)throw new Error(\"Client wait failed\")}getBoundFramebufferObject(t=_.FRAMEBUFFER){return t===_.READ_FRAMEBUFFER?this._state.readFramebuffer:this._state.drawFramebuffer}getBoundVAO(){return this._state.vertexArrayObject}resetState(){this.useProgram(null),this.bindVAO(null),this.bindFramebuffer(null,!0),this.unbindBuffer(h.ARRAY_BUFFER),this.unbindBuffer(h.ELEMENT_ARRAY_BUFFER),N(this.gl)&&(this.unbindBuffer(h.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(h.PIXEL_PACK_BUFFER),this.unbindBuffer(h.PIXEL_UNPACK_BUFFER),this.unbindBuffer(h.COPY_READ_BUFFER),this.unbindBuffer(h.COPY_WRITE_BUFFER));for(let t=0;t<this.parameters.maxTextureImageUnits;++t)this.bindTexture(null,t);this.setBlendingEnabled(!1),this.setBlendFunction(g.ONE,g.ZERO),this.setBlendEquation(p.ADD),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(f.BACK),this.setFrontFace(E.CCW),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(B.LESS),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(B.ALWAYS,0,0),this.setStencilOp(m.KEEP,m.KEEP,m.KEEP),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){var t,e;const i=this.gl,a=this.capabilities.vao;a&&a.bindVertexArray(null);for(let s=0;s<this.parameters.maxVertexAttributes;s++)i.disableVertexAttribArray(s);if(this._state.vertexBuffer?i.bindBuffer(this._state.vertexBuffer.bufferType,this._state.vertexBuffer.glName):i.bindBuffer(h.ARRAY_BUFFER,null),this._state.indexBuffer?i.bindBuffer(this._state.indexBuffer.bufferType,this._state.indexBuffer.glName):i.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null),N(i)){var r,l;this._state.uniformBuffer?i.bindBuffer(this._state.uniformBuffer.bufferType,this._state.uniformBuffer.glName):i.bindBuffer(h.UNIFORM_BUFFER,null);for(let t=0;t<this._parameters.maxUniformBufferBindings;t++){const e=this._state.uniformBufferBindingPoints[t];if(s(e)&&null!==e.buffer){const{buffer:s,offset:a,size:r}=e;0===a&&0===r?i.bindBufferBase(h.UNIFORM_BUFFER,t,s.glName):i.bindBufferRange(h.UNIFORM_BUFFER,t,s.glName,a,r)}else i.bindBufferBase(h.UNIFORM_BUFFER,t,null)}this._state.pixelPackBuffer?i.bindBuffer(this._state.pixelPackBuffer.bufferType,this._state.pixelPackBuffer.glName):i.bindBuffer(h.PIXEL_PACK_BUFFER,null),this._state.pixelUnpackBuffer?i.bindBuffer(this._state.pixelUnpackBuffer.bufferType,this._state.pixelUnpackBuffer.glName):i.bindBuffer(h.PIXEL_UNPACK_BUFFER,null),this._state.copyReadBuffer?i.bindBuffer(this._state.copyReadBuffer.bufferType,this._state.copyReadBuffer.glName):i.bindBuffer(h.COPY_READ_BUFFER,null),this._state.copyWriteBuffer?i.bindBuffer(this._state.copyWriteBuffer.bufferType,this._state.copyWriteBuffer.glName):i.bindBuffer(h.COPY_WRITE_BUFFER,null),i.bindFramebuffer(_.READ_FRAMEBUFFER,null),i.readBuffer(i.BACK),this._state.readFramebuffer&&(i.bindFramebuffer(_.READ_FRAMEBUFFER,this._state.readFramebuffer.glName),i.readBuffer(R.COLOR_ATTACHMENT0)),i.bindFramebuffer(_.DRAW_FRAMEBUFFER,null!=(r=null==(l=this._state.drawFramebuffer)?void 0:l.glName)?r:null)}else{var f,u;this._state.readFramebuffer=this._state.drawFramebuffer,i.bindFramebuffer(_.FRAMEBUFFER,null!=(f=null==(u=this._state.drawFramebuffer)?void 0:u.glName)?f:null)}if(a&&this._state.vertexArrayObject){const t=this._state.vertexArrayObject;this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null),this.bindVAO(t)}i.useProgram(null!=(t=null==(e=this._state.program)?void 0:e.glName)?t:null),i.blendColor(this._state.blendColor.r,this._state.blendColor.g,this._state.blendColor.b,this._state.blendColor.a),i.bindRenderbuffer(i.RENDERBUFFER,this._state.renderbuffer?this._state.renderbuffer.glName:null),!0===this._state.blend?i.enable(this.gl.BLEND):i.disable(this.gl.BLEND),i.blendEquationSeparate(this._state.blendEquation.mode,this._state.blendEquation.modeAlpha),i.blendFuncSeparate(this._state.blendFunction.srcRGB,this._state.blendFunction.dstRGB,this._state.blendFunction.srcAlpha,this._state.blendFunction.dstAlpha),i.clearColor(this._state.clearColor.r,this._state.clearColor.g,this._state.clearColor.b,this._state.clearColor.a),i.clearDepth(this._state.clearDepth),i.clearStencil(this._state.clearStencil),i.colorMask(this._state.colorMask.r,this._state.colorMask.g,this._state.colorMask.b,this._state.colorMask.a),i.cullFace(this._state.cullFace),i.depthFunc(this._state.depthFunction),i.depthRange(this._state.depthRange.zNear,this._state.depthRange.zFar),!0===this._state.depthTest?i.enable(i.DEPTH_TEST):i.disable(i.DEPTH_TEST),i.depthMask(this._state.depthWrite),i.frontFace(this._state.frontFace),i.lineWidth(1),!0===this._state.faceCulling?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),i.polygonOffset(this._state.polygonOffset[0],this._state.polygonOffset[1]),!0===this._state.polygonOffsetFill?i.enable(i.POLYGON_OFFSET_FILL):i.disable(i.POLYGON_OFFSET_FILL),i.scissor(this._state.scissorRect.x,this._state.scissorRect.y,this._state.scissorRect.width,this._state.scissorRect.height),!0===this._state.scissorTest?i.enable(i.SCISSOR_TEST):i.disable(i.SCISSOR_TEST),i.stencilFunc(this._state.stencilFunction.func,this._state.stencilFunction.ref,this._state.stencilFunction.mask),i.stencilOpSeparate(this._state.stencilOperation.face,this._state.stencilOperation.fail,this._state.stencilOperation.zFail,this._state.stencilOperation.zPass),!0===this._state.stencilTest?i.enable(i.STENCIL_TEST):i.disable(i.STENCIL_TEST),i.stencilMask(this._state.stencilWriteMask);for(let n=0;n<this.parameters.maxTextureImageUnits;n++){i.activeTexture(o+n),i.bindTexture(T.TEXTURE_2D,null),i.bindTexture(T.TEXTURE_CUBE_MAP,null),N(i)&&(i.bindTexture(T.TEXTURE_3D,null),i.bindTexture(T.TEXTURE_2D_ARRAY,null));const t=this._state.textureUnitMap[n];s(t)&&i.bindTexture(t.descriptor.target,t.glName)}i.activeTexture(o+this._state.activeTexture),i.viewport(this._state.viewport.x,this._state.viewport.y,this._state.viewport.width,this._state.viewport.height),n()&&(this._numOfDrawCalls=0,this._numOfTriangles=0)}_loadExtensions(){this.type===l.WEBGL1&&this.gl.getExtension(\"OES_element_index_uint\"),this.gl.getExtension(\"KHR_parallel_shader_compile\")}_loadParameters(t){var e;const s=this.capabilities.textureFilterAnisotropic,i=null!=(e=t.maxAnisotropy)?e:1/0,a=N(this.gl),r=this.gl,n={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:s?Math.min(this.gl.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY),i):1,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),maxUniformBufferBindings:a?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0,maxVertexUniformBlocks:a?r.getParameter(r.MAX_VERTEX_UNIFORM_BLOCKS):0,maxFragmentUniformBlocks:a?r.getParameter(r.MAX_FRAGMENT_UNIFORM_BLOCKS):0,maxUniformBlockSize:a?r.getParameter(r.MAX_UNIFORM_BLOCK_SIZE):0,uniformBufferOffsetAlignment:a?r.getParameter(r.UNIFORM_BUFFER_OFFSET_ALIGNMENT):1,maxArrayTextureLayers:a?r.getParameter(r.MAX_ARRAY_TEXTURE_LAYERS):1,maxSamples:a?r.getParameter(r.MAX_SAMPLES):1};return O.TEXTURE_UNIT_FOR_UPDATES=n.maxTextureImageUnits-1,n}}function y(t,e,s,i){return e?i!==e&&t.bindBuffer(s,e.glName):t.bindBuffer(s,null),e}function I(t,e){switch(t){case A.POINTS:return 2*e;case A.TRIANGLES:return e/3;case A.TRIANGLE_STRIP:case A.TRIANGLE_FAN:return e-2;default:return 0}}export{k as RenderingContext};\n"]},"metadata":{},"sourceType":"module"}