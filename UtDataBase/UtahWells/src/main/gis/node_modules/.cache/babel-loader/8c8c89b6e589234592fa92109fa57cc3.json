{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../../geometry.js\";\nimport e from \"../../../core/Error.js\";\nimport { isNone as t, isSome as n } from \"../../../core/maybe.js\";\nimport { getMetersPerUnitForSR as i } from \"../../../core/unitUtils.js\";\nimport { e as o, f as r, g as s, h as a, j as l } from \"../../../chunks/pe.js\";\nimport { canProjectWithoutEngine as c, isLoaded as f, load as u, getTransformation as m, project as x } from \"../../../geometry/projection.js\";\nimport h from \"../../../geometry/Extent.js\";\nimport p from \"../../../geometry/Point.js\";\nimport g from \"../../../geometry/SpatialReference.js\";\n\nfunction y(e, t, n) {\n  return !c(e, t, n);\n}\n\nfunction d(t, n, i) {\n  const o = y(t, n, i);\n  if (o && !f()) throw new e(\"rasterprojectionhelper-project\", \"projection engine is not loaded\");\n  return o;\n}\n\nconst M = function (e, t, n) {\n  let i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  if (1 === n[0]) return [0, 0];\n  let o = 1,\n      r = -1,\n      s = 1,\n      a = -1;\n\n  for (let g = 0; g < e.length; g += 2) isNaN(e[g]) || (o = o > e[g] ? e[g] : o, r = r > e[g] ? r : e[g], s = s > e[g + 1] ? e[g + 1] : s, a = a > e[g + 1] ? a : e[g + 1]);\n\n  const {\n    cols: l,\n    rows: c\n  } = t,\n        f = (r - o) / l / n[0],\n        u = (a - s) / c / n[1],\n        m = 2 * i;\n  let x = 0,\n      h = !1,\n      p = [0, 0];\n\n  for (let g = 0; g < l - 3; g++) {\n    for (let t = 0; t < c - 3; t++) {\n      const n = g * c * 2 + 2 * t,\n            i = (e[n] + e[n + 4] + e[n + 4 * c] + e[n + 4 * c + 4]) / 4,\n            o = (e[n + 1] + e[n + 5] + e[n + 4 * c + 1] + e[n + 4 * c + 5]) / 4,\n            r = Math.abs((i - e[n + 2 * c + 2]) / f),\n            s = Math.abs((o - e[n + 2 * c + 3]) / u);\n\n      if (r + s > x && (x = r + s, p = [r, s]), m && x > m) {\n        h = !0;\n        break;\n      }\n    }\n\n    if (h) break;\n  }\n\n  return p;\n},\n      w = {\n  3395: 20037508.342789244,\n  3410: 17334193.943686873,\n  3857: 20037508.342788905,\n  3975: 17367530.445161372,\n  4087: 20037508.342789244,\n  4088: 20015108.787169147,\n  6933: 17367530.445161372,\n  32662: 20037508.342789244,\n  53001: 20015086.79602057,\n  53002: 10007543.39801029,\n  53003: 20015086.79602057,\n  53004: 20015086.79602057,\n  53016: 14152803.599503474,\n  53017: 17333573.624304302,\n  53034: 20015086.79602057,\n  53079: 20015114.352186374,\n  53080: 20015114.352186374,\n  54001: 20037508.342789244,\n  54002: 10018754.171394624,\n  54003: 20037508.342789244,\n  54004: 20037508.342789244,\n  54016: 14168658.027268292,\n  54017: 17367530.44516137,\n  54034: 20037508.342789244,\n  54079: 20037508.342789244,\n  54080: 20037508.342789244,\n  54100: 20037508.342789244,\n  54101: 20037508.342789244\n},\n      R = 32,\n      P = 4,\n      S = P,\n      b = new Map(),\n      E = new Map();\n\nasync function G() {\n  if (f()) return null;\n  await u();\n}\n\nfunction k(e, t, n) {\n  if (!d(e.spatialReference, t)) return null;\n  return n ? m(t, e.spatialReference, e) : m(e.spatialReference, t, e);\n}\n\nfunction N(e, o, r) {\n  let s = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n  const a = e.spatialReference;\n  if (a.equals(o)) return e;\n  d(a, o, s);\n  const l = r.center,\n        c = new h({\n    xmin: l.x - e.x / 2,\n    xmax: l.x + e.x / 2,\n    ymin: l.y - e.y / 2,\n    ymax: l.y + e.y / 2,\n    spatialReference: a\n  }),\n        f = x(c, o, s);\n  if (t(f)) return null;\n  const u = {\n    x: f.xmax - f.xmin,\n    y: f.ymax - f.ymin\n  },\n        m = L(o);\n\n  if (n(m) && u.x >= m) {\n    const t = i(a) / i(o);\n    u.x = e.x * t, u.y = e.y * t;\n  }\n\n  return u;\n}\n\nfunction v(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : .01;\n  return i(e) ? t / i(e) : 0;\n}\n\nfunction T(e, t) {\n  let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  let o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n  const r = e.spatialReference;\n  if (r.equals(t)) return e;\n  d(r, t, i);\n  const s = x(e, t, i);\n  if (!o || !s) return s;\n  const a = q(r, !0),\n        l = q(t, !0),\n        c = v(r);\n  return c && n(a) && n(l) && (s.x > 0 && Math.abs(e.x - a[0]) < c ? s.x -= l[1] - l[0] : s.x < 0 && Math.abs(e.x - a[1]) < c && (s.x += l[1] - l[0])), s;\n}\n\nfunction C(e) {\n  const {\n    inSR: t,\n    outSR: i,\n    datumTransformation: o,\n    preferPE: r\n  } = e;\n\n  if (t.equals(i)) {\n    const {\n      points: t\n    } = A(e, null);\n    return t;\n  }\n\n  if (t.isWebMercator && i.isWGS84 || t.isWGS84 && i.isWebMercator) return z(e);\n\n  if (d(t, i, o) && r) {\n    if (t.isGeographic) return j(e);\n    const i = W(t);\n    if (n(i)) return j(e);\n  }\n\n  return _(e);\n}\n\nfunction _(e) {\n  const {\n    points: t\n  } = A(e, null),\n        n = t.map(t => new p(t[0], t[1], e.inSR));\n  return x(n, e.outSR, e.datumTransformation).map(e => e ? [e.x, e.y] : [NaN, NaN]);\n}\n\nfunction j(e) {\n  const {\n    inSR: t,\n    outSR: i,\n    datumTransformation: l\n  } = e,\n        c = W(t),\n        {\n    points: f,\n    mask: u\n  } = A(e, c);\n\n  if (!t.isGeographic) {\n    const e = t.wkid ? o.coordsys(t.wkid) : o.fromString(t.isGeographic ? r.PE_TYPE_GEOGCS : r.PE_TYPE_PROJCS, t.wkt);\n    s.projToGeog(e, f.length, f);\n  }\n\n  if (n(l) && l.steps.length && l.steps.forEach(e => {\n    const t = e.wkid ? o.geogtran(e.wkid) : o.fromString(r.PE_TYPE_GEOGTRAN, e.wkt);\n    a.geogToGeog(t, f.length, f, null, e.isInverse ? r.PE_TRANSFORM_2_TO_1 : r.PE_TRANSFORM_1_TO_2);\n  }), !i.isGeographic) {\n    const e = W(i, !0),\n          t = n(e) && e.isEnvelope ? [e.bbox[1], e.bbox[3]] : [-90, 90];\n    I(f, t);\n    const a = i.wkid ? o.coordsys(i.wkid) : o.fromString(i.isGeographic ? r.PE_TYPE_GEOGCS : r.PE_TYPE_PROJCS, i.wkt);\n    s.geogToProj(a, f.length, f);\n  }\n\n  let m = f;\n\n  if (u && f.length !== u.length) {\n    m = [];\n\n    for (let e = 0, t = 0; e < u.length; e++) u[e] ? m.push(f[t++]) : m.push([NaN, NaN]);\n  }\n\n  return m;\n}\n\nfunction z(e) {\n  const {\n    cols: t,\n    rows: n,\n    xres: i,\n    yres: o,\n    usePixelCenter: r,\n    inSR: s,\n    outSR: a\n  } = e;\n  let {\n    xmin: l,\n    ymax: c\n  } = e;\n  r && (l += i / 2, c -= o / 2);\n  const f = [],\n        u = [],\n        m = Math.max(t, n);\n\n  for (let g = 0; g < m; g++) {\n    const e = l + i * Math.min(t, g),\n          r = c - o * Math.min(n, g),\n          m = x(new p({\n      x: e,\n      y: r,\n      spatialReference: s\n    }), a);\n    g <= t && f.push(m.x), g <= n && u.push(m.y);\n  }\n\n  const h = [];\n\n  for (let x = 0; x < t; x++) for (let e = 0; e < n; e++) h.push([f[x], u[e]]);\n\n  return h;\n}\n\nfunction W(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n  let n = e.wkid || e.wkt;\n  if (!n || e.isGeographic) return null;\n\n  if (n = String(n), b.has(n)) {\n    const e = b.get(n);\n    return t ? null == e ? void 0 : e.gcs : null == e ? void 0 : e.pcs;\n  }\n\n  const i = e.wkid ? o.coordsys(e.wkid) : o.fromString(e.isGeographic ? r.PE_TYPE_GEOGCS : r.PE_TYPE_PROJCS, e.wkt),\n        s = O(i, v(e, 1e-4)),\n        a = O(i, 0, !0);\n  return b.set(n, {\n    pcs: s,\n    gcs: a\n  }), t ? a : s;\n}\n\nfunction O(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n  const i = l.generate(e),\n        o = n ? e.horizonGcsGenerate() : e.horizonPcsGenerate();\n  if (null == o || !o.length) return null;\n  let r = !1,\n      s = o.find(e => 1 === e.getInclusive() && 1 === e.getKind());\n\n  if (!s) {\n    if (s = o.find(e => 1 === e.getInclusive() && 0 === e.getKind()), !s) return null;\n    r = !0;\n  }\n\n  const a = i.isPannableRectangle(),\n        c = s.getCoord();\n  if (r) return {\n    isEnvelope: r,\n    isPannable: a,\n    vertices: c,\n    coef: null,\n    bbox: [c[0][0] - t, c[0][1] - t, c[1][0] + t, c[1][1] + t]\n  };\n  let f = 0;\n  const u = [];\n  let [m, x] = c[0],\n      [h, p] = c[0];\n\n  for (let l = 0, g = c.length; l < g; l++) {\n    f++, f === g && (f = 0);\n    const [e, t] = c[l],\n          [n, i] = c[f];\n    if (i === t) u.push([e, n, t, i, 2]);else {\n      const o = (n - e) / (i - t || 1e-4),\n            r = e - o * t;\n      t < i ? u.push([o, r, t, i, 0]) : u.push([o, r, i, t, 1]);\n    }\n    m = m < e ? m : e, x = x < t ? x : t, h = h > e ? h : e, p = p > t ? p : t;\n  }\n\n  return {\n    isEnvelope: !1,\n    isPannable: a,\n    vertices: c,\n    coef: u,\n    bbox: [m, x, h, p]\n  };\n}\n\nfunction A(e, t) {\n  const i = [],\n        {\n    cols: o,\n    rows: r,\n    xres: s,\n    yres: a,\n    usePixelCenter: l\n  } = e;\n  let {\n    xmin: c,\n    ymax: f\n  } = e;\n\n  if (l && (c += s / 2, f -= a / 2), !n(t)) {\n    for (let e = 0; e < o; e++) for (let t = 0; t < r; t++) i.push([c + s * e, f - a * t]);\n\n    return {\n      points: i\n    };\n  }\n\n  const u = new Uint8Array(o * r);\n\n  if (t.isEnvelope) {\n    const {\n      bbox: [e, n, l, m]\n    } = t;\n\n    for (let x = 0, h = 0; x < o; x++) {\n      const o = c + s * x,\n            p = t.isPannable || o >= e && o <= l;\n\n      for (let e = 0; e < r; e++, h++) {\n        const t = f - a * e;\n        p && t >= n && t <= m && (i.push([o, t]), u[h] = 1);\n      }\n    }\n\n    return {\n      points: i,\n      mask: u\n    };\n  }\n\n  const {\n    coef: m\n  } = t,\n        x = [];\n\n  for (let n = 0; n < r; n++) {\n    const e = f - a * n,\n          t = [],\n          i = [];\n\n    for (let n = 0; n < m.length; n++) {\n      const [o, r, s, a, l] = m[n];\n      if (e === s && s === a) t.push(o), t.push(r), i.push(2), i.push(2);else if (e >= s && e <= a) {\n        const n = o * e + r;\n        t.push(n), i.push(l);\n      }\n    }\n\n    let o = t;\n\n    if (t.length > 2) {\n      let e = 2 === i[0] ? 0 : i[0],\n          n = t[0];\n      o = [];\n\n      for (let r = 1; r < i.length; r++) 2 === i[r] && r !== i.length - 1 || (i[r] !== e && (o.push(0 === e ? Math.min(n, t[r - 1]) : Math.max(n, t[r - 1])), e = i[r], n = t[r]), r === i.length - 1 && o.push(0 === i[r] ? Math.min(n, t[r]) : Math.max(n, t[r])));\n\n      o.sort((e, t) => e - t);\n    } else t[0] > t[1] && (o = [t[1], t[0]]);\n\n    x.push(o);\n  }\n\n  for (let n = 0, h = 0; n < o; n++) {\n    const e = c + s * n;\n\n    for (let t = 0; t < r; t++, h++) {\n      const n = f - a * t,\n            o = x[t];\n      if (2 === o.length) e >= o[0] && e <= o[1] && (i.push([e, n]), u[h] = 1);else if (o.length > 2) {\n        let t = !1;\n\n        for (let n = 0; n < o.length; n += 2) if (e >= o[n] && e <= o[n + 1]) {\n          t = !0;\n          break;\n        }\n\n        t && (i.push([e, n]), u[h] = 1);\n      }\n    }\n  }\n\n  return {\n    points: i,\n    mask: u\n  };\n}\n\nfunction I(e, t) {\n  const [n, i] = t;\n\n  for (let o = 0; o < e.length; o++) {\n    const t = e[o][1];\n    (t < n || t > i) && (e[o] = [NaN, NaN]);\n  }\n}\n\nfunction Y(e) {\n  const t = L(e[0].spatialReference);\n  if (e.length < 2 || !n(t)) return e[0];\n  let {\n    xmin: i,\n    xmax: o,\n    ymin: r,\n    ymax: s\n  } = e[0];\n\n  for (let n = 1; n < e.length; n++) {\n    const i = e[n];\n    o = i.xmax + t * n, r = Math.min(r, i.ymin), s = Math.max(s, i.ymax);\n  }\n\n  return new h({\n    xmin: i,\n    xmax: o,\n    ymin: r,\n    ymax: s,\n    spatialReference: e[0].spatialReference\n  });\n}\n\nfunction B(e, n) {\n  let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  let o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n  if (e.spatialReference.equals(n)) return e;\n  const r = X(e),\n        s = L(e.spatialReference, !0),\n        a = L(n);\n  if (0 === r || t(s) || t(a)) return F(e, n, i, o);\n  const l = e.clone().normalize();\n\n  if (1 === l.length && e.xmax < s && e.xmax - s / 2 > v(e.spatialReference)) {\n    const {\n      xmin: t,\n      xmax: n\n    } = e;\n\n    for (let i = 0; i <= r; i++) {\n      const o = 0 === i ? t : -s / 2,\n            a = i === r ? n - s * i : s / 2;\n      l[i] = new h({\n        xmin: o,\n        xmax: a,\n        ymin: e.ymin,\n        ymax: e.ymax,\n        spatialReference: e.spatialReference\n      });\n    }\n  }\n\n  return Y(l.map(e => F(e, n, i, o)).filter(e => !!e));\n}\n\nfunction F(e, n) {\n  let i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  let o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n  let r = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !0;\n  const s = e.spatialReference;\n  if (s.equals(n)) return e;\n  d(s, n, i);\n  const a = x(e, n, i);\n  if (r && n.isWebMercator && a && (a.ymax = Math.min(20037508.342787, a.ymax), a.ymin = Math.max(-20037508.342787, a.ymin), a.ymin >= a.ymax)) return null;\n  if (!o || !a) return a;\n  const l = q(s, !0),\n        c = q(n, !0);\n  if (t(l) || t(c)) return a;\n  const f = v(s, .001),\n        u = v(s, 500),\n        m = v(n, .001);\n\n  if (Math.abs(a.xmin - c[0]) < m && Math.abs(a.xmax - c[1]) < m) {\n    const t = Math.abs(e.xmin - l[0]),\n          o = Math.abs(l[1] - e.xmax);\n\n    if (t < f && o > u) {\n      a.xmin = c[0];\n      const t = [];\n      t.push(new p(e.xmax, e.ymin, s)), t.push(new p(e.xmax, (e.ymin + e.ymax) / 2, s)), t.push(new p(e.xmax, e.ymax, s));\n      const o = t.map(e => T(e, n, i)).filter(e => !isNaN(null == e ? void 0 : e.x)).map(e => e.x);\n      a.xmax = Math.max.apply(null, o);\n    }\n\n    if (o < f && t > u) {\n      a.xmax = c[1];\n      const t = [];\n      t.push(new p(e.xmin, e.ymin, s)), t.push(new p(e.xmin, (e.ymin + e.ymax) / 2, s)), t.push(new p(e.xmin, e.ymax, s));\n      const o = t.map(e => T(e, n, i)).filter(e => !isNaN(null == e ? void 0 : e.x)).map(e => e.x);\n      a.xmin = Math.min.apply(null, o);\n    }\n  } else {\n    const e = v(n, .001);\n    Math.abs(a.xmin - c[0]) < e && (a.xmin = c[0]), Math.abs(a.xmax - c[1]) < e && (a.xmax = c[1]);\n  }\n\n  return a;\n}\n\nfunction L(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n  const n = t ? 20037508.342787 : 20037508.342788905;\n  return e.isWebMercator ? 2 * n : e.wkid && e.isGeographic ? 360 : 2 * w[e.wkid] || null;\n}\n\nfunction q(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n  if (e.isGeographic) return [-180, 180];\n  const i = L(e, t);\n  return n(i) ? [-i / 2, i / 2] : null;\n}\n\nfunction J(e, t, n, i) {\n  let o = (e - t) / n;\n  return o - Math.floor(o) != 0 ? o = Math.floor(o) : i && (o -= 1), o;\n}\n\nfunction X(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n  const i = L(e.spatialReference);\n  if (!n(i)) return 0;\n  const o = t ? 0 : -(i / 2),\n        r = v(e.spatialReference),\n        s = !t && Math.abs(e.xmax - i / 2) < r ? i / 2 : e.xmax,\n        a = !t && Math.abs(e.xmin + i / 2) < r ? -i / 2 : e.xmin;\n  return J(s, o, i, !0) - J(a, o, i, !1);\n}\n\nfunction K(e) {\n  const t = e.storageInfo.origin.x,\n        i = L(e.spatialReference, !0);\n  if (!n(i)) return {\n    originX: t,\n    halfWorldWidth: null,\n    pyramidsInfo: null\n  };\n  const o = i / 2,\n        {\n    nativePixelSize: r,\n    storageInfo: s,\n    extent: a\n  } = e,\n        {\n    maximumPyramidLevel: l,\n    blockWidth: c,\n    pyramidScalingFactor: f\n  } = s;\n  let u = r.x;\n  const m = [],\n        x = n(e.transform) && \"gcs-shift\" === e.transform.type,\n        h = t + (x ? 0 : o),\n        p = x ? i - t : o - t;\n\n  for (let n = 0; n <= l; n++) {\n    const e = (a.xmax - t) / u / c,\n          n = e - Math.floor(e) == 0 ? e : Math.ceil(e),\n          i = p / u / c,\n          o = i - Math.floor(i) == 0 ? i : Math.ceil(i),\n          r = Math.floor(h / u / c),\n          s = Math.round(h / u) % c,\n          l = (c - Math.round(p / u) % c) % c;\n    m.push({\n      resolutionX: u,\n      blockWidth: c,\n      datsetColumnCount: n,\n      worldColumnCountFromOrigin: o,\n      leftMargin: s,\n      rightPadding: l,\n      originColumnOffset: r\n    }), u *= f;\n  }\n\n  return {\n    originX: t,\n    halfWorldWidth: o,\n    pyramidsInfo: m,\n    hasGCSSShiftTransform: x\n  };\n}\n\nfunction U(e) {\n  if (!e || e.isGeographic) return e;\n  const t = String(e.wkid || e.wkt);\n  let n;\n  if (E.has(t)) n = E.get(t);else {\n    n = (e.wkid ? o.coordsys(e.wkid) : o.fromString(r.PE_TYPE_PROJCS, e.wkt)).getGeogcs().getCode(), E.set(t, n);\n  }\n  return new g({\n    wkid: n\n  });\n}\n\nfunction D(e) {\n  const t = e.isAdaptive && null == e.spacing;\n  let i = e.spacing || [R, R],\n      o = H(e),\n      r = {\n    cols: o.size[0] + 1,\n    rows: o.size[1] + 1\n  };\n  const s = o.outofBoundPointCount > 0 && o.outofBoundPointCount < o.offsets.length / 2;\n  let a = o.outofBoundPointCount === o.offsets.length / 2 || t && s ? [0, 0] : M(o.offsets, r, i, S);\n  const l = (a[0] + a[1]) / 2,\n        c = e.projectedExtent.spatialReference,\n        f = e.srcBufferExtent.spatialReference;\n\n  if (t && (s || l > S)) {\n    y(c, f, e.datumTransformation) && (c.isGeographic || n(W(c))), i = [P, P], o = H({ ...e,\n      spacing: i\n    }), r = {\n      cols: o.size[0] + 1,\n      rows: o.size[1] + 1\n    }, a = M(o.offsets, r, i, S);\n  }\n\n  if (o.error = a, i[0] > 1 && (o.coefficients = Q(o.offsets, r, s)), e.includeGCSGrid && !c.isGeographic && !c.isWebMercator) if (f.isGeographic) o.gcsGrid = {\n    offsets: o.offsets,\n    coefficients: o.coefficients,\n    spacing: i\n  };else {\n    const t = W(c);\n\n    if (n(t) && !t.isEnvelope) {\n      const t = U(c),\n            n = B(e.projectedExtent, t),\n            {\n        offsets: a\n      } = H({ ...e,\n        srcBufferExtent: n,\n        spacing: i\n      }),\n            l = Q(a, r, s);\n      o.gcsGrid = {\n        offsets: a,\n        coefficients: l,\n        spacing: i\n      };\n    }\n  }\n  return o;\n}\n\nfunction H(e) {\n  const {\n    projectedExtent: t,\n    srcBufferExtent: i,\n    pixelSize: o,\n    datumTransformation: r,\n    rasterTransform: s\n  } = e,\n        a = t.spatialReference,\n        l = i.spatialReference;\n  d(a, l);\n  const {\n    xmin: c,\n    ymin: f,\n    xmax: u,\n    ymax: m\n  } = t,\n        x = L(l),\n        h = n(x) && (e.hasWrapAround || \"gcs-shift\" === (null == s ? void 0 : s.type)),\n        g = e.spacing || [R, R],\n        y = g[0] * o.x,\n        M = g[1] * o.y,\n        w = 1 === g[0],\n        S = Math.ceil((u - c) / y - .1 / g[0]) + (w ? 0 : 1),\n        b = Math.ceil((m - f) / M - .1 / g[1]) + (w ? 0 : 1),\n        E = C({\n    cols: S,\n    rows: b,\n    xmin: c,\n    ymax: m,\n    xres: y,\n    yres: M,\n    inSR: a,\n    outSR: l,\n    datumTransformation: r,\n    preferPE: g[0] <= P,\n    usePixelCenter: w\n  }),\n        G = [];\n  let k,\n      N = 0;\n  const T = w ? -1 : NaN,\n        {\n    xmin: _,\n    xmax: j,\n    ymax: z,\n    width: W,\n    height: O\n  } = i,\n        A = v(l, 500);\n\n  for (let n = 0; n < S; n++) {\n    const e = [];\n\n    for (let t = 0; t < b; t++) {\n      let i = E[n * b + t];\n      if (h && i[0] > j && i[0] > x / 2 - A && (i[0] -= x), !i || isNaN(i[0]) || isNaN(i[1])) G.push(T), G.push(T), e.push(null), N++;else {\n        if (s) {\n          const e = s.inverseTransform(new p({\n            x: i[0],\n            y: i[1],\n            spatialReference: l\n          }));\n          i = [e.x, e.y];\n        }\n\n        e.push(i), n > 0 && h && k[t] && i[0] < k[t][0] && (i[0] += x), G.push((i[0] - _) / W), G.push((z - i[1]) / O);\n      }\n    }\n\n    k = e;\n  }\n\n  return {\n    offsets: G,\n    error: null,\n    coefficients: null,\n    outofBoundPointCount: N,\n    spacing: g,\n    size: w ? [S, b] : [S - 1, b - 1]\n  };\n}\n\nfunction Q(e, t, n) {\n  const {\n    cols: i,\n    rows: o\n  } = t,\n        r = new Float32Array((i - 1) * (o - 1) * 2 * 6),\n        s = new Float32Array([-0, -1, 1, -1, 1, -0, 1, -0, -0]),\n        a = new Float32Array([-1, 1, 0, 0, -1, 1, 1, 0, 0]);\n\n  for (let l = 0; l < i - 1; l++) {\n    for (let t = 0; t < o - 1; t++) {\n      let n = l * o * 2 + 2 * t;\n      const c = e[n],\n            f = e[n + 1],\n            u = e[n + 2],\n            m = e[n + 3];\n      n += 2 * o;\n      const x = e[n],\n            h = e[n + 1],\n            p = e[n + 2],\n            g = e[n + 3];\n      let y = 0,\n          d = 12 * (t * (i - 1) + l);\n\n      for (let e = 0; e < 3; e++) r[d++] = s[y++] * c + s[y++] * u + s[y++] * p;\n\n      y = 0;\n\n      for (let e = 0; e < 3; e++) r[d++] = s[y++] * f + s[y++] * m + s[y++] * g;\n\n      y = 0;\n\n      for (let e = 0; e < 3; e++) r[d++] = a[y++] * c + a[y++] * x + a[y++] * p;\n\n      y = 0;\n\n      for (let e = 0; e < 3; e++) r[d++] = a[y++] * f + a[y++] * h + a[y++] * g;\n    }\n\n    if (n) for (let e = 0; e < r.length; e++) isNaN(r[e]) && (r[e] = -1);\n  }\n\n  return r;\n}\n\nfunction V(e) {\n  const t = e.clone().normalize();\n  return 1 === t.length ? t[0] : Y(t);\n}\n\nfunction Z(e, t, i) {\n  const {\n    storageInfo: o,\n    pixelSize: r\n  } = t;\n  let s,\n      a = !1;\n  const {\n    pyramidResolutions: l\n  } = o;\n\n  if (n(l) && l.length) {\n    const n = (e.x + e.y) / 2,\n          o = l[l.length - 1],\n          c = (o.x + o.y) / 2,\n          f = (r.x + r.y) / 2;\n    if (n <= f) s = 0;else if (n >= c) s = l.length, a = n / c > 8;else {\n      let e,\n          t = f;\n\n      for (let o = 1; o <= l.length; o++) {\n        if (e = (l[o - 1].x + l[o - 1].y) / 2, n <= e) {\n          n === e ? s = o : \"down\" === i ? (s = o - 1, a = n / t > 8) : s = \"up\" === i || n - t > e - n || n / t > 2 ? o : o - 1;\n          break;\n        }\n\n        t = e;\n      }\n    }\n    const u = 0 === s ? r : l[s - 1];\n    return {\n      pyramidLevel: s,\n      pyramidResolution: new p({\n        x: u.x,\n        y: u.y,\n        spatialReference: t.spatialReference\n      }),\n      excessiveReading: a\n    };\n  }\n\n  const c = Math.log(e.x / r.x) / Math.LN2,\n        f = Math.log(e.y / r.y) / Math.LN2,\n        u = t.storageInfo.maximumPyramidLevel || 0;\n  s = \"down\" === i ? Math.floor(Math.min(c, f)) : \"up\" === i ? Math.ceil(Math.max(c, f)) : Math.round((c + f) / 2), s < 0 ? s = 0 : s > u && (a = s > u + 3, s = u);\n  const m = 2 ** s;\n  return {\n    pyramidLevel: s,\n    pyramidResolution: new p({\n      x: m * t.nativePixelSize.x,\n      y: m * t.nativePixelSize.y,\n      spatialReference: t.spatialReference\n    }),\n    excessiveReading: a\n  };\n}\n\nfunction $(e, t) {\n  let n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 512;\n  let o = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : !0;\n  const {\n    extent: r,\n    spatialReference: s,\n    pixelSize: a\n  } = e,\n        l = N(new p({\n    x: a.x,\n    y: a.y,\n    spatialReference: s\n  }), t, r);\n  if (null == l) return {\n    projectedPixelSize: null,\n    scales: null,\n    srcResolutions: null,\n    isCustomTilingScheme: !1\n  };\n  const c = (l.x + l.y) / 2,\n        f = i(t),\n        u = c * f * 96 * 39.37,\n        m = t.isGeographic ? 256 / n * 295828763.7958547 : 256 / n * 591657527.591555;\n  let x = \"vector-magdir\" === e.dataType || \"vector-uv\" === e.dataType;\n  const h = B(r, t);\n  x || o && (t.isGeographic || t.isWebMercator) && (x = h.xmin * h.xmax < 0);\n  let g,\n      y = u;\n  const d = 1.001;\n\n  if (x) {\n    y = m;\n    const e = t.isGeographic ? 1341104507446289e-21 : .29858214164761665,\n          n = e * (96 * f * 39.37),\n          i = t.isGeographic ? 4326 : 3857;\n    g = N(new p({\n      x: e,\n      y: e,\n      spatialReference: {\n        wkid: i\n      }\n    }), s, h), g.x *= y / n, g.y *= y / n;\n  } else {\n    g = {\n      x: a.x,\n      y: a.y\n    };\n    const t = Math.ceil(Math.log(Math.min(e.width, e.height) / 32) / Math.LN2);\n    let n = 0;\n\n    for (; y < m * (d / 2) && n < t;) n++, y *= 2, g.x *= 2, g.y *= 2;\n\n    Math.max(y, m) / Math.min(y, m) <= d && (y = m);\n  }\n\n  const M = [y],\n        w = [{\n    x: g.x,\n    y: g.y\n  }],\n        R = 70.5310735,\n        P = Math.min(R, u) / d;\n\n  for (; y >= P;) y /= 2, g.x /= 2, g.y /= 2, M.push(y), w.push({\n    x: g.x,\n    y: g.y\n  });\n\n  return {\n    projectedPixelSize: l,\n    scales: M,\n    srcResolutions: w,\n    isCustomTilingScheme: !x\n  };\n}\n\nexport { $ as computeProjectedScales, R as defaultGridSpacing, S as defaultProjectionToleranceInPixels, k as getDefaultDatumTransformationForDataset, C as getProjectedGridPoints, D as getProjectionOffsetGrid, K as getRasterDatasetAlignmentInfo, L as getWorldWidth, X as getWorldWrapCount, G as load, P as minimumGridSpacing, B as projectExtent, T as projectPoint, N as projectResolution, y as requirePE, V as snapExtent, Z as snapPyramid };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js"],"names":["e","isNone","t","isSome","n","getMetersPerUnitForSR","i","o","f","r","g","s","h","a","j","l","canProjectWithoutEngine","c","isLoaded","load","u","getTransformation","m","project","x","p","y","d","M","length","isNaN","cols","rows","Math","abs","w","R","P","S","b","Map","E","G","k","spatialReference","N","equals","center","xmin","xmax","ymin","ymax","L","v","T","q","C","inSR","outSR","datumTransformation","preferPE","points","A","isWebMercator","isWGS84","z","isGeographic","W","_","map","NaN","mask","wkid","coordsys","fromString","PE_TYPE_GEOGCS","PE_TYPE_PROJCS","wkt","projToGeog","steps","forEach","geogtran","PE_TYPE_GEOGTRAN","geogToGeog","isInverse","PE_TRANSFORM_2_TO_1","PE_TRANSFORM_1_TO_2","isEnvelope","bbox","I","geogToProj","push","xres","yres","usePixelCenter","max","min","String","has","get","gcs","pcs","O","set","generate","horizonGcsGenerate","horizonPcsGenerate","find","getInclusive","getKind","isPannableRectangle","getCoord","isPannable","vertices","coef","Uint8Array","sort","Y","B","X","F","clone","normalize","filter","apply","J","floor","K","storageInfo","origin","originX","halfWorldWidth","pyramidsInfo","nativePixelSize","extent","maximumPyramidLevel","blockWidth","pyramidScalingFactor","transform","type","ceil","round","resolutionX","datsetColumnCount","worldColumnCountFromOrigin","leftMargin","rightPadding","originColumnOffset","hasGCSSShiftTransform","U","getGeogcs","getCode","D","isAdaptive","spacing","H","size","outofBoundPointCount","offsets","projectedExtent","srcBufferExtent","error","coefficients","Q","includeGCSGrid","gcsGrid","pixelSize","rasterTransform","hasWrapAround","width","height","inverseTransform","Float32Array","V","Z","pyramidResolutions","pyramidLevel","pyramidResolution","excessiveReading","log","LN2","$","projectedPixelSize","scales","srcResolutions","isCustomTilingScheme","dataType","computeProjectedScales","defaultGridSpacing","defaultProjectionToleranceInPixels","getDefaultDatumTransformationForDataset","getProjectedGridPoints","getProjectionOffsetGrid","getRasterDatasetAlignmentInfo","getWorldWidth","getWorldWrapCount","minimumGridSpacing","projectExtent","projectPoint","projectResolution","requirePE","snapExtent","snapPyramid"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import e from\"../../../core/Error.js\";import{isNone as t,isSome as n}from\"../../../core/maybe.js\";import{getMetersPerUnitForSR as i}from\"../../../core/unitUtils.js\";import{e as o,f as r,g as s,h as a,j as l}from\"../../../chunks/pe.js\";import{canProjectWithoutEngine as c,isLoaded as f,load as u,getTransformation as m,project as x}from\"../../../geometry/projection.js\";import h from\"../../../geometry/Extent.js\";import p from\"../../../geometry/Point.js\";import g from\"../../../geometry/SpatialReference.js\";function y(e,t,n){return!c(e,t,n)}function d(t,n,i){const o=y(t,n,i);if(o&&!f())throw new e(\"rasterprojectionhelper-project\",\"projection engine is not loaded\");return o}const M=function(e,t,n,i=0){if(1===n[0])return[0,0];let o=1,r=-1,s=1,a=-1;for(let g=0;g<e.length;g+=2)isNaN(e[g])||(o=o>e[g]?e[g]:o,r=r>e[g]?r:e[g],s=s>e[g+1]?e[g+1]:s,a=a>e[g+1]?a:e[g+1]);const{cols:l,rows:c}=t,f=(r-o)/l/n[0],u=(a-s)/c/n[1],m=2*i;let x=0,h=!1,p=[0,0];for(let g=0;g<l-3;g++){for(let t=0;t<c-3;t++){const n=g*c*2+2*t,i=(e[n]+e[n+4]+e[n+4*c]+e[n+4*c+4])/4,o=(e[n+1]+e[n+5]+e[n+4*c+1]+e[n+4*c+5])/4,r=Math.abs((i-e[n+2*c+2])/f),s=Math.abs((o-e[n+2*c+3])/u);if(r+s>x&&(x=r+s,p=[r,s]),m&&x>m){h=!0;break}}if(h)break}return p},w={3395:20037508.342789244,3410:17334193.943686873,3857:20037508.342788905,3975:17367530.445161372,4087:20037508.342789244,4088:20015108.787169147,6933:17367530.445161372,32662:20037508.342789244,53001:20015086.79602057,53002:10007543.39801029,53003:20015086.79602057,53004:20015086.79602057,53016:14152803.599503474,53017:17333573.624304302,53034:20015086.79602057,53079:20015114.352186374,53080:20015114.352186374,54001:20037508.342789244,54002:10018754.171394624,54003:20037508.342789244,54004:20037508.342789244,54016:14168658.027268292,54017:17367530.44516137,54034:20037508.342789244,54079:20037508.342789244,54080:20037508.342789244,54100:20037508.342789244,54101:20037508.342789244},R=32,P=4,S=P,b=new Map,E=new Map;async function G(){if(f())return null;await u()}function k(e,t,n){if(!d(e.spatialReference,t))return null;return n?m(t,e.spatialReference,e):m(e.spatialReference,t,e)}function N(e,o,r,s=null){const a=e.spatialReference;if(a.equals(o))return e;d(a,o,s);const l=r.center,c=new h({xmin:l.x-e.x/2,xmax:l.x+e.x/2,ymin:l.y-e.y/2,ymax:l.y+e.y/2,spatialReference:a}),f=x(c,o,s);if(t(f))return null;const u={x:f.xmax-f.xmin,y:f.ymax-f.ymin},m=L(o);if(n(m)&&u.x>=m){const t=i(a)/i(o);u.x=e.x*t,u.y=e.y*t}return u}function v(e,t=.01){return i(e)?t/i(e):0}function T(e,t,i=null,o=!0){const r=e.spatialReference;if(r.equals(t))return e;d(r,t,i);const s=x(e,t,i);if(!o||!s)return s;const a=q(r,!0),l=q(t,!0),c=v(r);return c&&n(a)&&n(l)&&(s.x>0&&Math.abs(e.x-a[0])<c?s.x-=l[1]-l[0]:s.x<0&&Math.abs(e.x-a[1])<c&&(s.x+=l[1]-l[0])),s}function C(e){const{inSR:t,outSR:i,datumTransformation:o,preferPE:r}=e;if(t.equals(i)){const{points:t}=A(e,null);return t}if(t.isWebMercator&&i.isWGS84||t.isWGS84&&i.isWebMercator)return z(e);if(d(t,i,o)&&r){if(t.isGeographic)return j(e);const i=W(t);if(n(i))return j(e)}return _(e)}function _(e){const{points:t}=A(e,null),n=t.map((t=>new p(t[0],t[1],e.inSR)));return x(n,e.outSR,e.datumTransformation).map((e=>e?[e.x,e.y]:[NaN,NaN]))}function j(e){const{inSR:t,outSR:i,datumTransformation:l}=e,c=W(t),{points:f,mask:u}=A(e,c);if(!t.isGeographic){const e=t.wkid?o.coordsys(t.wkid):o.fromString(t.isGeographic?r.PE_TYPE_GEOGCS:r.PE_TYPE_PROJCS,t.wkt);s.projToGeog(e,f.length,f)}if(n(l)&&l.steps.length&&l.steps.forEach((e=>{const t=e.wkid?o.geogtran(e.wkid):o.fromString(r.PE_TYPE_GEOGTRAN,e.wkt);a.geogToGeog(t,f.length,f,null,e.isInverse?r.PE_TRANSFORM_2_TO_1:r.PE_TRANSFORM_1_TO_2)})),!i.isGeographic){const e=W(i,!0),t=n(e)&&e.isEnvelope?[e.bbox[1],e.bbox[3]]:[-90,90];I(f,t);const a=i.wkid?o.coordsys(i.wkid):o.fromString(i.isGeographic?r.PE_TYPE_GEOGCS:r.PE_TYPE_PROJCS,i.wkt);s.geogToProj(a,f.length,f)}let m=f;if(u&&f.length!==u.length){m=[];for(let e=0,t=0;e<u.length;e++)u[e]?m.push(f[t++]):m.push([NaN,NaN])}return m}function z(e){const{cols:t,rows:n,xres:i,yres:o,usePixelCenter:r,inSR:s,outSR:a}=e;let{xmin:l,ymax:c}=e;r&&(l+=i/2,c-=o/2);const f=[],u=[],m=Math.max(t,n);for(let g=0;g<m;g++){const e=l+i*Math.min(t,g),r=c-o*Math.min(n,g),m=x(new p({x:e,y:r,spatialReference:s}),a);g<=t&&f.push(m.x),g<=n&&u.push(m.y)}const h=[];for(let x=0;x<t;x++)for(let e=0;e<n;e++)h.push([f[x],u[e]]);return h}function W(e,t=!1){let n=e.wkid||e.wkt;if(!n||e.isGeographic)return null;if(n=String(n),b.has(n)){const e=b.get(n);return t?null==e?void 0:e.gcs:null==e?void 0:e.pcs}const i=e.wkid?o.coordsys(e.wkid):o.fromString(e.isGeographic?r.PE_TYPE_GEOGCS:r.PE_TYPE_PROJCS,e.wkt),s=O(i,v(e,1e-4)),a=O(i,0,!0);return b.set(n,{pcs:s,gcs:a}),t?a:s}function O(e,t=0,n=!1){const i=l.generate(e),o=n?e.horizonGcsGenerate():e.horizonPcsGenerate();if(null==o||!o.length)return null;let r=!1,s=o.find((e=>1===e.getInclusive()&&1===e.getKind()));if(!s){if(s=o.find((e=>1===e.getInclusive()&&0===e.getKind())),!s)return null;r=!0}const a=i.isPannableRectangle(),c=s.getCoord();if(r)return{isEnvelope:r,isPannable:a,vertices:c,coef:null,bbox:[c[0][0]-t,c[0][1]-t,c[1][0]+t,c[1][1]+t]};let f=0;const u=[];let[m,x]=c[0],[h,p]=c[0];for(let l=0,g=c.length;l<g;l++){f++,f===g&&(f=0);const[e,t]=c[l],[n,i]=c[f];if(i===t)u.push([e,n,t,i,2]);else{const o=(n-e)/(i-t||1e-4),r=e-o*t;t<i?u.push([o,r,t,i,0]):u.push([o,r,i,t,1])}m=m<e?m:e,x=x<t?x:t,h=h>e?h:e,p=p>t?p:t}return{isEnvelope:!1,isPannable:a,vertices:c,coef:u,bbox:[m,x,h,p]}}function A(e,t){const i=[],{cols:o,rows:r,xres:s,yres:a,usePixelCenter:l}=e;let{xmin:c,ymax:f}=e;if(l&&(c+=s/2,f-=a/2),!n(t)){for(let e=0;e<o;e++)for(let t=0;t<r;t++)i.push([c+s*e,f-a*t]);return{points:i}}const u=new Uint8Array(o*r);if(t.isEnvelope){const{bbox:[e,n,l,m]}=t;for(let x=0,h=0;x<o;x++){const o=c+s*x,p=t.isPannable||o>=e&&o<=l;for(let e=0;e<r;e++,h++){const t=f-a*e;p&&t>=n&&t<=m&&(i.push([o,t]),u[h]=1)}}return{points:i,mask:u}}const{coef:m}=t,x=[];for(let n=0;n<r;n++){const e=f-a*n,t=[],i=[];for(let n=0;n<m.length;n++){const[o,r,s,a,l]=m[n];if(e===s&&s===a)t.push(o),t.push(r),i.push(2),i.push(2);else if(e>=s&&e<=a){const n=o*e+r;t.push(n),i.push(l)}}let o=t;if(t.length>2){let e=2===i[0]?0:i[0],n=t[0];o=[];for(let r=1;r<i.length;r++)2===i[r]&&r!==i.length-1||(i[r]!==e&&(o.push(0===e?Math.min(n,t[r-1]):Math.max(n,t[r-1])),e=i[r],n=t[r]),r===i.length-1&&o.push(0===i[r]?Math.min(n,t[r]):Math.max(n,t[r])));o.sort(((e,t)=>e-t))}else t[0]>t[1]&&(o=[t[1],t[0]]);x.push(o)}for(let n=0,h=0;n<o;n++){const e=c+s*n;for(let t=0;t<r;t++,h++){const n=f-a*t,o=x[t];if(2===o.length)e>=o[0]&&e<=o[1]&&(i.push([e,n]),u[h]=1);else if(o.length>2){let t=!1;for(let n=0;n<o.length;n+=2)if(e>=o[n]&&e<=o[n+1]){t=!0;break}t&&(i.push([e,n]),u[h]=1)}}}return{points:i,mask:u}}function I(e,t){const[n,i]=t;for(let o=0;o<e.length;o++){const t=e[o][1];(t<n||t>i)&&(e[o]=[NaN,NaN])}}function Y(e){const t=L(e[0].spatialReference);if(e.length<2||!n(t))return e[0];let{xmin:i,xmax:o,ymin:r,ymax:s}=e[0];for(let n=1;n<e.length;n++){const i=e[n];o=i.xmax+t*n,r=Math.min(r,i.ymin),s=Math.max(s,i.ymax)}return new h({xmin:i,xmax:o,ymin:r,ymax:s,spatialReference:e[0].spatialReference})}function B(e,n,i=null,o=!0){if(e.spatialReference.equals(n))return e;const r=X(e),s=L(e.spatialReference,!0),a=L(n);if(0===r||t(s)||t(a))return F(e,n,i,o);const l=e.clone().normalize();if(1===l.length&&e.xmax<s&&e.xmax-s/2>v(e.spatialReference)){const{xmin:t,xmax:n}=e;for(let i=0;i<=r;i++){const o=0===i?t:-s/2,a=i===r?n-s*i:s/2;l[i]=new h({xmin:o,xmax:a,ymin:e.ymin,ymax:e.ymax,spatialReference:e.spatialReference})}}return Y(l.map((e=>F(e,n,i,o))).filter((e=>!!e)))}function F(e,n,i=null,o=!0,r=!0){const s=e.spatialReference;if(s.equals(n))return e;d(s,n,i);const a=x(e,n,i);if(r&&n.isWebMercator&&a&&(a.ymax=Math.min(20037508.342787,a.ymax),a.ymin=Math.max(-20037508.342787,a.ymin),a.ymin>=a.ymax))return null;if(!o||!a)return a;const l=q(s,!0),c=q(n,!0);if(t(l)||t(c))return a;const f=v(s,.001),u=v(s,500),m=v(n,.001);if(Math.abs(a.xmin-c[0])<m&&Math.abs(a.xmax-c[1])<m){const t=Math.abs(e.xmin-l[0]),o=Math.abs(l[1]-e.xmax);if(t<f&&o>u){a.xmin=c[0];const t=[];t.push(new p(e.xmax,e.ymin,s)),t.push(new p(e.xmax,(e.ymin+e.ymax)/2,s)),t.push(new p(e.xmax,e.ymax,s));const o=t.map((e=>T(e,n,i))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));a.xmax=Math.max.apply(null,o)}if(o<f&&t>u){a.xmax=c[1];const t=[];t.push(new p(e.xmin,e.ymin,s)),t.push(new p(e.xmin,(e.ymin+e.ymax)/2,s)),t.push(new p(e.xmin,e.ymax,s));const o=t.map((e=>T(e,n,i))).filter((e=>!isNaN(null==e?void 0:e.x))).map((e=>e.x));a.xmin=Math.min.apply(null,o)}}else{const e=v(n,.001);Math.abs(a.xmin-c[0])<e&&(a.xmin=c[0]),Math.abs(a.xmax-c[1])<e&&(a.xmax=c[1])}return a}function L(e,t=!1){const n=t?20037508.342787:20037508.342788905;return e.isWebMercator?2*n:e.wkid&&e.isGeographic?360:2*w[e.wkid]||null}function q(e,t=!1){if(e.isGeographic)return[-180,180];const i=L(e,t);return n(i)?[-i/2,i/2]:null}function J(e,t,n,i){let o=(e-t)/n;return o-Math.floor(o)!=0?o=Math.floor(o):i&&(o-=1),o}function X(e,t=!1){const i=L(e.spatialReference);if(!n(i))return 0;const o=t?0:-(i/2),r=v(e.spatialReference),s=!t&&Math.abs(e.xmax-i/2)<r?i/2:e.xmax,a=!t&&Math.abs(e.xmin+i/2)<r?-i/2:e.xmin;return J(s,o,i,!0)-J(a,o,i,!1)}function K(e){const t=e.storageInfo.origin.x,i=L(e.spatialReference,!0);if(!n(i))return{originX:t,halfWorldWidth:null,pyramidsInfo:null};const o=i/2,{nativePixelSize:r,storageInfo:s,extent:a}=e,{maximumPyramidLevel:l,blockWidth:c,pyramidScalingFactor:f}=s;let u=r.x;const m=[],x=n(e.transform)&&\"gcs-shift\"===e.transform.type,h=t+(x?0:o),p=x?i-t:o-t;for(let n=0;n<=l;n++){const e=(a.xmax-t)/u/c,n=e-Math.floor(e)==0?e:Math.ceil(e),i=p/u/c,o=i-Math.floor(i)==0?i:Math.ceil(i),r=Math.floor(h/u/c),s=Math.round(h/u)%c,l=(c-Math.round(p/u)%c)%c;m.push({resolutionX:u,blockWidth:c,datsetColumnCount:n,worldColumnCountFromOrigin:o,leftMargin:s,rightPadding:l,originColumnOffset:r}),u*=f}return{originX:t,halfWorldWidth:o,pyramidsInfo:m,hasGCSSShiftTransform:x}}function U(e){if(!e||e.isGeographic)return e;const t=String(e.wkid||e.wkt);let n;if(E.has(t))n=E.get(t);else{n=(e.wkid?o.coordsys(e.wkid):o.fromString(r.PE_TYPE_PROJCS,e.wkt)).getGeogcs().getCode(),E.set(t,n)}return new g({wkid:n})}function D(e){const t=e.isAdaptive&&null==e.spacing;let i=e.spacing||[R,R],o=H(e),r={cols:o.size[0]+1,rows:o.size[1]+1};const s=o.outofBoundPointCount>0&&o.outofBoundPointCount<o.offsets.length/2;let a=o.outofBoundPointCount===o.offsets.length/2||t&&s?[0,0]:M(o.offsets,r,i,S);const l=(a[0]+a[1])/2,c=e.projectedExtent.spatialReference,f=e.srcBufferExtent.spatialReference;if(t&&(s||l>S)){y(c,f,e.datumTransformation)&&(c.isGeographic||n(W(c))),i=[P,P],o=H({...e,spacing:i}),r={cols:o.size[0]+1,rows:o.size[1]+1},a=M(o.offsets,r,i,S)}if(o.error=a,i[0]>1&&(o.coefficients=Q(o.offsets,r,s)),e.includeGCSGrid&&!c.isGeographic&&!c.isWebMercator)if(f.isGeographic)o.gcsGrid={offsets:o.offsets,coefficients:o.coefficients,spacing:i};else{const t=W(c);if(n(t)&&!t.isEnvelope){const t=U(c),n=B(e.projectedExtent,t),{offsets:a}=H({...e,srcBufferExtent:n,spacing:i}),l=Q(a,r,s);o.gcsGrid={offsets:a,coefficients:l,spacing:i}}}return o}function H(e){const{projectedExtent:t,srcBufferExtent:i,pixelSize:o,datumTransformation:r,rasterTransform:s}=e,a=t.spatialReference,l=i.spatialReference;d(a,l);const{xmin:c,ymin:f,xmax:u,ymax:m}=t,x=L(l),h=n(x)&&(e.hasWrapAround||\"gcs-shift\"===(null==s?void 0:s.type)),g=e.spacing||[R,R],y=g[0]*o.x,M=g[1]*o.y,w=1===g[0],S=Math.ceil((u-c)/y-.1/g[0])+(w?0:1),b=Math.ceil((m-f)/M-.1/g[1])+(w?0:1),E=C({cols:S,rows:b,xmin:c,ymax:m,xres:y,yres:M,inSR:a,outSR:l,datumTransformation:r,preferPE:g[0]<=P,usePixelCenter:w}),G=[];let k,N=0;const T=w?-1:NaN,{xmin:_,xmax:j,ymax:z,width:W,height:O}=i,A=v(l,500);for(let n=0;n<S;n++){const e=[];for(let t=0;t<b;t++){let i=E[n*b+t];if(h&&i[0]>j&&i[0]>x/2-A&&(i[0]-=x),!i||isNaN(i[0])||isNaN(i[1]))G.push(T),G.push(T),e.push(null),N++;else{if(s){const e=s.inverseTransform(new p({x:i[0],y:i[1],spatialReference:l}));i=[e.x,e.y]}e.push(i),n>0&&h&&k[t]&&i[0]<k[t][0]&&(i[0]+=x),G.push((i[0]-_)/W),G.push((z-i[1])/O)}}k=e}return{offsets:G,error:null,coefficients:null,outofBoundPointCount:N,spacing:g,size:w?[S,b]:[S-1,b-1]}}function Q(e,t,n){const{cols:i,rows:o}=t,r=new Float32Array((i-1)*(o-1)*2*6),s=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]),a=new Float32Array([-1,1,0,0,-1,1,1,0,0]);for(let l=0;l<i-1;l++){for(let t=0;t<o-1;t++){let n=l*o*2+2*t;const c=e[n],f=e[n+1],u=e[n+2],m=e[n+3];n+=2*o;const x=e[n],h=e[n+1],p=e[n+2],g=e[n+3];let y=0,d=12*(t*(i-1)+l);for(let e=0;e<3;e++)r[d++]=s[y++]*c+s[y++]*u+s[y++]*p;y=0;for(let e=0;e<3;e++)r[d++]=s[y++]*f+s[y++]*m+s[y++]*g;y=0;for(let e=0;e<3;e++)r[d++]=a[y++]*c+a[y++]*x+a[y++]*p;y=0;for(let e=0;e<3;e++)r[d++]=a[y++]*f+a[y++]*h+a[y++]*g}if(n)for(let e=0;e<r.length;e++)isNaN(r[e])&&(r[e]=-1)}return r}function V(e){const t=e.clone().normalize();return 1===t.length?t[0]:Y(t)}function Z(e,t,i){const{storageInfo:o,pixelSize:r}=t;let s,a=!1;const{pyramidResolutions:l}=o;if(n(l)&&l.length){const n=(e.x+e.y)/2,o=l[l.length-1],c=(o.x+o.y)/2,f=(r.x+r.y)/2;if(n<=f)s=0;else if(n>=c)s=l.length,a=n/c>8;else{let e,t=f;for(let o=1;o<=l.length;o++){if(e=(l[o-1].x+l[o-1].y)/2,n<=e){n===e?s=o:\"down\"===i?(s=o-1,a=n/t>8):s=\"up\"===i||n-t>e-n||n/t>2?o:o-1;break}t=e}}const u=0===s?r:l[s-1];return{pyramidLevel:s,pyramidResolution:new p({x:u.x,y:u.y,spatialReference:t.spatialReference}),excessiveReading:a}}const c=Math.log(e.x/r.x)/Math.LN2,f=Math.log(e.y/r.y)/Math.LN2,u=t.storageInfo.maximumPyramidLevel||0;s=\"down\"===i?Math.floor(Math.min(c,f)):\"up\"===i?Math.ceil(Math.max(c,f)):Math.round((c+f)/2),s<0?s=0:s>u&&(a=s>u+3,s=u);const m=2**s;return{pyramidLevel:s,pyramidResolution:new p({x:m*t.nativePixelSize.x,y:m*t.nativePixelSize.y,spatialReference:t.spatialReference}),excessiveReading:a}}function $(e,t,n=512,o=!0){const{extent:r,spatialReference:s,pixelSize:a}=e,l=N(new p({x:a.x,y:a.y,spatialReference:s}),t,r);if(null==l)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};const c=(l.x+l.y)/2,f=i(t),u=c*f*96*39.37,m=t.isGeographic?256/n*295828763.7958547:256/n*591657527.591555;let x=\"vector-magdir\"===e.dataType||\"vector-uv\"===e.dataType;const h=B(r,t);x||o&&(t.isGeographic||t.isWebMercator)&&(x=h.xmin*h.xmax<0);let g,y=u;const d=1.001;if(x){y=m;const e=t.isGeographic?1341104507446289e-21:.29858214164761665,n=e*(96*f*39.37),i=t.isGeographic?4326:3857;g=N(new p({x:e,y:e,spatialReference:{wkid:i}}),s,h),g.x*=y/n,g.y*=y/n}else{g={x:a.x,y:a.y};const t=Math.ceil(Math.log(Math.min(e.width,e.height)/32)/Math.LN2);let n=0;for(;y<m*(d/2)&&n<t;)n++,y*=2,g.x*=2,g.y*=2;Math.max(y,m)/Math.min(y,m)<=d&&(y=m)}const M=[y],w=[{x:g.x,y:g.y}],R=70.5310735,P=Math.min(R,u)/d;for(;y>=P;)y/=2,g.x/=2,g.y/=2,M.push(y),w.push({x:g.x,y:g.y});return{projectedPixelSize:l,scales:M,srcResolutions:w,isCustomTilingScheme:!x}}export{$ as computeProjectedScales,R as defaultGridSpacing,S as defaultProjectionToleranceInPixels,k as getDefaultDatumTransformationForDataset,C as getProjectedGridPoints,D as getProjectionOffsetGrid,K as getRasterDatasetAlignmentInfo,L as getWorldWidth,X as getWorldWrapCount,G as load,P as minimumGridSpacing,B as projectExtent,T as projectPoint,N as projectResolution,y as requirePE,V as snapExtent,Z as snapPyramid};\n"]},"metadata":{},"sourceType":"module"}