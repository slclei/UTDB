{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { bytesToUTF8 as e } from \"../rasterDatasets/byteStreamUtils.js\";\nimport { J as t } from \"../../../chunks/Jpg.js\";\nimport { load as n, decode as a } from \"./Lerc.js\";\nimport { decode as i } from \"./Lzw.js\";\nimport s from \"./TiffTags.js\";\nimport { isPlatformLittleEndian as l } from \"./utils.js\";\nimport { Z as r } from \"../../../chunks/Zlib.js\";\nconst o = [0, 1, 1, 2, 4, 8, 1, 1, 2, 4, 8, 4, 8, -1, -1, -1, 8, 8, 8],\n      f = 4294967296,\n      u = new Set([1, 5, 6, 7, 8, 34712, 34887]);\n\nfunction c(e, t) {\n  let n = \"unknown\";\n  return 3 === e ? n = \"f32\" : 1 === e ? 1 === t ? n = \"u1\" : 2 === t ? n = \"u2\" : 4 === t ? n = \"u4\" : t <= 8 ? n = \"u8\" : t <= 16 ? n = \"u16\" : t <= 32 && (n = \"u32\") : 2 === e && (t <= 8 ? n = \"s8\" : t <= 16 ? n = \"s16\" : t <= 32 && (n = \"s32\")), n;\n}\n\nfunction h(e) {\n  let t = null;\n\n  switch (e ? e.toLowerCase() : \"f32\") {\n    case \"u1\":\n    case \"u2\":\n    case \"u4\":\n    case \"u8\":\n      t = Uint8Array;\n      break;\n\n    case \"u16\":\n      t = Uint16Array;\n      break;\n\n    case \"u32\":\n      t = Uint32Array;\n      break;\n\n    case \"s8\":\n      t = Int8Array;\n      break;\n\n    case \"s16\":\n      t = Int16Array;\n      break;\n\n    case \"s32\":\n      t = Int32Array;\n      break;\n\n    default:\n      t = Float32Array;\n  }\n\n  return t;\n}\n\nfunction g(e, t) {\n  return {\n    x: t[0] * e.x + t[1] * e.y + t[2],\n    y: t[3] * e.x + t[4] * e.y + t[5]\n  };\n}\n\nfunction w(e, t) {\n  var n;\n  return null == (n = e.get(t)) ? void 0 : n.values;\n}\n\nfunction d(e, t) {\n  var n;\n  return null == (n = e.get(t)) ? void 0 : n.values;\n}\n\nfunction p(e, t) {\n  var n;\n  return null == (n = e.get(t)) ? void 0 : n.values[0];\n}\n\nfunction I(e, t) {\n  var n;\n  return null == (n = e.get(t)) ? void 0 : n.values[0];\n}\n\nfunction T(e, t, n) {\n  let a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  let i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : s.TIFF_TAGS;\n  let l = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 4;\n  const r = 8 === l,\n        o = r ? U(new DataView(e, n, 8), 0, t) : new DataView(e, n, 2).getUint16(0, t),\n        f = 4 + 2 * l,\n        u = r ? 8 : 2,\n        c = u + o * f;\n  if (n + c > e.byteLength) return {\n    success: !1,\n    ifd: null,\n    nextIFD: null,\n    requiredBufferSize: c\n  };\n  const h = n + c + 4 <= e.byteLength ? L(new DataView(e, n + c, 8 === l ? 8 : 4), 0, t, 8 === l) : null,\n        g = n + u,\n        w = new Map();\n  let d, p, I, T, E, y, m;\n\n  for (let A = 0; A < o; A++) {\n    p = new DataView(e, g + f * A, f), I = p.getUint16(0, t), E = p.getUint16(2, t), T = s.getTagName(I, i);\n    const n = [];\n    2 === l ? (y = p.getUint16(4, t), m = p.getUint16(6, t)) : 4 === l ? (y = p.getUint32(4, t), m = p.getUint32(8, t)) : 8 === l && (y = L(p, 4, t, !0), m = L(p, 12, t, !0), n.push(p.getUint32(12, t)), n.push(p.getUint32(16, t))), d = {\n      id: I,\n      type: E,\n      valueCount: y,\n      valueOffset: m,\n      valueOffsets: n,\n      values: null\n    }, x(e, t, d, a, !1, l), w.set(T, d);\n  }\n\n  return {\n    success: !0,\n    ifd: w,\n    nextIFD: h,\n    requiredBufferSize: c\n  };\n}\n\nconst E = function (e, t) {\n  return a(e, {\n    inputOffset: t\n  }).pixels[0];\n};\n\nasync function y(e, a, s, o, f) {\n  var u, g;\n  const w = l === a,\n        d = I(s, \"BITSPERSAMPLE\"),\n        p = c(null != (u = I(s, \"SAMPLEFORMAT\")) ? u : 1, d),\n        T = null != (g = I(s, \"COMPRESSION\")) ? g : 1,\n        y = h(p);\n  let m, A, S, M, x, b, O;\n  if (34887 === T) return await n(), E(e, o);\n  if (1 === T) S = e.slice(o, o + f), M = new Uint8Array(S);else if (8 === T || 32946 === T) M = new Uint8Array(e, o, f), b = new r(M), O = b.getBytes(), S = new ArrayBuffer(O.length), M = new Uint8Array(S), M.set(O);else if (6 === T) {\n    M = new Uint8Array(e, o, f);\n    const n = new t();\n    n.parse(M);\n    const a = n.getData(n.width, n.height, !0);\n    S = new ArrayBuffer(a.length), M = new Uint8Array(S), M.set(a);\n  } else if (7 === T) {\n    const n = s.get(\"JPEGTABLES\").values,\n          a = n.length - 2;\n    M = new Uint8Array(a + f - 2);\n\n    for (let e = 0; e < a; e++) M[e] = n[e];\n\n    const i = new Uint8Array(e, o + 2, f - 2);\n\n    for (let e = 0; e < i.length; e++) M[a + e] = i[e];\n\n    const l = new t();\n    l.parse(M);\n    const r = l.getData(l.width, l.height, !0);\n    S = new ArrayBuffer(r.length), M = new Uint8Array(S), M.set(r);\n  } else 5 === T && (M = i(e, o, f, a), S = M.buffer);\n  if (\"u8\" === p || \"s8\" === p || w) A = new y(S);else {\n    switch (S = new ArrayBuffer(M.length), x = new Uint8Array(S), p) {\n      case \"u16\":\n      case \"s16\":\n        for (m = 0; m < M.length; m += 2) x[m] = M[m + 1], x[m + 1] = M[m];\n\n        break;\n\n      case \"u32\":\n      case \"s32\":\n      case \"f32\":\n        for (m = 0; m < M.length; m += 4) x[m] = M[m + 3], x[m + 1] = M[m + 2], x[m + 2] = M[m + 1], x[m + 3] = M[m];\n\n    }\n\n    A = new y(S);\n  }\n  return A;\n}\n\nasync function m(e, t, n) {\n  var a;\n  const i = d(n, \"TILEOFFSETS\");\n  if (void 0 === i) return null;\n  const s = d(n, \"TILEBYTECOUNTS\"),\n        {\n    width: l,\n    height: r,\n    pixelType: o,\n    tileWidth: f,\n    tileHeight: u\n  } = b([n]),\n        c = O(n, t),\n        g = t.planes,\n        w = l * r,\n        p = I(n, \"BITSPERSAMPLE\"),\n        T = 34887 === (null != (a = I(n, \"COMPRESSION\")) ? a : 1),\n        E = h(o),\n        m = [];\n\n  for (let h = 0; h < g; h++) m.push(new E(w));\n\n  let A, S, M, x, D, U, v, L, P, N, k, G, R;\n  const C = Math.ceil(l / f);\n  if (p % 8 == 0) if (T && c && g > 1) {\n    const a = Math.round(i.length / g);\n\n    for (A = 0; A < a; A++) {\n      U = Math.floor(A / C) * u, v = A % C * f, L = U * l + v;\n\n      for (let a = 0; a < g; a++) {\n        const o = A * g + a;\n\n        for (M = await y(e, t.littleEndian, n, i[o], s[o]), N = 0, P = L, G = Math.min(f, l - v), k = Math.min(u, r - U), R = m[a], x = 0; x < k; x++) for (P = L + x * l, N = x * f, D = 0; D < G; D++, P++, N++) R[P] = M[N];\n      }\n    }\n  } else for (A = 0; A < i.length; A++) for (U = Math.floor(A / C) * u, v = A % C * f, L = U * l + v, M = await y(e, t.littleEndian, n, i[A], s[A]), N = 0, P = L, G = Math.min(f, l - v), k = Math.min(u, r - U), S = 0; S < g; S++) if (R = m[S], c || T) for (x = 0; x < k; x++) for (P = L + x * l, N = f * u * S + x * f, D = 0; D < G; D++, P++, N++) R[P] = M[N];else for (x = 0; x < k; x++) for (P = L + x * l, N = x * f * g + S, D = 0; D < G; D++, P++, N += g) R[P] = M[N];\n  return {\n    width: l,\n    height: r,\n    pixelType: o,\n    pixels: m\n  };\n}\n\nconst A = function (e, n, a) {\n  var s;\n  const o = l === n.littleEndian,\n        f = d(a, \"STRIPOFFSETS\");\n  if (void 0 === f) return null;\n  const {\n    width: u,\n    height: c,\n    pixelType: g\n  } = b([a]),\n        w = n.planes,\n        p = u * c,\n        T = I(a, \"BITSPERSAMPLE\"),\n        E = h(g),\n        y = new E(p * w),\n        m = d(a, \"STRIPBYTECOUNTS\"),\n        A = I(a, \"ROWSPERSTRIP\"),\n        S = null != (s = I(a, \"COMPRESSION\")) ? s : 1;\n  let M,\n      x,\n      O,\n      D,\n      U,\n      v,\n      L,\n      P,\n      N,\n      k,\n      G,\n      R = A;\n  if (T % 8 == 0) for (M = 0; M < f.length; M++) {\n    if (U = M * (A * u) * w, R = (M + 1) * A > c ? c - M * A : A, \"u8\" === g || \"s8\" === g || o) {\n      if (8 === S || 32946 === S) L = new Uint8Array(e, f[M], m[M]), k = new r(L), G = k.getBytes(), v = new ArrayBuffer(G.length), L = new Uint8Array(v), L.set(G), L.length !== R * u * w * T / 8 && console.log(\"strip byte counts is different than expected\");else if (6 === S) {\n        L = new Uint8Array(e, f[M], m[M]);\n        const n = new t();\n        n.parse(L);\n        const a = n.getData(n.width, n.height, !0);\n        v = new ArrayBuffer(a.length), L = new Uint8Array(v), L.set(a);\n      } else 5 === S ? (L = i(e, f[M], m[M], n.littleEndian), v = L.buffer) : 1 === S && (m[M] !== R * u * w * T / 8 && console.log(\"strip byte counts is different than expected\"), v = e.slice(f[M], f[M] + m[M]));\n      D = new E(v);\n    } else {\n      switch (6 === S || 8 === S || 32946 === S ? (L = new Uint8Array(e, f[M], m[M]), k = new r(L), L = k.getBytes(), v = new ArrayBuffer(L.length), P = new Uint8Array(v), L.length !== R * u * w * T / 8 && console.log(\"strip byte counts is different than expected\")) : 1 === S && (m[M] !== R * u * w * T / 8 && console.log(\"strip byte counts is different than expected\"), v = new ArrayBuffer(m[M]), L = new Uint8Array(e, f[M], m[M]), P = new Uint8Array(v)), g) {\n        case \"u16\":\n        case \"s16\":\n          for (O = 0; O < L.length; O += 2) P[O] = L[O + 1], P[O + 1] = L[O];\n\n          break;\n\n        case \"u32\":\n        case \"s32\":\n        case \"f32\":\n          for (O = 0; O < L.length; O += 4) P[O] = L[O + 3], P[O + 1] = L[O + 2], P[O + 2] = L[O + 1], P[O + 3] = L[O];\n\n      }\n\n      D = new E(v);\n    }\n\n    y.set(D, U);\n  }\n  const C = [];\n  if (1 === w) C.push(y);else for (M = 0; M < w; M++) {\n    for (N = new E(p), x = 0; x < p; x++) N[x] = y[x * w + M];\n\n    C.push(N);\n  }\n  return {\n    width: u,\n    height: c,\n    pixelType: g,\n    pixels: C\n  };\n},\n      S = function (e, t, n) {\n  if (!(e && e.length > 0 && t && n)) return null;\n  let a, i, s;\n  const l = e[0].length,\n        r = e.length,\n        o = new Uint8Array(l);\n\n  for (let f = 0; f < r; f++) if (a = e[f], i = t[f], s = n[f], 0 === f) for (let e = 0; e < l; e++) o[e] = a[e] < i || a[e] > s ? 0 : 1;else for (let e = 0; e < l; e++) o[e] && (o[e] = a[e] < i || a[e] > s ? 0 : 1);\n\n  return o;\n},\n      M = function (e) {\n  if (!e) return null;\n  const t = e.match(/<Item(.*?)Item>/gi);\n  if (!t || 0 === t.length) return null;\n  const n = new Map();\n  let a, i, s, l, r;\n\n  for (let I = 0; I < t.length; I++) a = t[I], i = a.slice(\"<Item \".length, a.indexOf(\">\")), l = a.indexOf(\"sample=\"), l > -1 && (r = a.slice(l + 'sample=\"'.length, a.indexOf('\"', l + 'sample=\"'.length))), l = a.indexOf(\"name=\"), l > -1 && (i = a.slice(l + 'name=\"'.length, a.indexOf('\"', l + 'name=\"'.length))), i && (s = a.slice(a.indexOf(\">\") + 1, a.indexOf(\"</Item>\")).trim(), null != r ? n.has(i) ? n.get(i)[r] = s : n.set(i, [s]) : n.set(i, s)), r = null;\n\n  const o = n.get(\"STATISTICS_MINIMUM\"),\n        f = n.get(\"STATISTICS_MAXIMUM\"),\n        u = n.get(\"STATISTICS_MEAN\"),\n        c = n.get(\"STATISTICS_STDDEV\");\n  let h = null;\n\n  if (o && f) {\n    h = [];\n\n    for (let e = 0; e < o.length; e++) h.push({\n      min: parseFloat(o[e]),\n      max: parseFloat(f[e]),\n      avg: u && parseFloat(u[e]),\n      stddev: c && parseFloat(c[e])\n    });\n  }\n\n  const g = n.get(\"BandName\"),\n        w = n.get(\"WavelengthMin\"),\n        d = n.get(\"WavelengthMax\");\n  let p = null;\n\n  if (g) {\n    p = [];\n\n    for (let e = 0; e < g.length; e++) p.push({\n      BandName: g[e],\n      WavelengthMin: w && parseFloat(w[e]),\n      WavelengthMax: d && parseFloat(d[e])\n    });\n  }\n\n  return {\n    statistics: h,\n    bandProperties: p,\n    dataType: n.get(\"DataType\"),\n    rawMetadata: n\n  };\n};\n\nfunction x(e, t, n) {\n  let a = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  let i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !1;\n  let s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 4;\n  if (n.values) return !0;\n  const l = n.type,\n        r = n.valueCount;\n  let u = n.valueOffset,\n      c = [];\n  const h = o[l],\n        g = 8 * h,\n        w = r * h,\n        d = r * o[l] * 8;\n  let p, I;\n  const T = 8 === s ? 64 : 32,\n        E = n.valueOffsets;\n\n  if (d > T) {\n    if (w > (i ? e.byteLength : e ? e.byteLength - u + a : 0)) return n.offlineOffsetSize = [u, w], n.values = null, !1;\n  }\n\n  if (d <= T) {\n    if (!t) if (T <= 32) u >>>= 32 - d;else {\n      const e = null != E && E.length ? E[0] : u >>> 0,\n            t = null != E && E.length ? E[1] : Math.round((u - e) / f);\n      d <= 32 ? (u = e >>> 32 - d, E[0] = u) : (u = e * 2 ** (32 - d) + (t >>> 32 - d), E[0] = e, E[1] = t >>> 32 - d);\n    }\n    if (1 === r && g === T) c = [u];else if (64 === T) {\n      const e = null != E && E.length ? E[0] : u >>> 0,\n            t = null != E && E.length ? E[1] : Math.round((u - e) / f);\n      let n = e,\n          a = 32;\n\n      for (I = 1; I <= r; I++) {\n        const e = 32 - g * I % 32;\n\n        if (a < g) {\n          const i = n << e >>> 32 - a,\n                s = t << 32 - a >>> 32 - a;\n          n = t, c.push(i + s * 2 ** (g - a)), a -= 32 - (g - a);\n        } else c.push(n << e >>> 32 - g), a -= g;\n\n        0 === a && (a = 32, n = t);\n      }\n    } else for (I = 1; I <= r; I++) {\n      const e = 32 - g * I;\n      c.push(u << e >>> 32 - g);\n    }\n  } else {\n    u -= a, i && (u = 0);\n\n    for (let n = u; n < u + w; n += h) {\n      switch (l) {\n        case 1:\n        case 2:\n        case 7:\n          p = new DataView(e, n, 1).getUint8(0);\n          break;\n\n        case 3:\n          p = new DataView(e, n, 2).getUint16(0, t);\n          break;\n\n        case 4:\n        case 13:\n          p = new DataView(e, n, 4).getUint32(0, t);\n          break;\n\n        case 5:\n          p = new DataView(e, n, 4).getUint32(0, t) / new DataView(e, n + 4, 4).getUint32(0, t);\n          break;\n\n        case 6:\n          p = new DataView(e, n, 1).getInt8(0);\n          break;\n\n        case 8:\n          p = new DataView(e, n, 2).getInt16(0, t);\n          break;\n\n        case 9:\n          p = new DataView(e, n, 4).getInt32(0, t);\n          break;\n\n        case 10:\n          p = new DataView(e, n, 4).getInt32(0, t) / new DataView(e, n + 4, 4).getInt32(0, t);\n          break;\n\n        case 11:\n          p = new DataView(e, n, 4).getFloat32(0, t);\n          break;\n\n        case 12:\n          p = new DataView(e, n, 8).getFloat64(0, t);\n          break;\n\n        case 16:\n        case 18:\n          p = U(new DataView(e, n, 8), 0, t);\n          break;\n\n        case 17:\n          p = v(new DataView(e, n, 8), 0, t);\n          break;\n\n        default:\n          p = null;\n      }\n\n      c.push(p);\n    }\n  }\n\n  if (2 === l) {\n    let e = \"\";\n    const t = c;\n\n    for (c = [], I = 0; I < t.length; I++) 0 === t[I] && \"\" !== e ? (c.push(e), e = \"\") : e += String.fromCharCode(t[I]);\n\n    \"\" === e && 0 !== c.length || c.push(e);\n  }\n\n  return n.values = c, !0;\n}\n\nfunction b(e) {\n  var t, n;\n  const a = e[0],\n        i = I(a, \"TILEWIDTH\"),\n        s = I(a, \"TILELENGTH\"),\n        l = I(a, \"IMAGEWIDTH\"),\n        r = I(a, \"IMAGELENGTH\"),\n        o = I(a, \"BITSPERSAMPLE\"),\n        f = I(a, \"SAMPLESPERPIXEL\"),\n        h = null != (t = I(a, \"SAMPLEFORMAT\")) ? t : 1,\n        T = c(h, o),\n        E = O(a),\n        y = w(a, \"GDAL_NODATA\");\n  let m;\n  null != y && y.length && (m = y.map(e => parseFloat(e)), m.some(e => isNaN(e)) && (m = null));\n  const A = null != (n = I(a, \"COMPRESSION\")) ? n : 1;\n  let S;\n\n  switch (A) {\n    case 1:\n      S = \"NONE\";\n      break;\n\n    case 2:\n    case 3:\n    case 4:\n    case 32771:\n      S = \"CCITT\";\n      break;\n\n    case 5:\n      S = \"LZW\";\n      break;\n\n    case 6:\n    case 7:\n      S = \"JPEG\";\n      break;\n\n    case 32773:\n      S = \"PACKBITS\";\n      break;\n\n    case 8:\n    case 32946:\n      S = \"DEFLATE\";\n      break;\n\n    case 34712:\n      S = \"JPEG2000\";\n      break;\n\n    case 34887:\n      S = \"LERC\";\n      break;\n\n    default:\n      S = String(A);\n  }\n\n  let x = !0,\n      b = \"\";\n  u.has(A) || (x = !1, b += \"unsupported tag compression \" + A), h > 3 && (x = !1, b += \"unsupported tag sampleFormat \" + h), o % 8 != 0 && (x = !1, b += \"unsupported tag bitsPerSample \" + o);\n  const D = p(a, \"GEOASCIIPARAMS\");\n  let U;\n\n  if (D) {\n    const e = D.split(\"|\").find(e => e.indexOf(\"ESRI PE String = \") > -1),\n          t = e ? e.replace(\"ESRI PE String = \", \"\") : \"\";\n    U = t.startsWith(\"COMPD_CS\") || t.startsWith(\"PROJCS\") || t.startsWith(\"GEOGCS\") ? {\n      wkid: null,\n      wkt: t\n    } : null;\n  }\n\n  const v = d(a, \"GEOTIEPOINTS\"),\n        L = d(a, \"GEOPIXELSCALE\"),\n        P = d(a, \"GEOTRANSMATRIX\"),\n        N = a.has(\"GEOKEYDIRECTORY\") ? a.get(\"GEOKEYDIRECTORY\").data : null;\n  let G,\n      R,\n      C = !1;\n\n  if (N) {\n    C = 2 === I(N, \"GTRasterTypeGeoKey\");\n    const e = I(N, \"GTModelTypeGeoKey\");\n\n    if (2 === e) {\n      const e = I(N, \"GeographicTypeGeoKey\");\n      e >= 1024 && e <= 32766 && (U = {\n        wkid: e\n      });\n    } else if (1 === e) {\n      const e = I(N, \"ProjectedCSTypeGeoKey\");\n      e >= 1024 && e <= 32766 && (U = {\n        wkid: e\n      });\n    }\n  }\n\n  if (L && v && v.length >= 6 ? (G = [L[0], 0, v[3] - v[0] * L[0], 0, -Math.abs(L[1]), v[4] - v[1] * L[1]], C && (G[2] -= .5 * G[0] + .5 * G[1], G[5] -= .5 * G[3] + .5 * G[4])) : P && 16 === P.length && (G = C ? [P[0], P[1], P[3] - .5 * P[0], P[4], P[5], P[7] - .5 * P[5]] : [P[0], P[1], P[3], P[4], P[5], P[7]]), G) {\n    const e = [{\n      x: 0,\n      y: r\n    }, {\n      x: 0,\n      y: 0\n    }, {\n      x: l,\n      y: r\n    }, {\n      x: l,\n      y: 0\n    }];\n    let t,\n        n = Number.POSITIVE_INFINITY,\n        a = Number.POSITIVE_INFINITY,\n        i = Number.NEGATIVE_INFINITY,\n        s = Number.NEGATIVE_INFINITY;\n\n    for (let l = 0; l < e.length; l++) t = g(e[l], G), n = t.x > n ? n : t.x, i = t.x < i ? i : t.x, a = t.y > a ? a : t.y, s = t.y < s ? s : t.y;\n\n    R = {\n      xmin: n,\n      xmax: i,\n      ymin: a,\n      ymax: s,\n      spatialReference: U\n    };\n  } else R = {\n    xmin: -.5,\n    ymin: .5 - r,\n    xmax: l - .5,\n    ymax: .5,\n    spatialReference: U\n  };\n\n  const F = e.filter(e => 1 === p(e, \"NEWSUBFILETYPE\"));\n  let B, V, W, H, Y;\n\n  if (F.length > 0) {\n    B = Math.round(Math.log(l / I(F[0], \"IMAGEWIDTH\")) / Math.LN2);\n    const e = F[F.length - 1];\n    V = Math.round(Math.log(l / I(e, \"IMAGEWIDTH\")) / Math.LN2), W = I(e, \"TILEWIDTH\"), H = I(e, \"TILELENGTH\");\n  }\n\n  W = V > 0 ? W || i : null, H = V > 0 ? H || s : null, i && (Y = [{\n    maxCol: Math.ceil(l / i) - 1,\n    maxRow: Math.ceil(r / s) - 1,\n    minRow: 0,\n    minCol: 0\n  }], F.forEach(e => {\n    Y.push({\n      maxCol: Math.ceil(I(e, \"IMAGEWIDTH\") / I(e, \"TILEWIDTH\")) - 1,\n      maxRow: Math.ceil(I(e, \"IMAGELENGTH\") / I(e, \"TILELENGTH\")) - 1,\n      minRow: 0,\n      minCol: 0\n    });\n  }));\n\n  const _ = p(e[0], \"GDAL_METADATA\"),\n        K = M(_);\n\n  return b += \" \" + k({\n    width: l,\n    height: r,\n    tileWidth: i,\n    tileHeight: s,\n    planes: f,\n    ifds: e\n  }), {\n    width: l,\n    height: r,\n    tileWidth: i,\n    tileHeight: s,\n    planes: f,\n    isBSQ: E,\n    pixelType: T,\n    compression: S,\n    noData: m,\n    isSupported: x,\n    message: b,\n    extent: R,\n    affine: L ? null : G,\n    firstPyramidLevel: B,\n    maximumPyramidLevel: V,\n    pyramidBlockWidth: W,\n    pyramidBlockHeight: H,\n    tileBoundary: Y,\n    metadata: K\n  };\n}\n\nfunction O(e, t) {\n  const n = w(e, \"PLANARCONFIGURATION\");\n  return n ? 2 === n[0] : !!t && t.isBSQ;\n}\n\nfunction D(e) {\n  const {\n    littleEndian: t,\n    isBigTiff: n,\n    firstIFD: a\n  } = P(e);\n  let i = a;\n  const l = [];\n\n  do {\n    const a = N(e, t, i, 0, s.TIFF_TAGS, n ? 8 : 4);\n    if (!a.success) break;\n    l.push(a.ifd), i = a.nextIFD;\n  } while (i > 0);\n\n  return { ...b(l),\n    littleEndian: t,\n    isBigTiff: n,\n    ifds: l\n  };\n}\n\nfunction U(e, t, n) {\n  const a = e.getUint32(t, n),\n        i = e.getUint32(t + 4, n);\n  return n ? i * f + a : a * f + i;\n}\n\nfunction v(e, t, n) {\n  let a = n ? e.getInt32(t, n) : e.getUint32(t, n),\n      i = n ? e.getUint32(t + 4, n) : e.getInt32(t + 4, n);\n  const s = (n ? a : i) >= 0 ? 1 : -1;\n  n ? a *= s : i *= s;\n  return s * (n ? i * f + a : a * f + i);\n}\n\nfunction L(e, t, n, a) {\n  return a ? U(e, t, n) : e.getUint32(t, n);\n}\n\nfunction P(e) {\n  const t = new DataView(e, 0, 16),\n        n = t.getUint16(0, !1);\n  let a = null;\n  if (18761 === n) a = !0;else {\n    if (19789 !== n) throw \"unexpected endianess byte\";\n    a = !1;\n  }\n  const i = t.getUint16(2, a);\n  if (42 !== i && 43 !== i) throw \"unexpected tiff identifier\";\n  let s = 4;\n  const l = 43 === i;\n\n  if (l) {\n    const e = t.getUint16(s, a);\n    if (s += 2, 8 !== e) throw \"unsupported bigtiff version\";\n    if (0 !== t.getUint16(s, a)) throw \"unsupported bigtiff version\";\n    s += 2;\n  }\n\n  return {\n    littleEndian: a,\n    isBigTiff: l,\n    firstIFD: L(t, s, a, l)\n  };\n}\n\nfunction N(t, n, a) {\n  let i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  let l = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : s.TIFF_TAGS;\n  let r = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 4;\n  const o = T(t, n, a, i, l, r);\n  let f;\n  const u = o.ifd;\n\n  if (u) {\n    if (s.ifdTags.forEach((e, a) => {\n      u.has(a) && (f = u.get(a), f.data = T(t, n, f.valueOffset - i, i, e).ifd);\n    }), u.has(\"GEOKEYDIRECTORY\")) {\n      f = u.get(\"GEOKEYDIRECTORY\");\n      const e = f.values;\n\n      if (e && e.length > 4) {\n        const a = e[0] + \".\" + e[1] + \".\" + e[2];\n        f.data = T(t, n, f.valueOffset + 6 - i, i, s.GEO_KEYS, 2).ifd, f.data && f.data.set(\"GEOTIFFVersion\", {\n          id: 0,\n          type: 2,\n          valueCount: 1,\n          valueOffset: null,\n          values: [a]\n        });\n      }\n    }\n\n    if (u.has(\"XMP\")) {\n      f = u.get(\"XMP\");\n      const t = f.values;\n      \"number\" == typeof t[0] && 7 === f.type && (f.values = [e(new Uint8Array(t))]);\n    }\n  }\n\n  return o;\n}\n\nfunction k(e) {\n  const {\n    width: t,\n    height: n,\n    tileHeight: a,\n    tileWidth: i\n  } = e,\n        s = e.planes,\n        l = i ? i * a : t * n,\n        r = I(e.ifds[0], \"BITSPERSAMPLE\");\n  let o = \"\";\n  return l * s > 2 ** 30 / (r > 8 ? r / 8 : 1) && (o = i ? \"tiled tiff exceeding 1 gigabits per tile is not supported\" : \"scanline tiff exceeding 1 gigabits is not supported\"), o;\n}\n\nasync function G(e, t) {\n  var n;\n  const {\n    headerInfo: a,\n    ifd: i,\n    offsets: s,\n    sizes: l\n  } = t,\n        r = [];\n\n  for (let h = 0; h < s.length; h++) {\n    const t = await y(e, a.littleEndian, i, s[h], l[h] || e.byteLength);\n    r.push(t);\n  }\n\n  const o = O(i, a),\n        {\n    pixelType: f,\n    planes: u\n  } = a,\n        c = h(f),\n        g = I(i, \"TILEWIDTH\"),\n        w = I(i, \"TILELENGTH\"),\n        d = null != (n = I(i, \"COMPRESSION\")) ? n : 1,\n        p = g * w;\n  let T;\n  const E = [];\n  let m = r[0];\n  const A = 34887 === d;\n\n  for (let h = 0; h < u; h++) {\n    if (T = new c(p), o && A) {\n      m = r[h];\n\n      for (let e = 0; e < p; e++) T[e] = m[h][e + h];\n    } else if (o || A && !o) T = m.slice(p * h, p * (h + 1));else for (let e = 0; e < p; e++) T[e] = m[e * u + h];\n\n    E.push(T);\n  }\n\n  const M = a.noData ? a.noData[0] : null,\n        x = a.metadata ? a.metadata.statistics : null,\n        b = x ? x.map(e => e.min) : null,\n        D = x ? x.map(e => e.max) : null;\n  let U, v;\n  if (null != M) {\n    if (U = new Uint8Array(p), Math.abs(M) > 1e24) for (v = 0; v < p; v++) Math.abs((E[0][v] - M) / M) < 1e-6 ? U[v] = 0 : U[v] = 1;else for (v = 0; v < p; v++) E[0][v] === M ? U[v] = 0 : U[v] = 1;\n  } else b && D && t.applyMinMaxConstraint && (U = S(E, b, D));\n  return {\n    pixelType: f,\n    width: g,\n    height: w,\n    pixels: E,\n    mask: U,\n    noDataValue: M\n  };\n}\n\nasync function R(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let n = arguments.length > 2 ? arguments[2] : undefined;\n  n = n || D(e);\n  const {\n    ifds: a,\n    noData: i\n  } = n;\n  if (0 === a.length) throw \"no valid image file directory\";\n  const s = k(n);\n  if (s) throw s;\n  let l, r;\n  const o = -1 === t ? a[a.length - 1] : a[t],\n        f = i ? i[0] : null;\n\n  if (r = n.tileWidth ? await m(e, n, o) : await A(e, n, o), null !== f) {\n    if (r.mask = new Uint8Array(r.width * r.height), Math.abs(f) > 1e24) for (l = 0; l < r.width * r.height; l++) Math.abs((r.pixels[0][l] - f) / f) < 1e-6 ? r.mask[l] = 0 : r.mask[l] = 1;else for (l = 0; l < r.width * r.height; l++) r.pixels[0][l] === f ? r.mask[l] = 0 : r.mask[l] = 1;\n    r.noDataValue = f;\n  }\n\n  return r;\n}\n\nexport { R as decode, G as decodeTileOrStrip, b as getImageInfo, O as isBSQConfig, x as parseFieldValues, D as parseHeader, N as parseIFD, P as parseSignature };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/support/rasterFormats/TiffDecoder.js"],"names":["bytesToUTF8","e","J","t","load","n","decode","a","i","s","isPlatformLittleEndian","l","Z","r","o","f","u","Set","c","h","toLowerCase","Uint8Array","Uint16Array","Uint32Array","Int8Array","Int16Array","Int32Array","Float32Array","g","x","y","w","get","values","d","p","I","T","TIFF_TAGS","U","DataView","getUint16","byteLength","success","ifd","nextIFD","requiredBufferSize","L","Map","E","m","A","getTagName","getUint32","push","id","type","valueCount","valueOffset","valueOffsets","set","inputOffset","pixels","S","M","b","O","slice","getBytes","ArrayBuffer","length","parse","getData","width","height","buffer","pixelType","tileWidth","tileHeight","planes","D","v","P","N","k","G","R","C","Math","ceil","round","floor","littleEndian","min","console","log","match","indexOf","trim","has","parseFloat","max","avg","stddev","BandName","WavelengthMin","WavelengthMax","statistics","bandProperties","dataType","rawMetadata","offlineOffsetSize","getUint8","getInt8","getInt16","getInt32","getFloat32","getFloat64","String","fromCharCode","map","some","isNaN","split","find","replace","startsWith","wkid","wkt","data","abs","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","xmin","xmax","ymin","ymax","spatialReference","F","filter","B","V","W","H","Y","LN2","maxCol","maxRow","minRow","minCol","forEach","_","K","ifds","isBSQ","compression","noData","isSupported","message","extent","affine","firstPyramidLevel","maximumPyramidLevel","pyramidBlockWidth","pyramidBlockHeight","tileBoundary","metadata","isBigTiff","firstIFD","ifdTags","GEO_KEYS","headerInfo","offsets","sizes","applyMinMaxConstraint","mask","noDataValue","decodeTileOrStrip","getImageInfo","isBSQConfig","parseFieldValues","parseHeader","parseIFD","parseSignature"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{bytesToUTF8 as e}from\"../rasterDatasets/byteStreamUtils.js\";import{J as t}from\"../../../chunks/Jpg.js\";import{load as n,decode as a}from\"./Lerc.js\";import{decode as i}from\"./Lzw.js\";import s from\"./TiffTags.js\";import{isPlatformLittleEndian as l}from\"./utils.js\";import{Z as r}from\"../../../chunks/Zlib.js\";const o=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],f=4294967296,u=new Set([1,5,6,7,8,34712,34887]);function c(e,t){let n=\"unknown\";return 3===e?n=\"f32\":1===e?1===t?n=\"u1\":2===t?n=\"u2\":4===t?n=\"u4\":t<=8?n=\"u8\":t<=16?n=\"u16\":t<=32&&(n=\"u32\"):2===e&&(t<=8?n=\"s8\":t<=16?n=\"s16\":t<=32&&(n=\"s32\")),n}function h(e){let t=null;switch(e?e.toLowerCase():\"f32\"){case\"u1\":case\"u2\":case\"u4\":case\"u8\":t=Uint8Array;break;case\"u16\":t=Uint16Array;break;case\"u32\":t=Uint32Array;break;case\"s8\":t=Int8Array;break;case\"s16\":t=Int16Array;break;case\"s32\":t=Int32Array;break;default:t=Float32Array}return t}function g(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function w(e,t){var n;return null==(n=e.get(t))?void 0:n.values}function d(e,t){var n;return null==(n=e.get(t))?void 0:n.values}function p(e,t){var n;return null==(n=e.get(t))?void 0:n.values[0]}function I(e,t){var n;return null==(n=e.get(t))?void 0:n.values[0]}function T(e,t,n,a=0,i=s.TIFF_TAGS,l=4){const r=8===l,o=r?U(new DataView(e,n,8),0,t):new DataView(e,n,2).getUint16(0,t),f=4+2*l,u=r?8:2,c=u+o*f;if(n+c>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const h=n+c+4<=e.byteLength?L(new DataView(e,n+c,8===l?8:4),0,t,8===l):null,g=n+u,w=new Map;let d,p,I,T,E,y,m;for(let A=0;A<o;A++){p=new DataView(e,g+f*A,f),I=p.getUint16(0,t),E=p.getUint16(2,t),T=s.getTagName(I,i);const n=[];2===l?(y=p.getUint16(4,t),m=p.getUint16(6,t)):4===l?(y=p.getUint32(4,t),m=p.getUint32(8,t)):8===l&&(y=L(p,4,t,!0),m=L(p,12,t,!0),n.push(p.getUint32(12,t)),n.push(p.getUint32(16,t))),d={id:I,type:E,valueCount:y,valueOffset:m,valueOffsets:n,values:null},x(e,t,d,a,!1,l),w.set(T,d)}return{success:!0,ifd:w,nextIFD:h,requiredBufferSize:c}}const E=function(e,t){return a(e,{inputOffset:t}).pixels[0]};async function y(e,a,s,o,f){var u,g;const w=l===a,d=I(s,\"BITSPERSAMPLE\"),p=c(null!=(u=I(s,\"SAMPLEFORMAT\"))?u:1,d),T=null!=(g=I(s,\"COMPRESSION\"))?g:1,y=h(p);let m,A,S,M,x,b,O;if(34887===T)return await n(),E(e,o);if(1===T)S=e.slice(o,o+f),M=new Uint8Array(S);else if(8===T||32946===T)M=new Uint8Array(e,o,f),b=new r(M),O=b.getBytes(),S=new ArrayBuffer(O.length),M=new Uint8Array(S),M.set(O);else if(6===T){M=new Uint8Array(e,o,f);const n=new t;n.parse(M);const a=n.getData(n.width,n.height,!0);S=new ArrayBuffer(a.length),M=new Uint8Array(S),M.set(a)}else if(7===T){const n=s.get(\"JPEGTABLES\").values,a=n.length-2;M=new Uint8Array(a+f-2);for(let e=0;e<a;e++)M[e]=n[e];const i=new Uint8Array(e,o+2,f-2);for(let e=0;e<i.length;e++)M[a+e]=i[e];const l=new t;l.parse(M);const r=l.getData(l.width,l.height,!0);S=new ArrayBuffer(r.length),M=new Uint8Array(S),M.set(r)}else 5===T&&(M=i(e,o,f,a),S=M.buffer);if(\"u8\"===p||\"s8\"===p||w)A=new y(S);else{switch(S=new ArrayBuffer(M.length),x=new Uint8Array(S),p){case\"u16\":case\"s16\":for(m=0;m<M.length;m+=2)x[m]=M[m+1],x[m+1]=M[m];break;case\"u32\":case\"s32\":case\"f32\":for(m=0;m<M.length;m+=4)x[m]=M[m+3],x[m+1]=M[m+2],x[m+2]=M[m+1],x[m+3]=M[m]}A=new y(S)}return A}async function m(e,t,n){var a;const i=d(n,\"TILEOFFSETS\");if(void 0===i)return null;const s=d(n,\"TILEBYTECOUNTS\"),{width:l,height:r,pixelType:o,tileWidth:f,tileHeight:u}=b([n]),c=O(n,t),g=t.planes,w=l*r,p=I(n,\"BITSPERSAMPLE\"),T=34887===(null!=(a=I(n,\"COMPRESSION\"))?a:1),E=h(o),m=[];for(let h=0;h<g;h++)m.push(new E(w));let A,S,M,x,D,U,v,L,P,N,k,G,R;const C=Math.ceil(l/f);if(p%8==0)if(T&&c&&g>1){const a=Math.round(i.length/g);for(A=0;A<a;A++){U=Math.floor(A/C)*u,v=A%C*f,L=U*l+v;for(let a=0;a<g;a++){const o=A*g+a;for(M=await y(e,t.littleEndian,n,i[o],s[o]),N=0,P=L,G=Math.min(f,l-v),k=Math.min(u,r-U),R=m[a],x=0;x<k;x++)for(P=L+x*l,N=x*f,D=0;D<G;D++,P++,N++)R[P]=M[N]}}}else for(A=0;A<i.length;A++)for(U=Math.floor(A/C)*u,v=A%C*f,L=U*l+v,M=await y(e,t.littleEndian,n,i[A],s[A]),N=0,P=L,G=Math.min(f,l-v),k=Math.min(u,r-U),S=0;S<g;S++)if(R=m[S],c||T)for(x=0;x<k;x++)for(P=L+x*l,N=f*u*S+x*f,D=0;D<G;D++,P++,N++)R[P]=M[N];else for(x=0;x<k;x++)for(P=L+x*l,N=x*f*g+S,D=0;D<G;D++,P++,N+=g)R[P]=M[N];return{width:l,height:r,pixelType:o,pixels:m}}const A=function(e,n,a){var s;const o=l===n.littleEndian,f=d(a,\"STRIPOFFSETS\");if(void 0===f)return null;const{width:u,height:c,pixelType:g}=b([a]),w=n.planes,p=u*c,T=I(a,\"BITSPERSAMPLE\"),E=h(g),y=new E(p*w),m=d(a,\"STRIPBYTECOUNTS\"),A=I(a,\"ROWSPERSTRIP\"),S=null!=(s=I(a,\"COMPRESSION\"))?s:1;let M,x,O,D,U,v,L,P,N,k,G,R=A;if(T%8==0)for(M=0;M<f.length;M++){if(U=M*(A*u)*w,R=(M+1)*A>c?c-M*A:A,\"u8\"===g||\"s8\"===g||o){if(8===S||32946===S)L=new Uint8Array(e,f[M],m[M]),k=new r(L),G=k.getBytes(),v=new ArrayBuffer(G.length),L=new Uint8Array(v),L.set(G),L.length!==R*u*w*T/8&&console.log(\"strip byte counts is different than expected\");else if(6===S){L=new Uint8Array(e,f[M],m[M]);const n=new t;n.parse(L);const a=n.getData(n.width,n.height,!0);v=new ArrayBuffer(a.length),L=new Uint8Array(v),L.set(a)}else 5===S?(L=i(e,f[M],m[M],n.littleEndian),v=L.buffer):1===S&&(m[M]!==R*u*w*T/8&&console.log(\"strip byte counts is different than expected\"),v=e.slice(f[M],f[M]+m[M]));D=new E(v)}else{switch(6===S||8===S||32946===S?(L=new Uint8Array(e,f[M],m[M]),k=new r(L),L=k.getBytes(),v=new ArrayBuffer(L.length),P=new Uint8Array(v),L.length!==R*u*w*T/8&&console.log(\"strip byte counts is different than expected\")):1===S&&(m[M]!==R*u*w*T/8&&console.log(\"strip byte counts is different than expected\"),v=new ArrayBuffer(m[M]),L=new Uint8Array(e,f[M],m[M]),P=new Uint8Array(v)),g){case\"u16\":case\"s16\":for(O=0;O<L.length;O+=2)P[O]=L[O+1],P[O+1]=L[O];break;case\"u32\":case\"s32\":case\"f32\":for(O=0;O<L.length;O+=4)P[O]=L[O+3],P[O+1]=L[O+2],P[O+2]=L[O+1],P[O+3]=L[O]}D=new E(v)}y.set(D,U)}const C=[];if(1===w)C.push(y);else for(M=0;M<w;M++){for(N=new E(p),x=0;x<p;x++)N[x]=y[x*w+M];C.push(N)}return{width:u,height:c,pixelType:g,pixels:C}},S=function(e,t,n){if(!(e&&e.length>0&&t&&n))return null;let a,i,s;const l=e[0].length,r=e.length,o=new Uint8Array(l);for(let f=0;f<r;f++)if(a=e[f],i=t[f],s=n[f],0===f)for(let e=0;e<l;e++)o[e]=a[e]<i||a[e]>s?0:1;else for(let e=0;e<l;e++)o[e]&&(o[e]=a[e]<i||a[e]>s?0:1);return o},M=function(e){if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||0===t.length)return null;const n=new Map;let a,i,s,l,r;for(let I=0;I<t.length;I++)a=t[I],i=a.slice(\"<Item \".length,a.indexOf(\">\")),l=a.indexOf(\"sample=\"),l>-1&&(r=a.slice(l+'sample=\"'.length,a.indexOf('\"',l+'sample=\"'.length))),l=a.indexOf(\"name=\"),l>-1&&(i=a.slice(l+'name=\"'.length,a.indexOf('\"',l+'name=\"'.length))),i&&(s=a.slice(a.indexOf(\">\")+1,a.indexOf(\"</Item>\")).trim(),null!=r?n.has(i)?n.get(i)[r]=s:n.set(i,[s]):n.set(i,s)),r=null;const o=n.get(\"STATISTICS_MINIMUM\"),f=n.get(\"STATISTICS_MAXIMUM\"),u=n.get(\"STATISTICS_MEAN\"),c=n.get(\"STATISTICS_STDDEV\");let h=null;if(o&&f){h=[];for(let e=0;e<o.length;e++)h.push({min:parseFloat(o[e]),max:parseFloat(f[e]),avg:u&&parseFloat(u[e]),stddev:c&&parseFloat(c[e])})}const g=n.get(\"BandName\"),w=n.get(\"WavelengthMin\"),d=n.get(\"WavelengthMax\");let p=null;if(g){p=[];for(let e=0;e<g.length;e++)p.push({BandName:g[e],WavelengthMin:w&&parseFloat(w[e]),WavelengthMax:d&&parseFloat(d[e])})}return{statistics:h,bandProperties:p,dataType:n.get(\"DataType\"),rawMetadata:n}};function x(e,t,n,a=0,i=!1,s=4){if(n.values)return!0;const l=n.type,r=n.valueCount;let u=n.valueOffset,c=[];const h=o[l],g=8*h,w=r*h,d=r*o[l]*8;let p,I;const T=8===s?64:32,E=n.valueOffsets;if(d>T){if(w>(i?e.byteLength:e?e.byteLength-u+a:0))return n.offlineOffsetSize=[u,w],n.values=null,!1}if(d<=T){if(!t)if(T<=32)u>>>=32-d;else{const e=null!=E&&E.length?E[0]:u>>>0,t=null!=E&&E.length?E[1]:Math.round((u-e)/f);d<=32?(u=e>>>32-d,E[0]=u):(u=e*2**(32-d)+(t>>>32-d),E[0]=e,E[1]=t>>>32-d)}if(1===r&&g===T)c=[u];else if(64===T){const e=null!=E&&E.length?E[0]:u>>>0,t=null!=E&&E.length?E[1]:Math.round((u-e)/f);let n=e,a=32;for(I=1;I<=r;I++){const e=32-g*I%32;if(a<g){const i=n<<e>>>32-a,s=t<<32-a>>>32-a;n=t,c.push(i+s*2**(g-a)),a-=32-(g-a)}else c.push(n<<e>>>32-g),a-=g;0===a&&(a=32,n=t)}}else for(I=1;I<=r;I++){const e=32-g*I;c.push(u<<e>>>32-g)}}else{u-=a,i&&(u=0);for(let n=u;n<u+w;n+=h){switch(l){case 1:case 2:case 7:p=new DataView(e,n,1).getUint8(0);break;case 3:p=new DataView(e,n,2).getUint16(0,t);break;case 4:case 13:p=new DataView(e,n,4).getUint32(0,t);break;case 5:p=new DataView(e,n,4).getUint32(0,t)/new DataView(e,n+4,4).getUint32(0,t);break;case 6:p=new DataView(e,n,1).getInt8(0);break;case 8:p=new DataView(e,n,2).getInt16(0,t);break;case 9:p=new DataView(e,n,4).getInt32(0,t);break;case 10:p=new DataView(e,n,4).getInt32(0,t)/new DataView(e,n+4,4).getInt32(0,t);break;case 11:p=new DataView(e,n,4).getFloat32(0,t);break;case 12:p=new DataView(e,n,8).getFloat64(0,t);break;case 16:case 18:p=U(new DataView(e,n,8),0,t);break;case 17:p=v(new DataView(e,n,8),0,t);break;default:p=null}c.push(p)}}if(2===l){let e=\"\";const t=c;for(c=[],I=0;I<t.length;I++)0===t[I]&&\"\"!==e?(c.push(e),e=\"\"):e+=String.fromCharCode(t[I]);\"\"===e&&0!==c.length||c.push(e)}return n.values=c,!0}function b(e){var t,n;const a=e[0],i=I(a,\"TILEWIDTH\"),s=I(a,\"TILELENGTH\"),l=I(a,\"IMAGEWIDTH\"),r=I(a,\"IMAGELENGTH\"),o=I(a,\"BITSPERSAMPLE\"),f=I(a,\"SAMPLESPERPIXEL\"),h=null!=(t=I(a,\"SAMPLEFORMAT\"))?t:1,T=c(h,o),E=O(a),y=w(a,\"GDAL_NODATA\");let m;null!=y&&y.length&&(m=y.map((e=>parseFloat(e))),m.some((e=>isNaN(e)))&&(m=null));const A=null!=(n=I(a,\"COMPRESSION\"))?n:1;let S;switch(A){case 1:S=\"NONE\";break;case 2:case 3:case 4:case 32771:S=\"CCITT\";break;case 5:S=\"LZW\";break;case 6:case 7:S=\"JPEG\";break;case 32773:S=\"PACKBITS\";break;case 8:case 32946:S=\"DEFLATE\";break;case 34712:S=\"JPEG2000\";break;case 34887:S=\"LERC\";break;default:S=String(A)}let x=!0,b=\"\";u.has(A)||(x=!1,b+=\"unsupported tag compression \"+A),h>3&&(x=!1,b+=\"unsupported tag sampleFormat \"+h),o%8!=0&&(x=!1,b+=\"unsupported tag bitsPerSample \"+o);const D=p(a,\"GEOASCIIPARAMS\");let U;if(D){const e=D.split(\"|\").find((e=>e.indexOf(\"ESRI PE String = \")>-1)),t=e?e.replace(\"ESRI PE String = \",\"\"):\"\";U=t.startsWith(\"COMPD_CS\")||t.startsWith(\"PROJCS\")||t.startsWith(\"GEOGCS\")?{wkid:null,wkt:t}:null}const v=d(a,\"GEOTIEPOINTS\"),L=d(a,\"GEOPIXELSCALE\"),P=d(a,\"GEOTRANSMATRIX\"),N=a.has(\"GEOKEYDIRECTORY\")?a.get(\"GEOKEYDIRECTORY\").data:null;let G,R,C=!1;if(N){C=2===I(N,\"GTRasterTypeGeoKey\");const e=I(N,\"GTModelTypeGeoKey\");if(2===e){const e=I(N,\"GeographicTypeGeoKey\");e>=1024&&e<=32766&&(U={wkid:e})}else if(1===e){const e=I(N,\"ProjectedCSTypeGeoKey\");e>=1024&&e<=32766&&(U={wkid:e})}}if(L&&v&&v.length>=6?(G=[L[0],0,v[3]-v[0]*L[0],0,-Math.abs(L[1]),v[4]-v[1]*L[1]],C&&(G[2]-=.5*G[0]+.5*G[1],G[5]-=.5*G[3]+.5*G[4])):P&&16===P.length&&(G=C?[P[0],P[1],P[3]-.5*P[0],P[4],P[5],P[7]-.5*P[5]]:[P[0],P[1],P[3],P[4],P[5],P[7]]),G){const e=[{x:0,y:r},{x:0,y:0},{x:l,y:r},{x:l,y:0}];let t,n=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,s=Number.NEGATIVE_INFINITY;for(let l=0;l<e.length;l++)t=g(e[l],G),n=t.x>n?n:t.x,i=t.x<i?i:t.x,a=t.y>a?a:t.y,s=t.y<s?s:t.y;R={xmin:n,xmax:i,ymin:a,ymax:s,spatialReference:U}}else R={xmin:-.5,ymin:.5-r,xmax:l-.5,ymax:.5,spatialReference:U};const F=e.filter((e=>1===p(e,\"NEWSUBFILETYPE\")));let B,V,W,H,Y;if(F.length>0){B=Math.round(Math.log(l/I(F[0],\"IMAGEWIDTH\"))/Math.LN2);const e=F[F.length-1];V=Math.round(Math.log(l/I(e,\"IMAGEWIDTH\"))/Math.LN2),W=I(e,\"TILEWIDTH\"),H=I(e,\"TILELENGTH\")}W=V>0?W||i:null,H=V>0?H||s:null,i&&(Y=[{maxCol:Math.ceil(l/i)-1,maxRow:Math.ceil(r/s)-1,minRow:0,minCol:0}],F.forEach((e=>{Y.push({maxCol:Math.ceil(I(e,\"IMAGEWIDTH\")/I(e,\"TILEWIDTH\"))-1,maxRow:Math.ceil(I(e,\"IMAGELENGTH\")/I(e,\"TILELENGTH\"))-1,minRow:0,minCol:0})})));const _=p(e[0],\"GDAL_METADATA\"),K=M(_);return b+=\" \"+k({width:l,height:r,tileWidth:i,tileHeight:s,planes:f,ifds:e}),{width:l,height:r,tileWidth:i,tileHeight:s,planes:f,isBSQ:E,pixelType:T,compression:S,noData:m,isSupported:x,message:b,extent:R,affine:L?null:G,firstPyramidLevel:B,maximumPyramidLevel:V,pyramidBlockWidth:W,pyramidBlockHeight:H,tileBoundary:Y,metadata:K}}function O(e,t){const n=w(e,\"PLANARCONFIGURATION\");return n?2===n[0]:!!t&&t.isBSQ}function D(e){const{littleEndian:t,isBigTiff:n,firstIFD:a}=P(e);let i=a;const l=[];do{const a=N(e,t,i,0,s.TIFF_TAGS,n?8:4);if(!a.success)break;l.push(a.ifd),i=a.nextIFD}while(i>0);return{...b(l),littleEndian:t,isBigTiff:n,ifds:l}}function U(e,t,n){const a=e.getUint32(t,n),i=e.getUint32(t+4,n);return n?i*f+a:a*f+i}function v(e,t,n){let a=n?e.getInt32(t,n):e.getUint32(t,n),i=n?e.getUint32(t+4,n):e.getInt32(t+4,n);const s=(n?a:i)>=0?1:-1;n?a*=s:i*=s;return s*(n?i*f+a:a*f+i)}function L(e,t,n,a){return a?U(e,t,n):e.getUint32(t,n)}function P(e){const t=new DataView(e,0,16),n=t.getUint16(0,!1);let a=null;if(18761===n)a=!0;else{if(19789!==n)throw\"unexpected endianess byte\";a=!1}const i=t.getUint16(2,a);if(42!==i&&43!==i)throw\"unexpected tiff identifier\";let s=4;const l=43===i;if(l){const e=t.getUint16(s,a);if(s+=2,8!==e)throw\"unsupported bigtiff version\";if(0!==t.getUint16(s,a))throw\"unsupported bigtiff version\";s+=2}return{littleEndian:a,isBigTiff:l,firstIFD:L(t,s,a,l)}}function N(t,n,a,i=0,l=s.TIFF_TAGS,r=4){const o=T(t,n,a,i,l,r);let f;const u=o.ifd;if(u){if(s.ifdTags.forEach(((e,a)=>{u.has(a)&&(f=u.get(a),f.data=T(t,n,f.valueOffset-i,i,e).ifd)})),u.has(\"GEOKEYDIRECTORY\")){f=u.get(\"GEOKEYDIRECTORY\");const e=f.values;if(e&&e.length>4){const a=e[0]+\".\"+e[1]+\".\"+e[2];f.data=T(t,n,f.valueOffset+6-i,i,s.GEO_KEYS,2).ifd,f.data&&f.data.set(\"GEOTIFFVersion\",{id:0,type:2,valueCount:1,valueOffset:null,values:[a]})}}if(u.has(\"XMP\")){f=u.get(\"XMP\");const t=f.values;\"number\"==typeof t[0]&&7===f.type&&(f.values=[e(new Uint8Array(t))])}}return o}function k(e){const{width:t,height:n,tileHeight:a,tileWidth:i}=e,s=e.planes,l=i?i*a:t*n,r=I(e.ifds[0],\"BITSPERSAMPLE\");let o=\"\";return l*s>2**30/(r>8?r/8:1)&&(o=i?\"tiled tiff exceeding 1 gigabits per tile is not supported\":\"scanline tiff exceeding 1 gigabits is not supported\"),o}async function G(e,t){var n;const{headerInfo:a,ifd:i,offsets:s,sizes:l}=t,r=[];for(let h=0;h<s.length;h++){const t=await y(e,a.littleEndian,i,s[h],l[h]||e.byteLength);r.push(t)}const o=O(i,a),{pixelType:f,planes:u}=a,c=h(f),g=I(i,\"TILEWIDTH\"),w=I(i,\"TILELENGTH\"),d=null!=(n=I(i,\"COMPRESSION\"))?n:1,p=g*w;let T;const E=[];let m=r[0];const A=34887===d;for(let h=0;h<u;h++){if(T=new c(p),o&&A){m=r[h];for(let e=0;e<p;e++)T[e]=m[h][e+h]}else if(o||A&&!o)T=m.slice(p*h,p*(h+1));else for(let e=0;e<p;e++)T[e]=m[e*u+h];E.push(T)}const M=a.noData?a.noData[0]:null,x=a.metadata?a.metadata.statistics:null,b=x?x.map((e=>e.min)):null,D=x?x.map((e=>e.max)):null;let U,v;if(null!=M)if(U=new Uint8Array(p),Math.abs(M)>1e24)for(v=0;v<p;v++)Math.abs((E[0][v]-M)/M)<1e-6?U[v]=0:U[v]=1;else for(v=0;v<p;v++)E[0][v]===M?U[v]=0:U[v]=1;else b&&D&&t.applyMinMaxConstraint&&(U=S(E,b,D));return{pixelType:f,width:g,height:w,pixels:E,mask:U,noDataValue:M}}async function R(e,t=0,n){n=n||D(e);const{ifds:a,noData:i}=n;if(0===a.length)throw\"no valid image file directory\";const s=k(n);if(s)throw s;let l,r;const o=-1===t?a[a.length-1]:a[t],f=i?i[0]:null;if(r=n.tileWidth?await m(e,n,o):await A(e,n,o),null!==f){if(r.mask=new Uint8Array(r.width*r.height),Math.abs(f)>1e24)for(l=0;l<r.width*r.height;l++)Math.abs((r.pixels[0][l]-f)/f)<1e-6?r.mask[l]=0:r.mask[l]=1;else for(l=0;l<r.width*r.height;l++)r.pixels[0][l]===f?r.mask[l]=0:r.mask[l]=1;r.noDataValue=f}return r}export{R as decode,G as decodeTileOrStrip,b as getImageInfo,O as isBSQConfig,x as parseFieldValues,D as parseHeader,N as parseIFD,P as parseSignature};\n"]},"metadata":{},"sourceType":"module"}