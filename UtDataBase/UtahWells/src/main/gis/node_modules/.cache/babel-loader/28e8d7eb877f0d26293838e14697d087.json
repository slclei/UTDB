{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../../../chunks/tslib.es6.js\";\nimport \"../../../../../core/Logger.js\";\nimport \"../../../../../core/accessorSupport/ensureType.js\";\nimport \"../../../../../core/arrayUtils.js\";\nimport \"../../../../../core/has.js\";\nimport \"../../../../../core/accessorSupport/set.js\";\nimport { subclass as t } from \"../../../../../core/accessorSupport/decorators/subclass.js\";\nimport { generateGradient as i } from \"../../../../../renderers/support/heatmapUtils.js\";\nimport { BitmapTileContainer as r } from \"../../../engine/BitmapTileContainer.js\";\nimport s from \"./BaseTileRenderer.js\";\nimport { HeatmapSource as n } from \"./support/HeatmapSource.js\";\nlet o = class extends s {\n  constructor(e) {\n    super(e), this._intensityInfo = {\n      minPixelIntensity: 0,\n      maxPixelIntensity: 0\n    }, this.featuresView = {\n      attributeView: {\n        initialize: () => {},\n        requestUpdate: () => {}\n      },\n      requestRender: () => {}\n    }, this._container = new r(e.tileInfoView);\n  }\n\n  createTile(e) {\n    const t = this._container.createTile(e);\n\n    return this.tileInfoView.getTileCoords(t.bitmap, e), t.bitmap.resolution = this.tileInfoView.getTileResolution(e), t;\n  }\n\n  onConfigUpdate() {\n    const e = this.layer.renderer;\n\n    if (\"heatmap\" === e.type) {\n      const {\n        minPixelIntensity: t,\n        maxPixelIntensity: r\n      } = e;\n      this._intensityInfo.minPixelIntensity = t, this._intensityInfo.maxPixelIntensity = r, this._gradient = i(e.colorStops), this.tiles.forEach(e => {\n        const i = e.bitmap.source;\n        i && (i.minPixelIntensity = t, i.maxPixelIntensity = r, i.gradient = this._gradient, e.bitmap.invalidateTexture());\n      });\n    }\n  }\n\n  hitTest() {\n    return Promise.resolve([]);\n  }\n\n  install(e) {\n    e.addChild(this._container);\n  }\n\n  uninstall(e) {\n    this._container.removeAllChildren(), e.removeChild(this._container);\n  }\n\n  disposeTile(e) {\n    this._container.removeChild(e), e.destroy();\n  }\n\n  supportsRenderer(e) {\n    return e && \"heatmap\" === e.type;\n  }\n\n  onTileData(e) {\n    const t = this.tiles.get(e.tileKey);\n    if (!t) return;\n    const i = e.intensityInfo,\n          {\n      minPixelIntensity: r,\n      maxPixelIntensity: s\n    } = this._intensityInfo,\n          o = t.bitmap.source || new n();\n    o.intensities = i && i.matrix || null, o.minPixelIntensity = r, o.maxPixelIntensity = s, o.gradient = this._gradient, t.bitmap.source = o, this._container.addChild(t), this._container.requestRender(), this.requestUpdate();\n  }\n\n  onTileError(e) {\n    console.error(e);\n  }\n\n  lockGPUUploads() {}\n\n  unlockGPUUploads() {}\n\n  fetchResource(e, t) {\n    return console.error(e), Promise.reject();\n  }\n\n};\no = e([t(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")], o);\nconst a = o;\nexport { a as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js"],"names":["_","e","subclass","t","generateGradient","i","BitmapTileContainer","r","s","HeatmapSource","n","o","constructor","_intensityInfo","minPixelIntensity","maxPixelIntensity","featuresView","attributeView","initialize","requestUpdate","requestRender","_container","tileInfoView","createTile","getTileCoords","bitmap","resolution","getTileResolution","onConfigUpdate","layer","renderer","type","_gradient","colorStops","tiles","forEach","source","gradient","invalidateTexture","hitTest","Promise","resolve","install","addChild","uninstall","removeAllChildren","removeChild","disposeTile","destroy","supportsRenderer","onTileData","get","tileKey","intensityInfo","intensities","matrix","onTileError","console","error","lockGPUUploads","unlockGPUUploads","fetchResource","reject","a","default"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,oCAAlB;AAAuD,OAAM,+BAAN;AAAsC,OAAM,mDAAN;AAA0D,OAAM,mCAAN;AAA0C,OAAM,4BAAN;AAAmC,OAAM,4CAAN;AAAmD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,4DAAzB;AAAsF,SAAOC,gBAAgB,IAAIC,CAA3B,QAAiC,kDAAjC;AAAoF,SAAOC,mBAAmB,IAAIC,CAA9B,QAAoC,wCAApC;AAA6E,OAAOC,CAAP,MAAa,uBAAb;AAAqC,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,4BAA9B;AAA2D,IAAIC,CAAC,GAAC,cAAcH,CAAd,CAAe;AAACI,EAAAA,WAAW,CAACX,CAAD,EAAG;AAAC,UAAMA,CAAN,GAAS,KAAKY,cAAL,GAAoB;AAACC,MAAAA,iBAAiB,EAAC,CAAnB;AAAqBC,MAAAA,iBAAiB,EAAC;AAAvC,KAA7B,EAAuE,KAAKC,YAAL,GAAkB;AAACC,MAAAA,aAAa,EAAC;AAACC,QAAAA,UAAU,EAAC,MAAI,CAAE,CAAlB;AAAmBC,QAAAA,aAAa,EAAC,MAAI,CAAE;AAAvC,OAAf;AAAwDC,MAAAA,aAAa,EAAC,MAAI,CAAE;AAA5E,KAAzF,EAAuK,KAAKC,UAAL,GAAgB,IAAId,CAAJ,CAAMN,CAAC,CAACqB,YAAR,CAAvL;AAA6M;;AAAAC,EAAAA,UAAU,CAACtB,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKkB,UAAL,CAAgBE,UAAhB,CAA2BtB,CAA3B,CAAR;;AAAsC,WAAO,KAAKqB,YAAL,CAAkBE,aAAlB,CAAgCrB,CAAC,CAACsB,MAAlC,EAAyCxB,CAAzC,GAA4CE,CAAC,CAACsB,MAAF,CAASC,UAAT,GAAoB,KAAKJ,YAAL,CAAkBK,iBAAlB,CAAoC1B,CAApC,CAAhE,EAAuGE,CAA9G;AAAgH;;AAAAyB,EAAAA,cAAc,GAAE;AAAC,UAAM3B,CAAC,GAAC,KAAK4B,KAAL,CAAWC,QAAnB;;AAA4B,QAAG,cAAY7B,CAAC,CAAC8B,IAAjB,EAAsB;AAAC,YAAK;AAACjB,QAAAA,iBAAiB,EAACX,CAAnB;AAAqBY,QAAAA,iBAAiB,EAACR;AAAvC,UAA0CN,CAA/C;AAAiD,WAAKY,cAAL,CAAoBC,iBAApB,GAAsCX,CAAtC,EAAwC,KAAKU,cAAL,CAAoBE,iBAApB,GAAsCR,CAA9E,EAAgF,KAAKyB,SAAL,GAAe3B,CAAC,CAACJ,CAAC,CAACgC,UAAH,CAAhG,EAA+G,KAAKC,KAAL,CAAWC,OAAX,CAAoBlC,CAAC,IAAE;AAAC,cAAMI,CAAC,GAACJ,CAAC,CAACwB,MAAF,CAASW,MAAjB;AAAwB/B,QAAAA,CAAC,KAAGA,CAAC,CAACS,iBAAF,GAAoBX,CAApB,EAAsBE,CAAC,CAACU,iBAAF,GAAoBR,CAA1C,EAA4CF,CAAC,CAACgC,QAAF,GAAW,KAAKL,SAA5D,EAAsE/B,CAAC,CAACwB,MAAF,CAASa,iBAAT,EAAzE,CAAD;AAAwG,OAAxJ,CAA/G;AAA0Q;AAAC;;AAAAC,EAAAA,OAAO,GAAE;AAAC,WAAOC,OAAO,CAACC,OAAR,CAAgB,EAAhB,CAAP;AAA2B;;AAAAC,EAAAA,OAAO,CAACzC,CAAD,EAAG;AAACA,IAAAA,CAAC,CAAC0C,QAAF,CAAW,KAAKtB,UAAhB;AAA4B;;AAAAuB,EAAAA,SAAS,CAAC3C,CAAD,EAAG;AAAC,SAAKoB,UAAL,CAAgBwB,iBAAhB,IAAoC5C,CAAC,CAAC6C,WAAF,CAAc,KAAKzB,UAAnB,CAApC;AAAmE;;AAAA0B,EAAAA,WAAW,CAAC9C,CAAD,EAAG;AAAC,SAAKoB,UAAL,CAAgByB,WAAhB,CAA4B7C,CAA5B,GAA+BA,CAAC,CAAC+C,OAAF,EAA/B;AAA2C;;AAAAC,EAAAA,gBAAgB,CAAChD,CAAD,EAAG;AAAC,WAAOA,CAAC,IAAE,cAAYA,CAAC,CAAC8B,IAAxB;AAA6B;;AAAAmB,EAAAA,UAAU,CAACjD,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAK+B,KAAL,CAAWiB,GAAX,CAAelD,CAAC,CAACmD,OAAjB,CAAR;AAAkC,QAAG,CAACjD,CAAJ,EAAM;AAAO,UAAME,CAAC,GAACJ,CAAC,CAACoD,aAAV;AAAA,UAAwB;AAACvC,MAAAA,iBAAiB,EAACP,CAAnB;AAAqBQ,MAAAA,iBAAiB,EAACP;AAAvC,QAA0C,KAAKK,cAAvE;AAAA,UAAsFF,CAAC,GAACR,CAAC,CAACsB,MAAF,CAASW,MAAT,IAAiB,IAAI1B,CAAJ,EAAzG;AAA+GC,IAAAA,CAAC,CAAC2C,WAAF,GAAcjD,CAAC,IAAEA,CAAC,CAACkD,MAAL,IAAa,IAA3B,EAAgC5C,CAAC,CAACG,iBAAF,GAAoBP,CAApD,EAAsDI,CAAC,CAACI,iBAAF,GAAoBP,CAA1E,EAA4EG,CAAC,CAAC0B,QAAF,GAAW,KAAKL,SAA5F,EAAsG7B,CAAC,CAACsB,MAAF,CAASW,MAAT,GAAgBzB,CAAtH,EAAwH,KAAKU,UAAL,CAAgBsB,QAAhB,CAAyBxC,CAAzB,CAAxH,EAAoJ,KAAKkB,UAAL,CAAgBD,aAAhB,EAApJ,EAAoL,KAAKD,aAAL,EAApL;AAAyM;;AAAAqC,EAAAA,WAAW,CAACvD,CAAD,EAAG;AAACwD,IAAAA,OAAO,CAACC,KAAR,CAAczD,CAAd;AAAiB;;AAAA0D,EAAAA,cAAc,GAAE,CAAE;;AAAAC,EAAAA,gBAAgB,GAAE,CAAE;;AAAAC,EAAAA,aAAa,CAAC5D,CAAD,EAAGE,CAAH,EAAK;AAAC,WAAOsD,OAAO,CAACC,KAAR,CAAczD,CAAd,GAAiBuC,OAAO,CAACsB,MAAR,EAAxB;AAAyC;;AAA//C,CAArB;AAAshDnD,CAAC,GAACV,CAAC,CAAC,CAACE,CAAC,CAAC,iEAAD,CAAF,CAAD,EAAwEQ,CAAxE,CAAH;AAA8E,MAAMoD,CAAC,GAACpD,CAAR;AAAU,SAAOoD,CAAC,IAAIC,OAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/set.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{generateGradient as i}from\"../../../../../renderers/support/heatmapUtils.js\";import{BitmapTileContainer as r}from\"../../../engine/BitmapTileContainer.js\";import s from\"./BaseTileRenderer.js\";import{HeatmapSource as n}from\"./support/HeatmapSource.js\";let o=class extends s{constructor(e){super(e),this._intensityInfo={minPixelIntensity:0,maxPixelIntensity:0},this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new r(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if(\"heatmap\"===e.type){const{minPixelIntensity:t,maxPixelIntensity:r}=e;this._intensityInfo.minPixelIntensity=t,this._intensityInfo.maxPixelIntensity=r,this._gradient=i(e.colorStops),this.tiles.forEach((e=>{const i=e.bitmap.source;i&&(i.minPixelIntensity=t,i.maxPixelIntensity=r,i.gradient=this._gradient,e.bitmap.invalidateTexture())}))}}hitTest(){return Promise.resolve([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&\"heatmap\"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minPixelIntensity:r,maxPixelIntensity:s}=this._intensityInfo,o=t.bitmap.source||new n;o.intensities=i&&i.matrix||null,o.minPixelIntensity=r,o.maxPixelIntensity=s,o.gradient=this._gradient,t.bitmap.source=o,this._container.addChild(t),this._container.requestRender(),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}fetchResource(e,t){return console.error(e),Promise.reject()}};o=e([t(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")],o);const a=o;export{a as default};\n"]},"metadata":{},"sourceType":"module"}