{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../core/has.js\";\nimport { clamp as t } from \"../../core/mathUtils.js\";\nconst i = 2048,\n      h = 1.5,\n      e = 8;\n\nfunction n(i, h) {\n  const {\n    format: e,\n    quality: n,\n    rotation: o,\n    disableDecorations: a\n  } = i || {},\n        r = j(i, h.padding),\n        l = y(i, {\n    width: h.width - r.left - r.right,\n    height: h.height - r.top - r.bottom\n  }),\n        {\n    width: g,\n    height: f\n  } = p(i, l),\n        u = D(e),\n        d = v[u];\n  return {\n    format: u,\n    quality: t(null != n ? n : d, 0, 100),\n    area: l,\n    width: g,\n    height: f,\n    rotation: o,\n    disableDecorations: !!a,\n    ignoreBackground: !(!i || !i.ignoreBackground),\n    ignorePadding: !(!i || !i.ignorePadding)\n  };\n}\n\nfunction o(t, i) {\n  const h = n(t, i),\n        e = h.area,\n        o = h.width / e.width,\n        a = j(h, i.padding),\n        r = a.left + a.right,\n        l = a.top + a.bottom,\n        g = i.width - r,\n        f = i.height - l,\n        u = Math.floor(g * o + r),\n        d = Math.floor(f * o + l),\n        c = t && t.layers ? t.layers : [],\n        s = h.ignoreBackground,\n        w = h.ignorePadding;\n  return {\n    framebufferWidth: u,\n    framebufferHeight: d,\n    region: {\n      x: Math.floor(e.x * o) + a.left,\n      y: Math.floor(e.y * o) + a.top,\n      width: h.width,\n      height: h.height\n    },\n    format: h.format,\n    quality: h.quality,\n    rotation: h.rotation,\n    pixelRatio: o,\n    layers: c,\n    disableDecorations: h.disableDecorations,\n    ignoreBackground: s,\n    ignorePadding: w\n  };\n}\n\nfunction a(t, i, h, e) {\n  e.premultipliedAlpha && I(t), h.width = t.width, h.height = t.height;\n  const n = h.getContext(\"2d\");\n  n.putImageData(t, 0, 0), e.flipY && q(n);\n  const o = n.getImageData(0, 0, t.width, t.height),\n        a = r(h, i);\n  return h.width = 0, h.height = 0, {\n    dataUrl: a,\n    data: o\n  };\n}\n\nfunction r(t, i) {\n  const h = C[i.format],\n        e = i.quality / 100;\n  return t.toDataURL(h, e);\n}\n\nfunction l(i, h) {\n  const e = D(i),\n        n = v[e];\n  return {\n    format: e,\n    quality: t(null != h ? h : n, 0, 100)\n  };\n}\n\nfunction g(t, i) {\n  return i / Math.max(t[0], t[1]);\n}\n\nfunction f(t, i, h) {\n  if (!t || !i) throw new Error(\"Cannot construct image data without dimensions\");\n  if (m) try {\n    return new ImageData(t, i);\n  } catch (e) {\n    m = !1;\n  }\n  return s(t, i, h);\n}\n\nfunction u(t, i, h, e) {\n  if (!i || !h) throw new Error(\"Cannot construct image data without dimensions\");\n  if (m) try {\n    return new ImageData(t, i, h);\n  } catch (o) {\n    m = !1;\n  }\n  const n = s(i, h, e);\n  return n.data.set(t, 0), n;\n}\n\nfunction d(t, i, h) {\n  let e = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n  let n = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n  let o = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : t.width - e;\n  let a = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : t.height - n;\n  let r = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : !1;\n  const {\n    data: l\n  } = t,\n        {\n    width: g,\n    height: f,\n    data: u\n  } = i,\n        d = o / g,\n        c = a / f,\n        s = Math.ceil(d / 2),\n        w = Math.ceil(c / 2),\n        m = t.width;\n\n  for (let M = 0; M < f; M++) for (let t = 0; t < g; t++) {\n    const i = 4 * (t + (r ? f - M - 1 : M) * g);\n    let o = 0,\n        a = 0,\n        p = 0,\n        y = 0,\n        x = 0,\n        b = 0;\n    const j = (M + .5) * c;\n\n    for (let r = Math.floor(M * c); r < (M + 1) * c; r++) {\n      const i = Math.abs(j - (r + .5)) / w,\n            g = (t + .5) * d,\n            f = i * i;\n\n      for (let u = Math.floor(t * d); u < (t + 1) * d; u++) {\n        const t = Math.abs(g - (u + .5)) / s,\n              i = Math.sqrt(f + t * t);\n        if (i >= 1) continue;\n        let d = 2 * i * i * i - 3 * i * i + 1;\n        const c = 4 * (e + u + (n + r) * m);\n        b += d * l[c + 3], a += d, !h && l[c + 3] < 255 && (d = d * l[c + 3] / 255), p += d * l[c], y += d * l[c + 1], x += d * l[c + 2], o += d;\n      }\n    }\n\n    u[i] = p / o, u[i + 1] = y / o, u[i + 2] = x / o, u[i + 3] = b / a;\n  }\n\n  return i;\n}\n\nfunction c(t, n, o) {\n  if (!n) return t;\n  const {\n    framebufferWidth: a,\n    framebufferHeight: r,\n    pixelRatio: l,\n    region: g\n  } = t,\n        f = j(t, o),\n        u = f.left + f.right,\n        d = f.top + f.bottom,\n        c = a - u,\n        s = r - d,\n        w = Math.min(e, Math.min((i - u) / c, (i - d) / s));\n  return w < h ? t : { ...t,\n    framebufferWidth: Math.round(c * w) + u,\n    framebufferHeight: Math.round(s * w) + d,\n    pixelRatio: l * w,\n    resample: {\n      region: {\n        x: Math.round((g.x - f.left) * w) + f.left,\n        y: Math.round((g.y - f.top) * w) + f.top,\n        width: Math.round(g.width * w),\n        height: Math.round(g.height * w)\n      },\n      width: a,\n      height: r\n    }\n  };\n}\n\nfunction s(t, i, h) {\n  return h || (h = M()), h.getContext(\"2d\").createImageData(t, i);\n}\n\nlet w = null,\n    m = !0;\n\nfunction M() {\n  return w || (w = document.createElement(\"canvas\"), w.width = 1, w.height = 1), w;\n}\n\nfunction p(t, i) {\n  if (!t) return i;\n  const h = t.width,\n        e = t.height;\n  if (null != h && null != e) return {\n    width: Math.floor(h),\n    height: Math.floor(e)\n  };\n  if (null == h && null == e) return i;\n  const n = i.width / i.height;\n  return null == e ? {\n    width: Math.floor(h),\n    height: Math.floor(h / n)\n  } : {\n    width: Math.floor(e * n),\n    height: Math.floor(e)\n  };\n}\n\nfunction y(t, i) {\n  const h = {\n    x: 0,\n    y: 0,\n    width: i.width,\n    height: i.height\n  };\n\n  if (t && t.area) {\n    null != t.area.x && (h.x = Math.floor(t.area.x)), null != t.area.y && (h.y = Math.floor(t.area.y));\n    const e = null != t.area.width ? Math.floor(t.area.width) : null,\n          n = null != t.area.height ? Math.floor(t.area.height) : null;\n    if (h.width = i.width - h.x, h.height = i.height - h.y, null != e && null != n) h.width = Math.min(h.width, e), h.height = Math.min(h.height, n);else if (null == e && null != n) {\n      const t = Math.min(h.width, e);\n      h.height = t / h.width * h.height, h.width = t;\n    } else if (null != e && null == n) {\n      const t = Math.min(h.height, n);\n      h.width = t / h.height * h.width, h.height = t;\n    }\n  }\n\n  return x(b(h, t), i);\n}\n\nfunction x(t, i) {\n  const h = Math.floor(Math.max(t.x, 0)),\n        e = Math.floor(Math.max(t.y, 0)),\n        n = {\n    x: h,\n    y: e,\n    width: Math.floor(Math.min(t.width, i.width - h)),\n    height: Math.floor(Math.min(t.height, i.height - e))\n  },\n        o = n.width / n.height,\n        a = t.width / t.height;\n  if (a === o) return n;\n\n  if (a > o) {\n    const t = Math.floor(n.width / a),\n          i = n.height - t;\n    return {\n      x: n.x,\n      y: Math.floor(n.y + i / 2),\n      width: n.width,\n      height: t\n    };\n  }\n\n  const r = Math.floor(n.height * a),\n        l = n.width - r;\n  return {\n    x: Math.floor(n.x + l / 2),\n    y: n.y,\n    width: r,\n    height: n.height\n  };\n}\n\nfunction b(t, i) {\n  if (!i || null == i.width || null == i.height) return t;\n  const h = i.width / i.height,\n        e = t.width / t.height;\n  if (e === h) return t;\n\n  if (e < h) {\n    const i = Math.floor(t.height * h);\n    return t.x -= (i - t.width) / 2, t.width = i, t;\n  }\n\n  const n = Math.floor(t.width / h);\n  return t.y -= (n - t.height) / 2, t.height = n, t;\n}\n\nfunction j(t, i) {\n  return !i || t && t.ignorePadding ? B : i;\n}\n\nfunction D(t) {\n  switch (t) {\n    case \"png\":\n    case \"jpg\":\n    case \"jpeg\":\n      return t;\n\n    default:\n      return k;\n  }\n}\n\nfunction q(t) {\n  t.save(), t.globalCompositeOperation = \"copy\", t.scale(1, -1), t.translate(0, -t.canvas.height), t.drawImage(t.canvas, 0, 0), t.restore();\n}\n\nfunction I(t) {\n  const i = t.data,\n        h = i.length;\n\n  for (let e = 0; e < h; e += 4) {\n    const t = i[e + 3];\n\n    if (t > 0) {\n      const h = t / 255;\n      i[e + 0] = i[e + 0] / h, i[e + 1] = i[e + 1] / h, i[e + 2] = i[e + 2] / h;\n    }\n  }\n}\n\nconst C = {\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\"\n},\n      P = 98,\n      k = \"png\",\n      v = {\n  png: 100,\n  jpg: P,\n  jpeg: P\n},\n      B = {\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0\n};\nexport { n as completeUserSettings, f as createEmptyImageData, a as encodeResult, l as getFormatAndQuality, g as getMaximumResolutionScale, d as resampleHermite, c as screenshotSuperSampleSettings, r as toDataUrl, o as toRenderSettings, u as wrapImageData };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/support/screenshotUtils.js"],"names":["clamp","t","i","h","e","n","format","quality","rotation","o","disableDecorations","a","r","j","padding","l","y","width","left","right","height","top","bottom","g","f","p","u","D","d","v","area","ignoreBackground","ignorePadding","Math","floor","c","layers","s","w","framebufferWidth","framebufferHeight","region","x","pixelRatio","premultipliedAlpha","I","getContext","putImageData","flipY","q","getImageData","dataUrl","data","C","toDataURL","max","Error","m","ImageData","set","ceil","M","b","abs","sqrt","min","round","resample","createImageData","document","createElement","B","k","save","globalCompositeOperation","scale","translate","canvas","drawImage","restore","length","png","jpg","jpeg","P","completeUserSettings","createEmptyImageData","encodeResult","getFormatAndQuality","getMaximumResolutionScale","resampleHermite","screenshotSuperSampleSettings","toDataUrl","toRenderSettings","wrapImageData"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../core/has.js\";import{clamp as t}from\"../../core/mathUtils.js\";const i=2048,h=1.5,e=8;function n(i,h){const{format:e,quality:n,rotation:o,disableDecorations:a}=i||{},r=j(i,h.padding),l=y(i,{width:h.width-r.left-r.right,height:h.height-r.top-r.bottom}),{width:g,height:f}=p(i,l),u=D(e),d=v[u];return{format:u,quality:t(null!=n?n:d,0,100),area:l,width:g,height:f,rotation:o,disableDecorations:!!a,ignoreBackground:!(!i||!i.ignoreBackground),ignorePadding:!(!i||!i.ignorePadding)}}function o(t,i){const h=n(t,i),e=h.area,o=h.width/e.width,a=j(h,i.padding),r=a.left+a.right,l=a.top+a.bottom,g=i.width-r,f=i.height-l,u=Math.floor(g*o+r),d=Math.floor(f*o+l),c=t&&t.layers?t.layers:[],s=h.ignoreBackground,w=h.ignorePadding;return{framebufferWidth:u,framebufferHeight:d,region:{x:Math.floor(e.x*o)+a.left,y:Math.floor(e.y*o)+a.top,width:h.width,height:h.height},format:h.format,quality:h.quality,rotation:h.rotation,pixelRatio:o,layers:c,disableDecorations:h.disableDecorations,ignoreBackground:s,ignorePadding:w}}function a(t,i,h,e){e.premultipliedAlpha&&I(t),h.width=t.width,h.height=t.height;const n=h.getContext(\"2d\");n.putImageData(t,0,0),e.flipY&&q(n);const o=n.getImageData(0,0,t.width,t.height),a=r(h,i);return h.width=0,h.height=0,{dataUrl:a,data:o}}function r(t,i){const h=C[i.format],e=i.quality/100;return t.toDataURL(h,e)}function l(i,h){const e=D(i),n=v[e];return{format:e,quality:t(null!=h?h:n,0,100)}}function g(t,i){return i/Math.max(t[0],t[1])}function f(t,i,h){if(!t||!i)throw new Error(\"Cannot construct image data without dimensions\");if(m)try{return new ImageData(t,i)}catch(e){m=!1}return s(t,i,h)}function u(t,i,h,e){if(!i||!h)throw new Error(\"Cannot construct image data without dimensions\");if(m)try{return new ImageData(t,i,h)}catch(o){m=!1}const n=s(i,h,e);return n.data.set(t,0),n}function d(t,i,h,e=0,n=0,o=t.width-e,a=t.height-n,r=!1){const{data:l}=t,{width:g,height:f,data:u}=i,d=o/g,c=a/f,s=Math.ceil(d/2),w=Math.ceil(c/2),m=t.width;for(let M=0;M<f;M++)for(let t=0;t<g;t++){const i=4*(t+(r?f-M-1:M)*g);let o=0,a=0,p=0,y=0,x=0,b=0;const j=(M+.5)*c;for(let r=Math.floor(M*c);r<(M+1)*c;r++){const i=Math.abs(j-(r+.5))/w,g=(t+.5)*d,f=i*i;for(let u=Math.floor(t*d);u<(t+1)*d;u++){const t=Math.abs(g-(u+.5))/s,i=Math.sqrt(f+t*t);if(i>=1)continue;let d=2*i*i*i-3*i*i+1;const c=4*(e+u+(n+r)*m);b+=d*l[c+3],a+=d,!h&&l[c+3]<255&&(d=d*l[c+3]/255),p+=d*l[c],y+=d*l[c+1],x+=d*l[c+2],o+=d}}u[i]=p/o,u[i+1]=y/o,u[i+2]=x/o,u[i+3]=b/a}return i}function c(t,n,o){if(!n)return t;const{framebufferWidth:a,framebufferHeight:r,pixelRatio:l,region:g}=t,f=j(t,o),u=f.left+f.right,d=f.top+f.bottom,c=a-u,s=r-d,w=Math.min(e,Math.min((i-u)/c,(i-d)/s));return w<h?t:{...t,framebufferWidth:Math.round(c*w)+u,framebufferHeight:Math.round(s*w)+d,pixelRatio:l*w,resample:{region:{x:Math.round((g.x-f.left)*w)+f.left,y:Math.round((g.y-f.top)*w)+f.top,width:Math.round(g.width*w),height:Math.round(g.height*w)},width:a,height:r}}}function s(t,i,h){return h||(h=M()),h.getContext(\"2d\").createImageData(t,i)}let w=null,m=!0;function M(){return w||(w=document.createElement(\"canvas\"),w.width=1,w.height=1),w}function p(t,i){if(!t)return i;const h=t.width,e=t.height;if(null!=h&&null!=e)return{width:Math.floor(h),height:Math.floor(e)};if(null==h&&null==e)return i;const n=i.width/i.height;return null==e?{width:Math.floor(h),height:Math.floor(h/n)}:{width:Math.floor(e*n),height:Math.floor(e)}}function y(t,i){const h={x:0,y:0,width:i.width,height:i.height};if(t&&t.area){null!=t.area.x&&(h.x=Math.floor(t.area.x)),null!=t.area.y&&(h.y=Math.floor(t.area.y));const e=null!=t.area.width?Math.floor(t.area.width):null,n=null!=t.area.height?Math.floor(t.area.height):null;if(h.width=i.width-h.x,h.height=i.height-h.y,null!=e&&null!=n)h.width=Math.min(h.width,e),h.height=Math.min(h.height,n);else if(null==e&&null!=n){const t=Math.min(h.width,e);h.height=t/h.width*h.height,h.width=t}else if(null!=e&&null==n){const t=Math.min(h.height,n);h.width=t/h.height*h.width,h.height=t}}return x(b(h,t),i)}function x(t,i){const h=Math.floor(Math.max(t.x,0)),e=Math.floor(Math.max(t.y,0)),n={x:h,y:e,width:Math.floor(Math.min(t.width,i.width-h)),height:Math.floor(Math.min(t.height,i.height-e))},o=n.width/n.height,a=t.width/t.height;if(a===o)return n;if(a>o){const t=Math.floor(n.width/a),i=n.height-t;return{x:n.x,y:Math.floor(n.y+i/2),width:n.width,height:t}}const r=Math.floor(n.height*a),l=n.width-r;return{x:Math.floor(n.x+l/2),y:n.y,width:r,height:n.height}}function b(t,i){if(!i||null==i.width||null==i.height)return t;const h=i.width/i.height,e=t.width/t.height;if(e===h)return t;if(e<h){const i=Math.floor(t.height*h);return t.x-=(i-t.width)/2,t.width=i,t}const n=Math.floor(t.width/h);return t.y-=(n-t.height)/2,t.height=n,t}function j(t,i){return!i||t&&t.ignorePadding?B:i}function D(t){switch(t){case\"png\":case\"jpg\":case\"jpeg\":return t;default:return k}}function q(t){t.save(),t.globalCompositeOperation=\"copy\",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function I(t){const i=t.data,h=i.length;for(let e=0;e<h;e+=4){const t=i[e+3];if(t>0){const h=t/255;i[e+0]=i[e+0]/h,i[e+1]=i[e+1]/h,i[e+2]=i[e+2]/h}}}const C={png:\"image/png\",jpg:\"image/jpeg\",jpeg:\"image/jpeg\"},P=98,k=\"png\",v={png:100,jpg:P,jpeg:P},B={top:0,right:0,bottom:0,left:0};export{n as completeUserSettings,f as createEmptyImageData,a as encodeResult,l as getFormatAndQuality,g as getMaximumResolutionScale,d as resampleHermite,c as screenshotSuperSampleSettings,r as toDataUrl,o as toRenderSettings,u as wrapImageData};\n"]},"metadata":{},"sourceType":"module"}