{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { pt2px as e } from \"../../../../core/screenUtils.js\";\n\nfunction t(t) {\n  const o = s(t),\n        r = n(o),\n        l = 2 * r,\n        u = Math.round(e(t.maxPathLength) / l) + 1,\n        p = r,\n        c = 10,\n        h = i(t),\n        f = a(t),\n        {\n    flowSpeed: d,\n    trailLength: g,\n    density: m\n  } = t;\n  return {\n    lineRenderWidth: o,\n    segmentLength: l,\n    verticesPerLine: u,\n    lineCollisionWidth: p,\n    lineSpacing: c,\n    lineColor: h,\n    lineOpacity: f,\n    lineSpeed: d,\n    fadeDuration: g,\n    density: m,\n    smoothing: e(t.smoothing),\n    velocityScale: \"flow-from\" === t.flowRepresentation ? 1 : -1,\n    minWeightThreshold: .001,\n    minSpeedThreshold: .001,\n    maxTurnAngle: 1,\n    mergeLines: !0,\n    interpolate: !0,\n    profile: !1\n  };\n}\n\nfunction n(e) {\n  return \"constant\" === e.kind ? e.value[0] : e.values[e.values.length - 1];\n}\n\nfunction o(e) {\n  const t = e.toRgba();\n  return [t[0] / 255, t[1] / 255, t[2] / 255, t[3]];\n}\n\nfunction s(t) {\n  if (!t.hasVisualVariables(\"size\")) return {\n    kind: \"constant\",\n    value: [e(t.trailWidth)]\n  };\n  const n = t.getVisualVariablesForType(\"size\")[0],\n        o = [],\n        s = [];\n  let i;\n\n  if (n.stops) {\n    for (const e of n.stops) o.push(e.value), s.push(e.size);\n\n    i = n.stops.length;\n  } else o.push(n.minDataValue, n.maxDataValue), s.push(n.minSize, n.maxSize), i = 2;\n\n  return {\n    kind: \"ramp\",\n    stops: o,\n    values: s,\n    count: i\n  };\n}\n\nfunction i(e) {\n  if (!e.hasVisualVariables(\"color\")) return {\n    kind: \"constant\",\n    value: o(e.color)\n  };\n  const t = e.getVisualVariablesForType(\"color\")[0],\n        n = [],\n        s = [];\n\n  for (const i of t.stops) n.push(i.value), Array.prototype.push.apply(s, o(i.color));\n\n  return {\n    kind: \"ramp\",\n    stops: n,\n    values: s,\n    count: t.stops.length\n  };\n}\n\nfunction a(e) {\n  if (!e.hasVisualVariables(\"opacity\")) return {\n    kind: \"constant\",\n    value: [1]\n  };\n  const t = e.getVisualVariablesForType(\"opacity\")[0],\n        n = [],\n        o = [];\n\n  for (const s of t.stops) n.push(s.value), o.push(s.opacity);\n\n  return {\n    kind: \"ramp\",\n    stops: n,\n    values: o,\n    count: t.stops.length\n  };\n}\n\nexport { t as createFlowRendererSettings };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/flow/flowRendererUtils.js"],"names":["pt2px","e","t","o","s","r","n","l","u","Math","round","maxPathLength","p","c","h","i","f","a","flowSpeed","d","trailLength","g","density","m","lineRenderWidth","segmentLength","verticesPerLine","lineCollisionWidth","lineSpacing","lineColor","lineOpacity","lineSpeed","fadeDuration","smoothing","velocityScale","flowRepresentation","minWeightThreshold","minSpeedThreshold","maxTurnAngle","mergeLines","interpolate","profile","kind","value","values","length","toRgba","hasVisualVariables","trailWidth","getVisualVariablesForType","stops","push","size","minDataValue","maxDataValue","minSize","maxSize","count","color","Array","prototype","apply","opacity","createFlowRendererSettings"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{pt2px as e}from\"../../../../core/screenUtils.js\";function t(t){const o=s(t),r=n(o),l=2*r,u=Math.round(e(t.maxPathLength)/l)+1,p=r,c=10,h=i(t),f=a(t),{flowSpeed:d,trailLength:g,density:m}=t;return{lineRenderWidth:o,segmentLength:l,verticesPerLine:u,lineCollisionWidth:p,lineSpacing:c,lineColor:h,lineOpacity:f,lineSpeed:d,fadeDuration:g,density:m,smoothing:e(t.smoothing),velocityScale:\"flow-from\"===t.flowRepresentation?1:-1,minWeightThreshold:.001,minSpeedThreshold:.001,maxTurnAngle:1,mergeLines:!0,interpolate:!0,profile:!1}}function n(e){return\"constant\"===e.kind?e.value[0]:e.values[e.values.length-1]}function o(e){const t=e.toRgba();return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function s(t){if(!t.hasVisualVariables(\"size\"))return{kind:\"constant\",value:[e(t.trailWidth)]};const n=t.getVisualVariablesForType(\"size\")[0],o=[],s=[];let i;if(n.stops){for(const e of n.stops)o.push(e.value),s.push(e.size);i=n.stops.length}else o.push(n.minDataValue,n.maxDataValue),s.push(n.minSize,n.maxSize),i=2;return{kind:\"ramp\",stops:o,values:s,count:i}}function i(e){if(!e.hasVisualVariables(\"color\"))return{kind:\"constant\",value:o(e.color)};const t=e.getVisualVariablesForType(\"color\")[0],n=[],s=[];for(const i of t.stops)n.push(i.value),Array.prototype.push.apply(s,o(i.color));return{kind:\"ramp\",stops:n,values:s,count:t.stops.length}}function a(e){if(!e.hasVisualVariables(\"opacity\"))return{kind:\"constant\",value:[1]};const t=e.getVisualVariablesForType(\"opacity\")[0],n=[],o=[];for(const s of t.stops)n.push(s.value),o.push(s.opacity);return{kind:\"ramp\",stops:n,values:o,count:t.stops.length}}export{t as createFlowRendererSettings};\n"]},"metadata":{},"sourceType":"module"}