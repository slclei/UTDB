{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { StyleLayerType as e } from \"./StyleDefinition.js\";\nimport { CircleStyleLayer as t, SymbolStyleLayer as r, LineStyleLayer as i, FillStyleLayer as s, BackgroundStyleLayer as a } from \"./StyleLayer.js\";\n\nclass l {\n  constructor(t) {\n    if (this._style = t, this.backgroundBucketIds = [], this._uidToLayer = new Map(), this._layerByName = {}, this._runningId = 0, t.layers || (t.layers = []), this.version = parseFloat(t.version), this.layers = t.layers.map((e, t, r) => this._create(e, t, r)), this.layers) {\n      let t;\n\n      for (let r = 0; r < this.layers.length; r++) t = this.layers[r], this._layerByName[t.id] = t, this._uidToLayer.set(t.uid, t), t.type === e.BACKGROUND && this.backgroundBucketIds.push(t.id);\n    }\n\n    this._identifyRefLayers();\n  }\n\n  isPainterDataDriven(e) {\n    const t = this._layerByName[e];\n    return !!t && t.isPainterDataDriven();\n  }\n\n  getStyleLayerId(e) {\n    return e >= this.layers.length ? null : this.layers[e].id;\n  }\n\n  getStyleLayerByUID(e) {\n    const t = this._uidToLayer.get(e);\n\n    return null != t ? t : null;\n  }\n\n  getStyleLayerIndex(e) {\n    const t = this._layerByName[e];\n    return t ? this.layers.indexOf(t) : -1;\n  }\n\n  setStyleLayer(e, t) {\n    if (!e || !e.id) return;\n    const r = this._style;\n    null != t && t >= this.layers.length && (t = this.layers.length - 1);\n    let i,\n        s = !0;\n    const a = this._layerByName[e.id];\n\n    if (a) {\n      const y = this.layers.indexOf(a);\n      t || (t = y), t === y ? (s = !1, i = l._recreateLayer(e, a), this.layers[t] = i, r.layers[t] = e) : (this.layers.splice(y, 1), r.layers.splice(y, 1), i = this._create(e, t, this.layers), this.layers.splice(t, 0, i), r.layers.splice(t, 0, e));\n    } else i = this._create(e, t, this.layers), !t || t >= this.layers.length ? (this.layers.push(i), r.layers.push(e)) : (this.layers.splice(t, 0, i), r.layers.splice(t, 0, e));\n\n    this._layerByName[e.id] = i, this._uidToLayer.set(i.uid, i), s && this._recomputeZValues(), this._identifyRefLayers();\n  }\n\n  getStyleLayer(e) {\n    const t = this._layerByName[e];\n    return t ? {\n      type: t.typeName,\n      id: t.id,\n      source: t.source,\n      \"source-layer\": t.sourceLayer,\n      minzoom: t.minzoom,\n      maxzoom: t.maxzoom,\n      filter: t.filter,\n      layout: t.layout,\n      paint: t.paint\n    } : null;\n  }\n\n  deleteStyleLayer(e) {\n    const t = this._layerByName[e];\n\n    if (t) {\n      delete this._layerByName[e], this._uidToLayer.delete(t.uid);\n      const r = this.layers.indexOf(t);\n      this.layers.splice(r, 1), this._style.layers.splice(r, 1), this._recomputeZValues(), this._identifyRefLayers();\n    }\n  }\n\n  getLayerById(e) {\n    return this._layerByName[e];\n  }\n\n  getLayoutProperties(e) {\n    const t = this._layerByName[e];\n    return t ? t.layout : null;\n  }\n\n  getPaintProperties(e) {\n    const t = this._layerByName[e];\n    return t ? t.paint : null;\n  }\n\n  setPaintProperties(e, t) {\n    const r = this._layerByName[e];\n    if (!r) return;\n\n    const i = {\n      type: r.typeName,\n      id: r.id,\n      source: r.source,\n      \"source-layer\": r.sourceLayer,\n      minzoom: r.minzoom,\n      maxzoom: r.maxzoom,\n      filter: r.filter,\n      layout: r.layout,\n      paint: t\n    },\n          s = l._recreateLayer(i, r),\n          a = this.layers.indexOf(r);\n\n    this.layers[a] = s, this._style.layers[a].paint = t, this._layerByName[r.id] = s, this._uidToLayer.set(r.uid, s);\n  }\n\n  setLayoutProperties(e, t) {\n    const r = this._layerByName[e];\n    if (!r) return;\n\n    const i = {\n      type: r.typeName,\n      id: r.id,\n      source: r.source,\n      \"source-layer\": r.sourceLayer,\n      minzoom: r.minzoom,\n      maxzoom: r.maxzoom,\n      filter: r.filter,\n      layout: t,\n      paint: r.paint\n    },\n          s = l._recreateLayer(i, r),\n          a = this.layers.indexOf(r);\n\n    this.layers[a] = s, this._style.layers[a].layout = t, this._layerByName[r.id] = s, this._uidToLayer.set(r.uid, s);\n  }\n\n  setStyleLayerVisibility(e, t) {\n    const r = this._layerByName[e];\n    if (!r) return;\n    const i = r.layout || {};\n    i.visibility = t;\n\n    const s = {\n      type: r.typeName,\n      id: r.id,\n      source: r.source,\n      \"source-layer\": r.sourceLayer,\n      minzoom: r.minzoom,\n      maxzoom: r.maxzoom,\n      filter: r.filter,\n      layout: i,\n      paint: r.paint\n    },\n          a = l._recreateLayer(s, r),\n          y = this.layers.indexOf(r);\n\n    this.layers[y] = a, this._style.layers[y].layout = i, this._layerByName[r.id] = a, this._uidToLayer.set(r.uid, a);\n  }\n\n  getStyleLayerVisibility(e) {\n    var t;\n    const r = this._layerByName[e];\n    if (!r) return \"none\";\n    const i = r.layout;\n    return null != (t = null == i ? void 0 : i.visibility) ? t : \"visible\";\n  }\n\n  _recomputeZValues() {\n    const e = this.layers,\n          t = 1 / (e.length + 1);\n\n    for (let r = 0; r < e.length; r++) e[r].z = 1 - (1 + r) * t;\n  }\n\n  _identifyRefLayers() {\n    const t = [],\n          r = [];\n    let i = 0;\n\n    for (const l of this.layers) {\n      const y = l.layout;\n\n      if (l.type === e.FILL) {\n        var s;\n        const e = l;\n        let r = l.source + \"|\" + l.sourceLayer;\n        r += null != (s = \"|\" + (null == y ? void 0 : y.visibility)) ? s : \"\", r += \"|\" + l.minzoom, r += \"|\" + l.maxzoom, r += \"|\" + JSON.stringify(l.filter), (e.hasDataDrivenFill || e.hasDataDrivenOutline) && (r += \"|\" + i), t.push({\n          key: r,\n          layer: l\n        });\n      } else if (l.type === e.LINE) {\n        var a;\n        const e = l;\n        let t = l.source + \"|\" + l.sourceLayer;\n        t += null != (a = \"|\" + (null == y ? void 0 : y.visibility)) ? a : \"\", t += \"|\" + l.minzoom, t += \"|\" + l.maxzoom, t += \"|\" + JSON.stringify(l.filter), t += \"|\" + (void 0 !== y ? y[\"line-cap\"] : \"\"), t += \"|\" + (void 0 !== y ? y[\"line-join\"] : \"\"), e.hasDataDrivenLine && (t += \"|\" + i), r.push({\n          key: t,\n          layer: l\n        });\n      }\n\n      ++i;\n    }\n\n    this._assignRefLayers(t), this._assignRefLayers(r);\n  }\n\n  _assignRefLayers(t) {\n    let r, i;\n    t.sort((e, t) => e.key < t.key ? -1 : e.key > t.key ? 1 : 0);\n    const s = t.length;\n\n    for (let a = 0; a < s; a++) {\n      const l = t[a];\n      if (l.key === r) l.layer.refLayerId = i;else if (r = l.key, i = l.layer.id, l.layer.type === e.FILL) {\n        if (!l.layer.getPaintProperty(\"fill-outline-color\")) for (let e = a + 1; e < s; e++) {\n          const s = t[e];\n          if (s.key !== r) break;\n\n          if (s.layer.getPaintProperty(\"fill-outline-color\")) {\n            t[a] = s, t[e] = l, i = s.layer.id;\n            break;\n          }\n        }\n      } else if (l.layer.type === e.LINE) {\n        let e = l.layer;\n\n        for (let y = a + 1; y < s; y++) {\n          const s = t[y];\n          if (s.key !== r) break;\n          const n = s.layer;\n          (e.canUseThinTessellation && !n.canUseThinTessellation || !e.canUseThinTessellation && (n.getPaintProperty(\"line-pattern\") || n.getPaintProperty(\"line-dasharray\"))) && (e = n, t[a] = s, t[y] = l, i = s.layer.id);\n        }\n      }\n    }\n  }\n\n  _create(l, y, n) {\n    const o = 1 - (1 + y) * (1 / (n.length + 1)),\n          u = this._runningId++;\n\n    switch (l.type) {\n      case \"background\":\n        return new a(e.BACKGROUND, l, o, u);\n\n      case \"fill\":\n        return new s(e.FILL, l, o, u);\n\n      case \"line\":\n        return new i(e.LINE, l, o, u);\n\n      case \"symbol\":\n        return new r(e.SYMBOL, l, o, u);\n\n      case \"raster\":\n        throw new Error(\"Unsupported vector tile raster layer\");\n\n      case \"circle\":\n        return new t(e.CIRCLE, l, o, u);\n    }\n\n    throw new Error(\"Unknown vector tile layer\");\n  }\n\n  static _recreateLayer(l, y) {\n    switch (l.type) {\n      case \"background\":\n        return new a(e.BACKGROUND, l, y.z, y.uid);\n\n      case \"fill\":\n        return new s(e.FILL, l, y.z, y.uid);\n\n      case \"line\":\n        return new i(e.LINE, l, y.z, y.uid);\n\n      case \"symbol\":\n        return new r(e.SYMBOL, l, y.z, y.uid);\n\n      case \"raster\":\n        throw new Error(\"Unsupported vector tile raster layer\");\n\n      case \"circle\":\n        return new t(e.CIRCLE, l, y.z, y.uid);\n    }\n  }\n\n}\n\nexport { l as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleRepository.js"],"names":["StyleLayerType","e","CircleStyleLayer","t","SymbolStyleLayer","r","LineStyleLayer","i","FillStyleLayer","s","BackgroundStyleLayer","a","l","constructor","_style","backgroundBucketIds","_uidToLayer","Map","_layerByName","_runningId","layers","version","parseFloat","map","_create","length","id","set","uid","type","BACKGROUND","push","_identifyRefLayers","isPainterDataDriven","getStyleLayerId","getStyleLayerByUID","get","getStyleLayerIndex","indexOf","setStyleLayer","y","_recreateLayer","splice","_recomputeZValues","getStyleLayer","typeName","source","sourceLayer","minzoom","maxzoom","filter","layout","paint","deleteStyleLayer","delete","getLayerById","getLayoutProperties","getPaintProperties","setPaintProperties","setLayoutProperties","setStyleLayerVisibility","visibility","getStyleLayerVisibility","z","FILL","JSON","stringify","hasDataDrivenFill","hasDataDrivenOutline","key","layer","LINE","hasDataDrivenLine","_assignRefLayers","sort","refLayerId","getPaintProperty","n","canUseThinTessellation","o","u","SYMBOL","Error","CIRCLE","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{StyleLayerType as e}from\"./StyleDefinition.js\";import{CircleStyleLayer as t,SymbolStyleLayer as r,LineStyleLayer as i,FillStyleLayer as s,BackgroundStyleLayer as a}from\"./StyleLayer.js\";class l{constructor(t){if(this._style=t,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,t.layers||(t.layers=[]),this.version=parseFloat(t.version),this.layers=t.layers.map(((e,t,r)=>this._create(e,t,r))),this.layers){let t;for(let r=0;r<this.layers.length;r++)t=this.layers[r],this._layerByName[t.id]=t,this._uidToLayer.set(t.uid,t),t.type===e.BACKGROUND&&this.backgroundBucketIds.push(t.id)}this._identifyRefLayers()}isPainterDataDriven(e){const t=this._layerByName[e];return!!t&&t.isPainterDataDriven()}getStyleLayerId(e){return e>=this.layers.length?null:this.layers[e].id}getStyleLayerByUID(e){const t=this._uidToLayer.get(e);return null!=t?t:null}getStyleLayerIndex(e){const t=this._layerByName[e];return t?this.layers.indexOf(t):-1}setStyleLayer(e,t){if(!e||!e.id)return;const r=this._style;null!=t&&t>=this.layers.length&&(t=this.layers.length-1);let i,s=!0;const a=this._layerByName[e.id];if(a){const y=this.layers.indexOf(a);t||(t=y),t===y?(s=!1,i=l._recreateLayer(e,a),this.layers[t]=i,r.layers[t]=e):(this.layers.splice(y,1),r.layers.splice(y,1),i=this._create(e,t,this.layers),this.layers.splice(t,0,i),r.layers.splice(t,0,e))}else i=this._create(e,t,this.layers),!t||t>=this.layers.length?(this.layers.push(i),r.layers.push(e)):(this.layers.splice(t,0,i),r.layers.splice(t,0,e));this._layerByName[e.id]=i,this._uidToLayer.set(i.uid,i),s&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(e){const t=this._layerByName[e];return t?{type:t.typeName,id:t.id,source:t.source,\"source-layer\":t.sourceLayer,minzoom:t.minzoom,maxzoom:t.maxzoom,filter:t.filter,layout:t.layout,paint:t.paint}:null}deleteStyleLayer(e){const t=this._layerByName[e];if(t){delete this._layerByName[e],this._uidToLayer.delete(t.uid);const r=this.layers.indexOf(t);this.layers.splice(r,1),this._style.layers.splice(r,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(e){return this._layerByName[e]}getLayoutProperties(e){const t=this._layerByName[e];return t?t.layout:null}getPaintProperties(e){const t=this._layerByName[e];return t?t.paint:null}setPaintProperties(e,t){const r=this._layerByName[e];if(!r)return;const i={type:r.typeName,id:r.id,source:r.source,\"source-layer\":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:r.layout,paint:t},s=l._recreateLayer(i,r),a=this.layers.indexOf(r);this.layers[a]=s,this._style.layers[a].paint=t,this._layerByName[r.id]=s,this._uidToLayer.set(r.uid,s)}setLayoutProperties(e,t){const r=this._layerByName[e];if(!r)return;const i={type:r.typeName,id:r.id,source:r.source,\"source-layer\":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:t,paint:r.paint},s=l._recreateLayer(i,r),a=this.layers.indexOf(r);this.layers[a]=s,this._style.layers[a].layout=t,this._layerByName[r.id]=s,this._uidToLayer.set(r.uid,s)}setStyleLayerVisibility(e,t){const r=this._layerByName[e];if(!r)return;const i=r.layout||{};i.visibility=t;const s={type:r.typeName,id:r.id,source:r.source,\"source-layer\":r.sourceLayer,minzoom:r.minzoom,maxzoom:r.maxzoom,filter:r.filter,layout:i,paint:r.paint},a=l._recreateLayer(s,r),y=this.layers.indexOf(r);this.layers[y]=a,this._style.layers[y].layout=i,this._layerByName[r.id]=a,this._uidToLayer.set(r.uid,a)}getStyleLayerVisibility(e){var t;const r=this._layerByName[e];if(!r)return\"none\";const i=r.layout;return null!=(t=null==i?void 0:i.visibility)?t:\"visible\"}_recomputeZValues(){const e=this.layers,t=1/(e.length+1);for(let r=0;r<e.length;r++)e[r].z=1-(1+r)*t}_identifyRefLayers(){const t=[],r=[];let i=0;for(const l of this.layers){const y=l.layout;if(l.type===e.FILL){var s;const e=l;let r=l.source+\"|\"+l.sourceLayer;r+=null!=(s=\"|\"+(null==y?void 0:y.visibility))?s:\"\",r+=\"|\"+l.minzoom,r+=\"|\"+l.maxzoom,r+=\"|\"+JSON.stringify(l.filter),(e.hasDataDrivenFill||e.hasDataDrivenOutline)&&(r+=\"|\"+i),t.push({key:r,layer:l})}else if(l.type===e.LINE){var a;const e=l;let t=l.source+\"|\"+l.sourceLayer;t+=null!=(a=\"|\"+(null==y?void 0:y.visibility))?a:\"\",t+=\"|\"+l.minzoom,t+=\"|\"+l.maxzoom,t+=\"|\"+JSON.stringify(l.filter),t+=\"|\"+(void 0!==y?y[\"line-cap\"]:\"\"),t+=\"|\"+(void 0!==y?y[\"line-join\"]:\"\"),e.hasDataDrivenLine&&(t+=\"|\"+i),r.push({key:t,layer:l})}++i}this._assignRefLayers(t),this._assignRefLayers(r)}_assignRefLayers(t){let r,i;t.sort(((e,t)=>e.key<t.key?-1:e.key>t.key?1:0));const s=t.length;for(let a=0;a<s;a++){const l=t[a];if(l.key===r)l.layer.refLayerId=i;else if(r=l.key,i=l.layer.id,l.layer.type===e.FILL){if(!l.layer.getPaintProperty(\"fill-outline-color\"))for(let e=a+1;e<s;e++){const s=t[e];if(s.key!==r)break;if(s.layer.getPaintProperty(\"fill-outline-color\")){t[a]=s,t[e]=l,i=s.layer.id;break}}}else if(l.layer.type===e.LINE){let e=l.layer;for(let y=a+1;y<s;y++){const s=t[y];if(s.key!==r)break;const n=s.layer;(e.canUseThinTessellation&&!n.canUseThinTessellation||!e.canUseThinTessellation&&(n.getPaintProperty(\"line-pattern\")||n.getPaintProperty(\"line-dasharray\")))&&(e=n,t[a]=s,t[y]=l,i=s.layer.id)}}}}_create(l,y,n){const o=1-(1+y)*(1/(n.length+1)),u=this._runningId++;switch(l.type){case\"background\":return new a(e.BACKGROUND,l,o,u);case\"fill\":return new s(e.FILL,l,o,u);case\"line\":return new i(e.LINE,l,o,u);case\"symbol\":return new r(e.SYMBOL,l,o,u);case\"raster\":throw new Error(\"Unsupported vector tile raster layer\");case\"circle\":return new t(e.CIRCLE,l,o,u)}throw new Error(\"Unknown vector tile layer\")}static _recreateLayer(l,y){switch(l.type){case\"background\":return new a(e.BACKGROUND,l,y.z,y.uid);case\"fill\":return new s(e.FILL,l,y.z,y.uid);case\"line\":return new i(e.LINE,l,y.z,y.uid);case\"symbol\":return new r(e.SYMBOL,l,y.z,y.uid);case\"raster\":throw new Error(\"Unsupported vector tile raster layer\");case\"circle\":return new t(e.CIRCLE,l,y.z,y.uid)}}}export{l as default};\n"]},"metadata":{},"sourceType":"module"}