{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isExtent as t, isPolygon as i } from \"../../../geometry/support/jsonUtils.js\";\nimport { CurveHelper as e, PIXEL_TOLERANCE as s } from \"../CurveHelper.js\";\nimport { GeometricEffectDonutMethod as h, GeometricEffectOffsetMethod as n } from \"../enums.js\";\n\nclass r {\n  static local() {\n    return null === r.instance && (r.instance = new r()), r.instance;\n  }\n\n  execute(t, i, e, s) {\n    return new m(t, i, e);\n  }\n\n}\n\nr.instance = null;\n\nclass m {\n  constructor(t, i, r) {\n    switch (this._inputGeometries = t, this._curveHelper = new e(), this._width = (void 0 !== i.width ? i.width : 2) * r, i.method) {\n      case h.Mitered:\n      default:\n        this._method = n.Mitered;\n        break;\n\n      case h.Bevelled:\n        this._method = n.Bevelled;\n        break;\n\n      case h.Rounded:\n      case h.TrueBuffer:\n        this._method = n.Rounded;\n        break;\n\n      case h.Square:\n        this._method = n.Square;\n    }\n\n    this._option = i.option, this._offsetFlattenError = s * r;\n  }\n\n  next() {\n    let e = this._inputGeometries.next();\n\n    for (; e;) {\n      if (t(e) && this._width > 0) {\n        if (Math.min(e.xmax - e.xmin, e.ymax - e.ymin) - 2 * this._width < 0) return e;\n        const t = [];\n        return t.push([[e.xmin, e.ymin], [e.xmin, e.ymax], [e.xmax, e.ymax], [e.xmax, e.ymin], [e.xmin, e.ymin]]), t.push([[e.xmin + this._width, e.ymin + this._width], [e.xmax - this._width, e.ymin + this._width], [e.xmax - this._width, e.ymax - this._width], [e.xmin + this._width, e.ymax - this._width], [e.xmin + this._width, e.ymin + this._width]]), {\n          rings: t\n        };\n      }\n\n      if (i(e) && this._width > 0) {\n        const t = [];\n\n        for (const i of e.rings) {\n          const e = this._curveHelper.calculatePathLength(i),\n                s = this._curveHelper.offset(i, this._width, this._method, 4, this._offsetFlattenError);\n\n          s && (e < 0 && s.reverse(), t.push(s));\n        }\n\n        if (t.length) return {\n          rings: t\n        };\n      }\n\n      e = this._inputGeometries.next();\n    }\n\n    return null;\n  }\n\n}\n\nexport { r as EffectDonut };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/effects/EffectDonut.js"],"names":["isExtent","t","isPolygon","i","CurveHelper","e","PIXEL_TOLERANCE","s","GeometricEffectDonutMethod","h","GeometricEffectOffsetMethod","n","r","local","instance","execute","m","constructor","_inputGeometries","_curveHelper","_width","width","method","Mitered","_method","Bevelled","Rounded","TrueBuffer","Square","_option","option","_offsetFlattenError","next","Math","min","xmax","xmin","ymax","ymin","push","rings","calculatePathLength","offset","reverse","length","EffectDonut"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isExtent as t,isPolygon as i}from\"../../../geometry/support/jsonUtils.js\";import{CurveHelper as e,PIXEL_TOLERANCE as s}from\"../CurveHelper.js\";import{GeometricEffectDonutMethod as h,GeometricEffectOffsetMethod as n}from\"../enums.js\";class r{static local(){return null===r.instance&&(r.instance=new r),r.instance}execute(t,i,e,s){return new m(t,i,e)}}r.instance=null;class m{constructor(t,i,r){switch(this._inputGeometries=t,this._curveHelper=new e,this._width=(void 0!==i.width?i.width:2)*r,i.method){case h.Mitered:default:this._method=n.Mitered;break;case h.Bevelled:this._method=n.Bevelled;break;case h.Rounded:case h.TrueBuffer:this._method=n.Rounded;break;case h.Square:this._method=n.Square}this._option=i.option,this._offsetFlattenError=s*r}next(){let e=this._inputGeometries.next();for(;e;){if(t(e)&&this._width>0){if(Math.min(e.xmax-e.xmin,e.ymax-e.ymin)-2*this._width<0)return e;const t=[];return t.push([[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]),t.push([[e.xmin+this._width,e.ymin+this._width],[e.xmax-this._width,e.ymin+this._width],[e.xmax-this._width,e.ymax-this._width],[e.xmin+this._width,e.ymax-this._width],[e.xmin+this._width,e.ymin+this._width]]),{rings:t}}if(i(e)&&this._width>0){const t=[];for(const i of e.rings){const e=this._curveHelper.calculatePathLength(i),s=this._curveHelper.offset(i,this._width,this._method,4,this._offsetFlattenError);s&&(e<0&&s.reverse(),t.push(s))}if(t.length)return{rings:t}}e=this._inputGeometries.next()}return null}}export{r as EffectDonut};\n"]},"metadata":{},"sourceType":"module"}