{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { ShaderProgramType as e } from \"../enums.js\";\nimport { text as r, outline as t, line as a, icon as s, fill as n, circle as c, background as i } from \"./Programs.js\";\n\nclass o {\n  constructor() {\n    this._programByKey = new Map();\n  }\n\n  dispose() {\n    this._programByKey.forEach(e => e.dispose()), this._programByKey.clear();\n  }\n\n  getMaterialProgram(e, r, t) {\n    const a = r.key << 3 | this._getMaterialOptionsValue(r.type, t);\n\n    if (this._programByKey.has(a)) return this._programByKey.get(a);\n\n    const s = this._getProgramTemplate(r.type),\n          {\n      shaders: n\n    } = s,\n          {\n      vertexShader: c,\n      fragmentShader: i\n    } = n(t),\n          o = r.getShaderHeader(),\n          u = r.getShaderMain(),\n          p = c.replace(\"#pragma header\", o).replace(\"#pragma main\", u),\n          g = e.programCache.acquire(p, i, r.getAttributeLocations());\n\n    return this._programByKey.set(a, g), g;\n  }\n\n  _getMaterialOptionsValue(r, t) {\n    switch (r) {\n      case e.BACKGROUND:\n        {\n          const e = t;\n          return (e.pattern ? 1 : 0) << 1 | (e.id ? 1 : 0);\n        }\n\n      case e.FILL:\n        {\n          const e = t;\n          return (e.pattern ? 1 : 0) << 1 | (e.id ? 1 : 0);\n        }\n\n      case e.OUTLINE:\n        return t.id ? 1 : 0;\n\n      case e.LINE:\n        {\n          const e = t;\n          return (e.sdf ? 1 : 0) << 2 | (e.pattern ? 1 : 0) << 1 | (e.id ? 1 : 0);\n        }\n\n      case e.ICON:\n        {\n          const e = t;\n          return (e.sdf ? 1 : 0) << 1 | (e.id ? 1 : 0);\n        }\n\n      case e.CIRCLE:\n        return t.id ? 1 : 0;\n\n      case e.TEXT:\n        return t.id ? 1 : 0;\n\n      default:\n        return 0;\n    }\n  }\n\n  _getProgramTemplate(o) {\n    switch (o) {\n      case e.BACKGROUND:\n        return i;\n\n      case e.CIRCLE:\n        return c;\n\n      case e.FILL:\n        return n;\n\n      case e.ICON:\n        return s;\n\n      case e.LINE:\n        return a;\n\n      case e.OUTLINE:\n        return t;\n\n      case e.TEXT:\n        return r;\n\n      default:\n        return null;\n    }\n  }\n\n}\n\nexport { o as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/vectorTiles/shaders/VTLMaterialManager.js"],"names":["ShaderProgramType","e","text","r","outline","t","line","a","icon","s","fill","n","circle","c","background","i","o","constructor","_programByKey","Map","dispose","forEach","clear","getMaterialProgram","key","_getMaterialOptionsValue","type","has","get","_getProgramTemplate","shaders","vertexShader","fragmentShader","getShaderHeader","u","getShaderMain","p","replace","g","programCache","acquire","getAttributeLocations","set","BACKGROUND","pattern","id","FILL","OUTLINE","LINE","sdf","ICON","CIRCLE","TEXT","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{ShaderProgramType as e}from\"../enums.js\";import{text as r,outline as t,line as a,icon as s,fill as n,circle as c,background as i}from\"./Programs.js\";class o{constructor(){this._programByKey=new Map}dispose(){this._programByKey.forEach((e=>e.dispose())),this._programByKey.clear()}getMaterialProgram(e,r,t){const a=r.key<<3|this._getMaterialOptionsValue(r.type,t);if(this._programByKey.has(a))return this._programByKey.get(a);const s=this._getProgramTemplate(r.type),{shaders:n}=s,{vertexShader:c,fragmentShader:i}=n(t),o=r.getShaderHeader(),u=r.getShaderMain(),p=c.replace(\"#pragma header\",o).replace(\"#pragma main\",u),g=e.programCache.acquire(p,i,r.getAttributeLocations());return this._programByKey.set(a,g),g}_getMaterialOptionsValue(r,t){switch(r){case e.BACKGROUND:{const e=t;return(e.pattern?1:0)<<1|(e.id?1:0)}case e.FILL:{const e=t;return(e.pattern?1:0)<<1|(e.id?1:0)}case e.OUTLINE:return t.id?1:0;case e.LINE:{const e=t;return(e.sdf?1:0)<<2|(e.pattern?1:0)<<1|(e.id?1:0)}case e.ICON:{const e=t;return(e.sdf?1:0)<<1|(e.id?1:0)}case e.CIRCLE:return t.id?1:0;case e.TEXT:return t.id?1:0;default:return 0}}_getProgramTemplate(o){switch(o){case e.BACKGROUND:return i;case e.CIRCLE:return c;case e.FILL:return n;case e.ICON:return s;case e.LINE:return a;case e.OUTLINE:return t;case e.TEXT:return r;default:return null}}}export{o as default};\n"]},"metadata":{},"sourceType":"module"}