{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from \"../../Viewpoint.js\";\nimport e from \"../../core/Collection.js\";\nimport { isSome as n, get as r, isNone as o } from \"../../core/maybe.js\";\nimport { getMetersPerUnitForSR as a } from \"../../core/unitUtils.js\";\nimport { t as i } from \"../../chunks/common.js\";\nimport { f as c, r as s, t as u, a as f, s as l, i as m, b as y } from \"../../chunks/mat2d.js\";\nimport { c as p } from \"../../chunks/mat2df64.js\";\nimport { g, s as x, c as h, h as b, n as w, f as d, i as j, j as G, k as R, l as k, t as A, m as S } from \"../../chunks/vec2.js\";\nimport { f as v, a as F } from \"../../chunks/vec2f64.js\";\nimport N from \"../../geometry/Extent.js\";\nimport z from \"../../geometry/Geometry.js\";\nimport I from \"../../geometry/Point.js\";\nimport { isLoaded as M, canProjectWithoutEngine as V, load as q, project as L } from \"../../geometry/projection.js\";\nimport P from \"../../geometry/SpatialReference.js\";\nimport { isValid as C, equals as E, getInfo as O } from \"../../geometry/support/spatialReferenceUtils.js\";\nconst Q = 96,\n      U = 39.37,\n      W = 180 / Math.PI;\n\nfunction B(t) {\n  return t.wkid ? t : t.spatialReference || P.WGS84;\n}\n\nfunction D(t, e) {\n  return e.type ? x(t, e.x, e.y) : h(t, e);\n}\n\nfunction T(t) {\n  return a(t);\n}\n\nfunction H(t, e) {\n  return Math.max(t.width / e[0], t.height / e[1]) * ct(t.spatialReference);\n}\n\nasync function J(t, a, i, c) {\n  let s, u;\n  if (!t) return null;\n  if (Array.isArray(t) && !t.length) return null;\n\n  if (e.isCollection(t) && (t = t.toArray()), Array.isArray(t) && t.length && \"object\" == typeof t[0]) {\n    const e = t.every(t => \"attributes\" in t),\n          r = t.some(t => !t.geometry);\n    let o = t;\n\n    if (e && r && a && a.allLayerViews) {\n      const e = new Map();\n\n      for (const n of t) {\n        const t = n.layer,\n              r = e.get(t) || [],\n              o = n.attributes[t.objectIdField];\n        null != o && r.push(o), e.set(t, r);\n      }\n\n      const r = [];\n      e.forEach((t, e) => {\n        const n = a.allLayerViews.find(t => t.layer.id === e.id);\n\n        if (\"queryFeatures\" in n) {\n          const o = e.createQuery();\n          o.objectIds = t, o.returnGeometry = !0, r.push(n.queryFeatures(o));\n        }\n      });\n      const i = await Promise.all(r),\n            c = [];\n\n      for (const t of i) if (t && t.features && t.features.length) for (const e of t.features) n(e.geometry) && c.push(e.geometry);\n\n      o = c;\n    }\n\n    for (const t of o) c = await J(t, a, i, c);\n\n    return c;\n  }\n\n  if (Array.isArray(t) && 2 === t.length && \"number\" == typeof t[0] && \"number\" == typeof t[1]) s = new I(t);else if (t instanceof z) s = t;else if (\"geometry\" in t) if (t.geometry) s = t.geometry;else if (t.layer) {\n    const e = t.layer,\n          n = a.allLayerViews.find(t => t.layer.id === e.id);\n\n    if (\"queryFeatures\" in n) {\n      const o = e.createQuery();\n      o.objectIds = [t.attributes[e.objectIdField]], o.returnGeometry = !0;\n      const a = await n.queryFeatures(o);\n      s = r(a, \"features\", 0, \"geometry\");\n    }\n  }\n  if (o(s)) return null;\n  if (u = \"point\" === s.type ? new N({\n    xmin: s.x,\n    ymin: s.y,\n    xmax: s.x,\n    ymax: s.y,\n    spatialReference: s.spatialReference\n  }) : s.extent, !u) return null;\n  M() || V(u.spatialReference, i) || (await q());\n  const f = L(u, i);\n  return f ? c = c ? c.union(f) : f : null;\n}\n\nfunction K(t) {\n  if (t && (!Array.isArray(t) || \"number\" != typeof t[0]) && (\"object\" == typeof t || Array.isArray(t) && \"object\" == typeof t[0])) {\n    if (\"layer\" in t && t.layer && t.layer.minScale && t.layer.maxScale) {\n      const e = t.layer;\n      return {\n        min: e.minScale,\n        max: e.maxScale\n      };\n    }\n\n    if (Array.isArray(t) && t.length && t.every(t => \"layer\" in t)) {\n      let e = 0,\n          n = 0;\n\n      for (const r of t) {\n        const t = r.layer;\n        t && t.minScale && t.maxScale && (e = t.minScale < e ? t.minScale : e, n = t.maxScale > n ? t.maxScale : n);\n      }\n\n      return e && n ? {\n        min: e,\n        max: n\n      } : null;\n    }\n  }\n}\n\nfunction X(t, e) {\n  return E(B(t), e) ? t : L(t, e);\n}\n\nasync function Y(e, r) {\n  if (!e || !r) return new t({\n    targetGeometry: new I(),\n    scale: 0,\n    rotation: 0\n  });\n  let o = r.spatialReference;\n  const {\n    constraints: a,\n    padding: i,\n    viewpoint: c,\n    size: s\n  } = r,\n        u = [i ? s[0] - i.left - i.right : s[0], i ? s[1] - i.top - i.bottom : s[1]];\n  let f = null;\n  e instanceof t ? f = e : e.viewpoint ? f = e.viewpoint : e.target && \"esri.Viewpoint\" === e.target.declaredClass && (f = e.target);\n  let l = null;\n  f && f.targetGeometry ? l = f.targetGeometry : e instanceof N ? l = e : (e || e && (\"center\" in e || \"extent\" in e || \"target\" in e)) && (l = (await J(e.center, r, o)) || (await J(e.extent, r, o)) || (await J(e.target, r, o)) || (await J(e, r, o))), !l && c && c.targetGeometry ? l = c.targetGeometry : !l && r.extent && (l = r.extent), o || (o = B(r.spatialReference || r.extent || l)), M() || E(l.spatialReference, o) || V(l, o) || (await q());\n  const m = X(l.center ? l.center : l, o);\n  let y = null;\n  if (f && n(f.targetGeometry) && \"point\" === f.targetGeometry.type) y = f.scale;else if (\"scale\" in e && e.scale) y = e.scale;else if (\"zoom\" in e && -1 !== e.zoom && a && a.effectiveLODs) y = a.zoomToScale(e.zoom);else if (Array.isArray(l) || \"point\" === l.type || \"extent\" === l.type && 0 === l.width && 0 === l.height) {\n    const t = X(r.extent, o);\n    y = n(t) ? H(t, u) : r.extent ? H(r.extent, u) : c.scale;\n  } else y = H(X(l.extent, o), u);\n  const p = K(e);\n  p && (p.min && p.min > y ? y = p.min : p.max && p.max < y && (y = p.max));\n  let g = 0;\n  f ? g = f.rotation : e.hasOwnProperty(\"rotation\") ? g = e.rotation : c && (g = c.rotation);\n  let x = new t({\n    targetGeometry: m,\n    scale: y,\n    rotation: g\n  });\n  return a && (x = a.fit(x), a.constrainByGeometry(x), a.rotationEnabled || (x.rotation = g)), x;\n}\n\nfunction Z(t, e) {\n  const n = t.targetGeometry,\n        r = e.targetGeometry;\n  return n.x = r.x, n.y = r.y, n.spatialReference = r.spatialReference, t.scale = e.scale, t.rotation = e.rotation, t;\n}\n\nfunction $(t, e, n) {\n  return n ? x(t, .5 * (e[0] - n.right + n.left), .5 * (e[1] - n.bottom + n.top)) : g(t, e, .5);\n}\n\nconst _ = function () {\n  const t = F();\n  return function (e, n, r) {\n    const o = n.targetGeometry;\n    D(t, o);\n    const a = .5 * ot(n);\n    return e.xmin = t[0] - a * r[0], e.ymin = t[1] - a * r[1], e.xmax = t[0] + a * r[0], e.ymax = t[1] + a * r[1], e.spatialReference = o.spatialReference, e;\n  };\n}();\n\nfunction tt(t, e, n, r, o) {\n  return xt(t, e, n.center), t.scale = H(n, r), o && o.constraints && o.constraints.constrain(t), t;\n}\n\nfunction et(t, e, n, r) {\n  return ft(t, e, n, r), m(t, t);\n}\n\nconst nt = function () {\n  const t = F();\n  return function (e, n, r) {\n    return b(e, st(e, n), $(t, n, r));\n  };\n}(),\n      rt = function () {\n  const t = p(),\n        e = F();\n  return function (n, r, o, a) {\n    const i = ot(r),\n          f = it(r);\n    return x(e, i, i), c(t, e), s(t, t, f), u(t, t, nt(e, o, a)), u(t, t, [0, a.top - a.bottom]), x(n, t[4], t[5]);\n  };\n}();\n\nfunction ot(t) {\n  return t.scale * at(t.targetGeometry);\n}\n\nfunction at(t) {\n  return n(t) && C(t.spatialReference) ? 1 / (T(t.spatialReference) * U * Q) : 1;\n}\n\nfunction it(t) {\n  return i(t.rotation) || 0;\n}\n\nfunction ct(t) {\n  return C(t) ? T(t) * U * Q : 1;\n}\n\nfunction st(t, e) {\n  return g(t, e, .5);\n}\n\nconst ut = function () {\n  const t = F(),\n        e = F(),\n        n = F();\n  return function (r, o, a, i, c, m) {\n    return w(t, o), g(e, a, .5 * m), x(n, 1 / i * m, -1 / i * m), f(r, e), c && s(r, r, c), l(r, r, n), u(r, r, t), r;\n  };\n}(),\n      ft = function () {\n  const t = F();\n  return function (e, n, r, o) {\n    const a = ot(n),\n          i = it(n);\n    return D(t, n.targetGeometry), ut(e, t, r, a, i, o);\n  };\n}(),\n      lt = function () {\n  const t = F();\n  return function (e, n, r, o) {\n    const a = ot(n);\n    return D(t, n.targetGeometry), ut(e, t, r, a, 0, o);\n  };\n}();\n\nfunction mt(t) {\n  if (t.isWrappable) {\n    const e = O(t);\n    return e.valid[1] - e.valid[0];\n  }\n\n  return 0;\n}\n\nfunction yt(t, e) {\n  return Math.round(mt(t) / e);\n}\n\nconst pt = function () {\n  const t = F(),\n        e = F(),\n        n = [0, 0, 0];\n  return function (r, o, a) {\n    d(t, r, o), j(t, t), d(e, r, a), j(e, e), G(n, t, e);\n    let i = Math.acos(R(t, e) / (k(t) * k(e))) * W;\n    return n[2] < 0 && (i = -i), isNaN(i) && (i = 0), i;\n  };\n}(),\n      gt = function () {\n  const t = F();\n  return function (e, n, r, o) {\n    const a = e.targetGeometry;\n    return Z(e, n), rt(t, n, r, o), a.x += t[0], a.y += t[1], e;\n  };\n}(),\n      xt = function (t, e, n) {\n  Z(t, e);\n  const r = t.targetGeometry;\n  return r.x = n.x, r.y = n.y, r.spatialReference = n.spatialReference, t;\n},\n      ht = function () {\n  const t = F();\n  return function (e, n, r, o, a) {\n    a || (a = \"center\"), b(t, r, o), g(t, t, .5);\n    const i = t[0],\n          c = t[1];\n\n    switch (a) {\n      case \"center\":\n        x(t, 0, 0);\n        break;\n\n      case \"left\":\n        x(t, -i, 0);\n        break;\n\n      case \"top\":\n        x(t, 0, c);\n        break;\n\n      case \"right\":\n        x(t, i, 0);\n        break;\n\n      case \"bottom\":\n        x(t, 0, -c);\n        break;\n\n      case \"top-left\":\n        x(t, -i, c);\n        break;\n\n      case \"bottom-left\":\n        x(t, -i, -c);\n        break;\n\n      case \"top-right\":\n        x(t, i, c);\n        break;\n\n      case \"bottom-right\":\n        x(t, i, -c);\n    }\n\n    return St(e, n, t), e;\n  };\n}();\n\nfunction bt(t, e, n) {\n  return Z(t, e), t.rotation += n, t;\n}\n\nfunction wt(t, e, n) {\n  return Z(t, e), t.rotation = n, t;\n}\n\nconst dt = function () {\n  const t = F();\n  return function (e, n, r, o, a) {\n    return Z(e, n), isNaN(r) || 0 === r || (kt(t, o, n, a), e.scale = n.scale * r, At(t, t, e, a), St(e, e, x(t, t[0] - o[0], o[1] - t[1]))), e;\n  };\n}();\n\nfunction jt(t, e, n) {\n  return Z(t, e), t.scale = n, t;\n}\n\nconst Gt = function () {\n  const t = F();\n  return function (e, n, r, o, a, i) {\n    return Z(e, n), isNaN(r) || 0 === r || (kt(t, a, n, i), e.scale = n.scale * r, e.rotation += o, At(t, t, e, i), St(e, e, x(t, t[0] - a[0], a[1] - t[1]))), e;\n  };\n}(),\n      Rt = function () {\n  const t = F(),\n        e = F();\n  return function (n, r, o, a, i, c, s) {\n    return nt(e, c, s), S(t, i, e), a ? Gt(n, r, o, a, t, c) : dt(n, r, o, t, c);\n  };\n}(),\n      kt = function () {\n  const t = p();\n  return function (e, n, r, o) {\n    return A(e, n, et(t, r, o, 1));\n  };\n}(),\n      At = function () {\n  const t = p();\n  return function (e, n, r, o) {\n    return A(e, n, ft(t, r, o, 1));\n  };\n}(),\n      St = function () {\n  const t = F(),\n        e = p();\n  return function (n, r, o) {\n    Z(n, r);\n    const a = ot(r),\n          i = n.targetGeometry;\n    return y(e, it(r)), l(e, e, v(a, a)), A(t, o, e), i.x += t[0], i.y += t[1], n;\n  };\n}();\n\nexport { gt as addPadding, pt as angleBetween, xt as centerAt, Z as copy, Y as create, H as extentToScale, $ as getAnchor, _ as getExtent, ut as getMatrix, rt as getPaddingMapTranslation, nt as getPaddingScreenTranslation, ot as getResolution, ct as getResolutionToScaleFactor, ft as getTransform, lt as getTransformNoRotation, yt as getWorldScreenWidth, mt as getWorldWidth, Rt as padAndScaleAndRotateBy, ht as resize, bt as rotateBy, wt as rotateTo, Gt as scaleAndRotateBy, jt as scaleTo, tt as setExtent, kt as toMap, At as toScreen, St as translateBy };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/viewpointUtils.js"],"names":["t","e","isSome","n","get","r","isNone","o","getMetersPerUnitForSR","a","i","f","c","s","u","l","m","b","y","p","g","x","h","w","d","j","G","k","R","A","S","v","F","N","z","I","isLoaded","M","canProjectWithoutEngine","V","load","q","project","L","P","isValid","C","equals","E","getInfo","O","Q","U","W","Math","PI","B","wkid","spatialReference","WGS84","D","type","T","H","max","width","height","ct","J","Array","isArray","length","isCollection","toArray","every","some","geometry","allLayerViews","Map","layer","attributes","objectIdField","push","set","forEach","find","id","createQuery","objectIds","returnGeometry","queryFeatures","Promise","all","features","xmin","ymin","xmax","ymax","extent","union","K","minScale","maxScale","min","X","Y","targetGeometry","scale","rotation","constraints","padding","viewpoint","size","left","right","top","bottom","target","declaredClass","center","zoom","effectiveLODs","zoomToScale","hasOwnProperty","fit","constrainByGeometry","rotationEnabled","Z","$","_","ot","tt","xt","constrain","et","ft","nt","st","rt","it","at","ut","lt","mt","isWrappable","valid","yt","round","pt","acos","isNaN","gt","ht","St","bt","wt","dt","kt","At","jt","Gt","Rt","addPadding","angleBetween","centerAt","copy","create","extentToScale","getAnchor","getExtent","getMatrix","getPaddingMapTranslation","getPaddingScreenTranslation","getResolution","getResolutionToScaleFactor","getTransform","getTransformNoRotation","getWorldScreenWidth","getWorldWidth","padAndScaleAndRotateBy","resize","rotateBy","rotateTo","scaleAndRotateBy","scaleTo","setExtent","toMap","toScreen","translateBy"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from\"../../Viewpoint.js\";import e from\"../../core/Collection.js\";import{isSome as n,get as r,isNone as o}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as a}from\"../../core/unitUtils.js\";import{t as i}from\"../../chunks/common.js\";import{f as c,r as s,t as u,a as f,s as l,i as m,b as y}from\"../../chunks/mat2d.js\";import{c as p}from\"../../chunks/mat2df64.js\";import{g,s as x,c as h,h as b,n as w,f as d,i as j,j as G,k as R,l as k,t as A,m as S}from\"../../chunks/vec2.js\";import{f as v,a as F}from\"../../chunks/vec2f64.js\";import N from\"../../geometry/Extent.js\";import z from\"../../geometry/Geometry.js\";import I from\"../../geometry/Point.js\";import{isLoaded as M,canProjectWithoutEngine as V,load as q,project as L}from\"../../geometry/projection.js\";import P from\"../../geometry/SpatialReference.js\";import{isValid as C,equals as E,getInfo as O}from\"../../geometry/support/spatialReferenceUtils.js\";const Q=96,U=39.37,W=180/Math.PI;function B(t){return t.wkid?t:t.spatialReference||P.WGS84}function D(t,e){return e.type?x(t,e.x,e.y):h(t,e)}function T(t){return a(t)}function H(t,e){return Math.max(t.width/e[0],t.height/e[1])*ct(t.spatialReference)}async function J(t,a,i,c){let s,u;if(!t)return null;if(Array.isArray(t)&&!t.length)return null;if(e.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&\"object\"==typeof t[0]){const e=t.every((t=>\"attributes\"in t)),r=t.some((t=>!t.geometry));let o=t;if(e&&r&&a&&a.allLayerViews){const e=new Map;for(const n of t){const t=n.layer,r=e.get(t)||[],o=n.attributes[t.objectIdField];null!=o&&r.push(o),e.set(t,r)}const r=[];e.forEach(((t,e)=>{const n=a.allLayerViews.find((t=>t.layer.id===e.id));if(\"queryFeatures\"in n){const o=e.createQuery();o.objectIds=t,o.returnGeometry=!0,r.push(n.queryFeatures(o))}}));const i=await Promise.all(r),c=[];for(const t of i)if(t&&t.features&&t.features.length)for(const e of t.features)n(e.geometry)&&c.push(e.geometry);o=c}for(const t of o)c=await J(t,a,i,c);return c}if(Array.isArray(t)&&2===t.length&&\"number\"==typeof t[0]&&\"number\"==typeof t[1])s=new I(t);else if(t instanceof z)s=t;else if(\"geometry\"in t)if(t.geometry)s=t.geometry;else if(t.layer){const e=t.layer,n=a.allLayerViews.find((t=>t.layer.id===e.id));if(\"queryFeatures\"in n){const o=e.createQuery();o.objectIds=[t.attributes[e.objectIdField]],o.returnGeometry=!0;const a=await n.queryFeatures(o);s=r(a,\"features\",0,\"geometry\")}}if(o(s))return null;if(u=\"point\"===s.type?new N({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference}):s.extent,!u)return null;M()||V(u.spatialReference,i)||await q();const f=L(u,i);return f?c=c?c.union(f):f:null}function K(t){if(t&&(!Array.isArray(t)||\"number\"!=typeof t[0])&&(\"object\"==typeof t||Array.isArray(t)&&\"object\"==typeof t[0])){if(\"layer\"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every((t=>\"layer\"in t))){let e=0,n=0;for(const r of t){const t=r.layer;t&&t.minScale&&t.maxScale&&(e=t.minScale<e?t.minScale:e,n=t.maxScale>n?t.maxScale:n)}return e&&n?{min:e,max:n}:null}}}function X(t,e){return E(B(t),e)?t:L(t,e)}async function Y(e,r){if(!e||!r)return new t({targetGeometry:new I,scale:0,rotation:0});let o=r.spatialReference;const{constraints:a,padding:i,viewpoint:c,size:s}=r,u=[i?s[0]-i.left-i.right:s[0],i?s[1]-i.top-i.bottom:s[1]];let f=null;e instanceof t?f=e:e.viewpoint?f=e.viewpoint:e.target&&\"esri.Viewpoint\"===e.target.declaredClass&&(f=e.target);let l=null;f&&f.targetGeometry?l=f.targetGeometry:e instanceof N?l=e:(e||e&&(\"center\"in e||\"extent\"in e||\"target\"in e))&&(l=await J(e.center,r,o)||await J(e.extent,r,o)||await J(e.target,r,o)||await J(e,r,o)),!l&&c&&c.targetGeometry?l=c.targetGeometry:!l&&r.extent&&(l=r.extent),o||(o=B(r.spatialReference||r.extent||l)),M()||E(l.spatialReference,o)||V(l,o)||await q();const m=X(l.center?l.center:l,o);let y=null;if(f&&n(f.targetGeometry)&&\"point\"===f.targetGeometry.type)y=f.scale;else if(\"scale\"in e&&e.scale)y=e.scale;else if(\"zoom\"in e&&-1!==e.zoom&&a&&a.effectiveLODs)y=a.zoomToScale(e.zoom);else if(Array.isArray(l)||\"point\"===l.type||\"extent\"===l.type&&0===l.width&&0===l.height){const t=X(r.extent,o);y=n(t)?H(t,u):r.extent?H(r.extent,u):c.scale}else y=H(X(l.extent,o),u);const p=K(e);p&&(p.min&&p.min>y?y=p.min:p.max&&p.max<y&&(y=p.max));let g=0;f?g=f.rotation:e.hasOwnProperty(\"rotation\")?g=e.rotation:c&&(g=c.rotation);let x=new t({targetGeometry:m,scale:y,rotation:g});return a&&(x=a.fit(x),a.constrainByGeometry(x),a.rotationEnabled||(x.rotation=g)),x}function Z(t,e){const n=t.targetGeometry,r=e.targetGeometry;return n.x=r.x,n.y=r.y,n.spatialReference=r.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function $(t,e,n){return n?x(t,.5*(e[0]-n.right+n.left),.5*(e[1]-n.bottom+n.top)):g(t,e,.5)}const _=function(){const t=F();return function(e,n,r){const o=n.targetGeometry;D(t,o);const a=.5*ot(n);return e.xmin=t[0]-a*r[0],e.ymin=t[1]-a*r[1],e.xmax=t[0]+a*r[0],e.ymax=t[1]+a*r[1],e.spatialReference=o.spatialReference,e}}();function tt(t,e,n,r,o){return xt(t,e,n.center),t.scale=H(n,r),o&&o.constraints&&o.constraints.constrain(t),t}function et(t,e,n,r){return ft(t,e,n,r),m(t,t)}const nt=function(){const t=F();return function(e,n,r){return b(e,st(e,n),$(t,n,r))}}(),rt=function(){const t=p(),e=F();return function(n,r,o,a){const i=ot(r),f=it(r);return x(e,i,i),c(t,e),s(t,t,f),u(t,t,nt(e,o,a)),u(t,t,[0,a.top-a.bottom]),x(n,t[4],t[5])}}();function ot(t){return t.scale*at(t.targetGeometry)}function at(t){return n(t)&&C(t.spatialReference)?1/(T(t.spatialReference)*U*Q):1}function it(t){return i(t.rotation)||0}function ct(t){return C(t)?T(t)*U*Q:1}function st(t,e){return g(t,e,.5)}const ut=function(){const t=F(),e=F(),n=F();return function(r,o,a,i,c,m){return w(t,o),g(e,a,.5*m),x(n,1/i*m,-1/i*m),f(r,e),c&&s(r,r,c),l(r,r,n),u(r,r,t),r}}(),ft=function(){const t=F();return function(e,n,r,o){const a=ot(n),i=it(n);return D(t,n.targetGeometry),ut(e,t,r,a,i,o)}}(),lt=function(){const t=F();return function(e,n,r,o){const a=ot(n);return D(t,n.targetGeometry),ut(e,t,r,a,0,o)}}();function mt(t){if(t.isWrappable){const e=O(t);return e.valid[1]-e.valid[0]}return 0}function yt(t,e){return Math.round(mt(t)/e)}const pt=function(){const t=F(),e=F(),n=[0,0,0];return function(r,o,a){d(t,r,o),j(t,t),d(e,r,a),j(e,e),G(n,t,e);let i=Math.acos(R(t,e)/(k(t)*k(e)))*W;return n[2]<0&&(i=-i),isNaN(i)&&(i=0),i}}(),gt=function(){const t=F();return function(e,n,r,o){const a=e.targetGeometry;return Z(e,n),rt(t,n,r,o),a.x+=t[0],a.y+=t[1],e}}(),xt=function(t,e,n){Z(t,e);const r=t.targetGeometry;return r.x=n.x,r.y=n.y,r.spatialReference=n.spatialReference,t},ht=function(){const t=F();return function(e,n,r,o,a){a||(a=\"center\"),b(t,r,o),g(t,t,.5);const i=t[0],c=t[1];switch(a){case\"center\":x(t,0,0);break;case\"left\":x(t,-i,0);break;case\"top\":x(t,0,c);break;case\"right\":x(t,i,0);break;case\"bottom\":x(t,0,-c);break;case\"top-left\":x(t,-i,c);break;case\"bottom-left\":x(t,-i,-c);break;case\"top-right\":x(t,i,c);break;case\"bottom-right\":x(t,i,-c)}return St(e,n,t),e}}();function bt(t,e,n){return Z(t,e),t.rotation+=n,t}function wt(t,e,n){return Z(t,e),t.rotation=n,t}const dt=function(){const t=F();return function(e,n,r,o,a){return Z(e,n),isNaN(r)||0===r||(kt(t,o,n,a),e.scale=n.scale*r,At(t,t,e,a),St(e,e,x(t,t[0]-o[0],o[1]-t[1]))),e}}();function jt(t,e,n){return Z(t,e),t.scale=n,t}const Gt=function(){const t=F();return function(e,n,r,o,a,i){return Z(e,n),isNaN(r)||0===r||(kt(t,a,n,i),e.scale=n.scale*r,e.rotation+=o,At(t,t,e,i),St(e,e,x(t,t[0]-a[0],a[1]-t[1]))),e}}(),Rt=function(){const t=F(),e=F();return function(n,r,o,a,i,c,s){return nt(e,c,s),S(t,i,e),a?Gt(n,r,o,a,t,c):dt(n,r,o,t,c)}}(),kt=function(){const t=p();return function(e,n,r,o){return A(e,n,et(t,r,o,1))}}(),At=function(){const t=p();return function(e,n,r,o){return A(e,n,ft(t,r,o,1))}}(),St=function(){const t=F(),e=p();return function(n,r,o){Z(n,r);const a=ot(r),i=n.targetGeometry;return y(e,it(r)),l(e,e,v(a,a)),A(t,o,e),i.x+=t[0],i.y+=t[1],n}}();export{gt as addPadding,pt as angleBetween,xt as centerAt,Z as copy,Y as create,H as extentToScale,$ as getAnchor,_ as getExtent,ut as getMatrix,rt as getPaddingMapTranslation,nt as getPaddingScreenTranslation,ot as getResolution,ct as getResolutionToScaleFactor,ft as getTransform,lt as getTransformNoRotation,yt as getWorldScreenWidth,mt as getWorldWidth,Rt as padAndScaleAndRotateBy,ht as resize,bt as rotateBy,wt as rotateTo,Gt as scaleAndRotateBy,jt as scaleTo,tt as setExtent,kt as toMap,At as toScreen,St as translateBy};\n"]},"metadata":{},"sourceType":"module"}