{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../Color.js\";\nimport t from \"../../core/Error.js\";\nimport { pt2px as l, px2pt as a } from \"../../core/screenUtils.js\";\nimport { getFill as n, getStroke as o, getPatternUrlWithColor as i } from \"./gfxUtils.js\";\nimport { SymbolSizeDefaults as s, shapes as c, adjustColorBrightness as u } from \"./previewUtils.js\";\nimport { renderSymbol as r } from \"./renderUtils.js\";\nconst m = \"picture-fill\",\n      h = \"picture-marker\",\n      p = \"simple-fill\",\n      d = \"simple-line\",\n      f = \"simple-marker\",\n      v = \"text\",\n      y = \"Aa\",\n      w = s.size,\n      g = s.maxSize,\n      b = s.maxOutlineSize,\n      M = s.lineWidth,\n      x = document.createElement(\"canvas\");\n\nfunction k(e, t) {\n  const l = x.getContext(\"2d\"),\n        a = [];\n  return t && (t.weight && a.push(t.weight), t.size && a.push(t.size + \"px\"), t.family && a.push(t.family)), l.font = a.join(\" \"), l.measureText(e).width;\n}\n\nconst L = 7.2 / 2.54,\n      z = 72 / 2.54;\n\nfunction j(e) {\n  if (0 === e.length) return 0;\n\n  if (e.length > 2) {\n    const t = a(1),\n          l = parseFloat(e);\n\n    switch (e.slice(-2)) {\n      case \"px\":\n        return l;\n\n      case \"pt\":\n        return l * t;\n\n      case \"in\":\n        return 72 * l * t;\n\n      case \"pc\":\n        return 12 * l * t;\n\n      case \"mm\":\n        return l * L * t;\n\n      case \"cm\":\n        return l * z * t;\n    }\n  }\n\n  return parseFloat(e);\n}\n\nfunction C(e) {\n  const t = null == e ? void 0 : e.size;\n  return {\n    width: null != t && \"object\" == typeof t && \"width\" in t ? l(t.width) : null,\n    height: null != t && \"object\" == typeof t && \"height\" in t ? l(t.height) : null\n  };\n}\n\nfunction S(a, s) {\n  var x, L;\n  const z = \"number\" == typeof (null == s ? void 0 : s.size) ? null == s ? void 0 : s.size : null,\n        S = null != z ? l(z) : null,\n        F = null != (null == s ? void 0 : s.maxSize) ? l(s.maxSize) : null,\n        E = null != (null == s ? void 0 : s.opacity) ? s.opacity : null,\n        P = null != (null == s ? void 0 : s.rotation) ? s.rotation : \"angle\" in a ? a.angle : null,\n        U = n(a);\n  let Z = o(a);\n\n  if (U && !Z) {\n    const t = \"type\" in U ? null : new e(U);\n    \"#ffffff\" === (t ? t.toHex() : null) && (Z = {\n      color: \"#bdc3c7\",\n      width: .75\n    });\n  }\n\n  const q = {\n    shape: null,\n    fill: null,\n    stroke: Z,\n    offset: [0, 0]\n  };\n  null != (x = Z) && x.width && (Z.width = Math.min(Z.width, b));\n  const H = (null == (L = Z) ? void 0 : L.width) || 0;\n  let T = null != (null == s ? void 0 : s.size) && (null == (null == s ? void 0 : s.scale) || (null == s ? void 0 : s.scale)),\n      V = 0,\n      A = 0,\n      D = !1;\n\n  switch (a.type) {\n    case f:\n      {\n        const e = a.style,\n              t = Math.min(null != S ? S : l(a.size), F || g);\n\n        switch (V = t, A = t, e) {\n          case \"circle\":\n            q.shape = {\n              type: \"circle\",\n              cx: 0,\n              cy: 0,\n              r: .5 * t\n            }, T || (V += H, A += H);\n            break;\n\n          case \"cross\":\n            q.shape = {\n              type: \"path\",\n              path: [{\n                command: \"M\",\n                values: [0, .5 * A]\n              }, {\n                command: \"L\",\n                values: [V, .5 * A]\n              }, {\n                command: \"M\",\n                values: [.5 * V, 0]\n              }, {\n                command: \"L\",\n                values: [.5 * V, A]\n              }]\n            };\n            break;\n\n          case \"diamond\":\n            q.shape = {\n              type: \"path\",\n              path: [{\n                command: \"M\",\n                values: [0, .5 * A]\n              }, {\n                command: \"L\",\n                values: [.5 * V, 0]\n              }, {\n                command: \"L\",\n                values: [V, .5 * A]\n              }, {\n                command: \"L\",\n                values: [.5 * V, A]\n              }, {\n                command: \"Z\",\n                values: []\n              }]\n            }, T || (V += H, A += H);\n            break;\n\n          case \"square\":\n            q.shape = {\n              type: \"path\",\n              path: [{\n                command: \"M\",\n                values: [0, 0]\n              }, {\n                command: \"L\",\n                values: [V, 0]\n              }, {\n                command: \"L\",\n                values: [V, A]\n              }, {\n                command: \"L\",\n                values: [0, A]\n              }, {\n                command: \"Z\",\n                values: []\n              }]\n            }, T || (V += H, A += H), P && (D = !0);\n            break;\n\n          case \"triangle\":\n            q.shape = {\n              type: \"path\",\n              path: [{\n                command: \"M\",\n                values: [.5 * V, 0]\n              }, {\n                command: \"L\",\n                values: [V, A]\n              }, {\n                command: \"L\",\n                values: [0, A]\n              }, {\n                command: \"Z\",\n                values: []\n              }]\n            }, T || (V += H, A += H), P && (D = !0);\n            break;\n\n          case \"x\":\n            q.shape = {\n              type: \"path\",\n              path: [{\n                command: \"M\",\n                values: [0, 0]\n              }, {\n                command: \"L\",\n                values: [V, A]\n              }, {\n                command: \"M\",\n                values: [V, 0]\n              }, {\n                command: \"L\",\n                values: [0, A]\n              }]\n            }, P && (D = !0);\n            break;\n\n          case \"path\":\n            q.shape = {\n              type: \"path\",\n              path: a.path || \"\"\n            }, T || (V += H, A += H), P && (D = !0), T = !0;\n        }\n\n        break;\n      }\n\n    case d:\n      {\n        var O;\n        const {\n          width: e,\n          height: t\n        } = C(s),\n              l = null != t ? t : Math.min(null != S ? S : H, F || b),\n              a = null != e ? e : M;\n        Z.width = l, V = a, A = l;\n        const n = (null == q || null == (O = q.stroke) ? void 0 : O.cap) || \"butt\",\n              o = \"round\" === n;\n        T = !0, q.stroke.cap = \"butt\" === n ? \"square\" : n, q.shape = {\n          type: \"path\",\n          path: [{\n            command: \"M\",\n            values: [o ? l / 2 : 0, A / 2]\n          }, {\n            command: \"L\",\n            values: [o ? V - l / 2 : V, A / 2]\n          }]\n        };\n        break;\n      }\n\n    case m:\n    case p:\n      {\n        const e = \"object\" == typeof (null == s ? void 0 : s.symbolConfig) && (null == s ? void 0 : s.symbolConfig.isSquareFill),\n              {\n          width: t,\n          height: l\n        } = C(s);\n        V = e && null != t ? t : null != S ? S : w, A = e && null != l ? l : V, T || (V += H, A += H), T = !0, q.shape = e ? {\n          type: \"path\",\n          path: [{\n            command: \"M\",\n            values: [0, 0]\n          }, {\n            command: \"L\",\n            values: [V, 0]\n          }, {\n            command: \"L\",\n            values: [V, A]\n          }, {\n            command: \"L\",\n            values: [0, A]\n          }, {\n            command: \"L\",\n            values: [0, 0]\n          }, {\n            command: \"Z\",\n            values: []\n          }]\n        } : c.fill[0];\n        break;\n      }\n\n    case h:\n      {\n        let e = l(a.width),\n            t = l(a.height);\n        const n = null != S ? S : Math.max(e, t),\n              o = e / t;\n        e = o <= 1 ? Math.ceil(n * o) : n, t = o <= 1 ? n : Math.ceil(n / o), V = Math.min(e, F || g), A = Math.min(t, F || g), q.shape = {\n          type: \"image\",\n          x: -Math.round(V / 2),\n          y: -Math.round(A / 2),\n          width: V,\n          height: A,\n          src: a.url || \"\"\n        }, P && (D = !0);\n        break;\n      }\n\n    case v:\n      {\n        const e = a,\n              t = e.text || y,\n              n = e.font,\n              o = Math.min(null != S ? S : l(n.size), F || g),\n              i = k(t, {\n          weight: n.weight,\n          size: o,\n          family: n.family\n        }),\n              s = /[\\uE600-\\uE6FF]/.test(t);\n        V = s ? o : i, A = o;\n        let c = .25 * j((n ? o : 0).toString());\n        s && (c += 5), q.shape = {\n          type: \"text\",\n          text: t,\n          x: 0,\n          y: c,\n          align: \"middle\",\n          decoration: n && n.decoration,\n          rotated: e.rotated,\n          kerning: e.kerning\n        }, q.font = n && {\n          size: o,\n          style: n.style,\n          decoration: n.decoration,\n          weight: n.weight,\n          family: n.family\n        };\n        break;\n      }\n  }\n\n  if (!q.shape) return Promise.reject(new t(\"symbolPreview: renderPreviewHTML2D\", \"symbol not supported.\"));\n  const R = U,\n        W = a.color;\n  let B = null;\n  return R && \"pattern\" === R.type && W && a.type !== m ? B = i(R.src, W.toCss(!0)).then(e => (R.src = e, q.fill = R, q)) : (q.fill = U, B = Promise.resolve(q)), B.then(e => {\n    const t = [[e]];\n\n    if (\"object\" == typeof (null == s ? void 0 : s.symbolConfig) && null != s && s.symbolConfig.applyColorModulation) {\n      const l = .6 * V;\n      t.unshift([{ ...e,\n        offset: [-l, 0],\n        fill: u(U, -.3)\n      }]), t.push([{ ...e,\n        offset: [l, 0],\n        fill: u(U, .3)\n      }]), V += 2 * l, T = !1;\n    }\n\n    return r(t, [V, A], {\n      node: s && s.node,\n      scale: T,\n      opacity: E,\n      rotation: P,\n      useRotationSize: D,\n      effectView: null == s ? void 0 : s.effectView\n    });\n  });\n}\n\nexport { S as previewSymbol2D };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/support/previewSymbol2D.js"],"names":["e","t","pt2px","l","px2pt","a","getFill","n","getStroke","o","getPatternUrlWithColor","i","SymbolSizeDefaults","s","shapes","c","adjustColorBrightness","u","renderSymbol","r","m","h","p","d","f","v","y","w","size","g","maxSize","b","maxOutlineSize","M","lineWidth","x","document","createElement","k","getContext","weight","push","family","font","join","measureText","width","L","z","j","length","parseFloat","slice","C","height","S","F","E","opacity","P","rotation","angle","U","Z","toHex","color","q","shape","fill","stroke","offset","Math","min","H","T","scale","V","A","D","type","style","cx","cy","path","command","values","O","cap","symbolConfig","isSquareFill","max","ceil","round","src","url","text","test","toString","align","decoration","rotated","kerning","Promise","reject","R","W","B","toCss","then","resolve","applyColorModulation","unshift","node","useRotationSize","effectView","previewSymbol2D"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,gBAAb;AAA8B,OAAOC,CAAP,MAAa,qBAAb;AAAmC,SAAOC,KAAK,IAAIC,CAAhB,EAAkBC,KAAK,IAAIC,CAA3B,QAAiC,2BAAjC;AAA6D,SAAOC,OAAO,IAAIC,CAAlB,EAAoBC,SAAS,IAAIC,CAAjC,EAAmCC,sBAAsB,IAAIC,CAA7D,QAAmE,eAAnE;AAAmF,SAAOC,kBAAkB,IAAIC,CAA7B,EAA+BC,MAAM,IAAIC,CAAzC,EAA2CC,qBAAqB,IAAIC,CAApE,QAA0E,mBAA1E;AAA8F,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,kBAA7B;AAAgD,MAAMC,CAAC,GAAC,cAAR;AAAA,MAAuBC,CAAC,GAAC,gBAAzB;AAAA,MAA0CC,CAAC,GAAC,aAA5C;AAAA,MAA0DC,CAAC,GAAC,aAA5D;AAAA,MAA0EC,CAAC,GAAC,eAA5E;AAAA,MAA4FC,CAAC,GAAC,MAA9F;AAAA,MAAqGC,CAAC,GAAC,IAAvG;AAAA,MAA4GC,CAAC,GAACd,CAAC,CAACe,IAAhH;AAAA,MAAqHC,CAAC,GAAChB,CAAC,CAACiB,OAAzH;AAAA,MAAiIC,CAAC,GAAClB,CAAC,CAACmB,cAArI;AAAA,MAAoJC,CAAC,GAACpB,CAAC,CAACqB,SAAxJ;AAAA,MAAkKC,CAAC,GAACC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAApK;;AAAqM,SAASC,CAAT,CAAWtC,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAME,CAAC,GAACgC,CAAC,CAACI,UAAF,CAAa,IAAb,CAAR;AAAA,QAA2BlC,CAAC,GAAC,EAA7B;AAAgC,SAAOJ,CAAC,KAAGA,CAAC,CAACuC,MAAF,IAAUnC,CAAC,CAACoC,IAAF,CAAOxC,CAAC,CAACuC,MAAT,CAAV,EAA2BvC,CAAC,CAAC2B,IAAF,IAAQvB,CAAC,CAACoC,IAAF,CAAOxC,CAAC,CAAC2B,IAAF,GAAO,IAAd,CAAnC,EAAuD3B,CAAC,CAACyC,MAAF,IAAUrC,CAAC,CAACoC,IAAF,CAAOxC,CAAC,CAACyC,MAAT,CAApE,CAAD,EAAuFvC,CAAC,CAACwC,IAAF,GAAOtC,CAAC,CAACuC,IAAF,CAAO,GAAP,CAA9F,EAA0GzC,CAAC,CAAC0C,WAAF,CAAc7C,CAAd,EAAiB8C,KAAlI;AAAwI;;AAAA,MAAMC,CAAC,GAAC,MAAI,IAAZ;AAAA,MAAiBC,CAAC,GAAC,KAAG,IAAtB;;AAA2B,SAASC,CAAT,CAAWjD,CAAX,EAAa;AAAC,MAAG,MAAIA,CAAC,CAACkD,MAAT,EAAgB,OAAO,CAAP;;AAAS,MAAGlD,CAAC,CAACkD,MAAF,GAAS,CAAZ,EAAc;AAAC,UAAMjD,CAAC,GAACI,CAAC,CAAC,CAAD,CAAT;AAAA,UAAaF,CAAC,GAACgD,UAAU,CAACnD,CAAD,CAAzB;;AAA6B,YAAOA,CAAC,CAACoD,KAAF,CAAQ,CAAC,CAAT,CAAP;AAAoB,WAAI,IAAJ;AAAS,eAAOjD,CAAP;;AAAS,WAAI,IAAJ;AAAS,eAAOA,CAAC,GAACF,CAAT;;AAAW,WAAI,IAAJ;AAAS,eAAO,KAAGE,CAAH,GAAKF,CAAZ;;AAAc,WAAI,IAAJ;AAAS,eAAO,KAAGE,CAAH,GAAKF,CAAZ;;AAAc,WAAI,IAAJ;AAAS,eAAOE,CAAC,GAAC4C,CAAF,GAAI9C,CAAX;;AAAa,WAAI,IAAJ;AAAS,eAAOE,CAAC,GAAC6C,CAAF,GAAI/C,CAAX;AAAvI;AAAqJ;;AAAA,SAAOkD,UAAU,CAACnD,CAAD,CAAjB;AAAqB;;AAAA,SAASqD,CAAT,CAAWrD,CAAX,EAAa;AAAC,QAAMC,CAAC,GAAC,QAAMD,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC4B,IAAzB;AAA8B,SAAM;AAACkB,IAAAA,KAAK,EAAC,QAAM7C,CAAN,IAAS,YAAU,OAAOA,CAA1B,IAA6B,WAAUA,CAAvC,GAAyCE,CAAC,CAACF,CAAC,CAAC6C,KAAH,CAA1C,GAAoD,IAA3D;AAAgEQ,IAAAA,MAAM,EAAC,QAAMrD,CAAN,IAAS,YAAU,OAAOA,CAA1B,IAA6B,YAAWA,CAAxC,GAA0CE,CAAC,CAACF,CAAC,CAACqD,MAAH,CAA3C,GAAsD;AAA7H,GAAN;AAAyI;;AAAA,SAASC,CAAT,CAAWlD,CAAX,EAAaQ,CAAb,EAAe;AAAC,MAAIsB,CAAJ,EAAMY,CAAN;AAAQ,QAAMC,CAAC,GAAC,YAAU,QAAO,QAAMnC,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACe,IAAxB,CAAV,GAAwC,QAAMf,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACe,IAAzD,GAA8D,IAAtE;AAAA,QAA2E2B,CAAC,GAAC,QAAMP,CAAN,GAAQ7C,CAAC,CAAC6C,CAAD,CAAT,GAAa,IAA1F;AAAA,QAA+FQ,CAAC,GAAC,SAAO,QAAM3C,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACiB,OAAxB,IAAiC3B,CAAC,CAACU,CAAC,CAACiB,OAAH,CAAlC,GAA8C,IAA/I;AAAA,QAAoJ2B,CAAC,GAAC,SAAO,QAAM5C,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC6C,OAAxB,IAAiC7C,CAAC,CAAC6C,OAAnC,GAA2C,IAAjM;AAAA,QAAsMC,CAAC,GAAC,SAAO,QAAM9C,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC+C,QAAxB,IAAkC/C,CAAC,CAAC+C,QAApC,GAA6C,WAAUvD,CAAV,GAAYA,CAAC,CAACwD,KAAd,GAAoB,IAAzQ;AAAA,QAA8QC,CAAC,GAACvD,CAAC,CAACF,CAAD,CAAjR;AAAqR,MAAI0D,CAAC,GAACtD,CAAC,CAACJ,CAAD,CAAP;;AAAW,MAAGyD,CAAC,IAAE,CAACC,CAAP,EAAS;AAAC,UAAM9D,CAAC,GAAC,UAAS6D,CAAT,GAAW,IAAX,GAAgB,IAAI9D,CAAJ,CAAM8D,CAAN,CAAxB;AAAiC,mBAAa7D,CAAC,GAACA,CAAC,CAAC+D,KAAF,EAAD,GAAW,IAAzB,MAAiCD,CAAC,GAAC;AAACE,MAAAA,KAAK,EAAC,SAAP;AAAiBnB,MAAAA,KAAK,EAAC;AAAvB,KAAnC;AAAgE;;AAAA,QAAMoB,CAAC,GAAC;AAACC,IAAAA,KAAK,EAAC,IAAP;AAAYC,IAAAA,IAAI,EAAC,IAAjB;AAAsBC,IAAAA,MAAM,EAACN,CAA7B;AAA+BO,IAAAA,MAAM,EAAC,CAAC,CAAD,EAAG,CAAH;AAAtC,GAAR;AAAqD,WAAOnC,CAAC,GAAC4B,CAAT,KAAa5B,CAAC,CAACW,KAAf,KAAuBiB,CAAC,CAACjB,KAAF,GAAQyB,IAAI,CAACC,GAAL,CAAST,CAAC,CAACjB,KAAX,EAAiBf,CAAjB,CAA/B;AAAoD,QAAM0C,CAAC,GAAC,CAAC,SAAO1B,CAAC,GAACgB,CAAT,IAAY,KAAK,CAAjB,GAAmBhB,CAAC,CAACD,KAAtB,KAA8B,CAAtC;AAAwC,MAAI4B,CAAC,GAAC,SAAO,QAAM7D,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACe,IAAxB,MAAgC,SAAO,QAAMf,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC8D,KAAxB,MAAiC,QAAM9D,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC8D,KAAlD,CAAhC,CAAN;AAAA,MAAgGC,CAAC,GAAC,CAAlG;AAAA,MAAoGC,CAAC,GAAC,CAAtG;AAAA,MAAwGC,CAAC,GAAC,CAAC,CAA3G;;AAA6G,UAAOzE,CAAC,CAAC0E,IAAT;AAAe,SAAKvD,CAAL;AAAO;AAAC,cAAMxB,CAAC,GAACK,CAAC,CAAC2E,KAAV;AAAA,cAAgB/E,CAAC,GAACsE,IAAI,CAACC,GAAL,CAAS,QAAMjB,CAAN,GAAQA,CAAR,GAAUpD,CAAC,CAACE,CAAC,CAACuB,IAAH,CAApB,EAA6B4B,CAAC,IAAE3B,CAAhC,CAAlB;;AAAqD,gBAAO+C,CAAC,GAAC3E,CAAF,EAAI4E,CAAC,GAAC5E,CAAN,EAAQD,CAAf;AAAkB,eAAI,QAAJ;AAAakE,YAAAA,CAAC,CAACC,KAAF,GAAQ;AAACY,cAAAA,IAAI,EAAC,QAAN;AAAeE,cAAAA,EAAE,EAAC,CAAlB;AAAoBC,cAAAA,EAAE,EAAC,CAAvB;AAAyB/D,cAAAA,CAAC,EAAC,KAAGlB;AAA9B,aAAR,EAAyCyE,CAAC,KAAGE,CAAC,IAAEH,CAAH,EAAKI,CAAC,IAAEJ,CAAX,CAA1C;AAAwD;;AAAM,eAAI,OAAJ;AAAYP,YAAAA,CAAC,CAACC,KAAF,GAAQ;AAACY,cAAAA,IAAI,EAAC,MAAN;AAAaI,cAAAA,IAAI,EAAC,CAAC;AAACC,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,CAAD,EAAG,KAAGR,CAAN;AAApB,eAAD,EAA+B;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAACT,CAAD,EAAG,KAAGC,CAAN;AAApB,eAA/B,EAA6D;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,KAAGT,CAAJ,EAAM,CAAN;AAApB,eAA7D,EAA2F;AAACQ,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,KAAGT,CAAJ,EAAMC,CAAN;AAApB,eAA3F;AAAlB,aAAR;AAAqJ;;AAAM,eAAI,SAAJ;AAAcX,YAAAA,CAAC,CAACC,KAAF,GAAQ;AAACY,cAAAA,IAAI,EAAC,MAAN;AAAaI,cAAAA,IAAI,EAAC,CAAC;AAACC,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,CAAD,EAAG,KAAGR,CAAN;AAApB,eAAD,EAA+B;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,KAAGT,CAAJ,EAAM,CAAN;AAApB,eAA/B,EAA6D;AAACQ,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAACT,CAAD,EAAG,KAAGC,CAAN;AAApB,eAA7D,EAA2F;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,KAAGT,CAAJ,EAAMC,CAAN;AAApB,eAA3F,EAAyH;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC;AAApB,eAAzH;AAAlB,aAAR,EAA6KX,CAAC,KAAGE,CAAC,IAAEH,CAAH,EAAKI,CAAC,IAAEJ,CAAX,CAA9K;AAA4L;;AAAM,eAAI,QAAJ;AAAaP,YAAAA,CAAC,CAACC,KAAF,GAAQ;AAACY,cAAAA,IAAI,EAAC,MAAN;AAAaI,cAAAA,IAAI,EAAC,CAAC;AAACC,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,CAAD,EAAG,CAAH;AAApB,eAAD,EAA4B;AAACD,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAACT,CAAD,EAAG,CAAH;AAApB,eAA5B,EAAuD;AAACQ,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAACT,CAAD,EAAGC,CAAH;AAApB,eAAvD,EAAkF;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,CAAD,EAAGR,CAAH;AAApB,eAAlF,EAA6G;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC;AAApB,eAA7G;AAAlB,aAAR,EAAiKX,CAAC,KAAGE,CAAC,IAAEH,CAAH,EAAKI,CAAC,IAAEJ,CAAX,CAAlK,EAAgLd,CAAC,KAAGmB,CAAC,GAAC,CAAC,CAAN,CAAjL;AAA0L;;AAAM,eAAI,UAAJ;AAAeZ,YAAAA,CAAC,CAACC,KAAF,GAAQ;AAACY,cAAAA,IAAI,EAAC,MAAN;AAAaI,cAAAA,IAAI,EAAC,CAAC;AAACC,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,KAAGT,CAAJ,EAAM,CAAN;AAApB,eAAD,EAA+B;AAACQ,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAACT,CAAD,EAAGC,CAAH;AAApB,eAA/B,EAA0D;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,CAAD,EAAGR,CAAH;AAApB,eAA1D,EAAqF;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC;AAApB,eAArF;AAAlB,aAAR,EAAyIX,CAAC,KAAGE,CAAC,IAAEH,CAAH,EAAKI,CAAC,IAAEJ,CAAX,CAA1I,EAAwJd,CAAC,KAAGmB,CAAC,GAAC,CAAC,CAAN,CAAzJ;AAAkK;;AAAM,eAAI,GAAJ;AAAQZ,YAAAA,CAAC,CAACC,KAAF,GAAQ;AAACY,cAAAA,IAAI,EAAC,MAAN;AAAaI,cAAAA,IAAI,EAAC,CAAC;AAACC,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,CAAD,EAAG,CAAH;AAApB,eAAD,EAA4B;AAACD,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAACT,CAAD,EAAGC,CAAH;AAApB,eAA5B,EAAuD;AAACO,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAACT,CAAD,EAAG,CAAH;AAApB,eAAvD,EAAkF;AAACQ,gBAAAA,OAAO,EAAC,GAAT;AAAaC,gBAAAA,MAAM,EAAC,CAAC,CAAD,EAAGR,CAAH;AAApB,eAAlF;AAAlB,aAAR,EAAyIlB,CAAC,KAAGmB,CAAC,GAAC,CAAC,CAAN,CAA1I;AAAmJ;;AAAM,eAAI,MAAJ;AAAWZ,YAAAA,CAAC,CAACC,KAAF,GAAQ;AAACY,cAAAA,IAAI,EAAC,MAAN;AAAaI,cAAAA,IAAI,EAAC9E,CAAC,CAAC8E,IAAF,IAAQ;AAA1B,aAAR,EAAsCT,CAAC,KAAGE,CAAC,IAAEH,CAAH,EAAKI,CAAC,IAAEJ,CAAX,CAAvC,EAAqDd,CAAC,KAAGmB,CAAC,GAAC,CAAC,CAAN,CAAtD,EAA+DJ,CAAC,GAAC,CAAC,CAAlE;AAApgC;;AAAwkC;AAAM;;AAAA,SAAKnD,CAAL;AAAO;AAAC,YAAI+D,CAAJ;AAAM,cAAK;AAACxC,UAAAA,KAAK,EAAC9C,CAAP;AAASsD,UAAAA,MAAM,EAACrD;AAAhB,YAAmBoD,CAAC,CAACxC,CAAD,CAAzB;AAAA,cAA6BV,CAAC,GAAC,QAAMF,CAAN,GAAQA,CAAR,GAAUsE,IAAI,CAACC,GAAL,CAAS,QAAMjB,CAAN,GAAQA,CAAR,GAAUkB,CAAnB,EAAqBjB,CAAC,IAAEzB,CAAxB,CAAzC;AAAA,cAAoE1B,CAAC,GAAC,QAAML,CAAN,GAAQA,CAAR,GAAUiC,CAAhF;AAAkF8B,QAAAA,CAAC,CAACjB,KAAF,GAAQ3C,CAAR,EAAUyE,CAAC,GAACvE,CAAZ,EAAcwE,CAAC,GAAC1E,CAAhB;AAAkB,cAAMI,CAAC,GAAC,CAAC,QAAM2D,CAAN,IAAS,SAAOoB,CAAC,GAACpB,CAAC,CAACG,MAAX,CAAT,GAA4B,KAAK,CAAjC,GAAmCiB,CAAC,CAACC,GAAtC,KAA4C,MAApD;AAAA,cAA2D9E,CAAC,GAAC,YAAUF,CAAvE;AAAyEmE,QAAAA,CAAC,GAAC,CAAC,CAAH,EAAKR,CAAC,CAACG,MAAF,CAASkB,GAAT,GAAa,WAAShF,CAAT,GAAW,QAAX,GAAoBA,CAAtC,EAAwC2D,CAAC,CAACC,KAAF,GAAQ;AAACY,UAAAA,IAAI,EAAC,MAAN;AAAaI,UAAAA,IAAI,EAAC,CAAC;AAACC,YAAAA,OAAO,EAAC,GAAT;AAAaC,YAAAA,MAAM,EAAC,CAAC5E,CAAC,GAACN,CAAC,GAAC,CAAH,GAAK,CAAP,EAAS0E,CAAC,GAAC,CAAX;AAApB,WAAD,EAAoC;AAACO,YAAAA,OAAO,EAAC,GAAT;AAAaC,YAAAA,MAAM,EAAC,CAAC5E,CAAC,GAACmE,CAAC,GAACzE,CAAC,GAAC,CAAL,GAAOyE,CAAT,EAAWC,CAAC,GAAC,CAAb;AAApB,WAApC;AAAlB,SAAhD;AAA6I;AAAM;;AAAA,SAAKzD,CAAL;AAAO,SAAKE,CAAL;AAAO;AAAC,cAAMtB,CAAC,GAAC,YAAU,QAAO,QAAMa,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC2E,YAAxB,CAAV,KAAkD,QAAM3E,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC2E,YAAF,CAAeC,YAAhF,CAAR;AAAA,cAAsG;AAAC3C,UAAAA,KAAK,EAAC7C,CAAP;AAASqD,UAAAA,MAAM,EAACnD;AAAhB,YAAmBkD,CAAC,CAACxC,CAAD,CAA1H;AAA8H+D,QAAAA,CAAC,GAAC5E,CAAC,IAAE,QAAMC,CAAT,GAAWA,CAAX,GAAa,QAAMsD,CAAN,GAAQA,CAAR,GAAU5B,CAAzB,EAA2BkD,CAAC,GAAC7E,CAAC,IAAE,QAAMG,CAAT,GAAWA,CAAX,GAAayE,CAA1C,EAA4CF,CAAC,KAAGE,CAAC,IAAEH,CAAH,EAAKI,CAAC,IAAEJ,CAAX,CAA7C,EAA2DC,CAAC,GAAC,CAAC,CAA9D,EAAgER,CAAC,CAACC,KAAF,GAAQnE,CAAC,GAAC;AAAC+E,UAAAA,IAAI,EAAC,MAAN;AAAaI,UAAAA,IAAI,EAAC,CAAC;AAACC,YAAAA,OAAO,EAAC,GAAT;AAAaC,YAAAA,MAAM,EAAC,CAAC,CAAD,EAAG,CAAH;AAApB,WAAD,EAA4B;AAACD,YAAAA,OAAO,EAAC,GAAT;AAAaC,YAAAA,MAAM,EAAC,CAACT,CAAD,EAAG,CAAH;AAApB,WAA5B,EAAuD;AAACQ,YAAAA,OAAO,EAAC,GAAT;AAAaC,YAAAA,MAAM,EAAC,CAACT,CAAD,EAAGC,CAAH;AAApB,WAAvD,EAAkF;AAACO,YAAAA,OAAO,EAAC,GAAT;AAAaC,YAAAA,MAAM,EAAC,CAAC,CAAD,EAAGR,CAAH;AAApB,WAAlF,EAA6G;AAACO,YAAAA,OAAO,EAAC,GAAT;AAAaC,YAAAA,MAAM,EAAC,CAAC,CAAD,EAAG,CAAH;AAApB,WAA7G,EAAwI;AAACD,YAAAA,OAAO,EAAC,GAAT;AAAaC,YAAAA,MAAM,EAAC;AAApB,WAAxI;AAAlB,SAAD,GAAqLtE,CAAC,CAACqD,IAAF,CAAO,CAAP,CAA9P;AAAwQ;AAAM;;AAAA,SAAK/C,CAAL;AAAO;AAAC,YAAIrB,CAAC,GAACG,CAAC,CAACE,CAAC,CAACyC,KAAH,CAAP;AAAA,YAAiB7C,CAAC,GAACE,CAAC,CAACE,CAAC,CAACiD,MAAH,CAApB;AAA+B,cAAM/C,CAAC,GAAC,QAAMgD,CAAN,GAAQA,CAAR,GAAUgB,IAAI,CAACmB,GAAL,CAAS1F,CAAT,EAAWC,CAAX,CAAlB;AAAA,cAAgCQ,CAAC,GAACT,CAAC,GAACC,CAApC;AAAsCD,QAAAA,CAAC,GAACS,CAAC,IAAE,CAAH,GAAK8D,IAAI,CAACoB,IAAL,CAAUpF,CAAC,GAACE,CAAZ,CAAL,GAAoBF,CAAtB,EAAwBN,CAAC,GAACQ,CAAC,IAAE,CAAH,GAAKF,CAAL,GAAOgE,IAAI,CAACoB,IAAL,CAAUpF,CAAC,GAACE,CAAZ,CAAjC,EAAgDmE,CAAC,GAACL,IAAI,CAACC,GAAL,CAASxE,CAAT,EAAWwD,CAAC,IAAE3B,CAAd,CAAlD,EAAmEgD,CAAC,GAACN,IAAI,CAACC,GAAL,CAASvE,CAAT,EAAWuD,CAAC,IAAE3B,CAAd,CAArE,EAAsFqC,CAAC,CAACC,KAAF,GAAQ;AAACY,UAAAA,IAAI,EAAC,OAAN;AAAc5C,UAAAA,CAAC,EAAC,CAACoC,IAAI,CAACqB,KAAL,CAAWhB,CAAC,GAAC,CAAb,CAAjB;AAAiClD,UAAAA,CAAC,EAAC,CAAC6C,IAAI,CAACqB,KAAL,CAAWf,CAAC,GAAC,CAAb,CAApC;AAAoD/B,UAAAA,KAAK,EAAC8B,CAA1D;AAA4DtB,UAAAA,MAAM,EAACuB,CAAnE;AAAqEgB,UAAAA,GAAG,EAACxF,CAAC,CAACyF,GAAF,IAAO;AAAhF,SAA9F,EAAkLnC,CAAC,KAAGmB,CAAC,GAAC,CAAC,CAAN,CAAnL;AAA4L;AAAM;;AAAA,SAAKrD,CAAL;AAAO;AAAC,cAAMzB,CAAC,GAACK,CAAR;AAAA,cAAUJ,CAAC,GAACD,CAAC,CAAC+F,IAAF,IAAQrE,CAApB;AAAA,cAAsBnB,CAAC,GAACP,CAAC,CAAC2C,IAA1B;AAAA,cAA+BlC,CAAC,GAAC8D,IAAI,CAACC,GAAL,CAAS,QAAMjB,CAAN,GAAQA,CAAR,GAAUpD,CAAC,CAACI,CAAC,CAACqB,IAAH,CAApB,EAA6B4B,CAAC,IAAE3B,CAAhC,CAAjC;AAAA,cAAoElB,CAAC,GAAC2B,CAAC,CAACrC,CAAD,EAAG;AAACuC,UAAAA,MAAM,EAACjC,CAAC,CAACiC,MAAV;AAAiBZ,UAAAA,IAAI,EAACnB,CAAtB;AAAwBiC,UAAAA,MAAM,EAACnC,CAAC,CAACmC;AAAjC,SAAH,CAAvE;AAAA,cAAoH7B,CAAC,GAAC,kBAAkBmF,IAAlB,CAAuB/F,CAAvB,CAAtH;AAAgJ2E,QAAAA,CAAC,GAAC/D,CAAC,GAACJ,CAAD,GAAGE,CAAN,EAAQkE,CAAC,GAACpE,CAAV;AAAY,YAAIM,CAAC,GAAC,MAAIkC,CAAC,CAAC,CAAC1C,CAAC,GAACE,CAAD,GAAG,CAAL,EAAQwF,QAAR,EAAD,CAAX;AAAgCpF,QAAAA,CAAC,KAAGE,CAAC,IAAE,CAAN,CAAD,EAAUmD,CAAC,CAACC,KAAF,GAAQ;AAACY,UAAAA,IAAI,EAAC,MAAN;AAAagB,UAAAA,IAAI,EAAC9F,CAAlB;AAAoBkC,UAAAA,CAAC,EAAC,CAAtB;AAAwBT,UAAAA,CAAC,EAACX,CAA1B;AAA4BmF,UAAAA,KAAK,EAAC,QAAlC;AAA2CC,UAAAA,UAAU,EAAC5F,CAAC,IAAEA,CAAC,CAAC4F,UAA3D;AAAsEC,UAAAA,OAAO,EAACpG,CAAC,CAACoG,OAAhF;AAAwFC,UAAAA,OAAO,EAACrG,CAAC,CAACqG;AAAlG,SAAlB,EAA6HnC,CAAC,CAACvB,IAAF,GAAOpC,CAAC,IAAE;AAACqB,UAAAA,IAAI,EAACnB,CAAN;AAAQuE,UAAAA,KAAK,EAACzE,CAAC,CAACyE,KAAhB;AAAsBmB,UAAAA,UAAU,EAAC5F,CAAC,CAAC4F,UAAnC;AAA8C3D,UAAAA,MAAM,EAACjC,CAAC,CAACiC,MAAvD;AAA8DE,UAAAA,MAAM,EAACnC,CAAC,CAACmC;AAAvE,SAAvI;AAAsN;AAAM;AAAljF;;AAAmjF,MAAG,CAACwB,CAAC,CAACC,KAAN,EAAY,OAAOmC,OAAO,CAACC,MAAR,CAAe,IAAItG,CAAJ,CAAM,oCAAN,EAA2C,uBAA3C,CAAf,CAAP;AAA2F,QAAMuG,CAAC,GAAC1C,CAAR;AAAA,QAAU2C,CAAC,GAACpG,CAAC,CAAC4D,KAAd;AAAoB,MAAIyC,CAAC,GAAC,IAAN;AAAW,SAAOF,CAAC,IAAE,cAAYA,CAAC,CAACzB,IAAjB,IAAuB0B,CAAvB,IAA0BpG,CAAC,CAAC0E,IAAF,KAAS3D,CAAnC,GAAqCsF,CAAC,GAAC/F,CAAC,CAAC6F,CAAC,CAACX,GAAH,EAAOY,CAAC,CAACE,KAAF,CAAQ,CAAC,CAAT,CAAP,CAAD,CAAqBC,IAArB,CAA2B5G,CAAC,KAAGwG,CAAC,CAACX,GAAF,GAAM7F,CAAN,EAAQkE,CAAC,CAACE,IAAF,GAAOoC,CAAf,EAAiBtC,CAApB,CAA5B,CAAvC,IAA6FA,CAAC,CAACE,IAAF,GAAON,CAAP,EAAS4C,CAAC,GAACJ,OAAO,CAACO,OAAR,CAAgB3C,CAAhB,CAAxG,GAA4HwC,CAAC,CAACE,IAAF,CAAQ5G,CAAC,IAAE;AAAC,UAAMC,CAAC,GAAC,CAAC,CAACD,CAAD,CAAD,CAAR;;AAAc,QAAG,YAAU,QAAO,QAAMa,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAAC2E,YAAxB,CAAV,IAAiD,QAAM3E,CAAvD,IAA0DA,CAAC,CAAC2E,YAAF,CAAesB,oBAA5E,EAAiG;AAAC,YAAM3G,CAAC,GAAC,KAAGyE,CAAX;AAAa3E,MAAAA,CAAC,CAAC8G,OAAF,CAAU,CAAC,EAAC,GAAG/G,CAAJ;AAAMsE,QAAAA,MAAM,EAAC,CAAC,CAACnE,CAAF,EAAI,CAAJ,CAAb;AAAoBiE,QAAAA,IAAI,EAACnD,CAAC,CAAC6C,CAAD,EAAG,CAAC,EAAJ;AAA1B,OAAD,CAAV,GAAgD7D,CAAC,CAACwC,IAAF,CAAO,CAAC,EAAC,GAAGzC,CAAJ;AAAMsE,QAAAA,MAAM,EAAC,CAACnE,CAAD,EAAG,CAAH,CAAb;AAAmBiE,QAAAA,IAAI,EAACnD,CAAC,CAAC6C,CAAD,EAAG,EAAH;AAAzB,OAAD,CAAP,CAAhD,EAA2Fc,CAAC,IAAE,IAAEzE,CAAhG,EAAkGuE,CAAC,GAAC,CAAC,CAArG;AAAuG;;AAAA,WAAOvD,CAAC,CAAClB,CAAD,EAAG,CAAC2E,CAAD,EAAGC,CAAH,CAAH,EAAS;AAACmC,MAAAA,IAAI,EAACnG,CAAC,IAAEA,CAAC,CAACmG,IAAX;AAAgBrC,MAAAA,KAAK,EAACD,CAAtB;AAAwBhB,MAAAA,OAAO,EAACD,CAAhC;AAAkCG,MAAAA,QAAQ,EAACD,CAA3C;AAA6CsD,MAAAA,eAAe,EAACnC,CAA7D;AAA+DoC,MAAAA,UAAU,EAAC,QAAMrG,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACqG;AAA3F,KAAT,CAAR;AAAyH,GAAzW,CAAnI;AAA+e;;AAAA,SAAO3D,CAAC,IAAI4D,eAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../core/Error.js\";import{pt2px as l,px2pt as a}from\"../../core/screenUtils.js\";import{getFill as n,getStroke as o,getPatternUrlWithColor as i}from\"./gfxUtils.js\";import{SymbolSizeDefaults as s,shapes as c,adjustColorBrightness as u}from\"./previewUtils.js\";import{renderSymbol as r}from\"./renderUtils.js\";const m=\"picture-fill\",h=\"picture-marker\",p=\"simple-fill\",d=\"simple-line\",f=\"simple-marker\",v=\"text\",y=\"Aa\",w=s.size,g=s.maxSize,b=s.maxOutlineSize,M=s.lineWidth,x=document.createElement(\"canvas\");function k(e,t){const l=x.getContext(\"2d\"),a=[];return t&&(t.weight&&a.push(t.weight),t.size&&a.push(t.size+\"px\"),t.family&&a.push(t.family)),l.font=a.join(\" \"),l.measureText(e).width}const L=7.2/2.54,z=72/2.54;function j(e){if(0===e.length)return 0;if(e.length>2){const t=a(1),l=parseFloat(e);switch(e.slice(-2)){case\"px\":return l;case\"pt\":return l*t;case\"in\":return 72*l*t;case\"pc\":return 12*l*t;case\"mm\":return l*L*t;case\"cm\":return l*z*t}}return parseFloat(e)}function C(e){const t=null==e?void 0:e.size;return{width:null!=t&&\"object\"==typeof t&&\"width\"in t?l(t.width):null,height:null!=t&&\"object\"==typeof t&&\"height\"in t?l(t.height):null}}function S(a,s){var x,L;const z=\"number\"==typeof(null==s?void 0:s.size)?null==s?void 0:s.size:null,S=null!=z?l(z):null,F=null!=(null==s?void 0:s.maxSize)?l(s.maxSize):null,E=null!=(null==s?void 0:s.opacity)?s.opacity:null,P=null!=(null==s?void 0:s.rotation)?s.rotation:\"angle\"in a?a.angle:null,U=n(a);let Z=o(a);if(U&&!Z){const t=\"type\"in U?null:new e(U);\"#ffffff\"===(t?t.toHex():null)&&(Z={color:\"#bdc3c7\",width:.75})}const q={shape:null,fill:null,stroke:Z,offset:[0,0]};null!=(x=Z)&&x.width&&(Z.width=Math.min(Z.width,b));const H=(null==(L=Z)?void 0:L.width)||0;let T=null!=(null==s?void 0:s.size)&&(null==(null==s?void 0:s.scale)||(null==s?void 0:s.scale)),V=0,A=0,D=!1;switch(a.type){case f:{const e=a.style,t=Math.min(null!=S?S:l(a.size),F||g);switch(V=t,A=t,e){case\"circle\":q.shape={type:\"circle\",cx:0,cy:0,r:.5*t},T||(V+=H,A+=H);break;case\"cross\":q.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*A]},{command:\"L\",values:[V,.5*A]},{command:\"M\",values:[.5*V,0]},{command:\"L\",values:[.5*V,A]}]};break;case\"diamond\":q.shape={type:\"path\",path:[{command:\"M\",values:[0,.5*A]},{command:\"L\",values:[.5*V,0]},{command:\"L\",values:[V,.5*A]},{command:\"L\",values:[.5*V,A]},{command:\"Z\",values:[]}]},T||(V+=H,A+=H);break;case\"square\":q.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[V,0]},{command:\"L\",values:[V,A]},{command:\"L\",values:[0,A]},{command:\"Z\",values:[]}]},T||(V+=H,A+=H),P&&(D=!0);break;case\"triangle\":q.shape={type:\"path\",path:[{command:\"M\",values:[.5*V,0]},{command:\"L\",values:[V,A]},{command:\"L\",values:[0,A]},{command:\"Z\",values:[]}]},T||(V+=H,A+=H),P&&(D=!0);break;case\"x\":q.shape={type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[V,A]},{command:\"M\",values:[V,0]},{command:\"L\",values:[0,A]}]},P&&(D=!0);break;case\"path\":q.shape={type:\"path\",path:a.path||\"\"},T||(V+=H,A+=H),P&&(D=!0),T=!0}break}case d:{var O;const{width:e,height:t}=C(s),l=null!=t?t:Math.min(null!=S?S:H,F||b),a=null!=e?e:M;Z.width=l,V=a,A=l;const n=(null==q||null==(O=q.stroke)?void 0:O.cap)||\"butt\",o=\"round\"===n;T=!0,q.stroke.cap=\"butt\"===n?\"square\":n,q.shape={type:\"path\",path:[{command:\"M\",values:[o?l/2:0,A/2]},{command:\"L\",values:[o?V-l/2:V,A/2]}]};break}case m:case p:{const e=\"object\"==typeof(null==s?void 0:s.symbolConfig)&&(null==s?void 0:s.symbolConfig.isSquareFill),{width:t,height:l}=C(s);V=e&&null!=t?t:null!=S?S:w,A=e&&null!=l?l:V,T||(V+=H,A+=H),T=!0,q.shape=e?{type:\"path\",path:[{command:\"M\",values:[0,0]},{command:\"L\",values:[V,0]},{command:\"L\",values:[V,A]},{command:\"L\",values:[0,A]},{command:\"L\",values:[0,0]},{command:\"Z\",values:[]}]}:c.fill[0];break}case h:{let e=l(a.width),t=l(a.height);const n=null!=S?S:Math.max(e,t),o=e/t;e=o<=1?Math.ceil(n*o):n,t=o<=1?n:Math.ceil(n/o),V=Math.min(e,F||g),A=Math.min(t,F||g),q.shape={type:\"image\",x:-Math.round(V/2),y:-Math.round(A/2),width:V,height:A,src:a.url||\"\"},P&&(D=!0);break}case v:{const e=a,t=e.text||y,n=e.font,o=Math.min(null!=S?S:l(n.size),F||g),i=k(t,{weight:n.weight,size:o,family:n.family}),s=/[\\uE600-\\uE6FF]/.test(t);V=s?o:i,A=o;let c=.25*j((n?o:0).toString());s&&(c+=5),q.shape={type:\"text\",text:t,x:0,y:c,align:\"middle\",decoration:n&&n.decoration,rotated:e.rotated,kerning:e.kerning},q.font=n&&{size:o,style:n.style,decoration:n.decoration,weight:n.weight,family:n.family};break}}if(!q.shape)return Promise.reject(new t(\"symbolPreview: renderPreviewHTML2D\",\"symbol not supported.\"));const R=U,W=a.color;let B=null;return R&&\"pattern\"===R.type&&W&&a.type!==m?B=i(R.src,W.toCss(!0)).then((e=>(R.src=e,q.fill=R,q))):(q.fill=U,B=Promise.resolve(q)),B.then((e=>{const t=[[e]];if(\"object\"==typeof(null==s?void 0:s.symbolConfig)&&null!=s&&s.symbolConfig.applyColorModulation){const l=.6*V;t.unshift([{...e,offset:[-l,0],fill:u(U,-.3)}]),t.push([{...e,offset:[l,0],fill:u(U,.3)}]),V+=2*l,T=!1}return r(t,[V,A],{node:s&&s.node,scale:T,opacity:E,rotation:P,useRotationSize:D,effectView:null==s?void 0:s.effectView})}))}export{S as previewSymbol2D};\n"]},"metadata":{},"sourceType":"module"}