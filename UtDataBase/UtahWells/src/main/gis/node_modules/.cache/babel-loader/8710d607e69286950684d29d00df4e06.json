{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { clock as t } from \"./clock.js\";\nimport e from \"./Error.js\";\nimport { once as n } from \"./events.js\";\nimport r from \"./Logger.js\";\nimport { isSome as o, isNone as i, assumeNonNull as u, removeMaybe as c } from \"./maybe.js\";\n\nfunction s(t) {\n  return Promise.all(t);\n}\n\nfunction l(t, e) {\n  const n = t.slice();\n  return Promise.all(t.map((t, n) => e(t, n))).then(t => n.filter((e, n) => t[n]));\n}\n\nfunction f(t) {\n  return new Promise((e, n) => {\n    try {\n      t(e, n);\n    } catch (r) {\n      Promise.resolve().then(() => n(r));\n    }\n  });\n}\n\nfunction m() {\n  let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"Aborted\";\n  return new e(\"AbortError\", t);\n}\n\nfunction a(t) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"Aborted\";\n  if (p(t)) throw m(e);\n}\n\nfunction h(t) {\n  return o(t) ? \"aborted\" in t ? t : t.signal : t;\n}\n\nfunction p(t) {\n  const e = h(t);\n  return o(e) && e.aborted;\n}\n\nfunction b(t) {\n  if (g(t)) throw t;\n}\n\nfunction w(t) {\n  if (!g(t)) throw t;\n}\n\nfunction v(t, e) {\n  const r = h(t);\n\n  if (!i(r)) {\n    if (!r.aborted) return n(r, \"abort\", () => e());\n    e();\n  }\n}\n\nfunction P(t, e) {\n  const r = h(t);\n  if (!i(r)) return a(r), n(r, \"abort\", () => e(m()));\n}\n\nfunction d(t, e) {\n  const n = h(e);\n  return i(n) ? t : new Promise((n, r) => {\n    let o = v(e, () => r(m()));\n\n    const i = () => o = c(o);\n\n    t.then(i, i), t.then(n, r);\n  });\n}\n\nfunction j(t, n, r) {\n  return Promise.race([t, $(n).then(() => {\n    throw new e(\"timeout\", `Did not resolve within ${n} milliseconds (${null != r ? r : \"timeout\"})`);\n  })]);\n}\n\nfunction g(t) {\n  return t && \"AbortError\" === t.name;\n}\n\nfunction A(t) {\n  return t.catch(t => {\n    if (!g(t)) throw t;\n  });\n}\n\nfunction T(t) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : r.getLogger(\"esri\");\n  return t.catch(t => {\n    g(t) || e.error(t);\n  });\n}\n\nfunction E() {\n  let t = null;\n  const e = new Promise((e, n) => {\n    t = {\n      promise: void 0,\n      resolve: e,\n      reject: n\n    };\n  });\n  return t.promise = e, t;\n}\n\nfunction y(t) {\n  if (!t) return;\n\n  if (\"function\" != typeof t.forEach) {\n    const e = Object.keys(t);\n    return y(e.map(e => t[e])).then(t => {\n      const n = {};\n      return e.forEach((e, r) => n[e] = t[r]), n;\n    });\n  }\n\n  const e = t;\n  return f(t => {\n    const n = [];\n    let r = e.length;\n    0 === r && t(n), e.forEach(e => {\n      const o = {\n        promise: e || Promise.resolve(e)\n      };\n      n.push(o), o.promise.then(t => {\n        o.value = t;\n      }).catch(t => {\n        o.error = t;\n      }).then(() => {\n        --r, 0 === r && t(n);\n      });\n    });\n  });\n}\n\nfunction C(t) {\n  return y(t).then(t => t.filter(t => !!t.value).map(t => t.value));\n}\n\nfunction k(t) {\n  return Promise.reject(t);\n}\n\nfunction L(t) {\n  return Promise.resolve(t);\n}\n\nfunction $(t, e, n) {\n  const r = new AbortController();\n  return v(n, () => r.abort()), new Promise((n, o) => {\n    let i = setTimeout(() => {\n      i = 0, n(e);\n    }, t);\n    v(r, () => {\n      i && (clearTimeout(i), o(m()));\n    });\n  });\n}\n\nfunction x(t, n, r, o) {\n  const i = r && \"abort\" in r ? r : null;\n  null != o || i || (o = r);\n  let u = setTimeout(() => {\n    u = 0, i && i.abort();\n  }, n);\n\n  const c = () => o || new e(\"promiseUtils:timeout\", \"The wrapped promise did not resolve within \" + n + \" ms\");\n\n  return t.then(t => {\n    if (0 === u) throw c();\n    return clearTimeout(u), t;\n  }, t => {\n    throw clearTimeout(u), 0 === u ? c() : t;\n  });\n}\n\nfunction D(t) {\n  return t && \"function\" == typeof t.then;\n}\n\nfunction O(t) {\n  return D(t) ? t : Promise.resolve(t);\n}\n\nfunction U(t) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : -1;\n  let n,\n      r,\n      o,\n      i,\n      c = null;\n\n  const s = function () {\n    for (var _len = arguments.length, l = new Array(_len), _key = 0; _key < _len; _key++) {\n      l[_key] = arguments[_key];\n    }\n\n    if (n) {\n      r = l, i && i.reject(m()), i = E();\n      const t = u(i.promise);\n\n      if (c) {\n        const t = c;\n        c = null, t.abort();\n      }\n\n      return t;\n    }\n\n    if (o = i || E(), i = null, e > 0) {\n      const r = new AbortController();\n      n = O(t(...l, r.signal));\n      const o = n;\n      $(e).then(() => {\n        n === o && (i ? r.abort() : c = r);\n      });\n    } else n = 1, n = O(t(...l));\n\n    const f = () => {\n      const t = r;\n      r = o = n = c = null, null != t && s(...t);\n    },\n          a = n,\n          h = o;\n\n    return a.then(f, f), a.then(h.resolve, h.reject), u(h.promise);\n  };\n\n  return s;\n}\n\nfunction q() {\n  let e, n;\n\n  const r = new Promise((t, r) => {\n    e = t, n = r;\n  }),\n        o = t => {\n    e(t);\n  };\n\n  return o.resolve = t => e(t), o.reject = t => n(t), o.timeout = (e, n) => t.setTimeout(() => o.reject(n), e), o.promise = r, o;\n}\n\nfunction z(t, e) {\n  return t.then(e, e);\n}\n\nfunction B(t, e) {\n  let n,\n      r = new AbortController();\n  const i = t(r.signal);\n  let u = {\n    promise: i,\n    finished: !1,\n    abort: () => {\n      r && (r.abort(), r = null);\n    }\n  };\n\n  const c = () => {\n    u && (u.finished = !0, u = null), o(n) && (n.remove(), n = null), r = null;\n  };\n\n  return i.then(c, c), n = v(e, () => {\n    o(u) && u.abort();\n  }), u;\n}\n\nfunction F(t) {\n  return Promise.resolve().then(() => {\n    a(t);\n  });\n}\n\nexport { $ as after, s as all, z as always, f as create, m as createAbortError, E as createDeferred, q as createResolver, B as createTask, U as debounce, y as eachAlways, C as eachAlwaysValues, l as filter, A as ignoreAbortErrors, g as isAbortError, p as isAborted, D as isPromiseLike, T as logOnError, v as onAbort, P as onAbortOrThrow, k as reject, L as resolve, b as throwIfAbortError, a as throwIfAborted, w as throwIfNotAbortError, x as timeout, F as waitTick, O as when, d as whenOrAbort, j as whenOrTimeout };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/core/promiseUtils.js"],"names":["clock","t","e","once","n","r","isSome","o","isNone","i","assumeNonNull","u","removeMaybe","c","s","Promise","all","l","slice","map","then","filter","f","resolve","m","a","p","h","signal","aborted","b","g","w","v","P","d","j","race","$","name","A","catch","T","getLogger","error","E","promise","reject","y","forEach","Object","keys","length","push","value","C","k","L","AbortController","abort","setTimeout","clearTimeout","x","D","O","U","q","timeout","z","B","finished","remove","F","after","always","create","createAbortError","createDeferred","createResolver","createTask","debounce","eachAlways","eachAlwaysValues","ignoreAbortErrors","isAbortError","isAborted","isPromiseLike","logOnError","onAbort","onAbortOrThrow","throwIfAbortError","throwIfAborted","throwIfNotAbortError","waitTick","when","whenOrAbort","whenOrTimeout"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{clock as t}from\"./clock.js\";import e from\"./Error.js\";import{once as n}from\"./events.js\";import r from\"./Logger.js\";import{isSome as o,isNone as i,assumeNonNull as u,removeMaybe as c}from\"./maybe.js\";function s(t){return Promise.all(t)}function l(t,e){const n=t.slice();return Promise.all(t.map(((t,n)=>e(t,n)))).then((t=>n.filter(((e,n)=>t[n]))))}function f(t){return new Promise(((e,n)=>{try{t(e,n)}catch(r){Promise.resolve().then((()=>n(r)))}}))}function m(t=\"Aborted\"){return new e(\"AbortError\",t)}function a(t,e=\"Aborted\"){if(p(t))throw m(e)}function h(t){return o(t)?\"aborted\"in t?t:t.signal:t}function p(t){const e=h(t);return o(e)&&e.aborted}function b(t){if(g(t))throw t}function w(t){if(!g(t))throw t}function v(t,e){const r=h(t);if(!i(r)){if(!r.aborted)return n(r,\"abort\",(()=>e()));e()}}function P(t,e){const r=h(t);if(!i(r))return a(r),n(r,\"abort\",(()=>e(m())))}function d(t,e){const n=h(e);return i(n)?t:new Promise(((n,r)=>{let o=v(e,(()=>r(m())));const i=()=>o=c(o);t.then(i,i),t.then(n,r)}))}function j(t,n,r){return Promise.race([t,$(n).then((()=>{throw new e(\"timeout\",`Did not resolve within ${n} milliseconds (${null!=r?r:\"timeout\"})`)}))])}function g(t){return t&&\"AbortError\"===t.name}function A(t){return t.catch((t=>{if(!g(t))throw t}))}function T(t,e=r.getLogger(\"esri\")){return t.catch((t=>{g(t)||e.error(t)}))}function E(){let t=null;const e=new Promise(((e,n)=>{t={promise:void 0,resolve:e,reject:n}}));return t.promise=e,t}function y(t){if(!t)return;if(\"function\"!=typeof t.forEach){const e=Object.keys(t);return y(e.map((e=>t[e]))).then((t=>{const n={};return e.forEach(((e,r)=>n[e]=t[r])),n}))}const e=t;return f((t=>{const n=[];let r=e.length;0===r&&t(n),e.forEach((e=>{const o={promise:e||Promise.resolve(e)};n.push(o),o.promise.then((t=>{o.value=t})).catch((t=>{o.error=t})).then((()=>{--r,0===r&&t(n)}))}))}))}function C(t){return y(t).then((t=>t.filter((t=>!!t.value)).map((t=>t.value))))}function k(t){return Promise.reject(t)}function L(t){return Promise.resolve(t)}function $(t,e,n){const r=new AbortController;return v(n,(()=>r.abort())),new Promise(((n,o)=>{let i=setTimeout((()=>{i=0,n(e)}),t);v(r,(()=>{i&&(clearTimeout(i),o(m()))}))}))}function x(t,n,r,o){const i=r&&\"abort\"in r?r:null;null!=o||i||(o=r);let u=setTimeout((()=>{u=0,i&&i.abort()}),n);const c=()=>o||new e(\"promiseUtils:timeout\",\"The wrapped promise did not resolve within \"+n+\" ms\");return t.then((t=>{if(0===u)throw c();return clearTimeout(u),t}),(t=>{throw clearTimeout(u),0===u?c():t}))}function D(t){return t&&\"function\"==typeof t.then}function O(t){return D(t)?t:Promise.resolve(t)}function U(t,e=-1){let n,r,o,i,c=null;const s=(...l)=>{if(n){r=l,i&&i.reject(m()),i=E();const t=u(i.promise);if(c){const t=c;c=null,t.abort()}return t}if(o=i||E(),i=null,e>0){const r=new AbortController;n=O(t(...l,r.signal));const o=n;$(e).then((()=>{n===o&&(i?r.abort():c=r)}))}else n=1,n=O(t(...l));const f=()=>{const t=r;r=o=n=c=null,null!=t&&s(...t)},a=n,h=o;return a.then(f,f),a.then(h.resolve,h.reject),u(h.promise)};return s}function q(){let e,n;const r=new Promise(((t,r)=>{e=t,n=r})),o=t=>{e(t)};return o.resolve=t=>e(t),o.reject=t=>n(t),o.timeout=(e,n)=>t.setTimeout((()=>o.reject(n)),e),o.promise=r,o}function z(t,e){return t.then(e,e)}function B(t,e){let n,r=new AbortController;const i=t(r.signal);let u={promise:i,finished:!1,abort:()=>{r&&(r.abort(),r=null)}};const c=()=>{u&&(u.finished=!0,u=null),o(n)&&(n.remove(),n=null),r=null};return i.then(c,c),n=v(e,(()=>{o(u)&&u.abort()})),u}function F(t){return Promise.resolve().then((()=>{a(t)}))}export{$ as after,s as all,z as always,f as create,m as createAbortError,E as createDeferred,q as createResolver,B as createTask,U as debounce,y as eachAlways,C as eachAlwaysValues,l as filter,A as ignoreAbortErrors,g as isAbortError,p as isAborted,D as isPromiseLike,T as logOnError,v as onAbort,P as onAbortOrThrow,k as reject,L as resolve,b as throwIfAbortError,a as throwIfAborted,w as throwIfNotAbortError,x as timeout,F as waitTick,O as when,d as whenOrAbort,j as whenOrTimeout};\n"]},"metadata":{},"sourceType":"module"}