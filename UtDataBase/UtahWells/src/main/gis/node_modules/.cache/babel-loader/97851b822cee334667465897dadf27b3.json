{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../chunks/tslib.es6.js\";\nimport e from \"../../core/Accessor.js\";\nimport r from \"../../core/Collection.js\";\nimport { property as o } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as s } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport \"../../libs/maquette/projection.js\";\nimport { createProjector as i } from \"../../libs/maquette/projector.js\";\nimport { WatchUpdatingTracking as a } from \"../support/WatchUpdatingTracking.js\";\nlet c = class extends e {\n  constructor() {\n    super(...arguments), this.items = new r(), this._watchUpdatingTracking = new a(), this._callbacks = new Map(), this._projector = i(), this._hiddenProjector = i();\n  }\n\n  get needsRender() {\n    return this.items.length > 0;\n  }\n\n  initialize() {\n    const t = document.createElement(\"div\");\n    t.className = \"esri-overlay-surface\", this._set(\"surface\", t), this._hiddenSurface = document.createElement(\"div\"), this._hiddenSurface.setAttribute(\"style\", \"visibility: hidden;\"), t.appendChild(this._hiddenSurface), this._watchUpdatingTracking.addOnCollectionChange(() => this.items, t => {\n      for (const e of t.added) {\n        const t = () => e.render();\n\n        this._callbacks.set(e, t), this._projector.append(this.surface, t);\n      }\n\n      for (const e of t.removed) {\n        const t = this._projector.detach(this._callbacks.get(e));\n\n        this.surface.removeChild(t.domNode), this._callbacks.delete(e);\n      }\n    });\n  }\n\n  addItem(t) {\n    this.items.add(t);\n  }\n\n  removeItem(t) {\n    this.items.remove(t);\n  }\n\n  destroy() {\n    this.items.removeAll(), this._callbacks.forEach(t => this._projector.detach(t)), this._callbacks = null, this._projector = null, this._watchUpdatingTracking.destroy();\n  }\n\n  render() {\n    this._projector.renderNow();\n  }\n\n  computeBoundingRect(t) {\n    const e = this._hiddenSurface,\n          r = this._hiddenProjector;\n    let o = null;\n\n    const s = () => (o = t.render(), o);\n\n    r.append(e, s), r.renderNow();\n    const i = {\n      left: 0,\n      top: 0,\n      right: 0,\n      bottom: 0\n    };\n\n    if (o && o.domNode) {\n      const t = o.domNode.getBoundingClientRect();\n      i.left = t.left, i.top = t.top, i.right = t.right, i.bottom = t.bottom;\n    }\n\n    for (r.detach(s); e.firstChild;) e.removeChild(e.firstChild);\n\n    return i;\n  }\n\n  overlaps(t, e) {\n    const r = this.computeBoundingRect(t),\n          o = this.computeBoundingRect(e);\n    return Math.max(r.left, o.left) <= Math.min(r.right, o.right) && Math.max(r.top, o.top) <= Math.min(r.bottom, o.bottom);\n  }\n\n  get hasVisibleItems() {\n    return this.items.some(t => t.visible);\n  }\n\n  renderCanvas(t) {\n    if (!this.items.some(t => t.visible)) return;\n    const e = t.getContext(\"2d\");\n    e.save(), e.font = `10px ${getComputedStyle(this.surface).fontFamily}`, this.items.forEach(t => {\n      e.save(), t.renderCanvas(e), e.restore();\n    }), e.restore();\n  }\n\n};\nt([o({\n  readOnly: !0\n})], c.prototype, \"surface\", void 0), t([o({\n  readOnly: !0\n})], c.prototype, \"items\", void 0), t([o({\n  readOnly: !0\n})], c.prototype, \"needsRender\", null), t([o({\n  readOnly: !0\n})], c.prototype, \"_watchUpdatingTracking\", void 0), t([o({\n  readOnly: !0,\n  aliasOf: \"_watchUpdatingTracking.updating\"\n})], c.prototype, \"updating\", void 0), c = t([s(\"esri.views.overlay.ViewOverlay\")], c);\nconst n = c;\nexport { n as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/overlay/ViewOverlay.js"],"names":["_","t","e","r","property","o","subclass","s","createProjector","i","WatchUpdatingTracking","a","c","constructor","arguments","items","_watchUpdatingTracking","_callbacks","Map","_projector","_hiddenProjector","needsRender","length","initialize","document","createElement","className","_set","_hiddenSurface","setAttribute","appendChild","addOnCollectionChange","added","render","set","append","surface","removed","detach","get","removeChild","domNode","delete","addItem","add","removeItem","remove","destroy","removeAll","forEach","renderNow","computeBoundingRect","left","top","right","bottom","getBoundingClientRect","firstChild","overlaps","Math","max","min","hasVisibleItems","some","visible","renderCanvas","getContext","save","font","getComputedStyle","fontFamily","restore","readOnly","prototype","aliasOf","n","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import r from\"../../core/Collection.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../libs/maquette/projection.js\";import{createProjector as i}from\"../../libs/maquette/projector.js\";import{WatchUpdatingTracking as a}from\"../support/WatchUpdatingTracking.js\";let c=class extends e{constructor(){super(...arguments),this.items=new r,this._watchUpdatingTracking=new a,this._callbacks=new Map,this._projector=i(),this._hiddenProjector=i()}get needsRender(){return this.items.length>0}initialize(){const t=document.createElement(\"div\");t.className=\"esri-overlay-surface\",this._set(\"surface\",t),this._hiddenSurface=document.createElement(\"div\"),this._hiddenSurface.setAttribute(\"style\",\"visibility: hidden;\"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange((()=>this.items),(t=>{for(const e of t.added){const t=()=>e.render();this._callbacks.set(e,t),this._projector.append(this.surface,t)}for(const e of t.removed){const t=this._projector.detach(this._callbacks.get(e));this.surface.removeChild(t.domNode),this._callbacks.delete(e)}}))}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach((t=>this._projector.detach(t))),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const e=this._hiddenSurface,r=this._hiddenProjector;let o=null;const s=()=>(o=t.render(),o);r.append(e,s),r.renderNow();const i={left:0,top:0,right:0,bottom:0};if(o&&o.domNode){const t=o.domNode.getBoundingClientRect();i.left=t.left,i.top=t.top,i.right=t.right,i.bottom=t.bottom}for(r.detach(s);e.firstChild;)e.removeChild(e.firstChild);return i}overlaps(t,e){const r=this.computeBoundingRect(t),o=this.computeBoundingRect(e);return Math.max(r.left,o.left)<=Math.min(r.right,o.right)&&Math.max(r.top,o.top)<=Math.min(r.bottom,o.bottom)}get hasVisibleItems(){return this.items.some((t=>t.visible))}renderCanvas(t){if(!this.items.some((t=>t.visible)))return;const e=t.getContext(\"2d\");e.save(),e.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach((t=>{e.save(),t.renderCanvas(e),e.restore()})),e.restore()}};t([o({readOnly:!0})],c.prototype,\"surface\",void 0),t([o({readOnly:!0})],c.prototype,\"items\",void 0),t([o({readOnly:!0})],c.prototype,\"needsRender\",null),t([o({readOnly:!0})],c.prototype,\"_watchUpdatingTracking\",void 0),t([o({readOnly:!0,aliasOf:\"_watchUpdatingTracking.updating\"})],c.prototype,\"updating\",void 0),c=t([s(\"esri.views.overlay.ViewOverlay\")],c);const n=c;export{n as default};\n"]},"metadata":{},"sourceType":"module"}