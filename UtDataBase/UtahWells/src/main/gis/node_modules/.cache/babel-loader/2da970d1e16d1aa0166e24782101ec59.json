{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport i from \"../../../Graphic.js\";\nimport t from \"../../../core/Collection.js\";\nimport { watch as r, syncAndInitial as s, sync as a } from \"../../../core/reactiveUtils.js\";\nimport { property as h } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as o } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { GraphicsCollection as n } from \"../../../support/GraphicsCollection.js\";\nimport l from \"../engine/flow/FlowView2D.js\";\nimport { LayerView2DMixin as u } from \"./LayerView2D.js\";\nimport c from \"./graphics/GraphicsView2D.js\";\nimport w from \"./graphics/HighlightGraphicContainer.js\";\nimport p from \"./imagery/ImageryView2D.js\";\nimport d from \"./imagery/VectorFieldView2D.js\";\nimport { ImageryLayerView as v } from \"../../layers/ImageryLayerView.js\";\nimport m from \"../../layers/LayerView.js\";\nimport { RefreshableLayerView as y } from \"../../layers/RefreshableLayerView.js\";\nlet g = class extends v(y(u(m))) {\n  constructor() {\n    super(...arguments), this._exportImageVersion = -1, this._highlightGraphics = new n(), this.subview = null;\n  }\n\n  get pixelData() {\n    return this.updating ? null : \"getPixelData\" in this.subview ? this.subview.getPixelData() : null;\n  }\n\n  get updating() {\n    return !!(!this.subview || \"updating\" in this.subview && this.subview.updating);\n  }\n\n  async hitTest(e, i) {\n    return this.subview ? [this.subview.hitTest(e)] : null;\n  }\n\n  update(e) {\n    var i;\n    null == (i = this.subview) || i.update(e);\n  }\n\n  attach() {\n    this.layer.increaseRasterJobHandlerUsage(), this._setSubView(), this.view && (this._highlightView = new c({\n      view: this.view,\n      graphics: this._highlightGraphics,\n      requestUpdateCallback: () => this.requestUpdate(),\n      container: new w(this.view.featuresTilingScheme)\n    }), this.container.addChild(this._highlightView.container)), this.handles.add([r(() => {\n      var e;\n      return null != (e = this.layer.blendMode) ? e : \"normal\";\n    }, e => this.subview.container.blendMode = e, s), r(() => {\n      var e;\n      return null != (e = this.layer.effect) ? e : null;\n    }, e => this.subview.container.effect = e, s), r(() => this.layer.exportImageServiceParameters.version, e => {\n      e && this._exportImageVersion !== e && (this._exportImageVersion = e, this.requestUpdate());\n    }, a), r(() => this.timeExtent, e => {\n      this.subview.timeExtent = e, \"redraw\" in this.subview ? this.requestUpdate() : this.subview.redrawOrRefetch();\n    }, a), this.layer.on(\"redraw\", () => {\n      \"redraw\" in this.subview ? this.subview.redraw() : this.subview.redrawOrRefetch();\n    }), r(() => this.layer.renderer, () => this._setSubView())], \"imagerylayerview-update\");\n  }\n\n  detach() {\n    var e, i;\n    this.layer.decreaseRasterJobHandlerUsage(), this.container.removeAllChildren(), this._detachSubview(this.subview), null == (e = this.subview) || e.destroy(), this.handles.remove(\"imagerylayerview-update\"), this.subview = null, null == (i = this._highlightView) || i.destroy(), this._exportImageVersion = -1;\n  }\n\n  moveStart() {}\n\n  viewChange() {}\n\n  moveEnd() {\n    this.requestUpdate();\n  }\n\n  highlight(e, r) {\n    if (!((Array.isArray(e) ? e[0] : t.isCollection(e) ? e.getItemAt(0) : e) instanceof i)) return {\n      remove: () => {}\n    };\n    let s = [];\n    return Array.isArray(e) || t.isCollection(e) ? s = e.map(e => e.clone()) : e instanceof i && (s = [e.clone()]), this._highlightGraphics.addMany(s), {\n      remove: () => {\n        this._highlightGraphics.removeMany(s);\n      }\n    };\n  }\n\n  async doRefresh() {\n    this.requestUpdate();\n  }\n\n  isUpdating() {\n    return !this.subview || this.subview.updating;\n  }\n\n  _setSubView() {\n    var e;\n    if (!this.view) return;\n    const i = null == (e = this.layer.renderer) ? void 0 : e.type;\n    let t = \"imagery\";\n\n    if (\"vector-field\" === i && \"lerc\" === this.layer.format ? t = \"imageryVF\" : \"flow\" === i && (t = \"flow\"), this.subview) {\n      var r;\n      if (this.subview.type === t) return this._attachSubview(this.subview), void (\"flow\" === this.subview.type && this.subview.redrawOrRefetch());\n      this._detachSubview(this.subview), null == (r = this.subview) || r.destroy();\n    }\n\n    this.subview = \"imagery\" === t ? new p({\n      layer: this.layer,\n      view: this.view,\n      timeExtent: this.timeExtent\n    }) : \"imageryVF\" === t ? new d({\n      layer: this.layer,\n      view: this.view,\n      timeExtent: this.timeExtent\n    }) : new l({\n      layer: this.layer,\n      layerView: this\n    }), this._attachSubview(this.subview), this.requestUpdate();\n  }\n\n  _attachSubview(e) {\n    e && !e.attached && (e.attach(), e.attached = !0, this.container.addChildAt(e.container, 0), e.container.blendMode = this.layer.blendMode, e.container.effect = this.layer.effect);\n  }\n\n  _detachSubview(e) {\n    null != e && e.attached && (this.container.removeChild(e.container), e.detach(), e.attached = !1);\n  }\n\n};\ne([h()], g.prototype, \"pixelData\", null), e([h({\n  readOnly: !0\n})], g.prototype, \"updating\", null), e([h()], g.prototype, \"subview\", void 0), g = e([o(\"esri.views.2d.layers.ImageryLayerView2D\")], g);\nconst b = g;\nexport { b as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/ImageryLayerView2D.js"],"names":["_","e","i","t","watch","r","syncAndInitial","s","sync","a","property","h","subclass","o","GraphicsCollection","n","l","LayerView2DMixin","u","c","w","p","d","ImageryLayerView","v","m","RefreshableLayerView","y","g","constructor","arguments","_exportImageVersion","_highlightGraphics","subview","pixelData","updating","getPixelData","hitTest","update","attach","layer","increaseRasterJobHandlerUsage","_setSubView","view","_highlightView","graphics","requestUpdateCallback","requestUpdate","container","featuresTilingScheme","addChild","handles","add","blendMode","effect","exportImageServiceParameters","version","timeExtent","redrawOrRefetch","on","redraw","renderer","detach","decreaseRasterJobHandlerUsage","removeAllChildren","_detachSubview","destroy","remove","moveStart","viewChange","moveEnd","highlight","Array","isArray","isCollection","getItemAt","map","clone","addMany","removeMany","doRefresh","isUpdating","type","format","_attachSubview","layerView","attached","addChildAt","removeChild","prototype","readOnly","b","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import i from\"../../../Graphic.js\";import t from\"../../../core/Collection.js\";import{watch as r,syncAndInitial as s,sync as a}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as n}from\"../../../support/GraphicsCollection.js\";import l from\"../engine/flow/FlowView2D.js\";import{LayerView2DMixin as u}from\"./LayerView2D.js\";import c from\"./graphics/GraphicsView2D.js\";import w from\"./graphics/HighlightGraphicContainer.js\";import p from\"./imagery/ImageryView2D.js\";import d from\"./imagery/VectorFieldView2D.js\";import{ImageryLayerView as v}from\"../../layers/ImageryLayerView.js\";import m from\"../../layers/LayerView.js\";import{RefreshableLayerView as y}from\"../../layers/RefreshableLayerView.js\";let g=class extends(v(y(u(m)))){constructor(){super(...arguments),this._exportImageVersion=-1,this._highlightGraphics=new n,this.subview=null}get pixelData(){return this.updating?null:\"getPixelData\"in this.subview?this.subview.getPixelData():null}get updating(){return!!(!this.subview||\"updating\"in this.subview&&this.subview.updating)}async hitTest(e,i){return this.subview?[this.subview.hitTest(e)]:null}update(e){var i;null==(i=this.subview)||i.update(e)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.view&&(this._highlightView=new c({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new w(this.view.featuresTilingScheme)}),this.container.addChild(this._highlightView.container)),this.handles.add([r((()=>{var e;return null!=(e=this.layer.blendMode)?e:\"normal\"}),(e=>this.subview.container.blendMode=e),s),r((()=>{var e;return null!=(e=this.layer.effect)?e:null}),(e=>this.subview.container.effect=e),s),r((()=>this.layer.exportImageServiceParameters.version),(e=>{e&&this._exportImageVersion!==e&&(this._exportImageVersion=e,this.requestUpdate())}),a),r((()=>this.timeExtent),(e=>{this.subview.timeExtent=e,\"redraw\"in this.subview?this.requestUpdate():this.subview.redrawOrRefetch()}),a),this.layer.on(\"redraw\",(()=>{\"redraw\"in this.subview?this.subview.redraw():this.subview.redrawOrRefetch()})),r((()=>this.layer.renderer),(()=>this._setSubView()))],\"imagerylayerview-update\")}detach(){var e,i;this.layer.decreaseRasterJobHandlerUsage(),this.container.removeAllChildren(),this._detachSubview(this.subview),null==(e=this.subview)||e.destroy(),this.handles.remove(\"imagerylayerview-update\"),this.subview=null,null==(i=this._highlightView)||i.destroy(),this._exportImageVersion=-1}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}highlight(e,r){if(!((Array.isArray(e)?e[0]:t.isCollection(e)?e.getItemAt(0):e)instanceof i))return{remove:()=>{}};let s=[];return Array.isArray(e)||t.isCollection(e)?s=e.map((e=>e.clone())):e instanceof i&&(s=[e.clone()]),this._highlightGraphics.addMany(s),{remove:()=>{this._highlightGraphics.removeMany(s)}}}async doRefresh(){this.requestUpdate()}isUpdating(){return!this.subview||this.subview.updating}_setSubView(){var e;if(!this.view)return;const i=null==(e=this.layer.renderer)?void 0:e.type;let t=\"imagery\";if(\"vector-field\"===i&&\"lerc\"===this.layer.format?t=\"imageryVF\":\"flow\"===i&&(t=\"flow\"),this.subview){var r;if(this.subview.type===t)return this._attachSubview(this.subview),void(\"flow\"===this.subview.type&&this.subview.redrawOrRefetch());this._detachSubview(this.subview),null==(r=this.subview)||r.destroy()}this.subview=\"imagery\"===t?new p({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):\"imageryVF\"===t?new d({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new l({layer:this.layer,layerView:this}),this._attachSubview(this.subview),this.requestUpdate()}_attachSubview(e){e&&!e.attached&&(e.attach(),e.attached=!0,this.container.addChildAt(e.container,0),e.container.blendMode=this.layer.blendMode,e.container.effect=this.layer.effect)}_detachSubview(e){null!=e&&e.attached&&(this.container.removeChild(e.container),e.detach(),e.attached=!1)}};e([h()],g.prototype,\"pixelData\",null),e([h({readOnly:!0})],g.prototype,\"updating\",null),e([h()],g.prototype,\"subview\",void 0),g=e([o(\"esri.views.2d.layers.ImageryLayerView2D\")],g);const b=g;export{b as default};\n"]},"metadata":{},"sourceType":"module"}