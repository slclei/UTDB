{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../../../../chunks/tslib.es6.js\";\nimport \"../../../../geometry.js\";\nimport o from \"../../../../core/Accessor.js\";\nimport e from \"../../../../core/Logger.js\";\nimport { deg2rad as i } from \"../../../../core/mathUtils.js\";\nimport { isNone as r, isSome as s } from \"../../../../core/maybe.js\";\nimport { isAbortError as a } from \"../../../../core/promiseUtils.js\";\nimport { property as l } from \"../../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../../core/arrayUtils.js\";\nimport \"../../../../core/has.js\";\nimport \"../../../../core/accessorSupport/ensureType.js\";\nimport { subclass as n } from \"../../../../core/accessorSupport/decorators/subclass.js\";\nimport p from \"../../../../geometry/Point.js\";\nimport c from \"./FlowDisplayData.js\";\nimport { FlowDisplayObject as m } from \"./FlowDisplayObject.js\";\nimport d from \"../../../../geometry/Extent.js\";\nconst y = 1.15,\n      h = e.getLogger(\"esri.views.2d.engine.flow.FlowStrategy\");\nlet f = class extends o {\n  constructor(t) {\n    super(t), this._flowDisplayObject = new m(), this._loading = null;\n  }\n\n  initialize() {\n    this.flowContainer.addChild(this._flowDisplayObject);\n  }\n\n  destroy() {\n    this._clear(), this.flowContainer.removeAllChildren();\n  }\n\n  get updating() {\n    return null != this._loading;\n  }\n\n  update(t) {\n    const {\n      flowStyle: o\n    } = this.flowContainer;\n    if (r(o)) return void this._clear();\n    const {\n      extent: e,\n      rotation: i,\n      resolution: l,\n      pixelRatio: n\n    } = t.state,\n          p = g(e, i);\n    p.expand(y);\n    const m = [Math.round((p.xmax - p.xmin) / l), Math.round((p.ymax - p.ymin) / l)],\n          d = new c(o, p, m, n);\n\n    if (s(this._loading)) {\n      if (this._loading.update(d)) return;\n      this._loading.destroy(), this._loading = null;\n    }\n\n    !r(this._flowDisplayObject.displayData) && this._flowDisplayObject.displayData.update(d) || (d.load().then(() => {\n      this._flowDisplayObject.clear(), this._flowDisplayObject.displayData = this._loading, this._loading = null;\n    }, t => {\n      a(t) || (h.error(\"A resource failed to load.\", t), this._loading = null);\n    }), this._loading = d);\n  }\n\n  _clear() {\n    this._flowDisplayObject.clear(), s(this._loading) && (this._loading.destroy(), this._loading = null);\n  }\n\n};\nt([l()], f.prototype, \"_loading\", void 0), t([l()], f.prototype, \"flowContainer\", void 0), t([l()], f.prototype, \"updating\", null), f = t([n(\"esri.views.2d.engine.flow.FlowStrategy\")], f);\nconst u = f;\n\nfunction g(t, o) {\n  const e = new p({\n    x: (t.xmax + t.xmin) / 2,\n    y: (t.ymax + t.ymin) / 2,\n    spatialReference: t.spatialReference\n  }),\n        r = t.xmax - t.xmin,\n        s = t.ymax - t.ymin,\n        a = Math.abs(Math.cos(i(o))),\n        l = Math.abs(Math.sin(i(o))),\n        n = a * r + l * s,\n        c = l * r + a * s,\n        m = new d({\n    xmin: e.x - n / 2,\n    ymin: e.y - c / 2,\n    xmax: e.x + n / 2,\n    ymax: e.y + c / 2,\n    spatialReference: t.spatialReference\n  });\n  return m.centerAt(e), m;\n}\n\nexport { u as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/flow/FlowStrategy.js"],"names":["_","t","o","e","deg2rad","i","isNone","r","isSome","s","isAbortError","a","property","l","subclass","n","p","c","FlowDisplayObject","m","d","y","h","getLogger","f","constructor","_flowDisplayObject","_loading","initialize","flowContainer","addChild","destroy","_clear","removeAllChildren","updating","update","flowStyle","extent","rotation","resolution","pixelRatio","state","g","expand","Math","round","xmax","xmin","ymax","ymin","displayData","load","then","clear","error","prototype","u","x","spatialReference","abs","cos","sin","centerAt","default"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,iCAAlB;AAAoD,OAAM,yBAAN;AAAgC,OAAOC,CAAP,MAAa,8BAAb;AAA4C,OAAOC,CAAP,MAAa,4BAAb;AAA0C,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,+BAAxB;AAAwD,SAAOC,MAAM,IAAIC,CAAjB,EAAmBC,MAAM,IAAIC,CAA7B,QAAmC,2BAAnC;AAA+D,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,kCAA7B;AAAgE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,yDAAzB;AAAmF,OAAM,gCAAN;AAAuC,OAAM,yBAAN;AAAgC,OAAM,gDAAN;AAAuD,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,yDAAzB;AAAmF,OAAOC,CAAP,MAAa,+BAAb;AAA6C,OAAOC,CAAP,MAAa,sBAAb;AAAoC,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,wBAAlC;AAA2D,OAAOC,CAAP,MAAa,gCAAb;AAA8C,MAAMC,CAAC,GAAC,IAAR;AAAA,MAAaC,CAAC,GAACnB,CAAC,CAACoB,SAAF,CAAY,wCAAZ,CAAf;AAAqE,IAAIC,CAAC,GAAC,cAActB,CAAd,CAAe;AAACuB,EAAAA,WAAW,CAACxB,CAAD,EAAG;AAAC,UAAMA,CAAN,GAAS,KAAKyB,kBAAL,GAAwB,IAAIP,CAAJ,EAAjC,EAAuC,KAAKQ,QAAL,GAAc,IAArD;AAA0D;;AAAAC,EAAAA,UAAU,GAAE;AAAC,SAAKC,aAAL,CAAmBC,QAAnB,CAA4B,KAAKJ,kBAAjC;AAAqD;;AAAAK,EAAAA,OAAO,GAAE;AAAC,SAAKC,MAAL,IAAc,KAAKH,aAAL,CAAmBI,iBAAnB,EAAd;AAAqD;;AAAY,MAARC,QAAQ,GAAE;AAAC,WAAO,QAAM,KAAKP,QAAlB;AAA2B;;AAAAQ,EAAAA,MAAM,CAAClC,CAAD,EAAG;AAAC,UAAK;AAACmC,MAAAA,SAAS,EAAClC;AAAX,QAAc,KAAK2B,aAAxB;AAAsC,QAAGtB,CAAC,CAACL,CAAD,CAAJ,EAAQ,OAAO,KAAK,KAAK8B,MAAL,EAAZ;AAA0B,UAAK;AAACK,MAAAA,MAAM,EAAClC,CAAR;AAAUmC,MAAAA,QAAQ,EAACjC,CAAnB;AAAqBkC,MAAAA,UAAU,EAAC1B,CAAhC;AAAkC2B,MAAAA,UAAU,EAACzB;AAA7C,QAAgDd,CAAC,CAACwC,KAAvD;AAAA,UAA6DzB,CAAC,GAAC0B,CAAC,CAACvC,CAAD,EAAGE,CAAH,CAAhE;AAAsEW,IAAAA,CAAC,CAAC2B,MAAF,CAAStB,CAAT;AAAY,UAAMF,CAAC,GAAC,CAACyB,IAAI,CAACC,KAAL,CAAW,CAAC7B,CAAC,CAAC8B,IAAF,GAAO9B,CAAC,CAAC+B,IAAV,IAAgBlC,CAA3B,CAAD,EAA+B+B,IAAI,CAACC,KAAL,CAAW,CAAC7B,CAAC,CAACgC,IAAF,GAAOhC,CAAC,CAACiC,IAAV,IAAgBpC,CAA3B,CAA/B,CAAR;AAAA,UAAsEO,CAAC,GAAC,IAAIH,CAAJ,CAAMf,CAAN,EAAQc,CAAR,EAAUG,CAAV,EAAYJ,CAAZ,CAAxE;;AAAuF,QAAGN,CAAC,CAAC,KAAKkB,QAAN,CAAJ,EAAoB;AAAC,UAAG,KAAKA,QAAL,CAAcQ,MAAd,CAAqBf,CAArB,CAAH,EAA2B;AAAO,WAAKO,QAAL,CAAcI,OAAd,IAAwB,KAAKJ,QAAL,GAAc,IAAtC;AAA2C;;AAAA,KAACpB,CAAC,CAAC,KAAKmB,kBAAL,CAAwBwB,WAAzB,CAAF,IAAyC,KAAKxB,kBAAL,CAAwBwB,WAAxB,CAAoCf,MAApC,CAA2Cf,CAA3C,CAAzC,KAAyFA,CAAC,CAAC+B,IAAF,GAASC,IAAT,CAAe,MAAI;AAAC,WAAK1B,kBAAL,CAAwB2B,KAAxB,IAAgC,KAAK3B,kBAAL,CAAwBwB,WAAxB,GAAoC,KAAKvB,QAAzE,EAAkF,KAAKA,QAAL,GAAc,IAAhG;AAAqG,KAAzH,EAA4H1B,CAAC,IAAE;AAACU,MAAAA,CAAC,CAACV,CAAD,CAAD,KAAOqB,CAAC,CAACgC,KAAF,CAAQ,4BAAR,EAAqCrD,CAArC,GAAwC,KAAK0B,QAAL,GAAc,IAA7D;AAAmE,KAAnM,GAAsM,KAAKA,QAAL,GAAcP,CAA7S;AAAgT;;AAAAY,EAAAA,MAAM,GAAE;AAAC,SAAKN,kBAAL,CAAwB2B,KAAxB,IAAgC5C,CAAC,CAAC,KAAKkB,QAAN,CAAD,KAAmB,KAAKA,QAAL,CAAcI,OAAd,IAAwB,KAAKJ,QAAL,GAAc,IAAzD,CAAhC;AAA+F;;AAA1+B,CAArB;AAAigC1B,CAAC,CAAC,CAACY,CAAC,EAAF,CAAD,EAAOW,CAAC,CAAC+B,SAAT,EAAmB,UAAnB,EAA8B,KAAK,CAAnC,CAAD,EAAuCtD,CAAC,CAAC,CAACY,CAAC,EAAF,CAAD,EAAOW,CAAC,CAAC+B,SAAT,EAAmB,eAAnB,EAAmC,KAAK,CAAxC,CAAxC,EAAmFtD,CAAC,CAAC,CAACY,CAAC,EAAF,CAAD,EAAOW,CAAC,CAAC+B,SAAT,EAAmB,UAAnB,EAA8B,IAA9B,CAApF,EAAwH/B,CAAC,GAACvB,CAAC,CAAC,CAACc,CAAC,CAAC,wCAAD,CAAF,CAAD,EAA+CS,CAA/C,CAA3H;AAA6K,MAAMgC,CAAC,GAAChC,CAAR;;AAAU,SAASkB,CAAT,CAAWzC,CAAX,EAAaC,CAAb,EAAe;AAAC,QAAMC,CAAC,GAAC,IAAIa,CAAJ,CAAM;AAACyC,IAAAA,CAAC,EAAC,CAACxD,CAAC,CAAC6C,IAAF,GAAO7C,CAAC,CAAC8C,IAAV,IAAgB,CAAnB;AAAqB1B,IAAAA,CAAC,EAAC,CAACpB,CAAC,CAAC+C,IAAF,GAAO/C,CAAC,CAACgD,IAAV,IAAgB,CAAvC;AAAyCS,IAAAA,gBAAgB,EAACzD,CAAC,CAACyD;AAA5D,GAAN,CAAR;AAAA,QAA6FnD,CAAC,GAACN,CAAC,CAAC6C,IAAF,GAAO7C,CAAC,CAAC8C,IAAxG;AAAA,QAA6GtC,CAAC,GAACR,CAAC,CAAC+C,IAAF,GAAO/C,CAAC,CAACgD,IAAxH;AAAA,QAA6HtC,CAAC,GAACiC,IAAI,CAACe,GAAL,CAASf,IAAI,CAACgB,GAAL,CAASvD,CAAC,CAACH,CAAD,CAAV,CAAT,CAA/H;AAAA,QAAwJW,CAAC,GAAC+B,IAAI,CAACe,GAAL,CAASf,IAAI,CAACiB,GAAL,CAASxD,CAAC,CAACH,CAAD,CAAV,CAAT,CAA1J;AAAA,QAAmLa,CAAC,GAACJ,CAAC,GAACJ,CAAF,GAAIM,CAAC,GAACJ,CAA3L;AAAA,QAA6LQ,CAAC,GAACJ,CAAC,GAACN,CAAF,GAAII,CAAC,GAACF,CAArM;AAAA,QAAuMU,CAAC,GAAC,IAAIC,CAAJ,CAAM;AAAC2B,IAAAA,IAAI,EAAC5C,CAAC,CAACsD,CAAF,GAAI1C,CAAC,GAAC,CAAZ;AAAckC,IAAAA,IAAI,EAAC9C,CAAC,CAACkB,CAAF,GAAIJ,CAAC,GAAC,CAAzB;AAA2B6B,IAAAA,IAAI,EAAC3C,CAAC,CAACsD,CAAF,GAAI1C,CAAC,GAAC,CAAtC;AAAwCiC,IAAAA,IAAI,EAAC7C,CAAC,CAACkB,CAAF,GAAIJ,CAAC,GAAC,CAAnD;AAAqDyC,IAAAA,gBAAgB,EAACzD,CAAC,CAACyD;AAAxE,GAAN,CAAzM;AAA0S,SAAOvC,CAAC,CAAC2C,QAAF,CAAW3D,CAAX,GAAcgB,CAArB;AAAuB;;AAAA,SAAOqC,CAAC,IAAIO,OAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../chunks/tslib.es6.js\";import\"../../../../geometry.js\";import o from\"../../../../core/Accessor.js\";import e from\"../../../../core/Logger.js\";import{deg2rad as i}from\"../../../../core/mathUtils.js\";import{isNone as r,isSome as s}from\"../../../../core/maybe.js\";import{isAbortError as a}from\"../../../../core/promiseUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{subclass as n}from\"../../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../../geometry/Point.js\";import c from\"./FlowDisplayData.js\";import{FlowDisplayObject as m}from\"./FlowDisplayObject.js\";import d from\"../../../../geometry/Extent.js\";const y=1.15,h=e.getLogger(\"esri.views.2d.engine.flow.FlowStrategy\");let f=class extends o{constructor(t){super(t),this._flowDisplayObject=new m,this._loading=null}initialize(){this.flowContainer.addChild(this._flowDisplayObject)}destroy(){this._clear(),this.flowContainer.removeAllChildren()}get updating(){return null!=this._loading}update(t){const{flowStyle:o}=this.flowContainer;if(r(o))return void this._clear();const{extent:e,rotation:i,resolution:l,pixelRatio:n}=t.state,p=g(e,i);p.expand(y);const m=[Math.round((p.xmax-p.xmin)/l),Math.round((p.ymax-p.ymin)/l)],d=new c(o,p,m,n);if(s(this._loading)){if(this._loading.update(d))return;this._loading.destroy(),this._loading=null}!r(this._flowDisplayObject.displayData)&&this._flowDisplayObject.displayData.update(d)||(d.load().then((()=>{this._flowDisplayObject.clear(),this._flowDisplayObject.displayData=this._loading,this._loading=null}),(t=>{a(t)||(h.error(\"A resource failed to load.\",t),this._loading=null)})),this._loading=d)}_clear(){this._flowDisplayObject.clear(),s(this._loading)&&(this._loading.destroy(),this._loading=null)}};t([l()],f.prototype,\"_loading\",void 0),t([l()],f.prototype,\"flowContainer\",void 0),t([l()],f.prototype,\"updating\",null),f=t([n(\"esri.views.2d.engine.flow.FlowStrategy\")],f);const u=f;function g(t,o){const e=new p({x:(t.xmax+t.xmin)/2,y:(t.ymax+t.ymin)/2,spatialReference:t.spatialReference}),r=t.xmax-t.xmin,s=t.ymax-t.ymin,a=Math.abs(Math.cos(i(o))),l=Math.abs(Math.sin(i(o))),n=a*r+l*s,c=l*r+a*s,m=new d({xmin:e.x-n/2,ymin:e.y-c/2,xmax:e.x+n/2,ymax:e.y+c/2,spatialReference:t.spatialReference});return m.centerAt(e),m}export{u as default};\n"]},"metadata":{},"sourceType":"module"}