{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../VertexStream.js\";\nimport { BlendFactor as t, TargetType as r, DepthStencilTargetType as s, TextureType as i, PixelFormat as a, PixelType as n, TextureWrapMode as o, TextureSamplingMode as u } from \"../../../../../webgl/enums.js\";\nimport { FramebufferObject as l } from \"../../../../../webgl/FramebufferObject.js\";\nconst d = [1, 0],\n      _ = [0, 1];\n\nclass b {\n  constructor() {\n    this._blurFBO = null, this._size = [0, 0], this._programDesc = {\n      gaussianBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/gaussianBlur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      radialBlur: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blur/radial-blur\",\n        attributes: new Map([[\"a_position\", 0]])\n      },\n      blit: {\n        vsPath: \"post-processing/pp\",\n        fsPath: \"post-processing/blit\",\n        attributes: new Map([[\"a_position\", 0]])\n      }\n    };\n  }\n\n  dispose() {\n    this._blurFBO && (this._blurFBO.dispose(), this._blurFBO = null);\n  }\n\n  draw(t, r, s) {\n    const {\n      context: i\n    } = t,\n          {\n      type: a,\n      radius: n\n    } = s;\n    if (0 === n) return;\n    this._createOrResizeResources(t), this._quad || (this._quad = new e(i, [-1, -1, 1, -1, -1, 1, 1, 1]));\n    const o = this._quad;\n    o.bind(), \"blur\" === a ? this._gaussianBlur(t, r, n) : this._radialBlur(t, r), o.unbind();\n  }\n\n  _gaussianBlur(e, r, s) {\n    const {\n      context: i,\n      state: a,\n      painter: n,\n      pixelRatio: o\n    } = e,\n          {\n      size: u\n    } = a,\n          {\n      materialManager: l\n    } = n,\n          b = this._programDesc,\n          p = this._quad,\n          c = [Math.round(o * u[0]), Math.round(o * u[1])],\n          h = this._blurFBO,\n          g = l.getProgram(e, b.gaussianBlur, [{\n      name: \"radius\",\n      value: Math.ceil(s)\n    }]);\n    i.useProgram(g), i.setBlendingEnabled(!1), i.bindFramebuffer(h), i.bindTexture(r.colorTexture, 4), g.setUniform1i(\"u_colorTexture\", 4), g.setUniform2fv(\"u_texSize\", c), g.setUniform2fv(\"u_direction\", d), g.setUniform1f(\"u_sigma\", s), p.draw(), i.bindFramebuffer(r), i.setStencilWriteMask(0), i.setStencilTestEnabled(!1), i.setDepthWriteEnabled(!1), i.setDepthTestEnabled(!1), i.bindTexture(h.colorTexture, 5), g.setUniform1i(\"u_colorTexture\", 5), g.setUniform2fv(\"u_direction\", _), p.draw(), i.setBlendingEnabled(!0), i.setBlendFunction(t.ONE, t.ONE_MINUS_SRC_ALPHA), i.setStencilTestEnabled(!0);\n  }\n\n  _radialBlur(e, r) {\n    const {\n      context: s,\n      painter: i\n    } = e,\n          {\n      materialManager: a\n    } = i,\n          n = this._programDesc,\n          o = this._quad,\n          u = this._blurFBO;\n    s.bindFramebuffer(u);\n    const l = a.getProgram(e, n.radialBlur);\n    s.useProgram(l), s.setBlendingEnabled(!1), s.bindTexture(r.colorTexture, 4), l.setUniform1i(\"u_colorTexture\", 4), o.draw(), s.bindFramebuffer(r), s.setStencilWriteMask(0), s.setStencilTestEnabled(!1), s.setDepthWriteEnabled(!1), s.setDepthTestEnabled(!1), s.setBlendingEnabled(!0);\n    const d = a.getProgram(e, n.blit);\n    s.useProgram(d), s.bindTexture(u.colorTexture, 5), d.setUniform1i(\"u_texture\", 5), s.setBlendFunction(t.ONE, t.ONE_MINUS_SRC_ALPHA), o.draw();\n  }\n\n  _createOrResizeResources(e) {\n    const {\n      context: t,\n      state: d,\n      pixelRatio: _\n    } = e,\n          {\n      size: b\n    } = d,\n          p = Math.round(_ * b[0]),\n          c = Math.round(_ * b[1]);\n    this._blurFBO && this._size[0] === p && this._size[1] === c || (this._size[0] = p, this._size[1] = c, this._blurFBO ? this._blurFBO.resize(p, c) : this._blurFBO = new l(t, {\n      colorTarget: r.TEXTURE,\n      depthStencilTarget: s.NONE,\n      width: p,\n      height: c\n    }, {\n      target: i.TEXTURE_2D,\n      pixelFormat: a.RGBA,\n      internalFormat: a.RGBA,\n      dataType: n.UNSIGNED_BYTE,\n      wrapMode: o.CLAMP_TO_EDGE,\n      samplingMode: u.LINEAR,\n      flipped: !1,\n      width: p,\n      height: c\n    }));\n  }\n\n}\n\nexport { b as Blur };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/effects/post-processing/Blur.js"],"names":["e","BlendFactor","t","TargetType","r","DepthStencilTargetType","s","TextureType","i","PixelFormat","a","PixelType","n","TextureWrapMode","o","TextureSamplingMode","u","FramebufferObject","l","d","_","b","constructor","_blurFBO","_size","_programDesc","gaussianBlur","vsPath","fsPath","attributes","Map","radialBlur","blit","dispose","draw","context","type","radius","_createOrResizeResources","_quad","bind","_gaussianBlur","_radialBlur","unbind","state","painter","pixelRatio","size","materialManager","p","c","Math","round","h","g","getProgram","name","value","ceil","useProgram","setBlendingEnabled","bindFramebuffer","bindTexture","colorTexture","setUniform1i","setUniform2fv","setUniform1f","setStencilWriteMask","setStencilTestEnabled","setDepthWriteEnabled","setDepthTestEnabled","setBlendFunction","ONE","ONE_MINUS_SRC_ALPHA","resize","colorTarget","TEXTURE","depthStencilTarget","NONE","width","height","target","TEXTURE_2D","pixelFormat","RGBA","internalFormat","dataType","UNSIGNED_BYTE","wrapMode","CLAMP_TO_EDGE","samplingMode","LINEAR","flipped","Blur"],"mappings":"AAAA;AACA;AACA;AACA;AACA,OAAOA,CAAP,MAAa,uBAAb;AAAqC,SAAOC,WAAW,IAAIC,CAAtB,EAAwBC,UAAU,IAAIC,CAAtC,EAAwCC,sBAAsB,IAAIC,CAAlE,EAAoEC,WAAW,IAAIC,CAAnF,EAAqFC,WAAW,IAAIC,CAApG,EAAsGC,SAAS,IAAIC,CAAnH,EAAqHC,eAAe,IAAIC,CAAxI,EAA0IC,mBAAmB,IAAIC,CAAjK,QAAuK,+BAAvK;AAAuM,SAAOC,iBAAiB,IAAIC,CAA5B,QAAkC,2CAAlC;AAA8E,MAAMC,CAAC,GAAC,CAAC,CAAD,EAAG,CAAH,CAAR;AAAA,MAAcC,CAAC,GAAC,CAAC,CAAD,EAAG,CAAH,CAAhB;;AAAsB,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,GAAE;AAAC,SAAKC,QAAL,GAAc,IAAd,EAAmB,KAAKC,KAAL,GAAW,CAAC,CAAD,EAAG,CAAH,CAA9B,EAAoC,KAAKC,YAAL,GAAkB;AAACC,MAAAA,YAAY,EAAC;AAACC,QAAAA,MAAM,EAAC,oBAAR;AAA6BC,QAAAA,MAAM,EAAC,mCAApC;AAAwEC,QAAAA,UAAU,EAAC,IAAIC,GAAJ,CAAQ,CAAC,CAAC,YAAD,EAAc,CAAd,CAAD,CAAR;AAAnF,OAAd;AAA8HC,MAAAA,UAAU,EAAC;AAACJ,QAAAA,MAAM,EAAC,oBAAR;AAA6BC,QAAAA,MAAM,EAAC,kCAApC;AAAuEC,QAAAA,UAAU,EAAC,IAAIC,GAAJ,CAAQ,CAAC,CAAC,YAAD,EAAc,CAAd,CAAD,CAAR;AAAlF,OAAzI;AAAwPE,MAAAA,IAAI,EAAC;AAACL,QAAAA,MAAM,EAAC,oBAAR;AAA6BC,QAAAA,MAAM,EAAC,sBAApC;AAA2DC,QAAAA,UAAU,EAAC,IAAIC,GAAJ,CAAQ,CAAC,CAAC,YAAD,EAAc,CAAd,CAAD,CAAR;AAAtE;AAA7P,KAAtD;AAAuZ;;AAAAG,EAAAA,OAAO,GAAE;AAAC,SAAKV,QAAL,KAAgB,KAAKA,QAAL,CAAcU,OAAd,IAAwB,KAAKV,QAAL,GAAc,IAAtD;AAA4D;;AAAAW,EAAAA,IAAI,CAAChC,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,UAAK;AAAC6B,MAAAA,OAAO,EAAC3B;AAAT,QAAYN,CAAjB;AAAA,UAAmB;AAACkC,MAAAA,IAAI,EAAC1B,CAAN;AAAQ2B,MAAAA,MAAM,EAACzB;AAAf,QAAkBN,CAArC;AAAuC,QAAG,MAAIM,CAAP,EAAS;AAAO,SAAK0B,wBAAL,CAA8BpC,CAA9B,GAAiC,KAAKqC,KAAL,KAAa,KAAKA,KAAL,GAAW,IAAIvC,CAAJ,CAAMQ,CAAN,EAAQ,CAAC,CAAC,CAAF,EAAI,CAAC,CAAL,EAAO,CAAP,EAAS,CAAC,CAAV,EAAY,CAAC,CAAb,EAAe,CAAf,EAAiB,CAAjB,EAAmB,CAAnB,CAAR,CAAxB,CAAjC;AAAyF,UAAMM,CAAC,GAAC,KAAKyB,KAAb;AAAmBzB,IAAAA,CAAC,CAAC0B,IAAF,IAAS,WAAS9B,CAAT,GAAW,KAAK+B,aAAL,CAAmBvC,CAAnB,EAAqBE,CAArB,EAAuBQ,CAAvB,CAAX,GAAqC,KAAK8B,WAAL,CAAiBxC,CAAjB,EAAmBE,CAAnB,CAA9C,EAAoEU,CAAC,CAAC6B,MAAF,EAApE;AAA+E;;AAAAF,EAAAA,aAAa,CAACzC,CAAD,EAAGI,CAAH,EAAKE,CAAL,EAAO;AAAC,UAAK;AAAC6B,MAAAA,OAAO,EAAC3B,CAAT;AAAWoC,MAAAA,KAAK,EAAClC,CAAjB;AAAmBmC,MAAAA,OAAO,EAACjC,CAA3B;AAA6BkC,MAAAA,UAAU,EAAChC;AAAxC,QAA2Cd,CAAhD;AAAA,UAAkD;AAAC+C,MAAAA,IAAI,EAAC/B;AAAN,QAASN,CAA3D;AAAA,UAA6D;AAACsC,MAAAA,eAAe,EAAC9B;AAAjB,QAAoBN,CAAjF;AAAA,UAAmFS,CAAC,GAAC,KAAKI,YAA1F;AAAA,UAAuGwB,CAAC,GAAC,KAAKV,KAA9G;AAAA,UAAoHW,CAAC,GAAC,CAACC,IAAI,CAACC,KAAL,CAAWtC,CAAC,GAACE,CAAC,CAAC,CAAD,CAAd,CAAD,EAAoBmC,IAAI,CAACC,KAAL,CAAWtC,CAAC,GAACE,CAAC,CAAC,CAAD,CAAd,CAApB,CAAtH;AAAA,UAA8JqC,CAAC,GAAC,KAAK9B,QAArK;AAAA,UAA8K+B,CAAC,GAACpC,CAAC,CAACqC,UAAF,CAAavD,CAAb,EAAeqB,CAAC,CAACK,YAAjB,EAA8B,CAAC;AAAC8B,MAAAA,IAAI,EAAC,QAAN;AAAeC,MAAAA,KAAK,EAACN,IAAI,CAACO,IAAL,CAAUpD,CAAV;AAArB,KAAD,CAA9B,CAAhL;AAAoPE,IAAAA,CAAC,CAACmD,UAAF,CAAaL,CAAb,GAAgB9C,CAAC,CAACoD,kBAAF,CAAqB,CAAC,CAAtB,CAAhB,EAAyCpD,CAAC,CAACqD,eAAF,CAAkBR,CAAlB,CAAzC,EAA8D7C,CAAC,CAACsD,WAAF,CAAc1D,CAAC,CAAC2D,YAAhB,EAA6B,CAA7B,CAA9D,EAA8FT,CAAC,CAACU,YAAF,CAAe,gBAAf,EAAgC,CAAhC,CAA9F,EAAiIV,CAAC,CAACW,aAAF,CAAgB,WAAhB,EAA4Bf,CAA5B,CAAjI,EAAgKI,CAAC,CAACW,aAAF,CAAgB,aAAhB,EAA8B9C,CAA9B,CAAhK,EAAiMmC,CAAC,CAACY,YAAF,CAAe,SAAf,EAAyB5D,CAAzB,CAAjM,EAA6N2C,CAAC,CAACf,IAAF,EAA7N,EAAsO1B,CAAC,CAACqD,eAAF,CAAkBzD,CAAlB,CAAtO,EAA2PI,CAAC,CAAC2D,mBAAF,CAAsB,CAAtB,CAA3P,EAAoR3D,CAAC,CAAC4D,qBAAF,CAAwB,CAAC,CAAzB,CAApR,EAAgT5D,CAAC,CAAC6D,oBAAF,CAAuB,CAAC,CAAxB,CAAhT,EAA2U7D,CAAC,CAAC8D,mBAAF,CAAsB,CAAC,CAAvB,CAA3U,EAAqW9D,CAAC,CAACsD,WAAF,CAAcT,CAAC,CAACU,YAAhB,EAA6B,CAA7B,CAArW,EAAqYT,CAAC,CAACU,YAAF,CAAe,gBAAf,EAAgC,CAAhC,CAArY,EAAwaV,CAAC,CAACW,aAAF,CAAgB,aAAhB,EAA8B7C,CAA9B,CAAxa,EAAyc6B,CAAC,CAACf,IAAF,EAAzc,EAAkd1B,CAAC,CAACoD,kBAAF,CAAqB,CAAC,CAAtB,CAAld,EAA2epD,CAAC,CAAC+D,gBAAF,CAAmBrE,CAAC,CAACsE,GAArB,EAAyBtE,CAAC,CAACuE,mBAA3B,CAA3e,EAA2hBjE,CAAC,CAAC4D,qBAAF,CAAwB,CAAC,CAAzB,CAA3hB;AAAujB;;AAAA1B,EAAAA,WAAW,CAAC1C,CAAD,EAAGI,CAAH,EAAK;AAAC,UAAK;AAAC+B,MAAAA,OAAO,EAAC7B,CAAT;AAAWuC,MAAAA,OAAO,EAACrC;AAAnB,QAAsBR,CAA3B;AAAA,UAA6B;AAACgD,MAAAA,eAAe,EAACtC;AAAjB,QAAoBF,CAAjD;AAAA,UAAmDI,CAAC,GAAC,KAAKa,YAA1D;AAAA,UAAuEX,CAAC,GAAC,KAAKyB,KAA9E;AAAA,UAAoFvB,CAAC,GAAC,KAAKO,QAA3F;AAAoGjB,IAAAA,CAAC,CAACuD,eAAF,CAAkB7C,CAAlB;AAAqB,UAAME,CAAC,GAACR,CAAC,CAAC6C,UAAF,CAAavD,CAAb,EAAeY,CAAC,CAACmB,UAAjB,CAAR;AAAqCzB,IAAAA,CAAC,CAACqD,UAAF,CAAazC,CAAb,GAAgBZ,CAAC,CAACsD,kBAAF,CAAqB,CAAC,CAAtB,CAAhB,EAAyCtD,CAAC,CAACwD,WAAF,CAAc1D,CAAC,CAAC2D,YAAhB,EAA6B,CAA7B,CAAzC,EAAyE7C,CAAC,CAAC8C,YAAF,CAAe,gBAAf,EAAgC,CAAhC,CAAzE,EAA4GlD,CAAC,CAACoB,IAAF,EAA5G,EAAqH5B,CAAC,CAACuD,eAAF,CAAkBzD,CAAlB,CAArH,EAA0IE,CAAC,CAAC6D,mBAAF,CAAsB,CAAtB,CAA1I,EAAmK7D,CAAC,CAAC8D,qBAAF,CAAwB,CAAC,CAAzB,CAAnK,EAA+L9D,CAAC,CAAC+D,oBAAF,CAAuB,CAAC,CAAxB,CAA/L,EAA0N/D,CAAC,CAACgE,mBAAF,CAAsB,CAAC,CAAvB,CAA1N,EAAoPhE,CAAC,CAACsD,kBAAF,CAAqB,CAAC,CAAtB,CAApP;AAA6Q,UAAMzC,CAAC,GAACT,CAAC,CAAC6C,UAAF,CAAavD,CAAb,EAAeY,CAAC,CAACoB,IAAjB,CAAR;AAA+B1B,IAAAA,CAAC,CAACqD,UAAF,CAAaxC,CAAb,GAAgBb,CAAC,CAACwD,WAAF,CAAc9C,CAAC,CAAC+C,YAAhB,EAA6B,CAA7B,CAAhB,EAAgD5C,CAAC,CAAC6C,YAAF,CAAe,WAAf,EAA2B,CAA3B,CAAhD,EAA8E1D,CAAC,CAACiE,gBAAF,CAAmBrE,CAAC,CAACsE,GAArB,EAAyBtE,CAAC,CAACuE,mBAA3B,CAA9E,EAA8H3D,CAAC,CAACoB,IAAF,EAA9H;AAAuI;;AAAAI,EAAAA,wBAAwB,CAACtC,CAAD,EAAG;AAAC,UAAK;AAACmC,MAAAA,OAAO,EAACjC,CAAT;AAAW0C,MAAAA,KAAK,EAACzB,CAAjB;AAAmB2B,MAAAA,UAAU,EAAC1B;AAA9B,QAAiCpB,CAAtC;AAAA,UAAwC;AAAC+C,MAAAA,IAAI,EAAC1B;AAAN,QAASF,CAAjD;AAAA,UAAmD8B,CAAC,GAACE,IAAI,CAACC,KAAL,CAAWhC,CAAC,GAACC,CAAC,CAAC,CAAD,CAAd,CAArD;AAAA,UAAwE6B,CAAC,GAACC,IAAI,CAACC,KAAL,CAAWhC,CAAC,GAACC,CAAC,CAAC,CAAD,CAAd,CAA1E;AAA6F,SAAKE,QAAL,IAAe,KAAKC,KAAL,CAAW,CAAX,MAAgByB,CAA/B,IAAkC,KAAKzB,KAAL,CAAW,CAAX,MAAgB0B,CAAlD,KAAsD,KAAK1B,KAAL,CAAW,CAAX,IAAcyB,CAAd,EAAgB,KAAKzB,KAAL,CAAW,CAAX,IAAc0B,CAA9B,EAAgC,KAAK3B,QAAL,GAAc,KAAKA,QAAL,CAAcmD,MAAd,CAAqBzB,CAArB,EAAuBC,CAAvB,CAAd,GAAwC,KAAK3B,QAAL,GAAc,IAAIL,CAAJ,CAAMhB,CAAN,EAAQ;AAACyE,MAAAA,WAAW,EAACvE,CAAC,CAACwE,OAAf;AAAuBC,MAAAA,kBAAkB,EAACvE,CAAC,CAACwE,IAA5C;AAAiDC,MAAAA,KAAK,EAAC9B,CAAvD;AAAyD+B,MAAAA,MAAM,EAAC9B;AAAhE,KAAR,EAA2E;AAAC+B,MAAAA,MAAM,EAACzE,CAAC,CAAC0E,UAAV;AAAqBC,MAAAA,WAAW,EAACzE,CAAC,CAAC0E,IAAnC;AAAwCC,MAAAA,cAAc,EAAC3E,CAAC,CAAC0E,IAAzD;AAA8DE,MAAAA,QAAQ,EAAC1E,CAAC,CAAC2E,aAAzE;AAAuFC,MAAAA,QAAQ,EAAC1E,CAAC,CAAC2E,aAAlG;AAAgHC,MAAAA,YAAY,EAAC1E,CAAC,CAAC2E,MAA/H;AAAsIC,MAAAA,OAAO,EAAC,CAAC,CAA/I;AAAiJb,MAAAA,KAAK,EAAC9B,CAAvJ;AAAyJ+B,MAAAA,MAAM,EAAC9B;AAAhK,KAA3E,CAA5I;AAA4X;;AAAjoF;;AAAkoF,SAAO7B,CAAC,IAAIwE,IAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../VertexStream.js\";import{BlendFactor as t,TargetType as r,DepthStencilTargetType as s,TextureType as i,PixelFormat as a,PixelType as n,TextureWrapMode as o,TextureSamplingMode as u}from\"../../../../../webgl/enums.js\";import{FramebufferObject as l}from\"../../../../../webgl/FramebufferObject.js\";const d=[1,0],_=[0,1];class b{constructor(){this._blurFBO=null,this._size=[0,0],this._programDesc={gaussianBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blur/gaussianBlur\",attributes:new Map([[\"a_position\",0]])},radialBlur:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blur/radial-blur\",attributes:new Map([[\"a_position\",0]])},blit:{vsPath:\"post-processing/pp\",fsPath:\"post-processing/blit\",attributes:new Map([[\"a_position\",0]])}}}dispose(){this._blurFBO&&(this._blurFBO.dispose(),this._blurFBO=null)}draw(t,r,s){const{context:i}=t,{type:a,radius:n}=s;if(0===n)return;this._createOrResizeResources(t),this._quad||(this._quad=new e(i,[-1,-1,1,-1,-1,1,1,1]));const o=this._quad;o.bind(),\"blur\"===a?this._gaussianBlur(t,r,n):this._radialBlur(t,r),o.unbind()}_gaussianBlur(e,r,s){const{context:i,state:a,painter:n,pixelRatio:o}=e,{size:u}=a,{materialManager:l}=n,b=this._programDesc,p=this._quad,c=[Math.round(o*u[0]),Math.round(o*u[1])],h=this._blurFBO,g=l.getProgram(e,b.gaussianBlur,[{name:\"radius\",value:Math.ceil(s)}]);i.useProgram(g),i.setBlendingEnabled(!1),i.bindFramebuffer(h),i.bindTexture(r.colorTexture,4),g.setUniform1i(\"u_colorTexture\",4),g.setUniform2fv(\"u_texSize\",c),g.setUniform2fv(\"u_direction\",d),g.setUniform1f(\"u_sigma\",s),p.draw(),i.bindFramebuffer(r),i.setStencilWriteMask(0),i.setStencilTestEnabled(!1),i.setDepthWriteEnabled(!1),i.setDepthTestEnabled(!1),i.bindTexture(h.colorTexture,5),g.setUniform1i(\"u_colorTexture\",5),g.setUniform2fv(\"u_direction\",_),p.draw(),i.setBlendingEnabled(!0),i.setBlendFunction(t.ONE,t.ONE_MINUS_SRC_ALPHA),i.setStencilTestEnabled(!0)}_radialBlur(e,r){const{context:s,painter:i}=e,{materialManager:a}=i,n=this._programDesc,o=this._quad,u=this._blurFBO;s.bindFramebuffer(u);const l=a.getProgram(e,n.radialBlur);s.useProgram(l),s.setBlendingEnabled(!1),s.bindTexture(r.colorTexture,4),l.setUniform1i(\"u_colorTexture\",4),o.draw(),s.bindFramebuffer(r),s.setStencilWriteMask(0),s.setStencilTestEnabled(!1),s.setDepthWriteEnabled(!1),s.setDepthTestEnabled(!1),s.setBlendingEnabled(!0);const d=a.getProgram(e,n.blit);s.useProgram(d),s.bindTexture(u.colorTexture,5),d.setUniform1i(\"u_texture\",5),s.setBlendFunction(t.ONE,t.ONE_MINUS_SRC_ALPHA),o.draw()}_createOrResizeResources(e){const{context:t,state:d,pixelRatio:_}=e,{size:b}=d,p=Math.round(_*b[0]),c=Math.round(_*b[1]);this._blurFBO&&this._size[0]===p&&this._size[1]===c||(this._size[0]=p,this._size[1]=c,this._blurFBO?this._blurFBO.resize(p,c):this._blurFBO=new l(t,{colorTarget:r.TEXTURE,depthStencilTarget:s.NONE,width:p,height:c},{target:i.TEXTURE_2D,pixelFormat:a.RGBA,internalFormat:a.RGBA,dataType:n.UNSIGNED_BYTE,wrapMode:o.CLAMP_TO_EDGE,samplingMode:u.LINEAR,flipped:!1,width:p,height:c}))}}export{b as Blur};\n"]},"metadata":{},"sourceType":"module"}