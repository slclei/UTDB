{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../../../core/Error.js\";\nimport { OptimizedFeature as t } from \"../../OptimizedFeature.js\";\nimport n from \"../../OptimizedGeometry.js\";\nimport { isNumericField as o } from \"../../../support/fieldUtils.js\";\nconst r = {\n  LineString: \"esriGeometryPolyline\",\n  MultiLineString: \"esriGeometryPolyline\",\n  MultiPoint: \"esriGeometryMultipoint\",\n  Point: \"esriGeometryPoint\",\n  Polygon: \"esriGeometryPolygon\",\n  MultiPolygon: \"esriGeometryPolygon\"\n};\n\nfunction i(e) {\n  return r[e];\n}\n\nfunction* s(e) {\n  switch (e.type) {\n    case \"Feature\":\n      yield e;\n      break;\n\n    case \"FeatureCollection\":\n      for (const t of e.features) t && (yield t);\n\n  }\n}\n\nfunction* c(e) {\n  if (!e) return null;\n\n  switch (e.type) {\n    case \"Point\":\n      yield e.coordinates;\n      break;\n\n    case \"LineString\":\n    case \"MultiPoint\":\n      yield* e.coordinates;\n      break;\n\n    case \"MultiLineString\":\n    case \"Polygon\":\n      for (const t of e.coordinates) yield* t;\n\n      break;\n\n    case \"MultiPolygon\":\n      for (const t of e.coordinates) for (const e of t) yield* e;\n\n  }\n}\n\nfunction* u(e) {\n  let o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    geometryType: r,\n    objectIdField: s\n  } = o;\n\n  for (const u of e) {\n    var c;\n    const {\n      geometry: e,\n      properties: l,\n      id: f\n    } = u;\n    if (e && i(e.type) !== r) continue;\n    const a = l || {};\n    let y = null != (c = a[s]) ? c : null;\n    s && null != f && !a[s] && (a[s] = y = f);\n    const p = new t(e ? d(new n(), e, o) : null, a, null, y);\n    yield p;\n  }\n}\n\nfunction l(e) {\n  for (const t of e) if (t.length > 2) return !0;\n\n  return !1;\n}\n\nfunction f(e) {\n  return !y(e);\n}\n\nfunction a(e) {\n  return y(e);\n}\n\nfunction y(e) {\n  let t = 0;\n\n  for (let n = 0; n < e.length; n++) {\n    const o = e[n],\n          r = e[(n + 1) % e.length];\n    t += o[0] * r[1] - r[0] * o[1];\n  }\n\n  return t <= 0;\n}\n\nfunction p(e) {\n  const t = e[0],\n        n = e[e.length - 1];\n  return t[0] === n[0] && t[1] === n[1] && t[2] === n[2] || e.push(t), e;\n}\n\nfunction d(e, t, n) {\n  switch (t.type) {\n    case \"LineString\":\n      return g(e, t, n);\n\n    case \"MultiLineString\":\n      return m(e, t, n);\n\n    case \"MultiPoint\":\n      return h(e, t, n);\n\n    case \"MultiPolygon\":\n      return w(e, t, n);\n\n    case \"Point\":\n      return P(e, t, n);\n\n    case \"Polygon\":\n      return b(e, t, n);\n  }\n}\n\nfunction g(e, t, n) {\n  return F(e, t.coordinates, n), e;\n}\n\nfunction m(e, t, n) {\n  for (const o of t.coordinates) F(e, o, n);\n\n  return e;\n}\n\nfunction h(e, t, n) {\n  return F(e, t.coordinates, n), e;\n}\n\nfunction w(e, t, n) {\n  for (const o of t.coordinates) {\n    j(e, o[0], n);\n\n    for (let t = 1; t < o.length; t++) S(e, o[t], n);\n  }\n\n  return e;\n}\n\nfunction P(e, t, n) {\n  return M(e, t.coordinates, n), e;\n}\n\nfunction b(e, t, n) {\n  const o = t.coordinates;\n  j(e, o[0], n);\n\n  for (let r = 1; r < o.length; r++) S(e, o[r], n);\n\n  return e;\n}\n\nfunction j(e, t, n) {\n  const o = p(t);\n  f(o) ? G(e, o, n) : F(e, o, n);\n}\n\nfunction S(e, t, n) {\n  const o = p(t);\n  a(o) ? G(e, o, n) : F(e, o, n);\n}\n\nfunction F(e, t, n) {\n  for (const o of t) M(e, o, n);\n\n  e.lengths.push(t.length);\n}\n\nfunction G(e, t, n) {\n  for (let o = t.length - 1; o >= 0; o--) M(e, t[o], n);\n\n  e.lengths.push(t.length);\n}\n\nfunction M(e, t, n) {\n  const [o, r, i] = t;\n  e.coords.push(o, r), n.hasZ && e.coords.push(i || 0);\n}\n\nfunction k(e) {\n  switch (typeof e) {\n    case \"string\":\n      return \"esriFieldTypeString\";\n\n    case \"number\":\n      return \"esriFieldTypeDouble\";\n\n    default:\n      return \"unknown\";\n  }\n}\n\nfunction O(t) {\n  if (!t) throw new e(\"geojson-layer:empty\", \"GeoJSON data is empty\");\n  if (\"Feature\" !== t.type && \"FeatureCollection\" !== t.type) throw new e(\"geojson-layer:unsupported-geojson-object\", \"missing or not supported GeoJSON object type\", {\n    data: t\n  });\n  const {\n    crs: n\n  } = t;\n  if (!n) return;\n  const o = \"string\" == typeof n ? n : \"name\" === n.type ? n.properties.name : \"EPSG\" === n.type ? n.properties.code : null,\n        r = new RegExp(\".*(CRS84H?|4326)$\", \"i\");\n  if (!o || !r.test(o)) throw new e(\"geojson-layer:unsupported-crs\", \"unsupported GeoJSON 'crs' member\", {\n    crs: n\n  });\n}\n\nfunction T(e) {\n  let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const n = [],\n        r = new Set(),\n        u = new Set();\n  let f,\n      a = !1,\n      y = null,\n      p = !1,\n      {\n    geometryType: d = null\n  } = t,\n      g = !1;\n\n  for (const o of s(e)) {\n    const {\n      geometry: e,\n      properties: t,\n      id: s\n    } = o;\n\n    if (!e || (d || (d = i(e.type)), i(e.type) === d)) {\n      if (!a) {\n        a = l(c(e));\n      }\n\n      if (p || (p = null != s, p && (f = typeof s, y = Object.keys(t).filter(e => t[e] === s))), p && null != s && (y.length > 1 ? y = y.filter(e => t[e] === s) : 1 === y.length && (y = t[y[0]] === s ? y : [])), !g && t) {\n        let e = !0;\n\n        for (const o in t) {\n          if (r.has(o)) continue;\n          const i = t[o];\n\n          if (null == i) {\n            e = !1, u.add(o);\n            continue;\n          }\n\n          const s = k(i);\n          \"unknown\" !== s ? (u.delete(o), r.add(o), n.push({\n            name: o,\n            alias: o,\n            type: s\n          })) : u.add(o);\n        }\n\n        g = e;\n      }\n    }\n  }\n\n  const m = y && 1 === y.length && y[0] || null;\n  if (m) for (const i of n) if (i.name === m && o(i)) {\n    i.type = \"esriFieldTypeOID\";\n    break;\n  }\n  return {\n    fields: n,\n    geometryType: d,\n    hasZ: a,\n    objectIdFieldName: m,\n    objectIdFieldType: f,\n    unknownFields: Array.from(u)\n  };\n}\n\nfunction L(e, t) {\n  return Array.from(u(s(e), t));\n}\n\nexport { L as createOptimizedFeatures, i as getGeometryType, T as inferLayerProperties, O as validateGeoJSON };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"names":["e","OptimizedFeature","t","n","isNumericField","o","r","LineString","MultiLineString","MultiPoint","Point","Polygon","MultiPolygon","i","s","type","features","c","coordinates","u","geometryType","objectIdField","geometry","properties","l","id","f","a","y","p","d","length","push","g","m","h","w","P","b","F","j","S","M","G","lengths","coords","hasZ","k","O","data","crs","name","code","RegExp","test","T","Set","Object","keys","filter","has","add","delete","alias","fields","objectIdFieldName","objectIdFieldType","unknownFields","Array","from","L","createOptimizedFeatures","getGeometryType","inferLayerProperties","validateGeoJSON"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{OptimizedFeature as t}from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{isNumericField as o}from\"../../../support/fieldUtils.js\";const r={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function i(e){return r[e]}function*s(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*c(e){if(!e)return null;switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*u(e,o={}){const{geometryType:r,objectIdField:s}=o;for(const u of e){var c;const{geometry:e,properties:l,id:f}=u;if(e&&i(e.type)!==r)continue;const a=l||{};let y=null!=(c=a[s])?c:null;s&&null!=f&&!a[s]&&(a[s]=y=f);const p=new t(e?d(new n,e,o):null,a,null,y);yield p}}function l(e){for(const t of e)if(t.length>2)return!0;return!1}function f(e){return!y(e)}function a(e){return y(e)}function y(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function p(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function d(e,t,n){switch(t.type){case\"LineString\":return g(e,t,n);case\"MultiLineString\":return m(e,t,n);case\"MultiPoint\":return h(e,t,n);case\"MultiPolygon\":return w(e,t,n);case\"Point\":return P(e,t,n);case\"Polygon\":return b(e,t,n)}}function g(e,t,n){return F(e,t.coordinates,n),e}function m(e,t,n){for(const o of t.coordinates)F(e,o,n);return e}function h(e,t,n){return F(e,t.coordinates,n),e}function w(e,t,n){for(const o of t.coordinates){j(e,o[0],n);for(let t=1;t<o.length;t++)S(e,o[t],n)}return e}function P(e,t,n){return M(e,t.coordinates,n),e}function b(e,t,n){const o=t.coordinates;j(e,o[0],n);for(let r=1;r<o.length;r++)S(e,o[r],n);return e}function j(e,t,n){const o=p(t);f(o)?G(e,o,n):F(e,o,n)}function S(e,t,n){const o=p(t);a(o)?G(e,o,n):F(e,o,n)}function F(e,t,n){for(const o of t)M(e,o,n);e.lengths.push(t.length)}function G(e,t,n){for(let o=t.length-1;o>=0;o--)M(e,t[o],n);e.lengths.push(t.length)}function M(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function k(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function O(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function T(e,t={}){const n=[],r=new Set,u=new Set;let f,a=!1,y=null,p=!1,{geometryType:d=null}=t,g=!1;for(const o of s(e)){const{geometry:e,properties:t,id:s}=o;if(!e||(d||(d=i(e.type)),i(e.type)===d)){if(!a){a=l(c(e))}if(p||(p=null!=s,p&&(f=typeof s,y=Object.keys(t).filter((e=>t[e]===s)))),p&&null!=s&&(y.length>1?y=y.filter((e=>t[e]===s)):1===y.length&&(y=t[y[0]]===s?y:[])),!g&&t){let e=!0;for(const o in t){if(r.has(o))continue;const i=t[o];if(null==i){e=!1,u.add(o);continue}const s=k(i);\"unknown\"!==s?(u.delete(o),r.add(o),n.push({name:o,alias:o,type:s})):u.add(o)}g=e}}}const m=y&&1===y.length&&y[0]||null;if(m)for(const i of n)if(i.name===m&&o(i)){i.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:d,hasZ:a,objectIdFieldName:m,objectIdFieldType:f,unknownFields:Array.from(u)}}function L(e,t){return Array.from(u(s(e),t))}export{L as createOptimizedFeatures,i as getGeometryType,T as inferLayerProperties,O as validateGeoJSON};\n"]},"metadata":{},"sourceType":"module"}