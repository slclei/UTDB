{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport \"../intl.js\";\nimport { init as t } from \"../core/watchUtils.js\";\nimport { aliasOf as s } from \"../core/accessorSupport/decorators/aliasOf.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/has.js\";\nimport { cast as i } from \"../core/accessorSupport/decorators/cast.js\";\nimport { property as n } from \"../core/accessorSupport/decorators/property.js\";\nimport { subclass as r } from \"../core/accessorSupport/decorators/subclass.js\";\nimport o from \"./Widget.js\";\nimport l from \"./Feature/FeatureAttachments.js\";\nimport d from \"./Feature/FeatureContent.js\";\nimport a from \"./Feature/FeatureExpression.js\";\nimport c from \"./Feature/FeatureFields.js\";\nimport u from \"./Feature/FeatureMedia.js\";\nimport p from \"./Feature/FeatureViewModel.js\";\nimport { FeatureContentMixin as m } from \"./Feature/support/FeatureContentMixin.js\";\nimport { Heading as h } from \"./support/Heading.js\";\nimport \"./support/widgetUtils.js\";\nimport { messageBundle as v } from \"./support/decorators/messageBundle.js\";\nimport \"../core/Logger.js\";\nimport { tsx as g } from \"./support/jsxFactory.js\";\nimport { substitute as f } from \"../intl/substitute.js\";\nconst y = {\n  iconText: \"esri-icon-font-fallback-text\",\n  iconLoading: \"esri-icon-loading-indicator esri-rotating\",\n  esriTable: \"esri-widget__table\",\n  esriWidget: \"esri-widget\",\n  base: \"esri-feature\",\n  container: \"esri-feature__size-container\",\n  title: \"esri-feature__title\",\n  main: \"esri-feature__main-container\",\n  btn: \"esri-feature__button\",\n  icon: \"esri-feature__icon\",\n  content: \"esri-feature__content\",\n  contentElement: \"esri-feature__content-element\",\n  text: \"esri-feature__text\",\n  lastEditedInfo: \"esri-feature__last-edited-info\",\n  fields: \"esri-feature__fields\",\n  fieldHeader: \"esri-feature__field-header\",\n  fieldData: \"esri-feature__field-data\",\n  fieldDataDate: \"esri-feature__field-data--date\",\n  loadingSpinnerContainer: \"esri-feature__loading-container\",\n  spinner: \"esri-feature__loading-spinner\"\n},\n      _ = {\n  title: !0,\n  content: !0,\n  lastEditedInfo: !0\n};\nlet w = class extends m(o) {\n  constructor(e, t) {\n    super(e, t), this._contentWidgets = [], this.graphic = null, this.defaultPopupTemplateEnabled = !1, this.headingLevel = 2, this.label = void 0, this.messages = null, this.messagesCommon = null, this.messagesURIUtils = null, this.spatialReference = null, this.title = null, this.visibleElements = { ..._\n    }, this.map = null, this.view = null, this.viewModel = new p();\n  }\n\n  initialize() {\n    this.own(t(this, \"viewModel.contentViewModels\", () => this._setupContentWidgets()));\n  }\n\n  loadDependencies() {\n    return import(\"@esri/calcite-components/dist/components/calcite-notice.js\");\n  }\n\n  destroy() {\n    this._destroyContentWidgets();\n  }\n\n  castVisibleElements(e) {\n    return { ..._,\n      ...e\n    };\n  }\n\n  render() {\n    const {\n      state: e\n    } = this.viewModel,\n          t = g(\"div\", {\n      class: y.container,\n      key: \"container\"\n    }, this.renderTitle(), \"error\" === e ? this.renderError() : \"loading\" === e ? this.renderLoading() : this.renderContentContainer());\n    return g(\"div\", {\n      class: this.classes(y.base, y.esriWidget)\n    }, t);\n  }\n\n  setActiveMedia(e, t) {\n    this.viewModel.setActiveMedia(e, t);\n  }\n\n  nextMedia(e) {\n    this.viewModel.nextMedia(e);\n  }\n\n  previousMedia(e) {\n    this.viewModel.previousMedia(e);\n  }\n\n  renderError() {\n    const {\n      messagesCommon: e,\n      messages: t,\n      visibleElements: s\n    } = this;\n    return g(\"calcite-notice\", {\n      active: !0,\n      color: \"red\",\n      icon: \"exclamation-mark-circle\",\n      scale: \"s\"\n    }, s.title ? g(\"div\", {\n      key: \"error-title\",\n      slot: \"title\"\n    }, e.errorMessage) : null, g(\"div\", {\n      key: \"error-message\",\n      slot: \"message\"\n    }, t.loadingError));\n  }\n\n  renderLoading() {\n    return g(\"div\", {\n      key: \"loading-container\",\n      class: y.loadingSpinnerContainer\n    }, g(\"span\", {\n      class: this.classes(y.iconLoading, y.spinner)\n    }));\n  }\n\n  renderContentContainer() {\n    const {\n      visibleElements: e\n    } = this;\n    return e.content ? g(\"div\", {\n      class: y.main\n    }, [this.renderContent(), this.renderLastEditInfo()]) : null;\n  }\n\n  renderTitle() {\n    const {\n      visibleElements: e,\n      title: t\n    } = this;\n    return e.title ? g(h, {\n      level: this.headingLevel,\n      class: y.title,\n      innerHTML: t\n    }) : null;\n  }\n\n  renderContent() {\n    const e = this.viewModel.content,\n          t = \"content\";\n    if (!e) return null;\n    if (Array.isArray(e)) return e.length ? g(\"div\", {\n      key: `${t}-content-elements`\n    }, e.map(this.renderContentElement, this)) : null;\n\n    if (\"string\" == typeof e) {\n      const e = this._contentWidgets[0];\n      return !e || e.destroyed ? null : g(\"div\", {\n        key: `${t}-content`\n      }, e.render());\n    }\n\n    return this.renderNodeContent(e);\n  }\n\n  renderContentElement(e, t) {\n    const {\n      visibleElements: s\n    } = this;\n    if (\"boolean\" != typeof s.content && !s.content[e.type]) return null;\n\n    switch (e.type) {\n      case \"attachments\":\n        return this.renderAttachments(t);\n\n      case \"custom\":\n        return this.renderCustom(e, t);\n\n      case \"fields\":\n        return this.renderFields(t);\n\n      case \"media\":\n        return this.renderMedia(t);\n\n      case \"text\":\n        return this.renderText(e, t);\n\n      case \"expression\":\n        return this.renderExpression(t);\n\n      default:\n        return null;\n    }\n  }\n\n  renderAttachments(e) {\n    const t = this._contentWidgets[e];\n    if (!t || t.destroyed) return null;\n    const {\n      state: s,\n      attachmentInfos: i\n    } = t.viewModel;\n    return \"loading\" === s || i.length > 0 ? g(\"div\", {\n      key: this._buildKey(\"attachments-element\", e),\n      class: this.classes(y.contentElement)\n    }, t.render()) : null;\n  }\n\n  renderExpression(e) {\n    const t = this._contentWidgets[e];\n    return !t || t.destroyed ? null : g(\"div\", {\n      key: this._buildKey(\"expression-element\", e),\n      class: y.contentElement\n    }, t.render());\n  }\n\n  renderCustom(e, t) {\n    const {\n      creator: s\n    } = e,\n          i = this._contentWidgets[t];\n    return !i || i.destroyed ? null : s ? g(\"div\", {\n      key: this._buildKey(\"custom-element\", t),\n      class: y.contentElement\n    }, i.render()) : null;\n  }\n\n  renderFields(e) {\n    const t = this._contentWidgets[e];\n    return !t || t.destroyed ? null : g(\"div\", {\n      key: this._buildKey(\"fields-element\", e),\n      class: y.contentElement\n    }, t.render());\n  }\n\n  renderMedia(e) {\n    const t = this._contentWidgets[e];\n    return !t || t.destroyed ? null : g(\"div\", {\n      key: this._buildKey(\"media-element\", e),\n      class: y.contentElement\n    }, t.render());\n  }\n\n  renderLastEditInfo() {\n    const {\n      visibleElements: e,\n      messages: t\n    } = this,\n          {\n      lastEditInfo: s\n    } = this.viewModel;\n    if (!s || !e.lastEditedInfo) return null;\n    const {\n      date: i,\n      user: n\n    } = s,\n          r = \"edit\" === s.type ? n ? t.lastEditedByUser : t.lastEdited : n ? t.lastCreatedByUser : t.lastCreated,\n          o = f(r, {\n      date: i,\n      user: n\n    });\n    return g(\"div\", {\n      key: \"edit-info-element\",\n      class: this.classes(y.lastEditedInfo, y.contentElement)\n    }, o);\n  }\n\n  renderText(e, t) {\n    const s = e.text,\n          i = this._contentWidgets[t];\n    return !i || i.destroyed ? null : s ? g(\"div\", {\n      key: this._buildKey(\"text-element\", t),\n      class: this.classes(y.contentElement, y.text)\n    }, i.render()) : null;\n  }\n\n  _buildKey(e) {\n    for (var _len = arguments.length, t = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      t[_key - 1] = arguments[_key];\n    }\n\n    return `${e}__${this.get(\"viewModel.graphic.uid\") || \"0\"}-${t.join(\"-\")}`;\n  }\n\n  _destroyContentWidget(e) {\n    e && (e.viewModel = null, !e.destroyed && e.destroy());\n  }\n\n  _destroyContentWidgets() {\n    this._contentWidgets.forEach(e => this._destroyContentWidget(e)), this._contentWidgets = [];\n  }\n\n  _setupContentWidgets() {\n    this._destroyContentWidgets();\n\n    const {\n      headingLevel: e,\n      visibleElements: t\n    } = this,\n          s = this.get(\"viewModel.content\"),\n          {\n      contentViewModels: i\n    } = this.viewModel;\n    if (Array.isArray(s)) s.forEach((s, n) => {\n      \"attachments\" === s.type && (this._contentWidgets[n] = new l({\n        displayType: s.displayType,\n        headingLevel: t.title ? e + 1 : e,\n        viewModel: i[n]\n      })), \"fields\" === s.type && (this._contentWidgets[n] = new c({\n        viewModel: i[n]\n      })), \"media\" === s.type && (this._contentWidgets[n] = new u({\n        viewModel: i[n]\n      })), \"text\" === s.type && (this._contentWidgets[n] = new d({\n        viewModel: i[n]\n      })), \"custom\" === s.type && (this._contentWidgets[n] = new d({\n        viewModel: i[n]\n      })), \"expression\" === s.type && (this._contentWidgets[n] = new a({\n        viewModel: i[n]\n      }));\n    }, this);else {\n      const e = i[0];\n      e && !e.destroyed && (this._contentWidgets[0] = new d({\n        viewModel: e\n      }));\n    }\n    this.scheduleRender();\n  }\n\n};\ne([s(\"viewModel.graphic\")], w.prototype, \"graphic\", void 0), e([s(\"viewModel.defaultPopupTemplateEnabled\")], w.prototype, \"defaultPopupTemplateEnabled\", void 0), e([n()], w.prototype, \"headingLevel\", void 0), e([n({\n  aliasOf: {\n    source: \"messages.widgetLabel\",\n    overridable: !0\n  }\n})], w.prototype, \"label\", void 0), e([n(), v(\"esri/widgets/Feature/t9n/Feature\")], w.prototype, \"messages\", void 0), e([n(), v(\"esri/t9n/common\")], w.prototype, \"messagesCommon\", void 0), e([n(), v(\"esri/widgets/support/t9n/uriUtils\")], w.prototype, \"messagesURIUtils\", void 0), e([s(\"viewModel.spatialReference\")], w.prototype, \"spatialReference\", void 0), e([s(\"viewModel.title\")], w.prototype, \"title\", void 0), e([n()], w.prototype, \"visibleElements\", void 0), e([i(\"visibleElements\")], w.prototype, \"castVisibleElements\", null), e([s(\"viewModel.map\")], w.prototype, \"map\", void 0), e([s(\"viewModel.view\")], w.prototype, \"view\", void 0), e([n({\n  type: p\n})], w.prototype, \"viewModel\", void 0), w = e([r(\"esri.widgets.Feature\")], w);\nconst M = w;\nexport { M as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/widgets/Feature.js"],"names":["_","e","init","t","aliasOf","s","cast","i","property","n","subclass","r","o","l","d","a","c","u","p","FeatureContentMixin","m","Heading","h","messageBundle","v","tsx","g","substitute","f","y","iconText","iconLoading","esriTable","esriWidget","base","container","title","main","btn","icon","content","contentElement","text","lastEditedInfo","fields","fieldHeader","fieldData","fieldDataDate","loadingSpinnerContainer","spinner","w","constructor","_contentWidgets","graphic","defaultPopupTemplateEnabled","headingLevel","label","messages","messagesCommon","messagesURIUtils","spatialReference","visibleElements","map","view","viewModel","initialize","own","_setupContentWidgets","loadDependencies","destroy","_destroyContentWidgets","castVisibleElements","render","state","class","key","renderTitle","renderError","renderLoading","renderContentContainer","classes","setActiveMedia","nextMedia","previousMedia","active","color","scale","slot","errorMessage","loadingError","renderContent","renderLastEditInfo","level","innerHTML","Array","isArray","length","renderContentElement","destroyed","renderNodeContent","type","renderAttachments","renderCustom","renderFields","renderMedia","renderText","renderExpression","attachmentInfos","_buildKey","creator","lastEditInfo","date","user","lastEditedByUser","lastEdited","lastCreatedByUser","lastCreated","get","join","_destroyContentWidget","forEach","contentViewModels","displayType","scheduleRender","prototype","source","overridable","M","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../intl.js\";import{init as t}from\"../core/watchUtils.js\";import{aliasOf as s}from\"../core/accessorSupport/decorators/aliasOf.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{cast as i}from\"../core/accessorSupport/decorators/cast.js\";import{property as n}from\"../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../core/accessorSupport/decorators/subclass.js\";import o from\"./Widget.js\";import l from\"./Feature/FeatureAttachments.js\";import d from\"./Feature/FeatureContent.js\";import a from\"./Feature/FeatureExpression.js\";import c from\"./Feature/FeatureFields.js\";import u from\"./Feature/FeatureMedia.js\";import p from\"./Feature/FeatureViewModel.js\";import{FeatureContentMixin as m}from\"./Feature/support/FeatureContentMixin.js\";import{Heading as h}from\"./support/Heading.js\";import\"./support/widgetUtils.js\";import{messageBundle as v}from\"./support/decorators/messageBundle.js\";import\"../core/Logger.js\";import{tsx as g}from\"./support/jsxFactory.js\";import{substitute as f}from\"../intl/substitute.js\";const y={iconText:\"esri-icon-font-fallback-text\",iconLoading:\"esri-icon-loading-indicator esri-rotating\",esriTable:\"esri-widget__table\",esriWidget:\"esri-widget\",base:\"esri-feature\",container:\"esri-feature__size-container\",title:\"esri-feature__title\",main:\"esri-feature__main-container\",btn:\"esri-feature__button\",icon:\"esri-feature__icon\",content:\"esri-feature__content\",contentElement:\"esri-feature__content-element\",text:\"esri-feature__text\",lastEditedInfo:\"esri-feature__last-edited-info\",fields:\"esri-feature__fields\",fieldHeader:\"esri-feature__field-header\",fieldData:\"esri-feature__field-data\",fieldDataDate:\"esri-feature__field-data--date\",loadingSpinnerContainer:\"esri-feature__loading-container\",spinner:\"esri-feature__loading-spinner\"},_={title:!0,content:!0,lastEditedInfo:!0};let w=class extends(m(o)){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={..._},this.map=null,this.view=null,this.viewModel=new p}initialize(){this.own(t(this,\"viewModel.contentViewModels\",(()=>this._setupContentWidgets())))}loadDependencies(){return import(\"@esri/calcite-components/dist/components/calcite-notice.js\")}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{..._,...e}}render(){const{state:e}=this.viewModel,t=g(\"div\",{class:y.container,key:\"container\"},this.renderTitle(),\"error\"===e?this.renderError():\"loading\"===e?this.renderLoading():this.renderContentContainer());return g(\"div\",{class:this.classes(y.base,y.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:s}=this;return g(\"calcite-notice\",{active:!0,color:\"red\",icon:\"exclamation-mark-circle\",scale:\"s\"},s.title?g(\"div\",{key:\"error-title\",slot:\"title\"},e.errorMessage):null,g(\"div\",{key:\"error-message\",slot:\"message\"},t.loadingError))}renderLoading(){return g(\"div\",{key:\"loading-container\",class:y.loadingSpinnerContainer},g(\"span\",{class:this.classes(y.iconLoading,y.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?g(\"div\",{class:y.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?g(h,{level:this.headingLevel,class:y.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t=\"content\";if(!e)return null;if(Array.isArray(e))return e.length?g(\"div\",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(\"string\"==typeof e){const e=this._contentWidgets[0];return!e||e.destroyed?null:g(\"div\",{key:`${t}-content`},e.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:s}=this;if(\"boolean\"!=typeof s.content&&!s.content[e.type])return null;switch(e.type){case\"attachments\":return this.renderAttachments(t);case\"custom\":return this.renderCustom(e,t);case\"fields\":return this.renderFields(t);case\"media\":return this.renderMedia(t);case\"text\":return this.renderText(e,t);case\"expression\":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:s,attachmentInfos:i}=t.viewModel;return\"loading\"===s||i.length>0?g(\"div\",{key:this._buildKey(\"attachments-element\",e),class:this.classes(y.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:g(\"div\",{key:this._buildKey(\"expression-element\",e),class:y.contentElement},t.render())}renderCustom(e,t){const{creator:s}=e,i=this._contentWidgets[t];return!i||i.destroyed?null:s?g(\"div\",{key:this._buildKey(\"custom-element\",t),class:y.contentElement},i.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:g(\"div\",{key:this._buildKey(\"fields-element\",e),class:y.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:g(\"div\",{key:this._buildKey(\"media-element\",e),class:y.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:s}=this.viewModel;if(!s||!e.lastEditedInfo)return null;const{date:i,user:n}=s,r=\"edit\"===s.type?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=f(r,{date:i,user:n});return g(\"div\",{key:\"edit-info-element\",class:this.classes(y.lastEditedInfo,y.contentElement)},o)}renderText(e,t){const s=e.text,i=this._contentWidgets[t];return!i||i.destroyed?null:s?g(\"div\",{key:this._buildKey(\"text-element\",t),class:this.classes(y.contentElement,y.text)},i.render()):null}_buildKey(e,...t){return`${e}__${this.get(\"viewModel.graphic.uid\")||\"0\"}-${t.join(\"-\")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach((e=>this._destroyContentWidget(e))),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,s=this.get(\"viewModel.content\"),{contentViewModels:i}=this.viewModel;if(Array.isArray(s))s.forEach(((s,n)=>{\"attachments\"===s.type&&(this._contentWidgets[n]=new l({displayType:s.displayType,headingLevel:t.title?e+1:e,viewModel:i[n]})),\"fields\"===s.type&&(this._contentWidgets[n]=new c({viewModel:i[n]})),\"media\"===s.type&&(this._contentWidgets[n]=new u({viewModel:i[n]})),\"text\"===s.type&&(this._contentWidgets[n]=new d({viewModel:i[n]})),\"custom\"===s.type&&(this._contentWidgets[n]=new d({viewModel:i[n]})),\"expression\"===s.type&&(this._contentWidgets[n]=new a({viewModel:i[n]}))}),this);else{const e=i[0];e&&!e.destroyed&&(this._contentWidgets[0]=new d({viewModel:e}))}this.scheduleRender()}};e([s(\"viewModel.graphic\")],w.prototype,\"graphic\",void 0),e([s(\"viewModel.defaultPopupTemplateEnabled\")],w.prototype,\"defaultPopupTemplateEnabled\",void 0),e([n()],w.prototype,\"headingLevel\",void 0),e([n({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],w.prototype,\"label\",void 0),e([n(),v(\"esri/widgets/Feature/t9n/Feature\")],w.prototype,\"messages\",void 0),e([n(),v(\"esri/t9n/common\")],w.prototype,\"messagesCommon\",void 0),e([n(),v(\"esri/widgets/support/t9n/uriUtils\")],w.prototype,\"messagesURIUtils\",void 0),e([s(\"viewModel.spatialReference\")],w.prototype,\"spatialReference\",void 0),e([s(\"viewModel.title\")],w.prototype,\"title\",void 0),e([n()],w.prototype,\"visibleElements\",void 0),e([i(\"visibleElements\")],w.prototype,\"castVisibleElements\",null),e([s(\"viewModel.map\")],w.prototype,\"map\",void 0),e([s(\"viewModel.view\")],w.prototype,\"view\",void 0),e([n({type:p})],w.prototype,\"viewModel\",void 0),w=e([r(\"esri.widgets.Feature\")],w);const M=w;export{M as default};\n"]},"metadata":{},"sourceType":"module"}