{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as t } from \"../chunks/tslib.es6.js\";\nimport e from \"../core/Error.js\";\nimport { formatFileSize as s } from \"../core/unitFormatUtils.js\";\nimport { on as i, init as a } from \"../core/watchUtils.js\";\nimport { aliasOf as n } from \"../core/accessorSupport/decorators/aliasOf.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/has.js\";\nimport { cast as r } from \"../core/accessorSupport/decorators/cast.js\";\nimport { property as o } from \"../core/accessorSupport/decorators/property.js\";\nimport { subclass as l } from \"../core/accessorSupport/decorators/subclass.js\";\nimport m from \"./Widget.js\";\nimport d from \"./Attachments/AttachmentsViewModel.js\";\nimport { isSupportedImage as c, getIconPath as h } from \"./Attachments/support/attachmentUtils.js\";\nimport { storeNode as u, discardNode as p, isRTL as b } from \"./support/widgetUtils.js\";\nimport { messageBundle as g } from \"./support/decorators/messageBundle.js\";\nimport \"../core/Logger.js\";\nimport { tsx as _ } from \"./support/jsxFactory.js\";\nconst f = {\n  addButton: !0,\n  addSubmitButton: !0,\n  cancelAddButton: !0,\n  cancelUpdateButton: !0,\n  deleteButton: !0,\n  errorMessage: !0,\n  progressBar: !0,\n  updateButton: !0\n},\n      v = {\n  base: \"esri-attachments\",\n  loaderContainer: \"esri-attachments__loader-container\",\n  loader: \"esri-attachments__loader\",\n  fadeIn: \"esri-attachments--fade-in\",\n  container: \"esri-attachments__container\",\n  containerList: \"esri-attachments__container--list\",\n  containerPreview: \"esri-attachments__container--preview\",\n  actions: \"esri-attachments__actions\",\n  deleteButton: \"esri-attachments__delete-button\",\n  addAttachmentButton: \"esri-attachments__add-attachment-button\",\n  errorMessage: \"esri-attachments__error-message\",\n  items: \"esri-attachments__items\",\n  item: \"esri-attachments__item\",\n  itemButton: \"esri-attachments__item-button\",\n  itemMask: \"esri-attachments__item-mask\",\n  itemMaskIcon: \"esri-attachments__item-mask--icon\",\n  itemImage: \"esri-attachments__image\",\n  itemImageResizable: \"esri-attachments__image--resizable\",\n  itemLabel: \"esri-attachments__label\",\n  itemFilename: \"esri-attachments__filename\",\n  itemChevronIcon: \"esri-attachments__item-chevron-icon\",\n  itemLink: \"esri-attachments__item-link\",\n  itemLinkOverlay: \"esri-attachments__item-link-overlay\",\n  itemLinkOverlayIcon: \"esri-attachments__item-link-overlay-icon\",\n  itemEditIcon: \"esri-attachments__item-edit-icon\",\n  itemAddIcon: \"esri-attachments__item-add-icon\",\n  itemAddButton: \"esri-attachments__item-add-button\",\n  formNode: \"esri-attachments__form-node\",\n  fileFieldset: \"esri-attachments__file-fieldset\",\n  fileLabel: \"esri-attachments__file-label\",\n  fileName: \"esri-attachments__file-name\",\n  fileInput: \"esri-attachments__file-input\",\n  metadata: \"esri-attachments__metadata\",\n  metadataFieldset: \"esri-attachments__metadata-fieldset\",\n  progressBar: \"esri-attachments__progress-bar\",\n  esriWidget: \"esri-widget\",\n  esriButton: \"esri-button\",\n  buttonDisabled: \"esri-button--disabled\",\n  esriButtonSecondary: \"esri-button--secondary\",\n  esriButtonTertiary: \"esri-button--tertiary\",\n  esriButtonThird: \"esri-button--third\",\n  esriButtonSmall: \"esri-button--small\",\n  esriButtonHalf: \"esri-button--half\",\n  empty: \"esri-widget__content--empty\",\n  iconExternalLink: \"esri-icon-link-external\",\n  iconEdit: \"esri-icon-edit\",\n  iconRight: \"esri-icon-right\",\n  iconLeft: \"esri-icon-left\",\n  iconPlus: \"esri-icon-plus\"\n},\n      y = window.CSS;\nlet B = class extends m {\n  constructor(t, e) {\n    super(t, e), this.abilities = null, this.displayType = \"auto\", this.graphic = null, this.label = void 0, this.messages = null, this.messagesUnits = null, this.selectedFile = null, this.submitting = !1, this.viewModel = new d(), this.visibleElements = { ...f\n    }, this._supportsImageOrientation = y && y.supports && y.supports(\"image-orientation\", \"from-image\"), this._addAttachmentForm = null, this._updateAttachmentForm = null;\n  }\n\n  initialize() {\n    this.own(i(this, \"viewModel.attachmentInfos\", \"change\", () => this.scheduleRender()), a(this, \"viewModel.mode\", () => this._modeChanged()));\n  }\n\n  get effectiveDisplayType() {\n    const {\n      displayType: t\n    } = this;\n    return t && \"auto\" !== t ? t : this.viewModel.supportsResizeAttachments ? \"preview\" : \"list\";\n  }\n\n  castVisibleElements(t) {\n    return { ...f,\n      ...t\n    };\n  }\n\n  addAttachment() {\n    const {\n      _addAttachmentForm: t,\n      viewModel: s\n    } = this;\n    return this._set(\"submitting\", !0), this._set(\"error\", null), s.addAttachment(t).then(t => (this._set(\"submitting\", !1), this._set(\"error\", null), s.mode = \"view\", t)).catch(t => {\n      throw this._set(\"submitting\", !1), this._set(\"error\", new e(\"attachments:add-attachment\", this.messages.addErrorMessage, t)), t;\n    });\n  }\n\n  deleteAttachment(t) {\n    const {\n      viewModel: s\n    } = this;\n    return this._set(\"submitting\", !0), this._set(\"error\", null), s.deleteAttachment(t).then(t => (this._set(\"submitting\", !1), this._set(\"error\", null), s.mode = \"view\", t)).catch(t => {\n      throw this._set(\"submitting\", !1), this._set(\"error\", new e(\"attachments:delete-attachment\", this.messages.deleteErrorMessage, t)), t;\n    });\n  }\n\n  updateAttachment() {\n    const {\n      viewModel: t\n    } = this,\n          {\n      _updateAttachmentForm: s\n    } = this;\n    return this._set(\"submitting\", !0), this._set(\"error\", null), t.updateAttachment(s).then(e => (this._set(\"submitting\", !1), this._set(\"error\", null), t.mode = \"view\", e)).catch(t => {\n      throw this._set(\"submitting\", !1), this._set(\"error\", new e(\"attachments:update-attachment\", this.messages.updateErrorMessage, t)), t;\n    });\n  }\n\n  render() {\n    const {\n      submitting: t,\n      viewModel: e\n    } = this,\n          {\n      state: s\n    } = e;\n    return _(\"div\", {\n      class: this.classes(v.base, v.esriWidget)\n    }, t ? this.renderProgressBar() : null, \"loading\" === s ? this.renderLoading() : this.renderAttachments(), this.renderErrorMessage());\n  }\n\n  renderErrorMessage() {\n    const {\n      error: t,\n      visibleElements: e\n    } = this;\n    return t && e.errorMessage ? _(\"div\", {\n      key: \"error-message\",\n      class: v.errorMessage\n    }, t.message) : null;\n  }\n\n  renderAttachments() {\n    const {\n      mode: t,\n      activeAttachmentInfo: e\n    } = this.viewModel;\n    return \"add\" === t ? this.renderAddForm() : \"edit\" === t ? this.renderDetailsForm(e) : this.renderAttachmentContainer();\n  }\n\n  renderLoading() {\n    return _(\"div\", {\n      class: v.loaderContainer,\n      key: \"loader\"\n    }, _(\"div\", {\n      class: v.loader\n    }));\n  }\n\n  renderProgressBar() {\n    return this.visibleElements.progressBar ? _(\"div\", {\n      class: v.progressBar,\n      key: \"progress-bar\"\n    }) : null;\n  }\n\n  renderAddForm() {\n    const {\n      submitting: t,\n      selectedFile: e\n    } = this,\n          s = t || !e,\n          i = this.visibleElements.cancelAddButton ? _(\"button\", {\n      type: \"button\",\n      bind: this,\n      disabled: t,\n      onclick: this._cancelForm,\n      class: this.classes(v.esriButton, v.esriButtonTertiary, v.esriButtonSmall, v.esriButtonHalf, t && v.buttonDisabled)\n    }, this.messages.cancel) : null,\n          a = this.visibleElements.addSubmitButton ? _(\"button\", {\n      type: \"submit\",\n      disabled: s,\n      class: this.classes(v.esriButton, v.esriButtonSecondary, v.esriButtonSmall, v.esriButtonHalf, {\n        [v.buttonDisabled]: s\n      })\n    }, this.messages.add) : null,\n          n = e ? _(\"span\", {\n      key: \"file-name\",\n      class: v.fileName\n    }, e.name) : null,\n          r = _(\"form\", {\n      bind: this,\n      afterCreate: u,\n      afterRemoved: p,\n      \"data-node-ref\": \"_addAttachmentForm\",\n      onsubmit: this._submitAddAttachment\n    }, _(\"fieldset\", {\n      class: v.fileFieldset\n    }, n, _(\"label\", {\n      class: this.classes(v.fileLabel, v.esriButton, v.esriButtonSecondary)\n    }, e ? this.messages.changeFile : this.messages.selectFile, _(\"input\", {\n      class: v.fileInput,\n      type: \"file\",\n      name: \"attachment\",\n      bind: this,\n      onchange: this._handleFileInputChange\n    }))), a, i);\n\n    return _(\"div\", {\n      key: \"add-form-container\",\n      class: v.formNode\n    }, r);\n  }\n\n  renderDetailsForm(t) {\n    const {\n      visibleElements: e,\n      viewModel: i,\n      selectedFile: a,\n      submitting: n\n    } = this,\n          {\n      contentType: r,\n      size: o,\n      url: l\n    } = t,\n          {\n      abilities: m\n    } = i,\n          d = n || !a,\n          c = m.editing && m.operations.delete && e.deleteButton ? _(\"button\", {\n      key: \"delete-button\",\n      type: \"button\",\n      disabled: n,\n      bind: this,\n      onclick: e => this._submitDeleteAttachment(e, t),\n      class: this.classes(v.esriButton, v.esriButtonSmall, v.esriButtonTertiary, v.deleteButton, {\n        [v.buttonDisabled]: n\n      })\n    }, this.messages.delete) : null,\n          h = m.editing && m.operations.update && e.updateButton ? _(\"button\", {\n      disabled: d,\n      key: \"update-button\",\n      type: \"submit\",\n      class: this.classes(v.esriButton, v.esriButtonSmall, v.esriButtonThird, {\n        [v.buttonDisabled]: d\n      })\n    }, this.messages.update) : null,\n          b = this.visibleElements.cancelUpdateButton ? _(\"button\", {\n      disabled: n,\n      key: \"cancel-button\",\n      type: \"button\",\n      bind: this,\n      onclick: this._cancelForm,\n      class: this.classes(v.esriButton, v.esriButtonSmall, v.esriButtonTertiary, v.esriButtonThird, {\n        [v.buttonDisabled]: n\n      })\n    }, this.messages.cancel) : null,\n          g = a ? _(\"span\", {\n      key: \"file-name\",\n      class: v.fileName\n    }, a.name) : null,\n          f = m.editing && m.operations.update ? _(\"fieldset\", {\n      key: \"file\",\n      class: v.fileFieldset\n    }, g, _(\"label\", {\n      class: this.classes(v.fileLabel, v.esriButton, v.esriButtonSecondary)\n    }, this.messages.changeFile, _(\"input\", {\n      class: v.fileInput,\n      type: \"file\",\n      name: \"attachment\",\n      bind: this,\n      onchange: this._handleFileInputChange\n    }))) : null,\n          y = _(\"fieldset\", {\n      key: \"size\",\n      class: v.metadataFieldset\n    }, _(\"label\", null, s(this.messagesUnits, o))),\n          B = _(\"fieldset\", {\n      key: \"content-type\",\n      class: v.metadataFieldset\n    }, _(\"label\", null, r)),\n          A = _(\"form\", {\n      bind: this,\n      afterCreate: u,\n      afterRemoved: p,\n      \"data-node-ref\": \"_updateAttachmentForm\",\n      onsubmit: this._submitUpdateAttachment\n    }, _(\"div\", {\n      class: v.metadata\n    }, y, B), f, _(\"div\", {\n      class: v.actions\n    }, c, b, h));\n\n    return _(\"div\", {\n      key: \"edit-form-container\",\n      class: v.formNode\n    }, _(\"a\", {\n      class: v.itemLink,\n      href: l,\n      rel: \"noreferrer\",\n      target: \"_blank\"\n    }, this.renderImageMask({\n      attachmentInfo: t,\n      size: 400\n    }), _(\"div\", {\n      class: v.itemLinkOverlay\n    }, _(\"span\", {\n      class: v.itemLinkOverlayIcon\n    }, _(\"svg\", {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      width: \"32\",\n      height: \"32\",\n      viewBox: \"0 0 32 32\"\n    }, _(\"path\", {\n      d: \"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z\"\n    }), _(\"path\", {\n      fill: \"none\",\n      d: \"M0 0h32v32H0z\"\n    }))))), A);\n  }\n\n  renderImageMask(_ref) {\n    let {\n      attachmentInfo: t,\n      size: e\n    } = _ref;\n\n    const {\n      supportsResizeAttachments: s\n    } = this.viewModel,\n          {\n      contentType: i,\n      name: a,\n      url: n\n    } = t,\n          r = s && c(i),\n          o = this._getCSSTransform(t, r),\n          l = o ? {\n      transform: o,\n      \"image-orientation\": \"none\"\n    } : {},\n          m = -1 === n.indexOf(\"?\") ? \"?\" : \"&\",\n          d = r ? `${n}${m}w=${e}` : h(i),\n          u = {\n      [v.itemMaskIcon]: !r\n    },\n          p = {\n      [v.itemImageResizable]: s\n    };\n\n    return _(\"div\", {\n      class: this.classes(u, v.itemMask)\n    }, _(\"img\", {\n      styles: l,\n      alt: a,\n      src: d,\n      class: this.classes(p, v.itemImage)\n    }));\n  }\n\n  renderAttachmentInfo(_ref2) {\n    let {\n      attachmentInfo: t,\n      displayType: e\n    } = _ref2;\n    const {\n      viewModel: s\n    } = this,\n          {\n      abilities: i\n    } = s,\n          {\n      name: a,\n      url: n\n    } = t,\n          r = this.renderImageMask({\n      attachmentInfo: t,\n      size: \"list\" === e ? 48 : 400\n    }),\n          o = i.editing ? _(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: this.classes(v.itemChevronIcon, b(this.container) ? v.iconLeft : v.iconRight)\n    }) : null,\n          l = [r, _(\"label\", {\n      class: v.itemLabel\n    }, _(\"span\", {\n      class: v.itemFilename\n    }, a || this.messages.noTitle), o)],\n          m = i.editing ? _(\"button\", {\n      key: \"details-button\",\n      bind: this,\n      class: v.itemButton,\n      title: this.messages.attachmentDetails,\n      \"aria-label\": this.messages.attachmentDetails,\n      \"data-attachment-info-id\": t.id,\n      onclick: () => this._startEditAttachment(t),\n      type: \"button\"\n    }, l) : _(\"a\", {\n      key: \"details-link\",\n      class: v.itemButton,\n      href: n,\n      target: \"_blank\"\n    }, l);\n    return _(\"li\", {\n      class: v.item,\n      key: t\n    }, m);\n  }\n\n  renderAttachmentContainer() {\n    const {\n      effectiveDisplayType: t,\n      viewModel: e,\n      visibleElements: s\n    } = this,\n          {\n      attachmentInfos: i,\n      abilities: a\n    } = e,\n          n = i && i.length,\n          r = {\n      [v.containerList]: \"preview\" !== t,\n      [v.containerPreview]: \"preview\" === t\n    },\n          o = a.editing && a.operations.add && s.addButton ? _(\"button\", {\n      bind: this,\n      onclick: () => this._startAddAttachment(),\n      class: this.classes(v.esriButton, v.esriButtonTertiary, v.addAttachmentButton),\n      type: \"button\"\n    }, _(\"span\", {\n      \"aria-hidden\": \"true\",\n      class: this.classes(v.itemAddIcon, v.iconPlus)\n    }), this.messages.add) : null,\n          l = n ? _(\"ul\", {\n      class: v.items\n    }, i.toArray().map(e => this.renderAttachmentInfo({\n      attachmentInfo: e,\n      displayType: t\n    }))) : _(\"div\", {\n      class: v.empty\n    }, this.messages.noAttachments);\n    return _(\"div\", {\n      key: \"attachments-container\",\n      class: this.classes(v.container, r)\n    }, l, o);\n  }\n\n  _modeChanged() {\n    this._set(\"error\", null), this._set(\"selectedFile\", null);\n  }\n\n  _handleFileInputChange(t) {\n    const e = t.target,\n          s = e && e.files && e.files.item(0);\n\n    this._set(\"selectedFile\", s);\n  }\n\n  _submitDeleteAttachment(t, e) {\n    t.preventDefault(), this.deleteAttachment(e);\n  }\n\n  _submitAddAttachment(t) {\n    t.preventDefault(), this.addAttachment();\n  }\n\n  _submitUpdateAttachment(t) {\n    t.preventDefault(), this.updateAttachment();\n  }\n\n  _startEditAttachment(t) {\n    const {\n      viewModel: e\n    } = this;\n    e.activeAttachmentInfo = t, e.mode = \"edit\";\n  }\n\n  _startAddAttachment() {\n    this.viewModel.mode = \"add\";\n  }\n\n  _cancelForm(t) {\n    t.preventDefault(), this.viewModel.mode = \"view\";\n  }\n\n  _getCSSTransform(t, e) {\n    const {\n      orientationInfo: s\n    } = t;\n    return !this._supportsImageOrientation && e && s ? [s.rotation ? `rotate(${s.rotation}deg)` : \"\", s.mirrored ? \"scaleX(-1)\" : \"\"].join(\" \") : \"\";\n  }\n\n};\nt([n(\"viewModel.abilities\")], B.prototype, \"abilities\", void 0), t([o()], B.prototype, \"displayType\", void 0), t([o({\n  readOnly: !0\n})], B.prototype, \"effectiveDisplayType\", null), t([n(\"viewModel.graphic\")], B.prototype, \"graphic\", void 0), t([o({\n  aliasOf: {\n    source: \"messages.widgetLabel\",\n    overridable: !0\n  }\n})], B.prototype, \"label\", void 0), t([o(), g(\"esri/widgets/Attachments/t9n/Attachments\")], B.prototype, \"messages\", void 0), t([o(), g(\"esri/core/t9n/Units\")], B.prototype, \"messagesUnits\", void 0), t([o({\n  readOnly: !0\n})], B.prototype, \"selectedFile\", void 0), t([o({\n  readOnly: !0\n})], B.prototype, \"submitting\", void 0), t([o({\n  readOnly: !0\n})], B.prototype, \"error\", void 0), t([o({\n  type: d\n})], B.prototype, \"viewModel\", void 0), t([o()], B.prototype, \"visibleElements\", void 0), t([r(\"visibleElements\")], B.prototype, \"castVisibleElements\", null), B = t([l(\"esri.widgets.Attachments\")], B);\nconst A = B;\nexport { A as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/widgets/Attachments.js"],"names":["_","t","e","formatFileSize","s","on","i","init","a","aliasOf","n","cast","r","property","o","subclass","l","m","d","isSupportedImage","c","getIconPath","h","storeNode","u","discardNode","p","isRTL","b","messageBundle","g","tsx","f","addButton","addSubmitButton","cancelAddButton","cancelUpdateButton","deleteButton","errorMessage","progressBar","updateButton","v","base","loaderContainer","loader","fadeIn","container","containerList","containerPreview","actions","addAttachmentButton","items","item","itemButton","itemMask","itemMaskIcon","itemImage","itemImageResizable","itemLabel","itemFilename","itemChevronIcon","itemLink","itemLinkOverlay","itemLinkOverlayIcon","itemEditIcon","itemAddIcon","itemAddButton","formNode","fileFieldset","fileLabel","fileName","fileInput","metadata","metadataFieldset","esriWidget","esriButton","buttonDisabled","esriButtonSecondary","esriButtonTertiary","esriButtonThird","esriButtonSmall","esriButtonHalf","empty","iconExternalLink","iconEdit","iconRight","iconLeft","iconPlus","y","window","CSS","B","constructor","abilities","displayType","graphic","label","messages","messagesUnits","selectedFile","submitting","viewModel","visibleElements","_supportsImageOrientation","supports","_addAttachmentForm","_updateAttachmentForm","initialize","own","scheduleRender","_modeChanged","effectiveDisplayType","supportsResizeAttachments","castVisibleElements","addAttachment","_set","then","mode","catch","addErrorMessage","deleteAttachment","deleteErrorMessage","updateAttachment","updateErrorMessage","render","state","class","classes","renderProgressBar","renderLoading","renderAttachments","renderErrorMessage","error","key","message","activeAttachmentInfo","renderAddForm","renderDetailsForm","renderAttachmentContainer","type","bind","disabled","onclick","_cancelForm","cancel","add","name","afterCreate","afterRemoved","onsubmit","_submitAddAttachment","changeFile","selectFile","onchange","_handleFileInputChange","contentType","size","url","editing","operations","delete","_submitDeleteAttachment","update","A","_submitUpdateAttachment","href","rel","target","renderImageMask","attachmentInfo","xmlns","width","height","viewBox","fill","_getCSSTransform","transform","indexOf","styles","alt","src","renderAttachmentInfo","noTitle","title","attachmentDetails","id","_startEditAttachment","attachmentInfos","length","_startAddAttachment","toArray","map","noAttachments","files","preventDefault","orientationInfo","rotation","mirrored","join","prototype","readOnly","source","overridable","default"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,CAAC,IAAIC,CAAZ,QAAkB,wBAAlB;AAA2C,OAAOC,CAAP,MAAa,kBAAb;AAAgC,SAAOC,cAAc,IAAIC,CAAzB,QAA+B,4BAA/B;AAA4D,SAAOC,EAAE,IAAIC,CAAb,EAAeC,IAAI,IAAIC,CAAvB,QAA6B,uBAA7B;AAAqD,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,+CAAxB;AAAwE,OAAM,uBAAN;AAA8B,OAAM,gBAAN;AAAuB,SAAOC,IAAI,IAAIC,CAAf,QAAqB,4CAArB;AAAkE,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,gDAAzB;AAA0E,SAAOC,QAAQ,IAAIC,CAAnB,QAAyB,gDAAzB;AAA0E,OAAOC,CAAP,MAAa,aAAb;AAA2B,OAAOC,CAAP,MAAa,uCAAb;AAAqD,SAAOC,gBAAgB,IAAIC,CAA3B,EAA6BC,WAAW,IAAIC,CAA5C,QAAkD,0CAAlD;AAA6F,SAAOC,SAAS,IAAIC,CAApB,EAAsBC,WAAW,IAAIC,CAArC,EAAuCC,KAAK,IAAIC,CAAhD,QAAsD,0BAAtD;AAAiF,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,uCAA9B;AAAsE,OAAM,mBAAN;AAA0B,SAAOC,GAAG,IAAI/B,CAAd,QAAoB,yBAApB;AAA8C,MAAMgC,CAAC,GAAC;AAACC,EAAAA,SAAS,EAAC,CAAC,CAAZ;AAAcC,EAAAA,eAAe,EAAC,CAAC,CAA/B;AAAiCC,EAAAA,eAAe,EAAC,CAAC,CAAlD;AAAoDC,EAAAA,kBAAkB,EAAC,CAAC,CAAxE;AAA0EC,EAAAA,YAAY,EAAC,CAAC,CAAxF;AAA0FC,EAAAA,YAAY,EAAC,CAAC,CAAxG;AAA0GC,EAAAA,WAAW,EAAC,CAAC,CAAvH;AAAyHC,EAAAA,YAAY,EAAC,CAAC;AAAvI,CAAR;AAAA,MAAkJC,CAAC,GAAC;AAACC,EAAAA,IAAI,EAAC,kBAAN;AAAyBC,EAAAA,eAAe,EAAC,oCAAzC;AAA8EC,EAAAA,MAAM,EAAC,0BAArF;AAAgHC,EAAAA,MAAM,EAAC,2BAAvH;AAAmJC,EAAAA,SAAS,EAAC,6BAA7J;AAA2LC,EAAAA,aAAa,EAAC,mCAAzM;AAA6OC,EAAAA,gBAAgB,EAAC,sCAA9P;AAAqSC,EAAAA,OAAO,EAAC,2BAA7S;AAAyUZ,EAAAA,YAAY,EAAC,iCAAtV;AAAwXa,EAAAA,mBAAmB,EAAC,yCAA5Y;AAAsbZ,EAAAA,YAAY,EAAC,iCAAnc;AAAqea,EAAAA,KAAK,EAAC,yBAA3e;AAAqgBC,EAAAA,IAAI,EAAC,wBAA1gB;AAAmiBC,EAAAA,UAAU,EAAC,+BAA9iB;AAA8kBC,EAAAA,QAAQ,EAAC,6BAAvlB;AAAqnBC,EAAAA,YAAY,EAAC,mCAAloB;AAAsqBC,EAAAA,SAAS,EAAC,yBAAhrB;AAA0sBC,EAAAA,kBAAkB,EAAC,oCAA7tB;AAAkwBC,EAAAA,SAAS,EAAC,yBAA5wB;AAAsyBC,EAAAA,YAAY,EAAC,4BAAnzB;AAAg1BC,EAAAA,eAAe,EAAC,qCAAh2B;AAAs4BC,EAAAA,QAAQ,EAAC,6BAA/4B;AAA66BC,EAAAA,eAAe,EAAC,qCAA77B;AAAm+BC,EAAAA,mBAAmB,EAAC,0CAAv/B;AAAkiCC,EAAAA,YAAY,EAAC,kCAA/iC;AAAklCC,EAAAA,WAAW,EAAC,iCAA9lC;AAAgoCC,EAAAA,aAAa,EAAC,mCAA9oC;AAAkrCC,EAAAA,QAAQ,EAAC,6BAA3rC;AAAytCC,EAAAA,YAAY,EAAC,iCAAtuC;AAAwwCC,EAAAA,SAAS,EAAC,8BAAlxC;AAAizCC,EAAAA,QAAQ,EAAC,6BAA1zC;AAAw1CC,EAAAA,SAAS,EAAC,8BAAl2C;AAAi4CC,EAAAA,QAAQ,EAAC,4BAA14C;AAAu6CC,EAAAA,gBAAgB,EAAC,qCAAx7C;AAA89ClC,EAAAA,WAAW,EAAC,gCAA1+C;AAA2gDmC,EAAAA,UAAU,EAAC,aAAthD;AAAoiDC,EAAAA,UAAU,EAAC,aAA/iD;AAA6jDC,EAAAA,cAAc,EAAC,uBAA5kD;AAAomDC,EAAAA,mBAAmB,EAAC,wBAAxnD;AAAipDC,EAAAA,kBAAkB,EAAC,uBAApqD;AAA4rDC,EAAAA,eAAe,EAAC,oBAA5sD;AAAiuDC,EAAAA,eAAe,EAAC,oBAAjvD;AAAswDC,EAAAA,cAAc,EAAC,mBAArxD;AAAyyDC,EAAAA,KAAK,EAAC,6BAA/yD;AAA60DC,EAAAA,gBAAgB,EAAC,yBAA91D;AAAw3DC,EAAAA,QAAQ,EAAC,gBAAj4D;AAAk5DC,EAAAA,SAAS,EAAC,iBAA55D;AAA86DC,EAAAA,QAAQ,EAAC,gBAAv7D;AAAw8DC,EAAAA,QAAQ,EAAC;AAAj9D,CAApJ;AAAA,MAAunEC,CAAC,GAACC,MAAM,CAACC,GAAhoE;AAAooE,IAAIC,CAAC,GAAC,cAAc1E,CAAd,CAAe;AAAC2E,EAAAA,WAAW,CAAC3F,CAAD,EAAGC,CAAH,EAAK;AAAC,UAAMD,CAAN,EAAQC,CAAR,GAAW,KAAK2F,SAAL,GAAe,IAA1B,EAA+B,KAAKC,WAAL,GAAiB,MAAhD,EAAuD,KAAKC,OAAL,GAAa,IAApE,EAAyE,KAAKC,KAAL,GAAW,KAAK,CAAzF,EAA2F,KAAKC,QAAL,GAAc,IAAzG,EAA8G,KAAKC,aAAL,GAAmB,IAAjI,EAAsI,KAAKC,YAAL,GAAkB,IAAxJ,EAA6J,KAAKC,UAAL,GAAgB,CAAC,CAA9K,EAAgL,KAAKC,SAAL,GAAe,IAAInF,CAAJ,EAA/L,EAAqM,KAAKoF,eAAL,GAAqB,EAAC,GAAGtE;AAAJ,KAA1N,EAAiO,KAAKuE,yBAAL,GAA+Bf,CAAC,IAAEA,CAAC,CAACgB,QAAL,IAAehB,CAAC,CAACgB,QAAF,CAAW,mBAAX,EAA+B,YAA/B,CAA/Q,EAA4T,KAAKC,kBAAL,GAAwB,IAApV,EAAyV,KAAKC,qBAAL,GAA2B,IAApX;AAAyX;;AAAAC,EAAAA,UAAU,GAAE;AAAC,SAAKC,GAAL,CAAStG,CAAC,CAAC,IAAD,EAAM,2BAAN,EAAkC,QAAlC,EAA4C,MAAI,KAAKuG,cAAL,EAAhD,CAAV,EAAkFrG,CAAC,CAAC,IAAD,EAAM,gBAAN,EAAwB,MAAI,KAAKsG,YAAL,EAA5B,CAAnF;AAAsI;;AAAwB,MAApBC,oBAAoB,GAAE;AAAC,UAAK;AAACjB,MAAAA,WAAW,EAAC7F;AAAb,QAAgB,IAArB;AAA0B,WAAOA,CAAC,IAAE,WAASA,CAAZ,GAAcA,CAAd,GAAgB,KAAKoG,SAAL,CAAeW,yBAAf,GAAyC,SAAzC,GAAmD,MAA1E;AAAiF;;AAAAC,EAAAA,mBAAmB,CAAChH,CAAD,EAAG;AAAC,WAAM,EAAC,GAAG+B,CAAJ;AAAM,SAAG/B;AAAT,KAAN;AAAkB;;AAAAiH,EAAAA,aAAa,GAAE;AAAC,UAAK;AAACT,MAAAA,kBAAkB,EAACxG,CAApB;AAAsBoG,MAAAA,SAAS,EAACjG;AAAhC,QAAmC,IAAxC;AAA6C,WAAO,KAAK+G,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAlB,CAA3B,EAAmD/G,CAAC,CAAC8G,aAAF,CAAgBjH,CAAhB,EAAmBmH,IAAnB,CAAyBnH,CAAC,KAAG,KAAKkH,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAlB,CAA3B,EAAmD/G,CAAC,CAACiH,IAAF,GAAO,MAA1D,EAAiEpH,CAApE,CAA1B,EAAmGqH,KAAnG,CAA0GrH,CAAC,IAAE;AAAC,YAAM,KAAKkH,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAIjH,CAAJ,CAAM,4BAAN,EAAmC,KAAK+F,QAAL,CAAcsB,eAAjD,EAAiEtH,CAAjE,CAAlB,CAA3B,EAAkHA,CAAxH;AAA0H,KAAxO,CAA1D;AAAqS;;AAAAuH,EAAAA,gBAAgB,CAACvH,CAAD,EAAG;AAAC,UAAK;AAACoG,MAAAA,SAAS,EAACjG;AAAX,QAAc,IAAnB;AAAwB,WAAO,KAAK+G,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAlB,CAA3B,EAAmD/G,CAAC,CAACoH,gBAAF,CAAmBvH,CAAnB,EAAsBmH,IAAtB,CAA4BnH,CAAC,KAAG,KAAKkH,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAlB,CAA3B,EAAmD/G,CAAC,CAACiH,IAAF,GAAO,MAA1D,EAAiEpH,CAApE,CAA7B,EAAsGqH,KAAtG,CAA6GrH,CAAC,IAAE;AAAC,YAAM,KAAKkH,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAIjH,CAAJ,CAAM,+BAAN,EAAsC,KAAK+F,QAAL,CAAcwB,kBAApD,EAAuExH,CAAvE,CAAlB,CAA3B,EAAwHA,CAA9H;AAAgI,KAAjP,CAA1D;AAA8S;;AAAAyH,EAAAA,gBAAgB,GAAE;AAAC,UAAK;AAACrB,MAAAA,SAAS,EAACpG;AAAX,QAAc,IAAnB;AAAA,UAAwB;AAACyG,MAAAA,qBAAqB,EAACtG;AAAvB,QAA0B,IAAlD;AAAuD,WAAO,KAAK+G,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAlB,CAA3B,EAAmDlH,CAAC,CAACyH,gBAAF,CAAmBtH,CAAnB,EAAsBgH,IAAtB,CAA4BlH,CAAC,KAAG,KAAKiH,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAlB,CAA3B,EAAmDlH,CAAC,CAACoH,IAAF,GAAO,MAA1D,EAAiEnH,CAApE,CAA7B,EAAsGoH,KAAtG,CAA6GrH,CAAC,IAAE;AAAC,YAAM,KAAKkH,IAAL,CAAU,YAAV,EAAuB,CAAC,CAAxB,GAA2B,KAAKA,IAAL,CAAU,OAAV,EAAkB,IAAIjH,CAAJ,CAAM,+BAAN,EAAsC,KAAK+F,QAAL,CAAc0B,kBAApD,EAAuE1H,CAAvE,CAAlB,CAA3B,EAAwHA,CAA9H;AAAgI,KAAjP,CAA1D;AAA8S;;AAAA2H,EAAAA,MAAM,GAAE;AAAC,UAAK;AAACxB,MAAAA,UAAU,EAACnG,CAAZ;AAAcoG,MAAAA,SAAS,EAACnG;AAAxB,QAA2B,IAAhC;AAAA,UAAqC;AAAC2H,MAAAA,KAAK,EAACzH;AAAP,QAAUF,CAA/C;AAAiD,WAAOF,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACC,IAAf,EAAoBD,CAAC,CAACiC,UAAtB;AAAP,KAAP,EAAiDzE,CAAC,GAAC,KAAK+H,iBAAL,EAAD,GAA0B,IAA5E,EAAiF,cAAY5H,CAAZ,GAAc,KAAK6H,aAAL,EAAd,GAAmC,KAAKC,iBAAL,EAApH,EAA6I,KAAKC,kBAAL,EAA7I,CAAR;AAAgL;;AAAAA,EAAAA,kBAAkB,GAAE;AAAC,UAAK;AAACC,MAAAA,KAAK,EAACnI,CAAP;AAASqG,MAAAA,eAAe,EAACpG;AAAzB,QAA4B,IAAjC;AAAsC,WAAOD,CAAC,IAAEC,CAAC,CAACoC,YAAL,GAAkBtC,CAAC,CAAC,KAAD,EAAO;AAACqI,MAAAA,GAAG,EAAC,eAAL;AAAqBP,MAAAA,KAAK,EAACrF,CAAC,CAACH;AAA7B,KAAP,EAAkDrC,CAAC,CAACqI,OAApD,CAAnB,GAAgF,IAAvF;AAA4F;;AAAAJ,EAAAA,iBAAiB,GAAE;AAAC,UAAK;AAACb,MAAAA,IAAI,EAACpH,CAAN;AAAQsI,MAAAA,oBAAoB,EAACrI;AAA7B,QAAgC,KAAKmG,SAA1C;AAAoD,WAAM,UAAQpG,CAAR,GAAU,KAAKuI,aAAL,EAAV,GAA+B,WAASvI,CAAT,GAAW,KAAKwI,iBAAL,CAAuBvI,CAAvB,CAAX,GAAqC,KAAKwI,yBAAL,EAA1E;AAA2G;;AAAAT,EAAAA,aAAa,GAAE;AAAC,WAAOjI,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACE,eAAT;AAAyB0F,MAAAA,GAAG,EAAC;AAA7B,KAAP,EAA8CrI,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACG;AAAT,KAAP,CAA/C,CAAR;AAAiF;;AAAAoF,EAAAA,iBAAiB,GAAE;AAAC,WAAO,KAAK1B,eAAL,CAAqB/D,WAArB,GAAiCvC,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACF,WAAT;AAAqB8F,MAAAA,GAAG,EAAC;AAAzB,KAAP,CAAlC,GAAmF,IAA1F;AAA+F;;AAAAG,EAAAA,aAAa,GAAE;AAAC,UAAK;AAACpC,MAAAA,UAAU,EAACnG,CAAZ;AAAckG,MAAAA,YAAY,EAACjG;AAA3B,QAA8B,IAAnC;AAAA,UAAwCE,CAAC,GAACH,CAAC,IAAE,CAACC,CAA9C;AAAA,UAAgDI,CAAC,GAAC,KAAKgG,eAAL,CAAqBnE,eAArB,GAAqCnC,CAAC,CAAC,QAAD,EAAU;AAAC2I,MAAAA,IAAI,EAAC,QAAN;AAAeC,MAAAA,IAAI,EAAC,IAApB;AAAyBC,MAAAA,QAAQ,EAAC5I,CAAlC;AAAoC6I,MAAAA,OAAO,EAAC,KAAKC,WAAjD;AAA6DjB,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACkC,UAAf,EAA0BlC,CAAC,CAACqC,kBAA5B,EAA+CrC,CAAC,CAACuC,eAAjD,EAAiEvC,CAAC,CAACwC,cAAnE,EAAkFhF,CAAC,IAAEwC,CAAC,CAACmC,cAAvF;AAAnE,KAAV,EAAqL,KAAKqB,QAAL,CAAc+C,MAAnM,CAAtC,GAAiP,IAAnS;AAAA,UAAwSxI,CAAC,GAAC,KAAK8F,eAAL,CAAqBpE,eAArB,GAAqClC,CAAC,CAAC,QAAD,EAAU;AAAC2I,MAAAA,IAAI,EAAC,QAAN;AAAeE,MAAAA,QAAQ,EAACzI,CAAxB;AAA0B0H,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACkC,UAAf,EAA0BlC,CAAC,CAACoC,mBAA5B,EAAgDpC,CAAC,CAACuC,eAAlD,EAAkEvC,CAAC,CAACwC,cAApE,EAAmF;AAAC,SAACxC,CAAC,CAACmC,cAAH,GAAmBxE;AAApB,OAAnF;AAAhC,KAAV,EAAsJ,KAAK6F,QAAL,CAAcgD,GAApK,CAAtC,GAA+M,IAAzf;AAAA,UAA8fvI,CAAC,GAACR,CAAC,GAACF,CAAC,CAAC,MAAD,EAAQ;AAACqI,MAAAA,GAAG,EAAC,WAAL;AAAiBP,MAAAA,KAAK,EAACrF,CAAC,CAAC6B;AAAzB,KAAR,EAA2CpE,CAAC,CAACgJ,IAA7C,CAAF,GAAqD,IAAtjB;AAAA,UAA2jBtI,CAAC,GAACZ,CAAC,CAAC,MAAD,EAAQ;AAAC4I,MAAAA,IAAI,EAAC,IAAN;AAAWO,MAAAA,WAAW,EAAC3H,CAAvB;AAAyB4H,MAAAA,YAAY,EAAC1H,CAAtC;AAAwC,uBAAgB,oBAAxD;AAA6E2H,MAAAA,QAAQ,EAAC,KAAKC;AAA3F,KAAR,EAAyHtJ,CAAC,CAAC,UAAD,EAAY;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAAC2B;AAAT,KAAZ,EAAmC1D,CAAnC,EAAqCV,CAAC,CAAC,OAAD,EAAS;AAAC8H,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAAC4B,SAAf,EAAyB5B,CAAC,CAACkC,UAA3B,EAAsClC,CAAC,CAACoC,mBAAxC;AAAP,KAAT,EAA8E3E,CAAC,GAAC,KAAK+F,QAAL,CAAcsD,UAAf,GAA0B,KAAKtD,QAAL,CAAcuD,UAAvH,EAAkIxJ,CAAC,CAAC,OAAD,EAAS;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAAC8B,SAAT;AAAmBoE,MAAAA,IAAI,EAAC,MAAxB;AAA+BO,MAAAA,IAAI,EAAC,YAApC;AAAiDN,MAAAA,IAAI,EAAC,IAAtD;AAA2Da,MAAAA,QAAQ,EAAC,KAAKC;AAAzE,KAAT,CAAnI,CAAtC,CAA1H,EAAgZlJ,CAAhZ,EAAkZF,CAAlZ,CAA9jB;;AAAm9B,WAAON,CAAC,CAAC,KAAD,EAAO;AAACqI,MAAAA,GAAG,EAAC,oBAAL;AAA0BP,MAAAA,KAAK,EAACrF,CAAC,CAAC0B;AAAlC,KAAP,EAAmDvD,CAAnD,CAAR;AAA8D;;AAAA6H,EAAAA,iBAAiB,CAACxI,CAAD,EAAG;AAAC,UAAK;AAACqG,MAAAA,eAAe,EAACpG,CAAjB;AAAmBmG,MAAAA,SAAS,EAAC/F,CAA7B;AAA+B6F,MAAAA,YAAY,EAAC3F,CAA5C;AAA8C4F,MAAAA,UAAU,EAAC1F;AAAzD,QAA4D,IAAjE;AAAA,UAAsE;AAACiJ,MAAAA,WAAW,EAAC/I,CAAb;AAAegJ,MAAAA,IAAI,EAAC9I,CAApB;AAAsB+I,MAAAA,GAAG,EAAC7I;AAA1B,QAA6Bf,CAAnG;AAAA,UAAqG;AAAC4F,MAAAA,SAAS,EAAC5E;AAAX,QAAcX,CAAnH;AAAA,UAAqHY,CAAC,GAACR,CAAC,IAAE,CAACF,CAA3H;AAAA,UAA6HY,CAAC,GAACH,CAAC,CAAC6I,OAAF,IAAW7I,CAAC,CAAC8I,UAAF,CAAaC,MAAxB,IAAgC9J,CAAC,CAACmC,YAAlC,GAA+CrC,CAAC,CAAC,QAAD,EAAU;AAACqI,MAAAA,GAAG,EAAC,eAAL;AAAqBM,MAAAA,IAAI,EAAC,QAA1B;AAAmCE,MAAAA,QAAQ,EAACnI,CAA5C;AAA8CkI,MAAAA,IAAI,EAAC,IAAnD;AAAwDE,MAAAA,OAAO,EAAC5I,CAAC,IAAE,KAAK+J,uBAAL,CAA6B/J,CAA7B,EAA+BD,CAA/B,CAAnE;AAAqG6H,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACkC,UAAf,EAA0BlC,CAAC,CAACuC,eAA5B,EAA4CvC,CAAC,CAACqC,kBAA9C,EAAiErC,CAAC,CAACJ,YAAnE,EAAgF;AAAC,SAACI,CAAC,CAACmC,cAAH,GAAmBlE;AAApB,OAAhF;AAA3G,KAAV,EAA8N,KAAKuF,QAAL,CAAc+D,MAA5O,CAAhD,GAAoS,IAAna;AAAA,UAAwa1I,CAAC,GAACL,CAAC,CAAC6I,OAAF,IAAW7I,CAAC,CAAC8I,UAAF,CAAaG,MAAxB,IAAgChK,CAAC,CAACsC,YAAlC,GAA+CxC,CAAC,CAAC,QAAD,EAAU;AAAC6I,MAAAA,QAAQ,EAAC3H,CAAV;AAAYmH,MAAAA,GAAG,EAAC,eAAhB;AAAgCM,MAAAA,IAAI,EAAC,QAArC;AAA8Cb,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACkC,UAAf,EAA0BlC,CAAC,CAACuC,eAA5B,EAA4CvC,CAAC,CAACsC,eAA9C,EAA8D;AAAC,SAACtC,CAAC,CAACmC,cAAH,GAAmB1D;AAApB,OAA9D;AAApD,KAAV,EAAqJ,KAAK+E,QAAL,CAAciE,MAAnK,CAAhD,GAA2N,IAAroB;AAAA,UAA0oBtI,CAAC,GAAC,KAAK0E,eAAL,CAAqBlE,kBAArB,GAAwCpC,CAAC,CAAC,QAAD,EAAU;AAAC6I,MAAAA,QAAQ,EAACnI,CAAV;AAAY2H,MAAAA,GAAG,EAAC,eAAhB;AAAgCM,MAAAA,IAAI,EAAC,QAArC;AAA8CC,MAAAA,IAAI,EAAC,IAAnD;AAAwDE,MAAAA,OAAO,EAAC,KAAKC,WAArE;AAAiFjB,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACkC,UAAf,EAA0BlC,CAAC,CAACuC,eAA5B,EAA4CvC,CAAC,CAACqC,kBAA9C,EAAiErC,CAAC,CAACsC,eAAnE,EAAmF;AAAC,SAACtC,CAAC,CAACmC,cAAH,GAAmBlE;AAApB,OAAnF;AAAvF,KAAV,EAA6M,KAAKuF,QAAL,CAAc+C,MAA3N,CAAzC,GAA4Q,IAAx5B;AAAA,UAA65BlH,CAAC,GAACtB,CAAC,GAACR,CAAC,CAAC,MAAD,EAAQ;AAACqI,MAAAA,GAAG,EAAC,WAAL;AAAiBP,MAAAA,KAAK,EAACrF,CAAC,CAAC6B;AAAzB,KAAR,EAA2C9D,CAAC,CAAC0I,IAA7C,CAAF,GAAqD,IAAr9B;AAAA,UAA09BlH,CAAC,GAACf,CAAC,CAAC6I,OAAF,IAAW7I,CAAC,CAAC8I,UAAF,CAAaG,MAAxB,GAA+BlK,CAAC,CAAC,UAAD,EAAY;AAACqI,MAAAA,GAAG,EAAC,MAAL;AAAYP,MAAAA,KAAK,EAACrF,CAAC,CAAC2B;AAApB,KAAZ,EAA8CtC,CAA9C,EAAgD9B,CAAC,CAAC,OAAD,EAAS;AAAC8H,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAAC4B,SAAf,EAAyB5B,CAAC,CAACkC,UAA3B,EAAsClC,CAAC,CAACoC,mBAAxC;AAAP,KAAT,EAA8E,KAAKoB,QAAL,CAAcsD,UAA5F,EAAuGvJ,CAAC,CAAC,OAAD,EAAS;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAAC8B,SAAT;AAAmBoE,MAAAA,IAAI,EAAC,MAAxB;AAA+BO,MAAAA,IAAI,EAAC,YAApC;AAAiDN,MAAAA,IAAI,EAAC,IAAtD;AAA2Da,MAAAA,QAAQ,EAAC,KAAKC;AAAzE,KAAT,CAAxG,CAAjD,CAAhC,GAAsS,IAAlwC;AAAA,UAAuwClE,CAAC,GAACxF,CAAC,CAAC,UAAD,EAAY;AAACqI,MAAAA,GAAG,EAAC,MAAL;AAAYP,MAAAA,KAAK,EAACrF,CAAC,CAACgC;AAApB,KAAZ,EAAkDzE,CAAC,CAAC,OAAD,EAAS,IAAT,EAAcI,CAAC,CAAC,KAAK8F,aAAN,EAAoBpF,CAApB,CAAf,CAAnD,CAA1wC;AAAA,UAAq2C6E,CAAC,GAAC3F,CAAC,CAAC,UAAD,EAAY;AAACqI,MAAAA,GAAG,EAAC,cAAL;AAAoBP,MAAAA,KAAK,EAACrF,CAAC,CAACgC;AAA5B,KAAZ,EAA0DzE,CAAC,CAAC,OAAD,EAAS,IAAT,EAAcY,CAAd,CAA3D,CAAx2C;AAAA,UAAq7CuJ,CAAC,GAACnK,CAAC,CAAC,MAAD,EAAQ;AAAC4I,MAAAA,IAAI,EAAC,IAAN;AAAWO,MAAAA,WAAW,EAAC3H,CAAvB;AAAyB4H,MAAAA,YAAY,EAAC1H,CAAtC;AAAwC,uBAAgB,uBAAxD;AAAgF2H,MAAAA,QAAQ,EAAC,KAAKe;AAA9F,KAAR,EAA+HpK,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAAC+B;AAAT,KAAP,EAA0BgB,CAA1B,EAA4BG,CAA5B,CAAhI,EAA+J3D,CAA/J,EAAiKhC,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACQ;AAAT,KAAP,EAAyB7B,CAAzB,EAA2BQ,CAA3B,EAA6BN,CAA7B,CAAlK,CAAx7C;;AAA2nD,WAAOtB,CAAC,CAAC,KAAD,EAAO;AAACqI,MAAAA,GAAG,EAAC,qBAAL;AAA2BP,MAAAA,KAAK,EAACrF,CAAC,CAAC0B;AAAnC,KAAP,EAAoDnE,CAAC,CAAC,GAAD,EAAK;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACoB,QAAT;AAAkBwG,MAAAA,IAAI,EAACrJ,CAAvB;AAAyBsJ,MAAAA,GAAG,EAAC,YAA7B;AAA0CC,MAAAA,MAAM,EAAC;AAAjD,KAAL,EAAgE,KAAKC,eAAL,CAAqB;AAACC,MAAAA,cAAc,EAACxK,CAAhB;AAAkB2J,MAAAA,IAAI,EAAC;AAAvB,KAArB,CAAhE,EAAkH5J,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACqB;AAAT,KAAP,EAAiC9D,CAAC,CAAC,MAAD,EAAQ;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACsB;AAAT,KAAR,EAAsC/D,CAAC,CAAC,KAAD,EAAO;AAAC0K,MAAAA,KAAK,EAAC,4BAAP;AAAoCC,MAAAA,KAAK,EAAC,IAA1C;AAA+CC,MAAAA,MAAM,EAAC,IAAtD;AAA2DC,MAAAA,OAAO,EAAC;AAAnE,KAAP,EAAuF7K,CAAC,CAAC,MAAD,EAAQ;AAACkB,MAAAA,CAAC,EAAC;AAAH,KAAR,CAAxF,EAA0LlB,CAAC,CAAC,MAAD,EAAQ;AAAC8K,MAAAA,IAAI,EAAC,MAAN;AAAa5J,MAAAA,CAAC,EAAC;AAAf,KAAR,CAA3L,CAAvC,CAAlC,CAAnH,CAArD,EAAydiJ,CAAzd,CAAR;AAAoe;;AAAAK,EAAAA,eAAe,OAA2B;AAAA,QAA1B;AAACC,MAAAA,cAAc,EAACxK,CAAhB;AAAkB2J,MAAAA,IAAI,EAAC1J;AAAvB,KAA0B;;AAAC,UAAK;AAAC8G,MAAAA,yBAAyB,EAAC5G;AAA3B,QAA8B,KAAKiG,SAAxC;AAAA,UAAkD;AAACsD,MAAAA,WAAW,EAACrJ,CAAb;AAAe4I,MAAAA,IAAI,EAAC1I,CAApB;AAAsBqJ,MAAAA,GAAG,EAACnJ;AAA1B,QAA6BT,CAA/E;AAAA,UAAiFW,CAAC,GAACR,CAAC,IAAEgB,CAAC,CAACd,CAAD,CAAvF;AAAA,UAA2FQ,CAAC,GAAC,KAAKiK,gBAAL,CAAsB9K,CAAtB,EAAwBW,CAAxB,CAA7F;AAAA,UAAwHI,CAAC,GAACF,CAAC,GAAC;AAACkK,MAAAA,SAAS,EAAClK,CAAX;AAAa,2BAAoB;AAAjC,KAAD,GAA0C,EAArK;AAAA,UAAwKG,CAAC,GAAC,CAAC,CAAD,KAAKP,CAAC,CAACuK,OAAF,CAAU,GAAV,CAAL,GAAoB,GAApB,GAAwB,GAAlM;AAAA,UAAsM/J,CAAC,GAACN,CAAC,GAAE,GAAEF,CAAE,GAAEO,CAAE,KAAIf,CAAE,EAAhB,GAAkBoB,CAAC,CAAChB,CAAD,CAA5N;AAAA,UAAgOkB,CAAC,GAAC;AAAC,OAACiB,CAAC,CAACc,YAAH,GAAiB,CAAC3C;AAAnB,KAAlO;AAAA,UAAwPc,CAAC,GAAC;AAAC,OAACe,CAAC,CAACgB,kBAAH,GAAuBrD;AAAxB,KAA1P;;AAAqR,WAAOJ,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAavG,CAAb,EAAeiB,CAAC,CAACa,QAAjB;AAAP,KAAP,EAA0CtD,CAAC,CAAC,KAAD,EAAO;AAACkL,MAAAA,MAAM,EAAClK,CAAR;AAAUmK,MAAAA,GAAG,EAAC3K,CAAd;AAAgB4K,MAAAA,GAAG,EAAClK,CAApB;AAAsB4G,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAarG,CAAb,EAAee,CAAC,CAACe,SAAjB;AAA5B,KAAP,CAA3C,CAAR;AAAqH;;AAAA6H,EAAAA,oBAAoB,QAAkC;AAAA,QAAjC;AAACZ,MAAAA,cAAc,EAACxK,CAAhB;AAAkB6F,MAAAA,WAAW,EAAC5F;AAA9B,KAAiC;AAAC,UAAK;AAACmG,MAAAA,SAAS,EAACjG;AAAX,QAAc,IAAnB;AAAA,UAAwB;AAACyF,MAAAA,SAAS,EAACvF;AAAX,QAAcF,CAAtC;AAAA,UAAwC;AAAC8I,MAAAA,IAAI,EAAC1I,CAAN;AAAQqJ,MAAAA,GAAG,EAACnJ;AAAZ,QAAeT,CAAvD;AAAA,UAAyDW,CAAC,GAAC,KAAK4J,eAAL,CAAqB;AAACC,MAAAA,cAAc,EAACxK,CAAhB;AAAkB2J,MAAAA,IAAI,EAAC,WAAS1J,CAAT,GAAW,EAAX,GAAc;AAArC,KAArB,CAA3D;AAAA,UAA2HY,CAAC,GAACR,CAAC,CAACwJ,OAAF,GAAU9J,CAAC,CAAC,MAAD,EAAQ;AAAC,qBAAc,MAAf;AAAsB8H,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACmB,eAAf,EAA+BhC,CAAC,CAAC,KAAKkB,SAAN,CAAD,GAAkBL,CAAC,CAAC6C,QAApB,GAA6B7C,CAAC,CAAC4C,SAA9D;AAA5B,KAAR,CAAX,GAA0H,IAAvP;AAAA,UAA4PrE,CAAC,GAAC,CAACJ,CAAD,EAAGZ,CAAC,CAAC,OAAD,EAAS;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACiB;AAAT,KAAT,EAA6B1D,CAAC,CAAC,MAAD,EAAQ;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACkB;AAAT,KAAR,EAA+BnD,CAAC,IAAE,KAAKyF,QAAL,CAAcqF,OAAhD,CAA9B,EAAuFxK,CAAvF,CAAJ,CAA9P;AAAA,UAA6VG,CAAC,GAACX,CAAC,CAACwJ,OAAF,GAAU9J,CAAC,CAAC,QAAD,EAAU;AAACqI,MAAAA,GAAG,EAAC,gBAAL;AAAsBO,MAAAA,IAAI,EAAC,IAA3B;AAAgCd,MAAAA,KAAK,EAACrF,CAAC,CAACY,UAAxC;AAAmDkI,MAAAA,KAAK,EAAC,KAAKtF,QAAL,CAAcuF,iBAAvE;AAAyF,oBAAa,KAAKvF,QAAL,CAAcuF,iBAApH;AAAsI,iCAA0BvL,CAAC,CAACwL,EAAlK;AAAqK3C,MAAAA,OAAO,EAAC,MAAI,KAAK4C,oBAAL,CAA0BzL,CAA1B,CAAjL;AAA8M0I,MAAAA,IAAI,EAAC;AAAnN,KAAV,EAAuO3H,CAAvO,CAAX,GAAqPhB,CAAC,CAAC,GAAD,EAAK;AAACqI,MAAAA,GAAG,EAAC,cAAL;AAAoBP,MAAAA,KAAK,EAACrF,CAAC,CAACY,UAA5B;AAAuCgH,MAAAA,IAAI,EAAC3J,CAA5C;AAA8C6J,MAAAA,MAAM,EAAC;AAArD,KAAL,EAAoEvJ,CAApE,CAArlB;AAA4pB,WAAOhB,CAAC,CAAC,IAAD,EAAM;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACW,IAAT;AAAciF,MAAAA,GAAG,EAACpI;AAAlB,KAAN,EAA2BgB,CAA3B,CAAR;AAAsC;;AAAAyH,EAAAA,yBAAyB,GAAE;AAAC,UAAK;AAAC3B,MAAAA,oBAAoB,EAAC9G,CAAtB;AAAwBoG,MAAAA,SAAS,EAACnG,CAAlC;AAAoCoG,MAAAA,eAAe,EAAClG;AAApD,QAAuD,IAA5D;AAAA,UAAiE;AAACuL,MAAAA,eAAe,EAACrL,CAAjB;AAAmBuF,MAAAA,SAAS,EAACrF;AAA7B,QAAgCN,CAAjG;AAAA,UAAmGQ,CAAC,GAACJ,CAAC,IAAEA,CAAC,CAACsL,MAA1G;AAAA,UAAiHhL,CAAC,GAAC;AAAC,OAAC6B,CAAC,CAACM,aAAH,GAAkB,cAAY9C,CAA/B;AAAiC,OAACwC,CAAC,CAACO,gBAAH,GAAqB,cAAY/C;AAAlE,KAAnH;AAAA,UAAwLa,CAAC,GAACN,CAAC,CAACsJ,OAAF,IAAWtJ,CAAC,CAACuJ,UAAF,CAAad,GAAxB,IAA6B7I,CAAC,CAAC6B,SAA/B,GAAyCjC,CAAC,CAAC,QAAD,EAAU;AAAC4I,MAAAA,IAAI,EAAC,IAAN;AAAWE,MAAAA,OAAO,EAAC,MAAI,KAAK+C,mBAAL,EAAvB;AAAkD/D,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACkC,UAAf,EAA0BlC,CAAC,CAACqC,kBAA5B,EAA+CrC,CAAC,CAACS,mBAAjD,CAAxD;AAA8HyF,MAAAA,IAAI,EAAC;AAAnI,KAAV,EAAuJ3I,CAAC,CAAC,MAAD,EAAQ;AAAC,qBAAc,MAAf;AAAsB8H,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACwB,WAAf,EAA2BxB,CAAC,CAAC8C,QAA7B;AAA5B,KAAR,CAAxJ,EAAqO,KAAKU,QAAL,CAAcgD,GAAnP,CAA1C,GAAkS,IAA5d;AAAA,UAAiejI,CAAC,GAACN,CAAC,GAACV,CAAC,CAAC,IAAD,EAAM;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACU;AAAT,KAAN,EAAsB7C,CAAC,CAACwL,OAAF,GAAYC,GAAZ,CAAiB7L,CAAC,IAAE,KAAKmL,oBAAL,CAA0B;AAACZ,MAAAA,cAAc,EAACvK,CAAhB;AAAkB4F,MAAAA,WAAW,EAAC7F;AAA9B,KAA1B,CAApB,CAAtB,CAAF,GAA2GD,CAAC,CAAC,KAAD,EAAO;AAAC8H,MAAAA,KAAK,EAACrF,CAAC,CAACyC;AAAT,KAAP,EAAuB,KAAKe,QAAL,CAAc+F,aAArC,CAAhlB;AAAooB,WAAOhM,CAAC,CAAC,KAAD,EAAO;AAACqI,MAAAA,GAAG,EAAC,uBAAL;AAA6BP,MAAAA,KAAK,EAAC,KAAKC,OAAL,CAAatF,CAAC,CAACK,SAAf,EAAyBlC,CAAzB;AAAnC,KAAP,EAAuEI,CAAvE,EAAyEF,CAAzE,CAAR;AAAoF;;AAAAgG,EAAAA,YAAY,GAAE;AAAC,SAAKK,IAAL,CAAU,OAAV,EAAkB,IAAlB,GAAwB,KAAKA,IAAL,CAAU,cAAV,EAAyB,IAAzB,CAAxB;AAAuD;;AAAAuC,EAAAA,sBAAsB,CAACzJ,CAAD,EAAG;AAAC,UAAMC,CAAC,GAACD,CAAC,CAACsK,MAAV;AAAA,UAAiBnK,CAAC,GAACF,CAAC,IAAEA,CAAC,CAAC+L,KAAL,IAAY/L,CAAC,CAAC+L,KAAF,CAAQ7I,IAAR,CAAa,CAAb,CAA/B;;AAA+C,SAAK+D,IAAL,CAAU,cAAV,EAAyB/G,CAAzB;AAA4B;;AAAA6J,EAAAA,uBAAuB,CAAChK,CAAD,EAAGC,CAAH,EAAK;AAACD,IAAAA,CAAC,CAACiM,cAAF,IAAmB,KAAK1E,gBAAL,CAAsBtH,CAAtB,CAAnB;AAA4C;;AAAAoJ,EAAAA,oBAAoB,CAACrJ,CAAD,EAAG;AAACA,IAAAA,CAAC,CAACiM,cAAF,IAAmB,KAAKhF,aAAL,EAAnB;AAAwC;;AAAAkD,EAAAA,uBAAuB,CAACnK,CAAD,EAAG;AAACA,IAAAA,CAAC,CAACiM,cAAF,IAAmB,KAAKxE,gBAAL,EAAnB;AAA2C;;AAAAgE,EAAAA,oBAAoB,CAACzL,CAAD,EAAG;AAAC,UAAK;AAACoG,MAAAA,SAAS,EAACnG;AAAX,QAAc,IAAnB;AAAwBA,IAAAA,CAAC,CAACqI,oBAAF,GAAuBtI,CAAvB,EAAyBC,CAAC,CAACmH,IAAF,GAAO,MAAhC;AAAuC;;AAAAwE,EAAAA,mBAAmB,GAAE;AAAC,SAAKxF,SAAL,CAAegB,IAAf,GAAoB,KAApB;AAA0B;;AAAA0B,EAAAA,WAAW,CAAC9I,CAAD,EAAG;AAACA,IAAAA,CAAC,CAACiM,cAAF,IAAmB,KAAK7F,SAAL,CAAegB,IAAf,GAAoB,MAAvC;AAA8C;;AAAA0D,EAAAA,gBAAgB,CAAC9K,CAAD,EAAGC,CAAH,EAAK;AAAC,UAAK;AAACiM,MAAAA,eAAe,EAAC/L;AAAjB,QAAoBH,CAAzB;AAA2B,WAAM,CAAC,KAAKsG,yBAAN,IAAiCrG,CAAjC,IAAoCE,CAApC,GAAsC,CAACA,CAAC,CAACgM,QAAF,GAAY,UAAShM,CAAC,CAACgM,QAAS,MAAhC,GAAsC,EAAvC,EAA0ChM,CAAC,CAACiM,QAAF,GAAW,YAAX,GAAwB,EAAlE,EAAsEC,IAAtE,CAA2E,GAA3E,CAAtC,GAAsH,EAA5H;AAA+H;;AAA9yQ,CAArB;AAAq0QrM,CAAC,CAAC,CAACS,CAAC,CAAC,qBAAD,CAAF,CAAD,EAA4BiF,CAAC,CAAC4G,SAA9B,EAAwC,WAAxC,EAAoD,KAAK,CAAzD,CAAD,EAA6DtM,CAAC,CAAC,CAACa,CAAC,EAAF,CAAD,EAAO6E,CAAC,CAAC4G,SAAT,EAAmB,aAAnB,EAAiC,KAAK,CAAtC,CAA9D,EAAuGtM,CAAC,CAAC,CAACa,CAAC,CAAC;AAAC0L,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB7G,CAAC,CAAC4G,SAAtB,EAAgC,sBAAhC,EAAuD,IAAvD,CAAxG,EAAqKtM,CAAC,CAAC,CAACS,CAAC,CAAC,mBAAD,CAAF,CAAD,EAA0BiF,CAAC,CAAC4G,SAA5B,EAAsC,SAAtC,EAAgD,KAAK,CAArD,CAAtK,EAA8NtM,CAAC,CAAC,CAACa,CAAC,CAAC;AAACL,EAAAA,OAAO,EAAC;AAACgM,IAAAA,MAAM,EAAC,sBAAR;AAA+BC,IAAAA,WAAW,EAAC,CAAC;AAA5C;AAAT,CAAD,CAAF,CAAD,EAA+D/G,CAAC,CAAC4G,SAAjE,EAA2E,OAA3E,EAAmF,KAAK,CAAxF,CAA/N,EAA0TtM,CAAC,CAAC,CAACa,CAAC,EAAF,EAAKgB,CAAC,CAAC,0CAAD,CAAN,CAAD,EAAqD6D,CAAC,CAAC4G,SAAvD,EAAiE,UAAjE,EAA4E,KAAK,CAAjF,CAA3T,EAA+YtM,CAAC,CAAC,CAACa,CAAC,EAAF,EAAKgB,CAAC,CAAC,qBAAD,CAAN,CAAD,EAAgC6D,CAAC,CAAC4G,SAAlC,EAA4C,eAA5C,EAA4D,KAAK,CAAjE,CAAhZ,EAAodtM,CAAC,CAAC,CAACa,CAAC,CAAC;AAAC0L,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB7G,CAAC,CAAC4G,SAAtB,EAAgC,cAAhC,EAA+C,KAAK,CAApD,CAArd,EAA4gBtM,CAAC,CAAC,CAACa,CAAC,CAAC;AAAC0L,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB7G,CAAC,CAAC4G,SAAtB,EAAgC,YAAhC,EAA6C,KAAK,CAAlD,CAA7gB,EAAkkBtM,CAAC,CAAC,CAACa,CAAC,CAAC;AAAC0L,EAAAA,QAAQ,EAAC,CAAC;AAAX,CAAD,CAAF,CAAD,EAAoB7G,CAAC,CAAC4G,SAAtB,EAAgC,OAAhC,EAAwC,KAAK,CAA7C,CAAnkB,EAAmnBtM,CAAC,CAAC,CAACa,CAAC,CAAC;AAAC6H,EAAAA,IAAI,EAACzH;AAAN,CAAD,CAAF,CAAD,EAAeyE,CAAC,CAAC4G,SAAjB,EAA2B,WAA3B,EAAuC,KAAK,CAA5C,CAApnB,EAAmqBtM,CAAC,CAAC,CAACa,CAAC,EAAF,CAAD,EAAO6E,CAAC,CAAC4G,SAAT,EAAmB,iBAAnB,EAAqC,KAAK,CAA1C,CAApqB,EAAitBtM,CAAC,CAAC,CAACW,CAAC,CAAC,iBAAD,CAAF,CAAD,EAAwB+E,CAAC,CAAC4G,SAA1B,EAAoC,qBAApC,EAA0D,IAA1D,CAAltB,EAAkxB5G,CAAC,GAAC1F,CAAC,CAAC,CAACe,CAAC,CAAC,0BAAD,CAAF,CAAD,EAAiC2E,CAAjC,CAArxB;AAAyzB,MAAMwE,CAAC,GAACxE,CAAR;AAAU,SAAOwE,CAAC,IAAIwC,OAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../chunks/tslib.es6.js\";import e from\"../core/Error.js\";import{formatFileSize as s}from\"../core/unitFormatUtils.js\";import{on as i,init as a}from\"../core/watchUtils.js\";import{aliasOf as n}from\"../core/accessorSupport/decorators/aliasOf.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{cast as r}from\"../core/accessorSupport/decorators/cast.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import{subclass as l}from\"../core/accessorSupport/decorators/subclass.js\";import m from\"./Widget.js\";import d from\"./Attachments/AttachmentsViewModel.js\";import{isSupportedImage as c,getIconPath as h}from\"./Attachments/support/attachmentUtils.js\";import{storeNode as u,discardNode as p,isRTL as b}from\"./support/widgetUtils.js\";import{messageBundle as g}from\"./support/decorators/messageBundle.js\";import\"../core/Logger.js\";import{tsx as _}from\"./support/jsxFactory.js\";const f={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},v={base:\"esri-attachments\",loaderContainer:\"esri-attachments__loader-container\",loader:\"esri-attachments__loader\",fadeIn:\"esri-attachments--fade-in\",container:\"esri-attachments__container\",containerList:\"esri-attachments__container--list\",containerPreview:\"esri-attachments__container--preview\",actions:\"esri-attachments__actions\",deleteButton:\"esri-attachments__delete-button\",addAttachmentButton:\"esri-attachments__add-attachment-button\",errorMessage:\"esri-attachments__error-message\",items:\"esri-attachments__items\",item:\"esri-attachments__item\",itemButton:\"esri-attachments__item-button\",itemMask:\"esri-attachments__item-mask\",itemMaskIcon:\"esri-attachments__item-mask--icon\",itemImage:\"esri-attachments__image\",itemImageResizable:\"esri-attachments__image--resizable\",itemLabel:\"esri-attachments__label\",itemFilename:\"esri-attachments__filename\",itemChevronIcon:\"esri-attachments__item-chevron-icon\",itemLink:\"esri-attachments__item-link\",itemLinkOverlay:\"esri-attachments__item-link-overlay\",itemLinkOverlayIcon:\"esri-attachments__item-link-overlay-icon\",itemEditIcon:\"esri-attachments__item-edit-icon\",itemAddIcon:\"esri-attachments__item-add-icon\",itemAddButton:\"esri-attachments__item-add-button\",formNode:\"esri-attachments__form-node\",fileFieldset:\"esri-attachments__file-fieldset\",fileLabel:\"esri-attachments__file-label\",fileName:\"esri-attachments__file-name\",fileInput:\"esri-attachments__file-input\",metadata:\"esri-attachments__metadata\",metadataFieldset:\"esri-attachments__metadata-fieldset\",progressBar:\"esri-attachments__progress-bar\",esriWidget:\"esri-widget\",esriButton:\"esri-button\",buttonDisabled:\"esri-button--disabled\",esriButtonSecondary:\"esri-button--secondary\",esriButtonTertiary:\"esri-button--tertiary\",esriButtonThird:\"esri-button--third\",esriButtonSmall:\"esri-button--small\",esriButtonHalf:\"esri-button--half\",empty:\"esri-widget__content--empty\",iconExternalLink:\"esri-icon-link-external\",iconEdit:\"esri-icon-edit\",iconRight:\"esri-icon-right\",iconLeft:\"esri-icon-left\",iconPlus:\"esri-icon-plus\"},y=window.CSS;let B=class extends m{constructor(t,e){super(t,e),this.abilities=null,this.displayType=\"auto\",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new d,this.visibleElements={...f},this._supportsImageOrientation=y&&y.supports&&y.supports(\"image-orientation\",\"from-image\"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own(i(this,\"viewModel.attachmentInfos\",\"change\",(()=>this.scheduleRender())),a(this,\"viewModel.mode\",(()=>this._modeChanged())))}get effectiveDisplayType(){const{displayType:t}=this;return t&&\"auto\"!==t?t:this.viewModel.supportsResizeAttachments?\"preview\":\"list\"}castVisibleElements(t){return{...f,...t}}addAttachment(){const{_addAttachmentForm:t,viewModel:s}=this;return this._set(\"submitting\",!0),this._set(\"error\",null),s.addAttachment(t).then((t=>(this._set(\"submitting\",!1),this._set(\"error\",null),s.mode=\"view\",t))).catch((t=>{throw this._set(\"submitting\",!1),this._set(\"error\",new e(\"attachments:add-attachment\",this.messages.addErrorMessage,t)),t}))}deleteAttachment(t){const{viewModel:s}=this;return this._set(\"submitting\",!0),this._set(\"error\",null),s.deleteAttachment(t).then((t=>(this._set(\"submitting\",!1),this._set(\"error\",null),s.mode=\"view\",t))).catch((t=>{throw this._set(\"submitting\",!1),this._set(\"error\",new e(\"attachments:delete-attachment\",this.messages.deleteErrorMessage,t)),t}))}updateAttachment(){const{viewModel:t}=this,{_updateAttachmentForm:s}=this;return this._set(\"submitting\",!0),this._set(\"error\",null),t.updateAttachment(s).then((e=>(this._set(\"submitting\",!1),this._set(\"error\",null),t.mode=\"view\",e))).catch((t=>{throw this._set(\"submitting\",!1),this._set(\"error\",new e(\"attachments:update-attachment\",this.messages.updateErrorMessage,t)),t}))}render(){const{submitting:t,viewModel:e}=this,{state:s}=e;return _(\"div\",{class:this.classes(v.base,v.esriWidget)},t?this.renderProgressBar():null,\"loading\"===s?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:t,visibleElements:e}=this;return t&&e.errorMessage?_(\"div\",{key:\"error-message\",class:v.errorMessage},t.message):null}renderAttachments(){const{mode:t,activeAttachmentInfo:e}=this.viewModel;return\"add\"===t?this.renderAddForm():\"edit\"===t?this.renderDetailsForm(e):this.renderAttachmentContainer()}renderLoading(){return _(\"div\",{class:v.loaderContainer,key:\"loader\"},_(\"div\",{class:v.loader}))}renderProgressBar(){return this.visibleElements.progressBar?_(\"div\",{class:v.progressBar,key:\"progress-bar\"}):null}renderAddForm(){const{submitting:t,selectedFile:e}=this,s=t||!e,i=this.visibleElements.cancelAddButton?_(\"button\",{type:\"button\",bind:this,disabled:t,onclick:this._cancelForm,class:this.classes(v.esriButton,v.esriButtonTertiary,v.esriButtonSmall,v.esriButtonHalf,t&&v.buttonDisabled)},this.messages.cancel):null,a=this.visibleElements.addSubmitButton?_(\"button\",{type:\"submit\",disabled:s,class:this.classes(v.esriButton,v.esriButtonSecondary,v.esriButtonSmall,v.esriButtonHalf,{[v.buttonDisabled]:s})},this.messages.add):null,n=e?_(\"span\",{key:\"file-name\",class:v.fileName},e.name):null,r=_(\"form\",{bind:this,afterCreate:u,afterRemoved:p,\"data-node-ref\":\"_addAttachmentForm\",onsubmit:this._submitAddAttachment},_(\"fieldset\",{class:v.fileFieldset},n,_(\"label\",{class:this.classes(v.fileLabel,v.esriButton,v.esriButtonSecondary)},e?this.messages.changeFile:this.messages.selectFile,_(\"input\",{class:v.fileInput,type:\"file\",name:\"attachment\",bind:this,onchange:this._handleFileInputChange}))),a,i);return _(\"div\",{key:\"add-form-container\",class:v.formNode},r)}renderDetailsForm(t){const{visibleElements:e,viewModel:i,selectedFile:a,submitting:n}=this,{contentType:r,size:o,url:l}=t,{abilities:m}=i,d=n||!a,c=m.editing&&m.operations.delete&&e.deleteButton?_(\"button\",{key:\"delete-button\",type:\"button\",disabled:n,bind:this,onclick:e=>this._submitDeleteAttachment(e,t),class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonTertiary,v.deleteButton,{[v.buttonDisabled]:n})},this.messages.delete):null,h=m.editing&&m.operations.update&&e.updateButton?_(\"button\",{disabled:d,key:\"update-button\",type:\"submit\",class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonThird,{[v.buttonDisabled]:d})},this.messages.update):null,b=this.visibleElements.cancelUpdateButton?_(\"button\",{disabled:n,key:\"cancel-button\",type:\"button\",bind:this,onclick:this._cancelForm,class:this.classes(v.esriButton,v.esriButtonSmall,v.esriButtonTertiary,v.esriButtonThird,{[v.buttonDisabled]:n})},this.messages.cancel):null,g=a?_(\"span\",{key:\"file-name\",class:v.fileName},a.name):null,f=m.editing&&m.operations.update?_(\"fieldset\",{key:\"file\",class:v.fileFieldset},g,_(\"label\",{class:this.classes(v.fileLabel,v.esriButton,v.esriButtonSecondary)},this.messages.changeFile,_(\"input\",{class:v.fileInput,type:\"file\",name:\"attachment\",bind:this,onchange:this._handleFileInputChange}))):null,y=_(\"fieldset\",{key:\"size\",class:v.metadataFieldset},_(\"label\",null,s(this.messagesUnits,o))),B=_(\"fieldset\",{key:\"content-type\",class:v.metadataFieldset},_(\"label\",null,r)),A=_(\"form\",{bind:this,afterCreate:u,afterRemoved:p,\"data-node-ref\":\"_updateAttachmentForm\",onsubmit:this._submitUpdateAttachment},_(\"div\",{class:v.metadata},y,B),f,_(\"div\",{class:v.actions},c,b,h));return _(\"div\",{key:\"edit-form-container\",class:v.formNode},_(\"a\",{class:v.itemLink,href:l,rel:\"noreferrer\",target:\"_blank\"},this.renderImageMask({attachmentInfo:t,size:400}),_(\"div\",{class:v.itemLinkOverlay},_(\"span\",{class:v.itemLinkOverlayIcon},_(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"32\",height:\"32\",viewBox:\"0 0 32 32\"},_(\"path\",{d:\"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z\"}),_(\"path\",{fill:\"none\",d:\"M0 0h32v32H0z\"}))))),A)}renderImageMask({attachmentInfo:t,size:e}){const{supportsResizeAttachments:s}=this.viewModel,{contentType:i,name:a,url:n}=t,r=s&&c(i),o=this._getCSSTransform(t,r),l=o?{transform:o,\"image-orientation\":\"none\"}:{},m=-1===n.indexOf(\"?\")?\"?\":\"&\",d=r?`${n}${m}w=${e}`:h(i),u={[v.itemMaskIcon]:!r},p={[v.itemImageResizable]:s};return _(\"div\",{class:this.classes(u,v.itemMask)},_(\"img\",{styles:l,alt:a,src:d,class:this.classes(p,v.itemImage)}))}renderAttachmentInfo({attachmentInfo:t,displayType:e}){const{viewModel:s}=this,{abilities:i}=s,{name:a,url:n}=t,r=this.renderImageMask({attachmentInfo:t,size:\"list\"===e?48:400}),o=i.editing?_(\"span\",{\"aria-hidden\":\"true\",class:this.classes(v.itemChevronIcon,b(this.container)?v.iconLeft:v.iconRight)}):null,l=[r,_(\"label\",{class:v.itemLabel},_(\"span\",{class:v.itemFilename},a||this.messages.noTitle),o)],m=i.editing?_(\"button\",{key:\"details-button\",bind:this,class:v.itemButton,title:this.messages.attachmentDetails,\"aria-label\":this.messages.attachmentDetails,\"data-attachment-info-id\":t.id,onclick:()=>this._startEditAttachment(t),type:\"button\"},l):_(\"a\",{key:\"details-link\",class:v.itemButton,href:n,target:\"_blank\"},l);return _(\"li\",{class:v.item,key:t},m)}renderAttachmentContainer(){const{effectiveDisplayType:t,viewModel:e,visibleElements:s}=this,{attachmentInfos:i,abilities:a}=e,n=i&&i.length,r={[v.containerList]:\"preview\"!==t,[v.containerPreview]:\"preview\"===t},o=a.editing&&a.operations.add&&s.addButton?_(\"button\",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(v.esriButton,v.esriButtonTertiary,v.addAttachmentButton),type:\"button\"},_(\"span\",{\"aria-hidden\":\"true\",class:this.classes(v.itemAddIcon,v.iconPlus)}),this.messages.add):null,l=n?_(\"ul\",{class:v.items},i.toArray().map((e=>this.renderAttachmentInfo({attachmentInfo:e,displayType:t})))):_(\"div\",{class:v.empty},this.messages.noAttachments);return _(\"div\",{key:\"attachments-container\",class:this.classes(v.container,r)},l,o)}_modeChanged(){this._set(\"error\",null),this._set(\"selectedFile\",null)}_handleFileInputChange(t){const e=t.target,s=e&&e.files&&e.files.item(0);this._set(\"selectedFile\",s)}_submitDeleteAttachment(t,e){t.preventDefault(),this.deleteAttachment(e)}_submitAddAttachment(t){t.preventDefault(),this.addAttachment()}_submitUpdateAttachment(t){t.preventDefault(),this.updateAttachment()}_startEditAttachment(t){const{viewModel:e}=this;e.activeAttachmentInfo=t,e.mode=\"edit\"}_startAddAttachment(){this.viewModel.mode=\"add\"}_cancelForm(t){t.preventDefault(),this.viewModel.mode=\"view\"}_getCSSTransform(t,e){const{orientationInfo:s}=t;return!this._supportsImageOrientation&&e&&s?[s.rotation?`rotate(${s.rotation}deg)`:\"\",s.mirrored?\"scaleX(-1)\":\"\"].join(\" \"):\"\"}};t([n(\"viewModel.abilities\")],B.prototype,\"abilities\",void 0),t([o()],B.prototype,\"displayType\",void 0),t([o({readOnly:!0})],B.prototype,\"effectiveDisplayType\",null),t([n(\"viewModel.graphic\")],B.prototype,\"graphic\",void 0),t([o({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],B.prototype,\"label\",void 0),t([o(),g(\"esri/widgets/Attachments/t9n/Attachments\")],B.prototype,\"messages\",void 0),t([o(),g(\"esri/core/t9n/Units\")],B.prototype,\"messagesUnits\",void 0),t([o({readOnly:!0})],B.prototype,\"selectedFile\",void 0),t([o({readOnly:!0})],B.prototype,\"submitting\",void 0),t([o({readOnly:!0})],B.prototype,\"error\",void 0),t([o({type:d})],B.prototype,\"viewModel\",void 0),t([o()],B.prototype,\"visibleElements\",void 0),t([r(\"visibleElements\")],B.prototype,\"castVisibleElements\",null),B=t([l(\"esri.widgets.Attachments\")],B);const A=B;export{A as default};\n"]},"metadata":{},"sourceType":"module"}