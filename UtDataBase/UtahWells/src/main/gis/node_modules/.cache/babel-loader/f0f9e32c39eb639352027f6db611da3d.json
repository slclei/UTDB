{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSome as t } from \"../../../core/maybe.js\";\nimport { c as e } from \"../../../chunks/mat3f64.js\";\nimport { t as n, n as r } from \"../../../chunks/vec3.js\";\nimport { c as o } from \"../../../chunks/vec3f64.js\";\nimport s from \"../MeshComponent.js\";\nimport { MeshVertexAttributes as a } from \"../MeshVertexAttributes.js\";\nimport { georeferenceByTransform as i } from \"./georeference.js\";\n\nfunction c() {\n  const {\n    faceDescriptions: t,\n    faceVertexOffsets: e,\n    uvScales: n\n  } = d,\n        r = 4 * t.length,\n        o = new Float64Array(3 * r),\n        s = new Float32Array(3 * r),\n        a = new Float32Array(2 * r),\n        i = new Uint32Array(2 * t.length * 3);\n  let c = 0,\n      l = 0,\n      f = 0,\n      u = 0;\n\n  for (let h = 0; h < t.length; h++) {\n    const r = t[h],\n          p = c / 3;\n\n    for (const t of e) i[u++] = p + t;\n\n    const m = r.corners;\n\n    for (let t = 0; t < 4; t++) {\n      const e = m[t];\n      let i = 0;\n      a[f++] = .25 * n[t][0] + r.uvOrigin[0], a[f++] = r.uvOrigin[1] - .25 * n[t][1];\n\n      for (let t = 0; t < 3; t++) 0 !== r.axis[t] ? (o[c++] = .5 * r.axis[t], s[l++] = r.axis[t]) : (o[c++] = .5 * e[i++], s[l++] = 0);\n    }\n  }\n\n  return {\n    position: o,\n    normal: s,\n    uv: a,\n    faces: i\n  };\n}\n\nfunction l(e, n) {\n  const r = e.components[0],\n        o = r.faces,\n        a = M[n],\n        i = 6 * a,\n        c = new Uint32Array(6),\n        l = new Uint32Array(o.length - 6);\n  let f = 0,\n      u = 0;\n\n  for (let t = 0; t < o.length; t++) t >= i && t < i + 6 ? c[f++] = o[t] : l[u++] = o[t];\n\n  if (t(e.vertexAttributes.uv)) {\n    const t = new Float32Array(e.vertexAttributes.uv),\n          n = 4 * a * 2,\n          r = [0, 1, 1, 1, 1, 0, 0, 0];\n\n    for (let e = 0; e < r.length; e++) t[n + e] = r[e];\n\n    e.vertexAttributes.uv = t;\n  }\n\n  return e.components = [new s({\n    faces: c,\n    material: r.material\n  }), new s({\n    faces: l\n  })], e;\n}\n\nfunction f() {\n  let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  const e = Math.round(8 * 2 ** t),\n        n = 2 * e,\n        r = (e - 1) * (n + 1) + 2 * n,\n        o = new Float64Array(3 * r),\n        s = new Float32Array(3 * r),\n        a = new Float32Array(2 * r),\n        i = new Uint32Array(3 * ((e - 1) * n * 2));\n  let c = 0,\n      l = 0,\n      f = 0,\n      u = 0;\n\n  for (let h = 0; h <= e; h++) {\n    const t = h / e * Math.PI + .5 * Math.PI,\n          r = Math.cos(t),\n          p = Math.sin(t);\n    F[2] = p;\n    const m = 0 === h || h === e,\n          w = m ? n - 1 : n;\n\n    for (let v = 0; v <= w; v++) {\n      const t = v / w * 2 * Math.PI;\n      F[0] = -Math.sin(t) * r, F[1] = Math.cos(t) * r;\n\n      for (let e = 0; e < 3; e++) o[c] = .5 * F[e], s[c] = F[e], ++c;\n\n      a[l++] = (v + (m ? .5 : 0)) / n, a[l++] = h / e, 0 !== h && v !== n && (h !== e && (i[f++] = u, i[f++] = u + 1, i[f++] = u - n), 1 !== h && (i[f++] = u, i[f++] = u - n, i[f++] = u - n - 1)), u++;\n    }\n  }\n\n  return {\n    position: o,\n    normal: s,\n    uv: a,\n    faces: i\n  };\n}\n\nfunction u() {\n  let t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  const e = 5,\n        n = Math.round(16 * 2 ** t),\n        r = (e - 1) * (n + 1) + 2 * n,\n        o = new Float64Array(3 * r),\n        s = new Float32Array(3 * r),\n        a = new Float32Array(2 * r),\n        i = new Uint32Array(3 * (4 * n));\n  let c = 0,\n      l = 0,\n      f = 0,\n      u = 0,\n      h = 0;\n\n  for (let p = 0; p <= e; p++) {\n    const t = 0 === p || p === e,\n          r = p <= 1 || p >= e - 1,\n          m = 2 === p || 4 === p,\n          w = t ? n - 1 : n;\n\n    for (let v = 0; v <= w; v++) {\n      const g = v / w * 2 * Math.PI,\n            A = t ? 0 : .5;\n      F[0] = A * Math.sin(g), F[1] = A * -Math.cos(g), F[2] = p <= 2 ? .5 : -.5;\n\n      for (let t = 0; t < 3; t++) o[c++] = F[t], s[l++] = r ? 2 === t ? p <= 1 ? 1 : -1 : 0 : 2 === t ? 0 : F[t] / A;\n\n      a[f++] = (v + (t ? .5 : 0)) / n, a[f++] = p <= 1 ? 1 * p / 3 : p <= 3 ? 1 * (p - 2) / 3 + 1 / 3 : 1 * (p - 4) / 3 + 2 / 3, m || 0 === p || v === n || (p !== e && (i[u++] = h, i[u++] = h + 1, i[u++] = h - n), 1 !== p && (i[u++] = h, i[u++] = h - n, i[u++] = h - n - 1)), h++;\n    }\n  }\n\n  return {\n    position: o,\n    normal: s,\n    uv: a,\n    faces: i\n  };\n}\n\nfunction h(t, e) {\n  const n = \"number\" == typeof e ? e : null != e ? e.width : 1,\n        r = \"number\" == typeof e ? e : null != e ? e.height : 1;\n\n  switch (t) {\n    case \"up\":\n    case \"down\":\n      return {\n        width: n,\n        depth: r\n      };\n\n    case \"north\":\n    case \"south\":\n      return {\n        width: n,\n        height: r\n      };\n\n    case \"east\":\n    case \"west\":\n      return {\n        depth: n,\n        height: r\n      };\n  }\n}\n\nfunction p(t) {\n  const e = g.facingAxisOrderSwap[t],\n        n = g.position,\n        r = g.normal,\n        o = new Float64Array(n.length),\n        s = new Float32Array(r.length);\n  let a = 0;\n\n  for (let i = 0; i < 4; i++) {\n    const t = a;\n\n    for (let i = 0; i < 3; i++) {\n      const c = e[i],\n            l = Math.abs(c) - 1,\n            f = c >= 0 ? 1 : -1;\n      o[a] = n[t + l] * f, s[a] = r[t + l] * f, a++;\n    }\n  }\n\n  return {\n    position: o,\n    normal: s,\n    uv: new Float32Array(g.uv),\n    faces: new Uint32Array(g.faces)\n  };\n}\n\nconst m = 1,\n      w = 2,\n      v = 3,\n      g = {\n  position: [-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0],\n  normal: [0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1],\n  uv: [0, 1, 1, 1, 1, 0, 0, 0],\n  faces: [0, 1, 2, 0, 2, 3],\n  facingAxisOrderSwap: {\n    east: [v, m, w],\n    west: [-v, -m, w],\n    north: [-m, v, w],\n    south: [m, -v, w],\n    up: [m, w, v],\n    down: [m, -w, -v]\n  }\n};\n\nfunction A(t, e, n) {\n  y(t), x(t, n && n.size);\n  const {\n    vertexAttributes: r,\n    transform: o\n  } = i(t, e, n);\n  return {\n    vertexAttributes: new a({ ...r,\n      uv: t.uv\n    }),\n    transform: o,\n    components: [new s({\n      faces: t.faces,\n      material: n && n.material || null\n    })],\n    spatialReference: e.spatialReference\n  };\n}\n\nfunction y(t) {\n  for (let e = 0; e < t.position.length; e += 3) t.position[e + 2] += .5;\n}\n\nfunction x(t, e) {\n  if (null == e) return;\n  const o = \"number\" == typeof e ? [e, e, e] : [null != e.width ? e.width : 1, null != e.depth ? e.depth : 1, null != e.height ? e.height : 1];\n  O[0] = o[0], O[4] = o[1], O[8] = o[2];\n\n  for (let r = 0; r < t.position.length; r += 3) {\n    for (let e = 0; e < 3; e++) F[e] = t.position[r + e];\n\n    n(F, F, O);\n\n    for (let e = 0; e < 3; e++) t.position[r + e] = F[e];\n  }\n\n  if (o[0] !== o[1] || o[1] !== o[2]) {\n    O[0] = 1 / o[0], O[4] = 1 / o[1], O[8] = 1 / o[2];\n\n    for (let e = 0; e < t.normal.length; e += 3) {\n      for (let n = 0; n < 3; n++) F[n] = t.normal[e + n];\n\n      n(F, F, O), r(F, F);\n\n      for (let n = 0; n < 3; n++) t.normal[e + n] = F[n];\n    }\n  }\n}\n\nconst d = {\n  faceDescriptions: [{\n    axis: [0, -1, 0],\n    uvOrigin: [0, .625],\n    corners: [[-1, -1], [1, -1], [1, 1], [-1, 1]]\n  }, {\n    axis: [1, 0, 0],\n    uvOrigin: [.25, .625],\n    corners: [[-1, -1], [1, -1], [1, 1], [-1, 1]]\n  }, {\n    axis: [0, 1, 0],\n    uvOrigin: [.5, .625],\n    corners: [[1, -1], [-1, -1], [-1, 1], [1, 1]]\n  }, {\n    axis: [-1, 0, 0],\n    uvOrigin: [.75, .625],\n    corners: [[1, -1], [-1, -1], [-1, 1], [1, 1]]\n  }, {\n    axis: [0, 0, 1],\n    uvOrigin: [0, .375],\n    corners: [[-1, -1], [1, -1], [1, 1], [-1, 1]]\n  }, {\n    axis: [0, 0, -1],\n    uvOrigin: [0, .875],\n    corners: [[-1, 1], [1, 1], [1, -1], [-1, -1]]\n  }],\n  uvScales: [[0, 0], [1, 0], [1, 1], [0, 1]],\n  faceVertexOffsets: [0, 1, 2, 0, 2, 3]\n},\n      M = {\n  south: 0,\n  east: 1,\n  north: 2,\n  west: 3,\n  up: 4,\n  down: 5\n},\n      F = o(),\n      O = e();\nexport { M as boxFaceOrder, h as convertPlaneSizeParameter, A as convertUnitGeometry, c as createUnitSizeBox, u as createUnitSizeCylinder, p as createUnitSizePlane, f as createUnitSizeSphere, l as extractSingleFaceOfBox };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/geometry/support/meshUtils/primitives.js"],"names":["isSome","t","c","e","n","r","o","s","MeshVertexAttributes","a","georeferenceByTransform","i","faceDescriptions","faceVertexOffsets","uvScales","d","length","Float64Array","Float32Array","Uint32Array","l","f","u","h","p","m","corners","uvOrigin","axis","position","normal","uv","faces","components","M","vertexAttributes","material","Math","round","PI","cos","sin","F","w","v","g","A","width","height","depth","facingAxisOrderSwap","abs","east","west","north","south","up","down","y","x","size","transform","spatialReference","O","boxFaceOrder","convertPlaneSizeParameter","convertUnitGeometry","createUnitSizeBox","createUnitSizeCylinder","createUnitSizePlane","createUnitSizeSphere","extractSingleFaceOfBox"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../core/maybe.js\";import{c as e}from\"../../../chunks/mat3f64.js\";import{t as n,n as r}from\"../../../chunks/vec3.js\";import{c as o}from\"../../../chunks/vec3f64.js\";import s from\"../MeshComponent.js\";import{MeshVertexAttributes as a}from\"../MeshVertexAttributes.js\";import{georeferenceByTransform as i}from\"./georeference.js\";function c(){const{faceDescriptions:t,faceVertexOffsets:e,uvScales:n}=d,r=4*t.length,o=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array(2*t.length*3);let c=0,l=0,f=0,u=0;for(let h=0;h<t.length;h++){const r=t[h],p=c/3;for(const t of e)i[u++]=p+t;const m=r.corners;for(let t=0;t<4;t++){const e=m[t];let i=0;a[f++]=.25*n[t][0]+r.uvOrigin[0],a[f++]=r.uvOrigin[1]-.25*n[t][1];for(let t=0;t<3;t++)0!==r.axis[t]?(o[c++]=.5*r.axis[t],s[l++]=r.axis[t]):(o[c++]=.5*e[i++],s[l++]=0)}}return{position:o,normal:s,uv:a,faces:i}}function l(e,n){const r=e.components[0],o=r.faces,a=M[n],i=6*a,c=new Uint32Array(6),l=new Uint32Array(o.length-6);let f=0,u=0;for(let t=0;t<o.length;t++)t>=i&&t<i+6?c[f++]=o[t]:l[u++]=o[t];if(t(e.vertexAttributes.uv)){const t=new Float32Array(e.vertexAttributes.uv),n=4*a*2,r=[0,1,1,1,1,0,0,0];for(let e=0;e<r.length;e++)t[n+e]=r[e];e.vertexAttributes.uv=t}return e.components=[new s({faces:c,material:r.material}),new s({faces:l})],e}function f(t=0){const e=Math.round(8*2**t),n=2*e,r=(e-1)*(n+1)+2*n,o=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array(3*((e-1)*n*2));let c=0,l=0,f=0,u=0;for(let h=0;h<=e;h++){const t=h/e*Math.PI+.5*Math.PI,r=Math.cos(t),p=Math.sin(t);F[2]=p;const m=0===h||h===e,w=m?n-1:n;for(let v=0;v<=w;v++){const t=v/w*2*Math.PI;F[0]=-Math.sin(t)*r,F[1]=Math.cos(t)*r;for(let e=0;e<3;e++)o[c]=.5*F[e],s[c]=F[e],++c;a[l++]=(v+(m?.5:0))/n,a[l++]=h/e,0!==h&&v!==n&&(h!==e&&(i[f++]=u,i[f++]=u+1,i[f++]=u-n),1!==h&&(i[f++]=u,i[f++]=u-n,i[f++]=u-n-1)),u++}}return{position:o,normal:s,uv:a,faces:i}}function u(t=0){const e=5,n=Math.round(16*2**t),r=(e-1)*(n+1)+2*n,o=new Float64Array(3*r),s=new Float32Array(3*r),a=new Float32Array(2*r),i=new Uint32Array(3*(4*n));let c=0,l=0,f=0,u=0,h=0;for(let p=0;p<=e;p++){const t=0===p||p===e,r=p<=1||p>=e-1,m=2===p||4===p,w=t?n-1:n;for(let v=0;v<=w;v++){const g=v/w*2*Math.PI,A=t?0:.5;F[0]=A*Math.sin(g),F[1]=A*-Math.cos(g),F[2]=p<=2?.5:-.5;for(let t=0;t<3;t++)o[c++]=F[t],s[l++]=r?2===t?p<=1?1:-1:0:2===t?0:F[t]/A;a[f++]=(v+(t?.5:0))/n,a[f++]=p<=1?1*p/3:p<=3?1*(p-2)/3+1/3:1*(p-4)/3+2/3,m||0===p||v===n||(p!==e&&(i[u++]=h,i[u++]=h+1,i[u++]=h-n),1!==p&&(i[u++]=h,i[u++]=h-n,i[u++]=h-n-1)),h++}}return{position:o,normal:s,uv:a,faces:i}}function h(t,e){const n=\"number\"==typeof e?e:null!=e?e.width:1,r=\"number\"==typeof e?e:null!=e?e.height:1;switch(t){case\"up\":case\"down\":return{width:n,depth:r};case\"north\":case\"south\":return{width:n,height:r};case\"east\":case\"west\":return{depth:n,height:r}}}function p(t){const e=g.facingAxisOrderSwap[t],n=g.position,r=g.normal,o=new Float64Array(n.length),s=new Float32Array(r.length);let a=0;for(let i=0;i<4;i++){const t=a;for(let i=0;i<3;i++){const c=e[i],l=Math.abs(c)-1,f=c>=0?1:-1;o[a]=n[t+l]*f,s[a]=r[t+l]*f,a++}}return{position:o,normal:s,uv:new Float32Array(g.uv),faces:new Uint32Array(g.faces)}}const m=1,w=2,v=3,g={position:[-.5,-.5,0,.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[v,m,w],west:[-v,-m,w],north:[-m,v,w],south:[m,-v,w],up:[m,w,v],down:[m,-w,-v]}};function A(t,e,n){y(t),x(t,n&&n.size);const{vertexAttributes:r,transform:o}=i(t,e,n);return{vertexAttributes:new a({...r,uv:t.uv}),transform:o,components:[new s({faces:t.faces,material:n&&n.material||null})],spatialReference:e.spatialReference}}function y(t){for(let e=0;e<t.position.length;e+=3)t.position[e+2]+=.5}function x(t,e){if(null==e)return;const o=\"number\"==typeof e?[e,e,e]:[null!=e.width?e.width:1,null!=e.depth?e.depth:1,null!=e.height?e.height:1];O[0]=o[0],O[4]=o[1],O[8]=o[2];for(let r=0;r<t.position.length;r+=3){for(let e=0;e<3;e++)F[e]=t.position[r+e];n(F,F,O);for(let e=0;e<3;e++)t.position[r+e]=F[e]}if(o[0]!==o[1]||o[1]!==o[2]){O[0]=1/o[0],O[4]=1/o[1],O[8]=1/o[2];for(let e=0;e<t.normal.length;e+=3){for(let n=0;n<3;n++)F[n]=t.normal[e+n];n(F,F,O),r(F,F);for(let n=0;n<3;n++)t.normal[e+n]=F[n]}}}const d={faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,1,2,0,2,3]},M={south:0,east:1,north:2,west:3,up:4,down:5},F=o(),O=e();export{M as boxFaceOrder,h as convertPlaneSizeParameter,A as convertUnitGeometry,c as createUnitSizeBox,u as createUnitSizeCylinder,p as createUnitSizePlane,f as createUnitSizeSphere,l as extractSingleFaceOfBox};\n"]},"metadata":{},"sourceType":"module"}