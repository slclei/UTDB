{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from \"../../config.js\";\nimport e from \"../../core/Error.js\";\nimport n from \"../../core/Logger.js\";\nimport { isNone as o, isSome as s } from \"../../core/maybe.js\";\nimport r from \"../Polygon.js\";\nimport i from \"../Polyline.js\";\nimport { getGeometryParts as l, cutParams as f, offsetMagnitude as c, updatePolyGeometry as p } from \"./normalizeUtilsCommon.js\";\nimport { getInfo as u } from \"./spatialReferenceUtils.js\";\nimport { geographicToWebMercator as a, webMercatorToGeographic as h } from \"./webMercatorUtils.js\";\nimport { cut as m } from \"../../rest/geometry/cut.js\";\nimport { simplify as g } from \"../../rest/geometry/simplify.js\";\nconst y = n.getLogger(\"esri.geometry.support.normalizeUtils\");\n\nfunction x(t) {\n  return \"polygon\" === t.type;\n}\n\nfunction d(t) {\n  return \"polygon\" === t[0].type;\n}\n\nfunction w(t) {\n  return \"polyline\" === t[0].type;\n}\n\nfunction j(t) {\n  const e = [];\n  let n = 0,\n      o = 0;\n\n  for (let s = 0; s < t.length; s++) {\n    const r = t[s];\n    let i = null;\n\n    for (let t = 0; t < r.length; t++) i = r[t], e.push(i), 0 === t ? (n = i[0], o = n) : (n = Math.min(n, i[0]), o = Math.max(o, i[0]));\n\n    i && e.push([(n + o) / 2, 0]);\n  }\n\n  return e;\n}\n\nfunction R(t, n) {\n  if (!(t instanceof i || t instanceof r)) {\n    const t = \"straightLineDensify: the input geometry is neither polyline nor polygon\";\n    throw y.error(t), new e(t);\n  }\n\n  const o = l(t),\n        s = [];\n\n  for (const e of o) {\n    const t = [];\n    s.push(t), t.push([e[0][0], e[0][1]]);\n\n    for (let o = 0; o < e.length - 1; o++) {\n      const s = e[o][0],\n            r = e[o][1],\n            i = e[o + 1][0],\n            l = e[o + 1][1],\n            f = Math.sqrt((i - s) * (i - s) + (l - r) * (l - r)),\n            c = (l - r) / f,\n            p = (i - s) / f,\n            u = f / n;\n\n      if (u > 1) {\n        for (let l = 1; l <= u - 1; l++) {\n          const e = l * n,\n                o = p * e + s,\n                i = c * e + r;\n          t.push([o, i]);\n        }\n\n        const e = (f + Math.floor(u - 1) * n) / 2,\n              o = p * e + s,\n              i = c * e + r;\n        t.push([o, i]);\n      }\n\n      t.push([i, l]);\n    }\n  }\n\n  return x(t) ? new r({\n    rings: s,\n    spatialReference: t.spatialReference\n  }) : new i({\n    paths: s,\n    spatialReference: t.spatialReference\n  });\n}\n\nfunction M(t, e, n) {\n  if (e) {\n    const e = R(t, 1e6);\n    t = h(e, !0);\n  }\n\n  return n && (t = p(t, n)), t;\n}\n\nfunction P(t, e, n) {\n  if (Array.isArray(t)) {\n    const o = t[0];\n\n    if (o > e) {\n      const n = c(o, e);\n      t[0] = o + n * (-2 * e);\n    } else if (o < n) {\n      const e = c(o, n);\n      t[0] = o + e * (-2 * n);\n    }\n  } else {\n    const o = t.x;\n\n    if (o > e) {\n      const n = c(o, e);\n      t = t.clone().offset(n * (-2 * e), 0);\n    } else if (o < n) {\n      const e = c(o, n);\n      t = t.clone().offset(e * (-2 * n), 0);\n    }\n  }\n\n  return t;\n}\n\nfunction b(t, e) {\n  let n = -1;\n\n  for (let o = 0; o < e.cutIndexes.length; o++) {\n    const s = e.cutIndexes[o],\n          r = e.geometries[o],\n          i = l(r);\n\n    for (let t = 0; t < i.length; t++) {\n      const e = i[t];\n      e.some(n => {\n        if (n[0] < 180) return !0;\n        {\n          let n = 0;\n\n          for (let t = 0; t < e.length; t++) {\n            const o = e[t][0];\n            n = o > n ? o : n;\n          }\n\n          n = Number(n.toFixed(9));\n          const o = -360 * c(n, 180);\n\n          for (let s = 0; s < e.length; s++) {\n            const e = r.getPoint(t, s);\n            r.setPoint(t, s, e.clone().offset(o, 0));\n          }\n\n          return !0;\n        }\n      });\n    }\n\n    if (s === n) {\n      if (d(t)) for (const e of l(r)) t[s] = t[s].addRing(e);else if (w(t)) for (const e of l(r)) t[s] = t[s].addPath(e);\n    } else n = s, t[s] = r;\n  }\n\n  return t;\n}\n\nasync function v(e, n, l) {\n  var h;\n  if (!Array.isArray(e)) return v([e], n);\n  const y = null != (h = null == n ? void 0 : n.url) ? h : t.geometryServiceUrl;\n  let x,\n      d,\n      w,\n      j,\n      R,\n      L,\n      U,\n      A,\n      z = 0;\n  const k = [],\n        I = [];\n\n  for (const t of e) if (o(t)) I.push(t);else if (x || (x = t.spatialReference, d = u(x), w = x.isWebMercator, L = w ? 102100 : 4326, j = f[L].maxX, R = f[L].minX, U = f[L].plus180Line, A = f[L].minus180Line), d) {\n    if (\"mesh\" === t.type) I.push(t);else if (\"point\" === t.type) I.push(P(t.clone(), j, R));else if (\"multipoint\" === t.type) {\n      const e = t.clone();\n      e.points = e.points.map(t => P(t, j, R)), I.push(e);\n    } else if (\"extent\" === t.type) {\n      const e = t.clone()._normalize(!1, !1, d);\n\n      I.push(e.rings ? new r(e) : e);\n    } else if (t.extent) {\n      const e = t.extent,\n            n = c(e.xmin, R) * (2 * j);\n      let o = 0 === n ? t.clone() : p(t.clone(), n);\n      e.offset(n, 0), e.intersects(U) && e.xmax !== j ? (z = e.xmax > z ? e.xmax : z, o = M(o, w), k.push(o), I.push(\"cut\")) : e.intersects(A) && e.xmin !== R ? (z = e.xmax * (2 * j) > z ? e.xmax * (2 * j) : z, o = M(o, w, 360), k.push(o), I.push(\"cut\")) : I.push(o);\n    } else I.push(t.clone());\n  } else I.push(t);\n\n  let X = c(z, j),\n      q = -90;\n  const C = X,\n        D = new i();\n\n  for (; X > 0;) {\n    const t = 360 * X - 180;\n    D.addPath([[t, q], [t, -1 * q]]), q *= -1, X--;\n  }\n\n  if (k.length > 0 && C > 0) {\n    const t = b(k, await m(y, k, D, l)),\n          n = [],\n          o = [];\n\n    for (let l = 0; l < I.length; l++) {\n      const r = I[l];\n      if (\"cut\" !== r) o.push(r);else {\n        const r = t.shift(),\n              i = e[l];\n        s(i) && \"polygon\" === i.type && i.rings && i.rings.length > 1 && r.rings.length >= i.rings.length ? (n.push(r), o.push(\"simplify\")) : o.push(w ? a(r) : r);\n      }\n    }\n\n    if (!n.length) return o;\n    const r = await g(y, n, l),\n          i = [];\n\n    for (let e = 0; e < o.length; e++) {\n      const t = o[e];\n      \"simplify\" !== t ? i.push(t) : i.push(w ? a(r.shift()) : r.shift());\n    }\n\n    return i;\n  }\n\n  const E = [];\n\n  for (let t = 0; t < I.length; t++) {\n    const e = I[t];\n    if (\"cut\" !== e) E.push(e);else {\n      const t = k.shift();\n      E.push(!0 === w ? a(t) : t);\n    }\n  }\n\n  return Promise.resolve(E);\n}\n\nfunction L(t) {\n  if (!t) return null;\n  const e = t.extent;\n  if (!e) return null;\n  const n = t.spatialReference && u(t.spatialReference);\n  if (!n) return e;\n  const [o, s] = n.valid,\n        r = 2 * s,\n        {\n    width: i\n  } = e;\n  let l,\n      {\n    xmin: f,\n    xmax: c\n  } = e;\n  if ([f, c] = [c, f], \"extent\" === t.type || 0 === i || i <= s || i > r || f < o || c > s) return e;\n\n  switch (t.type) {\n    case \"polygon\":\n      if (!(t.rings.length > 1)) return e;\n      l = j(t.rings);\n      break;\n\n    case \"polyline\":\n      if (!(t.paths.length > 1)) return e;\n      l = j(t.paths);\n      break;\n\n    case \"multipoint\":\n      l = t.points;\n  }\n\n  const p = e.clone();\n\n  for (let u = 0; u < l.length; u++) {\n    let t = l[u][0];\n    t < 0 ? (t += s, c = Math.max(t, c)) : (t -= s, f = Math.min(t, f));\n  }\n\n  return p.xmin = f, p.xmax = c, p.width < i ? (p.xmin -= s, p.xmax -= s, p) : e;\n}\n\nfunction U(t, e) {\n  const n = u(e);\n\n  if (n) {\n    const [e, o] = n.valid,\n          s = o - e;\n    if (t < e) for (; t < e;) t += s;\n    if (t > o) for (; t > o;) t -= s;\n  }\n\n  return t;\n}\n\nexport { L as getDenormalizedExtent, v as normalizeCentralMeridian, U as normalizeMapX, R as straightLineDensify };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/geometry/support/normalizeUtils.js"],"names":["t","e","n","isNone","o","isSome","s","r","i","getGeometryParts","l","cutParams","f","offsetMagnitude","c","updatePolyGeometry","p","getInfo","u","geographicToWebMercator","a","webMercatorToGeographic","h","cut","m","simplify","g","y","getLogger","x","type","d","w","j","length","push","Math","min","max","R","error","sqrt","floor","rings","spatialReference","paths","M","P","Array","isArray","clone","offset","b","cutIndexes","geometries","some","Number","toFixed","getPoint","setPoint","addRing","addPath","v","url","geometryServiceUrl","L","U","A","z","k","I","isWebMercator","maxX","minX","plus180Line","minus180Line","points","map","_normalize","extent","xmin","intersects","xmax","X","q","C","D","shift","E","Promise","resolve","valid","width","getDenormalizedExtent","normalizeCentralMeridian","normalizeMapX","straightLineDensify"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from\"../../config.js\";import e from\"../../core/Error.js\";import n from\"../../core/Logger.js\";import{isNone as o,isSome as s}from\"../../core/maybe.js\";import r from\"../Polygon.js\";import i from\"../Polyline.js\";import{getGeometryParts as l,cutParams as f,offsetMagnitude as c,updatePolyGeometry as p}from\"./normalizeUtilsCommon.js\";import{getInfo as u}from\"./spatialReferenceUtils.js\";import{geographicToWebMercator as a,webMercatorToGeographic as h}from\"./webMercatorUtils.js\";import{cut as m}from\"../../rest/geometry/cut.js\";import{simplify as g}from\"../../rest/geometry/simplify.js\";const y=n.getLogger(\"esri.geometry.support.normalizeUtils\");function x(t){return\"polygon\"===t.type}function d(t){return\"polygon\"===t[0].type}function w(t){return\"polyline\"===t[0].type}function j(t){const e=[];let n=0,o=0;for(let s=0;s<t.length;s++){const r=t[s];let i=null;for(let t=0;t<r.length;t++)i=r[t],e.push(i),0===t?(n=i[0],o=n):(n=Math.min(n,i[0]),o=Math.max(o,i[0]));i&&e.push([(n+o)/2,0])}return e}function R(t,n){if(!(t instanceof i||t instanceof r)){const t=\"straightLineDensify: the input geometry is neither polyline nor polygon\";throw y.error(t),new e(t)}const o=l(t),s=[];for(const e of o){const t=[];s.push(t),t.push([e[0][0],e[0][1]]);for(let o=0;o<e.length-1;o++){const s=e[o][0],r=e[o][1],i=e[o+1][0],l=e[o+1][1],f=Math.sqrt((i-s)*(i-s)+(l-r)*(l-r)),c=(l-r)/f,p=(i-s)/f,u=f/n;if(u>1){for(let l=1;l<=u-1;l++){const e=l*n,o=p*e+s,i=c*e+r;t.push([o,i])}const e=(f+Math.floor(u-1)*n)/2,o=p*e+s,i=c*e+r;t.push([o,i])}t.push([i,l])}}return x(t)?new r({rings:s,spatialReference:t.spatialReference}):new i({paths:s,spatialReference:t.spatialReference})}function M(t,e,n){if(e){const e=R(t,1e6);t=h(e,!0)}return n&&(t=p(t,n)),t}function P(t,e,n){if(Array.isArray(t)){const o=t[0];if(o>e){const n=c(o,e);t[0]=o+n*(-2*e)}else if(o<n){const e=c(o,n);t[0]=o+e*(-2*n)}}else{const o=t.x;if(o>e){const n=c(o,e);t=t.clone().offset(n*(-2*e),0)}else if(o<n){const e=c(o,n);t=t.clone().offset(e*(-2*n),0)}}return t}function b(t,e){let n=-1;for(let o=0;o<e.cutIndexes.length;o++){const s=e.cutIndexes[o],r=e.geometries[o],i=l(r);for(let t=0;t<i.length;t++){const e=i[t];e.some((n=>{if(n[0]<180)return!0;{let n=0;for(let t=0;t<e.length;t++){const o=e[t][0];n=o>n?o:n}n=Number(n.toFixed(9));const o=-360*c(n,180);for(let s=0;s<e.length;s++){const e=r.getPoint(t,s);r.setPoint(t,s,e.clone().offset(o,0))}return!0}}))}if(s===n){if(d(t))for(const e of l(r))t[s]=t[s].addRing(e);else if(w(t))for(const e of l(r))t[s]=t[s].addPath(e)}else n=s,t[s]=r}return t}async function v(e,n,l){var h;if(!Array.isArray(e))return v([e],n);const y=null!=(h=null==n?void 0:n.url)?h:t.geometryServiceUrl;let x,d,w,j,R,L,U,A,z=0;const k=[],I=[];for(const t of e)if(o(t))I.push(t);else if(x||(x=t.spatialReference,d=u(x),w=x.isWebMercator,L=w?102100:4326,j=f[L].maxX,R=f[L].minX,U=f[L].plus180Line,A=f[L].minus180Line),d)if(\"mesh\"===t.type)I.push(t);else if(\"point\"===t.type)I.push(P(t.clone(),j,R));else if(\"multipoint\"===t.type){const e=t.clone();e.points=e.points.map((t=>P(t,j,R))),I.push(e)}else if(\"extent\"===t.type){const e=t.clone()._normalize(!1,!1,d);I.push(e.rings?new r(e):e)}else if(t.extent){const e=t.extent,n=c(e.xmin,R)*(2*j);let o=0===n?t.clone():p(t.clone(),n);e.offset(n,0),e.intersects(U)&&e.xmax!==j?(z=e.xmax>z?e.xmax:z,o=M(o,w),k.push(o),I.push(\"cut\")):e.intersects(A)&&e.xmin!==R?(z=e.xmax*(2*j)>z?e.xmax*(2*j):z,o=M(o,w,360),k.push(o),I.push(\"cut\")):I.push(o)}else I.push(t.clone());else I.push(t);let X=c(z,j),q=-90;const C=X,D=new i;for(;X>0;){const t=360*X-180;D.addPath([[t,q],[t,-1*q]]),q*=-1,X--}if(k.length>0&&C>0){const t=b(k,await m(y,k,D,l)),n=[],o=[];for(let l=0;l<I.length;l++){const r=I[l];if(\"cut\"!==r)o.push(r);else{const r=t.shift(),i=e[l];s(i)&&\"polygon\"===i.type&&i.rings&&i.rings.length>1&&r.rings.length>=i.rings.length?(n.push(r),o.push(\"simplify\")):o.push(w?a(r):r)}}if(!n.length)return o;const r=await g(y,n,l),i=[];for(let e=0;e<o.length;e++){const t=o[e];\"simplify\"!==t?i.push(t):i.push(w?a(r.shift()):r.shift())}return i}const E=[];for(let t=0;t<I.length;t++){const e=I[t];if(\"cut\"!==e)E.push(e);else{const t=k.shift();E.push(!0===w?a(t):t)}}return Promise.resolve(E)}function L(t){if(!t)return null;const e=t.extent;if(!e)return null;const n=t.spatialReference&&u(t.spatialReference);if(!n)return e;const[o,s]=n.valid,r=2*s,{width:i}=e;let l,{xmin:f,xmax:c}=e;if([f,c]=[c,f],\"extent\"===t.type||0===i||i<=s||i>r||f<o||c>s)return e;switch(t.type){case\"polygon\":if(!(t.rings.length>1))return e;l=j(t.rings);break;case\"polyline\":if(!(t.paths.length>1))return e;l=j(t.paths);break;case\"multipoint\":l=t.points}const p=e.clone();for(let u=0;u<l.length;u++){let t=l[u][0];t<0?(t+=s,c=Math.max(t,c)):(t-=s,f=Math.min(t,f))}return p.xmin=f,p.xmax=c,p.width<i?(p.xmin-=s,p.xmax-=s,p):e}function U(t,e){const n=u(e);if(n){const[e,o]=n.valid,s=o-e;if(t<e)for(;t<e;)t+=s;if(t>o)for(;t>o;)t-=s}return t}export{L as getDenormalizedExtent,v as normalizeCentralMeridian,U as normalizeMapX,R as straightLineDensify};\n"]},"metadata":{},"sourceType":"module"}