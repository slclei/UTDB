{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { WGLDrawPhase as e, WGLGeometryType as t } from \"./enums.js\";\n\nfunction n(e, t, n) {\n  for (var _len = arguments.length, o = new Array(_len > 3 ? _len - 3 : 0), _key = 3; _key < _len; _key++) {\n    o[_key - 3] = arguments[_key];\n  }\n\n  t < e.length ? e.splice(t, n, ...o) : e.push(...o);\n}\n\nconst o = new Map();\no.set(e.MAP, [t.FILL, t.LINE, t.MARKER, t.TEXT]), o.set(e.LABEL, [t.LABEL]), o.set(e.LABEL_ALPHA, [t.LABEL]);\n\nclass i {\n  constructor() {\n    this.symbolLevels = [];\n  }\n\n  replay(e, t, n) {\n    for (const o of this.symbolLevels) for (const i of o.zLevels) {\n      const o = i.geometryDPInfo.unified;\n      if (o) for (const i of o) {\n        const o = e.painter.getGeometryBrush(i.geometryType),\n              r = t.getGeometry(i.geometryType),\n              s = {\n          geometryType: i.geometryType,\n          materialKey: i.materialKey,\n          indexFrom: i.indexFrom,\n          indexCount: i.indexCount,\n          target: r\n        };\n        o.prepareState(e, t), o.drawGeometry(e, t, s, n);\n      }\n    }\n  }\n\n  get empty() {\n    return !this.symbolLevels || 0 === this.symbolLevels.length;\n  }\n\n  clear() {\n    this.symbolLevels.length = 0;\n  }\n\n  addToList(e, t) {\n    if (Array.isArray(e)) for (const n of e) this._addToList(n, t);else this._addToList(e, t);\n  }\n\n  removeFromList(e) {\n    Array.isArray(e) || (e = [e]);\n    let t = null;\n\n    for (const n of e) t = this._removeFromList(n);\n\n    return t;\n  }\n\n  clone() {\n    const e = new i();\n\n    for (const t of this.symbolLevels) e.symbolLevels.push(t.clone());\n\n    return e;\n  }\n\n  splitAfter(e) {\n    const t = this._getDisplayList(e.symbolLevel, e.zOrder),\n          n = t.length,\n          o = e.indexFrom + e.indexCount;\n\n    for (let i = 0; i < n; ++i) {\n      const n = t[i];\n\n      if (n.geometryType === e.geometryType && o > n.indexFrom && o <= n.indexFrom + n.indexCount) {\n        if (o < n.indexFrom + n.indexCount) {\n          const e = new r();\n          e.geometryType = n.geometryType, e.materialKey = n.materialKey, e.indexFrom = o, e.indexCount = n.indexFrom + n.indexCount - o, t.splice(i + 1, 0, e), n.indexCount = o - n.indexFrom;\n        }\n\n        return i;\n      }\n    }\n  }\n\n  _addToList(e, t) {\n    const o = e.symbolLevel,\n          i = e.zOrder,\n          s = this._getDisplayList(o, i),\n          l = null != t ? t : s.length - 1,\n          m = l >= 0 && l < s.length ? s[l] : null;\n\n    if (null !== m && m.materialKey === e.materialKey && m.indexFrom + m.indexCount === e.indexFrom && m.geometryType === e.geometryType) m.indexCount += e.indexCount;else {\n      const t = new r();\n      t.indexFrom = e.indexFrom, t.indexCount = e.indexCount, t.materialKey = e.materialKey, t.geometryType = e.geometryType, n(s, l + 1, 0, t);\n    }\n  }\n\n  _removeFromList(e) {\n    const t = e.symbolLevel,\n          o = e.zOrder,\n          i = this._getDisplayList(t, o),\n          s = i.length;\n\n    let l;\n\n    for (let n = 0; n < s; ++n) {\n      const t = i[n];\n\n      if (e.indexFrom + e.indexCount > t.indexFrom && e.indexFrom < t.indexFrom + t.indexCount && t.geometryType === e.geometryType) {\n        l = n;\n        break;\n      }\n    }\n\n    if (void 0 !== l) {\n      const t = i[l];\n      if (e.indexFrom === t.indexFrom) return t.indexCount -= e.indexCount, t.indexFrom += e.indexCount, 0 === t.indexCount && n(i, l, 1), l - 1;\n      if (e.indexFrom + e.indexCount === t.indexFrom + t.indexCount) return t.indexCount -= e.indexCount, 0 === t.indexCount ? (n(i, l, 1), l - 1) : l;\n      {\n        const o = t.indexFrom,\n              s = e.indexFrom - t.indexFrom,\n              m = e.indexCount,\n              y = t.indexFrom + t.indexCount - (e.indexFrom + e.indexCount);\n        t.indexCount = s;\n        const d = new r();\n        return d.geometryType = t.geometryType, d.materialKey = t.materialKey, d.indexFrom = o + s + m, d.indexCount = y, n(i, l + 1, 0, d), l;\n      }\n    }\n\n    return null;\n  }\n\n  _getDisplayList(e, t) {\n    let n;\n    const o = this.symbolLevels.length;\n\n    for (let s = 0; s < o; s++) if (this.symbolLevels[s].symbolLevel === e) {\n      n = this.symbolLevels[s];\n      break;\n    }\n\n    let i;\n    n || (n = new m(), n.symbolLevel = e, this.symbolLevels.push(n));\n    const r = n.zLevels.length;\n\n    for (let s = 0; s < r; s++) if (n.zLevels[s].zLevel === t) {\n      i = n.zLevels[s];\n      break;\n    }\n\n    return i || (i = new l(), i.geometryDPInfo = new s(), i.zLevel = t, n.zLevels.push(i)), i.geometryDPInfo.unified || (i.geometryDPInfo.unified = []), i.geometryDPInfo.unified;\n  }\n\n  getDPInfoType() {\n    return \"unified\";\n  }\n\n}\n\nclass r {\n  constructor() {\n    this.materialKey = null, this.indexFrom = 0, this.indexCount = 0;\n  }\n\n  clone() {\n    const e = new r();\n    return e.geometryType = this.geometryType, e.materialKey = this.materialKey, e.indexFrom = this.indexFrom, e.indexCount = this.indexCount, e;\n  }\n\n}\n\nclass s {\n  constructor() {\n    this.fill = null, this.line = null, this.marker = null, this.text = null, this.label = null, this.unified = null;\n  }\n\n  clone() {\n    const e = new s();\n    return e.fill = this.fill && this.fill.map(e => e.clone()), e.line = this.line && this.line.map(e => e.clone()), e.marker = this.marker && this.marker.map(e => e.clone()), e.text = this.text && this.text.map(e => e.clone()), e.label = this.label && this.label.map(e => e.clone()), e.unified = this.unified && this.unified.map(e => e.clone()), e;\n  }\n\n}\n\nclass l {\n  constructor() {\n    this.geometryDPInfo = new s();\n  }\n\n  clone() {\n    const e = new l();\n    return e.zLevel = this.zLevel, e.geometryDPInfo = this.geometryDPInfo.clone(), e;\n  }\n\n}\n\nclass m {\n  constructor() {\n    this.zLevels = [];\n  }\n\n  clone() {\n    const e = new m();\n    e.symbolLevel = this.symbolLevel;\n\n    for (const t of this.zLevels) e.zLevels.push(t.clone());\n\n    return e;\n  }\n\n}\n\nexport { i as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/GraphicDisplayList.js"],"names":["WGLDrawPhase","e","WGLGeometryType","t","n","o","length","splice","push","Map","set","MAP","FILL","LINE","MARKER","TEXT","LABEL","LABEL_ALPHA","i","constructor","symbolLevels","replay","zLevels","geometryDPInfo","unified","painter","getGeometryBrush","geometryType","r","getGeometry","s","materialKey","indexFrom","indexCount","target","prepareState","drawGeometry","empty","clear","addToList","Array","isArray","_addToList","removeFromList","_removeFromList","clone","splitAfter","_getDisplayList","symbolLevel","zOrder","l","m","y","d","zLevel","getDPInfoType","fill","line","marker","text","label","map","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e,WGLGeometryType as t}from\"./enums.js\";function n(e,t,n,...o){t<e.length?e.splice(t,n,...o):e.push(...o)}const o=new Map;o.set(e.MAP,[t.FILL,t.LINE,t.MARKER,t.TEXT]),o.set(e.LABEL,[t.LABEL]),o.set(e.LABEL_ALPHA,[t.LABEL]);class i{constructor(){this.symbolLevels=[]}replay(e,t,n){for(const o of this.symbolLevels)for(const i of o.zLevels){const o=i.geometryDPInfo.unified;if(o)for(const i of o){const o=e.painter.getGeometryBrush(i.geometryType),r=t.getGeometry(i.geometryType),s={geometryType:i.geometryType,materialKey:i.materialKey,indexFrom:i.indexFrom,indexCount:i.indexCount,target:r};o.prepareState(e,t),o.drawGeometry(e,t,s,n)}}}get empty(){return!this.symbolLevels||0===this.symbolLevels.length}clear(){this.symbolLevels.length=0}addToList(e,t){if(Array.isArray(e))for(const n of e)this._addToList(n,t);else this._addToList(e,t)}removeFromList(e){Array.isArray(e)||(e=[e]);let t=null;for(const n of e)t=this._removeFromList(n);return t}clone(){const e=new i;for(const t of this.symbolLevels)e.symbolLevels.push(t.clone());return e}splitAfter(e){const t=this._getDisplayList(e.symbolLevel,e.zOrder),n=t.length,o=e.indexFrom+e.indexCount;for(let i=0;i<n;++i){const n=t[i];if(n.geometryType===e.geometryType&&o>n.indexFrom&&o<=n.indexFrom+n.indexCount){if(o<n.indexFrom+n.indexCount){const e=new r;e.geometryType=n.geometryType,e.materialKey=n.materialKey,e.indexFrom=o,e.indexCount=n.indexFrom+n.indexCount-o,t.splice(i+1,0,e),n.indexCount=o-n.indexFrom}return i}}}_addToList(e,t){const o=e.symbolLevel,i=e.zOrder,s=this._getDisplayList(o,i),l=null!=t?t:s.length-1,m=l>=0&&l<s.length?s[l]:null;if(null!==m&&m.materialKey===e.materialKey&&m.indexFrom+m.indexCount===e.indexFrom&&m.geometryType===e.geometryType)m.indexCount+=e.indexCount;else{const t=new r;t.indexFrom=e.indexFrom,t.indexCount=e.indexCount,t.materialKey=e.materialKey,t.geometryType=e.geometryType,n(s,l+1,0,t)}}_removeFromList(e){const t=e.symbolLevel,o=e.zOrder,i=this._getDisplayList(t,o),s=i.length;let l;for(let n=0;n<s;++n){const t=i[n];if(e.indexFrom+e.indexCount>t.indexFrom&&e.indexFrom<t.indexFrom+t.indexCount&&t.geometryType===e.geometryType){l=n;break}}if(void 0!==l){const t=i[l];if(e.indexFrom===t.indexFrom)return t.indexCount-=e.indexCount,t.indexFrom+=e.indexCount,0===t.indexCount&&n(i,l,1),l-1;if(e.indexFrom+e.indexCount===t.indexFrom+t.indexCount)return t.indexCount-=e.indexCount,0===t.indexCount?(n(i,l,1),l-1):l;{const o=t.indexFrom,s=e.indexFrom-t.indexFrom,m=e.indexCount,y=t.indexFrom+t.indexCount-(e.indexFrom+e.indexCount);t.indexCount=s;const d=new r;return d.geometryType=t.geometryType,d.materialKey=t.materialKey,d.indexFrom=o+s+m,d.indexCount=y,n(i,l+1,0,d),l}}return null}_getDisplayList(e,t){let n;const o=this.symbolLevels.length;for(let s=0;s<o;s++)if(this.symbolLevels[s].symbolLevel===e){n=this.symbolLevels[s];break}let i;n||(n=new m,n.symbolLevel=e,this.symbolLevels.push(n));const r=n.zLevels.length;for(let s=0;s<r;s++)if(n.zLevels[s].zLevel===t){i=n.zLevels[s];break}return i||(i=new l,i.geometryDPInfo=new s,i.zLevel=t,n.zLevels.push(i)),i.geometryDPInfo.unified||(i.geometryDPInfo.unified=[]),i.geometryDPInfo.unified}getDPInfoType(){return\"unified\"}}class r{constructor(){this.materialKey=null,this.indexFrom=0,this.indexCount=0}clone(){const e=new r;return e.geometryType=this.geometryType,e.materialKey=this.materialKey,e.indexFrom=this.indexFrom,e.indexCount=this.indexCount,e}}class s{constructor(){this.fill=null,this.line=null,this.marker=null,this.text=null,this.label=null,this.unified=null}clone(){const e=new s;return e.fill=this.fill&&this.fill.map((e=>e.clone())),e.line=this.line&&this.line.map((e=>e.clone())),e.marker=this.marker&&this.marker.map((e=>e.clone())),e.text=this.text&&this.text.map((e=>e.clone())),e.label=this.label&&this.label.map((e=>e.clone())),e.unified=this.unified&&this.unified.map((e=>e.clone())),e}}class l{constructor(){this.geometryDPInfo=new s}clone(){const e=new l;return e.zLevel=this.zLevel,e.geometryDPInfo=this.geometryDPInfo.clone(),e}}class m{constructor(){this.zLevels=[]}clone(){const e=new m;e.symbolLevel=this.symbolLevel;for(const t of this.zLevels)e.zLevels.push(t.clone());return e}}export{i as default};\n"]},"metadata":{},"sourceType":"module"}