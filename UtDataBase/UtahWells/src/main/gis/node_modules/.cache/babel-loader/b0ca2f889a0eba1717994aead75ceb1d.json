{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSome as e, isNone as t } from \"../../../../../../core/maybe.js\";\nimport { deltaDecodeGeometry as r, convertFromGeometry as i } from \"../../../../../../layers/graphics/featureConversionUtils.js\";\nimport { WGLGeometryType as s } from \"../../enums.js\";\nimport { i1616to32 as o } from \"../../number.js\";\nimport { FillMaterialKey as n } from \"../../materialKey/MaterialKey.js\";\nimport { triangulate as l, triangulateLibtess as m, clipMarshall as a } from \"./templateUtils.js\";\nimport h from \"./WGLLineTemplate.js\";\n\nconst y = 100,\n      c = 1,\n      p = p => class extends p {\n  constructor() {\n    super(...arguments), this.forceLibtess = !1, this._bitset = 0, this._lineTemplate = null, this.geometryType = s.FILL;\n  }\n\n  _maybeAddLineTemplate(e) {\n    this._lineTemplate = h.fromFillOutline(e);\n  }\n\n  _write(t, r, i, s) {\n    const o = \"esriGeometryPoint\" === r.geometryType,\n          l = n.load(this._materialKey);\n    t.recordStart(r.getDisplayId(), this._materialKey, this.geometryType, o), this._writeGeometry(t, r, l, s, o), l.outlinedFill && e(this._lineTemplate) && this._lineTemplate.writeGeometry(t, r, s, o), t.recordEnd();\n  }\n\n  _writeGeometry(e, r, i, s, o) {\n    const n = this._getGeometry(r, s, o);\n\n    if (t(n)) return;\n    const a = [];\n    if (!(n.maxLength > y) && !this.forceLibtess && l(a, n)) return void (a.length && this._writeVertices(e, r, n.coords, n.lengths, i, a));\n    const h = m(n);\n\n    this._writeVertices(e, r, h, [h.length / 2], i);\n  }\n\n  _writeVertex(e, t, r, i, s, n) {\n    const l = o(c * i, c * s);\n    e.vertexBounds(i, s, 0, 0), e.vertexWrite(l), e.vertexWrite(t), r.dotDensity ? e.vertexWriteF32(1 / Math.abs(n.readGeometryArea())) : (e.vertexWrite(this.fillColor), r.simple || (e.vertexWrite(this.tl), e.vertexWrite(this.br)), e.vertexWrite(this.aux2), e.vertexWrite(this.aux3), r.simple || e.vertexWrite(this._minMaxZoom));\n  }\n\n  _writeVertices(e, t, r, i, s, o) {\n    const n = t.getDisplayId(),\n          l = this._bitset << 24 | n,\n          m = i.reduce((e, t) => e + t),\n          a = s.dotDensity ? 4 : 10,\n          h = e.vertexCount();\n    e.vertexEnsureSize(a * m);\n    let y = 0;\n    if (o) for (const c of o) {\n      const i = r[2 * c],\n            o = r[2 * c + 1];\n      this._writeVertex(e, l, s, i, o, t), y++;\n    } else for (let c = 0; c < r.length; c += 2) {\n      const i = Math.round(r[c]),\n            o = Math.round(r[c + 1]);\n      this._writeVertex(e, l, s, i, o, t), y++;\n    }\n    e.indexEnsureSize(y);\n\n    for (let c = 0; c < y; c++) e.indexWrite(c + h);\n  }\n\n  _getGeometry(e, t, s) {\n    const o = t ? r(i(t), 2) : e.readGeometryForDisplay();\n    if (!o) return null;\n    return a(o, s ? 256 : 8);\n  }\n\n};\n\nexport { p as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate.js"],"names":["isSome","e","isNone","t","deltaDecodeGeometry","r","convertFromGeometry","i","WGLGeometryType","s","i1616to32","o","FillMaterialKey","n","triangulate","l","triangulateLibtess","m","clipMarshall","a","h","y","c","p","constructor","forceLibtess","_bitset","_lineTemplate","geometryType","FILL","_maybeAddLineTemplate","fromFillOutline","_write","load","_materialKey","recordStart","getDisplayId","_writeGeometry","outlinedFill","writeGeometry","recordEnd","_getGeometry","maxLength","length","_writeVertices","coords","lengths","_writeVertex","vertexBounds","vertexWrite","dotDensity","vertexWriteF32","Math","abs","readGeometryArea","fillColor","simple","tl","br","aux2","aux3","_minMaxZoom","reduce","vertexCount","vertexEnsureSize","round","indexEnsureSize","indexWrite","readGeometryForDisplay","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../../../core/maybe.js\";import{deltaDecodeGeometry as r,convertFromGeometry as i}from\"../../../../../../layers/graphics/featureConversionUtils.js\";import{WGLGeometryType as s}from\"../../enums.js\";import{i1616to32 as o}from\"../../number.js\";import{FillMaterialKey as n}from\"../../materialKey/MaterialKey.js\";import{triangulate as l,triangulateLibtess as m,clipMarshall as a}from\"./templateUtils.js\";import h from\"./WGLLineTemplate.js\";const y=100,c=1,p=p=>class extends p{constructor(...e){super(...e),this.forceLibtess=!1,this._bitset=0,this._lineTemplate=null,this.geometryType=s.FILL}_maybeAddLineTemplate(e){this._lineTemplate=h.fromFillOutline(e)}_write(t,r,i,s){const o=\"esriGeometryPoint\"===r.geometryType,l=n.load(this._materialKey);t.recordStart(r.getDisplayId(),this._materialKey,this.geometryType,o),this._writeGeometry(t,r,l,s,o),l.outlinedFill&&e(this._lineTemplate)&&this._lineTemplate.writeGeometry(t,r,s,o),t.recordEnd()}_writeGeometry(e,r,i,s,o){const n=this._getGeometry(r,s,o);if(t(n))return;const a=[];if(!(n.maxLength>y)&&!this.forceLibtess&&l(a,n))return void(a.length&&this._writeVertices(e,r,n.coords,n.lengths,i,a));const h=m(n);this._writeVertices(e,r,h,[h.length/2],i)}_writeVertex(e,t,r,i,s,n){const l=o(c*i,c*s);e.vertexBounds(i,s,0,0),e.vertexWrite(l),e.vertexWrite(t),r.dotDensity?e.vertexWriteF32(1/Math.abs(n.readGeometryArea())):(e.vertexWrite(this.fillColor),r.simple||(e.vertexWrite(this.tl),e.vertexWrite(this.br)),e.vertexWrite(this.aux2),e.vertexWrite(this.aux3),r.simple||e.vertexWrite(this._minMaxZoom))}_writeVertices(e,t,r,i,s,o){const n=t.getDisplayId(),l=this._bitset<<24|n,m=i.reduce(((e,t)=>e+t)),a=s.dotDensity?4:10,h=e.vertexCount();e.vertexEnsureSize(a*m);let y=0;if(o)for(const c of o){const i=r[2*c],o=r[2*c+1];this._writeVertex(e,l,s,i,o,t),y++}else for(let c=0;c<r.length;c+=2){const i=Math.round(r[c]),o=Math.round(r[c+1]);this._writeVertex(e,l,s,i,o,t),y++}e.indexEnsureSize(y);for(let c=0;c<y;c++)e.indexWrite(c+h)}_getGeometry(e,t,s){const o=t?r(i(t),2):e.readGeometryForDisplay();if(!o)return null;return a(o,s?256:8)}};export{p as default};\n"]},"metadata":{},"sourceType":"module"}