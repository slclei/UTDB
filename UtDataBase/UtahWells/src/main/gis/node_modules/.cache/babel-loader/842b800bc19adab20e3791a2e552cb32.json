{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from \"../../../../../core/Error.js\";\nimport { isAbortError as e } from \"../../../../../core/promiseUtils.js\";\nconst r = new Uint32Array(256);\n\nfor (let b = 0; b < 256; b++) {\n  let t = b;\n\n  for (let e = 0; e < 8; e++) t = 0 != (1 & t) ? 3988292384 ^ t >>> 1 : t >>> 1;\n\n  r[b] = t;\n}\n\nfunction a(t) {\n  let e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  let a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : t.length - e;\n  let i = -1;\n\n  for (let s = e, n = e + a; s < n; s++) i = i >>> 8 ^ r[255 & (i ^ t[s])];\n\n  return -1 ^ i;\n}\n\nconst i = new t(\"Not a PNG\"),\n      s = new t(\"Not an animated PNG\"),\n      n = new Uint8Array([137, 80, 78, 71, 13, 10, 26, 10]);\n\nfunction h(t) {\n  const e = t.constructor === Uint8Array ? t : new Uint8Array(t);\n  return !n.some((t, r) => t !== e[r]);\n}\n\nfunction u(t) {\n  let e, r;\n  return p(new Uint8Array(t), (t, a, i) => {\n    const s = new DataView(a.buffer);\n    \"IHDR\" === t && (e = s.getUint32(i + 8), r = s.getUint32(i + 12));\n  }), [e, r];\n}\n\nfunction l(t) {\n  const e = new Uint8Array(t);\n  if (!h(e)) return !1;\n  let r = !1;\n  return p(e, t => !(r = \"acTL\" === t)), r;\n}\n\nclass o {\n  constructor() {\n    this.width = 0, this.height = 0, this.numPlays = 0, this.playTime = 0, this.frames = [], this.paused = !1, this.playing = !1, this.playSpeed = 1, this.currentFrameNumber = 0, this._lastUsedFrame = -1;\n  }\n\n  static async create(r, a) {\n    const i = new o();\n\n    try {\n      await i._load(r, a);\n    } catch (s) {\n      if (!e(s)) return new t(\"invalid-resource\", `Could not load PNG: ${s.message}`);\n    }\n\n    return i;\n  }\n\n  play() {\n    this.playing || (this.paused = !1, this.playing = !0, this._play());\n  }\n\n  pause() {\n    this.paused = !0, this.playing = !1, clearTimeout(this.timerID);\n  }\n\n  togglePlay() {\n    this.paused || !this.playing ? this.play() : this.pause();\n  }\n\n  bindFrame(t, e, r) {\n    t.bindTexture(e, r);\n    const a = this.frameChanged();\n    if (!a) return !1;\n    const i = this.currentFrame,\n          s = i.frameData,\n          n = e.descriptor;\n    return (i.left || i.top || i.width !== n.width || i.height !== n.height) && e.setData(null), e.updateData(0, i.left, i.top, i.width, i.height, s), this.updateUsedFrame(), a;\n  }\n\n  frameChanged() {\n    return this._lastUsedFrame !== this.currentFrameNumber;\n  }\n\n  updateUsedFrame() {\n    this._lastUsedFrame = this.currentFrameNumber;\n  }\n\n  async _load(r, a) {\n    try {\n      const t = d(this, r);\n      if (t !== this) return t;\n      this._resizeCanvas = document.createElement(\"canvas\"), this._resizeCanvas.width = this.width, this._resizeCanvas.height = this.height, await Promise.all(this.frames.map(t => t.createImage(this._resizeCanvas)));\n    } catch (i) {\n      if (!e(i)) return new t(\"invalid-resource\", \"Could not parse PNG\");\n    }\n\n    this.play();\n  }\n\n  _play() {\n    let t, e;\n    if (0 === this.playSpeed) return void this.pause();\n    this.playSpeed < 0 ? (this.currentFrameNumber -= 1, this.currentFrameNumber < 0 && (this.currentFrameNumber = this.frames.length - 1), e = this.currentFrameNumber, e -= 1, e < 0 && (e = this.frames.length - 1), t = 1 * -this.frames[e].delay / this.playSpeed) : (this.currentFrameNumber += 1, this.currentFrameNumber %= this.frames.length, t = 1 * this.frames[this.currentFrameNumber].delay / this.playSpeed);\n    const r = this.frames[this.currentFrameNumber];\n    this.currentFrame = {\n      frameData: r.imageData,\n      top: r.top,\n      left: r.left,\n      width: r.width,\n      height: r.height\n    }, this.timerID = window.setTimeout(() => this._play(), t);\n  }\n\n}\n\nclass c {\n  constructor() {\n    this.left = 0, this.top = 0, this.width = 0, this.height = 0, this.delay = 0, this.disposeOp = 0, this.blendOp = 0, this.data = null, this.imageData = null;\n  }\n\n  async createImage(t) {\n    if (null === this.imageData) return new Promise((e, r) => {\n      const a = URL.createObjectURL(this.data),\n            i = document.createElement(\"img\");\n      i.onload = () => {\n        URL.revokeObjectURL(a), this.imageData = m(i, t), e();\n      }, i.onerror = () => {\n        URL.revokeObjectURL(a), this.imageData = null, r(new Error(\"Image creation error\"));\n      }, i.src = a;\n    });\n  }\n\n}\n\nfunction m(t, e) {\n  e.width = t.width, e.height = t.height;\n  const r = e.getContext(\"2d\");\n  r.drawImage(t, 0, 0, t.width, t.height);\n  const a = r.getImageData(0, 0, t.width, t.height),\n        i = new Uint8Array(a.data);\n  let s;\n\n  for (let n = 0; n < i.length; n += 4) s = i[n + 3] / 255, i[n] = i[n] * s, i[n + 1] = i[n + 1] * s, i[n + 2] = i[n + 2] * s;\n\n  return new ImageData(new Uint8ClampedArray(i.buffer), t.width, t.height);\n}\n\nfunction d(t, e) {\n  const r = new Uint8Array(e);\n  if (n.some((t, e) => t !== r[e])) return i;\n  let a = !1;\n  if (p(r, t => !(a = \"acTL\" === t)), !a) return s;\n  const h = [],\n        u = [];\n  let l = null,\n      o = null,\n      m = 0;\n  if (p(r, (e, r, a, i) => {\n    const s = new DataView(r.buffer);\n\n    switch (e) {\n      case \"IHDR\":\n        l = r.subarray(a + 8, a + 8 + i), t.width = s.getUint32(a + 8), t.height = s.getUint32(a + 12);\n        break;\n\n      case \"acTL\":\n        t.numPlays = s.getUint32(a + 8 + 4);\n        break;\n\n      case \"fcTL\":\n        {\n          o && (t.frames.push(o), m++), o = new c(), o.width = s.getUint32(a + 8 + 4), o.height = s.getUint32(a + 8 + 8), o.left = s.getUint32(a + 8 + 12), o.top = s.getUint32(a + 8 + 16);\n          const e = s.getUint16(a + 8 + 20);\n          let r = s.getUint16(a + 8 + 22);\n          0 === r && (r = 100), o.delay = 1e3 * e / r, o.delay <= 10 && (o.delay = 100), t.playTime += o.delay, o.disposeOp = s.getUint8(a + 8 + 24), o.blendOp = s.getUint8(a + 8 + 25), o.dataParts = [], 0 === m && 2 === o.disposeOp && (o.disposeOp = 1);\n          break;\n        }\n\n      case \"fdAT\":\n        o && o.dataParts.push(r.subarray(a + 8 + 4, a + 8 + i));\n        break;\n\n      case \"IDAT\":\n        o && o.dataParts.push(r.subarray(a + 8, a + 8 + i));\n        break;\n\n      case \"IEND\":\n        u.push(w(r, a, 12 + i));\n        break;\n\n      default:\n        h.push(w(r, a, 12 + i));\n    }\n  }), 0 === t.frames.length) return s;\n  t.frameCount = t.frames.length;\n  const d = new Blob(h),\n        g = new Blob(u);\n  return t.frames.forEach(t => {\n    let e = [];\n    e.push(n), l.set(U(t.width), 0), l.set(U(t.height), 4), e.push(y(\"IHDR\", l)), e.push(d), t.dataParts.forEach(t => e.push(y(\"IDAT\", t))), e.push(g), t.data = new Blob(e, {\n      type: \"image/png\"\n    }), delete t.dataParts, e = null;\n  }), t;\n}\n\nfunction p(t, e) {\n  const r = new DataView(t.buffer);\n  let a,\n      i,\n      s,\n      n = 8;\n\n  do {\n    i = r.getUint32(n), a = g(t, n + 4, 4), s = e(a, t, n, i), n += 12 + i;\n  } while (!1 !== s && \"IEND\" !== a && n < t.length);\n}\n\nfunction g(t, e, r) {\n  const a = Array.prototype.slice.call(t.subarray(e, e + r));\n  return String.fromCharCode.apply(String, a);\n}\n\nfunction f(t) {\n  const e = new Uint8Array(t.length);\n\n  for (let r = 0; r < t.length; r++) e[r] = t.charCodeAt(r);\n\n  return e;\n}\n\nfunction w(t, e, r) {\n  const a = new Uint8Array(r);\n  return a.set(t.subarray(e, e + r)), a;\n}\n\nfunction y(t, e) {\n  const r = t.length + e.length,\n        i = new Uint8Array(r + 8),\n        s = new DataView(i.buffer);\n  s.setUint32(0, e.length), i.set(f(t), 4), i.set(e, 8);\n  const n = a(i, 4, r);\n  return s.setUint32(r + 4, n), i;\n}\n\nfunction U(t) {\n  return new Uint8Array([t >>> 24 & 255, t >>> 16 & 255, t >>> 8 & 255, 255 & t]);\n}\n\nexport { o as default, u as getPNGSize, l as isAnimatedPNG, h as isPNG };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/animatedFormats/apng.js"],"names":["t","isAbortError","e","r","Uint32Array","b","a","length","i","s","n","Uint8Array","h","constructor","some","u","p","DataView","buffer","getUint32","l","o","width","height","numPlays","playTime","frames","paused","playing","playSpeed","currentFrameNumber","_lastUsedFrame","create","_load","message","play","_play","pause","clearTimeout","timerID","togglePlay","bindFrame","bindTexture","frameChanged","currentFrame","frameData","descriptor","left","top","setData","updateData","updateUsedFrame","d","_resizeCanvas","document","createElement","Promise","all","map","createImage","delay","imageData","window","setTimeout","c","disposeOp","blendOp","data","URL","createObjectURL","onload","revokeObjectURL","m","onerror","Error","src","getContext","drawImage","getImageData","ImageData","Uint8ClampedArray","subarray","push","getUint16","getUint8","dataParts","w","frameCount","Blob","g","forEach","set","U","y","type","Array","prototype","slice","call","String","fromCharCode","apply","f","charCodeAt","setUint32","default","getPNGSize","isAnimatedPNG","isPNG"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import{isAbortError as e}from\"../../../../../core/promiseUtils.js\";const r=new Uint32Array(256);for(let b=0;b<256;b++){let t=b;for(let e=0;e<8;e++)t=0!=(1&t)?3988292384^t>>>1:t>>>1;r[b]=t}function a(t,e=0,a=t.length-e){let i=-1;for(let s=e,n=e+a;s<n;s++)i=i>>>8^r[255&(i^t[s])];return-1^i}const i=new t(\"Not a PNG\"),s=new t(\"Not an animated PNG\"),n=new Uint8Array([137,80,78,71,13,10,26,10]);function h(t){const e=t.constructor===Uint8Array?t:new Uint8Array(t);return!n.some(((t,r)=>t!==e[r]))}function u(t){let e,r;return p(new Uint8Array(t),((t,a,i)=>{const s=new DataView(a.buffer);\"IHDR\"===t&&(e=s.getUint32(i+8),r=s.getUint32(i+12))})),[e,r]}function l(t){const e=new Uint8Array(t);if(!h(e))return!1;let r=!1;return p(e,(t=>!(r=\"acTL\"===t))),r}class o{constructor(){this.width=0,this.height=0,this.numPlays=0,this.playTime=0,this.frames=[],this.paused=!1,this.playing=!1,this.playSpeed=1,this.currentFrameNumber=0,this._lastUsedFrame=-1}static async create(r,a){const i=new o;try{await i._load(r,a)}catch(s){if(!e(s))return new t(\"invalid-resource\",`Could not load PNG: ${s.message}`)}return i}play(){this.playing||(this.paused=!1,this.playing=!0,this._play())}pause(){this.paused=!0,this.playing=!1,clearTimeout(this.timerID)}togglePlay(){this.paused||!this.playing?this.play():this.pause()}bindFrame(t,e,r){t.bindTexture(e,r);const a=this.frameChanged();if(!a)return!1;const i=this.currentFrame,s=i.frameData,n=e.descriptor;return(i.left||i.top||i.width!==n.width||i.height!==n.height)&&e.setData(null),e.updateData(0,i.left,i.top,i.width,i.height,s),this.updateUsedFrame(),a}frameChanged(){return this._lastUsedFrame!==this.currentFrameNumber}updateUsedFrame(){this._lastUsedFrame=this.currentFrameNumber}async _load(r,a){try{const t=d(this,r);if(t!==this)return t;this._resizeCanvas=document.createElement(\"canvas\"),this._resizeCanvas.width=this.width,this._resizeCanvas.height=this.height,await Promise.all(this.frames.map((t=>t.createImage(this._resizeCanvas))))}catch(i){if(!e(i))return new t(\"invalid-resource\",\"Could not parse PNG\")}this.play()}_play(){let t,e;if(0===this.playSpeed)return void this.pause();this.playSpeed<0?(this.currentFrameNumber-=1,this.currentFrameNumber<0&&(this.currentFrameNumber=this.frames.length-1),e=this.currentFrameNumber,e-=1,e<0&&(e=this.frames.length-1),t=1*-this.frames[e].delay/this.playSpeed):(this.currentFrameNumber+=1,this.currentFrameNumber%=this.frames.length,t=1*this.frames[this.currentFrameNumber].delay/this.playSpeed);const r=this.frames[this.currentFrameNumber];this.currentFrame={frameData:r.imageData,top:r.top,left:r.left,width:r.width,height:r.height},this.timerID=window.setTimeout((()=>this._play()),t)}}class c{constructor(){this.left=0,this.top=0,this.width=0,this.height=0,this.delay=0,this.disposeOp=0,this.blendOp=0,this.data=null,this.imageData=null}async createImage(t){if(null===this.imageData)return new Promise(((e,r)=>{const a=URL.createObjectURL(this.data),i=document.createElement(\"img\");i.onload=()=>{URL.revokeObjectURL(a),this.imageData=m(i,t),e()},i.onerror=()=>{URL.revokeObjectURL(a),this.imageData=null,r(new Error(\"Image creation error\"))},i.src=a}))}}function m(t,e){e.width=t.width,e.height=t.height;const r=e.getContext(\"2d\");r.drawImage(t,0,0,t.width,t.height);const a=r.getImageData(0,0,t.width,t.height),i=new Uint8Array(a.data);let s;for(let n=0;n<i.length;n+=4)s=i[n+3]/255,i[n]=i[n]*s,i[n+1]=i[n+1]*s,i[n+2]=i[n+2]*s;return new ImageData(new Uint8ClampedArray(i.buffer),t.width,t.height)}function d(t,e){const r=new Uint8Array(e);if(n.some(((t,e)=>t!==r[e])))return i;let a=!1;if(p(r,(t=>!(a=\"acTL\"===t))),!a)return s;const h=[],u=[];let l=null,o=null,m=0;if(p(r,((e,r,a,i)=>{const s=new DataView(r.buffer);switch(e){case\"IHDR\":l=r.subarray(a+8,a+8+i),t.width=s.getUint32(a+8),t.height=s.getUint32(a+12);break;case\"acTL\":t.numPlays=s.getUint32(a+8+4);break;case\"fcTL\":{o&&(t.frames.push(o),m++),o=new c,o.width=s.getUint32(a+8+4),o.height=s.getUint32(a+8+8),o.left=s.getUint32(a+8+12),o.top=s.getUint32(a+8+16);const e=s.getUint16(a+8+20);let r=s.getUint16(a+8+22);0===r&&(r=100),o.delay=1e3*e/r,o.delay<=10&&(o.delay=100),t.playTime+=o.delay,o.disposeOp=s.getUint8(a+8+24),o.blendOp=s.getUint8(a+8+25),o.dataParts=[],0===m&&2===o.disposeOp&&(o.disposeOp=1);break}case\"fdAT\":o&&o.dataParts.push(r.subarray(a+8+4,a+8+i));break;case\"IDAT\":o&&o.dataParts.push(r.subarray(a+8,a+8+i));break;case\"IEND\":u.push(w(r,a,12+i));break;default:h.push(w(r,a,12+i))}})),0===t.frames.length)return s;t.frameCount=t.frames.length;const d=new Blob(h),g=new Blob(u);return t.frames.forEach((t=>{let e=[];e.push(n),l.set(U(t.width),0),l.set(U(t.height),4),e.push(y(\"IHDR\",l)),e.push(d),t.dataParts.forEach((t=>e.push(y(\"IDAT\",t)))),e.push(g),t.data=new Blob(e,{type:\"image/png\"}),delete t.dataParts,e=null})),t}function p(t,e){const r=new DataView(t.buffer);let a,i,s,n=8;do{i=r.getUint32(n),a=g(t,n+4,4),s=e(a,t,n,i),n+=12+i}while(!1!==s&&\"IEND\"!==a&&n<t.length)}function g(t,e,r){const a=Array.prototype.slice.call(t.subarray(e,e+r));return String.fromCharCode.apply(String,a)}function f(t){const e=new Uint8Array(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}function w(t,e,r){const a=new Uint8Array(r);return a.set(t.subarray(e,e+r)),a}function y(t,e){const r=t.length+e.length,i=new Uint8Array(r+8),s=new DataView(i.buffer);s.setUint32(0,e.length),i.set(f(t),4),i.set(e,8);const n=a(i,4,r);return s.setUint32(r+4,n),i}function U(t){return new Uint8Array([t>>>24&255,t>>>16&255,t>>>8&255,255&t])}export{o as default,u as getPNGSize,l as isAnimatedPNG,h as isPNG};\n"]},"metadata":{},"sourceType":"module"}