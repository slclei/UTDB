{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport i from \"../../core/Collection.js\";\nimport { castForReferenceSetter as s, referenceSetter as r } from \"../../core/collectionUtils.js\";\nimport { property as t } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { subclass as l } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport a from \"./LayerView.js\";\nlet o = class extends a {\n  constructor(e) {\n    super(e), this.type = \"group\", this.layerViews = new i();\n  }\n\n  initialize() {\n    this.handles.add([this.layerViews.on(\"change\", e => this._layerViewsChangeHandler(e)), this.layer.watch(\"visibilityMode\", () => this._visibilityModeHandler(), !0), this.watch(\"visible\", () => this._visibleHandler(), !0)], \"grouplayerview\"), this._layerViewsChangeHandler({\n      target: null,\n      added: this.layerViews.toArray(),\n      removed: [],\n      moved: []\n    });\n  }\n\n  set layerViews(e) {\n    this._set(\"layerViews\", r(e, this._get(\"layerViews\")));\n  }\n\n  get updatingProgress() {\n    return 0 === this.layerViews.length ? 1 : this.layerViews.reduce((e, i) => e + i.updatingProgress, 0) / this.layerViews.length;\n  }\n\n  isUpdating() {\n    return this.layerViews.some(e => e.updating);\n  }\n\n  _hasLayerViewVisibleOverrides() {\n    return this.layerViews.some(e => e._isOverridden(\"visible\"));\n  }\n\n  _findLayerViewForLayer(e) {\n    return e && this.layerViews.find(i => i.layer === e);\n  }\n\n  _firstVisibleOnLayerOrder() {\n    const e = this.layer.layers.find(e => {\n      const i = this._findLayerViewForLayer(e);\n\n      return i && i.visible;\n    });\n    return e && this._findLayerViewForLayer(e);\n  }\n\n  _enforceExclusiveVisibility(e) {\n    this._hasLayerViewVisibleOverrides() && (e || !(e = this._firstVisibleOnLayerOrder()) && this.layerViews.length > 0 && (e = this._findLayerViewForLayer(this.layer.layers.getItemAt(0))), this.layerViews.forEach(i => {\n      i.visible = i === e;\n    }));\n  }\n\n  _layerViewsChangeHandler(e) {\n    this.handles.remove(\"grouplayerview:visible\"), this.handles.add(this.layerViews.map(e => e.watch(\"visible\", i => this._layerViewVisibleHandler(i, e), !0)).toArray(), \"grouplayerview:visible\");\n    const i = e.added[e.added.length - 1];\n    let s = null;\n    i && i.visible && (s = i), this._enforceVisibility(s);\n  }\n\n  _enforceVisibility(e) {\n    if (this._hasLayerViewVisibleOverrides()) switch (this.layer.visibilityMode) {\n      case \"inherited\":\n        {\n          const e = this.visible;\n          this.layerViews.forEach(i => {\n            i.visible = e;\n          });\n          break;\n        }\n\n      case \"exclusive\":\n        this._enforceExclusiveVisibility(e);\n\n    }\n  }\n\n  _visibilityModeHandler() {\n    this._enforceVisibility();\n  }\n\n  _layerViewVisibleHandler(e, i) {\n    if (this._hasLayerViewVisibleOverrides()) switch (this.layer.visibilityMode) {\n      case \"inherited\":\n        e !== this.visible && (i.visible = this.visible);\n        break;\n\n      case \"exclusive\":\n        this._enforceExclusiveVisibility(e && i);\n\n    }\n  }\n\n  _visibleHandler() {\n    var e;\n    this._hasLayerViewVisibleOverrides() && \"inherited\" === (null == (e = this.layer) ? void 0 : e.visibilityMode) && this._enforceVisibility();\n  }\n\n};\ne([t({\n  cast: s\n})], o.prototype, \"layerViews\", null), e([t({\n  readOnly: !0\n})], o.prototype, \"updatingProgress\", null), e([t()], o.prototype, \"view\", void 0), o = e([l(\"esri.views.layers.GroupLayerView\")], o);\nconst h = o;\nexport { h as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/layers/GroupLayerView.js"],"names":["_","e","i","castForReferenceSetter","s","referenceSetter","r","property","t","subclass","l","a","o","constructor","type","layerViews","initialize","handles","add","on","_layerViewsChangeHandler","layer","watch","_visibilityModeHandler","_visibleHandler","target","added","toArray","removed","moved","_set","_get","updatingProgress","length","reduce","isUpdating","some","updating","_hasLayerViewVisibleOverrides","_isOverridden","_findLayerViewForLayer","find","_firstVisibleOnLayerOrder","layers","visible","_enforceExclusiveVisibility","getItemAt","forEach","remove","map","_layerViewVisibleHandler","_enforceVisibility","visibilityMode","cast","prototype","readOnly","h","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import i from\"../../core/Collection.js\";import{castForReferenceSetter as s,referenceSetter as r}from\"../../core/collectionUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../core/accessorSupport/decorators/subclass.js\";import a from\"./LayerView.js\";let o=class extends a{constructor(e){super(e),this.type=\"group\",this.layerViews=new i}initialize(){this.handles.add([this.layerViews.on(\"change\",(e=>this._layerViewsChangeHandler(e))),this.layer.watch(\"visibilityMode\",(()=>this._visibilityModeHandler()),!0),this.watch(\"visible\",(()=>this._visibleHandler()),!0)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(e){this._set(\"layerViews\",r(e,this._get(\"layerViews\")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((e,i)=>e+i.updatingProgress),0)/this.layerViews.length}isUpdating(){return this.layerViews.some((e=>e.updating))}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden(\"visible\")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible}));return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((i=>{i.visible=i===e})))}_layerViewsChangeHandler(e){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((e=>e.watch(\"visible\",(i=>this._layerViewVisibleHandler(i,e)),!0))).toArray(),\"grouplayerview:visible\");const i=e.added[e.added.length-1];let s=null;i&&i.visible&&(s=i),this._enforceVisibility(s)}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":{const e=this.visible;this.layerViews.forEach((i=>{i.visible=e}));break}case\"exclusive\":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":e!==this.visible&&(i.visible=this.visible);break;case\"exclusive\":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&\"inherited\"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}};e([t({cast:s})],o.prototype,\"layerViews\",null),e([t({readOnly:!0})],o.prototype,\"updatingProgress\",null),e([t()],o.prototype,\"view\",void 0),o=e([l(\"esri.views.layers.GroupLayerView\")],o);const h=o;export{h as default};\n"]},"metadata":{},"sourceType":"module"}