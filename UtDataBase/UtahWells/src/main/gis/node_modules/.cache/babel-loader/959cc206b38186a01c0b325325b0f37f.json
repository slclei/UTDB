{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport t from \"../../../core/Logger.js\";\nimport { isAbortError as r } from \"../../../core/promiseUtils.js\";\nimport { property as i } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as s } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { GraphicsCollection as a } from \"../../../support/GraphicsCollection.js\";\nimport { BitmapContainer as o } from \"../engine/BitmapContainer.js\";\nimport { LayerView2DMixin as h } from \"./LayerView2D.js\";\nimport p from \"./graphics/GraphicsView2D.js\";\nimport n from \"./graphics/HighlightGraphicContainer.js\";\nimport m from \"./support/ExportStrategy.js\";\nimport c from \"../../layers/LayerView.js\";\nimport { MapImageLayerView as d } from \"../../layers/MapImageLayerView.js\";\nimport { RefreshableLayerView as g } from \"../../layers/RefreshableLayerView.js\";\nimport { createQueryGeometry as l } from \"../../support/drapedUtils.js\";\nconst u = t.getLogger(\"esri.views.2d.layers.MapImageLayerView2D\");\nlet f = class extends d(g(h(c))) {\n  constructor() {\n    super(...arguments), this._highlightGraphics = new a();\n  }\n\n  update(e) {\n    this.strategy.update(e).catch(e => {\n      r(e) || u.error(e);\n    });\n  }\n\n  attach() {\n    const {\n      imageMaxWidth: e,\n      imageMaxHeight: t,\n      version: r\n    } = this.layer,\n          i = r >= 10.3,\n          s = r >= 10;\n    this._bitmapContainer = new o(), this.container.addChild(this._bitmapContainer);\n    const a = new p({\n      view: this.view,\n      graphics: this._highlightGraphics,\n      requestUpdateCallback: () => this.requestUpdate(),\n      container: new n(this.view.featuresTilingScheme)\n    });\n    this.container.addChild(a.container), this.strategy = new m({\n      container: this._bitmapContainer,\n      fetchSource: this.fetchImage.bind(this),\n      requestUpdate: this.requestUpdate.bind(this),\n      imageMaxWidth: e,\n      imageMaxHeight: t,\n      imageRotationSupported: i,\n      imageNormalizationSupported: s,\n      hidpi: !0\n    }), this.handles.add(this.watch(\"exportImageVersion\", () => this.requestUpdate()), \"exportImageVersion\"), this.handles.add(this.watch(\"view.floors\", () => this.requestUpdate()), \"view.floors\"), this.requestUpdate();\n  }\n\n  detach() {\n    this.handles.remove(\"exportImageVersion\"), this.handles.remove(\"view.floors\"), this.strategy.destroy(), this.container.removeAllChildren(), this._bitmapContainer.removeAllChildren();\n  }\n\n  moveStart() {}\n\n  viewChange() {}\n\n  moveEnd() {\n    this.requestUpdate();\n  }\n\n  highlight(e, t) {\n    return this._highlightGraphics.add(e), {\n      remove: () => {\n        this._highlightGraphics.remove(e);\n      }\n    };\n  }\n\n  supportsSpatialReference(e) {\n    return this.layer.serviceSupportsSpatialReference(e);\n  }\n\n  createFetchPopupFeaturesQueryGeometry(e, t) {\n    return l(e, t, this.view);\n  }\n\n  async doRefresh() {\n    this.requestUpdate();\n  }\n\n  isUpdating() {\n    return this.strategy.updating || this.updateRequested;\n  }\n\n  fetchImage(e, t, r, i) {\n    return this.layer.fetchImage(e, t, r, {\n      timeExtent: this.timeExtent,\n      floors: this.view.floors,\n      ...i\n    });\n  }\n\n};\ne([i()], f.prototype, \"strategy\", void 0), e([i()], f.prototype, \"updating\", void 0), f = e([s(\"esri.views.2d.layers.MapImageLayerView2D\")], f);\nconst y = f;\nexport { y as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js"],"names":["_","e","t","isAbortError","r","property","i","subclass","s","GraphicsCollection","a","BitmapContainer","o","LayerView2DMixin","h","p","n","m","c","MapImageLayerView","d","RefreshableLayerView","g","createQueryGeometry","l","u","getLogger","f","constructor","arguments","_highlightGraphics","update","strategy","catch","error","attach","imageMaxWidth","imageMaxHeight","version","layer","_bitmapContainer","container","addChild","view","graphics","requestUpdateCallback","requestUpdate","featuresTilingScheme","fetchSource","fetchImage","bind","imageRotationSupported","imageNormalizationSupported","hidpi","handles","add","watch","detach","remove","destroy","removeAllChildren","moveStart","viewChange","moveEnd","highlight","supportsSpatialReference","serviceSupportsSpatialReference","createFetchPopupFeaturesQueryGeometry","doRefresh","isUpdating","updating","updateRequested","timeExtent","floors","prototype","y","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as r}from\"../../../core/promiseUtils.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as a}from\"../../../support/GraphicsCollection.js\";import{BitmapContainer as o}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import p from\"./graphics/GraphicsView2D.js\";import n from\"./graphics/HighlightGraphicContainer.js\";import m from\"./support/ExportStrategy.js\";import c from\"../../layers/LayerView.js\";import{MapImageLayerView as d}from\"../../layers/MapImageLayerView.js\";import{RefreshableLayerView as g}from\"../../layers/RefreshableLayerView.js\";import{createQueryGeometry as l}from\"../../support/drapedUtils.js\";const u=t.getLogger(\"esri.views.2d.layers.MapImageLayerView2D\");let f=class extends(d(g(h(c)))){constructor(){super(...arguments),this._highlightGraphics=new a}update(e){this.strategy.update(e).catch((e=>{r(e)||u.error(e)}))}attach(){const{imageMaxWidth:e,imageMaxHeight:t,version:r}=this.layer,i=r>=10.3,s=r>=10;this._bitmapContainer=new o,this.container.addChild(this._bitmapContainer);const a=new p({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new n(this.view.featuresTilingScheme)});this.container.addChild(a.container),this.strategy=new m({container:this._bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:e,imageMaxHeight:t,imageRotationSupported:i,imageNormalizationSupported:s,hidpi:!0}),this.handles.add(this.watch(\"exportImageVersion\",(()=>this.requestUpdate())),\"exportImageVersion\"),this.handles.add(this.watch(\"view.floors\",(()=>this.requestUpdate())),\"view.floors\"),this.requestUpdate()}detach(){this.handles.remove(\"exportImageVersion\"),this.handles.remove(\"view.floors\"),this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}highlight(e,t){return this._highlightGraphics.add(e),{remove:()=>{this._highlightGraphics.remove(e)}}}supportsSpatialReference(e){return this.layer.serviceSupportsSpatialReference(e)}createFetchPopupFeaturesQueryGeometry(e,t){return l(e,t,this.view)}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImage(e,t,r,{timeExtent:this.timeExtent,floors:this.view.floors,...i})}};e([i()],f.prototype,\"strategy\",void 0),e([i()],f.prototype,\"updating\",void 0),f=e([s(\"esri.views.2d.layers.MapImageLayerView2D\")],f);const y=f;export{y as default};\n"]},"metadata":{},"sourceType":"module"}