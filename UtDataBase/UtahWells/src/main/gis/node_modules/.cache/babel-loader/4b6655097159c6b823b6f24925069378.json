{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from \"../TimeExtent.js\";\nimport { unwrap as e, isSome as n, isNone as i } from \"../core/maybe.js\";\nimport { eachAlways as o } from \"../core/promiseUtils.js\";\nimport { offsetDate as r } from \"../core/timeUtils.js\";\n\nfunction m(t) {\n  return \"feature\" === (null == t ? void 0 : t.type);\n}\n\nfunction s(t) {\n  return \"map-image\" === (null == t ? void 0 : t.type);\n}\n\nfunction f(t) {\n  return void 0 !== t.timeInfo;\n}\n\nasync function u(n, r) {\n  if (0 === n.length) return t.allTime;\n  const u = n.filter(f);\n  await Promise.all(u.map(t => t.load({\n    signal: r\n  })));\n  const a = [],\n        l = [];\n\n  for (const t of u) (m(t) || s(t)) && t.timeInfo.hasLiveData ? a.push(t) : l.push(t);\n\n  const c = t => i(t) || t.isAllTime,\n        p = l.map(t => t.timeInfo.fullTimeExtent);\n\n  if (p.some(c)) return t.allTime;\n  const T = a.map(async t => {\n    const {\n      timeExtent: n\n    } = await t.fetchRecomputedExtents({\n      signal: r\n    });\n    return n || e(t.timeInfo.fullTimeExtent);\n  }),\n        d = (await o(T)).map(t => t.value);\n  if (d.some(c)) return t.allTime;\n  return d.concat(p).reduce((t, e) => t.union(e));\n}\n\nfunction a(e) {\n  if (!e) return e;\n  const {\n    start: i,\n    end: o\n  } = e;\n  return new t({\n    start: n(i) ? r(i, -i.getTimezoneOffset(), \"minutes\") : i,\n    end: n(o) ? r(o, -o.getTimezoneOffset(), \"minutes\") : o\n  });\n}\n\nfunction l(e) {\n  if (!e) return e;\n  const {\n    start: i,\n    end: o\n  } = e;\n  return new t({\n    start: n(i) ? r(i, i.getTimezoneOffset(), \"minutes\") : i,\n    end: n(o) ? r(o, o.getTimezoneOffset(), \"minutes\") : o\n  });\n}\n\nexport { u as getTimeExtentFromLayers, l as toLocalTimeExtent, a as toUTCTimeExtent };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/support/timeUtils.js"],"names":["t","unwrap","e","isSome","n","isNone","i","eachAlways","o","offsetDate","r","m","type","s","f","timeInfo","u","length","allTime","filter","Promise","all","map","load","signal","a","l","hasLiveData","push","c","isAllTime","p","fullTimeExtent","some","T","timeExtent","fetchRecomputedExtents","d","value","concat","reduce","union","start","end","getTimezoneOffset","getTimeExtentFromLayers","toLocalTimeExtent","toUTCTimeExtent"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport t from\"../TimeExtent.js\";import{unwrap as e,isSome as n,isNone as i}from\"../core/maybe.js\";import{eachAlways as o}from\"../core/promiseUtils.js\";import{offsetDate as r}from\"../core/timeUtils.js\";function m(t){return\"feature\"===(null==t?void 0:t.type)}function s(t){return\"map-image\"===(null==t?void 0:t.type)}function f(t){return void 0!==t.timeInfo}async function u(n,r){if(0===n.length)return t.allTime;const u=n.filter(f);await Promise.all(u.map((t=>t.load({signal:r}))));const a=[],l=[];for(const t of u)(m(t)||s(t))&&t.timeInfo.hasLiveData?a.push(t):l.push(t);const c=t=>i(t)||t.isAllTime,p=l.map((t=>t.timeInfo.fullTimeExtent));if(p.some(c))return t.allTime;const T=a.map((async t=>{const{timeExtent:n}=await t.fetchRecomputedExtents({signal:r});return n||e(t.timeInfo.fullTimeExtent)})),d=(await o(T)).map((t=>t.value));if(d.some(c))return t.allTime;return d.concat(p).reduce(((t,e)=>t.union(e)))}function a(e){if(!e)return e;const{start:i,end:o}=e;return new t({start:n(i)?r(i,-i.getTimezoneOffset(),\"minutes\"):i,end:n(o)?r(o,-o.getTimezoneOffset(),\"minutes\"):o})}function l(e){if(!e)return e;const{start:i,end:o}=e;return new t({start:n(i)?r(i,i.getTimezoneOffset(),\"minutes\"):i,end:n(o)?r(o,o.getTimezoneOffset(),\"minutes\"):o})}export{u as getTimeExtentFromLayers,l as toLocalTimeExtent,a as toUTCTimeExtent};\n"]},"metadata":{},"sourceType":"module"}