{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../../chunks/tslib.es6.js\";\nimport r from \"../../../PopupTemplate.js\";\nimport s from \"../../../core/Collection.js\";\nimport { init as i } from \"../../../core/watchUtils.js\";\nimport \"../../../core/Logger.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/set.js\";\nimport { subclass as t } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport o from \"../../../renderers/SimpleRenderer.js\";\nimport { fromJSON as p } from \"../../../renderers/support/jsonUtils.js\";\nimport a from \"../../../rest/support/FeatureSet.js\";\nimport { LayerView2DMixin as l } from \"./LayerView2D.js\";\nimport h from \"./graphics/GraphicContainer.js\";\nimport n from \"./graphics/GraphicsView2D.js\";\nimport c from \"../../layers/LayerView.js\";\nlet m = class extends l(c) {\n  constructor() {\n    super(...arguments), this._graphicsViewMap = {}, this._popupTemplates = new Map(), this.graphicsViews = [];\n  }\n\n  async hitTest(e, r) {\n    if (!this.graphicsViews.length) return null;\n    const s = this.graphicsViews.reverse().map(r => r.hitTest(e));\n    return (await Promise.all(s)).flat().filter((e, r) => (e && (e.popupTemplate = this._popupTemplates.get(this.graphicsViews[r]), e.layer = this.layer, e.sourceLayer = this.layer), !!e));\n  }\n\n  update(e) {\n    if (this.graphicsViews) for (const r of this.graphicsViews) r.processUpdate(e);\n  }\n\n  attach() {\n    this.handles.add([i(this.layer, \"featureCollections\", e => {\n      this._clear();\n\n      for (const {\n        popupInfo: i,\n        featureSet: t,\n        layerDefinition: o\n      } of e) {\n        const e = a.fromJSON(t),\n              l = new s(e.features),\n              c = o.drawingInfo,\n              m = i ? r.fromJSON(i) : null,\n              y = p(c.renderer),\n              g = new n({\n          requestUpdateCallback: () => this.requestUpdate(),\n          view: this.view,\n          graphics: l,\n          renderer: y,\n          container: new h(this.view.featuresTilingScheme)\n        });\n        this._graphicsViewMap[e.geometryType] = g, this._popupTemplates.set(g, m), \"polygon\" !== e.geometryType || this.layer.polygonSymbol ? \"polyline\" !== e.geometryType || this.layer.lineSymbol ? \"point\" !== e.geometryType || this.layer.pointSymbol || (this.layer.pointSymbol = y.symbol) : this.layer.lineSymbol = y.symbol : this.layer.polygonSymbol = y.symbol, this.graphicsViews.push(g), this.container.addChild(g.container);\n      }\n    }), i(this.layer, \"polygonSymbol\", e => {\n      this._graphicsViewMap.polygon.renderer = new o({\n        symbol: e\n      });\n    }), i(this.layer, \"lineSymbol\", e => {\n      this._graphicsViewMap.polyline.renderer = new o({\n        symbol: e\n      });\n    }), i(this.layer, \"pointSymbol\", e => {\n      this._graphicsViewMap.point.renderer = new o({\n        symbol: e\n      });\n    })], \"georsslayerview\");\n  }\n\n  detach() {\n    this.handles.remove(\"georsslayerview\"), this._clear();\n  }\n\n  moveStart() {}\n\n  moveEnd() {}\n\n  viewChange() {\n    for (const e of this.graphicsViews) e.viewChange();\n  }\n\n  _clear() {\n    this.container.removeAllChildren();\n\n    for (const e of this.graphicsViews) e.destroy();\n\n    this._graphicsViewMap = {}, this._popupTemplates.clear(), this.graphicsViews.length = 0;\n  }\n\n};\nm = e([t(\"esri.views.2d.layers.GeoRSSLayerView2D\")], m);\nconst y = m;\nexport { y as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/GeoRSSLayerView2D.js"],"names":["_","e","r","s","init","i","subclass","t","o","fromJSON","p","a","LayerView2DMixin","l","h","n","c","m","constructor","arguments","_graphicsViewMap","_popupTemplates","Map","graphicsViews","hitTest","length","reverse","map","Promise","all","flat","filter","popupTemplate","get","layer","sourceLayer","update","processUpdate","attach","handles","add","_clear","popupInfo","featureSet","layerDefinition","features","drawingInfo","y","renderer","g","requestUpdateCallback","requestUpdate","view","graphics","container","featuresTilingScheme","geometryType","set","polygonSymbol","lineSymbol","pointSymbol","symbol","push","addChild","polygon","polyline","point","detach","remove","moveStart","moveEnd","viewChange","removeAllChildren","destroy","clear","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../PopupTemplate.js\";import s from\"../../../core/Collection.js\";import{init as i}from\"../../../core/watchUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as t}from\"../../../core/accessorSupport/decorators/subclass.js\";import o from\"../../../renderers/SimpleRenderer.js\";import{fromJSON as p}from\"../../../renderers/support/jsonUtils.js\";import a from\"../../../rest/support/FeatureSet.js\";import{LayerView2DMixin as l}from\"./LayerView2D.js\";import h from\"./graphics/GraphicContainer.js\";import n from\"./graphics/GraphicsView2D.js\";import c from\"../../layers/LayerView.js\";let m=class extends(l(c)){constructor(){super(...arguments),this._graphicsViewMap={},this._popupTemplates=new Map,this.graphicsViews=[]}async hitTest(e,r){if(!this.graphicsViews.length)return null;const s=this.graphicsViews.reverse().map((r=>r.hitTest(e)));return(await Promise.all(s)).flat().filter(((e,r)=>(e&&(e.popupTemplate=this._popupTemplates.get(this.graphicsViews[r]),e.layer=this.layer,e.sourceLayer=this.layer),!!e)))}update(e){if(this.graphicsViews)for(const r of this.graphicsViews)r.processUpdate(e)}attach(){this.handles.add([i(this.layer,\"featureCollections\",(e=>{this._clear();for(const{popupInfo:i,featureSet:t,layerDefinition:o}of e){const e=a.fromJSON(t),l=new s(e.features),c=o.drawingInfo,m=i?r.fromJSON(i):null,y=p(c.renderer),g=new n({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:l,renderer:y,container:new h(this.view.featuresTilingScheme)});this._graphicsViewMap[e.geometryType]=g,this._popupTemplates.set(g,m),\"polygon\"!==e.geometryType||this.layer.polygonSymbol?\"polyline\"!==e.geometryType||this.layer.lineSymbol?\"point\"!==e.geometryType||this.layer.pointSymbol||(this.layer.pointSymbol=y.symbol):this.layer.lineSymbol=y.symbol:this.layer.polygonSymbol=y.symbol,this.graphicsViews.push(g),this.container.addChild(g.container)}})),i(this.layer,\"polygonSymbol\",(e=>{this._graphicsViewMap.polygon.renderer=new o({symbol:e})})),i(this.layer,\"lineSymbol\",(e=>{this._graphicsViewMap.polyline.renderer=new o({symbol:e})})),i(this.layer,\"pointSymbol\",(e=>{this._graphicsViewMap.point.renderer=new o({symbol:e})}))],\"georsslayerview\")}detach(){this.handles.remove(\"georsslayerview\"),this._clear()}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews)e.viewChange()}_clear(){this.container.removeAllChildren();for(const e of this.graphicsViews)e.destroy();this._graphicsViewMap={},this._popupTemplates.clear(),this.graphicsViews.length=0}};m=e([t(\"esri.views.2d.layers.GeoRSSLayerView2D\")],m);const y=m;export{y as default};\n"]},"metadata":{},"sourceType":"module"}