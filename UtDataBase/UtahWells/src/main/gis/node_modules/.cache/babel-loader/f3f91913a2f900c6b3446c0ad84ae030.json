{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../../../../core/Error.js\";\nimport { parseTransform as t, parseFieldType as s } from \"../../../../../rest/query/operations/pbfFeatureServiceParser.js\";\nconst r = 268435455;\n\nclass n {\n  constructor() {\n    this.fieldMap = new Map(), this.fields = [], this.hasFeatures = !1, this.fieldCount = 0, this.featureCount = 0, this.objectIdFieldIndex = 0, this.vertexCount = 0, this.offsets = {\n      attributes: new Array(),\n      geometry: new Array()\n    }, this.centroid = new Array();\n  }\n\n  hasField(e) {\n    return this.fieldMap.has(e);\n  }\n\n  isDateField(e) {\n    var t;\n    return null == (t = this.fieldMap.get(e)) ? void 0 : t.isDate;\n  }\n\n  getFieldIndex(e) {\n    var t;\n    return null == (t = this.fieldMap.get(e)) ? void 0 : t.index;\n  }\n\n}\n\nfunction a(e) {\n  const t = 1,\n        r = 2,\n        n = e.getLength(),\n        a = e.pos() + n,\n        i = {\n    name: \"\",\n    isDate: !1\n  };\n\n  for (; e.pos() < a && e.next();) switch (e.tag()) {\n    case t:\n      i.name = e.getString();\n      break;\n\n    case r:\n      \"esriFieldTypeDate\" === s(e.getEnum()) && (i.isDate = !0);\n      break;\n\n    default:\n      e.skip();\n  }\n\n  return i;\n}\n\nfunction i(e) {\n  return e.toLowerCase().trim();\n}\n\nfunction o(s, o) {\n  let c = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n  const f = 1,\n        d = 3,\n        l = 9,\n        u = 12,\n        g = 13,\n        p = 15,\n        h = s.pos(),\n        m = new n();\n  let b = 0,\n      w = 0;\n  const k = 1,\n        x = 2,\n        y = 4,\n        I = 3;\n  let F = null,\n      L = null,\n      A = null,\n      C = !1;\n\n  for (; s.next();) switch (s.tag()) {\n    case f:\n      F = s.getString();\n      break;\n\n    case d:\n      L = s.getString();\n      break;\n\n    case u:\n      A = s.processMessage(t);\n      break;\n\n    case l:\n      if (m.exceededTransferLimit = s.getBool(), m.exceededTransferLimit) {\n        m.offsets.geometry = c ? new Float64Array(8e3) : new Int32Array(8e3), m.centroid = c ? new Float64Array(16e3) : new Int32Array(16e3);\n\n        for (let e = 0; e < m.centroid.length; e++) m.centroid[e] = r;\n      }\n\n      break;\n\n    case g:\n      {\n        const e = a(s),\n              t = e.name,\n              r = i(e.name),\n              n = {\n          fieldName: t,\n          index: b++,\n          isDate: e.isDate\n        };\n        m.fields.push(n), m.fieldMap.set(e.name, n), m.fieldMap.set(r, n);\n        break;\n      }\n\n    case p:\n      {\n        const e = s.getLength(),\n              t = s.pos() + e;\n\n        if (!m.exceededTransferLimit) {\n          const e = m.offsets.geometry,\n                t = m.centroid;\n          e.push(0), t.push(r), t.push(r);\n        }\n\n        !C && m.exceededTransferLimit && (C = !0, m.offsets.attributes = c ? new Float64Array(8e3 * b) : new Uint32Array(8e3 * b));\n        let n = w * b;\n\n        for (; s.pos() < t && s.next();) switch (s.tag()) {\n          case k:\n            {\n              if (C) m.offsets.attributes[n++] = s.pos();else {\n                m.offsets.attributes.push(s.pos());\n              }\n              const e = s.getLength();\n              s.skipLen(e);\n              break;\n            }\n\n          case x:\n            if (o) {\n              const e = s.getLength(),\n                    t = s.pos() + e;\n\n              for (; s.pos() < t && s.next();) switch (s.tag()) {\n                case I:\n                  {\n                    s.getUInt32();\n                    const e = s.getSInt64(),\n                          t = s.getSInt64();\n                    m.centroid[2 * w] = e, m.centroid[2 * w + 1] = t;\n                    break;\n                  }\n\n                default:\n                  s.skip();\n              }\n            } else {\n              m.offsets.geometry[w] = s.pos();\n              const e = s.getLength();\n              m.vertexCount += e, s.skipLen(e);\n            }\n\n            break;\n\n          case y:\n            {\n              const e = s.getLength(),\n                    t = s.pos() + e;\n\n              for (; s.pos() < t && s.next();) switch (s.tag()) {\n                case I:\n                  {\n                    s.getUInt32();\n                    const e = s.getSInt64(),\n                          t = s.getSInt64();\n                    m.centroid[2 * w] = e, m.centroid[2 * w + 1] = t;\n                    break;\n                  }\n\n                default:\n                  s.skip();\n              }\n\n              break;\n            }\n\n          default:\n            s.skip();\n        }\n\n        w++, m.hasFeatures = !0;\n        break;\n      }\n\n    default:\n      s.skip();\n  }\n\n  const S = F || L;\n  if (!S) throw new e(\"FeatureSet has no objectId or globalId field name\");\n  return m.featureCount = w, m.fieldCount = b, m.objectIdFieldIndex = m.getFieldIndex(S), m.transform = A, m.displayIds = new Uint32Array(m.featureCount), m.groupIds = new Uint16Array(m.featureCount), s.move(h), m;\n}\n\nexport { n as FeatureSetHeader, o as parseHeader };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderPBFHeader.js"],"names":["e","parseTransform","t","parseFieldType","s","r","n","constructor","fieldMap","Map","fields","hasFeatures","fieldCount","featureCount","objectIdFieldIndex","vertexCount","offsets","attributes","Array","geometry","centroid","hasField","has","isDateField","get","isDate","getFieldIndex","index","a","getLength","pos","i","name","next","tag","getString","getEnum","skip","toLowerCase","trim","o","c","f","d","l","u","g","p","h","m","b","w","k","x","y","I","F","L","A","C","processMessage","exceededTransferLimit","getBool","Float64Array","Int32Array","length","fieldName","push","set","Uint32Array","skipLen","getUInt32","getSInt64","S","transform","displayIds","groupIds","Uint16Array","move","FeatureSetHeader","parseHeader"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import{parseTransform as t,parseFieldType as s}from\"../../../../../rest/query/operations/pbfFeatureServiceParser.js\";const r=268435455;class n{constructor(){this.fieldMap=new Map,this.fields=[],this.hasFeatures=!1,this.fieldCount=0,this.featureCount=0,this.objectIdFieldIndex=0,this.vertexCount=0,this.offsets={attributes:new Array,geometry:new Array},this.centroid=new Array}hasField(e){return this.fieldMap.has(e)}isDateField(e){var t;return null==(t=this.fieldMap.get(e))?void 0:t.isDate}getFieldIndex(e){var t;return null==(t=this.fieldMap.get(e))?void 0:t.index}}function a(e){const t=1,r=2,n=e.getLength(),a=e.pos()+n,i={name:\"\",isDate:!1};for(;e.pos()<a&&e.next();)switch(e.tag()){case t:i.name=e.getString();break;case r:\"esriFieldTypeDate\"===s(e.getEnum())&&(i.isDate=!0);break;default:e.skip()}return i}function i(e){return e.toLowerCase().trim()}function o(s,o,c=!1){const f=1,d=3,l=9,u=12,g=13,p=15,h=s.pos(),m=new n;let b=0,w=0;const k=1,x=2,y=4,I=3;let F=null,L=null,A=null,C=!1;for(;s.next();)switch(s.tag()){case f:F=s.getString();break;case d:L=s.getString();break;case u:A=s.processMessage(t);break;case l:if(m.exceededTransferLimit=s.getBool(),m.exceededTransferLimit){m.offsets.geometry=c?new Float64Array(8e3):new Int32Array(8e3),m.centroid=c?new Float64Array(16e3):new Int32Array(16e3);for(let e=0;e<m.centroid.length;e++)m.centroid[e]=r}break;case g:{const e=a(s),t=e.name,r=i(e.name),n={fieldName:t,index:b++,isDate:e.isDate};m.fields.push(n),m.fieldMap.set(e.name,n),m.fieldMap.set(r,n);break}case p:{const e=s.getLength(),t=s.pos()+e;if(!m.exceededTransferLimit){const e=m.offsets.geometry,t=m.centroid;e.push(0),t.push(r),t.push(r)}!C&&m.exceededTransferLimit&&(C=!0,m.offsets.attributes=c?new Float64Array(8e3*b):new Uint32Array(8e3*b));let n=w*b;for(;s.pos()<t&&s.next();)switch(s.tag()){case k:{if(C)m.offsets.attributes[n++]=s.pos();else{m.offsets.attributes.push(s.pos())}const e=s.getLength();s.skipLen(e);break}case x:if(o){const e=s.getLength(),t=s.pos()+e;for(;s.pos()<t&&s.next();)switch(s.tag()){case I:{s.getUInt32();const e=s.getSInt64(),t=s.getSInt64();m.centroid[2*w]=e,m.centroid[2*w+1]=t;break}default:s.skip()}}else{m.offsets.geometry[w]=s.pos();const e=s.getLength();m.vertexCount+=e,s.skipLen(e)}break;case y:{const e=s.getLength(),t=s.pos()+e;for(;s.pos()<t&&s.next();)switch(s.tag()){case I:{s.getUInt32();const e=s.getSInt64(),t=s.getSInt64();m.centroid[2*w]=e,m.centroid[2*w+1]=t;break}default:s.skip()}break}default:s.skip()}w++,m.hasFeatures=!0;break}default:s.skip()}const S=F||L;if(!S)throw new e(\"FeatureSet has no objectId or globalId field name\");return m.featureCount=w,m.fieldCount=b,m.objectIdFieldIndex=m.getFieldIndex(S),m.transform=A,m.displayIds=new Uint32Array(m.featureCount),m.groupIds=new Uint16Array(m.featureCount),s.move(h),m}export{n as FeatureSetHeader,o as parseHeader};\n"]},"metadata":{},"sourceType":"module"}