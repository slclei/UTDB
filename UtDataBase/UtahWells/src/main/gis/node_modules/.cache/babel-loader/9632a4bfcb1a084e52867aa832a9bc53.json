{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSome as t, isNone as e } from \"../../../../core/maybe.js\";\nimport { List as i } from \"./cpuMapped/FreeList.js\";\n\nclass n {\n  constructor(t, e, i, n, a) {\n    this.target = t, this.geometryType = e, this.materialKey = i, this.indexFrom = n, this.indexCount = a;\n  }\n\n  get indexEnd() {\n    return this.indexFrom + this.indexCount;\n  }\n\n  extend(t) {\n    this.indexCount += t;\n  }\n\n}\n\nclass a {\n  constructor(t, e) {\n    this.geometryType = 0, this._target = t, this.geometryType = e;\n  }\n\n  static from(e, i, n, d) {\n    const r = new a(e, i);\n    if (t(d)) for (const t of d) n.seekIndex(t), r.addRecord(n);else for (; n.next();) r.addRecord(n);\n    return r;\n  }\n\n  addRecord(t) {\n    const a = this._target,\n          d = this.geometryType,\n          r = t.materialKey;\n    let s = t.indexFrom,\n        o = t.indexCount;\n    const h = t.vertexFrom,\n          x = t.vertexCount;\n\n    if (o || (s = h, o = x), e(this._head)) {\n      const t = new n(a, d, r, s, o);\n      return void (this._head = new i(t));\n    }\n\n    let m = null,\n        c = this._head;\n\n    for (; c;) {\n      if (s < c.data.indexFrom) return this._insert(r, s, o, m, c);\n      m = c, c = c.next;\n    }\n\n    this._insert(r, s, o, m, null);\n  }\n\n  forEach(e) {\n    t(this._head) && this._head.forEach(e);\n  }\n\n  *infos() {\n    if (t(this._head)) for (const t of this._head.values()) yield t;\n  }\n\n  _insert(a, d, r, s, o) {\n    if (e(s) && e(o)) {\n      const t = new n(this._target, this.geometryType, a, d, r);\n      this._head = new i(t);\n    }\n\n    return e(s) && t(o) ? this._insertAtHead(a, d, r, o) : t(s) && e(o) ? this._insertAtEnd(a, d, r, s) : t(s) && t(o) ? this._insertAtMiddle(a, d, r, s, o) : void 0;\n  }\n\n  _insertAtHead(t, e, a, d) {\n    const r = e + a;\n    if (t === d.data.materialKey && r === d.data.indexFrom) d.data.indexFrom = e, d.data.indexCount += a;else {\n      const r = new n(this._target, this.geometryType, t, e, a);\n      this._head = new i(r), this._head.next = d;\n    }\n  }\n\n  _insertAtEnd(t, e, a, d) {\n    if (d.data.materialKey === t && d.data.indexEnd === e) d.data.indexCount += a;else {\n      const r = new n(this._target, this.geometryType, t, e, a),\n            s = new i(r);\n      d.next = s;\n    }\n  }\n\n  _insertAtMiddle(t, e, a, d, r) {\n    const s = e + a;\n    if (d.data.materialKey === t && d.data.indexEnd === e) d.data.indexCount += a, d.data.materialKey === r.data.materialKey && d.data.indexEnd === r.data.indexFrom && (d.data.indexCount += r.data.indexCount, d.next = r.next);else if (t === r.data.materialKey && s === r.data.indexFrom) r.data.indexFrom = e, r.data.indexCount += a;else {\n      const s = new n(this._target, this.geometryType, t, e, a),\n            o = new i(s);\n      d.next = o, o.next = r;\n    }\n  }\n\n}\n\nexport { a as FeatureDisplayList, n as FeatureDisplayListInfo };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/FeatureDisplayList.js"],"names":["isSome","t","isNone","e","List","i","n","constructor","a","target","geometryType","materialKey","indexFrom","indexCount","indexEnd","extend","_target","from","d","r","seekIndex","addRecord","next","s","o","h","vertexFrom","x","vertexCount","_head","m","c","data","_insert","forEach","infos","values","_insertAtHead","_insertAtEnd","_insertAtMiddle","FeatureDisplayList","FeatureDisplayListInfo"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as t,isNone as e}from\"../../../../core/maybe.js\";import{List as i}from\"./cpuMapped/FreeList.js\";class n{constructor(t,e,i,n,a){this.target=t,this.geometryType=e,this.materialKey=i,this.indexFrom=n,this.indexCount=a}get indexEnd(){return this.indexFrom+this.indexCount}extend(t){this.indexCount+=t}}class a{constructor(t,e){this.geometryType=0,this._target=t,this.geometryType=e}static from(e,i,n,d){const r=new a(e,i);if(t(d))for(const t of d)n.seekIndex(t),r.addRecord(n);else for(;n.next();)r.addRecord(n);return r}addRecord(t){const a=this._target,d=this.geometryType,r=t.materialKey;let s=t.indexFrom,o=t.indexCount;const h=t.vertexFrom,x=t.vertexCount;if(o||(s=h,o=x),e(this._head)){const t=new n(a,d,r,s,o);return void(this._head=new i(t))}let m=null,c=this._head;for(;c;){if(s<c.data.indexFrom)return this._insert(r,s,o,m,c);m=c,c=c.next}this._insert(r,s,o,m,null)}forEach(e){t(this._head)&&this._head.forEach(e)}*infos(){if(t(this._head))for(const t of this._head.values())yield t}_insert(a,d,r,s,o){if(e(s)&&e(o)){const t=new n(this._target,this.geometryType,a,d,r);this._head=new i(t)}return e(s)&&t(o)?this._insertAtHead(a,d,r,o):t(s)&&e(o)?this._insertAtEnd(a,d,r,s):t(s)&&t(o)?this._insertAtMiddle(a,d,r,s,o):void 0}_insertAtHead(t,e,a,d){const r=e+a;if(t===d.data.materialKey&&r===d.data.indexFrom)d.data.indexFrom=e,d.data.indexCount+=a;else{const r=new n(this._target,this.geometryType,t,e,a);this._head=new i(r),this._head.next=d}}_insertAtEnd(t,e,a,d){if(d.data.materialKey===t&&d.data.indexEnd===e)d.data.indexCount+=a;else{const r=new n(this._target,this.geometryType,t,e,a),s=new i(r);d.next=s}}_insertAtMiddle(t,e,a,d,r){const s=e+a;if(d.data.materialKey===t&&d.data.indexEnd===e)d.data.indexCount+=a,d.data.materialKey===r.data.materialKey&&d.data.indexEnd===r.data.indexFrom&&(d.data.indexCount+=r.data.indexCount,d.next=r.next);else if(t===r.data.materialKey&&s===r.data.indexFrom)r.data.indexFrom=e,r.data.indexCount+=a;else{const s=new n(this._target,this.geometryType,t,e,a),o=new i(s);d.next=o,o.next=r}}}export{a as FeatureDisplayList,n as FeatureDisplayListInfo};\n"]},"metadata":{},"sourceType":"module"}