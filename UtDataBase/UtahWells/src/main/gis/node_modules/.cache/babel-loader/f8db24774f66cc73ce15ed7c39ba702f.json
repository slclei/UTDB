{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { create as e } from \"../../../../geometry/support/aaBoundingRect.js\";\nimport { getWorldWidth as s } from \"../../viewpointUtils.js\";\nimport { brushes as r } from \"../brushes.js\";\nimport { RasterTile as i } from \"./RasterTile.js\";\nimport { WGLDrawPhase as t } from \"../webgl/enums.js\";\nimport o from \"../webgl/TileContainer.js\";\n\nclass n extends o {\n  constructor() {\n    super(...arguments), this.isCustomTilingScheme = !1;\n  }\n\n  createTile(e) {\n    const s = this._getTileBounds(e),\n          [r, t] = this._tileInfoView.tileInfo.size;\n\n    return new i(e, s[0], s[3], r, t);\n  }\n\n  prepareRenderPasses(e) {\n    const s = e.registerRenderPass({\n      name: \"imagery (tile)\",\n      brushes: [r.raster],\n      target: () => this.children.map(e => e.bitmap),\n      drawPhase: t.MAP\n    });\n    return [...super.prepareRenderPasses(e), s];\n  }\n\n  doRender(e) {\n    this.visible && e.drawPhase === t.MAP && super.doRender(e);\n  }\n\n  _getTileBounds(r) {\n    const i = this._tileInfoView.getTileBounds(e(), r);\n\n    if (this.isCustomTilingScheme && r.world) {\n      const {\n        tileInfo: e\n      } = this._tileInfoView,\n            t = s(e.spatialReference);\n\n      if (t) {\n        const {\n          resolution: s\n        } = e.lodAt(r.level),\n              o = t / s % e.size[0],\n              n = o ? (e.size[0] - o) * s : 0;\n        i[0] -= n * r.world, i[2] -= n * r.world;\n      }\n    }\n\n    return i;\n  }\n\n}\n\nexport { n as RasterTileContainer };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/imagery/RasterTileContainer.js"],"names":["create","e","getWorldWidth","s","brushes","r","RasterTile","i","WGLDrawPhase","t","o","n","constructor","arguments","isCustomTilingScheme","createTile","_getTileBounds","_tileInfoView","tileInfo","size","prepareRenderPasses","registerRenderPass","name","raster","target","children","map","bitmap","drawPhase","MAP","doRender","visible","getTileBounds","world","spatialReference","resolution","lodAt","level","RasterTileContainer"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,MAAM,IAAIC,CAAjB,QAAuB,gDAAvB;AAAwE,SAAOC,aAAa,IAAIC,CAAxB,QAA8B,yBAA9B;AAAwD,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,eAAxB;AAAwC,SAAOC,UAAU,IAAIC,CAArB,QAA2B,iBAA3B;AAA6C,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,mBAA7B;AAAiD,OAAOC,CAAP,MAAa,2BAAb;;AAAyC,MAAMC,CAAN,SAAgBD,CAAhB,CAAiB;AAACE,EAAAA,WAAW,GAAE;AAAC,UAAM,GAAGC,SAAT,GAAoB,KAAKC,oBAAL,GAA0B,CAAC,CAA/C;AAAiD;;AAAAC,EAAAA,UAAU,CAACd,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKa,cAAL,CAAoBf,CAApB,CAAR;AAAA,UAA+B,CAACI,CAAD,EAAGI,CAAH,IAAM,KAAKQ,aAAL,CAAmBC,QAAnB,CAA4BC,IAAjE;;AAAsE,WAAO,IAAIZ,CAAJ,CAAMN,CAAN,EAAQE,CAAC,CAAC,CAAD,CAAT,EAAaA,CAAC,CAAC,CAAD,CAAd,EAAkBE,CAAlB,EAAoBI,CAApB,CAAP;AAA8B;;AAAAW,EAAAA,mBAAmB,CAACnB,CAAD,EAAG;AAAC,UAAME,CAAC,GAACF,CAAC,CAACoB,kBAAF,CAAqB;AAACC,MAAAA,IAAI,EAAC,gBAAN;AAAuBlB,MAAAA,OAAO,EAAC,CAACC,CAAC,CAACkB,MAAH,CAA/B;AAA0CC,MAAAA,MAAM,EAAC,MAAI,KAAKC,QAAL,CAAcC,GAAd,CAAmBzB,CAAC,IAAEA,CAAC,CAAC0B,MAAxB,CAArD;AAAsFC,MAAAA,SAAS,EAACnB,CAAC,CAACoB;AAAlG,KAArB,CAAR;AAAqI,WAAM,CAAC,GAAG,MAAMT,mBAAN,CAA0BnB,CAA1B,CAAJ,EAAiCE,CAAjC,CAAN;AAA0C;;AAAA2B,EAAAA,QAAQ,CAAC7B,CAAD,EAAG;AAAC,SAAK8B,OAAL,IAAc9B,CAAC,CAAC2B,SAAF,KAAcnB,CAAC,CAACoB,GAA9B,IAAmC,MAAMC,QAAN,CAAe7B,CAAf,CAAnC;AAAqD;;AAAAe,EAAAA,cAAc,CAACX,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKU,aAAL,CAAmBe,aAAnB,CAAiC/B,CAAC,EAAlC,EAAqCI,CAArC,CAAR;;AAAgD,QAAG,KAAKS,oBAAL,IAA2BT,CAAC,CAAC4B,KAAhC,EAAsC;AAAC,YAAK;AAACf,QAAAA,QAAQ,EAACjB;AAAV,UAAa,KAAKgB,aAAvB;AAAA,YAAqCR,CAAC,GAACN,CAAC,CAACF,CAAC,CAACiC,gBAAH,CAAxC;;AAA6D,UAAGzB,CAAH,EAAK;AAAC,cAAK;AAAC0B,UAAAA,UAAU,EAAChC;AAAZ,YAAeF,CAAC,CAACmC,KAAF,CAAQ/B,CAAC,CAACgC,KAAV,CAApB;AAAA,cAAqC3B,CAAC,GAACD,CAAC,GAACN,CAAF,GAAIF,CAAC,CAACkB,IAAF,CAAO,CAAP,CAA3C;AAAA,cAAqDR,CAAC,GAACD,CAAC,GAAC,CAACT,CAAC,CAACkB,IAAF,CAAO,CAAP,IAAUT,CAAX,IAAcP,CAAf,GAAiB,CAAzE;AAA2EI,QAAAA,CAAC,CAAC,CAAD,CAAD,IAAMI,CAAC,GAACN,CAAC,CAAC4B,KAAV,EAAgB1B,CAAC,CAAC,CAAD,CAAD,IAAMI,CAAC,GAACN,CAAC,CAAC4B,KAA1B;AAAgC;AAAC;;AAAA,WAAO1B,CAAP;AAAS;;AAA1tB;;AAA2tB,SAAOI,CAAC,IAAI2B,mBAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../geometry/support/aaBoundingRect.js\";import{getWorldWidth as s}from\"../../viewpointUtils.js\";import{brushes as r}from\"../brushes.js\";import{RasterTile as i}from\"./RasterTile.js\";import{WGLDrawPhase as t}from\"../webgl/enums.js\";import o from\"../webgl/TileContainer.js\";class n extends o{constructor(){super(...arguments),this.isCustomTilingScheme=!1}createTile(e){const s=this._getTileBounds(e),[r,t]=this._tileInfoView.tileInfo.size;return new i(e,s[0],s[3],r,t)}prepareRenderPasses(e){const s=e.registerRenderPass({name:\"imagery (tile)\",brushes:[r.raster],target:()=>this.children.map((e=>e.bitmap)),drawPhase:t.MAP});return[...super.prepareRenderPasses(e),s]}doRender(e){this.visible&&e.drawPhase===t.MAP&&super.doRender(e)}_getTileBounds(r){const i=this._tileInfoView.getTileBounds(e(),r);if(this.isCustomTilingScheme&&r.world){const{tileInfo:e}=this._tileInfoView,t=s(e.spatialReference);if(t){const{resolution:s}=e.lodAt(r.level),o=t/s%e.size[0],n=o?(e.size[0]-o)*s:0;i[0]-=n*r.world,i[2]-=n*r.world}}return i}}export{n as RasterTileContainer};\n"]},"metadata":{},"sourceType":"module"}