{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport \"../geometry.js\";\nimport r from \"../core/Error.js\";\nimport { isSome as t } from \"../core/maybe.js\";\nimport { urlToObject as i } from \"../core/urlUtils.js\";\nimport { property as o } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { reader as s } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as a } from \"../core/accessorSupport/decorators/subclass.js\";\nimport n from \"./FeatureLayer.js\";\nimport l from \"./graphics/sources/CSVSource.js\";\nimport { createCapabilities as u } from \"./graphics/sources/support/clientSideDefaults.js\";\nimport d from \"../rest/support/Query.js\";\nimport { r as p, w as c } from \"../chunks/persistableUrlUtils.js\";\nimport y from \"../geometry/SpatialReference.js\";\nconst h = \"CSVLayer\";\nlet m = class extends n {\n  constructor() {\n    super(...arguments), this.capabilities = u(!1, !1), this.delimiter = null, this.editingEnabled = !1, this.fields = null, this.latitudeField = null, this.locationType = \"coordinates\", this.longitudeField = null, this.operationalLayerType = \"CSV\", this.outFields = [\"*\"], this.path = null, this.portalItem = null, this.spatialReference = y.WGS84, this.source = null, this.type = \"csv\";\n  }\n\n  normalizeCtorArgs(e, r) {\n    return \"string\" == typeof e ? {\n      url: e,\n      ...r\n    } : e;\n  }\n\n  get isTable() {\n    return this.loaded && null == this.geometryType;\n  }\n\n  readWebMapLabelsVisible(e, r) {\n    return null != r.showLabels ? r.showLabels : !!(r.layerDefinition && r.layerDefinition.drawingInfo && r.layerDefinition.drawingInfo.labelingInfo);\n  }\n\n  set url(e) {\n    if (!e) return void this._set(\"url\", e);\n    const r = i(e);\n    this._set(\"url\", r.path), r.query && (this.customParameters = { ...this.customParameters,\n      ...r.query\n    });\n  }\n\n  async createGraphicsSource(e) {\n    const r = new l({\n      loadOptions: {\n        delimiter: this.delimiter,\n        fields: this.fields,\n        latitudeField: this.latitudeField,\n        longitudeField: this.longitudeField,\n        spatialReference: this.spatialReference,\n        timeInfo: this.timeInfo,\n        url: this.url\n      },\n      customParameters: this.customParameters\n    });\n    return this._set(\"source\", r), await r.load({\n      signal: e\n    }), this.read({\n      locationInfo: r.locationInfo,\n      columnDelimiter: r.delimiter\n    }, {\n      origin: \"service\",\n      url: this.parsedUrl\n    }), r;\n  }\n\n  queryFeatures(e, r) {\n    return this.load().then(() => this.source.queryFeatures(d.from(e) || this.createQuery())).then(e => {\n      if (null != e && e.features) for (const r of e.features) r.layer = r.sourceLayer = this;\n      return e;\n    });\n  }\n\n  queryObjectIds(e, r) {\n    return this.load().then(() => this.source.queryObjectIds(d.from(e) || this.createQuery()));\n  }\n\n  queryFeatureCount(e, r) {\n    return this.load().then(() => this.source.queryFeatureCount(d.from(e) || this.createQuery()));\n  }\n\n  queryExtent(e, r) {\n    return this.load().then(() => this.source.queryExtent(d.from(e) || this.createQuery()));\n  }\n\n  write(e, r) {\n    return super.write(e, { ...r,\n      writeLayerSchema: !0\n    });\n  }\n\n  clone() {\n    throw new r(h, `CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`);\n  }\n\n  async hasDataChanged() {\n    try {\n      const {\n        dataChanged: e,\n        updates: r\n      } = await this.source.refresh(this.customParameters);\n      return t(r) && this.read(r, {\n        origin: \"service\",\n        url: this.parsedUrl,\n        ignoreDefaults: !0\n      }), e;\n    } catch {}\n\n    return !1;\n  }\n\n  _verifyFields() {}\n\n  _verifySource() {}\n\n  _hasMemorySource() {\n    return !1;\n  }\n\n};\ne([o({\n  readOnly: !0,\n  json: {\n    read: !1,\n    write: !1\n  }\n})], m.prototype, \"capabilities\", void 0), e([o({\n  type: [\",\", \" \", \";\", \"|\", \"\\t\"],\n  json: {\n    read: {\n      source: \"columnDelimiter\"\n    },\n    write: {\n      target: \"columnDelimiter\",\n      ignoreOrigin: !0\n    }\n  }\n})], m.prototype, \"delimiter\", void 0), e([o({\n  readOnly: !0,\n  type: Boolean,\n  json: {\n    origins: {\n      \"web-scene\": {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], m.prototype, \"editingEnabled\", void 0), e([o({\n  json: {\n    read: {\n      source: \"layerDefinition.fields\"\n    },\n    write: {\n      target: \"layerDefinition.fields\"\n    }\n  }\n})], m.prototype, \"fields\", void 0), e([o({\n  type: Boolean,\n  readOnly: !0\n})], m.prototype, \"isTable\", null), e([s(\"web-map\", \"labelsVisible\", [\"layerDefinition.drawingInfo.labelingInfo\", \"showLabels\"])], m.prototype, \"readWebMapLabelsVisible\", null), e([o({\n  type: String,\n  json: {\n    read: {\n      source: \"locationInfo.latitudeFieldName\"\n    },\n    write: {\n      target: \"locationInfo.latitudeFieldName\",\n      ignoreOrigin: !0\n    }\n  }\n})], m.prototype, \"latitudeField\", void 0), e([o({\n  type: [\"show\", \"hide\"]\n})], m.prototype, \"listMode\", void 0), e([o({\n  type: [\"coordinates\"],\n  json: {\n    read: {\n      source: \"locationInfo.locationType\"\n    },\n    write: {\n      target: \"locationInfo.locationType\",\n      ignoreOrigin: !0,\n      isRequired: !0\n    }\n  }\n})], m.prototype, \"locationType\", void 0), e([o({\n  type: String,\n  json: {\n    read: {\n      source: \"locationInfo.longitudeFieldName\"\n    },\n    write: {\n      target: \"locationInfo.longitudeFieldName\",\n      ignoreOrigin: !0\n    }\n  }\n})], m.prototype, \"longitudeField\", void 0), e([o({\n  type: [\"CSV\"]\n})], m.prototype, \"operationalLayerType\", void 0), e([o()], m.prototype, \"outFields\", void 0), e([o({\n  type: String,\n  json: {\n    origins: {\n      \"web-scene\": {\n        read: !1,\n        write: !1\n      }\n    },\n    read: !1,\n    write: !1\n  }\n})], m.prototype, \"path\", void 0), e([o({\n  json: {\n    read: !1,\n    write: !1,\n    origins: {\n      \"web-document\": {\n        read: !1,\n        write: !1\n      }\n    }\n  }\n})], m.prototype, \"portalItem\", void 0), e([o({\n  json: {\n    read: !1\n  },\n  cast: null,\n  type: l,\n  readOnly: !0\n})], m.prototype, \"source\", void 0), e([o({\n  json: {\n    read: !1\n  },\n  value: \"csv\",\n  readOnly: !0\n})], m.prototype, \"type\", void 0), e([o({\n  json: {\n    read: p,\n    write: {\n      isRequired: !0,\n      ignoreOrigin: !0,\n      writer: c\n    }\n  }\n})], m.prototype, \"url\", null), m = e([a(\"esri.layers.CSVLayer\")], m);\nconst f = m;\nexport { f as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/CSVLayer.js"],"names":["_","e","r","isSome","t","urlToObject","i","property","o","reader","s","subclass","a","n","l","createCapabilities","u","d","p","w","c","y","h","m","constructor","capabilities","delimiter","editingEnabled","fields","latitudeField","locationType","longitudeField","operationalLayerType","outFields","path","portalItem","spatialReference","WGS84","source","type","normalizeCtorArgs","url","isTable","loaded","geometryType","readWebMapLabelsVisible","showLabels","layerDefinition","drawingInfo","labelingInfo","_set","query","customParameters","createGraphicsSource","loadOptions","timeInfo","load","signal","read","locationInfo","columnDelimiter","origin","parsedUrl","queryFeatures","then","from","createQuery","features","layer","sourceLayer","queryObjectIds","queryFeatureCount","queryExtent","write","writeLayerSchema","clone","title","id","hasDataChanged","dataChanged","updates","refresh","ignoreDefaults","_verifyFields","_verifySource","_hasMemorySource","readOnly","json","prototype","target","ignoreOrigin","Boolean","origins","String","isRequired","cast","value","writer","f","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../geometry.js\";import r from\"../core/Error.js\";import{isSome as t}from\"../core/maybe.js\";import{urlToObject as i}from\"../core/urlUtils.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{reader as s}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import n from\"./FeatureLayer.js\";import l from\"./graphics/sources/CSVSource.js\";import{createCapabilities as u}from\"./graphics/sources/support/clientSideDefaults.js\";import d from\"../rest/support/Query.js\";import{r as p,w as c}from\"../chunks/persistableUrlUtils.js\";import y from\"../geometry/SpatialReference.js\";const h=\"CSVLayer\";let m=class extends n{constructor(...e){super(...e),this.capabilities=u(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType=\"coordinates\",this.longitudeField=null,this.operationalLayerType=\"CSV\",this.outFields=[\"*\"],this.path=null,this.portalItem=null,this.spatialReference=y.WGS84,this.source=null,this.type=\"csv\"}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}get isTable(){return this.loaded&&null==this.geometryType}readWebMapLabelsVisible(e,r){return null!=r.showLabels?r.showLabels:!!(r.layerDefinition&&r.layerDefinition.drawingInfo&&r.layerDefinition.drawingInfo.labelingInfo)}set url(e){if(!e)return void this._set(\"url\",e);const r=i(e);this._set(\"url\",r.path),r.query&&(this.customParameters={...this.customParameters,...r.query})}async createGraphicsSource(e){const r=new l({loadOptions:{delimiter:this.delimiter,fields:this.fields,latitudeField:this.latitudeField,longitudeField:this.longitudeField,spatialReference:this.spatialReference,timeInfo:this.timeInfo,url:this.url},customParameters:this.customParameters});return this._set(\"source\",r),await r.load({signal:e}),this.read({locationInfo:r.locationInfo,columnDelimiter:r.delimiter},{origin:\"service\",url:this.parsedUrl}),r}queryFeatures(e,r){return this.load().then((()=>this.source.queryFeatures(d.from(e)||this.createQuery()))).then((e=>{if(null!=e&&e.features)for(const r of e.features)r.layer=r.sourceLayer=this;return e}))}queryObjectIds(e,r){return this.load().then((()=>this.source.queryObjectIds(d.from(e)||this.createQuery())))}queryFeatureCount(e,r){return this.load().then((()=>this.source.queryFeatureCount(d.from(e)||this.createQuery())))}queryExtent(e,r){return this.load().then((()=>this.source.queryExtent(d.from(e)||this.createQuery())))}write(e,r){return super.write(e,{...r,writeLayerSchema:!0})}clone(){throw new r(h,`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}async hasDataChanged(){try{const{dataChanged:e,updates:r}=await this.source.refresh(this.customParameters);return t(r)&&this.read(r,{origin:\"service\",url:this.parsedUrl,ignoreDefaults:!0}),e}catch{}return!1}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};e([o({readOnly:!0,json:{read:!1,write:!1}})],m.prototype,\"capabilities\",void 0),e([o({type:[\",\",\" \",\";\",\"|\",\"\\t\"],json:{read:{source:\"columnDelimiter\"},write:{target:\"columnDelimiter\",ignoreOrigin:!0}}})],m.prototype,\"delimiter\",void 0),e([o({readOnly:!0,type:Boolean,json:{origins:{\"web-scene\":{read:!1,write:!1}}}})],m.prototype,\"editingEnabled\",void 0),e([o({json:{read:{source:\"layerDefinition.fields\"},write:{target:\"layerDefinition.fields\"}}})],m.prototype,\"fields\",void 0),e([o({type:Boolean,readOnly:!0})],m.prototype,\"isTable\",null),e([s(\"web-map\",\"labelsVisible\",[\"layerDefinition.drawingInfo.labelingInfo\",\"showLabels\"])],m.prototype,\"readWebMapLabelsVisible\",null),e([o({type:String,json:{read:{source:\"locationInfo.latitudeFieldName\"},write:{target:\"locationInfo.latitudeFieldName\",ignoreOrigin:!0}}})],m.prototype,\"latitudeField\",void 0),e([o({type:[\"show\",\"hide\"]})],m.prototype,\"listMode\",void 0),e([o({type:[\"coordinates\"],json:{read:{source:\"locationInfo.locationType\"},write:{target:\"locationInfo.locationType\",ignoreOrigin:!0,isRequired:!0}}})],m.prototype,\"locationType\",void 0),e([o({type:String,json:{read:{source:\"locationInfo.longitudeFieldName\"},write:{target:\"locationInfo.longitudeFieldName\",ignoreOrigin:!0}}})],m.prototype,\"longitudeField\",void 0),e([o({type:[\"CSV\"]})],m.prototype,\"operationalLayerType\",void 0),e([o()],m.prototype,\"outFields\",void 0),e([o({type:String,json:{origins:{\"web-scene\":{read:!1,write:!1}},read:!1,write:!1}})],m.prototype,\"path\",void 0),e([o({json:{read:!1,write:!1,origins:{\"web-document\":{read:!1,write:!1}}}})],m.prototype,\"portalItem\",void 0),e([o({json:{read:!1},cast:null,type:l,readOnly:!0})],m.prototype,\"source\",void 0),e([o({json:{read:!1},value:\"csv\",readOnly:!0})],m.prototype,\"type\",void 0),e([o({json:{read:p,write:{isRequired:!0,ignoreOrigin:!0,writer:c}}})],m.prototype,\"url\",null),m=e([a(\"esri.layers.CSVLayer\")],m);const f=m;export{f as default};\n"]},"metadata":{},"sourceType":"module"}