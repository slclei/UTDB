{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { f as t } from \"../../../../../chunks/vec4f32.js\";\nimport { Pos2b as e } from \"../DefaultVertexAttributeLayouts.js\";\nimport r from \"./WGLBrush.js\";\nimport { background as i } from \"../shaders/BackgroundPrograms.js\";\nimport { tileInfo as s } from \"../shaders/TileInfoPrograms.js\";\nimport { BufferObject as o } from \"../../../../webgl/BufferObject.js\";\nimport { BlendFactor as n, PrimitiveType as a, Usage as l, TextureType as u, PixelFormat as _, PixelType as m, TextureSamplingMode as f, TextureWrapMode as c } from \"../../../../webgl/enums.js\";\nimport { createProgram as h } from \"../../../../webgl/ProgramTemplate.js\";\nimport { Texture as g } from \"../../../../webgl/Texture.js\";\nimport { VertexArrayObject as d } from \"../../../../webgl/VertexArrayObject.js\";\nconst A = 300,\n      b = 32;\n\nclass p extends r {\n  constructor() {\n    super(...arguments), this._color = t(1, 0, 0, 1);\n  }\n\n  dispose() {\n    this._outlineProgram && (this._outlineProgram.dispose(), this._outlineProgram = null), this._tileInfoProgram && (this._tileInfoProgram.dispose(), this._tileInfoProgram = null), this._outlineVertexArrayObject && (this._outlineVertexArrayObject.dispose(), this._outlineVertexArrayObject = null), this._tileInfoVertexArrayObject && (this._tileInfoVertexArrayObject.dispose(), this._tileInfoVertexArrayObject = null), this._canvas = null;\n  }\n\n  prepareState(_ref) {\n    let {\n      context: t\n    } = _ref;\n    t.setBlendingEnabled(!0), t.setBlendFunctionSeparate(n.ONE, n.ONE_MINUS_SRC_ALPHA, n.ONE, n.ONE_MINUS_SRC_ALPHA), t.setColorMask(!0, !0, !0, !0), t.setStencilWriteMask(0), t.setStencilTestEnabled(!1);\n  }\n\n  draw(t, e) {\n    const {\n      context: r\n    } = t;\n    if (!e.isReady) return;\n    this._loadWGLResources(r), r.bindVAO(this._outlineVertexArrayObject), r.useProgram(this._outlineProgram), this._outlineProgram.setUniformMatrix3fv(\"u_dvsMat3\", e.transforms.dvs), this._outlineProgram.setUniform2f(\"u_coord_range\", e.rangeX, e.rangeY), this._outlineProgram.setUniform1f(\"u_depth\", 0), this._outlineProgram.setUniform4fv(\"u_color\", this._color), r.drawArrays(a.LINE_STRIP, 0, 4);\n\n    const i = this._getTexture(r, e);\n\n    i ? (r.bindVAO(this._tileInfoVertexArrayObject), r.useProgram(this._tileInfoProgram), r.bindTexture(i, 0), this._tileInfoProgram.setUniformMatrix3fv(\"u_dvsMat3\", e.transforms.dvs), this._tileInfoProgram.setUniform1f(\"u_depth\", 0), this._tileInfoProgram.setUniform2f(\"u_coord_ratio\", e.rangeX / e.width, e.rangeY / e.height), this._tileInfoProgram.setUniform2f(\"u_delta\", 8, 8), this._tileInfoProgram.setUniform2f(\"u_dimensions\", i.descriptor.width, i.descriptor.height), r.drawArrays(a.TRIANGLE_STRIP, 0, 4), r.bindVAO()) : r.bindVAO();\n  }\n\n  _loadWGLResources(t) {\n    if (this._outlineProgram && this._tileInfoProgram) return;\n\n    const r = h(t, i),\n          n = h(t, s),\n          a = new Int8Array([0, 0, 1, 0, 1, 1, 0, 1]),\n          u = o.createVertex(t, l.STATIC_DRAW, a),\n          _ = new d(t, i.attributes, e, {\n      geometry: u\n    }),\n          m = new Int8Array([0, 0, 1, 0, 0, 1, 1, 1]),\n          f = o.createVertex(t, l.STATIC_DRAW, m),\n          c = new d(t, s.attributes, e, {\n      geometry: f\n    });\n\n    this._outlineProgram = r, this._tileInfoProgram = n, this._outlineVertexArrayObject = _, this._tileInfoVertexArrayObject = c;\n  }\n\n  _getTexture(t, e) {\n    if (e.texture && e.triangleCountReportedInDebug === e.triangleCount) return e.texture;\n    e.triangleCountReportedInDebug = e.triangleCount, this._canvas || (this._canvas = document.createElement(\"canvas\"), this._canvas.setAttribute(\"id\", \"canvas2d\"), this._canvas.setAttribute(\"width\", `${A}`), this._canvas.setAttribute(\"height\", `${b}`), this._canvas.setAttribute(\"style\", \"display:none\"));\n    const r = e.triangleCount;\n    let i = e.key.id;\n    e.triangleCount > 0 && (i += `, ${r}`);\n    const s = this._canvas,\n          o = s.getContext(\"2d\");\n    return o.font = \"24px sans-serif\", o.textAlign = \"left\", o.textBaseline = \"top\", o.clearRect(0, 0, A, b), r > 1e5 ? (o.fillStyle = \"red\", o.fillRect(0, 0, A, b), o.fillStyle = \"black\") : (o.clearRect(0, 0, A, b), o.fillStyle = \"blue\"), o.fillText(i, 0, 0), e.texture = new g(t, {\n      target: u.TEXTURE_2D,\n      pixelFormat: _.RGBA,\n      dataType: m.UNSIGNED_BYTE,\n      samplingMode: f.NEAREST,\n      wrapMode: c.CLAMP_TO_EDGE\n    }, s), e.texture;\n  }\n\n}\n\nexport { p as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js"],"names":["f","t","Pos2b","e","r","background","i","tileInfo","s","BufferObject","o","BlendFactor","n","PrimitiveType","a","Usage","l","TextureType","u","PixelFormat","_","PixelType","m","TextureSamplingMode","TextureWrapMode","c","createProgram","h","Texture","g","VertexArrayObject","d","A","b","p","constructor","arguments","_color","dispose","_outlineProgram","_tileInfoProgram","_outlineVertexArrayObject","_tileInfoVertexArrayObject","_canvas","prepareState","context","setBlendingEnabled","setBlendFunctionSeparate","ONE","ONE_MINUS_SRC_ALPHA","setColorMask","setStencilWriteMask","setStencilTestEnabled","draw","isReady","_loadWGLResources","bindVAO","useProgram","setUniformMatrix3fv","transforms","dvs","setUniform2f","rangeX","rangeY","setUniform1f","setUniform4fv","drawArrays","LINE_STRIP","_getTexture","bindTexture","width","height","descriptor","TRIANGLE_STRIP","Int8Array","createVertex","STATIC_DRAW","attributes","geometry","texture","triangleCountReportedInDebug","triangleCount","document","createElement","setAttribute","key","id","getContext","font","textAlign","textBaseline","clearRect","fillStyle","fillRect","fillText","target","TEXTURE_2D","pixelFormat","RGBA","dataType","UNSIGNED_BYTE","samplingMode","NEAREST","wrapMode","CLAMP_TO_EDGE","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{f as t}from\"../../../../../chunks/vec4f32.js\";import{Pos2b as e}from\"../DefaultVertexAttributeLayouts.js\";import r from\"./WGLBrush.js\";import{background as i}from\"../shaders/BackgroundPrograms.js\";import{tileInfo as s}from\"../shaders/TileInfoPrograms.js\";import{BufferObject as o}from\"../../../../webgl/BufferObject.js\";import{BlendFactor as n,PrimitiveType as a,Usage as l,TextureType as u,PixelFormat as _,PixelType as m,TextureSamplingMode as f,TextureWrapMode as c}from\"../../../../webgl/enums.js\";import{createProgram as h}from\"../../../../webgl/ProgramTemplate.js\";import{Texture as g}from\"../../../../webgl/Texture.js\";import{VertexArrayObject as d}from\"../../../../webgl/VertexArrayObject.js\";const A=300,b=32;class p extends r{constructor(){super(...arguments),this._color=t(1,0,0,1)}dispose(){this._outlineProgram&&(this._outlineProgram.dispose(),this._outlineProgram=null),this._tileInfoProgram&&(this._tileInfoProgram.dispose(),this._tileInfoProgram=null),this._outlineVertexArrayObject&&(this._outlineVertexArrayObject.dispose(),this._outlineVertexArrayObject=null),this._tileInfoVertexArrayObject&&(this._tileInfoVertexArrayObject.dispose(),this._tileInfoVertexArrayObject=null),this._canvas=null}prepareState({context:t}){t.setBlendingEnabled(!0),t.setBlendFunctionSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),t.setColorMask(!0,!0,!0,!0),t.setStencilWriteMask(0),t.setStencilTestEnabled(!1)}draw(t,e){const{context:r}=t;if(!e.isReady)return;this._loadWGLResources(r),r.bindVAO(this._outlineVertexArrayObject),r.useProgram(this._outlineProgram),this._outlineProgram.setUniformMatrix3fv(\"u_dvsMat3\",e.transforms.dvs),this._outlineProgram.setUniform2f(\"u_coord_range\",e.rangeX,e.rangeY),this._outlineProgram.setUniform1f(\"u_depth\",0),this._outlineProgram.setUniform4fv(\"u_color\",this._color),r.drawArrays(a.LINE_STRIP,0,4);const i=this._getTexture(r,e);i?(r.bindVAO(this._tileInfoVertexArrayObject),r.useProgram(this._tileInfoProgram),r.bindTexture(i,0),this._tileInfoProgram.setUniformMatrix3fv(\"u_dvsMat3\",e.transforms.dvs),this._tileInfoProgram.setUniform1f(\"u_depth\",0),this._tileInfoProgram.setUniform2f(\"u_coord_ratio\",e.rangeX/e.width,e.rangeY/e.height),this._tileInfoProgram.setUniform2f(\"u_delta\",8,8),this._tileInfoProgram.setUniform2f(\"u_dimensions\",i.descriptor.width,i.descriptor.height),r.drawArrays(a.TRIANGLE_STRIP,0,4),r.bindVAO()):r.bindVAO()}_loadWGLResources(t){if(this._outlineProgram&&this._tileInfoProgram)return;const r=h(t,i),n=h(t,s),a=new Int8Array([0,0,1,0,1,1,0,1]),u=o.createVertex(t,l.STATIC_DRAW,a),_=new d(t,i.attributes,e,{geometry:u}),m=new Int8Array([0,0,1,0,0,1,1,1]),f=o.createVertex(t,l.STATIC_DRAW,m),c=new d(t,s.attributes,e,{geometry:f});this._outlineProgram=r,this._tileInfoProgram=n,this._outlineVertexArrayObject=_,this._tileInfoVertexArrayObject=c}_getTexture(t,e){if(e.texture&&e.triangleCountReportedInDebug===e.triangleCount)return e.texture;e.triangleCountReportedInDebug=e.triangleCount,this._canvas||(this._canvas=document.createElement(\"canvas\"),this._canvas.setAttribute(\"id\",\"canvas2d\"),this._canvas.setAttribute(\"width\",`${A}`),this._canvas.setAttribute(\"height\",`${b}`),this._canvas.setAttribute(\"style\",\"display:none\"));const r=e.triangleCount;let i=e.key.id;e.triangleCount>0&&(i+=`, ${r}`);const s=this._canvas,o=s.getContext(\"2d\");return o.font=\"24px sans-serif\",o.textAlign=\"left\",o.textBaseline=\"top\",o.clearRect(0,0,A,b),r>1e5?(o.fillStyle=\"red\",o.fillRect(0,0,A,b),o.fillStyle=\"black\"):(o.clearRect(0,0,A,b),o.fillStyle=\"blue\"),o.fillText(i,0,0),e.texture=new g(t,{target:u.TEXTURE_2D,pixelFormat:_.RGBA,dataType:m.UNSIGNED_BYTE,samplingMode:f.NEAREST,wrapMode:c.CLAMP_TO_EDGE},s),e.texture}}export{p as default};\n"]},"metadata":{},"sourceType":"module"}