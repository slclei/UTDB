{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isExtent as e, isPolygon as t, isPolyline as s, isPoint as i } from \"../../../geometry/support/jsonUtils.js\";\nimport { CurveHelper as n, PIXEL_TOLERANCE as r } from \"../CurveHelper.js\";\nimport { GeometricEffectOffsetMethod as o } from \"../enums.js\";\n\nclass f {\n  static local() {\n    return null === f.instance && (f.instance = new f()), f.instance;\n  }\n\n  execute(e, t, s, i) {\n    return new h(e, t, s, i);\n  }\n\n}\n\nf.instance = null;\n\nclass h {\n  constructor(e, t, s, i) {\n    this._inputGeometries = e, this._curveHelper = new n(), this._size = (void 0 !== t.size ? t.size : 1) * s, this._offsetFlattenError = r * s;\n  }\n\n  next() {\n    let n = this._inputGeometries.next();\n\n    for (; n;) {\n      if (e(n)) if (this._size > 0) {\n        const e = [[n.xmin, n.ymin], [n.xmin, n.ymax], [n.xmax, n.ymax], [n.xmax, n.ymin], [n.xmin, n.ymin]],\n              t = this._curveHelper.offset(e, this._size, o.Rounded, 4, this._offsetFlattenError);\n\n        if (t) return {\n          rings: [t]\n        };\n      } else {\n        if (!(this._size < 0)) return n;\n        if (Math.min(n.xmax - n.xmin, n.ymax - n.ymin) + 2 * this._size > 0) return {\n          xmin: n.xmin - this._size,\n          xmax: n.xmax + this._size,\n          ymin: n.ymin - this._size,\n          ymax: n.ymax + this._size\n        };\n      }\n\n      if (t(n)) {\n        if (0 === this._size) return n;\n        const e = [];\n\n        for (const t of n.rings) {\n          const s = this._curveHelper.offset(t, this._size, o.Rounded, 4, this._offsetFlattenError);\n\n          s && e.push(s);\n        }\n\n        if (e.length) return {\n          rings: e\n        };\n      }\n\n      if (s(n) && this._size > 0) {\n        const e = [];\n\n        for (const t of n.paths) if (t && t.length > 1) {\n          const s = this._curveHelper.offset(t, this._size, o.Rounded, 4, this._offsetFlattenError),\n                i = this._curveHelper.offset(t, -this._size, o.Rounded, 4, this._offsetFlattenError);\n\n          if (s && i) {\n            for (let e = i.length - 1; e >= 0; e--) s.push(i[e]);\n\n            s.push([s[0][0], s[0][1]]), e.push(s);\n          }\n        }\n\n        if (e.length) return {\n          rings: e\n        };\n      }\n\n      i(n) && this._size, n = this._inputGeometries.next();\n    }\n\n    return null;\n  }\n\n}\n\nexport { f as EffectBuffer };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/effects/EffectBuffer.js"],"names":["isExtent","e","isPolygon","t","isPolyline","s","isPoint","i","CurveHelper","n","PIXEL_TOLERANCE","r","GeometricEffectOffsetMethod","o","f","local","instance","execute","h","constructor","_inputGeometries","_curveHelper","_size","size","_offsetFlattenError","next","xmin","ymin","ymax","xmax","offset","Rounded","rings","Math","min","push","length","paths","EffectBuffer"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isExtent as e,isPolygon as t,isPolyline as s,isPoint as i}from\"../../../geometry/support/jsonUtils.js\";import{CurveHelper as n,PIXEL_TOLERANCE as r}from\"../CurveHelper.js\";import{GeometricEffectOffsetMethod as o}from\"../enums.js\";class f{static local(){return null===f.instance&&(f.instance=new f),f.instance}execute(e,t,s,i){return new h(e,t,s,i)}}f.instance=null;class h{constructor(e,t,s,i){this._inputGeometries=e,this._curveHelper=new n,this._size=(void 0!==t.size?t.size:1)*s,this._offsetFlattenError=r*s}next(){let n=this._inputGeometries.next();for(;n;){if(e(n))if(this._size>0){const e=[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]],t=this._curveHelper.offset(e,this._size,o.Rounded,4,this._offsetFlattenError);if(t)return{rings:[t]}}else{if(!(this._size<0))return n;if(Math.min(n.xmax-n.xmin,n.ymax-n.ymin)+2*this._size>0)return{xmin:n.xmin-this._size,xmax:n.xmax+this._size,ymin:n.ymin-this._size,ymax:n.ymax+this._size}}if(t(n)){if(0===this._size)return n;const e=[];for(const t of n.rings){const s=this._curveHelper.offset(t,this._size,o.Rounded,4,this._offsetFlattenError);s&&e.push(s)}if(e.length)return{rings:e}}if(s(n)&&this._size>0){const e=[];for(const t of n.paths)if(t&&t.length>1){const s=this._curveHelper.offset(t,this._size,o.Rounded,4,this._offsetFlattenError),i=this._curveHelper.offset(t,-this._size,o.Rounded,4,this._offsetFlattenError);if(s&&i){for(let e=i.length-1;e>=0;e--)s.push(i[e]);s.push([s[0][0],s[0][1]]),e.push(s)}}if(e.length)return{rings:e}}i(n)&&this._size,n=this._inputGeometries.next()}return null}}export{f as EffectBuffer};\n"]},"metadata":{},"sourceType":"module"}