{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../Color.js\";\nimport { clone as t } from \"../../core/lang.js\";\nimport i from \"../../core/Logger.js\";\nimport { isSome as o } from \"../../core/maybe.js\";\nimport { pt2px as r } from \"../../core/screenUtils.js\";\nimport { numericHash as n } from \"../../core/string.js\";\nimport { createRendererExpression as l, ArcadeExpression as a } from \"../../support/arcadeOnDemand.js\";\nimport { CIMSymbolHelper as s, OverrideHelper as c } from \"./CIMSymbolHelper.js\";\nimport { CapType as f, JoinType as m, Alignment as p } from \"./enums.js\";\nimport { getExtent as u, getSDFMetrics as y } from \"./SDFHelper.js\";\nimport { fromCIMColor as h, getValue as g, _adjustTextCase as d, createLabelOverrideFunction as S, evaluateValueOrFunction as v, isGeometryEngineRequired as N, importGeometryEngine as b } from \"./utils.js\";\nimport { CIMEffectHelper as C } from \"./effects/CIMEffectHelper.js\";\nimport k from \"../../views/2d/arcade/callExpressionWithFeature.js\";\nimport { getFontFamily as O } from \"../../views/2d/engine/webgl/fontUtils.js\";\nconst P = i.getLogger(\"esri.symbols.cim.cimAnalyzer\");\n\nfunction M(e) {\n  switch (e) {\n    case \"Butt\":\n      return f.BUTT;\n\n    case \"Square\":\n      return f.SQUARE;\n\n    default:\n      return f.ROUND;\n  }\n}\n\nfunction L(e) {\n  switch (e) {\n    case \"Bevel\":\n      return m.BEVEL;\n\n    case \"Miter\":\n      return m.MITER;\n\n    default:\n      return m.ROUND;\n  }\n}\n\nfunction I(e) {\n  switch (e) {\n    case \"Left\":\n    default:\n      return \"left\";\n\n    case \"Right\":\n      return \"right\";\n\n    case \"Center\":\n      return \"center\";\n\n    case \"Justify\":\n      return \"justify\";\n  }\n}\n\nfunction w(e) {\n  switch (e) {\n    case \"Top\":\n    default:\n      return \"top\";\n\n    case \"Center\":\n      return \"middle\";\n\n    case \"Baseline\":\n      return \"baseline\";\n\n    case \"Bottom\":\n      return \"bottom\";\n  }\n}\n\nfunction X(e) {\n  let t = \"\",\n      i = \"\";\n\n  if (e) {\n    const o = e.toLowerCase();\n    -1 !== o.indexOf(\"italic\") ? t = \"italic\" : -1 !== o.indexOf(\"oblique\") && (t = \"oblique\"), -1 !== o.indexOf(\"bold\") ? i = \"bold\" : -1 !== o.indexOf(\"light\") && (i = \"lighter\");\n  }\n\n  return {\n    style: t,\n    weight: i\n  };\n}\n\nfunction x(e) {\n  return e.underline ? \"underline\" : e.strikethrough ? \"line-through\" : \"none\";\n}\n\nfunction z(e, t, i, o) {\n  let r;\n  e[t] ? r = e[t] : (r = {}, e[t] = r), r[i] = o;\n}\n\nfunction J(e) {\n  const t = e.markerPlacement;\n  return t && t.angleToLine ? p.MAP : p.SCREEN;\n}\n\nasync function H(e, t, i, o, r) {\n  const n = null != o ? o : [];\n  if (!e) return n;\n  let a, s;\n  const c = {};\n  if (\"CIMSymbolReference\" !== e.type) return P.error(\"Expect cim type to be 'CIMSymbolReference'\"), n;\n\n  if (a = e.symbol, s = e.primitiveOverrides, s) {\n    const e = [];\n\n    for (const i of s) {\n      const o = i.valueExpressionInfo;\n\n      if (o && t) {\n        const r = o.expression,\n              n = l(r, t.spatialReference, t.fields).then(e => {\n          e && z(c, i.primitiveName, i.propertyName, e);\n        });\n        e.push(n);\n      } else null != i.value && z(c, i.primitiveName, i.propertyName, i.value);\n    }\n\n    e.length > 0 && (await Promise.all(e));\n  }\n\n  const f = [];\n\n  switch (ne(a, i, f), f.length > 0 && (await Promise.all(f)), a.type) {\n    case \"CIMPointSymbol\":\n    case \"CIMLineSymbol\":\n    case \"CIMPolygonSymbol\":\n      R(a, s, c, t, n, i, r);\n  }\n\n  return n;\n}\n\nfunction R(e, t, i, o, r, n, l) {\n  if (!e) return;\n  const a = e.symbolLayers;\n  if (!a) return;\n  const f = e.effects;\n  let m;\n  const u = s.getSize(e);\n  \"CIMPointSymbol\" === e.type && \"Map\" === e.angleAlignment && (m = p.MAP);\n  let y = a.length;\n\n  for (; y--;) {\n    const s = a[y];\n    if (!s || !1 === s.enable) continue;\n    let p;\n    f && f.length && (p = [...f]);\n    const h = s.effects;\n    h && h.length && (f ? p.push(...h) : p = [...h]);\n    const g = [];\n    let d;\n    c.findEffectOverrides(p, t, g), d = g.length > 0 ? ee(p, g, i, o) : p;\n    const S = [];\n\n    switch (c.findApplicableOverrides(s, t, S), s.type) {\n      case \"CIMSolidFill\":\n        Y(s, d, i, S, o, r);\n        break;\n\n      case \"CIMPictureFill\":\n        A(s, d, i, S, o, n, r);\n        break;\n\n      case \"CIMHatchFill\":\n        E(s, d, i, S, o, r);\n        break;\n\n      case \"CIMGradientFill\":\n        $(s, d, i, S, o, r);\n        break;\n\n      case \"CIMSolidStroke\":\n        j(s, d, i, S, o, r, \"CIMPolygonSymbol\" === e.type, u);\n        break;\n\n      case \"CIMPictureStroke\":\n        F(s, d, i, S, o, r, \"CIMPolygonSymbol\" === e.type, u);\n        break;\n\n      case \"CIMGradientStroke\":\n        T(s, d, i, S, o, r, \"CIMPolygonSymbol\" === e.type, u);\n        break;\n\n      case \"CIMCharacterMarker\":\n        if (W(s, d, i, S, o, r)) break;\n        break;\n\n      case \"CIMPictureMarker\":\n        if (W(s, d, i, S, o, r)) break;\n        \"CIMLineSymbol\" === e.type && (m = J(s)), D(s, d, i, S, o, n, r, m, u);\n        break;\n\n      case \"CIMVectorMarker\":\n        if (W(s, d, i, S, o, r)) break;\n        \"CIMLineSymbol\" === e.type && (m = J(s)), U(s, d, i, S, o, r, n, m, u, l);\n        break;\n\n      default:\n        P.error(\"Cannot analyze CIM layer\", s.type);\n    }\n  }\n}\n\nfunction Y(e, t, i, o, r, l) {\n  const a = e.primitiveName,\n        s = h(e.color),\n        [c, f] = re(o, a, t, null),\n        m = n(JSON.stringify(e) + f).toString();\n  l.push({\n    type: \"fill\",\n    templateHash: m,\n    materialHash: c ? () => m : m,\n    cim: e,\n    materialOverrides: null,\n    colorLocked: e.colorLocked,\n    color: Z(a, i, \"Color\", r, s, _),\n    height: 0,\n    angle: 0,\n    offsetX: 0,\n    offsetY: 0,\n    scaleX: 1,\n    effects: t\n  });\n}\n\nfunction A(e, t, i, r, l, a, s) {\n  const c = e.primitiveName,\n        f = e.tintColor ? h(e.tintColor) : {\n    r: 255,\n    g: 255,\n    b: 255,\n    a: 1\n  },\n        [m, p] = re(r, c, t, null),\n        u = n(JSON.stringify(e) + p).toString(),\n        y = n(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();\n  let d = g(e.scaleX);\n\n  if (\"width\" in e) {\n    const t = e.width;\n    let i = 1;\n    const r = a.getResource(e.url);\n    o(r) && (i = r.width / r.height), d /= i * (e.height / t);\n  }\n\n  s.push({\n    type: \"fill\",\n    templateHash: u,\n    materialHash: m ? () => y : y,\n    cim: e,\n    materialOverrides: null,\n    colorLocked: e.colorLocked,\n    effects: t,\n    color: Z(c, i, \"TintColor\", l, f, _),\n    height: Z(c, i, \"Height\", l, e.height),\n    scaleX: Z(c, i, \"ScaleX\", l, d),\n    angle: Z(c, i, \"Rotation\", l, g(e.rotation)),\n    offsetX: Z(c, i, \"OffsetX\", l, g(e.offsetX)),\n    offsetY: Z(c, i, \"OffsetY\", l, g(e.offsetY)),\n    url: e.url\n  });\n}\n\nfunction E(e, t, i, o, r, l) {\n  const a = [\"Rotation\", \"OffsetX\", \"OffsetY\"],\n        s = o.filter(t => t.primitiveName !== e.primitiveName && -1 === a.indexOf(t.propertyName)),\n        c = e.primitiveName,\n        [f, m] = re(o, c, t, null),\n        p = n(JSON.stringify(e) + m).toString(),\n        u = n(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();\n  l.push({\n    type: \"fill\",\n    templateHash: p,\n    materialHash: f ? ie(u, i, s, r) : u,\n    cim: e,\n    materialOverrides: s,\n    colorLocked: e.colorLocked,\n    effects: t,\n    color: {\n      r: 255,\n      g: 255,\n      b: 255,\n      a: 1\n    },\n    height: Z(c, i, \"Separation\", r, e.separation),\n    scaleX: 1,\n    angle: Z(c, i, \"Rotation\", r, g(e.rotation)),\n    offsetX: Z(c, i, \"OffsetX\", r, g(e.offsetX)),\n    offsetY: Z(c, i, \"OffsetY\", r, g(e.offsetY))\n  });\n}\n\nfunction $(e, t, i, o, r, l) {\n  const a = e.primitiveName,\n        [s, c] = re(o, a, t, null),\n        f = n(JSON.stringify(e) + c).toString();\n  l.push({\n    type: \"fill\",\n    templateHash: f,\n    materialHash: s ? ie(f, i, o, r) : f,\n    cim: e,\n    materialOverrides: null,\n    colorLocked: e.colorLocked,\n    effects: t,\n    color: {\n      r: 128,\n      g: 128,\n      b: 128,\n      a: 1\n    },\n    height: 0,\n    angle: 0,\n    offsetX: 0,\n    offsetY: 0,\n    scaleX: 1\n  });\n}\n\nfunction j(e, t, i, o, r, l, a, s) {\n  const c = e.primitiveName,\n        f = h(e.color),\n        m = void 0 !== e.width ? e.width : 4,\n        p = M(e.capStyle),\n        u = L(e.joinStyle),\n        y = e.miterLimit,\n        [g, d] = re(o, c, t, null),\n        S = n(JSON.stringify(e) + d).toString();\n  let v, N;\n\n  if (t && t instanceof Array && t.length > 0) {\n    const e = t[t.length - 1];\n\n    if (\"CIMGeometricEffectDashes\" === e.type && \"NoConstraint\" === e.lineDashEnding && null === e.offsetAlongLine) {\n      const e = (t = [...t]).pop();\n      v = e.dashTemplate, N = e.scaleDash;\n    }\n  }\n\n  l.push({\n    type: \"line\",\n    templateHash: S,\n    materialHash: g ? () => S : S,\n    cim: e,\n    materialOverrides: null,\n    isOutline: a,\n    colorLocked: e.colorLocked,\n    effects: t,\n    color: Z(c, i, \"Color\", r, f, _),\n    width: Z(c, i, \"Width\", r, m),\n    cap: Z(c, i, \"CapStyle\", r, p),\n    join: Z(c, i, \"JoinStyle\", r, u),\n    miterLimit: Z(c, i, \"MiterLimit\", r, y),\n    referenceWidth: s,\n    zOrder: Q(e.name),\n    dashTemplate: v,\n    scaleDash: N\n  });\n}\n\nfunction F(e, t, i, o, r, l, a, s) {\n  const c = n(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),\n        f = e.primitiveName,\n        m = h(e.tintColor),\n        p = void 0 !== e.width ? e.width : 4,\n        u = M(e.capStyle),\n        y = L(e.joinStyle),\n        g = e.miterLimit,\n        [d, S] = re(o, f, t, null),\n        v = n(JSON.stringify(e) + S).toString();\n  l.push({\n    type: \"line\",\n    templateHash: v,\n    materialHash: d ? () => c : c,\n    cim: e,\n    materialOverrides: null,\n    isOutline: a,\n    colorLocked: e.colorLocked,\n    effects: t,\n    color: Z(f, i, \"TintColor\", r, m, _),\n    width: Z(f, i, \"Width\", r, p),\n    cap: Z(f, i, \"CapStyle\", r, u),\n    join: Z(f, i, \"JoinStyle\", r, y),\n    miterLimit: Z(f, i, \"MiterLimit\", r, g),\n    referenceWidth: s,\n    zOrder: Q(e.name),\n    dashTemplate: null,\n    scaleDash: !1,\n    url: e.url\n  });\n}\n\nfunction T(e, t, i, o, r, l, a, s) {\n  const c = e.primitiveName,\n        f = void 0 !== e.width ? e.width : 4,\n        m = M(e.capStyle),\n        p = L(e.joinStyle),\n        u = e.miterLimit,\n        [y, h] = re(o, c, t, null),\n        g = n(JSON.stringify(e) + h).toString();\n  l.push({\n    type: \"line\",\n    templateHash: g,\n    materialHash: y ? ie(g, i, o, r) : g,\n    cim: e,\n    materialOverrides: null,\n    isOutline: a,\n    colorLocked: e.colorLocked,\n    effects: t,\n    color: {\n      r: 128,\n      g: 128,\n      b: 128,\n      a: 1\n    },\n    width: Z(c, i, \"Width\", r, f),\n    cap: Z(c, i, \"CapStyle\", r, m),\n    join: Z(c, i, \"JoinStyle\", r, p),\n    miterLimit: Z(c, i, \"MiterLimit\", r, u),\n    referenceWidth: s,\n    zOrder: Q(e.name),\n    dashTemplate: null,\n    scaleDash: !1\n  });\n}\n\nfunction W(e, t, i, o, r, l) {\n  const a = e.markerPlacement;\n  if (!a || \"CIMMarkerPlacementInsidePolygon\" !== a.type) return !1;\n  const s = a,\n        c = [\"Rotation\", \"OffsetX\", \"OffsetY\"],\n        f = o.filter(t => t.primitiveName !== e.primitiveName && -1 === c.indexOf(t.propertyName)),\n        m = \"url\" in e ? e.url : null,\n        [p, u] = re(o, s.primitiveName, t, null),\n        y = n(JSON.stringify(e) + u).toString();\n  let h = s.stepY,\n      d = null,\n      S = 1;\n  return a.shiftOddRows && (h *= 2, d = function (e) {\n    return e ? 2 * e : 0;\n  }, S = .5), l.push({\n    type: \"fill\",\n    templateHash: y,\n    materialHash: p ? ie(y, i, f, r) : y,\n    cim: e,\n    materialOverrides: f,\n    colorLocked: e.colorLocked,\n    effects: t,\n    color: {\n      r: 255,\n      g: 255,\n      b: 255,\n      a: 1\n    },\n    height: Z(s.primitiveName, i, \"StepY\", r, h, d),\n    scaleX: S,\n    angle: Z(s.primitiveName, i, \"GridAngle\", r, s.gridAngle),\n    offsetX: Z(s.primitiveName, i, \"OffsetX\", r, g(s.offsetX)),\n    offsetY: Z(s.primitiveName, i, \"OffsetY\", r, g(s.offsetY)),\n    url: m\n  }), !0;\n}\n\nfunction D(e, t, i, r, l, a, s, c, f) {\n  var m;\n  const p = e.primitiveName,\n        u = g(e.size);\n  let y = g(e.scaleX);\n  const d = g(e.rotation),\n        S = g(e.offsetX),\n        v = g(e.offsetY),\n        N = e.tintColor ? h(e.tintColor) : {\n    r: 255,\n    g: 255,\n    b: 255,\n    a: 1\n  },\n        b = n(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),\n        C = te(e.markerPlacement, r, i, l),\n        [k, O] = re(r, p, t, C),\n        P = n(JSON.stringify(e) + O).toString(),\n        M = null != (m = e.anchorPoint) ? m : {\n    x: 0,\n    y: 0\n  };\n\n  if (\"width\" in e) {\n    const t = e.width;\n    let i = 1;\n    const r = a.getResource(e.url);\n    o(r) && (i = r.width / r.height), y /= i * (u / t);\n  }\n\n  s.push({\n    type: \"marker\",\n    templateHash: P,\n    materialHash: k ? () => b : b,\n    cim: e,\n    materialOverrides: null,\n    colorLocked: e.colorLocked,\n    effects: t,\n    scaleSymbolsProportionally: !1,\n    alignment: c,\n    size: Z(p, i, \"Size\", l, u),\n    scaleX: Z(p, i, \"ScaleX\", l, y),\n    rotation: Z(p, i, \"Rotation\", l, d),\n    offsetX: Z(p, i, \"OffsetX\", l, S),\n    offsetY: Z(p, i, \"OffsetY\", l, v),\n    color: Z(p, i, \"TintColor\", l, N, _),\n    anchorPoint: {\n      x: M.x,\n      y: -M.y\n    },\n    isAbsoluteAnchorPoint: \"Relative\" !== e.anchorPointUnits,\n    outlineColor: {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0\n    },\n    outlineWidth: 0,\n    frameHeight: 0,\n    rotateClockwise: e.rotateClockwise,\n    referenceSize: f,\n    sizeRatio: 1,\n    markerPlacement: e.markerPlacement,\n    url: e.url\n  });\n}\n\nfunction U(e, t, i, o, r, n, l, a, s, c) {\n  const f = e.markerGraphics;\n  if (!f) return;\n  let m = 0;\n\n  if (e.scaleSymbolsProportionally) {\n    const t = e.frame;\n    t && (m = t.ymax - t.ymin);\n  }\n\n  const p = te(e.markerPlacement, o, i, r);\n\n  for (const u of f) if (u) {\n    const f = u.symbol;\n    if (!f) continue;\n\n    switch (f.type) {\n      case \"CIMPointSymbol\":\n      case \"CIMLineSymbol\":\n      case \"CIMPolygonSymbol\":\n        B(e, t, p, u, o, i, r, n, l, a, s, m, c);\n        break;\n\n      case \"CIMTextSymbol\":\n        G(e, t, p, u, i, o, r, n, a, s, m);\n    }\n  }\n}\n\nfunction G(e, t, i, o, r, l, a, f, m, p, u) {\n  const y = [];\n  c.findApplicableOverrides(o, l, y);\n  const N = o.geometry;\n  if (!(\"x\" in N) || !(\"y\" in N)) return;\n  const b = o.symbol,\n        C = x(b),\n        k = X(b.fontStyleName),\n        P = O(b.fontFamilyName);\n  b.font = {\n    family: P,\n    decoration: C,\n    ...k\n  };\n  const M = e.frame,\n        L = N.x - .5 * (M.xmin + M.xmax),\n        z = N.y - .5 * (M.ymin + M.ymax),\n        J = e.size / u,\n        H = e.primitiveName,\n        R = g(b.height) * J,\n        Y = g(b.angle),\n        A = g(e.offsetX) + (g(b.offsetX) + L) * J,\n        E = g(e.offsetY) + (g(b.offsetY) + z) * J,\n        $ = h(s.getFillColor(b));\n  let j = h(s.getStrokeColor(b)),\n      F = s.getStrokeWidth(b);\n  F || (j = h(s.getFillColor(b.haloSymbol)), F = b.haloSize * J);\n  const [T, W] = re(l, H, t, i),\n        D = JSON.stringify(e.effects) + Number(e.colorLocked) + JSON.stringify(e.anchorPoint) + e.anchorPointUnits + JSON.stringify(e.markerPlacement),\n        U = n(JSON.stringify(o) + D + W).toString();\n  let G = Z(o.primitiveName, r, \"TextString\", a, o.textString, d, b.textCase);\n  if (null == G) return;\n  const {\n    fontStyleName: B\n  } = b,\n        q = P + (B ? \"-\" + B.toLowerCase() : \"-regular\"),\n        V = q;\n  \"string\" == typeof G && G.indexOf(\"[\") > -1 && b.fieldMap && (G = S(b.fieldMap, G, b.textCase)), f.push({\n    type: \"text\",\n    templateHash: U,\n    materialHash: T || \"function\" == typeof G || G.match(/\\[(.*?)\\]/) ? (e, t, i) => V + \"-\" + v(G, e, t, i) : V + \"-\" + n(G),\n    cim: b,\n    materialOverrides: null,\n    colorLocked: e.colorLocked,\n    effects: t,\n    alignment: m,\n    anchorPoint: {\n      x: e.anchorPoint ? e.anchorPoint.x : 0,\n      y: e.anchorPoint ? e.anchorPoint.y : 0\n    },\n    isAbsoluteAnchorPoint: \"Relative\" !== e.anchorPointUnits,\n    fontName: q,\n    decoration: C,\n    weight: Z(H, r, \"Weight\", a, k.weight),\n    style: Z(H, r, \"Size\", a, k.style),\n    size: Z(H, r, \"Size\", a, R),\n    angle: Z(H, r, \"Rotation\", a, Y),\n    offsetX: Z(H, r, \"OffsetX\", a, A),\n    offsetY: Z(H, r, \"OffsetY\", a, E),\n    horizontalAlignment: I(b.horizontalAlignment),\n    verticalAlignment: w(b.verticalAlignment),\n    text: G,\n    color: $,\n    outlineColor: j,\n    outlineSize: F,\n    referenceSize: p,\n    sizeRatio: 1,\n    markerPlacement: i\n  });\n}\n\nfunction B(e, t, i, r, l, a, c, f, m, p, d, S, v) {\n  const N = r.symbol,\n        b = N.symbolLayers;\n  if (!b) return;\n  if (v) return void V(e, t, i, r, a, l, c, f, m, p, d, S);\n  let k = b.length;\n  if (le(b)) return void q(e, t, i, r, b, l, a, c, f, p, d, S);\n  const O = C.applyEffects(N.effects, r.geometry, m.geometryEngine);\n  if (O) for (; k--;) {\n    const v = b[k];\n    if (v && !1 !== v.enable) switch (v.type) {\n      case \"CIMSolidFill\":\n      case \"CIMSolidStroke\":\n        {\n          var P;\n          const N = C.applyEffects(v.effects, O, m.geometryEngine),\n                b = u(N);\n          if (!b) continue;\n          const [k, M, L] = y(b, e.frame, e.size, e.anchorPoint, \"Relative\" !== e.anchorPointUnits),\n                I = \"CIMSolidFill\" === v.type,\n                w = {\n            type: \"sdf\",\n            geom: N,\n            asFill: I\n          },\n                X = e.primitiveName,\n                x = null != (P = g(e.size)) ? P : 10,\n                z = g(e.rotation),\n                J = g(e.offsetX),\n                H = g(e.offsetY),\n                R = v.path,\n                Y = v.primitiveName,\n                A = h(I ? s.getFillColor(v) : s.getStrokeColor(v)),\n                E = I ? {\n            r: 0,\n            g: 0,\n            b: 0,\n            a: 0\n          } : h(s.getStrokeColor(v)),\n                $ = s.getStrokeWidth(v);\n          if (!I && !$) break;\n          let j = !1,\n              F = \"\";\n\n          for (const e of l) e.primitiveName !== Y && e.primitiveName !== X || (void 0 !== e.value ? F += `-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}` : e.valueExpressionInfo && (j = !0));\n\n          o(t) && \"function\" == typeof t && (j = !0);\n          const T = JSON.stringify({ ...e,\n            markerGraphics: null\n          }),\n                W = n(JSON.stringify(w) + R).toString(),\n                D = {\n            type: \"marker\",\n            templateHash: n(JSON.stringify(r) + JSON.stringify(v) + T + F).toString(),\n            materialHash: j ? () => W : W,\n            cim: w,\n            materialOverrides: null,\n            colorLocked: e.colorLocked,\n            effects: t,\n            scaleSymbolsProportionally: e.scaleSymbolsProportionally,\n            alignment: p,\n            anchorPoint: {\n              x: M,\n              y: L\n            },\n            isAbsoluteAnchorPoint: !1,\n            size: Z(e.primitiveName, a, \"Size\", c, x),\n            rotation: Z(e.primitiveName, a, \"Rotation\", c, z),\n            offsetX: Z(e.primitiveName, a, \"OffsetX\", c, J),\n            offsetY: Z(e.primitiveName, a, \"OffsetY\", c, H),\n            scaleX: 1,\n            frameHeight: S,\n            rotateClockwise: e.rotateClockwise,\n            referenceSize: d,\n            sizeRatio: k,\n            color: Z(Y, a, \"Color\", c, A, _),\n            outlineColor: Z(Y, a, \"Color\", c, E, _),\n            outlineWidth: Z(Y, a, \"Width\", c, $),\n            markerPlacement: i,\n            path: R\n          };\n          f.push(D);\n          break;\n        }\n\n      default:\n        V(e, t, i, r, a, l, c, f, m, p, d, S);\n    }\n  }\n}\n\nfunction q(e, t, i, o, r, l, a, c, f, m, p, d) {\n  const S = o.geometry,\n        v = r[0],\n        N = r[1],\n        b = u(S);\n  if (!b) return;\n  const [C, k, O] = y(b, e.frame, e.size, e.anchorPoint, \"Relative\" !== e.anchorPointUnits),\n        P = {\n    type: \"sdf\",\n    geom: S,\n    asFill: !0\n  },\n        M = e.primitiveName,\n        L = g(e.size),\n        I = g(e.rotation),\n        w = g(e.offsetX),\n        X = g(e.offsetY),\n        x = N.path,\n        z = N.primitiveName,\n        J = v.primitiveName,\n        H = h(s.getFillColor(N)),\n        R = h(s.getStrokeColor(v)),\n        Y = s.getStrokeWidth(v);\n  let A = !1,\n      E = \"\";\n\n  for (const n of l) n.primitiveName !== z && n.primitiveName !== J && n.primitiveName !== M || (void 0 !== n.value ? E += `-${n.primitiveName}-${n.propertyName}-${JSON.stringify(n.value)}` : n.valueExpressionInfo && (A = !0));\n\n  const $ = JSON.stringify({ ...e,\n    markerGraphics: null\n  }),\n        j = n(JSON.stringify(P) + x).toString(),\n        F = {\n    type: \"marker\",\n    templateHash: n(JSON.stringify(o) + JSON.stringify(N) + JSON.stringify(v) + $ + E).toString(),\n    materialHash: A ? () => j : j,\n    cim: P,\n    materialOverrides: null,\n    colorLocked: e.colorLocked,\n    effects: t,\n    scaleSymbolsProportionally: e.scaleSymbolsProportionally,\n    alignment: m,\n    anchorPoint: {\n      x: k,\n      y: O\n    },\n    isAbsoluteAnchorPoint: !1,\n    size: Z(e.primitiveName, a, \"Size\", c, L),\n    rotation: Z(e.primitiveName, a, \"Rotation\", c, I),\n    offsetX: Z(e.primitiveName, a, \"OffsetX\", c, w),\n    offsetY: Z(e.primitiveName, a, \"OffsetY\", c, X),\n    scaleX: 1,\n    frameHeight: d,\n    rotateClockwise: e.rotateClockwise,\n    referenceSize: p,\n    sizeRatio: C,\n    color: Z(z, a, \"Color\", c, H, _),\n    outlineColor: Z(J, a, \"Color\", c, R, _),\n    outlineWidth: Z(J, a, \"Width\", c, Y),\n    markerPlacement: i,\n    path: x\n  };\n  f.push(F);\n}\n\nfunction V(e, t, i, l, a, c, f, m, p, u, y, h) {\n  const d = K(e, l);\n  let S = [];\n  const v = [\"Rotation\", \"OffsetX\", \"OffsetY\"];\n  S = c.filter(t => t.primitiveName !== e.primitiveName || -1 === v.indexOf(t.propertyName));\n  let N = \"\";\n\n  for (const o of c) void 0 !== o.value && (N += `-${o.primitiveName}-${o.propertyName}-${JSON.stringify(o.value)}`);\n\n  const [b, C, k] = s.getTextureAnchor(d, p),\n        O = e.primitiveName,\n        P = g(e.rotation),\n        M = g(e.offsetX),\n        L = g(e.offsetY),\n        I = n(JSON.stringify(d) + N).toString(),\n        w = {\n    type: \"marker\",\n    templateHash: I,\n    materialHash: S.length > 0 || o(t) && \"function\" == typeof t ? ie(I, a, S, f) : I,\n    cim: d,\n    materialOverrides: S,\n    colorLocked: e.colorLocked,\n    effects: t,\n    scaleSymbolsProportionally: e.scaleSymbolsProportionally,\n    alignment: u,\n    anchorPoint: {\n      x: b,\n      y: C\n    },\n    isAbsoluteAnchorPoint: !1,\n    size: e.size,\n    rotation: Z(O, a, \"Rotation\", f, P),\n    offsetX: Z(O, a, \"OffsetX\", f, M),\n    offsetY: Z(O, a, \"OffsetY\", f, L),\n    color: {\n      r: 255,\n      g: 255,\n      b: 255,\n      a: 1\n    },\n    outlineColor: {\n      r: 0,\n      g: 0,\n      b: 0,\n      a: 0\n    },\n    outlineWidth: 0,\n    scaleX: 1,\n    frameHeight: h,\n    rotateClockwise: e.rotateClockwise,\n    referenceSize: y,\n    sizeRatio: k / r(e.size),\n    markerPlacement: i\n  };\n  m.push(w);\n}\n\nfunction K(e, t) {\n  return {\n    type: e.type,\n    enable: !0,\n    name: e.name,\n    colorLocked: e.colorLocked,\n    primitiveName: e.primitiveName,\n    anchorPoint: e.anchorPoint,\n    anchorPointUnits: e.anchorPointUnits,\n    offsetX: 0,\n    offsetY: 0,\n    rotateClockwise: e.rotateClockwise,\n    rotation: 0,\n    size: e.size,\n    billboardMode3D: e.billboardMode3D,\n    depth3D: e.depth3D,\n    frame: e.frame,\n    markerGraphics: [t],\n    scaleSymbolsProportionally: e.scaleSymbolsProportionally,\n    respectFrame: e.respectFrame,\n    clippingPath: e.clippingPath\n  };\n}\n\nfunction Q(e) {\n  if (e && 0 === e.indexOf(\"Level_\")) {\n    const t = parseInt(e.substr(6), 10);\n    if (!isNaN(t)) return t;\n  }\n\n  return 0;\n}\n\nfunction _(t) {\n  if (!t || 0 === t.length) return null;\n  const i = new e(t).toRgba();\n  return {\n    r: i[0],\n    g: i[1],\n    b: i[2],\n    a: i[3]\n  };\n}\n\nfunction Z(e, t, i, o, r, n, l) {\n  const s = t[e];\n\n  if (s) {\n    const e = s[i];\n    if (\"string\" == typeof e || \"number\" == typeof e || e instanceof Array) return n ? n.call(null, e, l) : e;\n    if (null != e && e instanceof a) return (t, i, a) => {\n      let s = k(e, t, {\n        $view: a\n      }, o.geometryType, i);\n      return null !== s && n && (s = n.call(null, s, l)), null !== s ? s : r;\n    };\n  }\n\n  return r;\n}\n\nfunction ee(e, i, o, r) {\n  for (const t of i) {\n    if (t.valueExpressionInfo) {\n      const e = o[t.primitiveName] && o[t.primitiveName][t.propertyName];\n      e instanceof a && (t.fn = (t, i, o) => k(e, t, {\n        $view: o\n      }, r.geometryType, i));\n    }\n  }\n\n  const n = e => e ? e.charAt(0).toLowerCase() + e.substr(1) : e;\n\n  return (o, r, l) => {\n    for (const e of i) e.fn && (e.value = e.fn(o, r, l));\n\n    const a = [];\n\n    for (let c of e) {\n      var s;\n      const e = null == (s = c) ? void 0 : s.primitiveName;\n\n      if (e) {\n        let o = !1;\n\n        for (const r of i) if (r.primitiveName === e) {\n          const e = n(r.propertyName);\n          null != r.value && r.value !== c[e] && (o || (c = t(c), o = !0), c[e] = r.value);\n        }\n      }\n\n      a.push(c);\n    }\n\n    return a;\n  };\n}\n\nfunction te(e, i, o, r) {\n  const n = [];\n  if (c.findApplicableOverrides(e, i, n), 0 === n.length) return e;\n\n  for (const t of n) {\n    if (t.valueExpressionInfo) {\n      const e = o[t.primitiveName] && o[t.primitiveName][t.propertyName];\n      e instanceof a && (t.fn = (t, i, o) => k(e, t, {\n        $view: o\n      }, r.geometryType, i));\n    }\n  }\n\n  const l = e => e ? e.charAt(0).toLowerCase() + e.substr(1) : e;\n\n  return (i, o, r) => {\n    for (const e of n) e.fn && (e.value = e.fn(i, o, r));\n\n    const a = t(e),\n          s = e.primitiveName;\n\n    for (const e of n) if (e.primitiveName === s) {\n      const t = l(e.propertyName);\n      null != e.value && e.value !== a[t] && (a[t] = e.value);\n    }\n\n    return a;\n  };\n}\n\nfunction ie(e, t, i, o) {\n  for (const r of i) {\n    if (r.valueExpressionInfo) {\n      const e = t[r.primitiveName] && t[r.primitiveName][r.propertyName];\n      e instanceof a && (r.fn = (t, i, r) => k(e, t, {\n        $view: r\n      }, o.geometryType, i));\n    }\n  }\n\n  return (t, o, r) => {\n    for (const e of i) e.fn && (e.value = e.fn(t, o, r));\n\n    return n(e + c.buildOverrideKey(i)).toString();\n  };\n}\n\nfunction oe(e, t) {\n  if (!t || 0 === t.length) return e;\n  const i = JSON.parse(JSON.stringify(e));\n  return c.applyOverrides(i, t), i;\n}\n\nfunction re(e, t, i, r) {\n  let n = !1,\n      l = \"\";\n\n  for (const o of e) o.primitiveName === t && (void 0 !== o.value ? l += `-${o.primitiveName}-${o.propertyName}-${JSON.stringify(o.value)}` : o.valueExpressionInfo && (n = !0));\n\n  return o(i) && \"function\" == typeof i && (n = !0), o(r) && \"function\" == typeof r && (n = !0), [n, l];\n}\n\nfunction ne(e, t, i) {\n  if (e && t) switch (e.type) {\n    case \"CIMPointSymbol\":\n    case \"CIMLineSymbol\":\n    case \"CIMPolygonSymbol\":\n      {\n        const o = e.symbolLayers;\n        if (!o) return;\n\n        for (const e of o) switch (se(e, t, i), e.type) {\n          case \"CIMPictureFill\":\n          case \"CIMHatchFill\":\n          case \"CIMGradientFill\":\n          case \"CIMPictureStroke\":\n          case \"CIMGradientStroke\":\n          case \"CIMCharacterMarker\":\n          case \"CIMPictureMarker\":\n            \"url\" in e && e.url && i.push(t.fetchResource(e.url, null));\n            break;\n\n          case \"CIMVectorMarker\":\n            {\n              const o = e.markerGraphics;\n              if (!o) continue;\n\n              for (const e of o) if (e) {\n                const o = e.symbol;\n                o && ne(o, t, i);\n              }\n            }\n        }\n      }\n  }\n}\n\nconst le = e => e && 2 === e.length && e[0].enable && e[1].enable && \"CIMSolidStroke\" === e[0].type && \"CIMSolidFill\" === e[1].type && !e[0].effects && !e[1].effects;\n\nlet ae;\n\nfunction se(e, t, i) {\n  if (!e.effects || o(t.geometryEngine)) return;\n  if (ae) return void i.push(ae);\n  N(e.effects) && (ae = b(), i.push(ae), ae.then(e => t.geometryEngine = e));\n}\n\nexport { oe as analyzeCIMResource, H as analyzeCIMSymbol };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/cimAnalyzer.js"],"names":["e","clone","t","i","isSome","o","pt2px","r","numericHash","n","createRendererExpression","l","ArcadeExpression","a","CIMSymbolHelper","s","OverrideHelper","c","CapType","f","JoinType","m","Alignment","p","getExtent","u","getSDFMetrics","y","fromCIMColor","h","getValue","g","_adjustTextCase","d","createLabelOverrideFunction","S","evaluateValueOrFunction","v","isGeometryEngineRequired","N","importGeometryEngine","b","CIMEffectHelper","C","k","getFontFamily","O","P","getLogger","M","BUTT","SQUARE","ROUND","L","BEVEL","MITER","I","w","X","toLowerCase","indexOf","style","weight","x","underline","strikethrough","z","J","markerPlacement","angleToLine","MAP","SCREEN","H","type","error","symbol","primitiveOverrides","valueExpressionInfo","expression","spatialReference","fields","then","primitiveName","propertyName","push","value","length","Promise","all","ne","R","symbolLayers","effects","getSize","angleAlignment","enable","findEffectOverrides","ee","findApplicableOverrides","Y","A","E","$","j","F","T","W","D","U","color","re","JSON","stringify","toString","templateHash","materialHash","cim","materialOverrides","colorLocked","Z","_","height","angle","offsetX","offsetY","scaleX","tintColor","url","colorSubstitutions","width","getResource","rotation","filter","separation","lineSymbol","ie","capStyle","joinStyle","miterLimit","Array","lineDashEnding","offsetAlongLine","pop","dashTemplate","scaleDash","isOutline","cap","join","referenceWidth","zOrder","Q","name","stepY","shiftOddRows","gridAngle","size","te","anchorPoint","scaleSymbolsProportionally","alignment","isAbsoluteAnchorPoint","anchorPointUnits","outlineColor","outlineWidth","frameHeight","rotateClockwise","referenceSize","sizeRatio","markerGraphics","frame","ymax","ymin","B","G","geometry","fontStyleName","fontFamilyName","font","family","decoration","xmin","xmax","getFillColor","getStrokeColor","getStrokeWidth","haloSymbol","haloSize","Number","textString","textCase","q","V","fieldMap","match","fontName","horizontalAlignment","verticalAlignment","text","outlineSize","le","applyEffects","geometryEngine","geom","asFill","path","K","getTextureAnchor","billboardMode3D","depth3D","respectFrame","clippingPath","parseInt","substr","isNaN","toRgba","call","$view","geometryType","fn","charAt","buildOverrideKey","oe","parse","applyOverrides","se","fetchResource","ae","analyzeCIMResource","analyzeCIMSymbol"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import{clone as t}from\"../../core/lang.js\";import i from\"../../core/Logger.js\";import{isSome as o}from\"../../core/maybe.js\";import{pt2px as r}from\"../../core/screenUtils.js\";import{numericHash as n}from\"../../core/string.js\";import{createRendererExpression as l,ArcadeExpression as a}from\"../../support/arcadeOnDemand.js\";import{CIMSymbolHelper as s,OverrideHelper as c}from\"./CIMSymbolHelper.js\";import{CapType as f,JoinType as m,Alignment as p}from\"./enums.js\";import{getExtent as u,getSDFMetrics as y}from\"./SDFHelper.js\";import{fromCIMColor as h,getValue as g,_adjustTextCase as d,createLabelOverrideFunction as S,evaluateValueOrFunction as v,isGeometryEngineRequired as N,importGeometryEngine as b}from\"./utils.js\";import{CIMEffectHelper as C}from\"./effects/CIMEffectHelper.js\";import k from\"../../views/2d/arcade/callExpressionWithFeature.js\";import{getFontFamily as O}from\"../../views/2d/engine/webgl/fontUtils.js\";const P=i.getLogger(\"esri.symbols.cim.cimAnalyzer\");function M(e){switch(e){case\"Butt\":return f.BUTT;case\"Square\":return f.SQUARE;default:return f.ROUND}}function L(e){switch(e){case\"Bevel\":return m.BEVEL;case\"Miter\":return m.MITER;default:return m.ROUND}}function I(e){switch(e){case\"Left\":default:return\"left\";case\"Right\":return\"right\";case\"Center\":return\"center\";case\"Justify\":return\"justify\"}}function w(e){switch(e){case\"Top\":default:return\"top\";case\"Center\":return\"middle\";case\"Baseline\":return\"baseline\";case\"Bottom\":return\"bottom\"}}function X(e){let t=\"\",i=\"\";if(e){const o=e.toLowerCase();-1!==o.indexOf(\"italic\")?t=\"italic\":-1!==o.indexOf(\"oblique\")&&(t=\"oblique\"),-1!==o.indexOf(\"bold\")?i=\"bold\":-1!==o.indexOf(\"light\")&&(i=\"lighter\")}return{style:t,weight:i}}function x(e){return e.underline?\"underline\":e.strikethrough?\"line-through\":\"none\"}function z(e,t,i,o){let r;e[t]?r=e[t]:(r={},e[t]=r),r[i]=o}function J(e){const t=e.markerPlacement;return t&&t.angleToLine?p.MAP:p.SCREEN}async function H(e,t,i,o,r){const n=null!=o?o:[];if(!e)return n;let a,s;const c={};if(\"CIMSymbolReference\"!==e.type)return P.error(\"Expect cim type to be 'CIMSymbolReference'\"),n;if(a=e.symbol,s=e.primitiveOverrides,s){const e=[];for(const i of s){const o=i.valueExpressionInfo;if(o&&t){const r=o.expression,n=l(r,t.spatialReference,t.fields).then((e=>{e&&z(c,i.primitiveName,i.propertyName,e)}));e.push(n)}else null!=i.value&&z(c,i.primitiveName,i.propertyName,i.value)}e.length>0&&await Promise.all(e)}const f=[];switch(ne(a,i,f),f.length>0&&await Promise.all(f),a.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":R(a,s,c,t,n,i,r)}return n}function R(e,t,i,o,r,n,l){if(!e)return;const a=e.symbolLayers;if(!a)return;const f=e.effects;let m;const u=s.getSize(e);\"CIMPointSymbol\"===e.type&&\"Map\"===e.angleAlignment&&(m=p.MAP);let y=a.length;for(;y--;){const s=a[y];if(!s||!1===s.enable)continue;let p;f&&f.length&&(p=[...f]);const h=s.effects;h&&h.length&&(f?p.push(...h):p=[...h]);const g=[];let d;c.findEffectOverrides(p,t,g),d=g.length>0?ee(p,g,i,o):p;const S=[];switch(c.findApplicableOverrides(s,t,S),s.type){case\"CIMSolidFill\":Y(s,d,i,S,o,r);break;case\"CIMPictureFill\":A(s,d,i,S,o,n,r);break;case\"CIMHatchFill\":E(s,d,i,S,o,r);break;case\"CIMGradientFill\":$(s,d,i,S,o,r);break;case\"CIMSolidStroke\":j(s,d,i,S,o,r,\"CIMPolygonSymbol\"===e.type,u);break;case\"CIMPictureStroke\":F(s,d,i,S,o,r,\"CIMPolygonSymbol\"===e.type,u);break;case\"CIMGradientStroke\":T(s,d,i,S,o,r,\"CIMPolygonSymbol\"===e.type,u);break;case\"CIMCharacterMarker\":if(W(s,d,i,S,o,r))break;break;case\"CIMPictureMarker\":if(W(s,d,i,S,o,r))break;\"CIMLineSymbol\"===e.type&&(m=J(s)),D(s,d,i,S,o,n,r,m,u);break;case\"CIMVectorMarker\":if(W(s,d,i,S,o,r))break;\"CIMLineSymbol\"===e.type&&(m=J(s)),U(s,d,i,S,o,r,n,m,u,l);break;default:P.error(\"Cannot analyze CIM layer\",s.type)}}}function Y(e,t,i,o,r,l){const a=e.primitiveName,s=h(e.color),[c,f]=re(o,a,t,null),m=n(JSON.stringify(e)+f).toString();l.push({type:\"fill\",templateHash:m,materialHash:c?()=>m:m,cim:e,materialOverrides:null,colorLocked:e.colorLocked,color:Z(a,i,\"Color\",r,s,_),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:t})}function A(e,t,i,r,l,a,s){const c=e.primitiveName,f=e.tintColor?h(e.tintColor):{r:255,g:255,b:255,a:1},[m,p]=re(r,c,t,null),u=n(JSON.stringify(e)+p).toString(),y=n(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString();let d=g(e.scaleX);if(\"width\"in e){const t=e.width;let i=1;const r=a.getResource(e.url);o(r)&&(i=r.width/r.height),d/=i*(e.height/t)}s.push({type:\"fill\",templateHash:u,materialHash:m?()=>y:y,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:Z(c,i,\"TintColor\",l,f,_),height:Z(c,i,\"Height\",l,e.height),scaleX:Z(c,i,\"ScaleX\",l,d),angle:Z(c,i,\"Rotation\",l,g(e.rotation)),offsetX:Z(c,i,\"OffsetX\",l,g(e.offsetX)),offsetY:Z(c,i,\"OffsetY\",l,g(e.offsetY)),url:e.url})}function E(e,t,i,o,r,l){const a=[\"Rotation\",\"OffsetX\",\"OffsetY\"],s=o.filter((t=>t.primitiveName!==e.primitiveName&&-1===a.indexOf(t.propertyName))),c=e.primitiveName,[f,m]=re(o,c,t,null),p=n(JSON.stringify(e)+m).toString(),u=n(`${e.separation}${JSON.stringify(e.lineSymbol)}`).toString();l.push({type:\"fill\",templateHash:p,materialHash:f?ie(u,i,s,r):u,cim:e,materialOverrides:s,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:Z(c,i,\"Separation\",r,e.separation),scaleX:1,angle:Z(c,i,\"Rotation\",r,g(e.rotation)),offsetX:Z(c,i,\"OffsetX\",r,g(e.offsetX)),offsetY:Z(c,i,\"OffsetY\",r,g(e.offsetY))})}function $(e,t,i,o,r,l){const a=e.primitiveName,[s,c]=re(o,a,t,null),f=n(JSON.stringify(e)+c).toString();l.push({type:\"fill\",templateHash:f,materialHash:s?ie(f,i,o,r):f,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1})}function j(e,t,i,o,r,l,a,s){const c=e.primitiveName,f=h(e.color),m=void 0!==e.width?e.width:4,p=M(e.capStyle),u=L(e.joinStyle),y=e.miterLimit,[g,d]=re(o,c,t,null),S=n(JSON.stringify(e)+d).toString();let v,N;if(t&&t instanceof Array&&t.length>0){const e=t[t.length-1];if(\"CIMGeometricEffectDashes\"===e.type&&\"NoConstraint\"===e.lineDashEnding&&null===e.offsetAlongLine){const e=(t=[...t]).pop();v=e.dashTemplate,N=e.scaleDash}}l.push({type:\"line\",templateHash:S,materialHash:g?()=>S:S,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:Z(c,i,\"Color\",r,f,_),width:Z(c,i,\"Width\",r,m),cap:Z(c,i,\"CapStyle\",r,p),join:Z(c,i,\"JoinStyle\",r,u),miterLimit:Z(c,i,\"MiterLimit\",r,y),referenceWidth:s,zOrder:Q(e.name),dashTemplate:v,scaleDash:N})}function F(e,t,i,o,r,l,a,s){const c=n(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),f=e.primitiveName,m=h(e.tintColor),p=void 0!==e.width?e.width:4,u=M(e.capStyle),y=L(e.joinStyle),g=e.miterLimit,[d,S]=re(o,f,t,null),v=n(JSON.stringify(e)+S).toString();l.push({type:\"line\",templateHash:v,materialHash:d?()=>c:c,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:Z(f,i,\"TintColor\",r,m,_),width:Z(f,i,\"Width\",r,p),cap:Z(f,i,\"CapStyle\",r,u),join:Z(f,i,\"JoinStyle\",r,y),miterLimit:Z(f,i,\"MiterLimit\",r,g),referenceWidth:s,zOrder:Q(e.name),dashTemplate:null,scaleDash:!1,url:e.url})}function T(e,t,i,o,r,l,a,s){const c=e.primitiveName,f=void 0!==e.width?e.width:4,m=M(e.capStyle),p=L(e.joinStyle),u=e.miterLimit,[y,h]=re(o,c,t,null),g=n(JSON.stringify(e)+h).toString();l.push({type:\"line\",templateHash:g,materialHash:y?ie(g,i,o,r):g,cim:e,materialOverrides:null,isOutline:a,colorLocked:e.colorLocked,effects:t,color:{r:128,g:128,b:128,a:1},width:Z(c,i,\"Width\",r,f),cap:Z(c,i,\"CapStyle\",r,m),join:Z(c,i,\"JoinStyle\",r,p),miterLimit:Z(c,i,\"MiterLimit\",r,u),referenceWidth:s,zOrder:Q(e.name),dashTemplate:null,scaleDash:!1})}function W(e,t,i,o,r,l){const a=e.markerPlacement;if(!a||\"CIMMarkerPlacementInsidePolygon\"!==a.type)return!1;const s=a,c=[\"Rotation\",\"OffsetX\",\"OffsetY\"],f=o.filter((t=>t.primitiveName!==e.primitiveName&&-1===c.indexOf(t.propertyName))),m=\"url\"in e?e.url:null,[p,u]=re(o,s.primitiveName,t,null),y=n(JSON.stringify(e)+u).toString();let h=s.stepY,d=null,S=1;return a.shiftOddRows&&(h*=2,d=function(e){return e?2*e:0},S=.5),l.push({type:\"fill\",templateHash:y,materialHash:p?ie(y,i,f,r):y,cim:e,materialOverrides:f,colorLocked:e.colorLocked,effects:t,color:{r:255,g:255,b:255,a:1},height:Z(s.primitiveName,i,\"StepY\",r,h,d),scaleX:S,angle:Z(s.primitiveName,i,\"GridAngle\",r,s.gridAngle),offsetX:Z(s.primitiveName,i,\"OffsetX\",r,g(s.offsetX)),offsetY:Z(s.primitiveName,i,\"OffsetY\",r,g(s.offsetY)),url:m}),!0}function D(e,t,i,r,l,a,s,c,f){var m;const p=e.primitiveName,u=g(e.size);let y=g(e.scaleX);const d=g(e.rotation),S=g(e.offsetX),v=g(e.offsetY),N=e.tintColor?h(e.tintColor):{r:255,g:255,b:255,a:1},b=n(`${e.url}${JSON.stringify(e.colorSubstitutions)}`).toString(),C=te(e.markerPlacement,r,i,l),[k,O]=re(r,p,t,C),P=n(JSON.stringify(e)+O).toString(),M=null!=(m=e.anchorPoint)?m:{x:0,y:0};if(\"width\"in e){const t=e.width;let i=1;const r=a.getResource(e.url);o(r)&&(i=r.width/r.height),y/=i*(u/t)}s.push({type:\"marker\",templateHash:P,materialHash:k?()=>b:b,cim:e,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:!1,alignment:c,size:Z(p,i,\"Size\",l,u),scaleX:Z(p,i,\"ScaleX\",l,y),rotation:Z(p,i,\"Rotation\",l,d),offsetX:Z(p,i,\"OffsetX\",l,S),offsetY:Z(p,i,\"OffsetY\",l,v),color:Z(p,i,\"TintColor\",l,N,_),anchorPoint:{x:M.x,y:-M.y},isAbsoluteAnchorPoint:\"Relative\"!==e.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:e.rotateClockwise,referenceSize:f,sizeRatio:1,markerPlacement:e.markerPlacement,url:e.url})}function U(e,t,i,o,r,n,l,a,s,c){const f=e.markerGraphics;if(!f)return;let m=0;if(e.scaleSymbolsProportionally){const t=e.frame;t&&(m=t.ymax-t.ymin)}const p=te(e.markerPlacement,o,i,r);for(const u of f)if(u){const f=u.symbol;if(!f)continue;switch(f.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":B(e,t,p,u,o,i,r,n,l,a,s,m,c);break;case\"CIMTextSymbol\":G(e,t,p,u,i,o,r,n,a,s,m)}}}function G(e,t,i,o,r,l,a,f,m,p,u){const y=[];c.findApplicableOverrides(o,l,y);const N=o.geometry;if(!(\"x\"in N)||!(\"y\"in N))return;const b=o.symbol,C=x(b),k=X(b.fontStyleName),P=O(b.fontFamilyName);b.font={family:P,decoration:C,...k};const M=e.frame,L=N.x-.5*(M.xmin+M.xmax),z=N.y-.5*(M.ymin+M.ymax),J=e.size/u,H=e.primitiveName,R=g(b.height)*J,Y=g(b.angle),A=g(e.offsetX)+(g(b.offsetX)+L)*J,E=g(e.offsetY)+(g(b.offsetY)+z)*J,$=h(s.getFillColor(b));let j=h(s.getStrokeColor(b)),F=s.getStrokeWidth(b);F||(j=h(s.getFillColor(b.haloSymbol)),F=b.haloSize*J);const[T,W]=re(l,H,t,i),D=JSON.stringify(e.effects)+Number(e.colorLocked)+JSON.stringify(e.anchorPoint)+e.anchorPointUnits+JSON.stringify(e.markerPlacement),U=n(JSON.stringify(o)+D+W).toString();let G=Z(o.primitiveName,r,\"TextString\",a,o.textString,d,b.textCase);if(null==G)return;const{fontStyleName:B}=b,q=P+(B?\"-\"+B.toLowerCase():\"-regular\"),V=q;\"string\"==typeof G&&G.indexOf(\"[\")>-1&&b.fieldMap&&(G=S(b.fieldMap,G,b.textCase)),f.push({type:\"text\",templateHash:U,materialHash:T||\"function\"==typeof G||G.match(/\\[(.*?)\\]/)?(e,t,i)=>V+\"-\"+v(G,e,t,i):V+\"-\"+n(G),cim:b,materialOverrides:null,colorLocked:e.colorLocked,effects:t,alignment:m,anchorPoint:{x:e.anchorPoint?e.anchorPoint.x:0,y:e.anchorPoint?e.anchorPoint.y:0},isAbsoluteAnchorPoint:\"Relative\"!==e.anchorPointUnits,fontName:q,decoration:C,weight:Z(H,r,\"Weight\",a,k.weight),style:Z(H,r,\"Size\",a,k.style),size:Z(H,r,\"Size\",a,R),angle:Z(H,r,\"Rotation\",a,Y),offsetX:Z(H,r,\"OffsetX\",a,A),offsetY:Z(H,r,\"OffsetY\",a,E),horizontalAlignment:I(b.horizontalAlignment),verticalAlignment:w(b.verticalAlignment),text:G,color:$,outlineColor:j,outlineSize:F,referenceSize:p,sizeRatio:1,markerPlacement:i})}function B(e,t,i,r,l,a,c,f,m,p,d,S,v){const N=r.symbol,b=N.symbolLayers;if(!b)return;if(v)return void V(e,t,i,r,a,l,c,f,m,p,d,S);let k=b.length;if(le(b))return void q(e,t,i,r,b,l,a,c,f,p,d,S);const O=C.applyEffects(N.effects,r.geometry,m.geometryEngine);if(O)for(;k--;){const v=b[k];if(v&&!1!==v.enable)switch(v.type){case\"CIMSolidFill\":case\"CIMSolidStroke\":{var P;const N=C.applyEffects(v.effects,O,m.geometryEngine),b=u(N);if(!b)continue;const[k,M,L]=y(b,e.frame,e.size,e.anchorPoint,\"Relative\"!==e.anchorPointUnits),I=\"CIMSolidFill\"===v.type,w={type:\"sdf\",geom:N,asFill:I},X=e.primitiveName,x=null!=(P=g(e.size))?P:10,z=g(e.rotation),J=g(e.offsetX),H=g(e.offsetY),R=v.path,Y=v.primitiveName,A=h(I?s.getFillColor(v):s.getStrokeColor(v)),E=I?{r:0,g:0,b:0,a:0}:h(s.getStrokeColor(v)),$=s.getStrokeWidth(v);if(!I&&!$)break;let j=!1,F=\"\";for(const e of l)e.primitiveName!==Y&&e.primitiveName!==X||(void 0!==e.value?F+=`-${e.primitiveName}-${e.propertyName}-${JSON.stringify(e.value)}`:e.valueExpressionInfo&&(j=!0));o(t)&&\"function\"==typeof t&&(j=!0);const T=JSON.stringify({...e,markerGraphics:null}),W=n(JSON.stringify(w)+R).toString(),D={type:\"marker\",templateHash:n(JSON.stringify(r)+JSON.stringify(v)+T+F).toString(),materialHash:j?()=>W:W,cim:w,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:p,anchorPoint:{x:M,y:L},isAbsoluteAnchorPoint:!1,size:Z(e.primitiveName,a,\"Size\",c,x),rotation:Z(e.primitiveName,a,\"Rotation\",c,z),offsetX:Z(e.primitiveName,a,\"OffsetX\",c,J),offsetY:Z(e.primitiveName,a,\"OffsetY\",c,H),scaleX:1,frameHeight:S,rotateClockwise:e.rotateClockwise,referenceSize:d,sizeRatio:k,color:Z(Y,a,\"Color\",c,A,_),outlineColor:Z(Y,a,\"Color\",c,E,_),outlineWidth:Z(Y,a,\"Width\",c,$),markerPlacement:i,path:R};f.push(D);break}default:V(e,t,i,r,a,l,c,f,m,p,d,S)}}}function q(e,t,i,o,r,l,a,c,f,m,p,d){const S=o.geometry,v=r[0],N=r[1],b=u(S);if(!b)return;const[C,k,O]=y(b,e.frame,e.size,e.anchorPoint,\"Relative\"!==e.anchorPointUnits),P={type:\"sdf\",geom:S,asFill:!0},M=e.primitiveName,L=g(e.size),I=g(e.rotation),w=g(e.offsetX),X=g(e.offsetY),x=N.path,z=N.primitiveName,J=v.primitiveName,H=h(s.getFillColor(N)),R=h(s.getStrokeColor(v)),Y=s.getStrokeWidth(v);let A=!1,E=\"\";for(const n of l)n.primitiveName!==z&&n.primitiveName!==J&&n.primitiveName!==M||(void 0!==n.value?E+=`-${n.primitiveName}-${n.propertyName}-${JSON.stringify(n.value)}`:n.valueExpressionInfo&&(A=!0));const $=JSON.stringify({...e,markerGraphics:null}),j=n(JSON.stringify(P)+x).toString(),F={type:\"marker\",templateHash:n(JSON.stringify(o)+JSON.stringify(N)+JSON.stringify(v)+$+E).toString(),materialHash:A?()=>j:j,cim:P,materialOverrides:null,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:m,anchorPoint:{x:k,y:O},isAbsoluteAnchorPoint:!1,size:Z(e.primitiveName,a,\"Size\",c,L),rotation:Z(e.primitiveName,a,\"Rotation\",c,I),offsetX:Z(e.primitiveName,a,\"OffsetX\",c,w),offsetY:Z(e.primitiveName,a,\"OffsetY\",c,X),scaleX:1,frameHeight:d,rotateClockwise:e.rotateClockwise,referenceSize:p,sizeRatio:C,color:Z(z,a,\"Color\",c,H,_),outlineColor:Z(J,a,\"Color\",c,R,_),outlineWidth:Z(J,a,\"Width\",c,Y),markerPlacement:i,path:x};f.push(F)}function V(e,t,i,l,a,c,f,m,p,u,y,h){const d=K(e,l);let S=[];const v=[\"Rotation\",\"OffsetX\",\"OffsetY\"];S=c.filter((t=>t.primitiveName!==e.primitiveName||-1===v.indexOf(t.propertyName)));let N=\"\";for(const o of c)void 0!==o.value&&(N+=`-${o.primitiveName}-${o.propertyName}-${JSON.stringify(o.value)}`);const[b,C,k]=s.getTextureAnchor(d,p),O=e.primitiveName,P=g(e.rotation),M=g(e.offsetX),L=g(e.offsetY),I=n(JSON.stringify(d)+N).toString(),w={type:\"marker\",templateHash:I,materialHash:S.length>0||o(t)&&\"function\"==typeof t?ie(I,a,S,f):I,cim:d,materialOverrides:S,colorLocked:e.colorLocked,effects:t,scaleSymbolsProportionally:e.scaleSymbolsProportionally,alignment:u,anchorPoint:{x:b,y:C},isAbsoluteAnchorPoint:!1,size:e.size,rotation:Z(O,a,\"Rotation\",f,P),offsetX:Z(O,a,\"OffsetX\",f,M),offsetY:Z(O,a,\"OffsetY\",f,L),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:h,rotateClockwise:e.rotateClockwise,referenceSize:y,sizeRatio:k/r(e.size),markerPlacement:i};m.push(w)}function K(e,t){return{type:e.type,enable:!0,name:e.name,colorLocked:e.colorLocked,primitiveName:e.primitiveName,anchorPoint:e.anchorPoint,anchorPointUnits:e.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:e.rotateClockwise,rotation:0,size:e.size,billboardMode3D:e.billboardMode3D,depth3D:e.depth3D,frame:e.frame,markerGraphics:[t],scaleSymbolsProportionally:e.scaleSymbolsProportionally,respectFrame:e.respectFrame,clippingPath:e.clippingPath}}function Q(e){if(e&&0===e.indexOf(\"Level_\")){const t=parseInt(e.substr(6),10);if(!isNaN(t))return t}return 0}function _(t){if(!t||0===t.length)return null;const i=new e(t).toRgba();return{r:i[0],g:i[1],b:i[2],a:i[3]}}function Z(e,t,i,o,r,n,l){const s=t[e];if(s){const e=s[i];if(\"string\"==typeof e||\"number\"==typeof e||e instanceof Array)return n?n.call(null,e,l):e;if(null!=e&&e instanceof a)return(t,i,a)=>{let s=k(e,t,{$view:a},o.geometryType,i);return null!==s&&n&&(s=n.call(null,s,l)),null!==s?s:r}}return r}function ee(e,i,o,r){for(const t of i){if(t.valueExpressionInfo){const e=o[t.primitiveName]&&o[t.primitiveName][t.propertyName];e instanceof a&&(t.fn=(t,i,o)=>k(e,t,{$view:o},r.geometryType,i))}}const n=e=>e?e.charAt(0).toLowerCase()+e.substr(1):e;return(o,r,l)=>{for(const e of i)e.fn&&(e.value=e.fn(o,r,l));const a=[];for(let c of e){var s;const e=null==(s=c)?void 0:s.primitiveName;if(e){let o=!1;for(const r of i)if(r.primitiveName===e){const e=n(r.propertyName);null!=r.value&&r.value!==c[e]&&(o||(c=t(c),o=!0),c[e]=r.value)}}a.push(c)}return a}}function te(e,i,o,r){const n=[];if(c.findApplicableOverrides(e,i,n),0===n.length)return e;for(const t of n){if(t.valueExpressionInfo){const e=o[t.primitiveName]&&o[t.primitiveName][t.propertyName];e instanceof a&&(t.fn=(t,i,o)=>k(e,t,{$view:o},r.geometryType,i))}}const l=e=>e?e.charAt(0).toLowerCase()+e.substr(1):e;return(i,o,r)=>{for(const e of n)e.fn&&(e.value=e.fn(i,o,r));const a=t(e),s=e.primitiveName;for(const e of n)if(e.primitiveName===s){const t=l(e.propertyName);null!=e.value&&e.value!==a[t]&&(a[t]=e.value)}return a}}function ie(e,t,i,o){for(const r of i){if(r.valueExpressionInfo){const e=t[r.primitiveName]&&t[r.primitiveName][r.propertyName];e instanceof a&&(r.fn=(t,i,r)=>k(e,t,{$view:r},o.geometryType,i))}}return(t,o,r)=>{for(const e of i)e.fn&&(e.value=e.fn(t,o,r));return n(e+c.buildOverrideKey(i)).toString()}}function oe(e,t){if(!t||0===t.length)return e;const i=JSON.parse(JSON.stringify(e));return c.applyOverrides(i,t),i}function re(e,t,i,r){let n=!1,l=\"\";for(const o of e)o.primitiveName===t&&(void 0!==o.value?l+=`-${o.primitiveName}-${o.propertyName}-${JSON.stringify(o.value)}`:o.valueExpressionInfo&&(n=!0));return o(i)&&\"function\"==typeof i&&(n=!0),o(r)&&\"function\"==typeof r&&(n=!0),[n,l]}function ne(e,t,i){if(e&&t)switch(e.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":{const o=e.symbolLayers;if(!o)return;for(const e of o)switch(se(e,t,i),e.type){case\"CIMPictureFill\":case\"CIMHatchFill\":case\"CIMGradientFill\":case\"CIMPictureStroke\":case\"CIMGradientStroke\":case\"CIMCharacterMarker\":case\"CIMPictureMarker\":\"url\"in e&&e.url&&i.push(t.fetchResource(e.url,null));break;case\"CIMVectorMarker\":{const o=e.markerGraphics;if(!o)continue;for(const e of o)if(e){const o=e.symbol;o&&ne(o,t,i)}}}}}}const le=e=>e&&2===e.length&&e[0].enable&&e[1].enable&&\"CIMSolidStroke\"===e[0].type&&\"CIMSolidFill\"===e[1].type&&!e[0].effects&&!e[1].effects;let ae;function se(e,t,i){if(!e.effects||o(t.geometryEngine))return;if(ae)return void i.push(ae);N(e.effects)&&(ae=b(),i.push(ae),ae.then((e=>t.geometryEngine=e)))}export{oe as analyzeCIMResource,H as analyzeCIMSymbol};\n"]},"metadata":{},"sourceType":"module"}