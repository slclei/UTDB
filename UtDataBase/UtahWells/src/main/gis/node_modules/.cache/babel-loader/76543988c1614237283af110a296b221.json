{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../config.js\";\nimport \"../geometry.js\";\nimport r from \"../Graphic.js\";\nimport o from \"../PopupTemplate.js\";\nimport \"../renderers/ClassBreaksRenderer.js\";\nimport \"../renderers/DictionaryRenderer.js\";\nimport \"../renderers/DotDensityRenderer.js\";\nimport \"../renderers/HeatmapRenderer.js\";\nimport \"../renderers/Renderer.js\";\nimport \"../renderers/SimpleRenderer.js\";\nimport \"../renderers/UniqueValueRenderer.js\";\nimport { read as i } from \"../renderers/support/jsonUtils.js\";\nimport s from \"../core/Collection.js\";\nimport n from \"../core/Error.js\";\nimport { HandleOwnerMixin as l } from \"../core/HandleOwner.js\";\nimport a from \"../core/Logger.js\";\nimport { isSome as p, isNone as u, unwrapOrValue as m } from \"../core/maybe.js\";\nimport { MultiOriginJSONMixin as y } from \"../core/MultiOriginJSONSupport.js\";\nimport { setDeepValue as f } from \"../core/object.js\";\nimport { watch as c } from \"../core/reactiveUtils.js\";\nimport { convertUnit as d } from \"../core/unitUtils.js\";\nimport { urlToObject as h } from \"../core/urlUtils.js\";\nimport { property as S } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { reader as g } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as w } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { writer as v } from \"../core/accessorSupport/decorators/writer.js\";\nimport { updateOrigins as b } from \"../core/accessorSupport/originUtils.js\";\nimport P from \"../geometry/Extent.js\";\nimport { initializeProjection as B, project as I } from \"../geometry/projection.js\";\nimport { WGS84 as N } from \"../geometry/support/spatialReferenceUtils.js\";\nimport j from \"./Layer.js\";\nimport { BlendLayer as O } from \"./mixins/BlendLayer.js\";\nimport { OperationalLayer as L } from \"./mixins/OperationalLayer.js\";\nimport { PortalLayer as D } from \"./mixins/PortalLayer.js\";\nimport { ScaleRangeLayer as _ } from \"./mixins/ScaleRangeLayer.js\";\nimport { sanitizeUrl as C } from \"./support/arcgisLayerUrl.js\";\nimport T from \"./support/DefaultSymbols.js\";\nimport R from \"../portal/Portal.js\";\nimport J from \"../portal/PortalItem.js\";\nimport { fetchServiceDescription as A } from \"../rest/networkService.js\";\nimport { solve as x } from \"../rest/route.js\";\nimport F from \"../rest/support/DirectionLine.js\";\nimport k from \"../rest/support/DirectionPoint.js\";\nimport { directionsTimeUnitJsonMap as G, directionsLengthUnitJsonMap as M } from \"../rest/support/networkEnums.js\";\nimport U from \"../rest/support/PointBarrier.js\";\nimport E from \"../rest/support/PolygonBarrier.js\";\nimport q from \"../rest/support/PolylineBarrier.js\";\nimport W from \"../rest/support/RouteInfo.js\";\nimport V from \"../rest/support/RouteParameters.js\";\nimport H from \"../rest/support/RouteSettings.js\";\nimport K from \"../rest/support/Stop.js\";\nimport Q from \"../geometry/SpatialReference.js\";\nimport Y from \"../geometry/Multipoint.js\";\n\nfunction Z(e) {\n  return e.length ? e : null;\n}\n\nfunction $(e) {\n  return \"layers\" in e;\n}\n\nfunction z(e) {\n  return \"esri.rest.support.FeatureSet\" === e.declaredClass;\n}\n\nfunction X(e) {\n  return \"esri.rest.support.NetworkFeatureSet\" === e.declaredClass;\n}\n\nfunction ee(e, t, r) {\n  var o, i, s, l, a, m, y, f, c, d, h;\n  const {\n    impedance: S,\n    networkDataset: g,\n    supportedTravelModes: w,\n    defaultTravelMode: v\n  } = t,\n        b = g.networkAttributes.filter(e => \"esriNAUTCost\" === e.usageType),\n        P = w.find(e => e.id === v),\n        B = null != (o = r.travelMode) ? o : P;\n  if (u(B)) return void ue.warn(\"route-layer:missing-travel-mode\", \"The routing service must have a default travel mode or one must be specified in the route parameter.\");\n\n  const {\n    timeAttributeName: I,\n    distanceAttributeName: N\n  } = B,\n        j = b.find(e => e.name === I),\n        O = b.find(e => e.name === N),\n        L = null != (i = null != (s = null == (l = r.travelMode) ? void 0 : l.impedanceAttributeName) ? s : r.impedanceAttribute) ? i : S,\n        D = G.fromJSON(null == j ? void 0 : j.units),\n        _ = M.fromJSON(null == O ? void 0 : O.units);\n\n  if (!D || !_) throw new n(\"routelayer:unknown-impedance-units\", \"the units of either the distance or time impedance are unknown\");\n\n  const C = null != (a = r.directionsLanguage) ? a : t.directionsLanguage,\n        T = null != (m = null != (y = r.accumulateAttributes) ? y : t.accumulateAttributeNames) ? m : [],\n        R = new Set(b.filter(_ref => {\n    let {\n      name: e\n    } = _ref;\n    return e === I || e === N || e === L || T.includes(e);\n  }).map(_ref2 => {\n    let {\n      name: e\n    } = _ref2;\n    return e;\n  })),\n        J = e => {\n    for (const t in e) R.has(t) || delete e[t];\n  };\n\n  for (const n of e.pointBarriers) {\n    var A;\n    if (p(n.costs)) n.addedCost = null != (A = n.costs[L]) ? A : 0, J(n.costs);\n  }\n\n  for (const n of e.polygonBarriers) {\n    var x;\n    if (p(n.costs)) n.scaleFactor = null != (x = n.costs[L]) ? x : 1, J(n.costs);\n  }\n\n  for (const n of e.polylineBarriers) {\n    var F;\n    if (p(n.costs)) n.scaleFactor = null != (F = n.costs[L]) ? F : 1, J(n.costs);\n  }\n\n  const {\n    routeInfo: k\n  } = e,\n        {\n    findBestSequence: U,\n    preserveFirstStop: E,\n    preserveLastStop: q,\n    startTimeIsUTC: W,\n    timeWindowsAreUTC: V\n  } = r;\n  k.analysisSettings = new H({\n    accumulateAttributes: T,\n    directionsLanguage: C,\n    findBestSequence: U,\n    preserveFirstStop: E,\n    preserveLastStop: q,\n    startTimeIsUTC: W,\n    timeWindowsAreUTC: V,\n    travelMode: B\n  }), k.totalDuration = re(null != (f = k.totalCosts[I]) ? f : 0, D), k.totalDistance = oe(null != (c = k.totalCosts[N]) ? c : 0, _), k.totalLateDuration = re(null != (d = k.totalViolations[I]) ? d : 0, D), k.totalWaitDuration = re(null != (h = k.totalWait[I]) ? h : 0, D), p(k.totalCosts) && J(k.totalCosts), p(k.totalViolations) && J(k.totalViolations), p(k.totalWait) && J(k.totalWait);\n\n  for (const n of e.stops) {\n    var K, Q, Y, Z, $, z;\n    if (p(n.serviceCosts)) n.serviceDuration = re(null != (K = n.serviceCosts[I]) ? K : 0, D), n.serviceDistance = oe(null != (Q = n.serviceCosts[N]) ? Q : 0, _), J(n.serviceCosts);\n    if (p(n.cumulativeCosts)) n.cumulativeDuration = re(null != (Y = n.cumulativeCosts[I]) ? Y : 0, D), n.cumulativeDistance = oe(null != (Z = n.cumulativeCosts[N]) ? Z : 0, _), J(n.cumulativeCosts);\n    if (p(n.violations)) n.lateDuration = re(null != ($ = n.violations[I]) ? $ : 0, D), J(n.violations);\n    if (p(n.wait)) n.waitDuration = re(null != (z = n.wait[I]) ? z : 0, D), J(n.wait);\n  }\n}\n\nasync function te(e) {\n  const t = Q.WGS84;\n  return await B(e.spatialReference, t), I(e, t);\n}\n\nfunction re(e, t) {\n  switch (t) {\n    case \"seconds\":\n      return e / 60;\n\n    case \"hours\":\n      return 60 * e;\n\n    case \"days\":\n      return 60 * e * 24;\n\n    default:\n      return e;\n  }\n}\n\nfunction oe(e, t) {\n  return \"decimal-degrees\" === t || \"points\" === t || \"unknown\" === t ? e : d(e, t, \"meters\");\n}\n\nconst ie = s.ofType(F),\n      se = s.ofType(k),\n      ne = s.ofType(U),\n      le = s.ofType(E),\n      ae = s.ofType(q),\n      pe = s.ofType(K),\n      ue = a.getLogger(\"esri.layers.RouteLayer\");\nlet me = class extends O(_(L(D(y(l(j)))))) {\n  constructor() {\n    super(...arguments), this._featureCollection = null, this._type = \"Feature Collection\", this.defaultSymbols = new T(), this.directionLines = null, this.directionPoints = null, this.featureCollectionType = \"route\", this.legendEnabled = !1, this.maxScale = 0, this.minScale = 0, this.pointBarriers = new ne(), this.polygonBarriers = new le(), this.polylineBarriers = new ae(), this.routeInfo = null, this.spatialReference = Q.WGS84, this.stops = new pe(), this.type = \"route\", this.handles.add(c(() => this.stops.toArray(), () => {\n      u(this.routeInfo) && this._setStopSymbol(this.stops);\n    }, {\n      sync: !0\n    }));\n  }\n\n  writeFeatureCollectionWebmap(e, t, r, o) {\n    const i = [this._writePolygonBarriers(), this._writePolylineBarriers(), this._writePointBarriers(), this._writeRouteInfo(), this._writeDirectionLines(), this._writeDirectionPoints(), this._writeStops()].filter(e => !!e),\n          s = i.map((e, t) => t),\n          n = \"web-map\" === o.origin ? \"featureCollection.layers\" : \"layers\";\n    f(n, i, t), t.opacity = this.opacity, t.visibility = this.visible, t.visibleLayers = s;\n  }\n\n  readDirectionLines(e, t) {\n    return this._getNetworkFeatures(t, \"DirectionLines\", e => F.fromPortalJSON(e));\n  }\n\n  readDirectionPoints(e, t) {\n    return this._getNetworkFeatures(t, \"DirectionPoints\", e => k.fromPortalJSON(e));\n  }\n\n  get fullExtent() {\n    if (p(this.routeInfo) && p(this.routeInfo.geometry)) return this.routeInfo.geometry.extent;\n\n    if (this.stops.length > 1) {\n      const {\n        spatialReference: e\n      } = this.stops[0],\n            t = new Y({\n        spatialReference: e\n      }),\n            r = this.stops.toArray().map(e => e.geometry);\n\n      for (const o of r) p(o) && t.addPoint(o);\n\n      return t.extent;\n    }\n\n    return new P({\n      xmin: -180,\n      ymin: -90,\n      xmax: 180,\n      ymax: 90,\n      spatialReference: Q.WGS84\n    });\n  }\n\n  readMaxScale(e, t) {\n    var r;\n    const o = ($(t) ? t.layers : t.featureCollection.layers).find(e => p(e.layerDefinition.maxScale));\n    return null != (r = null == o ? void 0 : o.layerDefinition.maxScale) ? r : 0;\n  }\n\n  readMinScale(e, t) {\n    var r;\n    const o = ($(t) ? t.layers : t.featureCollection.layers).find(e => p(e.layerDefinition.minScale));\n    return null != (r = null == o ? void 0 : o.layerDefinition.minScale) ? r : 0;\n  }\n\n  readPointBarriers(e, t) {\n    return this._getNetworkFeatures(t, \"Barriers\", e => U.fromPortalJSON(e));\n  }\n\n  readPolygonBarriers(e, t) {\n    return this._getNetworkFeatures(t, \"PolygonBarriers\", e => E.fromPortalJSON(e));\n  }\n\n  readPolylineBarriers(e, t) {\n    return this._getNetworkFeatures(t, \"PolylineBarriers\", e => q.fromPortalJSON(e));\n  }\n\n  readRouteInfo(e, t) {\n    const r = this._getNetworkFeatures(t, \"RouteInfo\", e => W.fromPortalJSON(e));\n\n    return r.length > 0 ? r.getItemAt(0) : null;\n  }\n\n  readSpatialReference(e, t) {\n    var r, o;\n    const i = $(t) ? t.layers : t.featureCollection.layers;\n    if (!i.length) return Q.WGS84;\n    const {\n      layerDefinition: s\n    } = i[0],\n          n = null != (r = null != (o = s.spatialReference) ? o : s.extent.spatialReference) ? r : N;\n    return Q.fromJSON(n);\n  }\n\n  readStops(e, t) {\n    return this._getNetworkFeatures(t, \"Stops\", e => K.fromPortalJSON(e), e => this._setStopSymbol(e));\n  }\n\n  get title() {\n    return p(this.routeInfo) && p(this.routeInfo.name) ? this.routeInfo.name : \"Route\";\n  }\n\n  set title(e) {\n    e ? this._override(\"title\", e) : this._clearOverride(\"title\");\n  }\n\n  get url() {\n    return t.routeServiceUrl;\n  }\n\n  set url(e) {\n    null != e ? this._set(\"url\", C(e, ue)) : this._set(\"url\", t.routeServiceUrl);\n  }\n\n  load(e) {\n    return this.addResolvingPromise(this.loadFromPortal({\n      supportedTypes: [\"Feature Collection\"]\n    }, e)), Promise.resolve(this);\n  }\n\n  removeAll() {\n    p(this.directionLines) && (this.directionLines.removeAll(), this._set(\"directionLines\", null)), p(this.directionPoints) && (this.directionPoints.removeAll(), this._set(\"directionPoints\", null)), p(this.routeInfo) && this._set(\"routeInfo\", null), this.pointBarriers.removeAll(), this.polygonBarriers.removeAll(), this.polylineBarriers.removeAll(), this.stops.removeAll();\n  }\n\n  async save() {\n    await this.load();\n    const {\n      fullExtent: e,\n      portalItem: t\n    } = this;\n    if (!t) throw new n(\"routelayer:portal-item-not-set\", \"save() requires to the layer to have a portal item\");\n    if (!t.id) throw new n(\"routelayer:portal-item-not-saved\", \"Please use saveAs() first to save the routelayer\");\n    if (\"Feature Collection\" !== t.type) throw new n(\"routelayer:portal-item-wrong-type\", 'Portal item needs to have type \"Feature Collection\"');\n    if (u(this.routeInfo)) throw new n(\"routelayer:route-unsolved\", \"save() requires a solved route\");\n    const {\n      portal: r\n    } = t;\n    if (await r._signIn(), r.user || (await t.reload()), r.user.username !== t.owner) throw new n(\"routelayer:not-portal-item-owner\", \"You can only overwrite your portal items\");\n    const {\n      itemUrl: o\n    } = t,\n          i = {\n      messages: [],\n      origin: \"portal-item\",\n      portal: r,\n      url: o && h(o),\n      writtenProperties: []\n    },\n          s = this.write(null, i);\n    return t.extent = await te(e), t.title = this.title, await t.update({\n      data: s\n    }), t;\n  }\n\n  async saveAs(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (await this.load(), u(this.routeInfo)) throw new n(\"routelayer:route-unsolved\", \"saveAs() requires a solved route\");\n    const r = J.from(e).clone();\n    null != r.extent || (r.extent = await te(this.fullExtent)), r.id = null, null != r.portal || (r.portal = R.getDefault()), null != r.title || (r.title = this.title), r.type = \"Feature Collection\", r.typeKeywords = [\"Data\", \"Feature Collection\", \"Multilayer\", \"Route Layer\"];\n    const {\n      portal: o\n    } = r,\n          i = {\n      messages: [],\n      origin: \"portal-item\",\n      portal: o,\n      url: null,\n      writtenProperties: []\n    };\n    await o._signIn();\n    const s = null == t ? void 0 : t.folder,\n          l = this.write(null, i);\n    return await o.user.addItem({\n      item: r,\n      folder: s,\n      data: l\n    }), this.portalItem = r, b(i), i.portalItem = r, r;\n  }\n\n  async solve(e, t) {\n    var r, o, i, l, a, y;\n    const f = null != (r = null == e ? void 0 : e.stops) ? r : this.stops,\n          c = null != (o = null == e ? void 0 : e.pointBarriers) ? o : Z(this.pointBarriers),\n          d = null != (i = null == e ? void 0 : e.polylineBarriers) ? i : Z(this.polylineBarriers),\n          h = null != (l = null == e ? void 0 : e.polygonBarriers) ? l : Z(this.polygonBarriers);\n    if (u(f)) throw new n(\"routelayer:undefined-stops\", \"the route layer must have stops defined in the route parameters.\");\n    if ((z(f) || X(f)) && f.features.length < 2 || s.isCollection(f) && f.length < 2) throw new n(\"routelayer:insufficent-stops\", \"the route layer must have two or more stops to solve a route.\");\n    const S = await A(this.url, null == e ? void 0 : e.apiKey, t),\n          {\n      defaultTravelMode: g,\n      supportedTravelModes: w\n    } = S,\n          v = w.find(e => e.id === g),\n          b = null != (a = null == e ? void 0 : e.travelMode) ? a : v,\n          P = null != (y = null == e ? void 0 : e.accumulateAttributes) ? y : [];\n    p(b) && P.push(b.distanceAttributeName);\n    const B = {\n      startTime: new Date()\n    },\n          I = {\n      accumulateAttributes: P,\n      directionsOutputType: \"featuresets\",\n      ignoreInvalidLocations: !0,\n      pointBarriers: c,\n      polylineBarriers: d,\n      polygonBarriers: h,\n      preserveFirstStop: !0,\n      preserveLastStop: !0,\n      returnBarriers: !!c,\n      returnDirections: !0,\n      returnPolygonBarriers: !!h,\n      returnPolylineBarriers: !!d,\n      returnRoutes: !0,\n      returnStops: !0,\n      stops: f\n    },\n          N = e ? V.from(e) : new V();\n\n    for (const s in B) null == N[s] && (N[s] = B[s]);\n\n    N.set(I);\n\n    const j = await x(this.url, N, t),\n          O = this._toRouteLayerSolution(j);\n\n    return this._isOverridden(\"title\") || (this.title = m(O.routeInfo.name, \"Route\")), ee(O, S, N), O;\n  }\n\n  update(e) {\n    const {\n      stops: t,\n      directionLines: r,\n      directionPoints: o,\n      pointBarriers: i,\n      polylineBarriers: s,\n      polygonBarriers: n,\n      routeInfo: l\n    } = e;\n    this.set({\n      stops: t,\n      pointBarriers: i,\n      polylineBarriers: s,\n      polygonBarriers: n\n    }), this._set(\"directionLines\", r), this._set(\"directionPoints\", o), this._set(\"routeInfo\", l);\n  }\n\n  _getLayerDefinition() {\n    return {\n      capabilities: \"Query,Update,Editing\",\n      extent: this.fullExtent.toJSON(),\n      hasM: !1,\n      hasZ: !1,\n      maxScale: this.maxScale,\n      minScale: this.minScale,\n      objectIdField: \"__OBJECTID\",\n      spatialReference: this.spatialReference.toJSON(),\n      type: \"Feature Layer\",\n      typeIdField: \"\"\n    };\n  }\n\n  _getNetworkFeatures(e, t, n, l) {\n    const a = ($(e) ? e.layers : e.featureCollection.layers).find(e => e.layerDefinition.name === t);\n    if (u(a)) return new s();\n    const {\n      layerDefinition: p,\n      popupInfo: m,\n      featureSet: y\n    } = a,\n          f = p.drawingInfo.renderer,\n          {\n      features: c\n    } = y,\n          d = f && i(f),\n          h = c.map(e => {\n      var i;\n      const s = n(e),\n            {\n        attributes: l\n      } = e,\n            a = new r({\n        attributes: l\n      });\n      return null != s.symbol || (s.symbol = null != (i = null == d ? void 0 : d.getSymbol(a)) ? i : this._getNetworkSymbol(t)), null != s.popupTemplate || (s.popupTemplate = m && o.fromJSON(m)), s;\n    });\n    return l && h.some(e => !e.symbol) && l(h), new s(h);\n  }\n\n  _getNetworkSymbol(e) {\n    switch (e) {\n      case \"Barriers\":\n        return this.defaultSymbols.pointBarriers;\n\n      case \"DirectionPoints\":\n        return this.defaultSymbols.directionPoints;\n\n      case \"DirectionLines\":\n        return this.defaultSymbols.directionLines;\n\n      case \"PolylineBarriers\":\n        return this.defaultSymbols.polylineBarriers;\n\n      case \"PolygonBarriers\":\n        return this.defaultSymbols.polygonBarriers;\n\n      case \"RouteInfo\":\n        return this.defaultSymbols.routeInfo;\n\n      case \"Stops\":\n        return null;\n    }\n  }\n\n  _setStopSymbol(e) {\n    if (!e || 0 === e.length) return;\n    if (u(this.routeInfo) || 1 === e.length) return void e.forEach((t, r) => {\n      switch (r) {\n        case 0:\n          t.symbol = this.defaultSymbols.firstStop;\n          break;\n\n        case e.length - 1:\n          t.symbol = this.defaultSymbols.lastStop;\n          break;\n\n        default:\n          t.symbol = this.defaultSymbols.middleStop;\n      }\n    });\n    const t = e.map(e => e.sequence).filter(e => p(e)),\n          r = Math.min(...t),\n          o = Math.max(...t);\n\n    for (const i of e) i.sequence !== r ? i.sequence !== o ? \"ok\" === i.status || \"not-located-on-closest\" === i.status ? \"waypoint\" !== i.locationType ? \"break\" !== i.locationType ? i.symbol = this.defaultSymbols.middleStop : i.symbol = this.defaultSymbols.breakStop : i.symbol = this.defaultSymbols.waypointStop : i.symbol = this.defaultSymbols.invalidStop : i.symbol = this.defaultSymbols.lastStop : i.symbol = this.defaultSymbols.firstStop;\n  }\n\n  _toRouteLayerSolution(e) {\n    var t, r, o, i, s;\n    const n = e.routeResults[0].stops.map(e => K.fromJSON(e.toJSON()));\n\n    this._setStopSymbol(n);\n\n    const l = new pe(n),\n          a = new le(null == (t = e.polygonBarriers) ? void 0 : t.map(e => {\n      const t = E.fromJSON(e.toJSON());\n      return t.symbol = this.defaultSymbols.polygonBarriers, t;\n    })),\n          p = new ae(null == (r = e.polylineBarriers) ? void 0 : r.map(e => {\n      const t = q.fromJSON(e.toJSON());\n      return t.symbol = this.defaultSymbols.polylineBarriers, t;\n    })),\n          u = new ne(null == (o = e.pointBarriers) ? void 0 : o.map(e => {\n      const t = U.fromJSON(e.toJSON());\n      return t.symbol = this.defaultSymbols.pointBarriers, t;\n    })),\n          m = W.fromJSON(e.routeResults[0].route.toJSON());\n    m.symbol = this.defaultSymbols.routeInfo;\n    const y = new se(null == (i = e.routeResults[0].directionPoints) ? void 0 : i.features.map(e => {\n      const t = k.fromJSON(e.toJSON());\n      return t.symbol = this.defaultSymbols.directionPoints, t;\n    }));\n    return {\n      directionLines: new ie(null == (s = e.routeResults[0].directionLines) ? void 0 : s.features.map(e => {\n        const t = F.fromJSON(e.toJSON());\n        return t.symbol = this.defaultSymbols.directionLines, t;\n      })),\n      directionPoints: y,\n      pointBarriers: u,\n      polygonBarriers: a,\n      polylineBarriers: p,\n      routeInfo: m,\n      stops: l\n    };\n  }\n\n  _writeDirectionLines() {\n    return u(this.directionLines) || !this.directionLines.length ? null : {\n      featureSet: {\n        features: this.directionLines.toArray().map(e => e.toPortalJSON()),\n        geometryType: \"esriGeometryPolyline\"\n      },\n      layerDefinition: { ...this._getLayerDefinition(),\n        drawingInfo: {\n          renderer: {\n            type: \"simple\",\n            symbol: this.defaultSymbols.directionLines.toJSON()\n          }\n        },\n        fields: F.fields,\n        geometryType: \"esriGeometryPolyline\",\n        name: \"DirectionLines\",\n        title: \"Direction Lines\"\n      },\n      popupInfo: F.popupInfo\n    };\n  }\n\n  _writeDirectionPoints() {\n    return u(this.directionPoints) || !this.directionPoints.length ? null : {\n      featureSet: {\n        features: this.directionPoints.toArray().map(e => e.toPortalJSON()),\n        geometryType: \"esriGeometryPoint\"\n      },\n      layerDefinition: { ...this._getLayerDefinition(),\n        drawingInfo: {\n          renderer: {\n            type: \"simple\",\n            symbol: this.defaultSymbols.directionPoints.toJSON()\n          }\n        },\n        fields: k.fields,\n        geometryType: \"esriGeometryPoint\",\n        name: \"DirectionPoints\",\n        title: \"Direction Points\"\n      },\n      popupInfo: k.popupInfo\n    };\n  }\n\n  _writePointBarriers() {\n    return u(this.pointBarriers) || !this.pointBarriers.length ? null : {\n      featureSet: {\n        features: this.pointBarriers.toArray().map(e => e.toPortalJSON()),\n        geometryType: \"esriGeometryPoint\"\n      },\n      layerDefinition: { ...this._getLayerDefinition(),\n        drawingInfo: {\n          renderer: {\n            type: \"simple\",\n            symbol: this.defaultSymbols.pointBarriers.toJSON()\n          }\n        },\n        fields: U.fields,\n        geometryType: \"esriGeometryPoint\",\n        name: \"Barrier\",\n        title: \"Point Barrier\"\n      },\n      popupInfo: U.popupInfo\n    };\n  }\n\n  _writePolygonBarriers() {\n    return u(this.polygonBarriers) || !this.polygonBarriers.length ? null : {\n      featureSet: {\n        features: this.polygonBarriers.toArray().map(e => e.toPortalJSON()),\n        geometryType: \"esriGeometryPolygon\"\n      },\n      layerDefinition: { ...this._getLayerDefinition(),\n        drawingInfo: {\n          renderer: {\n            type: \"simple\",\n            symbol: this.defaultSymbols.polygonBarriers.toJSON()\n          }\n        },\n        fields: E.fields,\n        geometryType: \"esriGeometryPolygon\",\n        name: \"PolygonBarriers\",\n        title: \"Polygon Barriers\"\n      },\n      popupInfo: E.popupInfo\n    };\n  }\n\n  _writePolylineBarriers() {\n    return u(this.polylineBarriers) || !this.polylineBarriers.length ? null : {\n      featureSet: {\n        features: this.polylineBarriers.toArray().map(e => e.toPortalJSON()),\n        geometryType: \"esriGeometryPolyline\"\n      },\n      layerDefinition: { ...this._getLayerDefinition(),\n        drawingInfo: {\n          renderer: {\n            type: \"simple\",\n            symbol: this.defaultSymbols.polylineBarriers.toJSON()\n          }\n        },\n        fields: q.fields,\n        geometryType: \"esriGeometryPolyline\",\n        name: \"PolylineBarriers\",\n        title: \"Line Barriers\"\n      },\n      popupInfo: q.popupInfo\n    };\n  }\n\n  _writeRouteInfo() {\n    return u(this.routeInfo) ? null : {\n      featureSet: {\n        features: [this.routeInfo.toPortalJSON()],\n        geometryType: \"esriGeometryPolyline\"\n      },\n      layerDefinition: { ...this._getLayerDefinition(),\n        drawingInfo: {\n          renderer: {\n            type: \"simple\",\n            symbol: this.defaultSymbols.routeInfo.toJSON()\n          }\n        },\n        fields: W.fields,\n        geometryType: \"esriGeometryPolyline\",\n        name: \"RouteInfo\",\n        title: \"Route Details\"\n      },\n      popupInfo: W.popupInfo\n    };\n  }\n\n  _writeStops() {\n    return u(this.stops) || !this.stops.length ? null : {\n      featureSet: {\n        features: this.stops.toArray().map(e => e.toPortalJSON()),\n        geometryType: \"esriGeometryPoint\"\n      },\n      layerDefinition: { ...this._getLayerDefinition(),\n        drawingInfo: {\n          renderer: {\n            type: \"uniqueValue\",\n            field1: \"Sequence\",\n            defaultSymbol: this.defaultSymbols.middleStop.toJSON(),\n            uniqueValueInfos: [{\n              value: \"1\",\n              symbol: this.defaultSymbols.firstStop.toJSON(),\n              label: \"First Stop\"\n            }, {\n              value: `${this.stops.length}`,\n              symbol: this.defaultSymbols.lastStop.toJSON(),\n              label: \"Last Stop\"\n            }]\n          }\n        },\n        fields: K.fields,\n        geometryType: \"esriGeometryPoint\",\n        name: \"Stops\",\n        title: \"Stops\"\n      },\n      popupInfo: K.popupInfo\n    };\n  }\n\n};\ne([S({\n  readOnly: !0,\n  json: {\n    read: !1,\n    origins: {\n      \"portal-item\": {\n        write: {\n          allowNull: !0,\n          ignoreOrigin: !0\n        }\n      },\n      \"web-map\": {\n        write: {\n          overridePolicy() {\n            return {\n              allowNull: !0,\n              ignoreOrigin: null == this.portalItem\n            };\n          }\n\n        }\n      }\n    }\n  }\n})], me.prototype, \"_featureCollection\", void 0), e([v([\"web-map\", \"portal-item\"], \"_featureCollection\")], me.prototype, \"writeFeatureCollectionWebmap\", null), e([S({\n  readOnly: !0,\n  json: {\n    read: !1,\n    origins: {\n      \"web-map\": {\n        write: {\n          target: \"type\",\n\n          overridePolicy() {\n            return {\n              ignoreOrigin: null != this.portalItem\n            };\n          }\n\n        }\n      }\n    }\n  }\n})], me.prototype, \"_type\", void 0), e([S({\n  nonNullable: !0,\n  type: T\n})], me.prototype, \"defaultSymbols\", void 0), e([S({\n  readOnly: !0\n})], me.prototype, \"directionLines\", void 0), e([g([\"web-map\", \"portal-item\"], \"directionLines\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readDirectionLines\", null), e([S({\n  readOnly: !0\n})], me.prototype, \"directionPoints\", void 0), e([g([\"web-map\", \"portal-item\"], \"directionPoints\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readDirectionPoints\", null), e([S({\n  readOnly: !0,\n  json: {\n    read: !1,\n    origins: {\n      \"web-map\": {\n        write: {\n          ignoreOrigin: !0\n        }\n      }\n    }\n  }\n})], me.prototype, \"featureCollectionType\", void 0), e([S({\n  readOnly: !0\n})], me.prototype, \"fullExtent\", null), e([S({\n  json: {\n    origins: {\n      \"web-map\": {\n        name: \"featureCollection.showLegend\"\n      }\n    },\n    write: !0\n  }\n})], me.prototype, \"legendEnabled\", void 0), e([S({\n  type: [\"show\", \"hide\"]\n})], me.prototype, \"listMode\", void 0), e([S({\n  type: Number,\n  nonNullable: !0,\n  json: {\n    write: !1\n  }\n})], me.prototype, \"maxScale\", void 0), e([g([\"web-map\", \"portal-item\"], \"maxScale\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readMaxScale\", null), e([S({\n  type: Number,\n  nonNullable: !0,\n  json: {\n    write: !1\n  }\n})], me.prototype, \"minScale\", void 0), e([g([\"web-map\", \"portal-item\"], \"minScale\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readMinScale\", null), e([S({\n  type: [\"ArcGISFeatureLayer\"],\n  value: \"ArcGISFeatureLayer\"\n})], me.prototype, \"operationalLayerType\", void 0), e([S({\n  nonNullable: !0,\n  type: s.ofType(U)\n})], me.prototype, \"pointBarriers\", void 0), e([g([\"web-map\", \"portal-item\"], \"pointBarriers\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readPointBarriers\", null), e([S({\n  nonNullable: !0,\n  type: s.ofType(E)\n})], me.prototype, \"polygonBarriers\", void 0), e([g([\"web-map\", \"portal-item\"], \"polygonBarriers\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readPolygonBarriers\", null), e([S({\n  nonNullable: !0,\n  type: s.ofType(q)\n})], me.prototype, \"polylineBarriers\", void 0), e([g([\"web-map\", \"portal-item\"], \"polylineBarriers\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readPolylineBarriers\", null), e([S({\n  readOnly: !0\n})], me.prototype, \"routeInfo\", void 0), e([g([\"web-map\", \"portal-item\"], \"routeInfo\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readRouteInfo\", null), e([S({\n  type: Q\n})], me.prototype, \"spatialReference\", void 0), e([g([\"web-map\", \"portal-item\"], \"spatialReference\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readSpatialReference\", null), e([S({\n  nonNullable: !0,\n  type: s.ofType(K)\n})], me.prototype, \"stops\", void 0), e([g([\"web-map\", \"portal-item\"], \"stops\", [\"layers\", \"featureCollection.layers\"])], me.prototype, \"readStops\", null), e([S()], me.prototype, \"title\", null), e([S({\n  readOnly: !0,\n  json: {\n    read: !1\n  }\n})], me.prototype, \"type\", void 0), e([S()], me.prototype, \"url\", null), me = e([w(\"esri.layers.RouteLayer\")], me);\nconst ye = me;\nexport { ye as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/RouteLayer.js"],"names":["_","e","t","r","o","read","i","s","n","HandleOwnerMixin","l","a","isSome","p","isNone","u","unwrapOrValue","m","MultiOriginJSONMixin","y","setDeepValue","f","watch","c","convertUnit","d","urlToObject","h","property","S","reader","g","subclass","w","writer","v","updateOrigins","b","P","initializeProjection","B","project","I","WGS84","N","j","BlendLayer","O","OperationalLayer","L","PortalLayer","D","ScaleRangeLayer","sanitizeUrl","C","T","R","J","fetchServiceDescription","A","solve","x","F","k","directionsTimeUnitJsonMap","G","directionsLengthUnitJsonMap","M","U","E","q","W","V","H","K","Q","Y","Z","length","$","z","declaredClass","X","ee","impedance","networkDataset","supportedTravelModes","defaultTravelMode","networkAttributes","filter","usageType","find","id","travelMode","ue","warn","timeAttributeName","distanceAttributeName","name","impedanceAttributeName","impedanceAttribute","fromJSON","units","directionsLanguage","accumulateAttributes","accumulateAttributeNames","Set","includes","map","has","pointBarriers","costs","addedCost","polygonBarriers","scaleFactor","polylineBarriers","routeInfo","findBestSequence","preserveFirstStop","preserveLastStop","startTimeIsUTC","timeWindowsAreUTC","analysisSettings","totalDuration","re","totalCosts","totalDistance","oe","totalLateDuration","totalViolations","totalWaitDuration","totalWait","stops","serviceCosts","serviceDuration","serviceDistance","cumulativeCosts","cumulativeDuration","cumulativeDistance","violations","lateDuration","wait","waitDuration","te","spatialReference","ie","ofType","se","ne","le","ae","pe","getLogger","me","constructor","_featureCollection","_type","defaultSymbols","directionLines","directionPoints","featureCollectionType","legendEnabled","maxScale","minScale","type","handles","add","toArray","_setStopSymbol","sync","writeFeatureCollectionWebmap","_writePolygonBarriers","_writePolylineBarriers","_writePointBarriers","_writeRouteInfo","_writeDirectionLines","_writeDirectionPoints","_writeStops","origin","opacity","visibility","visible","visibleLayers","readDirectionLines","_getNetworkFeatures","fromPortalJSON","readDirectionPoints","fullExtent","geometry","extent","addPoint","xmin","ymin","xmax","ymax","readMaxScale","layers","featureCollection","layerDefinition","readMinScale","readPointBarriers","readPolygonBarriers","readPolylineBarriers","readRouteInfo","getItemAt","readSpatialReference","readStops","title","_override","_clearOverride","url","routeServiceUrl","_set","load","addResolvingPromise","loadFromPortal","supportedTypes","Promise","resolve","removeAll","save","portalItem","portal","_signIn","user","reload","username","owner","itemUrl","messages","writtenProperties","write","update","data","saveAs","from","clone","getDefault","typeKeywords","folder","addItem","item","features","isCollection","apiKey","push","startTime","Date","directionsOutputType","ignoreInvalidLocations","returnBarriers","returnDirections","returnPolygonBarriers","returnPolylineBarriers","returnRoutes","returnStops","set","_toRouteLayerSolution","_isOverridden","_getLayerDefinition","capabilities","toJSON","hasM","hasZ","objectIdField","typeIdField","popupInfo","featureSet","drawingInfo","renderer","attributes","symbol","getSymbol","_getNetworkSymbol","popupTemplate","some","forEach","firstStop","lastStop","middleStop","sequence","Math","min","max","status","locationType","breakStop","waypointStop","invalidStop","routeResults","route","toPortalJSON","geometryType","fields","field1","defaultSymbol","uniqueValueInfos","value","label","readOnly","json","origins","allowNull","ignoreOrigin","overridePolicy","prototype","target","nonNullable","Number","ye","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import\"../geometry.js\";import r from\"../Graphic.js\";import o from\"../PopupTemplate.js\";import\"../renderers/ClassBreaksRenderer.js\";import\"../renderers/DictionaryRenderer.js\";import\"../renderers/DotDensityRenderer.js\";import\"../renderers/HeatmapRenderer.js\";import\"../renderers/Renderer.js\";import\"../renderers/SimpleRenderer.js\";import\"../renderers/UniqueValueRenderer.js\";import{read as i}from\"../renderers/support/jsonUtils.js\";import s from\"../core/Collection.js\";import n from\"../core/Error.js\";import{HandleOwnerMixin as l}from\"../core/HandleOwner.js\";import a from\"../core/Logger.js\";import{isSome as p,isNone as u,unwrapOrValue as m}from\"../core/maybe.js\";import{MultiOriginJSONMixin as y}from\"../core/MultiOriginJSONSupport.js\";import{setDeepValue as f}from\"../core/object.js\";import{watch as c}from\"../core/reactiveUtils.js\";import{convertUnit as d}from\"../core/unitUtils.js\";import{urlToObject as h}from\"../core/urlUtils.js\";import{property as S}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{reader as g}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as w}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as v}from\"../core/accessorSupport/decorators/writer.js\";import{updateOrigins as b}from\"../core/accessorSupport/originUtils.js\";import P from\"../geometry/Extent.js\";import{initializeProjection as B,project as I}from\"../geometry/projection.js\";import{WGS84 as N}from\"../geometry/support/spatialReferenceUtils.js\";import j from\"./Layer.js\";import{BlendLayer as O}from\"./mixins/BlendLayer.js\";import{OperationalLayer as L}from\"./mixins/OperationalLayer.js\";import{PortalLayer as D}from\"./mixins/PortalLayer.js\";import{ScaleRangeLayer as _}from\"./mixins/ScaleRangeLayer.js\";import{sanitizeUrl as C}from\"./support/arcgisLayerUrl.js\";import T from\"./support/DefaultSymbols.js\";import R from\"../portal/Portal.js\";import J from\"../portal/PortalItem.js\";import{fetchServiceDescription as A}from\"../rest/networkService.js\";import{solve as x}from\"../rest/route.js\";import F from\"../rest/support/DirectionLine.js\";import k from\"../rest/support/DirectionPoint.js\";import{directionsTimeUnitJsonMap as G,directionsLengthUnitJsonMap as M}from\"../rest/support/networkEnums.js\";import U from\"../rest/support/PointBarrier.js\";import E from\"../rest/support/PolygonBarrier.js\";import q from\"../rest/support/PolylineBarrier.js\";import W from\"../rest/support/RouteInfo.js\";import V from\"../rest/support/RouteParameters.js\";import H from\"../rest/support/RouteSettings.js\";import K from\"../rest/support/Stop.js\";import Q from\"../geometry/SpatialReference.js\";import Y from\"../geometry/Multipoint.js\";function Z(e){return e.length?e:null}function $(e){return\"layers\"in e}function z(e){return\"esri.rest.support.FeatureSet\"===e.declaredClass}function X(e){return\"esri.rest.support.NetworkFeatureSet\"===e.declaredClass}function ee(e,t,r){var o,i,s,l,a,m,y,f,c,d,h;const{impedance:S,networkDataset:g,supportedTravelModes:w,defaultTravelMode:v}=t,b=g.networkAttributes.filter((e=>\"esriNAUTCost\"===e.usageType)),P=w.find((e=>e.id===v)),B=null!=(o=r.travelMode)?o:P;if(u(B))return void ue.warn(\"route-layer:missing-travel-mode\",\"The routing service must have a default travel mode or one must be specified in the route parameter.\");const{timeAttributeName:I,distanceAttributeName:N}=B,j=b.find((e=>e.name===I)),O=b.find((e=>e.name===N)),L=null!=(i=null!=(s=null==(l=r.travelMode)?void 0:l.impedanceAttributeName)?s:r.impedanceAttribute)?i:S,D=G.fromJSON(null==j?void 0:j.units),_=M.fromJSON(null==O?void 0:O.units);if(!D||!_)throw new n(\"routelayer:unknown-impedance-units\",\"the units of either the distance or time impedance are unknown\");const C=null!=(a=r.directionsLanguage)?a:t.directionsLanguage,T=null!=(m=null!=(y=r.accumulateAttributes)?y:t.accumulateAttributeNames)?m:[],R=new Set(b.filter((({name:e})=>e===I||e===N||e===L||T.includes(e))).map((({name:e})=>e))),J=e=>{for(const t in e)R.has(t)||delete e[t]};for(const n of e.pointBarriers){var A;if(p(n.costs))n.addedCost=null!=(A=n.costs[L])?A:0,J(n.costs)}for(const n of e.polygonBarriers){var x;if(p(n.costs))n.scaleFactor=null!=(x=n.costs[L])?x:1,J(n.costs)}for(const n of e.polylineBarriers){var F;if(p(n.costs))n.scaleFactor=null!=(F=n.costs[L])?F:1,J(n.costs)}const{routeInfo:k}=e,{findBestSequence:U,preserveFirstStop:E,preserveLastStop:q,startTimeIsUTC:W,timeWindowsAreUTC:V}=r;k.analysisSettings=new H({accumulateAttributes:T,directionsLanguage:C,findBestSequence:U,preserveFirstStop:E,preserveLastStop:q,startTimeIsUTC:W,timeWindowsAreUTC:V,travelMode:B}),k.totalDuration=re(null!=(f=k.totalCosts[I])?f:0,D),k.totalDistance=oe(null!=(c=k.totalCosts[N])?c:0,_),k.totalLateDuration=re(null!=(d=k.totalViolations[I])?d:0,D),k.totalWaitDuration=re(null!=(h=k.totalWait[I])?h:0,D),p(k.totalCosts)&&J(k.totalCosts),p(k.totalViolations)&&J(k.totalViolations),p(k.totalWait)&&J(k.totalWait);for(const n of e.stops){var K,Q,Y,Z,$,z;if(p(n.serviceCosts))n.serviceDuration=re(null!=(K=n.serviceCosts[I])?K:0,D),n.serviceDistance=oe(null!=(Q=n.serviceCosts[N])?Q:0,_),J(n.serviceCosts);if(p(n.cumulativeCosts))n.cumulativeDuration=re(null!=(Y=n.cumulativeCosts[I])?Y:0,D),n.cumulativeDistance=oe(null!=(Z=n.cumulativeCosts[N])?Z:0,_),J(n.cumulativeCosts);if(p(n.violations))n.lateDuration=re(null!=($=n.violations[I])?$:0,D),J(n.violations);if(p(n.wait))n.waitDuration=re(null!=(z=n.wait[I])?z:0,D),J(n.wait)}}async function te(e){const t=Q.WGS84;return await B(e.spatialReference,t),I(e,t)}function re(e,t){switch(t){case\"seconds\":return e/60;case\"hours\":return 60*e;case\"days\":return 60*e*24;default:return e}}function oe(e,t){return\"decimal-degrees\"===t||\"points\"===t||\"unknown\"===t?e:d(e,t,\"meters\")}const ie=s.ofType(F),se=s.ofType(k),ne=s.ofType(U),le=s.ofType(E),ae=s.ofType(q),pe=s.ofType(K),ue=a.getLogger(\"esri.layers.RouteLayer\");let me=class extends(O(_(L(D(y(l(j))))))){constructor(...e){super(...e),this._featureCollection=null,this._type=\"Feature Collection\",this.defaultSymbols=new T,this.directionLines=null,this.directionPoints=null,this.featureCollectionType=\"route\",this.legendEnabled=!1,this.maxScale=0,this.minScale=0,this.pointBarriers=new ne,this.polygonBarriers=new le,this.polylineBarriers=new ae,this.routeInfo=null,this.spatialReference=Q.WGS84,this.stops=new pe,this.type=\"route\",this.handles.add(c((()=>this.stops.toArray()),(()=>{u(this.routeInfo)&&this._setStopSymbol(this.stops)}),{sync:!0}))}writeFeatureCollectionWebmap(e,t,r,o){const i=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter((e=>!!e)),s=i.map(((e,t)=>t)),n=\"web-map\"===o.origin?\"featureCollection.layers\":\"layers\";f(n,i,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=s}readDirectionLines(e,t){return this._getNetworkFeatures(t,\"DirectionLines\",(e=>F.fromPortalJSON(e)))}readDirectionPoints(e,t){return this._getNetworkFeatures(t,\"DirectionPoints\",(e=>k.fromPortalJSON(e)))}get fullExtent(){if(p(this.routeInfo)&&p(this.routeInfo.geometry))return this.routeInfo.geometry.extent;if(this.stops.length>1){const{spatialReference:e}=this.stops[0],t=new Y({spatialReference:e}),r=this.stops.toArray().map((e=>e.geometry));for(const o of r)p(o)&&t.addPoint(o);return t.extent}return new P({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:Q.WGS84})}readMaxScale(e,t){var r;const o=($(t)?t.layers:t.featureCollection.layers).find((e=>p(e.layerDefinition.maxScale)));return null!=(r=null==o?void 0:o.layerDefinition.maxScale)?r:0}readMinScale(e,t){var r;const o=($(t)?t.layers:t.featureCollection.layers).find((e=>p(e.layerDefinition.minScale)));return null!=(r=null==o?void 0:o.layerDefinition.minScale)?r:0}readPointBarriers(e,t){return this._getNetworkFeatures(t,\"Barriers\",(e=>U.fromPortalJSON(e)))}readPolygonBarriers(e,t){return this._getNetworkFeatures(t,\"PolygonBarriers\",(e=>E.fromPortalJSON(e)))}readPolylineBarriers(e,t){return this._getNetworkFeatures(t,\"PolylineBarriers\",(e=>q.fromPortalJSON(e)))}readRouteInfo(e,t){const r=this._getNetworkFeatures(t,\"RouteInfo\",(e=>W.fromPortalJSON(e)));return r.length>0?r.getItemAt(0):null}readSpatialReference(e,t){var r,o;const i=$(t)?t.layers:t.featureCollection.layers;if(!i.length)return Q.WGS84;const{layerDefinition:s}=i[0],n=null!=(r=null!=(o=s.spatialReference)?o:s.extent.spatialReference)?r:N;return Q.fromJSON(n)}readStops(e,t){return this._getNetworkFeatures(t,\"Stops\",(e=>K.fromPortalJSON(e)),(e=>this._setStopSymbol(e)))}get title(){return p(this.routeInfo)&&p(this.routeInfo.name)?this.routeInfo.name:\"Route\"}set title(e){e?this._override(\"title\",e):this._clearOverride(\"title\")}get url(){return t.routeServiceUrl}set url(e){null!=e?this._set(\"url\",C(e,ue)):this._set(\"url\",t.routeServiceUrl)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Feature Collection\"]},e)),Promise.resolve(this)}removeAll(){p(this.directionLines)&&(this.directionLines.removeAll(),this._set(\"directionLines\",null)),p(this.directionPoints)&&(this.directionPoints.removeAll(),this._set(\"directionPoints\",null)),p(this.routeInfo)&&this._set(\"routeInfo\",null),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}async save(){await this.load();const{fullExtent:e,portalItem:t}=this;if(!t)throw new n(\"routelayer:portal-item-not-set\",\"save() requires to the layer to have a portal item\");if(!t.id)throw new n(\"routelayer:portal-item-not-saved\",\"Please use saveAs() first to save the routelayer\");if(\"Feature Collection\"!==t.type)throw new n(\"routelayer:portal-item-wrong-type\",'Portal item needs to have type \"Feature Collection\"');if(u(this.routeInfo))throw new n(\"routelayer:route-unsolved\",\"save() requires a solved route\");const{portal:r}=t;if(await r._signIn(),r.user||await t.reload(),r.user.username!==t.owner)throw new n(\"routelayer:not-portal-item-owner\",\"You can only overwrite your portal items\");const{itemUrl:o}=t,i={messages:[],origin:\"portal-item\",portal:r,url:o&&h(o),writtenProperties:[]},s=this.write(null,i);return t.extent=await te(e),t.title=this.title,await t.update({data:s}),t}async saveAs(e,t={}){if(await this.load(),u(this.routeInfo))throw new n(\"routelayer:route-unsolved\",\"saveAs() requires a solved route\");const r=J.from(e).clone();null!=r.extent||(r.extent=await te(this.fullExtent)),r.id=null,null!=r.portal||(r.portal=R.getDefault()),null!=r.title||(r.title=this.title),r.type=\"Feature Collection\",r.typeKeywords=[\"Data\",\"Feature Collection\",\"Multilayer\",\"Route Layer\"];const{portal:o}=r,i={messages:[],origin:\"portal-item\",portal:o,url:null,writtenProperties:[]};await o._signIn();const s=null==t?void 0:t.folder,l=this.write(null,i);return await o.user.addItem({item:r,folder:s,data:l}),this.portalItem=r,b(i),i.portalItem=r,r}async solve(e,t){var r,o,i,l,a,y;const f=null!=(r=null==e?void 0:e.stops)?r:this.stops,c=null!=(o=null==e?void 0:e.pointBarriers)?o:Z(this.pointBarriers),d=null!=(i=null==e?void 0:e.polylineBarriers)?i:Z(this.polylineBarriers),h=null!=(l=null==e?void 0:e.polygonBarriers)?l:Z(this.polygonBarriers);if(u(f))throw new n(\"routelayer:undefined-stops\",\"the route layer must have stops defined in the route parameters.\");if((z(f)||X(f))&&f.features.length<2||s.isCollection(f)&&f.length<2)throw new n(\"routelayer:insufficent-stops\",\"the route layer must have two or more stops to solve a route.\");const S=await A(this.url,null==e?void 0:e.apiKey,t),{defaultTravelMode:g,supportedTravelModes:w}=S,v=w.find((e=>e.id===g)),b=null!=(a=null==e?void 0:e.travelMode)?a:v,P=null!=(y=null==e?void 0:e.accumulateAttributes)?y:[];p(b)&&P.push(b.distanceAttributeName);const B={startTime:new Date},I={accumulateAttributes:P,directionsOutputType:\"featuresets\",ignoreInvalidLocations:!0,pointBarriers:c,polylineBarriers:d,polygonBarriers:h,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!c,returnDirections:!0,returnPolygonBarriers:!!h,returnPolylineBarriers:!!d,returnRoutes:!0,returnStops:!0,stops:f},N=e?V.from(e):new V;for(const s in B)null==N[s]&&(N[s]=B[s]);N.set(I);const j=await x(this.url,N,t),O=this._toRouteLayerSolution(j);return this._isOverridden(\"title\")||(this.title=m(O.routeInfo.name,\"Route\")),ee(O,S,N),O}update(e){const{stops:t,directionLines:r,directionPoints:o,pointBarriers:i,polylineBarriers:s,polygonBarriers:n,routeInfo:l}=e;this.set({stops:t,pointBarriers:i,polylineBarriers:s,polygonBarriers:n}),this._set(\"directionLines\",r),this._set(\"directionPoints\",o),this._set(\"routeInfo\",l)}_getLayerDefinition(){return{capabilities:\"Query,Update,Editing\",extent:this.fullExtent.toJSON(),hasM:!1,hasZ:!1,maxScale:this.maxScale,minScale:this.minScale,objectIdField:\"__OBJECTID\",spatialReference:this.spatialReference.toJSON(),type:\"Feature Layer\",typeIdField:\"\"}}_getNetworkFeatures(e,t,n,l){const a=($(e)?e.layers:e.featureCollection.layers).find((e=>e.layerDefinition.name===t));if(u(a))return new s;const{layerDefinition:p,popupInfo:m,featureSet:y}=a,f=p.drawingInfo.renderer,{features:c}=y,d=f&&i(f),h=c.map((e=>{var i;const s=n(e),{attributes:l}=e,a=new r({attributes:l});return null!=s.symbol||(s.symbol=null!=(i=null==d?void 0:d.getSymbol(a))?i:this._getNetworkSymbol(t)),null!=s.popupTemplate||(s.popupTemplate=m&&o.fromJSON(m)),s}));return l&&h.some((e=>!e.symbol))&&l(h),new s(h)}_getNetworkSymbol(e){switch(e){case\"Barriers\":return this.defaultSymbols.pointBarriers;case\"DirectionPoints\":return this.defaultSymbols.directionPoints;case\"DirectionLines\":return this.defaultSymbols.directionLines;case\"PolylineBarriers\":return this.defaultSymbols.polylineBarriers;case\"PolygonBarriers\":return this.defaultSymbols.polygonBarriers;case\"RouteInfo\":return this.defaultSymbols.routeInfo;case\"Stops\":return null}}_setStopSymbol(e){if(!e||0===e.length)return;if(u(this.routeInfo)||1===e.length)return void e.forEach(((t,r)=>{switch(r){case 0:t.symbol=this.defaultSymbols.firstStop;break;case e.length-1:t.symbol=this.defaultSymbols.lastStop;break;default:t.symbol=this.defaultSymbols.middleStop}}));const t=e.map((e=>e.sequence)).filter((e=>p(e))),r=Math.min(...t),o=Math.max(...t);for(const i of e)i.sequence!==r?i.sequence!==o?\"ok\"===i.status||\"not-located-on-closest\"===i.status?\"waypoint\"!==i.locationType?\"break\"!==i.locationType?i.symbol=this.defaultSymbols.middleStop:i.symbol=this.defaultSymbols.breakStop:i.symbol=this.defaultSymbols.waypointStop:i.symbol=this.defaultSymbols.invalidStop:i.symbol=this.defaultSymbols.lastStop:i.symbol=this.defaultSymbols.firstStop}_toRouteLayerSolution(e){var t,r,o,i,s;const n=e.routeResults[0].stops.map((e=>K.fromJSON(e.toJSON())));this._setStopSymbol(n);const l=new pe(n),a=new le(null==(t=e.polygonBarriers)?void 0:t.map((e=>{const t=E.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polygonBarriers,t}))),p=new ae(null==(r=e.polylineBarriers)?void 0:r.map((e=>{const t=q.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polylineBarriers,t}))),u=new ne(null==(o=e.pointBarriers)?void 0:o.map((e=>{const t=U.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.pointBarriers,t}))),m=W.fromJSON(e.routeResults[0].route.toJSON());m.symbol=this.defaultSymbols.routeInfo;const y=new se(null==(i=e.routeResults[0].directionPoints)?void 0:i.features.map((e=>{const t=k.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionPoints,t})));return{directionLines:new ie(null==(s=e.routeResults[0].directionLines)?void 0:s.features.map((e=>{const t=F.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionLines,t}))),directionPoints:y,pointBarriers:u,polygonBarriers:a,polylineBarriers:p,routeInfo:m,stops:l}}_writeDirectionLines(){return u(this.directionLines)||!this.directionLines.length?null:{featureSet:{features:this.directionLines.toArray().map((e=>e.toPortalJSON())),geometryType:\"esriGeometryPolyline\"},layerDefinition:{...this._getLayerDefinition(),drawingInfo:{renderer:{type:\"simple\",symbol:this.defaultSymbols.directionLines.toJSON()}},fields:F.fields,geometryType:\"esriGeometryPolyline\",name:\"DirectionLines\",title:\"Direction Lines\"},popupInfo:F.popupInfo}}_writeDirectionPoints(){return u(this.directionPoints)||!this.directionPoints.length?null:{featureSet:{features:this.directionPoints.toArray().map((e=>e.toPortalJSON())),geometryType:\"esriGeometryPoint\"},layerDefinition:{...this._getLayerDefinition(),drawingInfo:{renderer:{type:\"simple\",symbol:this.defaultSymbols.directionPoints.toJSON()}},fields:k.fields,geometryType:\"esriGeometryPoint\",name:\"DirectionPoints\",title:\"Direction Points\"},popupInfo:k.popupInfo}}_writePointBarriers(){return u(this.pointBarriers)||!this.pointBarriers.length?null:{featureSet:{features:this.pointBarriers.toArray().map((e=>e.toPortalJSON())),geometryType:\"esriGeometryPoint\"},layerDefinition:{...this._getLayerDefinition(),drawingInfo:{renderer:{type:\"simple\",symbol:this.defaultSymbols.pointBarriers.toJSON()}},fields:U.fields,geometryType:\"esriGeometryPoint\",name:\"Barrier\",title:\"Point Barrier\"},popupInfo:U.popupInfo}}_writePolygonBarriers(){return u(this.polygonBarriers)||!this.polygonBarriers.length?null:{featureSet:{features:this.polygonBarriers.toArray().map((e=>e.toPortalJSON())),geometryType:\"esriGeometryPolygon\"},layerDefinition:{...this._getLayerDefinition(),drawingInfo:{renderer:{type:\"simple\",symbol:this.defaultSymbols.polygonBarriers.toJSON()}},fields:E.fields,geometryType:\"esriGeometryPolygon\",name:\"PolygonBarriers\",title:\"Polygon Barriers\"},popupInfo:E.popupInfo}}_writePolylineBarriers(){return u(this.polylineBarriers)||!this.polylineBarriers.length?null:{featureSet:{features:this.polylineBarriers.toArray().map((e=>e.toPortalJSON())),geometryType:\"esriGeometryPolyline\"},layerDefinition:{...this._getLayerDefinition(),drawingInfo:{renderer:{type:\"simple\",symbol:this.defaultSymbols.polylineBarriers.toJSON()}},fields:q.fields,geometryType:\"esriGeometryPolyline\",name:\"PolylineBarriers\",title:\"Line Barriers\"},popupInfo:q.popupInfo}}_writeRouteInfo(){return u(this.routeInfo)?null:{featureSet:{features:[this.routeInfo.toPortalJSON()],geometryType:\"esriGeometryPolyline\"},layerDefinition:{...this._getLayerDefinition(),drawingInfo:{renderer:{type:\"simple\",symbol:this.defaultSymbols.routeInfo.toJSON()}},fields:W.fields,geometryType:\"esriGeometryPolyline\",name:\"RouteInfo\",title:\"Route Details\"},popupInfo:W.popupInfo}}_writeStops(){return u(this.stops)||!this.stops.length?null:{featureSet:{features:this.stops.toArray().map((e=>e.toPortalJSON())),geometryType:\"esriGeometryPoint\"},layerDefinition:{...this._getLayerDefinition(),drawingInfo:{renderer:{type:\"uniqueValue\",field1:\"Sequence\",defaultSymbol:this.defaultSymbols.middleStop.toJSON(),uniqueValueInfos:[{value:\"1\",symbol:this.defaultSymbols.firstStop.toJSON(),label:\"First Stop\"},{value:`${this.stops.length}`,symbol:this.defaultSymbols.lastStop.toJSON(),label:\"Last Stop\"}]}},fields:K.fields,geometryType:\"esriGeometryPoint\",name:\"Stops\",title:\"Stops\"},popupInfo:K.popupInfo}}};e([S({readOnly:!0,json:{read:!1,origins:{\"portal-item\":{write:{allowNull:!0,ignoreOrigin:!0}},\"web-map\":{write:{overridePolicy(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],me.prototype,\"_featureCollection\",void 0),e([v([\"web-map\",\"portal-item\"],\"_featureCollection\")],me.prototype,\"writeFeatureCollectionWebmap\",null),e([S({readOnly:!0,json:{read:!1,origins:{\"web-map\":{write:{target:\"type\",overridePolicy(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],me.prototype,\"_type\",void 0),e([S({nonNullable:!0,type:T})],me.prototype,\"defaultSymbols\",void 0),e([S({readOnly:!0})],me.prototype,\"directionLines\",void 0),e([g([\"web-map\",\"portal-item\"],\"directionLines\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readDirectionLines\",null),e([S({readOnly:!0})],me.prototype,\"directionPoints\",void 0),e([g([\"web-map\",\"portal-item\"],\"directionPoints\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readDirectionPoints\",null),e([S({readOnly:!0,json:{read:!1,origins:{\"web-map\":{write:{ignoreOrigin:!0}}}}})],me.prototype,\"featureCollectionType\",void 0),e([S({readOnly:!0})],me.prototype,\"fullExtent\",null),e([S({json:{origins:{\"web-map\":{name:\"featureCollection.showLegend\"}},write:!0}})],me.prototype,\"legendEnabled\",void 0),e([S({type:[\"show\",\"hide\"]})],me.prototype,\"listMode\",void 0),e([S({type:Number,nonNullable:!0,json:{write:!1}})],me.prototype,\"maxScale\",void 0),e([g([\"web-map\",\"portal-item\"],\"maxScale\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readMaxScale\",null),e([S({type:Number,nonNullable:!0,json:{write:!1}})],me.prototype,\"minScale\",void 0),e([g([\"web-map\",\"portal-item\"],\"minScale\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readMinScale\",null),e([S({type:[\"ArcGISFeatureLayer\"],value:\"ArcGISFeatureLayer\"})],me.prototype,\"operationalLayerType\",void 0),e([S({nonNullable:!0,type:s.ofType(U)})],me.prototype,\"pointBarriers\",void 0),e([g([\"web-map\",\"portal-item\"],\"pointBarriers\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readPointBarriers\",null),e([S({nonNullable:!0,type:s.ofType(E)})],me.prototype,\"polygonBarriers\",void 0),e([g([\"web-map\",\"portal-item\"],\"polygonBarriers\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readPolygonBarriers\",null),e([S({nonNullable:!0,type:s.ofType(q)})],me.prototype,\"polylineBarriers\",void 0),e([g([\"web-map\",\"portal-item\"],\"polylineBarriers\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readPolylineBarriers\",null),e([S({readOnly:!0})],me.prototype,\"routeInfo\",void 0),e([g([\"web-map\",\"portal-item\"],\"routeInfo\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readRouteInfo\",null),e([S({type:Q})],me.prototype,\"spatialReference\",void 0),e([g([\"web-map\",\"portal-item\"],\"spatialReference\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readSpatialReference\",null),e([S({nonNullable:!0,type:s.ofType(K)})],me.prototype,\"stops\",void 0),e([g([\"web-map\",\"portal-item\"],\"stops\",[\"layers\",\"featureCollection.layers\"])],me.prototype,\"readStops\",null),e([S()],me.prototype,\"title\",null),e([S({readOnly:!0,json:{read:!1}})],me.prototype,\"type\",void 0),e([S()],me.prototype,\"url\",null),me=e([w(\"esri.layers.RouteLayer\")],me);const ye=me;export{ye as default};\n"]},"metadata":{},"sourceType":"module"}