{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../Color.js\";\nimport { toCIMSymbolJSON as t, isCIMMarker as o, isCIMStroke as a, isCIMFill as r, isCIMMarkerStrokePlacement as s, fromCIMColor as n } from \"../cim/utils.js\";\n\nfunction i(e) {\n  const s = t(e);\n  if (\"CIMTextSymbol\" === s.type) return s.height;\n  let n = 0;\n  if (s.symbolLayers) for (const t of s.symbolLayers) o(t) && t.size > n ? n = t.size : a(t) && t.width > n ? n = t.width : r(t);\n  return n;\n}\n\nfunction c(e, o, a) {\n  const r = t(e),\n        s = i(e);\n  if (0 === s) return void f(r, o);\n  l(r, o / s, !1, a);\n}\n\nfunction f(e, t) {\n  if (\"CIMTextSymbol\" !== e.type) {\n    if (e.symbolLayers) for (const o of e.symbolLayers) switch (o.type) {\n      case \"CIMPictureMarker\":\n      case \"CIMVectorMarker\":\n        o.size = t;\n        break;\n\n      case \"CIMPictureStroke\":\n      case \"CIMSolidStroke\":\n        o.width = t;\n    }\n  } else e.height = t;\n}\n\nfunction l(e, t, o, a) {\n  if (\"CIMTextSymbol\" !== e.type) {\n    if (o && e.effects) for (const o of e.effects) C(o, t);\n    if (e.symbolLayers) for (const o of e.symbolLayers) switch (o.type) {\n      case \"CIMPictureMarker\":\n      case \"CIMVectorMarker\":\n        m(o, t, a);\n        break;\n\n      case \"CIMPictureStroke\":\n      case \"CIMSolidStroke\":\n        null != a && a.preserveOutlineWidth || !o.width || (o.width *= t);\n        break;\n\n      case \"CIMPictureFill\":\n        o.height && (o.height *= t), o.offsetX && (o.offsetX *= t), o.offsetY && (o.offsetY *= t);\n        break;\n\n      case \"CIMHatchFill\":\n        l(o.lineSymbol, t, !0, { ...a,\n          preserveOutlineWidth: !1\n        }), o.offsetX && (o.offsetX *= t), o.offsetY && (o.offsetY *= t), o.separation && (o.separation *= t);\n    }\n  } else e.height *= t;\n}\n\nfunction m(e, t, o) {\n  if (e.markerPlacement && M(e.markerPlacement, t), e.offsetX && (e.offsetX *= t), e.offsetY && (e.offsetY *= t), e.anchorPoint && \"Absolute\" === e.anchorPointUnits && (e.anchorPoint = {\n    x: e.anchorPoint.x * t,\n    y: e.anchorPoint.y * t\n  }), e.size *= t, \"CIMVectorMarker\" === e.type && e.markerGraphics) for (const a of e.markerGraphics) e.scaleSymbolsProportionally || l(a.symbol, t, !0, o);\n}\n\nfunction M(e, t) {\n  switch (s(e) && e.offset && (e.offset *= t), e.type) {\n    case \"CIMMarkerPlacementAlongLineRandomSize\":\n    case \"CIMMarkerPlacementAlongLineSameSize\":\n      if (e.customEndingOffset && (e.customEndingOffset *= t), e.offsetAlongLine && (e.offsetAlongLine *= t), e.placementTemplate && e.placementTemplate.length) {\n        const o = e.placementTemplate.map(e => e * t);\n        e.placementTemplate = o;\n      }\n\n      break;\n\n    case \"CIMMarkerPlacementAlongLineVariableSize\":\n      if (e.maxRandomOffset && (e.maxRandomOffset *= t), e.placementTemplate && e.placementTemplate.length) {\n        const o = e.placementTemplate.map(e => e * t);\n        e.placementTemplate = o;\n      }\n\n      break;\n\n    case \"CIMMarkerPlacementOnLine\":\n      e.startPointOffset && (e.startPointOffset *= t);\n      break;\n\n    case \"CIMMarkerPlacementAtExtremities\":\n      e.offsetAlongLine && (e.offsetAlongLine *= t);\n      break;\n\n    case \"CIMMarkerPlacementAtMeasuredUnits\":\n    case \"CIMMarkerPlacementOnVertices\":\n      break;\n\n    case \"CIMMarkerPlacementAtRatioPositions\":\n      e.beginPosition && (e.beginPosition *= t), e.endPosition && (e.endPosition *= t);\n      break;\n\n    case \"CIMMarkerPlacementPolygonCenter\":\n      e.offsetX && (e.offsetX *= t), e.offsetY && (e.offsetY *= t);\n      break;\n\n    case \"CIMMarkerPlacementInsidePolygon\":\n      e.offsetX && (e.offsetX *= t), e.offsetY && (e.offsetY *= t), e.stepX && (e.stepX *= t), e.stepY && (e.stepY *= t);\n  }\n}\n\nfunction C(e, t) {\n  switch (e.type) {\n    case \"CIMGeometricEffectArrow\":\n    case \"CIMGeometricEffectDonut\":\n      e.width && (e.width *= t);\n      break;\n\n    case \"CIMGeometricEffectBuffer\":\n      e.size && (e.size *= t);\n      break;\n\n    case \"CIMGeometricEffectCut\":\n      e.beginCut && (e.beginCut *= t), e.endCut && (e.endCut *= t), e.middleCut && (e.middleCut *= t);\n      break;\n\n    case \"CIMGeometricEffectDashes\":\n      if (e.customEndingOffset && (e.customEndingOffset *= t), e.offsetAlongLine && (e.offsetAlongLine *= t), e.dashTemplate && e.dashTemplate.length) {\n        const o = e.dashTemplate.map(e => e * t);\n        e.dashTemplate = o;\n      }\n\n      break;\n\n    case \"CIMGeometricEffectExtension\":\n    case \"CIMGeometricEffectJog\":\n    case \"CIMGeometricEffectRadial\":\n      e.length && (e.length *= t);\n      break;\n\n    case \"CIMGeometricEffectMove\":\n      e.offsetX && (e.offsetX *= t), e.offsetY && (e.offsetY *= t);\n      break;\n\n    case \"CIMGeometricEffectOffset\":\n    case \"CIMGeometricEffectOffsetTangent\":\n      e.offset && (e.offset *= t);\n      break;\n\n    case \"CIMGeometricEffectRegularPolygon\":\n      e.radius && (e.radius *= t);\n      break;\n\n    case \"CIMGeometricEffectTaperedPolygon\":\n      e.fromWidth && (e.fromWidth *= t), e.length && (e.length *= t), e.toWidth && (e.toWidth *= t);\n      break;\n\n    case \"CIMGeometricEffectWave\":\n      e.amplitude && (e.amplitude *= t), e.period && (e.period *= t);\n  }\n}\n\nfunction y(o) {\n  const a = [];\n  return k(t(o), a), a.length ? new e(n(a[0])) : null;\n}\n\nfunction k(e, t) {\n  let r;\n  r = \"CIMTextSymbol\" === e.type ? e.symbol : e;\n  const n = \"CIMPolygonSymbol\" === e.type;\n  if (r.symbolLayers) for (const i of r.symbolLayers) if (!(i.colorLocked || n && (a(i) || o(i) && i.markerPlacement && s(i.markerPlacement)))) switch (i.type) {\n    case \"CIMPictureMarker\":\n    case \"CIMPictureStroke\":\n    case \"CIMPictureFill\":\n      i.tintColor && b(t, i.tintColor);\n      break;\n\n    case \"CIMVectorMarker\":\n      i.markerGraphics.forEach(e => {\n        k(e.symbol, t);\n      });\n      break;\n\n    case \"CIMSolidStroke\":\n    case \"CIMSolidFill\":\n      b(t, i.color);\n      break;\n\n    case \"CIMHatchFill\":\n      k(i.lineSymbol, t);\n  }\n}\n\nfunction b(e, t) {\n  for (const o of e) if (o.join(\".\") === t.join(\".\")) return;\n\n  e.push(t);\n}\n\nfunction p(o, a, r) {\n  a instanceof e || (a = new e(a));\n  const s = t(o);\n  s && u(s, a, r);\n}\n\nfunction u(e, t, n) {\n  let i;\n  i = \"CIMTextSymbol\" === e.type ? e.symbol : e;\n  const c = \"CIMPolygonSymbol\" === i.type;\n  if (i.symbolLayers) for (const f of i.symbolLayers) {\n    if (f.colorLocked) continue;\n    if (c) if (n) {\n      const {\n        layersToColor: e\n      } = n;\n      if ((a(f) || o(f) && f.markerPlacement && s(f.markerPlacement)) && \"fill\" === e || r(f) && \"outline\" === e) continue;\n    } else if (a(f) || o(f) && f.markerPlacement && s(f.markerPlacement)) continue;\n    const e = t.toArray();\n\n    switch (f.type) {\n      case \"CIMPictureMarker\":\n      case \"CIMPictureStroke\":\n      case \"CIMPictureFill\":\n        f.tintColor = e;\n        break;\n\n      case \"CIMVectorMarker\":\n        f.markerGraphics.forEach(e => {\n          u(e.symbol, t, n);\n        });\n        break;\n\n      case \"CIMSolidStroke\":\n      case \"CIMSolidFill\":\n        f.color = e;\n        break;\n\n      case \"CIMHatchFill\":\n        u(f.lineSymbol, t, n);\n    }\n  }\n}\n\nfunction I(e) {\n  let o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n  const a = t(e);\n  return \"CIMTextSymbol\" === a.type || \"CIMPointSymbol\" === a.type ? o && 0 !== a.angle ? 360 - a.angle : a.angle || 0 : 0;\n}\n\nfunction h(e, a) {\n  let r = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : !1;\n  const s = t(e);\n\n  if (r && 0 !== a && (a = 360 - a), \"CIMTextSymbol\" !== s.type) {\n    if (\"CIMPointSymbol\" === s.type && s.symbolLayers) {\n      const e = a - (s.angle || 0);\n\n      for (const t of s.symbolLayers) if (o(t)) {\n        let o = t.rotation || 0;\n        t.rotateClockwise ? o -= e : o += e, t.rotation = o;\n      }\n\n      s.angle = a;\n    }\n  } else s.angle = a;\n}\n\nexport { p as applyCIMSymbolColor, h as applyCIMSymbolRotation, y as getCIMSymbolColor, I as getCIMSymbolRotation, i as getCIMSymbolSize, m as scaleCIMMarker, c as scaleCIMSymbolTo };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/support/cimSymbolUtils.js"],"names":["e","toCIMSymbolJSON","t","isCIMMarker","o","isCIMStroke","a","isCIMFill","r","isCIMMarkerStrokePlacement","s","fromCIMColor","n","i","type","height","symbolLayers","size","width","c","f","l","effects","C","m","preserveOutlineWidth","offsetX","offsetY","lineSymbol","separation","markerPlacement","M","anchorPoint","anchorPointUnits","x","y","markerGraphics","scaleSymbolsProportionally","symbol","offset","customEndingOffset","offsetAlongLine","placementTemplate","length","map","maxRandomOffset","startPointOffset","beginPosition","endPosition","stepX","stepY","beginCut","endCut","middleCut","dashTemplate","radius","fromWidth","toWidth","amplitude","period","k","colorLocked","tintColor","b","forEach","color","join","push","p","u","layersToColor","toArray","I","angle","h","rotation","rotateClockwise","applyCIMSymbolColor","applyCIMSymbolRotation","getCIMSymbolColor","getCIMSymbolRotation","getCIMSymbolSize","scaleCIMMarker","scaleCIMSymbolTo"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import{toCIMSymbolJSON as t,isCIMMarker as o,isCIMStroke as a,isCIMFill as r,isCIMMarkerStrokePlacement as s,fromCIMColor as n}from\"../cim/utils.js\";function i(e){const s=t(e);if(\"CIMTextSymbol\"===s.type)return s.height;let n=0;if(s.symbolLayers)for(const t of s.symbolLayers)o(t)&&t.size>n?n=t.size:a(t)&&t.width>n?n=t.width:r(t);return n}function c(e,o,a){const r=t(e),s=i(e);if(0===s)return void f(r,o);l(r,o/s,!1,a)}function f(e,t){if(\"CIMTextSymbol\"!==e.type){if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case\"CIMPictureMarker\":case\"CIMVectorMarker\":o.size=t;break;case\"CIMPictureStroke\":case\"CIMSolidStroke\":o.width=t}}else e.height=t}function l(e,t,o,a){if(\"CIMTextSymbol\"!==e.type){if(o&&e.effects)for(const o of e.effects)C(o,t);if(e.symbolLayers)for(const o of e.symbolLayers)switch(o.type){case\"CIMPictureMarker\":case\"CIMVectorMarker\":m(o,t,a);break;case\"CIMPictureStroke\":case\"CIMSolidStroke\":null!=a&&a.preserveOutlineWidth||!o.width||(o.width*=t);break;case\"CIMPictureFill\":o.height&&(o.height*=t),o.offsetX&&(o.offsetX*=t),o.offsetY&&(o.offsetY*=t);break;case\"CIMHatchFill\":l(o.lineSymbol,t,!0,{...a,preserveOutlineWidth:!1}),o.offsetX&&(o.offsetX*=t),o.offsetY&&(o.offsetY*=t),o.separation&&(o.separation*=t)}}else e.height*=t}function m(e,t,o){if(e.markerPlacement&&M(e.markerPlacement,t),e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.anchorPoint&&\"Absolute\"===e.anchorPointUnits&&(e.anchorPoint={x:e.anchorPoint.x*t,y:e.anchorPoint.y*t}),e.size*=t,\"CIMVectorMarker\"===e.type&&e.markerGraphics)for(const a of e.markerGraphics)e.scaleSymbolsProportionally||l(a.symbol,t,!0,o)}function M(e,t){switch(s(e)&&e.offset&&(e.offset*=t),e.type){case\"CIMMarkerPlacementAlongLineRandomSize\":case\"CIMMarkerPlacementAlongLineSameSize\":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o}break;case\"CIMMarkerPlacementAlongLineVariableSize\":if(e.maxRandomOffset&&(e.maxRandomOffset*=t),e.placementTemplate&&e.placementTemplate.length){const o=e.placementTemplate.map((e=>e*t));e.placementTemplate=o}break;case\"CIMMarkerPlacementOnLine\":e.startPointOffset&&(e.startPointOffset*=t);break;case\"CIMMarkerPlacementAtExtremities\":e.offsetAlongLine&&(e.offsetAlongLine*=t);break;case\"CIMMarkerPlacementAtMeasuredUnits\":case\"CIMMarkerPlacementOnVertices\":break;case\"CIMMarkerPlacementAtRatioPositions\":e.beginPosition&&(e.beginPosition*=t),e.endPosition&&(e.endPosition*=t);break;case\"CIMMarkerPlacementPolygonCenter\":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case\"CIMMarkerPlacementInsidePolygon\":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t),e.stepX&&(e.stepX*=t),e.stepY&&(e.stepY*=t)}}function C(e,t){switch(e.type){case\"CIMGeometricEffectArrow\":case\"CIMGeometricEffectDonut\":e.width&&(e.width*=t);break;case\"CIMGeometricEffectBuffer\":e.size&&(e.size*=t);break;case\"CIMGeometricEffectCut\":e.beginCut&&(e.beginCut*=t),e.endCut&&(e.endCut*=t),e.middleCut&&(e.middleCut*=t);break;case\"CIMGeometricEffectDashes\":if(e.customEndingOffset&&(e.customEndingOffset*=t),e.offsetAlongLine&&(e.offsetAlongLine*=t),e.dashTemplate&&e.dashTemplate.length){const o=e.dashTemplate.map((e=>e*t));e.dashTemplate=o}break;case\"CIMGeometricEffectExtension\":case\"CIMGeometricEffectJog\":case\"CIMGeometricEffectRadial\":e.length&&(e.length*=t);break;case\"CIMGeometricEffectMove\":e.offsetX&&(e.offsetX*=t),e.offsetY&&(e.offsetY*=t);break;case\"CIMGeometricEffectOffset\":case\"CIMGeometricEffectOffsetTangent\":e.offset&&(e.offset*=t);break;case\"CIMGeometricEffectRegularPolygon\":e.radius&&(e.radius*=t);break;case\"CIMGeometricEffectTaperedPolygon\":e.fromWidth&&(e.fromWidth*=t),e.length&&(e.length*=t),e.toWidth&&(e.toWidth*=t);break;case\"CIMGeometricEffectWave\":e.amplitude&&(e.amplitude*=t),e.period&&(e.period*=t)}}function y(o){const a=[];return k(t(o),a),a.length?new e(n(a[0])):null}function k(e,t){let r;r=\"CIMTextSymbol\"===e.type?e.symbol:e;const n=\"CIMPolygonSymbol\"===e.type;if(r.symbolLayers)for(const i of r.symbolLayers)if(!(i.colorLocked||n&&(a(i)||o(i)&&i.markerPlacement&&s(i.markerPlacement))))switch(i.type){case\"CIMPictureMarker\":case\"CIMPictureStroke\":case\"CIMPictureFill\":i.tintColor&&b(t,i.tintColor);break;case\"CIMVectorMarker\":i.markerGraphics.forEach((e=>{k(e.symbol,t)}));break;case\"CIMSolidStroke\":case\"CIMSolidFill\":b(t,i.color);break;case\"CIMHatchFill\":k(i.lineSymbol,t)}}function b(e,t){for(const o of e)if(o.join(\".\")===t.join(\".\"))return;e.push(t)}function p(o,a,r){a instanceof e||(a=new e(a));const s=t(o);s&&u(s,a,r)}function u(e,t,n){let i;i=\"CIMTextSymbol\"===e.type?e.symbol:e;const c=\"CIMPolygonSymbol\"===i.type;if(i.symbolLayers)for(const f of i.symbolLayers){if(f.colorLocked)continue;if(c)if(n){const{layersToColor:e}=n;if((a(f)||o(f)&&f.markerPlacement&&s(f.markerPlacement))&&\"fill\"===e||r(f)&&\"outline\"===e)continue}else if(a(f)||o(f)&&f.markerPlacement&&s(f.markerPlacement))continue;const e=t.toArray();switch(f.type){case\"CIMPictureMarker\":case\"CIMPictureStroke\":case\"CIMPictureFill\":f.tintColor=e;break;case\"CIMVectorMarker\":f.markerGraphics.forEach((e=>{u(e.symbol,t,n)}));break;case\"CIMSolidStroke\":case\"CIMSolidFill\":f.color=e;break;case\"CIMHatchFill\":u(f.lineSymbol,t,n)}}}function I(e,o=!1){const a=t(e);return\"CIMTextSymbol\"===a.type||\"CIMPointSymbol\"===a.type?o&&0!==a.angle?360-a.angle:a.angle||0:0}function h(e,a,r=!1){const s=t(e);if(r&&0!==a&&(a=360-a),\"CIMTextSymbol\"!==s.type){if(\"CIMPointSymbol\"===s.type&&s.symbolLayers){const e=a-(s.angle||0);for(const t of s.symbolLayers)if(o(t)){let o=t.rotation||0;t.rotateClockwise?o-=e:o+=e,t.rotation=o}s.angle=a}}else s.angle=a}export{p as applyCIMSymbolColor,h as applyCIMSymbolRotation,y as getCIMSymbolColor,I as getCIMSymbolRotation,i as getCIMSymbolSize,m as scaleCIMMarker,c as scaleCIMSymbolTo};\n"]},"metadata":{},"sourceType":"module"}