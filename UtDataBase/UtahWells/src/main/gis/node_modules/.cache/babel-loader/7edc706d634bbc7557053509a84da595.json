{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isPolyline as t, isPolygon as e } from \"../../../geometry/support/jsonUtils.js\";\nimport { PathHelper as i } from \"../CurveHelper.js\";\nimport { GeometricEffectWaveform as s } from \"../enums.js\";\nimport { DashPattern as h, GeometryWalker as n } from \"../GeometryWalker.js\";\n\nclass r {\n  static local() {\n    return null === r.instance && (r.instance = new r()), r.instance;\n  }\n\n  execute(t, e, i, s) {\n    return new a(t, e, i);\n  }\n\n}\n\nr.instance = null;\n\nclass a {\n  constructor(t, e, i) {\n    this._inputGeometries = t, this._height = (void 0 !== e.amplitude ? e.amplitude : 2) * i, this._period = (void 0 !== e.period ? e.period : 3) * i, this._style = e.waveform, this._height <= 0 && (this._height = Math.abs(this._height)), this._period <= 0 && (this._period = Math.abs(this._period)), this._pattern = new h(), this._pattern.addValue(this._period), this._pattern.addValue(this._period), this._walker = new n(), this._walker.updateTolerance(i);\n  }\n\n  next() {\n    let i = this._inputGeometries.next();\n\n    for (; i;) {\n      if (0 === this._height || 0 === this._period) return i;\n\n      if (t(i)) {\n        const t = this._processGeom(i.paths);\n\n        if (t.length) return {\n          paths: t\n        };\n      }\n\n      if (e(i)) {\n        const t = this._processGeom(i.rings);\n\n        if (t.length) return {\n          rings: t\n        };\n      }\n\n      i = this._inputGeometries.next();\n    }\n\n    return null;\n  }\n\n  _processGeom(t) {\n    const e = [];\n\n    for (const i of t) if (this._walker.init(i, this._pattern)) switch (this._style) {\n      case s.Sinus:\n      default:\n        e.push(this._constructCurve(i, !1));\n        break;\n\n      case s.Square:\n        e.push(this._constructSquare(i));\n        break;\n\n      case s.Triangle:\n        e.push(this._constructTriangle(i));\n        break;\n\n      case s.Random:\n        e.push(this._constructCurve(i, !0));\n    } else e.push(i);\n\n    return e;\n  }\n\n  _constructCurve(t, e) {\n    const s = new i(),\n          h = this._walker.calculatePathLength(t);\n\n    let n = Math.round(h / this._period);\n    0 === n && (n = 1);\n\n    const r = n * 16 + 1,\n          a = h / n,\n          o = this._period / 16,\n          l = 1 / r,\n          _ = 2 * Math.PI * h / a,\n          c = 2 * Math.PI * Math.random(),\n          p = 2 * Math.PI * Math.random(),\n          u = 2 * Math.PI * Math.random(),\n          d = .75 - Math.random() / 2,\n          g = .75 - Math.random() / 2,\n          w = {};\n\n    this._walker.curPointAndAngle(w), s.startPath(w.pt);\n    let f = 0;\n\n    for (;;) {\n      if (!this._walker.nextPointAndAngle(o, w)) {\n        s.lineTo(t[t.length - 1]);\n        break;\n      }\n\n      {\n        const t = f;\n        let i;\n\n        if (f += l, e) {\n          const e = this._height / 2 * (1 + .3 * Math.sin(d * _ * t + c));\n          i = e * Math.sin(_ * t + p), i += e * Math.sin(g * _ * t + u), i /= 2;\n        } else i = .5 * this._height * Math.sin(.5 * _ * t);\n\n        s.lineTo([w.pt[0] - i * w.sa, w.pt[1] + i * w.ca]);\n      }\n    }\n\n    return s.path();\n  }\n\n  _constructSquare(t) {\n    const e = new i(),\n          s = this._walker.calculatePathLength(t);\n\n    Math.round(s / this._period);\n    let h = !0;\n\n    for (;;) {\n      let t = !1;\n\n      if (this._walker.curPositionIsValid()) {\n        const i = {};\n\n        this._walker.curPointAndAngle(i);\n\n        const s = {};\n\n        if (this._walker.nextPointAndAngle(this._period, s)) {\n          const n = {};\n          this._walker.nextPointAndAngle(this._period, n) && (h ? (e.startPath(i.pt), h = !1) : e.lineTo(i.pt), e.lineTo([i.pt[0] - this._height / 2 * i.sa, i.pt[1] + this._height / 2 * i.ca]), e.lineTo([s.pt[0] - this._height / 2 * s.sa, s.pt[1] + this._height / 2 * s.ca]), e.lineTo([s.pt[0] + this._height / 2 * s.sa, s.pt[1] - this._height / 2 * s.ca]), e.lineTo([n.pt[0] + this._height / 2 * n.sa, n.pt[1] - this._height / 2 * n.ca]), t = !0);\n        }\n      }\n\n      if (!t) {\n        e.lineTo(this._walker.getPathEnd());\n        break;\n      }\n    }\n\n    return e.path();\n  }\n\n  _constructTriangle(t) {\n    const e = new i(),\n          s = this._walker.calculatePathLength(t);\n\n    Math.round(s / this._period);\n    let h = !0;\n\n    for (;;) {\n      let t = !1;\n\n      if (this._walker.curPositionIsValid()) {\n        const i = {};\n\n        this._walker.curPointAndAngle(i);\n\n        const s = {};\n\n        if (this._walker.nextPointAndAngle(this._period / 2, s)) {\n          const n = {};\n          this._walker.nextPointAndAngle(this._period, n) && (this._walker.nextPosition(this._period / 2) && (h ? (e.startPath(i.pt), h = !1) : e.lineTo(i.pt), e.lineTo([s.pt[0] - this._height / 2 * s.sa, s.pt[1] + this._height / 2 * s.ca]), e.lineTo([n.pt[0] + this._height / 2 * n.sa, n.pt[1] - this._height / 2 * n.ca])), t = !0);\n        }\n      }\n\n      if (!t) {\n        e.lineTo(this._walker.getPathEnd());\n        break;\n      }\n    }\n\n    return e.path();\n  }\n\n}\n\nexport { r as EffectWave };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/effects/EffectWave.js"],"names":["isPolyline","t","isPolygon","e","PathHelper","i","GeometricEffectWaveform","s","DashPattern","h","GeometryWalker","n","r","local","instance","execute","a","constructor","_inputGeometries","_height","amplitude","_period","period","_style","waveform","Math","abs","_pattern","addValue","_walker","updateTolerance","next","_processGeom","paths","length","rings","init","Sinus","push","_constructCurve","Square","_constructSquare","Triangle","_constructTriangle","Random","calculatePathLength","round","o","l","_","PI","c","random","p","u","d","g","w","curPointAndAngle","startPath","pt","f","nextPointAndAngle","lineTo","sin","sa","ca","path","curPositionIsValid","getPathEnd","nextPosition","EffectWave"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,UAAU,IAAIC,CAArB,EAAuBC,SAAS,IAAIC,CAApC,QAA0C,wCAA1C;AAAmF,SAAOC,UAAU,IAAIC,CAArB,QAA2B,mBAA3B;AAA+C,SAAOC,uBAAuB,IAAIC,CAAlC,QAAwC,aAAxC;AAAsD,SAAOC,WAAW,IAAIC,CAAtB,EAAwBC,cAAc,IAAIC,CAA1C,QAAgD,sBAAhD;;AAAuE,MAAMC,CAAN,CAAO;AAAa,SAALC,KAAK,GAAE;AAAC,WAAO,SAAOD,CAAC,CAACE,QAAT,KAAoBF,CAAC,CAACE,QAAF,GAAW,IAAIF,CAAJ,EAA/B,GAAsCA,CAAC,CAACE,QAA/C;AAAwD;;AAAAC,EAAAA,OAAO,CAACd,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAAS;AAAC,WAAO,IAAIS,CAAJ,CAAMf,CAAN,EAAQE,CAAR,EAAUE,CAAV,CAAP;AAAoB;;AAA7G;;AAA8GO,CAAC,CAACE,QAAF,GAAW,IAAX;;AAAgB,MAAME,CAAN,CAAO;AAACC,EAAAA,WAAW,CAAChB,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAO;AAAC,SAAKa,gBAAL,GAAsBjB,CAAtB,EAAwB,KAAKkB,OAAL,GAAa,CAAC,KAAK,CAAL,KAAShB,CAAC,CAACiB,SAAX,GAAqBjB,CAAC,CAACiB,SAAvB,GAAiC,CAAlC,IAAqCf,CAA1E,EAA4E,KAAKgB,OAAL,GAAa,CAAC,KAAK,CAAL,KAASlB,CAAC,CAACmB,MAAX,GAAkBnB,CAAC,CAACmB,MAApB,GAA2B,CAA5B,IAA+BjB,CAAxH,EAA0H,KAAKkB,MAAL,GAAYpB,CAAC,CAACqB,QAAxI,EAAiJ,KAAKL,OAAL,IAAc,CAAd,KAAkB,KAAKA,OAAL,GAAaM,IAAI,CAACC,GAAL,CAAS,KAAKP,OAAd,CAA/B,CAAjJ,EAAwM,KAAKE,OAAL,IAAc,CAAd,KAAkB,KAAKA,OAAL,GAAaI,IAAI,CAACC,GAAL,CAAS,KAAKL,OAAd,CAA/B,CAAxM,EAA+P,KAAKM,QAAL,GAAc,IAAIlB,CAAJ,EAA7Q,EAAmR,KAAKkB,QAAL,CAAcC,QAAd,CAAuB,KAAKP,OAA5B,CAAnR,EAAwT,KAAKM,QAAL,CAAcC,QAAd,CAAuB,KAAKP,OAA5B,CAAxT,EAA6V,KAAKQ,OAAL,GAAa,IAAIlB,CAAJ,EAA1W,EAAgX,KAAKkB,OAAL,CAAaC,eAAb,CAA6BzB,CAA7B,CAAhX;AAAgZ;;AAAA0B,EAAAA,IAAI,GAAE;AAAC,QAAI1B,CAAC,GAAC,KAAKa,gBAAL,CAAsBa,IAAtB,EAAN;;AAAmC,WAAK1B,CAAL,GAAQ;AAAC,UAAG,MAAI,KAAKc,OAAT,IAAkB,MAAI,KAAKE,OAA9B,EAAsC,OAAOhB,CAAP;;AAAS,UAAGJ,CAAC,CAACI,CAAD,CAAJ,EAAQ;AAAC,cAAMJ,CAAC,GAAC,KAAK+B,YAAL,CAAkB3B,CAAC,CAAC4B,KAApB,CAAR;;AAAmC,YAAGhC,CAAC,CAACiC,MAAL,EAAY,OAAM;AAACD,UAAAA,KAAK,EAAChC;AAAP,SAAN;AAAgB;;AAAA,UAAGE,CAAC,CAACE,CAAD,CAAJ,EAAQ;AAAC,cAAMJ,CAAC,GAAC,KAAK+B,YAAL,CAAkB3B,CAAC,CAAC8B,KAApB,CAAR;;AAAmC,YAAGlC,CAAC,CAACiC,MAAL,EAAY,OAAM;AAACC,UAAAA,KAAK,EAAClC;AAAP,SAAN;AAAgB;;AAAAI,MAAAA,CAAC,GAAC,KAAKa,gBAAL,CAAsBa,IAAtB,EAAF;AAA+B;;AAAA,WAAO,IAAP;AAAY;;AAAAC,EAAAA,YAAY,CAAC/B,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,EAAR;;AAAW,SAAI,MAAME,CAAV,IAAeJ,CAAf,EAAiB,IAAG,KAAK4B,OAAL,CAAaO,IAAb,CAAkB/B,CAAlB,EAAoB,KAAKsB,QAAzB,CAAH,EAAsC,QAAO,KAAKJ,MAAZ;AAAoB,WAAKhB,CAAC,CAAC8B,KAAP;AAAa;AAAQlC,QAAAA,CAAC,CAACmC,IAAF,CAAO,KAAKC,eAAL,CAAqBlC,CAArB,EAAuB,CAAC,CAAxB,CAAP;AAAmC;;AAAM,WAAKE,CAAC,CAACiC,MAAP;AAAcrC,QAAAA,CAAC,CAACmC,IAAF,CAAO,KAAKG,gBAAL,CAAsBpC,CAAtB,CAAP;AAAiC;;AAAM,WAAKE,CAAC,CAACmC,QAAP;AAAgBvC,QAAAA,CAAC,CAACmC,IAAF,CAAO,KAAKK,kBAAL,CAAwBtC,CAAxB,CAAP;AAAmC;;AAAM,WAAKE,CAAC,CAACqC,MAAP;AAAczC,QAAAA,CAAC,CAACmC,IAAF,CAAO,KAAKC,eAAL,CAAqBlC,CAArB,EAAuB,CAAC,CAAxB,CAAP;AAA9M,KAAtC,MAA4RF,CAAC,CAACmC,IAAF,CAAOjC,CAAP;;AAAU,WAAOF,CAAP;AAAS;;AAAAoC,EAAAA,eAAe,CAACtC,CAAD,EAAGE,CAAH,EAAK;AAAC,UAAMI,CAAC,GAAC,IAAIF,CAAJ,EAAR;AAAA,UAAcI,CAAC,GAAC,KAAKoB,OAAL,CAAagB,mBAAb,CAAiC5C,CAAjC,CAAhB;;AAAoD,QAAIU,CAAC,GAACc,IAAI,CAACqB,KAAL,CAAWrC,CAAC,GAAC,KAAKY,OAAlB,CAAN;AAAiC,UAAIV,CAAJ,KAAQA,CAAC,GAAC,CAAV;;AAAa,UAAMC,CAAC,GAACD,CAAC,GAAC,EAAF,GAAK,CAAb;AAAA,UAAeK,CAAC,GAACP,CAAC,GAACE,CAAnB;AAAA,UAAqBoC,CAAC,GAAC,KAAK1B,OAAL,GAAa,EAApC;AAAA,UAAuC2B,CAAC,GAAC,IAAEpC,CAA3C;AAAA,UAA6CqC,CAAC,GAAC,IAAExB,IAAI,CAACyB,EAAP,GAAUzC,CAAV,GAAYO,CAA3D;AAAA,UAA6DmC,CAAC,GAAC,IAAE1B,IAAI,CAACyB,EAAP,GAAUzB,IAAI,CAAC2B,MAAL,EAAzE;AAAA,UAAuFC,CAAC,GAAC,IAAE5B,IAAI,CAACyB,EAAP,GAAUzB,IAAI,CAAC2B,MAAL,EAAnG;AAAA,UAAiHE,CAAC,GAAC,IAAE7B,IAAI,CAACyB,EAAP,GAAUzB,IAAI,CAAC2B,MAAL,EAA7H;AAAA,UAA2IG,CAAC,GAAC,MAAI9B,IAAI,CAAC2B,MAAL,KAAc,CAA/J;AAAA,UAAiKI,CAAC,GAAC,MAAI/B,IAAI,CAAC2B,MAAL,KAAc,CAArL;AAAA,UAAuLK,CAAC,GAAC,EAAzL;;AAA4L,SAAK5B,OAAL,CAAa6B,gBAAb,CAA8BD,CAA9B,GAAiClD,CAAC,CAACoD,SAAF,CAAYF,CAAC,CAACG,EAAd,CAAjC;AAAmD,QAAIC,CAAC,GAAC,CAAN;;AAAQ,aAAO;AAAC,UAAG,CAAC,KAAKhC,OAAL,CAAaiC,iBAAb,CAA+Bf,CAA/B,EAAiCU,CAAjC,CAAJ,EAAwC;AAAClD,QAAAA,CAAC,CAACwD,MAAF,CAAS9D,CAAC,CAACA,CAAC,CAACiC,MAAF,GAAS,CAAV,CAAV;AAAwB;AAAM;;AAAA;AAAC,cAAMjC,CAAC,GAAC4D,CAAR;AAAU,YAAIxD,CAAJ;;AAAM,YAAGwD,CAAC,IAAEb,CAAH,EAAK7C,CAAR,EAAU;AAAC,gBAAMA,CAAC,GAAC,KAAKgB,OAAL,GAAa,CAAb,IAAgB,IAAE,KAAGM,IAAI,CAACuC,GAAL,CAAST,CAAC,GAACN,CAAF,GAAIhD,CAAJ,GAAMkD,CAAf,CAArB,CAAR;AAAgD9C,UAAAA,CAAC,GAACF,CAAC,GAACsB,IAAI,CAACuC,GAAL,CAASf,CAAC,GAAChD,CAAF,GAAIoD,CAAb,CAAJ,EAAoBhD,CAAC,IAAEF,CAAC,GAACsB,IAAI,CAACuC,GAAL,CAASR,CAAC,GAACP,CAAF,GAAIhD,CAAJ,GAAMqD,CAAf,CAAzB,EAA2CjD,CAAC,IAAE,CAA9C;AAAgD,SAA3G,MAAgHA,CAAC,GAAC,KAAG,KAAKc,OAAR,GAAgBM,IAAI,CAACuC,GAAL,CAAS,KAAGf,CAAH,GAAKhD,CAAd,CAAlB;;AAAmCM,QAAAA,CAAC,CAACwD,MAAF,CAAS,CAACN,CAAC,CAACG,EAAF,CAAK,CAAL,IAAQvD,CAAC,GAACoD,CAAC,CAACQ,EAAb,EAAgBR,CAAC,CAACG,EAAF,CAAK,CAAL,IAAQvD,CAAC,GAACoD,CAAC,CAACS,EAA5B,CAAT;AAA0C;AAAC;;AAAA,WAAO3D,CAAC,CAAC4D,IAAF,EAAP;AAAgB;;AAAA1B,EAAAA,gBAAgB,CAACxC,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,IAAIE,CAAJ,EAAR;AAAA,UAAcE,CAAC,GAAC,KAAKsB,OAAL,CAAagB,mBAAb,CAAiC5C,CAAjC,CAAhB;;AAAoDwB,IAAAA,IAAI,CAACqB,KAAL,CAAWvC,CAAC,GAAC,KAAKc,OAAlB;AAA2B,QAAIZ,CAAC,GAAC,CAAC,CAAP;;AAAS,aAAO;AAAC,UAAIR,CAAC,GAAC,CAAC,CAAP;;AAAS,UAAG,KAAK4B,OAAL,CAAauC,kBAAb,EAAH,EAAqC;AAAC,cAAM/D,CAAC,GAAC,EAAR;;AAAW,aAAKwB,OAAL,CAAa6B,gBAAb,CAA8BrD,CAA9B;;AAAiC,cAAME,CAAC,GAAC,EAAR;;AAAW,YAAG,KAAKsB,OAAL,CAAaiC,iBAAb,CAA+B,KAAKzC,OAApC,EAA4Cd,CAA5C,CAAH,EAAkD;AAAC,gBAAMI,CAAC,GAAC,EAAR;AAAW,eAAKkB,OAAL,CAAaiC,iBAAb,CAA+B,KAAKzC,OAApC,EAA4CV,CAA5C,MAAiDF,CAAC,IAAEN,CAAC,CAACwD,SAAF,CAAYtD,CAAC,CAACuD,EAAd,GAAkBnD,CAAC,GAAC,CAAC,CAAvB,IAA0BN,CAAC,CAAC4D,MAAF,CAAS1D,CAAC,CAACuD,EAAX,CAA3B,EAA0CzD,CAAC,CAAC4D,MAAF,CAAS,CAAC1D,CAAC,CAACuD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAed,CAAC,CAAC4D,EAA1B,EAA6B5D,CAAC,CAACuD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAed,CAAC,CAAC6D,EAAtD,CAAT,CAA1C,EAA8G/D,CAAC,CAAC4D,MAAF,CAAS,CAACxD,CAAC,CAACqD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeZ,CAAC,CAAC0D,EAA1B,EAA6B1D,CAAC,CAACqD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeZ,CAAC,CAAC2D,EAAtD,CAAT,CAA9G,EAAkL/D,CAAC,CAAC4D,MAAF,CAAS,CAACxD,CAAC,CAACqD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeZ,CAAC,CAAC0D,EAA1B,EAA6B1D,CAAC,CAACqD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeZ,CAAC,CAAC2D,EAAtD,CAAT,CAAlL,EAAsP/D,CAAC,CAAC4D,MAAF,CAAS,CAACpD,CAAC,CAACiD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeR,CAAC,CAACsD,EAA1B,EAA6BtD,CAAC,CAACiD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeR,CAAC,CAACuD,EAAtD,CAAT,CAAtP,EAA0TjE,CAAC,GAAC,CAAC,CAA9W;AAAiX;AAAC;;AAAA,UAAG,CAACA,CAAJ,EAAM;AAACE,QAAAA,CAAC,CAAC4D,MAAF,CAAS,KAAKlC,OAAL,CAAawC,UAAb,EAAT;AAAoC;AAAM;AAAC;;AAAA,WAAOlE,CAAC,CAACgE,IAAF,EAAP;AAAgB;;AAAAxB,EAAAA,kBAAkB,CAAC1C,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,IAAIE,CAAJ,EAAR;AAAA,UAAcE,CAAC,GAAC,KAAKsB,OAAL,CAAagB,mBAAb,CAAiC5C,CAAjC,CAAhB;;AAAoDwB,IAAAA,IAAI,CAACqB,KAAL,CAAWvC,CAAC,GAAC,KAAKc,OAAlB;AAA2B,QAAIZ,CAAC,GAAC,CAAC,CAAP;;AAAS,aAAO;AAAC,UAAIR,CAAC,GAAC,CAAC,CAAP;;AAAS,UAAG,KAAK4B,OAAL,CAAauC,kBAAb,EAAH,EAAqC;AAAC,cAAM/D,CAAC,GAAC,EAAR;;AAAW,aAAKwB,OAAL,CAAa6B,gBAAb,CAA8BrD,CAA9B;;AAAiC,cAAME,CAAC,GAAC,EAAR;;AAAW,YAAG,KAAKsB,OAAL,CAAaiC,iBAAb,CAA+B,KAAKzC,OAAL,GAAa,CAA5C,EAA8Cd,CAA9C,CAAH,EAAoD;AAAC,gBAAMI,CAAC,GAAC,EAAR;AAAW,eAAKkB,OAAL,CAAaiC,iBAAb,CAA+B,KAAKzC,OAApC,EAA4CV,CAA5C,MAAiD,KAAKkB,OAAL,CAAayC,YAAb,CAA0B,KAAKjD,OAAL,GAAa,CAAvC,MAA4CZ,CAAC,IAAEN,CAAC,CAACwD,SAAF,CAAYtD,CAAC,CAACuD,EAAd,GAAkBnD,CAAC,GAAC,CAAC,CAAvB,IAA0BN,CAAC,CAAC4D,MAAF,CAAS1D,CAAC,CAACuD,EAAX,CAA3B,EAA0CzD,CAAC,CAAC4D,MAAF,CAAS,CAACxD,CAAC,CAACqD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeZ,CAAC,CAAC0D,EAA1B,EAA6B1D,CAAC,CAACqD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeZ,CAAC,CAAC2D,EAAtD,CAAT,CAA1C,EAA8G/D,CAAC,CAAC4D,MAAF,CAAS,CAACpD,CAAC,CAACiD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeR,CAAC,CAACsD,EAA1B,EAA6BtD,CAAC,CAACiD,EAAF,CAAK,CAAL,IAAQ,KAAKzC,OAAL,GAAa,CAAb,GAAeR,CAAC,CAACuD,EAAtD,CAAT,CAA1J,GAA+NjE,CAAC,GAAC,CAAC,CAAnR;AAAsR;AAAC;;AAAA,UAAG,CAACA,CAAJ,EAAM;AAACE,QAAAA,CAAC,CAAC4D,MAAF,CAAS,KAAKlC,OAAL,CAAawC,UAAb,EAAT;AAAoC;AAAM;AAAC;;AAAA,WAAOlE,CAAC,CAACgE,IAAF,EAAP;AAAgB;;AAAz/F;;AAA0/F,SAAOvD,CAAC,IAAI2D,UAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isPolyline as t,isPolygon as e}from\"../../../geometry/support/jsonUtils.js\";import{PathHelper as i}from\"../CurveHelper.js\";import{GeometricEffectWaveform as s}from\"../enums.js\";import{DashPattern as h,GeometryWalker as n}from\"../GeometryWalker.js\";class r{static local(){return null===r.instance&&(r.instance=new r),r.instance}execute(t,e,i,s){return new a(t,e,i)}}r.instance=null;class a{constructor(t,e,i){this._inputGeometries=t,this._height=(void 0!==e.amplitude?e.amplitude:2)*i,this._period=(void 0!==e.period?e.period:3)*i,this._style=e.waveform,this._height<=0&&(this._height=Math.abs(this._height)),this._period<=0&&(this._period=Math.abs(this._period)),this._pattern=new h,this._pattern.addValue(this._period),this._pattern.addValue(this._period),this._walker=new n,this._walker.updateTolerance(i)}next(){let i=this._inputGeometries.next();for(;i;){if(0===this._height||0===this._period)return i;if(t(i)){const t=this._processGeom(i.paths);if(t.length)return{paths:t}}if(e(i)){const t=this._processGeom(i.rings);if(t.length)return{rings:t}}i=this._inputGeometries.next()}return null}_processGeom(t){const e=[];for(const i of t)if(this._walker.init(i,this._pattern))switch(this._style){case s.Sinus:default:e.push(this._constructCurve(i,!1));break;case s.Square:e.push(this._constructSquare(i));break;case s.Triangle:e.push(this._constructTriangle(i));break;case s.Random:e.push(this._constructCurve(i,!0))}else e.push(i);return e}_constructCurve(t,e){const s=new i,h=this._walker.calculatePathLength(t);let n=Math.round(h/this._period);0===n&&(n=1);const r=n*16+1,a=h/n,o=this._period/16,l=1/r,_=2*Math.PI*h/a,c=2*Math.PI*Math.random(),p=2*Math.PI*Math.random(),u=2*Math.PI*Math.random(),d=.75-Math.random()/2,g=.75-Math.random()/2,w={};this._walker.curPointAndAngle(w),s.startPath(w.pt);let f=0;for(;;){if(!this._walker.nextPointAndAngle(o,w)){s.lineTo(t[t.length-1]);break}{const t=f;let i;if(f+=l,e){const e=this._height/2*(1+.3*Math.sin(d*_*t+c));i=e*Math.sin(_*t+p),i+=e*Math.sin(g*_*t+u),i/=2}else i=.5*this._height*Math.sin(.5*_*t);s.lineTo([w.pt[0]-i*w.sa,w.pt[1]+i*w.ca])}}return s.path()}_constructSquare(t){const e=new i,s=this._walker.calculatePathLength(t);Math.round(s/this._period);let h=!0;for(;;){let t=!1;if(this._walker.curPositionIsValid()){const i={};this._walker.curPointAndAngle(i);const s={};if(this._walker.nextPointAndAngle(this._period,s)){const n={};this._walker.nextPointAndAngle(this._period,n)&&(h?(e.startPath(i.pt),h=!1):e.lineTo(i.pt),e.lineTo([i.pt[0]-this._height/2*i.sa,i.pt[1]+this._height/2*i.ca]),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([s.pt[0]+this._height/2*s.sa,s.pt[1]-this._height/2*s.ca]),e.lineTo([n.pt[0]+this._height/2*n.sa,n.pt[1]-this._height/2*n.ca]),t=!0)}}if(!t){e.lineTo(this._walker.getPathEnd());break}}return e.path()}_constructTriangle(t){const e=new i,s=this._walker.calculatePathLength(t);Math.round(s/this._period);let h=!0;for(;;){let t=!1;if(this._walker.curPositionIsValid()){const i={};this._walker.curPointAndAngle(i);const s={};if(this._walker.nextPointAndAngle(this._period/2,s)){const n={};this._walker.nextPointAndAngle(this._period,n)&&(this._walker.nextPosition(this._period/2)&&(h?(e.startPath(i.pt),h=!1):e.lineTo(i.pt),e.lineTo([s.pt[0]-this._height/2*s.sa,s.pt[1]+this._height/2*s.ca]),e.lineTo([n.pt[0]+this._height/2*n.sa,n.pt[1]-this._height/2*n.ca])),t=!0)}}if(!t){e.lineTo(this._walker.getPathEnd());break}}return e.path()}}export{r as EffectWave};\n"]},"metadata":{},"sourceType":"module"}