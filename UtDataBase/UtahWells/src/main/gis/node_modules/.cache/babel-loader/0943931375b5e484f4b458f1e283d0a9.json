{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../has.js\";\nimport { equals as t } from \"../lang.js\";\nimport e from \"../Logger.js\";\nimport s from \"../ObjectPool.js\";\nimport { Lifecycle as i } from \"./interfaces.js\";\nimport { Property as r } from \"./Property.js\";\nimport { OriginId as o, idToName as n, nameToId as a } from \"./PropertyOrigin.js\";\nimport { Store as l } from \"./Store.js\";\nimport { trackAccess as c, runTracked as h, initializeDependencyTracking as p } from \"./tracking.js\";\nimport { getProperties as f } from \"./utils.js\";\nimport { Flags as u } from \"./tracking/Flags.js\";\n\nfunction d(t, e, s) {\n  return void 0 !== t;\n}\n\nfunction g(t, e, s, r) {\n  return void 0 !== t && (!(null == s && t.flags & u.NonNullable) || (r.lifecycle, i.INITIALIZING, !1));\n}\n\nfunction m(t) {\n  return t && \"function\" == typeof t.destroy;\n}\n\ne.getLogger(\"esri.core.accessorSupport.Properties\");\n\nclass v {\n  constructor(t) {\n    this.host = t, this.properties = new Map(), this.ctorArgs = null, this.destroyed = !1, this.lifecycle = i.INITIALIZING, this.store = new l(), this._origin = o.USER;\n    const e = this.host.constructor.__accessorMetadata__,\n          s = e.properties;\n\n    for (const i in s) {\n      const t = new r(this, i, s[i]);\n      this.properties.set(i, t);\n    }\n\n    this.metadatas = s, this._autoDestroy = e.autoDestroy;\n  }\n\n  initialize() {\n    this.lifecycle = i.CONSTRUCTING;\n  }\n\n  constructed() {\n    this.lifecycle = i.CONSTRUCTED;\n  }\n\n  destroy() {\n    if (this.destroyed = !0, this._autoDestroy) for (const [t, e] of this.properties) {\n      const s = this.internalGet(t);\n      s && m(s) && (s.destroy(), ~e.flags & u.NonNullable && this._internalSet(e, null)), e.destroy();\n    } else for (const [t, e] of this.properties) e.destroy();\n  }\n\n  get initialized() {\n    return this.lifecycle !== i.INITIALIZING;\n  }\n\n  get(t) {\n    const e = this.properties.get(t);\n    if (e.metadata.get) return e.getComputed();\n    c(e);\n    const s = this.store;\n    return s.has(t) ? s.get(t) : e.metadata.value;\n  }\n\n  originOf(t) {\n    const e = this.store.originOf(t);\n\n    if (void 0 === e) {\n      const e = this.properties.get(t);\n      if (void 0 !== e && e.flags & u.HasDefaultValue) return \"defaults\";\n    }\n\n    return n(e);\n  }\n\n  has(t) {\n    return !!this.properties.has(t) && this.store.has(t);\n  }\n\n  keys() {\n    return [...this.properties.keys()];\n  }\n\n  internalGet(t) {\n    const e = this.properties.get(t);\n    if (d(e)) return this.store.has(t) ? this.store.get(t) : e.metadata.value;\n  }\n\n  internalSet(t, e) {\n    const s = this.properties.get(t);\n    d(s) && this._internalSet(s, e);\n  }\n\n  getDependsInfo(t, e, s) {\n    const i = this.properties.get(e);\n    if (!d(i)) return \"\";\n    const o = new Set(),\n          n = h({\n      onObservableAccessed: t => o.add(t),\n      onTrackingEnd: () => {}\n    }, () => {\n      var e;\n      return null == (e = i.metadata.get) ? void 0 : e.call(t);\n    });\n    let a = `${s}${t.declaredClass.split(\".\").pop()}.${e}: ${n}\\n`;\n    if (0 === o.size) return a;\n    s += \"  \";\n\n    for (const l of o) {\n      if (!(l instanceof r)) continue;\n      const t = l.properties.host,\n            e = l.propertyName,\n            i = f(t);\n      a += i ? i.getDependsInfo(t, e, s) : `${s}${e}: undefined\\n`;\n    }\n\n    return a;\n  }\n\n  setAtOrigin(t, e, s) {\n    const i = this.properties.get(t);\n    if (d(i)) return this._setAtOrigin(i, e, s);\n  }\n\n  isOverridden(t) {\n    const e = this.properties.get(t);\n    return void 0 !== e && !!(e.flags & u.Overriden);\n  }\n\n  clearOverride(t) {\n    const e = this.properties.get(t);\n    void 0 !== e && e.flags & u.Overriden && (e.flags &= ~u.Overriden, e.notifyChange());\n  }\n\n  override(t, e) {\n    const s = this.properties.get(t);\n    if (!g(s, t, e, this)) return;\n    const i = s.metadata.cast;\n\n    if (i) {\n      const t = this._cast(i, e),\n            {\n        valid: s,\n        value: r\n      } = t;\n\n      if (I.release(t), !s) return;\n      e = r;\n    }\n\n    s.flags |= u.Overriden, this._internalSet(s, e);\n  }\n\n  set(t, e) {\n    const s = this.properties.get(t);\n    if (!g(s, t, e, this)) return;\n    const i = s.metadata.cast;\n\n    if (i) {\n      const t = this._cast(i, e),\n            {\n        valid: s,\n        value: r\n      } = t;\n\n      if (I.release(t), !s) return;\n      e = r;\n    }\n\n    const r = s.metadata.set;\n    r ? r.call(this.host, e) : this._internalSet(s, e);\n  }\n\n  setDefaultOrigin(t) {\n    this._origin = a(t);\n  }\n\n  getDefaultOrigin() {\n    return n(this._origin);\n  }\n\n  notifyChange(t) {\n    const e = this.properties.get(t);\n    void 0 !== e && e.notifyChange();\n  }\n\n  invalidate(t) {\n    const e = this.properties.get(t);\n    void 0 !== e && e.invalidate();\n  }\n\n  commit(t) {\n    const e = this.properties.get(t);\n    void 0 !== e && e.commit();\n  }\n\n  _internalSet(t, e) {\n    const s = this.lifecycle !== i.INITIALIZING ? this._origin : o.DEFAULTS;\n\n    this._setAtOrigin(t, e, s);\n  }\n\n  _setAtOrigin(e, s, i) {\n    const r = this.store,\n          o = e.propertyName;\n    r.has(o, i) && t(s, r.get(o)) && ~e.flags & u.Overriden && i === r.originOf(o) || (e.invalidate(), r.set(o, s, i), e.commit(), p(this.host, e));\n  }\n\n  _cast(t, e) {\n    const s = I.acquire();\n    return s.valid = !0, s.value = e, t && (s.value = t.call(this.host, e, s)), s;\n  }\n\n}\n\nclass y {\n  constructor() {\n    this.value = null, this.valid = !0;\n  }\n\n  acquire() {\n    this.valid = !0;\n  }\n\n  release() {\n    this.value = null;\n  }\n\n}\n\nconst I = new s(y);\nexport { v as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/core/accessorSupport/Properties.js"],"names":["equals","t","e","s","Lifecycle","i","Property","r","OriginId","o","idToName","n","nameToId","a","Store","l","trackAccess","c","runTracked","h","initializeDependencyTracking","p","getProperties","f","Flags","u","d","g","flags","NonNullable","lifecycle","INITIALIZING","m","destroy","getLogger","v","constructor","host","properties","Map","ctorArgs","destroyed","store","_origin","USER","__accessorMetadata__","set","metadatas","_autoDestroy","autoDestroy","initialize","CONSTRUCTING","constructed","CONSTRUCTED","internalGet","_internalSet","initialized","get","metadata","getComputed","has","value","originOf","HasDefaultValue","keys","internalSet","getDependsInfo","Set","onObservableAccessed","add","onTrackingEnd","call","declaredClass","split","pop","size","propertyName","setAtOrigin","_setAtOrigin","isOverridden","Overriden","clearOverride","notifyChange","override","cast","_cast","valid","I","release","setDefaultOrigin","getDefaultOrigin","invalidate","commit","DEFAULTS","acquire","y","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../has.js\";import{equals as t}from\"../lang.js\";import e from\"../Logger.js\";import s from\"../ObjectPool.js\";import{Lifecycle as i}from\"./interfaces.js\";import{Property as r}from\"./Property.js\";import{OriginId as o,idToName as n,nameToId as a}from\"./PropertyOrigin.js\";import{Store as l}from\"./Store.js\";import{trackAccess as c,runTracked as h,initializeDependencyTracking as p}from\"./tracking.js\";import{getProperties as f}from\"./utils.js\";import{Flags as u}from\"./tracking/Flags.js\";function d(t,e,s){return void 0!==t}function g(t,e,s,r){return void 0!==t&&(!(null==s&&t.flags&u.NonNullable)||(r.lifecycle,i.INITIALIZING,!1))}function m(t){return t&&\"function\"==typeof t.destroy}e.getLogger(\"esri.core.accessorSupport.Properties\");class v{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=i.INITIALIZING,this.store=new l,this._origin=o.USER;const e=this.host.constructor.__accessorMetadata__,s=e.properties;for(const i in s){const t=new r(this,i,s[i]);this.properties.set(i,t)}this.metadatas=s,this._autoDestroy=e.autoDestroy}initialize(){this.lifecycle=i.CONSTRUCTING}constructed(){this.lifecycle=i.CONSTRUCTED}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,e]of this.properties){const s=this.internalGet(t);s&&m(s)&&(s.destroy(),~e.flags&u.NonNullable&&this._internalSet(e,null)),e.destroy()}else for(const[t,e]of this.properties)e.destroy()}get initialized(){return this.lifecycle!==i.INITIALIZING}get(t){const e=this.properties.get(t);if(e.metadata.get)return e.getComputed();c(e);const s=this.store;return s.has(t)?s.get(t):e.metadata.value}originOf(t){const e=this.store.originOf(t);if(void 0===e){const e=this.properties.get(t);if(void 0!==e&&e.flags&u.HasDefaultValue)return\"defaults\"}return n(e)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const e=this.properties.get(t);if(d(e))return this.store.has(t)?this.store.get(t):e.metadata.value}internalSet(t,e){const s=this.properties.get(t);d(s)&&this._internalSet(s,e)}getDependsInfo(t,e,s){const i=this.properties.get(e);if(!d(i))return\"\";const o=new Set,n=h({onObservableAccessed:t=>o.add(t),onTrackingEnd:()=>{}},(()=>{var e;return null==(e=i.metadata.get)?void 0:e.call(t)}));let a=`${s}${t.declaredClass.split(\".\").pop()}.${e}: ${n}\\n`;if(0===o.size)return a;s+=\"  \";for(const l of o){if(!(l instanceof r))continue;const t=l.properties.host,e=l.propertyName,i=f(t);a+=i?i.getDependsInfo(t,e,s):`${s}${e}: undefined\\n`}return a}setAtOrigin(t,e,s){const i=this.properties.get(t);if(d(i))return this._setAtOrigin(i,e,s)}isOverridden(t){const e=this.properties.get(t);return void 0!==e&&!!(e.flags&u.Overriden)}clearOverride(t){const e=this.properties.get(t);void 0!==e&&e.flags&u.Overriden&&(e.flags&=~u.Overriden,e.notifyChange())}override(t,e){const s=this.properties.get(t);if(!g(s,t,e,this))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(I.release(t),!s)return;e=r}s.flags|=u.Overriden,this._internalSet(s,e)}set(t,e){const s=this.properties.get(t);if(!g(s,t,e,this))return;const i=s.metadata.cast;if(i){const t=this._cast(i,e),{valid:s,value:r}=t;if(I.release(t),!s)return;e=r}const r=s.metadata.set;r?r.call(this.host,e):this._internalSet(s,e)}setDefaultOrigin(t){this._origin=a(t)}getDefaultOrigin(){return n(this._origin)}notifyChange(t){const e=this.properties.get(t);void 0!==e&&e.notifyChange()}invalidate(t){const e=this.properties.get(t);void 0!==e&&e.invalidate()}commit(t){const e=this.properties.get(t);void 0!==e&&e.commit()}_internalSet(t,e){const s=this.lifecycle!==i.INITIALIZING?this._origin:o.DEFAULTS;this._setAtOrigin(t,e,s)}_setAtOrigin(e,s,i){const r=this.store,o=e.propertyName;r.has(o,i)&&t(s,r.get(o))&&~e.flags&u.Overriden&&i===r.originOf(o)||(e.invalidate(),r.set(o,s,i),e.commit(),p(this.host,e))}_cast(t,e){const s=I.acquire();return s.valid=!0,s.value=e,t&&(s.value=t.call(this.host,e,s)),s}}class y{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const I=new s(y);export{v as default};\n"]},"metadata":{},"sourceType":"module"}