{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../../Color.js\";\nimport { bidiText as t } from \"../../core/BidiText.js\";\nimport { packFloatRGBA as r } from \"../../core/floatRGBA.js\";\nimport { clone as o } from \"../../core/lang.js\";\nimport i from \"../../core/Logger.js\";\nimport { nextPowerOfTwo as a } from \"../../core/mathUtils.js\";\nimport { isSome as s } from \"../../core/maybe.js\";\nimport { pt2px as n, px2pt as l } from \"../../core/screenUtils.js\";\nimport { create as c, expandPointInPlace as m } from \"../../geometry/support/aaBoundingRect.js\";\nimport { getBoundsXY as f } from \"../../geometry/support/boundsUtils.js\";\nimport { Placement as y } from \"./CIMPlacements.js\";\nimport { lineGapType2LineHeight as h, horizontalAlignment2HAlign as u, verticalAlignment2VAlign as p, EnvDrawHelper as S, Transformation as M, CanvasDrawHelper as d } from \"./CIMSymbolDrawHelper.js\";\nimport { LineCapStyle as b, LineJoinStyle as g, BlockProgression as C, FontEffects as I, FontEncoding as k, FontType as x, GlyphHinting as w, TextReadingDirection as P, VerticalGlyphOrientation as L, BillBoardMode as v, TextureFilter as F, ExtremityPlacement as T } from \"./enums.js\";\nimport { getValue as z } from \"./utils.js\";\nimport { C_INFINITY as D } from \"../../views/2d/engine/vectorTiles/GeometryUtils.js\";\nimport { GLYPH_SIZE as G, MAGIC_LABEL_LINE_HEIGHT as A } from \"../../views/2d/engine/webgl/definitions.js\";\nimport { shapeGlyphs as N } from \"../../views/2d/engine/webgl/mesh/templates/shapingUtils.js\";\nconst E = Math.PI,\n      O = E / 2,\n      R = 4,\n      j = 10,\n      V = 96 / 72,\n      B = Math.PI / 180,\n      X = i.getLogger(\"esri.symbols.cim.CIMSymbolHelper\");\n\nfunction Y(e) {\n  if (!e || !e.type) return null;\n  let t;\n\n  switch (e.type) {\n    case \"cim\":\n      return e.data;\n\n    case \"web-style\":\n      return e;\n\n    case \"simple-marker\":\n      t = $.fromSimpleMarker(e);\n      break;\n\n    case \"picture-marker\":\n      t = $.fromPictureMarker(e);\n      break;\n\n    case \"simple-line\":\n      t = $.fromSimpleLineSymbol(e);\n      break;\n\n    case \"simple-fill\":\n      t = $.fromSimpleFillSymbol(e);\n      break;\n\n    case \"picture-fill\":\n      t = $.fromPictureFillSymbol(e);\n      break;\n\n    case \"text\":\n      t = $.fromTextSymbol(e);\n  }\n\n  return {\n    type: \"CIMSymbolReference\",\n    symbol: t\n  };\n}\n\nfunction U(e, t) {\n  switch (t.type) {\n    case \"CIMSymbolReference\":\n      return U(e, t.symbol);\n\n    case \"CIMPointSymbol\":\n      {\n        const r = {\n          x: 0,\n          y: 0\n        };\n        e.drawSymbol(t, r);\n        break;\n      }\n\n    case \"CIMLineSymbol\":\n      {\n        const r = {\n          paths: [[[0, 0], [0, 1]]]\n        };\n        e.drawSymbol(t, r);\n        break;\n      }\n\n    case \"CIMPolygonSymbol\":\n      {\n        const r = {\n          rings: [[[0, 0], [0, 1], [0, 0]]]\n        };\n        e.drawSymbol(t, r);\n        break;\n      }\n\n    case \"CIMTextSymbol\":\n      {\n        const r = {\n          x: 0,\n          y: 0\n        };\n        e.drawSymbol(t, r);\n        break;\n      }\n\n    case \"CIMVectorMarker\":\n      {\n        const r = new y();\n        e.drawMarker(t, r);\n        break;\n      }\n  }\n\n  return e.envelope();\n}\n\nfunction _(e) {\n  if (!e) return 0;\n\n  switch (e.type) {\n    case \"CIMMarkerPlacementAlongLineSameSize\":\n    case \"CIMMarkerPlacementAlongLineRandomSize\":\n    case \"CIMMarkerPlacementAtExtremities\":\n    case \"CIMMarkerPlacementAtMeasuredUnits\":\n    case \"CIMMarkerPlacementAtRatioPositions\":\n    case \"CIMMarkerPlacementOnLine\":\n    case \"CIMMarkerPlacementOnVertices\":\n      return Math.abs(e.offset);\n\n    default:\n      return 0;\n  }\n}\n\nfunction H(e) {\n  if (!e) return 0;\n\n  switch (e.type) {\n    case \"CIMGeometricEffectArrow\":\n      return Math.abs(.5 * e.width);\n\n    case \"CIMGeometricEffectBuffer\":\n      return Math.abs(e.size);\n\n    case \"CIMGeometricEffectExtension\":\n    case \"CIMGeometricEffectRadial\":\n      return Math.abs(e.length);\n\n    case \"CIMGeometricEffectJog\":\n      return Math.abs(.5 * e.length);\n\n    case \"CIMGeometricEffectMove\":\n      return Math.max(Math.abs(z(e.offsetX)), Math.abs(z(e.offsetY)));\n\n    case \"CIMGeometricEffectOffset\":\n    case \"CIMGeometricEffectOffsetTangent\":\n      return Math.abs(e.offset);\n\n    case \"CIMGeometricEffectRegularPolygon\":\n      return Math.abs(e.radius);\n\n    case \"CIMGeometricEffectRotate\":\n    case \"CIMGeometricEffectScale\":\n    default:\n      return 0;\n\n    case \"CIMGeometricEffectTaperedPolygon\":\n      return .5 * Math.max(Math.abs(e.fromWidth), Math.abs(e.toWidth));\n\n    case \"CIMGeometricEffectWave\":\n      return Math.abs(e.amplitude);\n  }\n}\n\nfunction q(e) {\n  if (!e) return 0;\n  let t = 0;\n\n  for (const r of e) t += H(r);\n\n  return t;\n}\n\nclass W {\n  getSymbolInflateSize(e, t, r, o, i) {\n    return e || (e = [0, 0, 0, 0]), t ? this._getInflateSize(e, t, r, o, i) : e;\n  }\n\n  static safeSize(e) {\n    const t = Math.max(Math.abs(e[0]), Math.abs(e[2])),\n          r = Math.max(Math.abs(e[1]), Math.abs(e[3]));\n    return Math.sqrt(t * t + r * r);\n  }\n\n  _vectorMarkerBounds(e, t, r, o) {\n    let i = !0;\n    const a = c();\n    if (t && t.markerGraphics) for (const s of t.markerGraphics) {\n      const t = [0, 0, 0, 0];\n      s.geometry && (f(a, s.geometry), t[0] = 0, t[1] = 0, t[2] = 0, t[3] = 0, this.getSymbolInflateSize(t, s.symbol, r, 0, o), a[0] += t[0], a[1] += t[1], a[2] += t[2], a[3] += t[3], i ? (e[0] = a[0], e[1] = a[1], e[2] = a[2], e[3] = a[3], i = !1) : (e[0] = Math.min(e[0], a[0]), e[1] = Math.min(e[1], a[1]), e[2] = Math.max(e[2], a[2]), e[3] = Math.max(e[3], a[3])));\n    }\n    return e;\n  }\n\n  _getInflateSize(e, t, r, o, i) {\n    if (ne(t)) {\n      const a = this._getLayersInflateSize(e, t.symbolLayers, r, o, i),\n            s = q(t.effects);\n\n      return s > 0 && (a[0] -= s, a[1] -= s, a[2] += s, a[3] += s), a;\n    }\n\n    return this._getTextInflatedSize(e, t, i);\n  }\n\n  _getLayersInflateSize(e, t, r, o, i) {\n    let a = !0;\n    if (!t) return e;\n\n    for (const n of t) {\n      if (!n) continue;\n      let t = [0, 0, 0, 0];\n\n      switch (n.type) {\n        case \"CIMSolidFill\":\n        case \"CIMPictureFill\":\n        case \"CIMHatchFill\":\n        case \"CIMGradientFill\":\n          break;\n\n        case \"CIMSolidStroke\":\n        case \"CIMPictureStroke\":\n        case \"CIMGradientStroke\":\n          {\n            const e = n;\n            let r = e.width;\n            e.capStyle === b.Square || e.joinStyle === g.Miter ? r /= 1.4142135623730951 : r /= 2, t[0] = -r, t[1] = -r, t[2] = r, t[3] = r;\n            break;\n          }\n\n        case \"CIMCharacterMarker\":\n        case \"CIMVectorMarker\":\n        case \"CIMPictureMarker\":\n          {\n            const e = n;\n\n            if (\"CIMVectorMarker\" === n.type) {\n              const e = n;\n\n              if (t = this._vectorMarkerBounds(t, e, r, i), e.frame) {\n                const r = (e.frame.xmin + e.frame.xmax) / 2,\n                      o = (e.frame.ymin + e.frame.ymax) / 2;\n                t[0] -= r, t[1] -= o, t[2] -= r, t[3] -= o;\n                const i = e.size / (e.frame.ymax - e.frame.ymin);\n                t[0] *= i, t[1] *= i, t[2] *= i, t[3] *= i;\n              }\n            } else if (\"CIMPictureMarker\" === n.type) {\n              const o = n,\n                    i = r.getResource(o.url);\n              let a = 1;\n              s(i) && i.height && (a = i.width / i.height);\n              const l = e.size / 2,\n                    c = e.size * a * o.scaleX / 2;\n              t = [-c, -l, c, l];\n            } else {\n              const r = e.size / 2;\n              t = [-r, -r, r, r];\n            }\n\n            if (e.anchorPoint) {\n              let r, o;\n              \"Absolute\" === e.anchorPointUnits ? (r = e.anchorPoint.x, o = e.anchorPoint.y) : (r = e.anchorPoint.x * (t[2] - t[0]), o = e.anchorPoint.y * (t[3] - t[1])), t[0] -= r, t[1] -= o, t[2] -= r, t[3] -= o;\n            }\n\n            let a = z(e.rotation);\n\n            if (e.rotateClockwise && (a = -a), o && (a -= o), a) {\n              const e = B * a,\n                    r = Math.cos(e),\n                    o = Math.sin(e),\n                    i = c([D, D, -D, -D]);\n              m(i, [t[0] * r - t[1] * o, t[0] * o + t[1] * r]), m(i, [t[0] * r - t[3] * o, t[0] * o + t[3] * r]), m(i, [t[2] * r - t[1] * o, t[2] * o + t[1] * r]), m(i, [t[2] * r - t[3] * o, t[2] * o + t[3] * r]), t = i;\n            }\n\n            let l = z(e.offsetX),\n                f = z(e.offsetY);\n\n            if (o) {\n              const e = B * o,\n                    t = Math.cos(e),\n                    r = Math.sin(e),\n                    i = l * r + f * t;\n              l = l * t - f * r, f = i;\n            }\n\n            t[0] += l, t[1] += f, t[2] += l, t[3] += f;\n\n            const y = _(e.markerPlacement);\n\n            y > 0 && (t[0] -= y, t[1] -= y, t[2] += y, t[3] += y);\n            break;\n          }\n      }\n\n      const l = q(n.effects);\n      l > 0 && (t[0] -= l, t[1] -= l, t[2] += l, t[3] += l), a ? (e[0] = t[0], e[1] = t[1], e[2] = t[2], e[3] = t[3], a = !1) : (e[0] = Math.min(e[0], t[0]), e[1] = Math.min(e[1], t[1]), e[2] = Math.max(e[2], t[2]), e[3] = Math.max(e[3], t[3]));\n    }\n\n    return e;\n  }\n\n  _getTextInflatedSize(e, r, o) {\n    var i, a;\n    const s = null != (i = r.height) ? i : j;\n    if (e[0] = -s / 2, e[1] = -s / 2, e[2] = s / 2, e[3] = s / 2, !o) return e;\n    const n = o.get(r);\n    if (!n) return e;\n    const {\n      text: l,\n      mosaicItem: c\n    } = n;\n    if (!c || 0 === c.glyphMosaicItems.length) return e;\n    const m = h(r.lineGapType, null != (a = r.lineGap) ? a : 0, s),\n          f = t(l)[1],\n          y = c.glyphMosaicItems,\n          S = N(y, f, {\n      scale: s / G,\n      angle: z(r.angle),\n      xOffset: z(r.offsetX),\n      yOffset: z(r.offsetY),\n      hAlign: u(r.horizontalAlignment),\n      vAlign: p(r.verticalAlignment),\n      maxLineWidth: 512,\n      lineHeight: A * Math.max(.25, Math.min(m || 1, 4)),\n      decoration: r.font.decoration || \"none\",\n      isCIM: !0\n    }).boundsT;\n    return e[0] = S.x - S.halfWidth, e[1] = -S.y - S.halfHeight, e[2] = S.x + S.halfWidth, e[3] = -S.y + S.halfHeight, e;\n  }\n\n}\n\nclass $ {\n  static getEnvelope(e, t) {\n    const r = new S(t);\n\n    if (Array.isArray(e)) {\n      let t;\n\n      for (const o of e) t ? t.union(U(r, o)) : t = U(r, o);\n\n      return t;\n    }\n\n    return U(r, e);\n  }\n\n  static getTextureAnchor(e, t) {\n    const r = this.getEnvelope(e, t);\n    if (!r) return [0, 0, 0];\n    const o = (r.x + .5 * r.width) * V,\n          i = -(r.y + .5 * r.height) * V,\n          a = r.width * V + 2,\n          s = r.height * V + 2;\n    return [o / a, i / s, s];\n  }\n\n  static rasterize(e, t, r, o) {\n    let i = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : !0;\n    const a = r || this.getEnvelope(t, o);\n    if (!a) return [null, 0, 0, 0, 0];\n    const s = (a.x + .5 * a.width) * V,\n          n = (a.y + .5 * a.height) * V;\n    e.width = a.width * V, e.height = a.height * V, r || (e.width += 2, e.height += 2);\n    const l = e.getContext(\"2d\"),\n          c = M.createScale(V, -V);\n    c.translate(.5 * e.width - s, .5 * e.height + n);\n    const m = new d(l, o, c);\n\n    switch (t.type) {\n      case \"CIMPointSymbol\":\n        {\n          const e = {\n            type: \"point\",\n            x: 0,\n            y: 0\n          };\n          m.drawSymbol(t, e);\n          break;\n        }\n\n      case \"CIMVectorMarker\":\n        {\n          const e = new y();\n          m.drawMarker(t, e);\n          break;\n        }\n    }\n\n    const f = l.getImageData(0, 0, e.width, e.height),\n          h = new Uint8Array(f.data);\n\n    if (i) {\n      let e;\n\n      for (let t = 0; t < h.length; t += 4) e = h[t + 3] / 255, h[t] = h[t] * e, h[t + 1] = h[t + 1] * e, h[t + 2] = h[t + 2] * e;\n    }\n\n    return [h, e.width, e.height, -s / e.width, -n / e.height];\n  }\n\n  static fromTextSymbol(e) {\n    const {\n      angle: r,\n      color: o,\n      font: i,\n      haloColor: a,\n      haloSize: s,\n      horizontalAlignment: n,\n      kerning: l,\n      text: c,\n      verticalAlignment: m,\n      xoffset: f,\n      yoffset: y\n    } = e;\n    let h, u, p, S, M;\n    i && (h = i.family, u = i.style, p = i.weight, S = i.size, M = i.decoration);\n    let d = !1;\n\n    if (c) {\n      d = t(c)[1];\n    }\n\n    return {\n      type: \"CIMPointSymbol\",\n      symbolLayers: [{\n        type: \"CIMVectorMarker\",\n        enable: !0,\n        anchorPointUnits: \"Relative\",\n        dominantSizeAxis3D: \"Y\",\n        size: 10,\n        billboardMode3D: \"FaceNearPlane\",\n        frame: {\n          xmin: -5,\n          ymin: -5,\n          xmax: 5,\n          ymax: 5\n        },\n        markerGraphics: [{\n          type: \"CIMMarkerGraphic\",\n          geometry: {\n            x: 0,\n            y: 0\n          },\n          symbol: {\n            type: \"CIMTextSymbol\",\n            angle: r,\n            blockProgression: C.BTT,\n            depth3D: 1,\n            extrapolateBaselines: !0,\n            fontEffects: I.Normal,\n            fontEncoding: k.Unicode,\n            fontFamilyName: h || \"Arial\",\n            fontStyleName: oe(u, p),\n            fontType: x.Unspecified,\n            haloSize: s,\n            height: S,\n            hinting: w.Default,\n            horizontalAlignment: ee(null != n ? n : \"center\"),\n            kerning: l,\n            letterWidth: 100,\n            ligatures: !0,\n            lineGapType: \"Multiple\",\n            offsetX: z(f),\n            offsetY: z(y),\n            strikethrough: \"line-through\" === M,\n            underline: \"underline\" === M,\n            symbol: {\n              type: \"CIMPolygonSymbol\",\n              symbolLayers: [{\n                type: \"CIMSolidFill\",\n                enable: !0,\n                color: re(o)\n              }]\n            },\n            haloSymbol: {\n              type: \"CIMPolygonSymbol\",\n              symbolLayers: [{\n                type: \"CIMSolidFill\",\n                enable: !0,\n                color: re(a)\n              }]\n            },\n            shadowColor: [0, 0, 0, 255],\n            shadowOffsetX: 1,\n            shadowOffsetY: 1,\n            textCase: \"Normal\",\n            textDirection: d ? P.RTL : P.LTR,\n            verticalAlignment: te(null != m ? m : \"baseline\"),\n            verticalGlyphOrientation: L.Right,\n            wordSpacing: 100,\n            billboardMode3D: v.FaceNearPlane\n          },\n          textString: c\n        }],\n        scaleSymbolsProportionally: !0,\n        respectFrame: !0\n      }],\n      scaleX: 1,\n      angleAlignment: \"Display\"\n    };\n  }\n\n  static fromPictureFillSymbol(e) {\n    const {\n      height: t,\n      outline: r,\n      width: o,\n      xoffset: i,\n      xscale: a,\n      yoffset: s,\n      yscale: n\n    } = e,\n          l = [],\n          c = {\n      type: \"CIMPolygonSymbol\",\n      symbolLayers: l\n    };\n\n    if (r) {\n      const {\n        cap: e,\n        join: t,\n        miterLimit: o,\n        width: i\n      } = r;\n      l.push({\n        type: \"CIMSolidStroke\",\n        color: re(r.color),\n        capStyle: Q(e),\n        joinStyle: Z(t),\n        miterLimit: o,\n        width: i\n      });\n    }\n\n    let m = e.url;\n    \"esriPFS\" === e.type && e.imageData && (m = e.imageData);\n    const f = \"angle\" in e ? e.angle : 0,\n          y = o * (a || 1),\n          h = t * (n || 1);\n    return l.push({\n      type: \"CIMPictureFill\",\n      invertBackfaceTexture: !1,\n      scaleX: 1,\n      textureFilter: F.Picture,\n      tintColor: null,\n      url: m,\n      height: h,\n      width: y,\n      offsetX: z(i),\n      offsetY: z(s),\n      rotation: z(-f),\n      colorSubstitutions: null\n    }), c;\n  }\n\n  static fromSimpleFillSymbol(e) {\n    const {\n      color: t,\n      style: r,\n      outline: i\n    } = e,\n          s = [],\n          n = {\n      type: \"CIMPolygonSymbol\",\n      symbolLayers: s\n    };\n    let l = null;\n\n    if (i) {\n      const {\n        cap: e,\n        join: t,\n        style: r\n      } = i;\n      \"solid\" !== r && \"none\" !== r && \"esriSLSSolid\" !== r && \"esriSLSNull\" !== r && (l = [{\n        type: \"CIMGeometricEffectDashes\",\n        dashTemplate: se(r, e),\n        lineDashEnding: \"NoConstraint\",\n        scaleDash: !0,\n        offsetAlongLine: null\n      }]), s.push({\n        type: \"CIMSolidStroke\",\n        color: re(i.color),\n        capStyle: Q(e),\n        joinStyle: Z(t),\n        miterLimit: i.miterLimit,\n        width: i.width,\n        effects: l\n      });\n    }\n\n    if (r && \"solid\" !== r && \"none\" !== r && \"esriSFSSolid\" !== r && \"esriSFSNull\" !== r) {\n      const e = {\n        type: \"CIMLineSymbol\",\n        symbolLayers: [{\n          type: \"CIMSolidStroke\",\n          color: re(t),\n          capStyle: b.Butt,\n          joinStyle: g.Miter,\n          width: .75\n        }]\n      };\n      let i = 0;\n      const n = a(Math.ceil(window.devicePixelRatio)),\n            l = ce(r) ? 8 * n : 10 * n;\n\n      switch (r) {\n        case \"vertical\":\n        case \"esriSFSVertical\":\n          i = 90;\n          break;\n\n        case \"forward-diagonal\":\n        case \"esriSFSForwardDiagonal\":\n        case \"diagonal-cross\":\n        case \"esriSFSDiagonalCross\":\n          i = -45;\n          break;\n\n        case \"backward-diagonal\":\n        case \"esriSFSBackwardDiagonal\":\n          i = 45;\n          break;\n\n        case \"cross\":\n        case \"esriSFSCross\":\n          i = 0;\n      }\n\n      s.push({\n        type: \"CIMHatchFill\",\n        lineSymbol: e,\n        offsetX: 0,\n        offsetY: 0,\n        rotation: i,\n        separation: l\n      }), \"cross\" === r || \"esriSFSCross\" === r ? s.push({\n        type: \"CIMHatchFill\",\n        lineSymbol: o(e),\n        offsetX: 0,\n        offsetY: 0,\n        rotation: 90,\n        separation: l\n      }) : \"diagonal-cross\" !== r && \"esriSFSDiagonalCross\" !== r || s.push({\n        type: \"CIMHatchFill\",\n        lineSymbol: o(e),\n        offsetX: 0,\n        offsetY: 0,\n        rotation: 45,\n        separation: l\n      });\n    } else !r || \"solid\" !== r && \"esriSFSSolid\" !== r || s.push({\n      type: \"CIMSolidFill\",\n      enable: !0,\n      color: re(t)\n    });\n\n    return n;\n  }\n\n  static fromSimpleLineSymbol(e) {\n    const {\n      cap: t,\n      color: r,\n      join: o,\n      marker: i,\n      miterLimit: a,\n      style: s,\n      width: n\n    } = e;\n    let l = null;\n    \"solid\" !== s && \"none\" !== s && \"esriSLSSolid\" !== s && \"esriSLSNull\" !== s && (l = [{\n      type: \"CIMGeometricEffectDashes\",\n      dashTemplate: se(s, t),\n      lineDashEnding: \"NoConstraint\",\n      scaleDash: !0,\n      offsetAlongLine: null\n    }]);\n    const c = [];\n\n    if (i) {\n      let e;\n\n      switch (i.placement) {\n        case \"begin-end\":\n          e = T.Both;\n          break;\n\n        case \"begin\":\n          e = T.JustBegin;\n          break;\n\n        case \"end\":\n          e = T.JustEnd;\n          break;\n\n        default:\n          e = T.None;\n      }\n\n      const t = $.fromSimpleMarker(i, n, r).symbolLayers[0];\n      t.markerPlacement = {\n        type: \"CIMMarkerPlacementAtExtremities\",\n        angleToLine: !0,\n        offset: 0,\n        extremityPlacement: e,\n        offsetAlongLine: 0\n      }, c.push(t);\n    }\n\n    return \"none\" !== s && \"esriSLSNull\" !== s && c.push({\n      type: \"CIMSolidStroke\",\n      color: re(r),\n      capStyle: Q(t),\n      joinStyle: Z(o),\n      miterLimit: a,\n      width: n,\n      effects: l\n    }), {\n      type: \"CIMLineSymbol\",\n      symbolLayers: c\n    };\n  }\n\n  static fromPictureMarker(e) {\n    const {\n      angle: t,\n      height: r,\n      width: o,\n      xoffset: i,\n      yoffset: a\n    } = e;\n    let s = e.url;\n    return \"esriPMS\" === e.type && e.imageData && (s = e.imageData), {\n      type: \"CIMPointSymbol\",\n      symbolLayers: [{\n        type: \"CIMPictureMarker\",\n        invertBackfaceTexture: !1,\n        scaleX: 1,\n        textureFilter: F.Picture,\n        tintColor: null,\n        url: s,\n        size: r,\n        width: o,\n        offsetX: z(i),\n        offsetY: z(a),\n        rotation: z(-t)\n      }]\n    };\n  }\n\n  static fromSimpleMarker(e, t, r) {\n    var o;\n    const {\n      style: i\n    } = e,\n          a = null != (o = e.color) ? o : r;\n\n    if (\"path\" === i) {\n      const t = [];\n\n      if (\"outline\" in e && e.outline) {\n        const r = e.outline;\n        t.push({\n          type: \"CIMSolidStroke\",\n          enable: !0,\n          width: n(Math.round(l(r.width))),\n          color: re(r.color)\n        });\n      }\n\n      t.push({\n        type: \"CIMSolidFill\",\n        enable: !0,\n        color: re(a),\n        path: e.path\n      });\n      const [r, o] = le(\"square\");\n      return {\n        type: \"CIMPointSymbol\",\n        symbolLayers: [{\n          type: \"CIMVectorMarker\",\n          enable: !0,\n          rotation: z(-e.angle),\n          size: z(e.size || 6),\n          offsetX: z(e.xoffset),\n          offsetY: z(e.yoffset),\n          frame: r,\n          markerGraphics: [{\n            type: \"CIMMarkerGraphic\",\n            geometry: o,\n            symbol: {\n              type: \"CIMPolygonSymbol\",\n              symbolLayers: t\n            }\n          }]\n        }]\n      };\n    }\n\n    const [s, c] = le(i);\n    let m;\n\n    if (c && s) {\n      const r = [];\n\n      if (\"outline\" in e && e.outline) {\n        const t = e.outline;\n        r.push({\n          type: \"CIMSolidStroke\",\n          enable: !0,\n          width: t.width > .667 ? n(Math.round(l(t.width))) : t.width,\n          color: re(t.color)\n        });\n      } else !t || \"line-marker\" !== e.type || \"cross\" !== e.style && \"x\" !== e.style || r.push({\n        type: \"CIMSolidStroke\",\n        enable: !0,\n        width: t,\n        color: re(a)\n      });\n\n      r.push({\n        type: \"CIMSolidFill\",\n        enable: !0,\n        color: re(a)\n      });\n      const o = {\n        type: \"CIMPolygonSymbol\",\n        symbolLayers: r\n      };\n      m = {\n        type: \"CIMPointSymbol\",\n        symbolLayers: [{\n          type: \"CIMVectorMarker\",\n          enable: !0,\n          rotation: z(-e.angle),\n          size: z(e.size || 6 * t),\n          offsetX: z(e.xoffset),\n          offsetY: z(e.yoffset),\n          frame: s,\n          markerGraphics: [{\n            type: \"CIMMarkerGraphic\",\n            geometry: c,\n            symbol: o\n          }]\n        }]\n      };\n    }\n\n    return m;\n  }\n\n  static fromCIMHatchFill(e) {\n    var t;\n    const r = null != (t = e.separation) ? t : R,\n          o = r / 2,\n          i = 4;\n    let a = this._getLineSymbolPeriod(e.lineSymbol) || i;\n\n    for (; a < i;) a *= 2;\n\n    const s = a / 2;\n    return {\n      type: \"CIMVectorMarker\",\n      frame: {\n        xmin: -s,\n        xmax: s,\n        ymin: -o,\n        ymax: o\n      },\n      markerGraphics: [{\n        type: \"CIMMarkerGraphic\",\n        geometry: {\n          paths: [[[-s, 0], [s, 0]]]\n        },\n        symbol: e.lineSymbol\n      }],\n      size: r\n    };\n  }\n\n  static _getLineSymbolPeriod(e) {\n    if (e) {\n      const t = this._getEffectsRepeat(e.effects);\n\n      if (t) return t;\n      if (e.symbolLayers) for (const r of e.symbolLayers) {\n        const e = this._getEffectsRepeat(r.effects);\n\n        if (e) return e;\n\n        if (r) {\n          const e = this._getPlacementRepeat(r.markerPlacement);\n\n          if (e) return e;\n        }\n      }\n    }\n\n    return 0;\n  }\n\n  static _getEffectsRepeat(e) {\n    if (e) for (const t of e) if (t) switch (t.type) {\n      case \"CIMGeometricEffectDashes\":\n        {\n          const e = t.dashTemplate;\n\n          if (e && e.length) {\n            let t = 0;\n\n            for (const r of e) t += r;\n\n            return 1 & e.length && (t *= 2), t;\n          }\n\n          break;\n        }\n\n      case \"CIMGeometricEffectWave\":\n        return t.period;\n\n      default:\n        X.error(`unsupported geometric effect type ${t.type}`);\n    }\n    return 0;\n  }\n\n  static _getPlacementRepeat(e) {\n    if (e) switch (e.type) {\n      case \"CIMMarkerPlacementAlongLineSameSize\":\n      case \"CIMMarkerPlacementAlongLineRandomSize\":\n      case \"CIMMarkerPlacementAlongLineVariableSize\":\n        {\n          const t = e.placementTemplate;\n\n          if (t && t.length) {\n            let e = 0;\n\n            for (const r of t) e += r;\n\n            return 1 & t.length && (e *= 2), e;\n          }\n\n          break;\n        }\n    }\n    return 0;\n  }\n\n  static fromCIMInsidePolygon(e) {\n    const t = e.markerPlacement,\n          r = {\n      type: e.type,\n      ...e\n    };\n    let o, i, a, s;\n\n    if (r.markerPlacement = null, r.anchorPoint = null, !0 === t.shiftOddRows) {\n      i = t.stepX / 2, a = t.stepY, s = 2 * t.stepY;\n      o = [{\n        x: -i,\n        y: 0\n      }, {\n        x: i,\n        y: 0\n      }, {\n        x: 0,\n        y: a\n      }, {\n        x: 0,\n        y: -a\n      }].map(e => ({\n        type: \"CIMMarkerGraphic\",\n        geometry: e,\n        symbol: {\n          type: \"CIMPointSymbol\",\n          symbolLayers: [r]\n        }\n      }));\n    } else i = t.stepX / 2, a = t.stepY / 2, s = t.stepY, o = [{\n      type: \"CIMMarkerGraphic\",\n      geometry: {\n        x: 0,\n        y: 0\n      },\n      symbol: {\n        type: \"CIMPointSymbol\",\n        symbolLayers: [r]\n      }\n    }];\n\n    return {\n      type: \"CIMVectorMarker\",\n      frame: {\n        xmin: -i,\n        xmax: i,\n        ymin: -a,\n        ymax: a\n      },\n      markerGraphics: o,\n      size: s\n    };\n  }\n\n  static getFillColor(e) {\n    if (!e) return null;\n\n    switch (e.type) {\n      case \"CIMPolygonSymbol\":\n        if (e.symbolLayers) for (const t of e.symbolLayers) {\n          const e = $.getFillColor(t);\n          if (null != e) return e;\n        }\n        break;\n\n      case \"CIMTextSymbol\":\n        return $.getFillColor(e.symbol);\n\n      case \"CIMSolidFill\":\n        return e.color;\n    }\n  }\n\n  static getStrokeColor(e) {\n    if (e) switch (e.type) {\n      case \"CIMPolygonSymbol\":\n      case \"CIMLineSymbol\":\n        if (e.symbolLayers) for (const t of e.symbolLayers) {\n          const e = $.getStrokeColor(t);\n          if (void 0 !== e) return e;\n        }\n        break;\n\n      case \"CIMTextSymbol\":\n        return $.getStrokeColor(e.symbol);\n\n      case \"CIMSolidStroke\":\n        return e.color;\n    }\n  }\n\n  static getStrokeWidth(e) {\n    if (e) switch (e.type) {\n      case \"CIMPolygonSymbol\":\n      case \"CIMLineSymbol\":\n        if (e.symbolLayers) for (const t of e.symbolLayers) {\n          const e = $.getStrokeWidth(t);\n          if (void 0 !== e) return e;\n        }\n        break;\n\n      case \"CIMTextSymbol\":\n        return $.getStrokeWidth(e.symbol);\n\n      case \"CIMSolidStroke\":\n      case \"CIMGradientStroke\":\n      case \"CIMPictureStroke\":\n        return e.width;\n    }\n  }\n\n  static getSize(e) {\n    if (e) switch (e.type) {\n      case \"CIMPointSymbol\":\n      case \"CIMLineSymbol\":\n      case \"CIMPolygonSymbol\":\n        {\n          let t = 0;\n          if (e.symbolLayers) for (const r of e.symbolLayers) {\n            const e = $.getSize(r);\n            e > t && (t = e);\n          }\n          return t;\n        }\n\n      case \"CIMSolidStroke\":\n      case \"CIMPictureStroke\":\n      case \"CIMGradientStroke\":\n        return e.width;\n\n      case \"CIMCharacterMarker\":\n      case \"CIMPictureMarker\":\n      case \"CIMVectorMarker\":\n        return e.size;\n    }\n  }\n\n  static getMarkerScaleRatio(e) {\n    if (e && \"CIMVectorMarker\" === e.type) if (!1 !== e.scaleSymbolsProportionally && e.frame) {\n      const t = e.frame.ymax - e.frame.ymin;\n      return e.size / t;\n    }\n    return 1;\n  }\n\n}\n\nclass J {\n  static rasterizeSimpleFill(e, t, r) {\n    \"solid\" !== t && \"none\" !== t && \"esriSFSSolid\" !== t && \"esriSFSNull\" !== t || console.error(\"Unexpected: style does not require rasterization\");\n    const o = a(Math.ceil(r)),\n          i = ce(t) ? 8 * o : 16 * o,\n          s = 2 * o;\n    e.width = i, e.height = i;\n    const n = e.getContext(\"2d\");\n    n.strokeStyle = \"#FFFFFF\", n.lineWidth = o, n.beginPath(), \"vertical\" !== t && \"cross\" !== t && \"esriSFSCross\" !== t && \"esriSFSVertical\" !== t || (n.moveTo(i / 2, -s), n.lineTo(i / 2, i + s)), \"horizontal\" !== t && \"cross\" !== t && \"esriSFSCross\" !== t && \"esriSFSHorizontal\" !== t || (n.moveTo(-s, i / 2), n.lineTo(i + s, i / 2)), \"forward-diagonal\" !== t && \"diagonal-cross\" !== t && \"esriSFSDiagonalCross\" !== t && \"esriSFSForwardDiagonal\" !== t || (n.moveTo(-s, -s), n.lineTo(i + s, i + s), n.moveTo(i - s, -s), n.lineTo(i + s, s), n.moveTo(-s, i - s), n.lineTo(s, i + s)), \"backward-diagonal\" !== t && \"diagonal-cross\" !== t && \"esriSFSBackwardDiagonal\" !== t && \"esriSFSDiagonalCross\" !== t || (n.moveTo(i + s, -s), n.lineTo(-s, i + s), n.moveTo(s, -s), n.lineTo(-s, s), n.moveTo(i + s, i - s), n.lineTo(i - s, i + s)), n.stroke();\n    const l = n.getImageData(0, 0, e.width, e.height),\n          c = new Uint8Array(l.data);\n    let m;\n\n    for (let a = 0; a < c.length; a += 4) m = c[a + 3] / 255, c[a] = c[a] * m, c[a + 1] = c[a + 1] * m, c[a + 2] = c[a + 2] * m;\n\n    return [c, e.width, e.height];\n  }\n\n  static rasterizeSimpleLine(e, t) {\n    return this.rasterizeDash(e, t);\n  }\n\n  static rasterizeDash(e, t) {\n    const o = \"Butt\" === t,\n          i = \"Square\" === t,\n          a = !o && !i;\n    e.length % 2 == 1 && (e = [...e, ...e]);\n    const s = 15.5,\n          n = 2 * s;\n    let l = 0;\n\n    for (const r of e) l += r;\n\n    const c = Math.round(l * s),\n          m = new Float32Array(c * n),\n          f = .5 * s;\n    let y = 0,\n        h = 0,\n        u = .5,\n        p = !0;\n\n    for (const r of e) {\n      for (y = h, h += r * s; u <= h;) {\n        let e = .5;\n\n        for (; e < n;) {\n          const t = (e - .5) * c + u - .5,\n                r = a ? (e - s) * (e - s) : Math.abs(e - s);\n          m[t] = p ? o ? Math.max(Math.max(y + f - u, r), Math.max(u - h + f, r)) : r : a ? Math.min((u - y) * (u - y) + r, (u - h) * (u - h) + r) : i ? Math.min(Math.max(u - y, r), Math.max(h - u, r)) : Math.min(Math.max(u - y + f, r), Math.max(h + f - u, r)), e++;\n        }\n\n        u++;\n      }\n\n      p = !p;\n    }\n\n    const S = m.length,\n          M = new Uint8Array(4 * S);\n\n    for (let d = 0; d < S; ++d) {\n      const e = (a ? Math.sqrt(m[d]) : m[d]) / s;\n      r(e, M, 4 * d);\n    }\n\n    return [M, c, n];\n  }\n\n}\n\nclass K {\n  static findApplicableOverrides(e, t, r) {\n    if (e && t) {\n      if (e.primitiveName) {\n        let o = !1;\n\n        for (const t of r) if (t.primitiveName === e.primitiveName) {\n          o = !0;\n          break;\n        }\n\n        if (!o) for (const i of t) i.primitiveName === e.primitiveName && r.push(i);\n      }\n\n      switch (e.type) {\n        case \"CIMPointSymbol\":\n        case \"CIMLineSymbol\":\n        case \"CIMPolygonSymbol\":\n          if (e.effects) for (const o of e.effects) K.findApplicableOverrides(o, t, r);\n          if (e.symbolLayers) for (const o of e.symbolLayers) K.findApplicableOverrides(o, t, r);\n          break;\n\n        case \"CIMTextSymbol\":\n          break;\n\n        case \"CIMSolidStroke\":\n        case \"CIMPictureStroke\":\n        case \"CIMGradientStroke\":\n        case \"CIMSolidFill\":\n        case \"CIMPictureFill\":\n        case \"CIMHatchFill\":\n        case \"CIMGradientFill\":\n        case \"CIMVectorMarker\":\n        case \"CIMCharacterMarker\":\n        case \"CIMPictureMarker\":\n          if (e.effects) for (const o of e.effects) K.findApplicableOverrides(o, t, r);\n\n          if (e.markerPlacement && K.findApplicableOverrides(e.markerPlacement, t, r), \"CIMVectorMarker\" === e.type) {\n            if (e.markerGraphics) for (const o of e.markerGraphics) K.findApplicableOverrides(o, t, r), K.findApplicableOverrides(o.symbol, t, r);\n          } else \"CIMCharacterMarker\" === e.type ? K.findApplicableOverrides(e.symbol, t, r) : \"CIMHatchFill\" === e.type && K.findApplicableOverrides(e.lineSymbol, t, r);\n\n      }\n    }\n  }\n\n  static findEffectOverrides(e, t, r) {\n    if (!t || !e) return;\n    const o = e.length;\n\n    for (let i = 0; i < o; i++) {\n      const o = e[i],\n            a = null == o ? void 0 : o.primitiveName;\n\n      if (a) {\n        let e = !1;\n\n        for (const t of r) if (t.primitiveName === a) {\n          e = !0;\n          break;\n        }\n\n        if (!e) for (const o of t) o.primitiveName === a && r.push(o);\n      }\n    }\n  }\n\n  static applyOverrides(e, t, r, o) {\n    if (!t) return;\n\n    const i = e => e ? e.charAt(0).toLowerCase() + e.substr(1) : e;\n\n    if (e.primitiveName) for (const a of t) if (a.primitiveName === e.primitiveName) {\n      const t = i(a.propertyName);\n\n      if (o && o.push({\n        cim: e,\n        nocapPropertyName: t,\n        value: e[t]\n      }), a.expression && (a.value = K.toValue(a.propertyName, a.expression)), r) {\n        let t = !1;\n\n        for (const o of r) o.primitiveName === e.primitiveName && (t = !0);\n\n        t || r.push(a);\n      }\n\n      e[t] = a.value;\n    }\n\n    switch (e.type) {\n      case \"CIMPointSymbol\":\n      case \"CIMLineSymbol\":\n      case \"CIMPolygonSymbol\":\n        if (e.effects) for (const i of e.effects) K.applyOverrides(i, t, r, o);\n        if (e.symbolLayers) for (const i of e.symbolLayers) K.applyOverrides(i, t, r, o);\n        break;\n\n      case \"CIMTextSymbol\":\n        break;\n\n      case \"CIMSolidStroke\":\n      case \"CIMSolidFill\":\n      case \"CIMVectorMarker\":\n        if (e.effects) for (const i of e.effects) K.applyOverrides(i, t, r, o);\n        if (\"CIMVectorMarker\" === e.type && e.markerGraphics) for (const i of e.markerGraphics) K.applyOverrides(i, t, r, o), K.applyOverrides(i.symbol, t, r, o);\n    }\n  }\n\n  static restoreOverrides(e) {\n    for (const t of e) t.cim[t.nocapPropertyName] = t.value;\n  }\n\n  static buildOverrideKey(e) {\n    let t = \"\";\n\n    for (const r of e) void 0 !== r.value && (t += `${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);\n\n    return t;\n  }\n\n  static toValue(t, r) {\n    if (\"DashTemplate\" === t) return r.split(\" \").map(e => Number(e));\n\n    if (\"Color\" === t) {\n      const t = new e(r).toRgba();\n      return t[3] *= 255, t;\n    }\n\n    return r;\n  }\n\n}\n\nconst Q = e => {\n  if (!e) return b.Butt;\n\n  switch (e) {\n    case \"butt\":\n      return b.Butt;\n\n    case \"square\":\n      return b.Square;\n\n    case \"round\":\n      return b.Round;\n  }\n},\n      Z = e => {\n  if (!e) return g.Miter;\n\n  switch (e) {\n    case \"miter\":\n      return g.Miter;\n\n    case \"round\":\n      return g.Round;\n\n    case \"bevel\":\n      return g.Bevel;\n  }\n},\n      ee = e => {\n  if (!e) return \"Center\";\n\n  switch (e) {\n    case \"left\":\n      return \"Left\";\n\n    case \"right\":\n      return \"Right\";\n\n    case \"center\":\n      return \"Center\";\n\n    case \"justify\":\n      return \"Justify\";\n  }\n},\n      te = e => {\n  if (!e) return \"Center\";\n\n  switch (e) {\n    case \"baseline\":\n      return \"Baseline\";\n\n    case \"top\":\n      return \"Top\";\n\n    case \"middle\":\n      return \"Center\";\n\n    case \"bottom\":\n      return \"Bottom\";\n  }\n},\n      re = e => {\n  if (!e) return [0, 0, 0, 0];\n  const {\n    r: t,\n    g: r,\n    b: o,\n    a: i\n  } = e;\n  return [t, r, o, 255 * i];\n},\n      oe = (e, t) => {\n  const r = ie(t),\n        o = ae(e);\n  return r && o ? `${r}-${o}` : `${r}${o}`;\n},\n      ie = e => {\n  if (!e) return \"\";\n\n  switch (e.toLowerCase()) {\n    case \"bold\":\n    case \"bolder\":\n      return \"bold\";\n  }\n\n  return \"\";\n},\n      ae = e => {\n  if (!e) return \"\";\n\n  switch (e.toLowerCase()) {\n    case \"italic\":\n    case \"oblique\":\n      return \"italic\";\n  }\n\n  return \"\";\n},\n      se = (e, t) => {\n  const r = \"butt\" === t;\n\n  switch (e) {\n    case \"dash\":\n    case \"esriSLSDash\":\n      return r ? [4, 3] : [3, 4];\n\n    case \"dash-dot\":\n    case \"esriSLSDashDot\":\n      return r ? [4, 3, 1, 3] : [3, 4, 0, 4];\n\n    case \"dot\":\n    case \"esriSLSDot\":\n      return r ? [1, 3] : [0, 4];\n\n    case \"long-dash\":\n    case \"esriSLSLongDash\":\n      return r ? [8, 3] : [7, 4];\n\n    case \"long-dash-dot\":\n    case \"esriSLSLongDashDot\":\n      return r ? [8, 3, 1, 3] : [7, 4, 0, 4];\n\n    case \"long-dash-dot-dot\":\n    case \"esriSLSDashDotDot\":\n      return r ? [8, 3, 1, 3, 1, 3] : [7, 4, 0, 4, 0, 4];\n\n    case \"short-dash\":\n    case \"esriSLSShortDash\":\n      return r ? [4, 1] : [3, 2];\n\n    case \"short-dash-dot\":\n    case \"esriSLSShortDashDot\":\n      return r ? [4, 1, 1, 1] : [3, 2, 0, 2];\n\n    case \"short-dash-dot-dot\":\n    case \"esriSLSShortDashDotDot\":\n      return r ? [4, 1, 1, 1, 1, 1] : [3, 2, 0, 2, 0, 2];\n\n    case \"short-dot\":\n    case \"esriSLSShortDot\":\n      return r ? [1, 1] : [0, 2];\n\n    case \"solid\":\n    case \"esriSLSSolid\":\n    case \"none\":\n      return X.error(\"Unexpected: style does not require rasterization\"), [0, 0];\n\n    default:\n      return X.error(`Tried to rasterize SLS, but found an unexpected style: ${e}!`), [0, 0];\n  }\n};\n\nfunction ne(e) {\n  return void 0 !== e.symbolLayers;\n}\n\nconst le = e => {\n  const t = 100,\n        r = 50;\n  let o, i;\n  const a = e;\n\n  if (\"circle\" === a || \"esriSMSCircle\" === a) {\n    const e = .25;\n    let t = Math.acos(1 - e / r),\n        a = Math.ceil(E / t / 4);\n    0 === a && (a = 1), t = O / a, a *= 4;\n    const s = [];\n    s.push([r, 0]);\n\n    for (let o = 1; o < a; o++) s.push([r * Math.cos(o * t), -r * Math.sin(o * t)]);\n\n    s.push([r, 0]), o = {\n      rings: [s]\n    }, i = {\n      xmin: -r,\n      ymin: -r,\n      xmax: r,\n      ymax: r\n    };\n  } else if (\"cross\" === a || \"esriSMSCross\" === a) {\n    const e = 0;\n    o = {\n      rings: [[[e, r], [e, e], [r, e], [r, -e], [e, -e], [e, -r], [-e, -r], [-e, -e], [-r, -e], [-r, e], [-e, e], [-e, r], [e, r]]]\n    }, i = {\n      xmin: -r,\n      ymin: -r,\n      xmax: r,\n      ymax: r\n    };\n  } else if (\"diamond\" === a || \"esriSMSDiamond\" === a) o = {\n    rings: [[[-r, 0], [0, r], [r, 0], [0, -r], [-r, 0]]]\n  }, i = {\n    xmin: -r,\n    ymin: -r,\n    xmax: r,\n    ymax: r\n  };else if (\"square\" === a || \"esriSMSSquare\" === a) o = {\n    rings: [[[-r, -r], [-r, r], [r, r], [r, -r], [-r, -r]]]\n  }, i = {\n    xmin: -r,\n    ymin: -r,\n    xmax: r,\n    ymax: r\n  };else if (\"x\" === a || \"esriSMSX\" === a) {\n    const e = 0;\n    o = {\n      rings: [[[0, e], [r - e, r], [r, r - e], [e, 0], [r, e - r], [r - e, -r], [0, -e], [e - r, -r], [-r, e - r], [-e, 0], [-r, r - e], [e - r, r], [0, e]]]\n    }, i = {\n      xmin: -r,\n      ymin: -r,\n      xmax: r,\n      ymax: r\n    };\n  } else if (\"triangle\" === a || \"esriSMSTriangle\" === a) {\n    const e = t * .5773502691896257,\n          r = -e,\n          a = 2 / 3 * t,\n          s = a - t;\n    o = {\n      rings: [[[r, s], [0, a], [e, s], [r, s]]]\n    }, i = {\n      xmin: r,\n      ymin: s,\n      xmax: e,\n      ymax: a\n    };\n  } else \"arrow\" === a && (o = {\n    rings: [[[-50, 50], [50, 0], [-50, -50], [-33, -20], [-33, 20], [-50, 50]]]\n  }, i = {\n    xmin: -r,\n    ymin: -r,\n    xmax: r,\n    ymax: r\n  });\n\n  return [i, o];\n},\n      ce = e => \"vertical\" === e || \"horizontal\" === e || \"cross\" === e || \"esriSFSCross\" === e || \"esriSFSVertical\" === e || \"esriSFSHorizontal\" === e;\n\nexport { W as CIMSimbolInflatedSizeHelper, $ as CIMSymbolHelper, K as OverrideHelper, J as SymbolHelper, se as slsDashToTemplateArray, Y as symbolToCIM };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js"],"names":["e","bidiText","t","packFloatRGBA","r","clone","o","i","nextPowerOfTwo","a","isSome","s","pt2px","n","px2pt","l","create","c","expandPointInPlace","m","getBoundsXY","f","Placement","y","lineGapType2LineHeight","h","horizontalAlignment2HAlign","u","verticalAlignment2VAlign","p","EnvDrawHelper","S","Transformation","M","CanvasDrawHelper","d","LineCapStyle","b","LineJoinStyle","g","BlockProgression","C","FontEffects","I","FontEncoding","k","FontType","x","GlyphHinting","w","TextReadingDirection","P","VerticalGlyphOrientation","L","BillBoardMode","v","TextureFilter","F","ExtremityPlacement","T","getValue","z","C_INFINITY","D","GLYPH_SIZE","G","MAGIC_LABEL_LINE_HEIGHT","A","shapeGlyphs","N","E","Math","PI","O","R","j","V","B","X","getLogger","Y","type","data","$","fromSimpleMarker","fromPictureMarker","fromSimpleLineSymbol","fromSimpleFillSymbol","fromPictureFillSymbol","fromTextSymbol","symbol","U","drawSymbol","paths","rings","drawMarker","envelope","_","abs","offset","H","width","size","length","max","offsetX","offsetY","radius","fromWidth","toWidth","amplitude","q","W","getSymbolInflateSize","_getInflateSize","safeSize","sqrt","_vectorMarkerBounds","markerGraphics","geometry","min","ne","_getLayersInflateSize","symbolLayers","effects","_getTextInflatedSize","capStyle","Square","joinStyle","Miter","frame","xmin","xmax","ymin","ymax","getResource","url","height","scaleX","anchorPoint","anchorPointUnits","rotation","rotateClockwise","cos","sin","markerPlacement","get","text","mosaicItem","glyphMosaicItems","lineGapType","lineGap","scale","angle","xOffset","yOffset","hAlign","horizontalAlignment","vAlign","verticalAlignment","maxLineWidth","lineHeight","decoration","font","isCIM","boundsT","halfWidth","halfHeight","getEnvelope","Array","isArray","union","getTextureAnchor","rasterize","getContext","createScale","translate","getImageData","Uint8Array","color","haloColor","haloSize","kerning","xoffset","yoffset","family","style","weight","enable","dominantSizeAxis3D","billboardMode3D","blockProgression","BTT","depth3D","extrapolateBaselines","fontEffects","Normal","fontEncoding","Unicode","fontFamilyName","fontStyleName","oe","fontType","Unspecified","hinting","Default","ee","letterWidth","ligatures","strikethrough","underline","re","haloSymbol","shadowColor","shadowOffsetX","shadowOffsetY","textCase","textDirection","RTL","LTR","te","verticalGlyphOrientation","Right","wordSpacing","FaceNearPlane","textString","scaleSymbolsProportionally","respectFrame","angleAlignment","outline","xscale","yscale","cap","join","miterLimit","push","Q","Z","imageData","invertBackfaceTexture","textureFilter","Picture","tintColor","colorSubstitutions","dashTemplate","se","lineDashEnding","scaleDash","offsetAlongLine","Butt","ceil","window","devicePixelRatio","ce","lineSymbol","separation","marker","placement","Both","JustBegin","JustEnd","None","angleToLine","extremityPlacement","round","path","le","fromCIMHatchFill","_getLineSymbolPeriod","_getEffectsRepeat","_getPlacementRepeat","period","error","placementTemplate","fromCIMInsidePolygon","shiftOddRows","stepX","stepY","map","getFillColor","getStrokeColor","getStrokeWidth","getSize","getMarkerScaleRatio","J","rasterizeSimpleFill","console","strokeStyle","lineWidth","beginPath","moveTo","lineTo","stroke","rasterizeSimpleLine","rasterizeDash","Float32Array","K","findApplicableOverrides","primitiveName","findEffectOverrides","applyOverrides","charAt","toLowerCase","substr","propertyName","cim","nocapPropertyName","value","expression","toValue","restoreOverrides","buildOverrideKey","JSON","stringify","split","Number","toRgba","Round","Bevel","ie","ae","acos","CIMSimbolInflatedSizeHelper","CIMSymbolHelper","OverrideHelper","SymbolHelper","slsDashToTemplateArray","symbolToCIM"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import{bidiText as t}from\"../../core/BidiText.js\";import{packFloatRGBA as r}from\"../../core/floatRGBA.js\";import{clone as o}from\"../../core/lang.js\";import i from\"../../core/Logger.js\";import{nextPowerOfTwo as a}from\"../../core/mathUtils.js\";import{isSome as s}from\"../../core/maybe.js\";import{pt2px as n,px2pt as l}from\"../../core/screenUtils.js\";import{create as c,expandPointInPlace as m}from\"../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as f}from\"../../geometry/support/boundsUtils.js\";import{Placement as y}from\"./CIMPlacements.js\";import{lineGapType2LineHeight as h,horizontalAlignment2HAlign as u,verticalAlignment2VAlign as p,EnvDrawHelper as S,Transformation as M,CanvasDrawHelper as d}from\"./CIMSymbolDrawHelper.js\";import{LineCapStyle as b,LineJoinStyle as g,BlockProgression as C,FontEffects as I,FontEncoding as k,FontType as x,GlyphHinting as w,TextReadingDirection as P,VerticalGlyphOrientation as L,BillBoardMode as v,TextureFilter as F,ExtremityPlacement as T}from\"./enums.js\";import{getValue as z}from\"./utils.js\";import{C_INFINITY as D}from\"../../views/2d/engine/vectorTiles/GeometryUtils.js\";import{GLYPH_SIZE as G,MAGIC_LABEL_LINE_HEIGHT as A}from\"../../views/2d/engine/webgl/definitions.js\";import{shapeGlyphs as N}from\"../../views/2d/engine/webgl/mesh/templates/shapingUtils.js\";const E=Math.PI,O=E/2,R=4,j=10,V=96/72,B=Math.PI/180,X=i.getLogger(\"esri.symbols.cim.CIMSymbolHelper\");function Y(e){if(!e||!e.type)return null;let t;switch(e.type){case\"cim\":return e.data;case\"web-style\":return e;case\"simple-marker\":t=$.fromSimpleMarker(e);break;case\"picture-marker\":t=$.fromPictureMarker(e);break;case\"simple-line\":t=$.fromSimpleLineSymbol(e);break;case\"simple-fill\":t=$.fromSimpleFillSymbol(e);break;case\"picture-fill\":t=$.fromPictureFillSymbol(e);break;case\"text\":t=$.fromTextSymbol(e)}return{type:\"CIMSymbolReference\",symbol:t}}function U(e,t){switch(t.type){case\"CIMSymbolReference\":return U(e,t.symbol);case\"CIMPointSymbol\":{const r={x:0,y:0};e.drawSymbol(t,r);break}case\"CIMLineSymbol\":{const r={paths:[[[0,0],[0,1]]]};e.drawSymbol(t,r);break}case\"CIMPolygonSymbol\":{const r={rings:[[[0,0],[0,1],[0,0]]]};e.drawSymbol(t,r);break}case\"CIMTextSymbol\":{const r={x:0,y:0};e.drawSymbol(t,r);break}case\"CIMVectorMarker\":{const r=new y;e.drawMarker(t,r);break}}return e.envelope()}function _(e){if(!e)return 0;switch(e.type){case\"CIMMarkerPlacementAlongLineSameSize\":case\"CIMMarkerPlacementAlongLineRandomSize\":case\"CIMMarkerPlacementAtExtremities\":case\"CIMMarkerPlacementAtMeasuredUnits\":case\"CIMMarkerPlacementAtRatioPositions\":case\"CIMMarkerPlacementOnLine\":case\"CIMMarkerPlacementOnVertices\":return Math.abs(e.offset);default:return 0}}function H(e){if(!e)return 0;switch(e.type){case\"CIMGeometricEffectArrow\":return Math.abs(.5*e.width);case\"CIMGeometricEffectBuffer\":return Math.abs(e.size);case\"CIMGeometricEffectExtension\":case\"CIMGeometricEffectRadial\":return Math.abs(e.length);case\"CIMGeometricEffectJog\":return Math.abs(.5*e.length);case\"CIMGeometricEffectMove\":return Math.max(Math.abs(z(e.offsetX)),Math.abs(z(e.offsetY)));case\"CIMGeometricEffectOffset\":case\"CIMGeometricEffectOffsetTangent\":return Math.abs(e.offset);case\"CIMGeometricEffectRegularPolygon\":return Math.abs(e.radius);case\"CIMGeometricEffectRotate\":case\"CIMGeometricEffectScale\":default:return 0;case\"CIMGeometricEffectTaperedPolygon\":return.5*Math.max(Math.abs(e.fromWidth),Math.abs(e.toWidth));case\"CIMGeometricEffectWave\":return Math.abs(e.amplitude)}}function q(e){if(!e)return 0;let t=0;for(const r of e)t+=H(r);return t}class W{getSymbolInflateSize(e,t,r,o,i){return e||(e=[0,0,0,0]),t?this._getInflateSize(e,t,r,o,i):e}static safeSize(e){const t=Math.max(Math.abs(e[0]),Math.abs(e[2])),r=Math.max(Math.abs(e[1]),Math.abs(e[3]));return Math.sqrt(t*t+r*r)}_vectorMarkerBounds(e,t,r,o){let i=!0;const a=c();if(t&&t.markerGraphics)for(const s of t.markerGraphics){const t=[0,0,0,0];s.geometry&&(f(a,s.geometry),t[0]=0,t[1]=0,t[2]=0,t[3]=0,this.getSymbolInflateSize(t,s.symbol,r,0,o),a[0]+=t[0],a[1]+=t[1],a[2]+=t[2],a[3]+=t[3],i?(e[0]=a[0],e[1]=a[1],e[2]=a[2],e[3]=a[3],i=!1):(e[0]=Math.min(e[0],a[0]),e[1]=Math.min(e[1],a[1]),e[2]=Math.max(e[2],a[2]),e[3]=Math.max(e[3],a[3])))}return e}_getInflateSize(e,t,r,o,i){if(ne(t)){const a=this._getLayersInflateSize(e,t.symbolLayers,r,o,i),s=q(t.effects);return s>0&&(a[0]-=s,a[1]-=s,a[2]+=s,a[3]+=s),a}return this._getTextInflatedSize(e,t,i)}_getLayersInflateSize(e,t,r,o,i){let a=!0;if(!t)return e;for(const n of t){if(!n)continue;let t=[0,0,0,0];switch(n.type){case\"CIMSolidFill\":case\"CIMPictureFill\":case\"CIMHatchFill\":case\"CIMGradientFill\":break;case\"CIMSolidStroke\":case\"CIMPictureStroke\":case\"CIMGradientStroke\":{const e=n;let r=e.width;e.capStyle===b.Square||e.joinStyle===g.Miter?r/=1.4142135623730951:r/=2,t[0]=-r,t[1]=-r,t[2]=r,t[3]=r;break}case\"CIMCharacterMarker\":case\"CIMVectorMarker\":case\"CIMPictureMarker\":{const e=n;if(\"CIMVectorMarker\"===n.type){const e=n;if(t=this._vectorMarkerBounds(t,e,r,i),e.frame){const r=(e.frame.xmin+e.frame.xmax)/2,o=(e.frame.ymin+e.frame.ymax)/2;t[0]-=r,t[1]-=o,t[2]-=r,t[3]-=o;const i=e.size/(e.frame.ymax-e.frame.ymin);t[0]*=i,t[1]*=i,t[2]*=i,t[3]*=i}}else if(\"CIMPictureMarker\"===n.type){const o=n,i=r.getResource(o.url);let a=1;s(i)&&i.height&&(a=i.width/i.height);const l=e.size/2,c=e.size*a*o.scaleX/2;t=[-c,-l,c,l]}else{const r=e.size/2;t=[-r,-r,r,r]}if(e.anchorPoint){let r,o;\"Absolute\"===e.anchorPointUnits?(r=e.anchorPoint.x,o=e.anchorPoint.y):(r=e.anchorPoint.x*(t[2]-t[0]),o=e.anchorPoint.y*(t[3]-t[1])),t[0]-=r,t[1]-=o,t[2]-=r,t[3]-=o}let a=z(e.rotation);if(e.rotateClockwise&&(a=-a),o&&(a-=o),a){const e=B*a,r=Math.cos(e),o=Math.sin(e),i=c([D,D,-D,-D]);m(i,[t[0]*r-t[1]*o,t[0]*o+t[1]*r]),m(i,[t[0]*r-t[3]*o,t[0]*o+t[3]*r]),m(i,[t[2]*r-t[1]*o,t[2]*o+t[1]*r]),m(i,[t[2]*r-t[3]*o,t[2]*o+t[3]*r]),t=i}let l=z(e.offsetX),f=z(e.offsetY);if(o){const e=B*o,t=Math.cos(e),r=Math.sin(e),i=l*r+f*t;l=l*t-f*r,f=i}t[0]+=l,t[1]+=f,t[2]+=l,t[3]+=f;const y=_(e.markerPlacement);y>0&&(t[0]-=y,t[1]-=y,t[2]+=y,t[3]+=y);break}}const l=q(n.effects);l>0&&(t[0]-=l,t[1]-=l,t[2]+=l,t[3]+=l),a?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],a=!1):(e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[2]),e[3]=Math.max(e[3],t[3]))}return e}_getTextInflatedSize(e,r,o){var i,a;const s=null!=(i=r.height)?i:j;if(e[0]=-s/2,e[1]=-s/2,e[2]=s/2,e[3]=s/2,!o)return e;const n=o.get(r);if(!n)return e;const{text:l,mosaicItem:c}=n;if(!c||0===c.glyphMosaicItems.length)return e;const m=h(r.lineGapType,null!=(a=r.lineGap)?a:0,s),f=t(l)[1],y=c.glyphMosaicItems,S=N(y,f,{scale:s/G,angle:z(r.angle),xOffset:z(r.offsetX),yOffset:z(r.offsetY),hAlign:u(r.horizontalAlignment),vAlign:p(r.verticalAlignment),maxLineWidth:512,lineHeight:A*Math.max(.25,Math.min(m||1,4)),decoration:r.font.decoration||\"none\",isCIM:!0}).boundsT;return e[0]=S.x-S.halfWidth,e[1]=-S.y-S.halfHeight,e[2]=S.x+S.halfWidth,e[3]=-S.y+S.halfHeight,e}}class ${static getEnvelope(e,t){const r=new S(t);if(Array.isArray(e)){let t;for(const o of e)t?t.union(U(r,o)):t=U(r,o);return t}return U(r,e)}static getTextureAnchor(e,t){const r=this.getEnvelope(e,t);if(!r)return[0,0,0];const o=(r.x+.5*r.width)*V,i=-(r.y+.5*r.height)*V,a=r.width*V+2,s=r.height*V+2;return[o/a,i/s,s]}static rasterize(e,t,r,o,i=!0){const a=r||this.getEnvelope(t,o);if(!a)return[null,0,0,0,0];const s=(a.x+.5*a.width)*V,n=(a.y+.5*a.height)*V;e.width=a.width*V,e.height=a.height*V,r||(e.width+=2,e.height+=2);const l=e.getContext(\"2d\"),c=M.createScale(V,-V);c.translate(.5*e.width-s,.5*e.height+n);const m=new d(l,o,c);switch(t.type){case\"CIMPointSymbol\":{const e={type:\"point\",x:0,y:0};m.drawSymbol(t,e);break}case\"CIMVectorMarker\":{const e=new y;m.drawMarker(t,e);break}}const f=l.getImageData(0,0,e.width,e.height),h=new Uint8Array(f.data);if(i){let e;for(let t=0;t<h.length;t+=4)e=h[t+3]/255,h[t]=h[t]*e,h[t+1]=h[t+1]*e,h[t+2]=h[t+2]*e}return[h,e.width,e.height,-s/e.width,-n/e.height]}static fromTextSymbol(e){const{angle:r,color:o,font:i,haloColor:a,haloSize:s,horizontalAlignment:n,kerning:l,text:c,verticalAlignment:m,xoffset:f,yoffset:y}=e;let h,u,p,S,M;i&&(h=i.family,u=i.style,p=i.weight,S=i.size,M=i.decoration);let d=!1;if(c){d=t(c)[1]}return{type:\"CIMPointSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,anchorPointUnits:\"Relative\",dominantSizeAxis3D:\"Y\",size:10,billboardMode3D:\"FaceNearPlane\",frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{x:0,y:0},symbol:{type:\"CIMTextSymbol\",angle:r,blockProgression:C.BTT,depth3D:1,extrapolateBaselines:!0,fontEffects:I.Normal,fontEncoding:k.Unicode,fontFamilyName:h||\"Arial\",fontStyleName:oe(u,p),fontType:x.Unspecified,haloSize:s,height:S,hinting:w.Default,horizontalAlignment:ee(null!=n?n:\"center\"),kerning:l,letterWidth:100,ligatures:!0,lineGapType:\"Multiple\",offsetX:z(f),offsetY:z(y),strikethrough:\"line-through\"===M,underline:\"underline\"===M,symbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:re(o)}]},haloSymbol:{type:\"CIMPolygonSymbol\",symbolLayers:[{type:\"CIMSolidFill\",enable:!0,color:re(a)}]},shadowColor:[0,0,0,255],shadowOffsetX:1,shadowOffsetY:1,textCase:\"Normal\",textDirection:d?P.RTL:P.LTR,verticalAlignment:te(null!=m?m:\"baseline\"),verticalGlyphOrientation:L.Right,wordSpacing:100,billboardMode3D:v.FaceNearPlane},textString:c}],scaleSymbolsProportionally:!0,respectFrame:!0}],scaleX:1,angleAlignment:\"Display\"}}static fromPictureFillSymbol(e){const{height:t,outline:r,width:o,xoffset:i,xscale:a,yoffset:s,yscale:n}=e,l=[],c={type:\"CIMPolygonSymbol\",symbolLayers:l};if(r){const{cap:e,join:t,miterLimit:o,width:i}=r;l.push({type:\"CIMSolidStroke\",color:re(r.color),capStyle:Q(e),joinStyle:Z(t),miterLimit:o,width:i})}let m=e.url;\"esriPFS\"===e.type&&e.imageData&&(m=e.imageData);const f=\"angle\"in e?e.angle:0,y=o*(a||1),h=t*(n||1);return l.push({type:\"CIMPictureFill\",invertBackfaceTexture:!1,scaleX:1,textureFilter:F.Picture,tintColor:null,url:m,height:h,width:y,offsetX:z(i),offsetY:z(s),rotation:z(-f),colorSubstitutions:null}),c}static fromSimpleFillSymbol(e){const{color:t,style:r,outline:i}=e,s=[],n={type:\"CIMPolygonSymbol\",symbolLayers:s};let l=null;if(i){const{cap:e,join:t,style:r}=i;\"solid\"!==r&&\"none\"!==r&&\"esriSLSSolid\"!==r&&\"esriSLSNull\"!==r&&(l=[{type:\"CIMGeometricEffectDashes\",dashTemplate:se(r,e),lineDashEnding:\"NoConstraint\",scaleDash:!0,offsetAlongLine:null}]),s.push({type:\"CIMSolidStroke\",color:re(i.color),capStyle:Q(e),joinStyle:Z(t),miterLimit:i.miterLimit,width:i.width,effects:l})}if(r&&\"solid\"!==r&&\"none\"!==r&&\"esriSFSSolid\"!==r&&\"esriSFSNull\"!==r){const e={type:\"CIMLineSymbol\",symbolLayers:[{type:\"CIMSolidStroke\",color:re(t),capStyle:b.Butt,joinStyle:g.Miter,width:.75}]};let i=0;const n=a(Math.ceil(window.devicePixelRatio)),l=ce(r)?8*n:10*n;switch(r){case\"vertical\":case\"esriSFSVertical\":i=90;break;case\"forward-diagonal\":case\"esriSFSForwardDiagonal\":case\"diagonal-cross\":case\"esriSFSDiagonalCross\":i=-45;break;case\"backward-diagonal\":case\"esriSFSBackwardDiagonal\":i=45;break;case\"cross\":case\"esriSFSCross\":i=0}s.push({type:\"CIMHatchFill\",lineSymbol:e,offsetX:0,offsetY:0,rotation:i,separation:l}),\"cross\"===r||\"esriSFSCross\"===r?s.push({type:\"CIMHatchFill\",lineSymbol:o(e),offsetX:0,offsetY:0,rotation:90,separation:l}):\"diagonal-cross\"!==r&&\"esriSFSDiagonalCross\"!==r||s.push({type:\"CIMHatchFill\",lineSymbol:o(e),offsetX:0,offsetY:0,rotation:45,separation:l})}else!r||\"solid\"!==r&&\"esriSFSSolid\"!==r||s.push({type:\"CIMSolidFill\",enable:!0,color:re(t)});return n}static fromSimpleLineSymbol(e){const{cap:t,color:r,join:o,marker:i,miterLimit:a,style:s,width:n}=e;let l=null;\"solid\"!==s&&\"none\"!==s&&\"esriSLSSolid\"!==s&&\"esriSLSNull\"!==s&&(l=[{type:\"CIMGeometricEffectDashes\",dashTemplate:se(s,t),lineDashEnding:\"NoConstraint\",scaleDash:!0,offsetAlongLine:null}]);const c=[];if(i){let e;switch(i.placement){case\"begin-end\":e=T.Both;break;case\"begin\":e=T.JustBegin;break;case\"end\":e=T.JustEnd;break;default:e=T.None}const t=$.fromSimpleMarker(i,n,r).symbolLayers[0];t.markerPlacement={type:\"CIMMarkerPlacementAtExtremities\",angleToLine:!0,offset:0,extremityPlacement:e,offsetAlongLine:0},c.push(t)}return\"none\"!==s&&\"esriSLSNull\"!==s&&c.push({type:\"CIMSolidStroke\",color:re(r),capStyle:Q(t),joinStyle:Z(o),miterLimit:a,width:n,effects:l}),{type:\"CIMLineSymbol\",symbolLayers:c}}static fromPictureMarker(e){const{angle:t,height:r,width:o,xoffset:i,yoffset:a}=e;let s=e.url;return\"esriPMS\"===e.type&&e.imageData&&(s=e.imageData),{type:\"CIMPointSymbol\",symbolLayers:[{type:\"CIMPictureMarker\",invertBackfaceTexture:!1,scaleX:1,textureFilter:F.Picture,tintColor:null,url:s,size:r,width:o,offsetX:z(i),offsetY:z(a),rotation:z(-t)}]}}static fromSimpleMarker(e,t,r){var o;const{style:i}=e,a=null!=(o=e.color)?o:r;if(\"path\"===i){const t=[];if(\"outline\"in e&&e.outline){const r=e.outline;t.push({type:\"CIMSolidStroke\",enable:!0,width:n(Math.round(l(r.width))),color:re(r.color)})}t.push({type:\"CIMSolidFill\",enable:!0,color:re(a),path:e.path});const[r,o]=le(\"square\");return{type:\"CIMPointSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,rotation:z(-e.angle),size:z(e.size||6),offsetX:z(e.xoffset),offsetY:z(e.yoffset),frame:r,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:o,symbol:{type:\"CIMPolygonSymbol\",symbolLayers:t}}]}]}}const[s,c]=le(i);let m;if(c&&s){const r=[];if(\"outline\"in e&&e.outline){const t=e.outline;r.push({type:\"CIMSolidStroke\",enable:!0,width:t.width>.667?n(Math.round(l(t.width))):t.width,color:re(t.color)})}else!t||\"line-marker\"!==e.type||\"cross\"!==e.style&&\"x\"!==e.style||r.push({type:\"CIMSolidStroke\",enable:!0,width:t,color:re(a)});r.push({type:\"CIMSolidFill\",enable:!0,color:re(a)});const o={type:\"CIMPolygonSymbol\",symbolLayers:r};m={type:\"CIMPointSymbol\",symbolLayers:[{type:\"CIMVectorMarker\",enable:!0,rotation:z(-e.angle),size:z(e.size||6*t),offsetX:z(e.xoffset),offsetY:z(e.yoffset),frame:s,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:c,symbol:o}]}]}}return m}static fromCIMHatchFill(e){var t;const r=null!=(t=e.separation)?t:R,o=r/2,i=4;let a=this._getLineSymbolPeriod(e.lineSymbol)||i;for(;a<i;)a*=2;const s=a/2;return{type:\"CIMVectorMarker\",frame:{xmin:-s,xmax:s,ymin:-o,ymax:o},markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:{paths:[[[-s,0],[s,0]]]},symbol:e.lineSymbol}],size:r}}static _getLineSymbolPeriod(e){if(e){const t=this._getEffectsRepeat(e.effects);if(t)return t;if(e.symbolLayers)for(const r of e.symbolLayers){const e=this._getEffectsRepeat(r.effects);if(e)return e;if(r){const e=this._getPlacementRepeat(r.markerPlacement);if(e)return e}}}return 0}static _getEffectsRepeat(e){if(e)for(const t of e)if(t)switch(t.type){case\"CIMGeometricEffectDashes\":{const e=t.dashTemplate;if(e&&e.length){let t=0;for(const r of e)t+=r;return 1&e.length&&(t*=2),t}break}case\"CIMGeometricEffectWave\":return t.period;default:X.error(`unsupported geometric effect type ${t.type}`)}return 0}static _getPlacementRepeat(e){if(e)switch(e.type){case\"CIMMarkerPlacementAlongLineSameSize\":case\"CIMMarkerPlacementAlongLineRandomSize\":case\"CIMMarkerPlacementAlongLineVariableSize\":{const t=e.placementTemplate;if(t&&t.length){let e=0;for(const r of t)e+=r;return 1&t.length&&(e*=2),e}break}}return 0}static fromCIMInsidePolygon(e){const t=e.markerPlacement,r={type:e.type,...e};let o,i,a,s;if(r.markerPlacement=null,r.anchorPoint=null,!0===t.shiftOddRows){i=t.stepX/2,a=t.stepY,s=2*t.stepY;o=[{x:-i,y:0},{x:i,y:0},{x:0,y:a},{x:0,y:-a}].map((e=>({type:\"CIMMarkerGraphic\",geometry:e,symbol:{type:\"CIMPointSymbol\",symbolLayers:[r]}})))}else i=t.stepX/2,a=t.stepY/2,s=t.stepY,o=[{type:\"CIMMarkerGraphic\",geometry:{x:0,y:0},symbol:{type:\"CIMPointSymbol\",symbolLayers:[r]}}];return{type:\"CIMVectorMarker\",frame:{xmin:-i,xmax:i,ymin:-a,ymax:a},markerGraphics:o,size:s}}static getFillColor(e){if(!e)return null;switch(e.type){case\"CIMPolygonSymbol\":if(e.symbolLayers)for(const t of e.symbolLayers){const e=$.getFillColor(t);if(null!=e)return e}break;case\"CIMTextSymbol\":return $.getFillColor(e.symbol);case\"CIMSolidFill\":return e.color}}static getStrokeColor(e){if(e)switch(e.type){case\"CIMPolygonSymbol\":case\"CIMLineSymbol\":if(e.symbolLayers)for(const t of e.symbolLayers){const e=$.getStrokeColor(t);if(void 0!==e)return e}break;case\"CIMTextSymbol\":return $.getStrokeColor(e.symbol);case\"CIMSolidStroke\":return e.color}}static getStrokeWidth(e){if(e)switch(e.type){case\"CIMPolygonSymbol\":case\"CIMLineSymbol\":if(e.symbolLayers)for(const t of e.symbolLayers){const e=$.getStrokeWidth(t);if(void 0!==e)return e}break;case\"CIMTextSymbol\":return $.getStrokeWidth(e.symbol);case\"CIMSolidStroke\":case\"CIMGradientStroke\":case\"CIMPictureStroke\":return e.width}}static getSize(e){if(e)switch(e.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":{let t=0;if(e.symbolLayers)for(const r of e.symbolLayers){const e=$.getSize(r);e>t&&(t=e)}return t}case\"CIMSolidStroke\":case\"CIMPictureStroke\":case\"CIMGradientStroke\":return e.width;case\"CIMCharacterMarker\":case\"CIMPictureMarker\":case\"CIMVectorMarker\":return e.size}}static getMarkerScaleRatio(e){if(e&&\"CIMVectorMarker\"===e.type)if(!1!==e.scaleSymbolsProportionally&&e.frame){const t=e.frame.ymax-e.frame.ymin;return e.size/t}return 1}}class J{static rasterizeSimpleFill(e,t,r){\"solid\"!==t&&\"none\"!==t&&\"esriSFSSolid\"!==t&&\"esriSFSNull\"!==t||console.error(\"Unexpected: style does not require rasterization\");const o=a(Math.ceil(r)),i=ce(t)?8*o:16*o,s=2*o;e.width=i,e.height=i;const n=e.getContext(\"2d\");n.strokeStyle=\"#FFFFFF\",n.lineWidth=o,n.beginPath(),\"vertical\"!==t&&\"cross\"!==t&&\"esriSFSCross\"!==t&&\"esriSFSVertical\"!==t||(n.moveTo(i/2,-s),n.lineTo(i/2,i+s)),\"horizontal\"!==t&&\"cross\"!==t&&\"esriSFSCross\"!==t&&\"esriSFSHorizontal\"!==t||(n.moveTo(-s,i/2),n.lineTo(i+s,i/2)),\"forward-diagonal\"!==t&&\"diagonal-cross\"!==t&&\"esriSFSDiagonalCross\"!==t&&\"esriSFSForwardDiagonal\"!==t||(n.moveTo(-s,-s),n.lineTo(i+s,i+s),n.moveTo(i-s,-s),n.lineTo(i+s,s),n.moveTo(-s,i-s),n.lineTo(s,i+s)),\"backward-diagonal\"!==t&&\"diagonal-cross\"!==t&&\"esriSFSBackwardDiagonal\"!==t&&\"esriSFSDiagonalCross\"!==t||(n.moveTo(i+s,-s),n.lineTo(-s,i+s),n.moveTo(s,-s),n.lineTo(-s,s),n.moveTo(i+s,i-s),n.lineTo(i-s,i+s)),n.stroke();const l=n.getImageData(0,0,e.width,e.height),c=new Uint8Array(l.data);let m;for(let a=0;a<c.length;a+=4)m=c[a+3]/255,c[a]=c[a]*m,c[a+1]=c[a+1]*m,c[a+2]=c[a+2]*m;return[c,e.width,e.height]}static rasterizeSimpleLine(e,t){return this.rasterizeDash(e,t)}static rasterizeDash(e,t){const o=\"Butt\"===t,i=\"Square\"===t,a=!o&&!i;e.length%2==1&&(e=[...e,...e]);const s=15.5,n=2*s;let l=0;for(const r of e)l+=r;const c=Math.round(l*s),m=new Float32Array(c*n),f=.5*s;let y=0,h=0,u=.5,p=!0;for(const r of e){for(y=h,h+=r*s;u<=h;){let e=.5;for(;e<n;){const t=(e-.5)*c+u-.5,r=a?(e-s)*(e-s):Math.abs(e-s);m[t]=p?o?Math.max(Math.max(y+f-u,r),Math.max(u-h+f,r)):r:a?Math.min((u-y)*(u-y)+r,(u-h)*(u-h)+r):i?Math.min(Math.max(u-y,r),Math.max(h-u,r)):Math.min(Math.max(u-y+f,r),Math.max(h+f-u,r)),e++}u++}p=!p}const S=m.length,M=new Uint8Array(4*S);for(let d=0;d<S;++d){const e=(a?Math.sqrt(m[d]):m[d])/s;r(e,M,4*d)}return[M,c,n]}}class K{static findApplicableOverrides(e,t,r){if(e&&t){if(e.primitiveName){let o=!1;for(const t of r)if(t.primitiveName===e.primitiveName){o=!0;break}if(!o)for(const i of t)i.primitiveName===e.primitiveName&&r.push(i)}switch(e.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":if(e.effects)for(const o of e.effects)K.findApplicableOverrides(o,t,r);if(e.symbolLayers)for(const o of e.symbolLayers)K.findApplicableOverrides(o,t,r);break;case\"CIMTextSymbol\":break;case\"CIMSolidStroke\":case\"CIMPictureStroke\":case\"CIMGradientStroke\":case\"CIMSolidFill\":case\"CIMPictureFill\":case\"CIMHatchFill\":case\"CIMGradientFill\":case\"CIMVectorMarker\":case\"CIMCharacterMarker\":case\"CIMPictureMarker\":if(e.effects)for(const o of e.effects)K.findApplicableOverrides(o,t,r);if(e.markerPlacement&&K.findApplicableOverrides(e.markerPlacement,t,r),\"CIMVectorMarker\"===e.type){if(e.markerGraphics)for(const o of e.markerGraphics)K.findApplicableOverrides(o,t,r),K.findApplicableOverrides(o.symbol,t,r)}else\"CIMCharacterMarker\"===e.type?K.findApplicableOverrides(e.symbol,t,r):\"CIMHatchFill\"===e.type&&K.findApplicableOverrides(e.lineSymbol,t,r)}}}static findEffectOverrides(e,t,r){if(!t||!e)return;const o=e.length;for(let i=0;i<o;i++){const o=e[i],a=null==o?void 0:o.primitiveName;if(a){let e=!1;for(const t of r)if(t.primitiveName===a){e=!0;break}if(!e)for(const o of t)o.primitiveName===a&&r.push(o)}}}static applyOverrides(e,t,r,o){if(!t)return;const i=e=>e?e.charAt(0).toLowerCase()+e.substr(1):e;if(e.primitiveName)for(const a of t)if(a.primitiveName===e.primitiveName){const t=i(a.propertyName);if(o&&o.push({cim:e,nocapPropertyName:t,value:e[t]}),a.expression&&(a.value=K.toValue(a.propertyName,a.expression)),r){let t=!1;for(const o of r)o.primitiveName===e.primitiveName&&(t=!0);t||r.push(a)}e[t]=a.value}switch(e.type){case\"CIMPointSymbol\":case\"CIMLineSymbol\":case\"CIMPolygonSymbol\":if(e.effects)for(const i of e.effects)K.applyOverrides(i,t,r,o);if(e.symbolLayers)for(const i of e.symbolLayers)K.applyOverrides(i,t,r,o);break;case\"CIMTextSymbol\":break;case\"CIMSolidStroke\":case\"CIMSolidFill\":case\"CIMVectorMarker\":if(e.effects)for(const i of e.effects)K.applyOverrides(i,t,r,o);if(\"CIMVectorMarker\"===e.type&&e.markerGraphics)for(const i of e.markerGraphics)K.applyOverrides(i,t,r,o),K.applyOverrides(i.symbol,t,r,o)}}static restoreOverrides(e){for(const t of e)t.cim[t.nocapPropertyName]=t.value}static buildOverrideKey(e){let t=\"\";for(const r of e)void 0!==r.value&&(t+=`${r.primitiveName}${r.propertyName}${JSON.stringify(r.value)}`);return t}static toValue(t,r){if(\"DashTemplate\"===t)return r.split(\" \").map((e=>Number(e)));if(\"Color\"===t){const t=new e(r).toRgba();return t[3]*=255,t}return r}}const Q=e=>{if(!e)return b.Butt;switch(e){case\"butt\":return b.Butt;case\"square\":return b.Square;case\"round\":return b.Round}},Z=e=>{if(!e)return g.Miter;switch(e){case\"miter\":return g.Miter;case\"round\":return g.Round;case\"bevel\":return g.Bevel}},ee=e=>{if(!e)return\"Center\";switch(e){case\"left\":return\"Left\";case\"right\":return\"Right\";case\"center\":return\"Center\";case\"justify\":return\"Justify\"}},te=e=>{if(!e)return\"Center\";switch(e){case\"baseline\":return\"Baseline\";case\"top\":return\"Top\";case\"middle\":return\"Center\";case\"bottom\":return\"Bottom\"}},re=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:o,a:i}=e;return[t,r,o,255*i]},oe=(e,t)=>{const r=ie(t),o=ae(e);return r&&o?`${r}-${o}`:`${r}${o}`},ie=e=>{if(!e)return\"\";switch(e.toLowerCase()){case\"bold\":case\"bolder\":return\"bold\"}return\"\"},ae=e=>{if(!e)return\"\";switch(e.toLowerCase()){case\"italic\":case\"oblique\":return\"italic\"}return\"\"},se=(e,t)=>{const r=\"butt\"===t;switch(e){case\"dash\":case\"esriSLSDash\":return r?[4,3]:[3,4];case\"dash-dot\":case\"esriSLSDashDot\":return r?[4,3,1,3]:[3,4,0,4];case\"dot\":case\"esriSLSDot\":return r?[1,3]:[0,4];case\"long-dash\":case\"esriSLSLongDash\":return r?[8,3]:[7,4];case\"long-dash-dot\":case\"esriSLSLongDashDot\":return r?[8,3,1,3]:[7,4,0,4];case\"long-dash-dot-dot\":case\"esriSLSDashDotDot\":return r?[8,3,1,3,1,3]:[7,4,0,4,0,4];case\"short-dash\":case\"esriSLSShortDash\":return r?[4,1]:[3,2];case\"short-dash-dot\":case\"esriSLSShortDashDot\":return r?[4,1,1,1]:[3,2,0,2];case\"short-dash-dot-dot\":case\"esriSLSShortDashDotDot\":return r?[4,1,1,1,1,1]:[3,2,0,2,0,2];case\"short-dot\":case\"esriSLSShortDot\":return r?[1,1]:[0,2];case\"solid\":case\"esriSLSSolid\":case\"none\":return X.error(\"Unexpected: style does not require rasterization\"),[0,0];default:return X.error(`Tried to rasterize SLS, but found an unexpected style: ${e}!`),[0,0]}};function ne(e){return void 0!==e.symbolLayers}const le=e=>{const t=100,r=50;let o,i;const a=e;if(\"circle\"===a||\"esriSMSCircle\"===a){const e=.25;let t=Math.acos(1-e/r),a=Math.ceil(E/t/4);0===a&&(a=1),t=O/a,a*=4;const s=[];s.push([r,0]);for(let o=1;o<a;o++)s.push([r*Math.cos(o*t),-r*Math.sin(o*t)]);s.push([r,0]),o={rings:[s]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if(\"cross\"===a||\"esriSMSCross\"===a){const e=0;o={rings:[[[e,r],[e,e],[r,e],[r,-e],[e,-e],[e,-r],[-e,-r],[-e,-e],[-r,-e],[-r,e],[-e,e],[-e,r],[e,r]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if(\"diamond\"===a||\"esriSMSDiamond\"===a)o={rings:[[[-r,0],[0,r],[r,0],[0,-r],[-r,0]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r};else if(\"square\"===a||\"esriSMSSquare\"===a)o={rings:[[[-r,-r],[-r,r],[r,r],[r,-r],[-r,-r]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r};else if(\"x\"===a||\"esriSMSX\"===a){const e=0;o={rings:[[[0,e],[r-e,r],[r,r-e],[e,0],[r,e-r],[r-e,-r],[0,-e],[e-r,-r],[-r,e-r],[-e,0],[-r,r-e],[e-r,r],[0,e]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r}}else if(\"triangle\"===a||\"esriSMSTriangle\"===a){const e=t*.5773502691896257,r=-e,a=2/3*t,s=a-t;o={rings:[[[r,s],[0,a],[e,s],[r,s]]]},i={xmin:r,ymin:s,xmax:e,ymax:a}}else\"arrow\"===a&&(o={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},i={xmin:-r,ymin:-r,xmax:r,ymax:r});return[i,o]},ce=e=>\"vertical\"===e||\"horizontal\"===e||\"cross\"===e||\"esriSFSCross\"===e||\"esriSFSVertical\"===e||\"esriSFSHorizontal\"===e;export{W as CIMSimbolInflatedSizeHelper,$ as CIMSymbolHelper,K as OverrideHelper,J as SymbolHelper,se as slsDashToTemplateArray,Y as symbolToCIM};\n"]},"metadata":{},"sourceType":"module"}