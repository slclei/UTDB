{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { isSome as e } from \"../../core/maybe.js\";\nimport { addFrameTask as t } from \"../../core/scheduling.js\";\n\nclass a {\n  constructor(t) {\n    this.view = t, this._frameTaskHandle = null, this._updateRequested = !1, this.stationary = !0, this.animationInProgress = !1, this.prepare = () => {\n      this._updateParameters.state = this.view.state, this._updateParameters.stationary = this.view.stationary, this._updateParameters.pixelRatio = window.devicePixelRatio, this._updateParameters.renderingOptions = this.view.renderingOptions;\n    }, this.update = () => {\n      this._updateRequested = !1;\n      const {\n        basemapView: t,\n        graphicsView: a,\n        labelManager: s,\n        layerViews: i,\n        state: {\n          id: r\n        }\n      } = this.view;\n      t.baseLayerViews.forEach(this._updateLayerView, this), i.forEach(this._updateLayerView, this), t.referenceLayerViews.forEach(this._updateLayerView, this), e(s) && (s.lastUpdateId !== r && (s.viewChange(), s.lastUpdateId = r), s.updateRequested && s.processUpdate(this._updateParameters)), e(a) && (a.lastUpdateId !== r && (a.viewChange(), a.lastUpdateId = r), a.updateRequested && a.processUpdate(this._updateParameters)), this.view.graphicsTileStore.setViewState(this._updateParameters.state), this.animationInProgress || this._updateRequested || this._frameTaskHandle.pause();\n    };\n  }\n\n  destroy() {\n    this.stop();\n  }\n\n  start() {\n    this._frameTaskHandle || (this.stationary = this.view.stationary, this._updateParameters = {\n      state: this.view.state,\n      pixelRatio: window.devicePixelRatio,\n      stationary: this.stationary,\n      renderingOptions: this.view.renderingOptions\n    }, this._stationaryHandle = this.view.watch(\"stationary\", e => {\n      this.stationary = e, this.requestFrame();\n    }), this._frameTaskHandle = t(this), this.requestUpdate());\n  }\n\n  stop() {\n    this._frameTaskHandle && (this._updateRequested = !1, this._stationaryHandle.remove(), this._frameTaskHandle.remove(), this._updateParameters = this._stationaryHandle = this._frameTaskHandle = null, this.stationary = !0, this.animationInProgress = !1);\n  }\n\n  requestUpdate() {\n    this._updateRequested || (this._updateRequested = !0, this.requestFrame());\n  }\n\n  requestFrame() {\n    this._frameTaskHandle && this._frameTaskHandle.resume();\n  }\n\n  _updateLayerView(e) {\n    const t = this.view.state,\n          a = e.lastUpdateId;\n    null != a && (this.stationary || e.moving) || (e.moving = !0, e.moveStart()), a !== t.id && e.viewChange(), this.stationary && e.moving && (e.moving = !1, e.moveEnd()), e.lastUpdateId = t.id, e.updateRequested && e.processUpdate(this._updateParameters), \"layerViews\" in e && e.layerViews.forEach(this._updateLayerView, this);\n  }\n\n}\n\nexport { a as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/FrameTask.js"],"names":["isSome","e","addFrameTask","t","a","constructor","view","_frameTaskHandle","_updateRequested","stationary","animationInProgress","prepare","_updateParameters","state","pixelRatio","window","devicePixelRatio","renderingOptions","update","basemapView","graphicsView","labelManager","s","layerViews","i","id","r","baseLayerViews","forEach","_updateLayerView","referenceLayerViews","lastUpdateId","viewChange","updateRequested","processUpdate","graphicsTileStore","setViewState","pause","destroy","stop","start","_stationaryHandle","watch","requestFrame","requestUpdate","remove","resume","moving","moveStart","moveEnd","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../core/maybe.js\";import{addFrameTask as t}from\"../../core/scheduling.js\";class a{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{this._updateRequested=!1;const{basemapView:t,graphicsView:a,labelManager:s,layerViews:i,state:{id:r}}=this.view;t.baseLayerViews.forEach(this._updateLayerView,this),i.forEach(this._updateLayerView,this),t.referenceLayerViews.forEach(this._updateLayerView,this),e(s)&&(s.lastUpdateId!==r&&(s.viewChange(),s.lastUpdateId=r),s.updateRequested&&s.processUpdate(this._updateParameters)),e(a)&&(a.lastUpdateId!==r&&(a.viewChange(),a.lastUpdateId=r),a.updateRequested&&a.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this._frameTaskHandle||(this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch(\"stationary\",(e=>{this.stationary=e,this.requestFrame()})),this._frameTaskHandle=t(this),this.requestUpdate())}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){const t=this.view.state,a=e.lastUpdateId;null!=a&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),a!==t.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=t.id,e.updateRequested&&e.processUpdate(this._updateParameters),\"layerViews\"in e&&e.layerViews.forEach(this._updateLayerView,this)}}export{a as default};\n"]},"metadata":{},"sourceType":"module"}