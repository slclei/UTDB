{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { clone as t } from \"../../../../../core/lang.js\";\nimport { urlToObject as e, isAbsolute as i, join as l, addQueryParameters as r } from \"../../../../../core/urlUtils.js\";\nimport s from \"../../../../../geometry/Extent.js\";\nimport { readServiceTileInfo as o } from \"../../../../../layers/support/serviceTileInfoProperty.js\";\nimport { TilemapCache as n } from \"../../../../../layers/support/TilemapCache.js\";\nimport a from \"../TilemapIndex.js\";\nimport p from \"../TilemapRequest.js\";\nimport { request as u } from \"./VectorTilesRequestManager.js\";\n\nclass h {\n  constructor(u, h, m) {\n    this.tilemap = null, this.tileInfo = null, this.capabilities = null, this.fullExtent = null, this.name = u, this.sourceUrl = h;\n    const f = e(this.sourceUrl),\n          c = t(m),\n          d = c.tiles;\n    if (f) for (let t = 0; t < d.length; t++) {\n      const s = e(d[t]);\n      s && (i(s.path) || (s.path = l(f.path, s.path)), d[t] = r(s.path, { ...f.query,\n        ...s.query\n      }));\n    }\n    this.tileServers = d;\n    const x = m.capabilities && m.capabilities.split(\",\").map(t => t.toLowerCase().trim()),\n          y = !0 === (null == m ? void 0 : m.exportTilesAllowed),\n          v = !0 === (null == x ? void 0 : x.includes(\"tilemap\")),\n          T = y && m.hasOwnProperty(\"maxExportTilesCount\") ? m.maxExportTilesCount : 0;\n    this.capabilities = {\n      operations: {\n        supportsExportTiles: y,\n        supportsTileMap: v\n      },\n      exportTiles: y ? {\n        maxExportTilesCount: +T\n      } : null\n    }, this.tileInfo = o(c.tileInfo, c, null, {\n      ignoreMinMaxLOD: !0\n    });\n    const g = m.tileMap ? r(l(f.path, m.tileMap), f.query) : null;\n    v ? (this.type = \"vector-tile\", this.tilemap = new p(new n({\n      layer: {\n        parsedUrl: f,\n        tileInfo: this.tileInfo,\n        type: \"vector-tile\",\n        tileServers: this.tileServers\n      }\n    }), g)) : g && (this.tilemap = new a(g)), this.fullExtent = s.fromJSON(m.fullExtent);\n  }\n\n  destroy() {}\n\n  async getRefKey(t, e) {\n    var i, l;\n    return null != (i = null == (l = this.tilemap) ? void 0 : l.dataKey(t, e)) ? i : t;\n  }\n\n  requestTile(t, e, i, l) {\n    const r = this.tileServers[e % this.tileServers.length];\n    return u(r, t, e, i, l);\n  }\n\n  isCompatibleWith(t) {\n    const e = this.tileInfo,\n          i = t.tileInfo;\n    if (!e.spatialReference.equals(i.spatialReference)) return !1;\n    if (!e.origin.equals(i.origin)) return !1;\n    if (Math.round(e.dpi) !== Math.round(i.dpi)) return !1;\n    const l = e.lods,\n          r = i.lods,\n          s = Math.min(l.length, r.length);\n\n    for (let o = 0; o < s; o++) {\n      const t = l[o],\n            e = r[o];\n      if (t.level !== e.level || Math.round(t.scale) !== Math.round(e.scale)) return !1;\n    }\n\n    return !0;\n  }\n\n}\n\nexport { h as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/VectorTileSource.js"],"names":["clone","t","urlToObject","e","isAbsolute","i","join","l","addQueryParameters","r","s","readServiceTileInfo","o","TilemapCache","n","a","p","request","u","h","constructor","m","tilemap","tileInfo","capabilities","fullExtent","name","sourceUrl","f","c","d","tiles","length","path","query","tileServers","x","split","map","toLowerCase","trim","y","exportTilesAllowed","v","includes","T","hasOwnProperty","maxExportTilesCount","operations","supportsExportTiles","supportsTileMap","exportTiles","ignoreMinMaxLOD","g","tileMap","type","layer","parsedUrl","fromJSON","destroy","getRefKey","dataKey","requestTile","isCompatibleWith","spatialReference","equals","origin","Math","round","dpi","lods","min","level","scale","default"],"mappings":"AAAA;AACA;AACA;AACA;AACA,SAAOA,KAAK,IAAIC,CAAhB,QAAsB,6BAAtB;AAAoD,SAAOC,WAAW,IAAIC,CAAtB,EAAwBC,UAAU,IAAIC,CAAtC,EAAwCC,IAAI,IAAIC,CAAhD,EAAkDC,kBAAkB,IAAIC,CAAxE,QAA8E,iCAA9E;AAAgH,OAAOC,CAAP,MAAa,mCAAb;AAAiD,SAAOC,mBAAmB,IAAIC,CAA9B,QAAoC,0DAApC;AAA+F,SAAOC,YAAY,IAAIC,CAAvB,QAA6B,+CAA7B;AAA6E,OAAOC,CAAP,MAAa,oBAAb;AAAkC,OAAOC,CAAP,MAAa,sBAAb;AAAoC,SAAOC,OAAO,IAAIC,CAAlB,QAAwB,gCAAxB;;AAAyD,MAAMC,CAAN,CAAO;AAACC,EAAAA,WAAW,CAACF,CAAD,EAAGC,CAAH,EAAKE,CAAL,EAAO;AAAC,SAAKC,OAAL,GAAa,IAAb,EAAkB,KAAKC,QAAL,GAAc,IAAhC,EAAqC,KAAKC,YAAL,GAAkB,IAAvD,EAA4D,KAAKC,UAAL,GAAgB,IAA5E,EAAiF,KAAKC,IAAL,GAAUR,CAA3F,EAA6F,KAAKS,SAAL,GAAeR,CAA5G;AAA8G,UAAMS,CAAC,GAACzB,CAAC,CAAC,KAAKwB,SAAN,CAAT;AAAA,UAA0BE,CAAC,GAAC5B,CAAC,CAACoB,CAAD,CAA7B;AAAA,UAAiCS,CAAC,GAACD,CAAC,CAACE,KAArC;AAA2C,QAAGH,CAAH,EAAK,KAAI,IAAI3B,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC6B,CAAC,CAACE,MAAhB,EAAuB/B,CAAC,EAAxB,EAA2B;AAAC,YAAMS,CAAC,GAACP,CAAC,CAAC2B,CAAC,CAAC7B,CAAD,CAAF,CAAT;AAAgBS,MAAAA,CAAC,KAAGL,CAAC,CAACK,CAAC,CAACuB,IAAH,CAAD,KAAYvB,CAAC,CAACuB,IAAF,GAAO1B,CAAC,CAACqB,CAAC,CAACK,IAAH,EAAQvB,CAAC,CAACuB,IAAV,CAApB,GAAqCH,CAAC,CAAC7B,CAAD,CAAD,GAAKQ,CAAC,CAACC,CAAC,CAACuB,IAAH,EAAQ,EAAC,GAAGL,CAAC,CAACM,KAAN;AAAY,WAAGxB,CAAC,CAACwB;AAAjB,OAAR,CAA9C,CAAD;AAAiF;AAAA,SAAKC,WAAL,GAAiBL,CAAjB;AAAmB,UAAMM,CAAC,GAACf,CAAC,CAACG,YAAF,IAAgBH,CAAC,CAACG,YAAF,CAAea,KAAf,CAAqB,GAArB,EAA0BC,GAA1B,CAA+BrC,CAAC,IAAEA,CAAC,CAACsC,WAAF,GAAgBC,IAAhB,EAAlC,CAAxB;AAAA,UAAmFC,CAAC,GAAC,CAAC,CAAD,MAAM,QAAMpB,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACqB,kBAAvB,CAArF;AAAA,UAAgIC,CAAC,GAAC,CAAC,CAAD,MAAM,QAAMP,CAAN,GAAQ,KAAK,CAAb,GAAeA,CAAC,CAACQ,QAAF,CAAW,SAAX,CAArB,CAAlI;AAAA,UAA8KC,CAAC,GAACJ,CAAC,IAAEpB,CAAC,CAACyB,cAAF,CAAiB,qBAAjB,CAAH,GAA2CzB,CAAC,CAAC0B,mBAA7C,GAAiE,CAAjP;AAAmP,SAAKvB,YAAL,GAAkB;AAACwB,MAAAA,UAAU,EAAC;AAACC,QAAAA,mBAAmB,EAACR,CAArB;AAAuBS,QAAAA,eAAe,EAACP;AAAvC,OAAZ;AAAsDQ,MAAAA,WAAW,EAACV,CAAC,GAAC;AAACM,QAAAA,mBAAmB,EAAC,CAACF;AAAtB,OAAD,GAA0B;AAA7F,KAAlB,EAAqH,KAAKtB,QAAL,GAAcX,CAAC,CAACiB,CAAC,CAACN,QAAH,EAAYM,CAAZ,EAAc,IAAd,EAAmB;AAACuB,MAAAA,eAAe,EAAC,CAAC;AAAlB,KAAnB,CAApI;AAA6K,UAAMC,CAAC,GAAChC,CAAC,CAACiC,OAAF,GAAU7C,CAAC,CAACF,CAAC,CAACqB,CAAC,CAACK,IAAH,EAAQZ,CAAC,CAACiC,OAAV,CAAF,EAAqB1B,CAAC,CAACM,KAAvB,CAAX,GAAyC,IAAjD;AAAsDS,IAAAA,CAAC,IAAE,KAAKY,IAAL,GAAU,aAAV,EAAwB,KAAKjC,OAAL,GAAa,IAAIN,CAAJ,CAAM,IAAIF,CAAJ,CAAM;AAAC0C,MAAAA,KAAK,EAAC;AAACC,QAAAA,SAAS,EAAC7B,CAAX;AAAaL,QAAAA,QAAQ,EAAC,KAAKA,QAA3B;AAAoCgC,QAAAA,IAAI,EAAC,aAAzC;AAAuDpB,QAAAA,WAAW,EAAC,KAAKA;AAAxE;AAAP,KAAN,CAAN,EAA0GkB,CAA1G,CAAvC,IAAqJA,CAAC,KAAG,KAAK/B,OAAL,GAAa,IAAIP,CAAJ,CAAMsC,CAAN,CAAhB,CAAvJ,EAAiL,KAAK5B,UAAL,GAAgBf,CAAC,CAACgD,QAAF,CAAWrC,CAAC,CAACI,UAAb,CAAjM;AAA0N;;AAAAkC,EAAAA,OAAO,GAAE,CAAE;;AAAe,QAATC,SAAS,CAAC3D,CAAD,EAAGE,CAAH,EAAK;AAAC,QAAIE,CAAJ,EAAME,CAAN;AAAQ,WAAO,SAAOF,CAAC,GAAC,SAAOE,CAAC,GAAC,KAAKe,OAAd,IAAuB,KAAK,CAA5B,GAA8Bf,CAAC,CAACsD,OAAF,CAAU5D,CAAV,EAAYE,CAAZ,CAAvC,IAAuDE,CAAvD,GAAyDJ,CAAhE;AAAkE;;AAAA6D,EAAAA,WAAW,CAAC7D,CAAD,EAAGE,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAAS;AAAC,UAAME,CAAC,GAAC,KAAK0B,WAAL,CAAiBhC,CAAC,GAAC,KAAKgC,WAAL,CAAiBH,MAApC,CAAR;AAAoD,WAAOd,CAAC,CAACT,CAAD,EAAGR,CAAH,EAAKE,CAAL,EAAOE,CAAP,EAASE,CAAT,CAAR;AAAoB;;AAAAwD,EAAAA,gBAAgB,CAAC9D,CAAD,EAAG;AAAC,UAAME,CAAC,GAAC,KAAKoB,QAAb;AAAA,UAAsBlB,CAAC,GAACJ,CAAC,CAACsB,QAA1B;AAAmC,QAAG,CAACpB,CAAC,CAAC6D,gBAAF,CAAmBC,MAAnB,CAA0B5D,CAAC,CAAC2D,gBAA5B,CAAJ,EAAkD,OAAM,CAAC,CAAP;AAAS,QAAG,CAAC7D,CAAC,CAAC+D,MAAF,CAASD,MAAT,CAAgB5D,CAAC,CAAC6D,MAAlB,CAAJ,EAA8B,OAAM,CAAC,CAAP;AAAS,QAAGC,IAAI,CAACC,KAAL,CAAWjE,CAAC,CAACkE,GAAb,MAAoBF,IAAI,CAACC,KAAL,CAAW/D,CAAC,CAACgE,GAAb,CAAvB,EAAyC,OAAM,CAAC,CAAP;AAAS,UAAM9D,CAAC,GAACJ,CAAC,CAACmE,IAAV;AAAA,UAAe7D,CAAC,GAACJ,CAAC,CAACiE,IAAnB;AAAA,UAAwB5D,CAAC,GAACyD,IAAI,CAACI,GAAL,CAAShE,CAAC,CAACyB,MAAX,EAAkBvB,CAAC,CAACuB,MAApB,CAA1B;;AAAsD,SAAI,IAAIpB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACF,CAAd,EAAgBE,CAAC,EAAjB,EAAoB;AAAC,YAAMX,CAAC,GAACM,CAAC,CAACK,CAAD,CAAT;AAAA,YAAaT,CAAC,GAACM,CAAC,CAACG,CAAD,CAAhB;AAAoB,UAAGX,CAAC,CAACuE,KAAF,KAAUrE,CAAC,CAACqE,KAAZ,IAAmBL,IAAI,CAACC,KAAL,CAAWnE,CAAC,CAACwE,KAAb,MAAsBN,IAAI,CAACC,KAAL,CAAWjE,CAAC,CAACsE,KAAb,CAA5C,EAAgE,OAAM,CAAC,CAAP;AAAS;;AAAA,WAAM,CAAC,CAAP;AAAS;;AAArjD;;AAAsjD,SAAOtD,CAAC,IAAIuD,OAAZ","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../../../core/lang.js\";import{urlToObject as e,isAbsolute as i,join as l,addQueryParameters as r}from\"../../../../../core/urlUtils.js\";import s from\"../../../../../geometry/Extent.js\";import{readServiceTileInfo as o}from\"../../../../../layers/support/serviceTileInfoProperty.js\";import{TilemapCache as n}from\"../../../../../layers/support/TilemapCache.js\";import a from\"../TilemapIndex.js\";import p from\"../TilemapRequest.js\";import{request as u}from\"./VectorTilesRequestManager.js\";class h{constructor(u,h,m){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=u,this.sourceUrl=h;const f=e(this.sourceUrl),c=t(m),d=c.tiles;if(f)for(let t=0;t<d.length;t++){const s=e(d[t]);s&&(i(s.path)||(s.path=l(f.path,s.path)),d[t]=r(s.path,{...f.query,...s.query}))}this.tileServers=d;const x=m.capabilities&&m.capabilities.split(\",\").map((t=>t.toLowerCase().trim())),y=!0===(null==m?void 0:m.exportTilesAllowed),v=!0===(null==x?void 0:x.includes(\"tilemap\")),T=y&&m.hasOwnProperty(\"maxExportTilesCount\")?m.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:y,supportsTileMap:v},exportTiles:y?{maxExportTilesCount:+T}:null},this.tileInfo=o(c.tileInfo,c,null,{ignoreMinMaxLOD:!0});const g=m.tileMap?r(l(f.path,m.tileMap),f.query):null;v?(this.type=\"vector-tile\",this.tilemap=new p(new n({layer:{parsedUrl:f,tileInfo:this.tileInfo,type:\"vector-tile\",tileServers:this.tileServers}}),g)):g&&(this.tilemap=new a(g)),this.fullExtent=s.fromJSON(m.fullExtent)}destroy(){}async getRefKey(t,e){var i,l;return null!=(i=null==(l=this.tilemap)?void 0:l.dataKey(t,e))?i:t}requestTile(t,e,i,l){const r=this.tileServers[e%this.tileServers.length];return u(r,t,e,i,l)}isCompatibleWith(t){const e=this.tileInfo,i=t.tileInfo;if(!e.spatialReference.equals(i.spatialReference))return!1;if(!e.origin.equals(i.origin))return!1;if(Math.round(e.dpi)!==Math.round(i.dpi))return!1;const l=e.lods,r=i.lods,s=Math.min(l.length,r.length);for(let o=0;o<s;o++){const t=l[o],e=r[o];if(t.level!==e.level||Math.round(t.scale)!==Math.round(e.scale))return!1}return!0}}export{h as default};\n"]},"metadata":{},"sourceType":"module"}