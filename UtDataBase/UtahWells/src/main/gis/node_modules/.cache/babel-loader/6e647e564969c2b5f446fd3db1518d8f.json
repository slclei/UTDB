{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../geometry.js\";\nimport \"../../core/has.js\";\nimport e from \"../../core/Logger.js\";\nimport { isNone as t, unwrapOr as n } from \"../../core/maybe.js\";\nimport { getMetersPerUnitForSR as s } from \"../../core/unitUtils.js\";\nimport { toExtent as i, create as o } from \"../../geometry/support/aaBoundingRect.js\";\nimport { extentContainsPoint as r } from \"../../geometry/support/contains.js\";\nimport { project as a } from \"../../geometry/support/webMercatorUtils.js\";\nimport l from \"../../geometry/Point.js\";\nconst c = e.getLogger(\"esri.layers.support.ElevationSampler\");\n\nclass m {\n  queryElevation(e) {\n    return h(e.clone(), this);\n  }\n\n  on() {\n    return g;\n  }\n\n  projectIfRequired(e, t) {\n    return f(e, t);\n  }\n\n}\n\nclass p extends m {\n  constructor(e, t, n) {\n    super(), this.tile = e, this.noDataValue = n, this.extent = i(e.tile.extent, t.spatialReference);\n    const o = s(t.spatialReference),\n          r = t.lodAt(e.tile.level).resolution * o;\n    this.demResolution = {\n      min: r,\n      max: r\n    };\n  }\n\n  get spatialReference() {\n    return this.extent.spatialReference;\n  }\n\n  contains(e) {\n    const t = this.projectIfRequired(e, this.spatialReference);\n    return r(this.extent, t);\n  }\n\n  elevationAt(e) {\n    const n = this.projectIfRequired(e, this.spatialReference);\n    if (t(n)) return null;\n\n    if (!this.contains(e)) {\n      const t = this.extent,\n            n = `${t.xmin}, ${t.ymin}, ${t.xmax}, ${t.ymax}`;\n      return c.warn(\"#elevationAt()\", `Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler extent (${n})`), this.noDataValue;\n    }\n\n    return this.tile.sample(n.x, n.y);\n  }\n\n}\n\nclass u extends m {\n  constructor(e, t, n) {\n    let s;\n    super(), \"number\" == typeof t ? (this.noDataValue = t, s = null) : (s = t, this.noDataValue = n), this.samplers = s ? e.map(e => new p(e, s, this.noDataValue)) : e;\n    const r = this.samplers[0];\n\n    if (r) {\n      this.extent = r.extent.clone();\n      const {\n        min: e,\n        max: t\n      } = r.demResolution;\n      this.demResolution = {\n        min: e,\n        max: t\n      };\n\n      for (let n = 1; n < this.samplers.length; n++) {\n        const e = this.samplers[n];\n        this.extent.union(e.extent), this.demResolution.min = Math.min(this.demResolution.min, e.demResolution.min), this.demResolution.max = Math.max(this.demResolution.max, e.demResolution.max);\n      }\n    } else this.extent = i(o(), s.spatialReference), this.demResolution = {\n      min: 0,\n      max: 0\n    };\n  }\n\n  get spatialReference() {\n    return this.extent.spatialReference;\n  }\n\n  elevationAt(e) {\n    const t = this.projectIfRequired(e, this.spatialReference);\n    if (!t) return null;\n\n    for (const n of this.samplers) if (n.contains(t)) return n.elevationAt(t);\n\n    return c.warn(\"#elevationAt()\", `Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler`), this.noDataValue;\n  }\n\n}\n\nfunction h(e, t) {\n  const n = f(e, t.spatialReference);\n  if (!n) return null;\n\n  switch (e.type) {\n    case \"point\":\n      x(e, n, t);\n      break;\n\n    case \"polyline\":\n      R(e, n, t);\n      break;\n\n    case \"multipoint\":\n      d(e, n, t);\n  }\n\n  return e;\n}\n\nfunction f(e, n) {\n  if (t(e)) return null;\n  const s = e.spatialReference;\n  if (s.equals(n)) return e;\n  const i = a(e, n);\n  return i || c.error(`Cannot project geometry spatial reference (wkid:${s.wkid}) to elevation sampler spatial reference (wkid:${n.wkid})`), i;\n}\n\nfunction x(e, t, s) {\n  e.z = n(s.elevationAt(t), 0);\n}\n\nfunction R(e, t, s) {\n  y.spatialReference = t.spatialReference;\n  const i = e.hasM && !e.hasZ;\n\n  for (let o = 0; o < e.paths.length; o++) {\n    const r = e.paths[o],\n          a = t.paths[o];\n\n    for (let e = 0; e < r.length; e++) {\n      const t = r[e],\n            o = a[e];\n      y.x = o[0], y.y = o[1], i && (t[3] = t[2]), t[2] = n(s.elevationAt(y), 0);\n    }\n  }\n\n  e.hasZ = !0;\n}\n\nfunction d(e, t, s) {\n  y.spatialReference = t.spatialReference;\n  const i = e.hasM && !e.hasZ;\n\n  for (let o = 0; o < e.points.length; o++) {\n    const r = e.points[o],\n          a = t.points[o];\n    y.x = a[0], y.y = a[1], i && (r[3] = r[2]), r[2] = n(s.elevationAt(y), 0);\n  }\n\n  e.hasZ = !0;\n}\n\nconst y = new l(),\n      g = {\n  remove() {}\n\n};\nexport { m as ElevationSamplerBase, u as MultiTileElevationSampler, p as TileElevationSampler, h as updateGeometryElevation };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/support/ElevationSampler.js"],"names":["e","isNone","t","unwrapOr","n","getMetersPerUnitForSR","s","toExtent","i","create","o","extentContainsPoint","r","project","a","l","c","getLogger","m","queryElevation","h","clone","on","g","projectIfRequired","f","p","constructor","tile","noDataValue","extent","spatialReference","lodAt","level","resolution","demResolution","min","max","contains","elevationAt","xmin","ymin","xmax","ymax","warn","x","y","sample","u","samplers","map","length","union","Math","type","R","d","equals","error","wkid","z","hasM","hasZ","paths","points","remove","ElevationSamplerBase","MultiTileElevationSampler","TileElevationSampler","updateGeometryElevation"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../geometry.js\";import\"../../core/has.js\";import e from\"../../core/Logger.js\";import{isNone as t,unwrapOr as n}from\"../../core/maybe.js\";import{getMetersPerUnitForSR as s}from\"../../core/unitUtils.js\";import{toExtent as i,create as o}from\"../../geometry/support/aaBoundingRect.js\";import{extentContainsPoint as r}from\"../../geometry/support/contains.js\";import{project as a}from\"../../geometry/support/webMercatorUtils.js\";import l from\"../../geometry/Point.js\";const c=e.getLogger(\"esri.layers.support.ElevationSampler\");class m{queryElevation(e){return h(e.clone(),this)}on(){return g}projectIfRequired(e,t){return f(e,t)}}class p extends m{constructor(e,t,n){super(),this.tile=e,this.noDataValue=n,this.extent=i(e.tile.extent,t.spatialReference);const o=s(t.spatialReference),r=t.lodAt(e.tile.level).resolution*o;this.demResolution={min:r,max:r}}get spatialReference(){return this.extent.spatialReference}contains(e){const t=this.projectIfRequired(e,this.spatialReference);return r(this.extent,t)}elevationAt(e){const n=this.projectIfRequired(e,this.spatialReference);if(t(n))return null;if(!this.contains(e)){const t=this.extent,n=`${t.xmin}, ${t.ymin}, ${t.xmax}, ${t.ymax}`;return c.warn(\"#elevationAt()\",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler extent (${n})`),this.noDataValue}return this.tile.sample(n.x,n.y)}}class u extends m{constructor(e,t,n){let s;super(),\"number\"==typeof t?(this.noDataValue=t,s=null):(s=t,this.noDataValue=n),this.samplers=s?e.map((e=>new p(e,s,this.noDataValue))):e;const r=this.samplers[0];if(r){this.extent=r.extent.clone();const{min:e,max:t}=r.demResolution;this.demResolution={min:e,max:t};for(let n=1;n<this.samplers.length;n++){const e=this.samplers[n];this.extent.union(e.extent),this.demResolution.min=Math.min(this.demResolution.min,e.demResolution.min),this.demResolution.max=Math.max(this.demResolution.max,e.demResolution.max)}}else this.extent=i(o(),s.spatialReference),this.demResolution={min:0,max:0}}get spatialReference(){return this.extent.spatialReference}elevationAt(e){const t=this.projectIfRequired(e,this.spatialReference);if(!t)return null;for(const n of this.samplers)if(n.contains(t))return n.elevationAt(t);return c.warn(\"#elevationAt()\",`Point used to sample elevation (${e.x}, ${e.y}) is outside of the sampler`),this.noDataValue}}function h(e,t){const n=f(e,t.spatialReference);if(!n)return null;switch(e.type){case\"point\":x(e,n,t);break;case\"polyline\":R(e,n,t);break;case\"multipoint\":d(e,n,t)}return e}function f(e,n){if(t(e))return null;const s=e.spatialReference;if(s.equals(n))return e;const i=a(e,n);return i||c.error(`Cannot project geometry spatial reference (wkid:${s.wkid}) to elevation sampler spatial reference (wkid:${n.wkid})`),i}function x(e,t,s){e.z=n(s.elevationAt(t),0)}function R(e,t,s){y.spatialReference=t.spatialReference;const i=e.hasM&&!e.hasZ;for(let o=0;o<e.paths.length;o++){const r=e.paths[o],a=t.paths[o];for(let e=0;e<r.length;e++){const t=r[e],o=a[e];y.x=o[0],y.y=o[1],i&&(t[3]=t[2]),t[2]=n(s.elevationAt(y),0)}}e.hasZ=!0}function d(e,t,s){y.spatialReference=t.spatialReference;const i=e.hasM&&!e.hasZ;for(let o=0;o<e.points.length;o++){const r=e.points[o],a=t.points[o];y.x=a[0],y.y=a[1],i&&(r[3]=r[2]),r[2]=n(s.elevationAt(y),0)}e.hasZ=!0}const y=new l,g={remove(){}};export{m as ElevationSamplerBase,u as MultiTileElevationSampler,p as TileElevationSampler,h as updateGeometryElevation};\n"]},"metadata":{},"sourceType":"module"}