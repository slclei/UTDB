{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../../chunks/tslib.es6.js\";\nimport r from \"../../PopupTemplate.js\";\nimport \"../../renderers/ClassBreaksRenderer.js\";\nimport \"../../renderers/DictionaryRenderer.js\";\nimport \"../../renderers/DotDensityRenderer.js\";\nimport \"../../renderers/HeatmapRenderer.js\";\nimport \"../../renderers/Renderer.js\";\nimport \"../../renderers/SimpleRenderer.js\";\nimport \"../../renderers/UniqueValueRenderer.js\";\nimport \"../../renderers/support/jsonUtils.js\";\nimport { webSceneRendererTypes as t } from \"../../renderers/support/types.js\";\nimport o from \"../../request.js\";\nimport s from \"../../core/Error.js\";\nimport { JSONMap as i } from \"../../core/jsonMap.js\";\nimport a from \"../../core/Loadable.js\";\nimport n from \"../../core/Logger.js\";\nimport { isSome as p, isNone as l } from \"../../core/maybe.js\";\nimport { EsriPromiseMixin as d } from \"../../core/Promise.js\";\nimport { property as y } from \"../../core/accessorSupport/decorators/property.js\";\nimport \"../../core/arrayUtils.js\";\nimport \"../../core/has.js\";\nimport \"../../core/accessorSupport/ensureType.js\";\nimport { enumeration as u } from \"../../core/accessorSupport/decorators/enumeration.js\";\nimport { reader as c } from \"../../core/accessorSupport/decorators/reader.js\";\nimport { subclass as m } from \"../../core/accessorSupport/decorators/subclass.js\";\nimport h from \"../../geometry/Extent.js\";\nimport f from \"../../geometry/SpatialReference.js\";\nimport g from \"../FeatureLayer.js\";\nimport j from \"./BuildingSublayer.js\";\nimport { zeroCapabilities as v } from \"../support/capabilities.js\";\nimport { popupEnabled as b } from \"../support/commonProperties.js\";\nimport { defineFieldProperties as L } from \"../support/fieldProperties.js\";\nimport S from \"../support/FieldsIndex.js\";\nimport { fetchIndexInfo as F } from \"../support/I3SIndexInfo.js\";\nimport { I3SNodePageDefinition as I, I3SMaterialDefinition as O, I3STextureSetDefinition as x, I3SGeometryDefinition as w } from \"../support/I3SLayerDefinitions.js\";\nimport T from \"../../rest/support/Query.js\";\nimport { createPopupTemplate as q } from \"../../support/popupUtils.js\";\nimport R from \"../../symbols/support/ElevationInfo.js\";\nconst P = n.getLogger(\"esri.layers.buildingSublayers.BuildingComponentSublayer\"),\n      D = L();\nlet Q = class extends a.LoadableMixin(d(j)) {\n  constructor(e) {\n    super(e), this.type = \"building-component\", this.nodePages = null, this.materialDefinitions = null, this.textureSetDefinitions = null, this.geometryDefinitions = null, this.serviceUpdateTimeStamp = null, this.fields = null, this.associatedLayer = null, this.outFields = null, this.listMode = \"show\", this.renderer = null, this.definitionExpression = null, this.popupEnabled = !0, this.popupTemplate = null, this.layerType = \"3d-object\";\n  }\n\n  get parsedUrl() {\n    return this.layer ? {\n      path: `${this.layer.parsedUrl.path}/sublayers/${this.id}`,\n      query: this.layer.parsedUrl.query\n    } : null;\n  }\n\n  get fieldsIndex() {\n    return new S(this.fields);\n  }\n\n  readAssociatedLayer(e, r) {\n    const t = this.layer.associatedFeatureServiceItem,\n          o = r.associatedLayerID;\n    return p(t) && \"number\" == typeof o ? new g({\n      portalItem: t,\n      layerId: o\n    }) : null;\n  }\n\n  get objectIdField() {\n    if (null != this.fields) for (const e of this.fields) if (\"oid\" === e.type) return e.name;\n    return null;\n  }\n\n  get displayField() {\n    return p(this.associatedLayer) ? this.associatedLayer.displayField : null;\n  }\n\n  get apiKey() {\n    return this.layer.apiKey;\n  }\n\n  get fullExtent() {\n    return this.layer.fullExtent;\n  }\n\n  get spatialReference() {\n    return this.layer.spatialReference;\n  }\n\n  get version() {\n    return this.layer.version;\n  }\n\n  get elevationInfo() {\n    return this.layer.elevationInfo;\n  }\n\n  get minScale() {\n    return this.layer.minScale;\n  }\n\n  get maxScale() {\n    return this.layer.maxScale;\n  }\n\n  get effectiveScaleRange() {\n    return this.layer.effectiveScaleRange;\n  }\n\n  get defaultPopupTemplate() {\n    return this.createPopupTemplate();\n  }\n\n  load(e) {\n    const r = p(e) ? e.signal : null,\n          t = this._fetchService(r).then(() => {\n      this.indexInfo = F(this.parsedUrl.path, this.rootNode, this.nodePages, this.apiKey, P, r);\n    });\n\n    return this.addResolvingPromise(t), Promise.resolve(this);\n  }\n\n  createPopupTemplate(e) {\n    return q(this, e);\n  }\n\n  async _fetchService(e) {\n    const r = (await o(this.parsedUrl.path, {\n      query: {\n        f: \"json\",\n        token: this.apiKey\n      },\n      responseType: \"json\",\n      signal: e\n    })).data;\n    this.read(r, {\n      origin: \"service\",\n      url: this.parsedUrl\n    });\n  }\n\n  getField(e) {\n    return this.fieldsIndex.get(e);\n  }\n\n  getFieldDomain(e, r) {\n    var t, o, s, i;\n    const a = null == (t = this.getFeatureType(null == r ? void 0 : r.feature)) || null == (o = t.domains) ? void 0 : o[e];\n    return a && \"inherited\" !== a.type ? a : null != (s = null == (i = this.getField(e)) ? void 0 : i.domain) ? s : null;\n  }\n\n  getFeatureType(e) {\n    return e && p(this.associatedLayer) ? this.associatedLayer.getFeatureType(e) : null;\n  }\n\n  get types() {\n    return p(this.associatedLayer) ? this.associatedLayer.types : [];\n  }\n\n  get typeIdField() {\n    return p(this.associatedLayer) ? this.associatedLayer.typeIdField : null;\n  }\n\n  get geometryType() {\n    return \"3d-object\" === this.layerType ? \"mesh\" : \"point\";\n  }\n\n  get profile() {\n    return \"3d-object\" === this.layerType ? \"mesh-pyramids\" : \"points\";\n  }\n\n  get capabilities() {\n    const e = p(this.associatedLayer) && this.associatedLayer.capabilities ? this.associatedLayer.capabilities : v,\n          {\n      query: r,\n      data: {\n        supportsZ: t,\n        supportsM: o,\n        isVersioned: s\n      }\n    } = e;\n    return {\n      query: r,\n      data: {\n        supportsZ: t,\n        supportsM: o,\n        isVersioned: s\n      }\n    };\n  }\n\n  createQuery() {\n    const e = new T();\n    return \"mesh\" !== this.geometryType && (e.returnGeometry = !0, e.returnZ = !0), e.where = this.definitionExpression || \"1=1\", e.sqlFormat = \"standard\", e;\n  }\n\n  queryExtent(e, r) {\n    return this._getAssociatedLayerForQuery().then(t => t.queryExtent(e || this.createQuery(), r));\n  }\n\n  queryFeatureCount(e, r) {\n    return this._getAssociatedLayerForQuery().then(t => t.queryFeatureCount(e || this.createQuery(), r));\n  }\n\n  queryFeatures(e, r) {\n    return this._getAssociatedLayerForQuery().then(t => t.queryFeatures(e || this.createQuery(), r)).then(e => {\n      if (null != e && e.features) for (const r of e.features) r.layer = this.layer, r.sourceLayer = this;\n      return e;\n    });\n  }\n\n  queryObjectIds(e, r) {\n    return this._getAssociatedLayerForQuery().then(t => t.queryObjectIds(e || this.createQuery(), r));\n  }\n\n  getFieldUsageInfo(e) {\n    return this.fieldsIndex.has(e) ? {\n      supportsLabelingInfo: !1,\n      supportsRenderer: !1,\n      supportsPopupTemplate: !1,\n      supportsLayerQuery: !1\n    } : {\n      supportsLabelingInfo: !1,\n      supportsRenderer: !0,\n      supportsPopupTemplate: !0,\n      supportsLayerQuery: p(this.associatedLayer)\n    };\n  }\n\n  _getAssociatedLayerForQuery() {\n    const e = this.associatedLayer;\n    return p(e) && e.loaded ? Promise.resolve(e) : this._loadAssociatedLayerForQuery();\n  }\n\n  async _loadAssociatedLayerForQuery() {\n    if (await this.load(), l(this.associatedLayer)) throw new s(\"buildingscenelayer:query-not-available\", \"BuildingSceneLayer component layer queries are not available without an associated feature layer\", {\n      layer: this\n    });\n\n    try {\n      await this.associatedLayer.load();\n    } catch (e) {\n      throw new s(\"buildingscenelayer:query-not-available\", \"BuildingSceneLayer associated feature layer could not be loaded\", {\n        layer: this,\n        error: e\n      });\n    }\n\n    return this.associatedLayer;\n  }\n\n};\ne([y({\n  readOnly: !0\n})], Q.prototype, \"parsedUrl\", null), e([y({\n  type: I,\n  readOnly: !0\n})], Q.prototype, \"nodePages\", void 0), e([y({\n  type: [O],\n  readOnly: !0\n})], Q.prototype, \"materialDefinitions\", void 0), e([y({\n  type: [x],\n  readOnly: !0\n})], Q.prototype, \"textureSetDefinitions\", void 0), e([y({\n  type: [w],\n  readOnly: !0\n})], Q.prototype, \"geometryDefinitions\", void 0), e([y({\n  readOnly: !0\n})], Q.prototype, \"serviceUpdateTimeStamp\", void 0), e([y({\n  readOnly: !0\n})], Q.prototype, \"store\", void 0), e([y({\n  type: String,\n  readOnly: !0,\n  json: {\n    read: {\n      source: \"store.rootNode\"\n    }\n  }\n})], Q.prototype, \"rootNode\", void 0), e([y({\n  readOnly: !0\n})], Q.prototype, \"attributeStorageInfo\", void 0), e([y(D.fields)], Q.prototype, \"fields\", void 0), e([y({\n  readOnly: !0\n})], Q.prototype, \"fieldsIndex\", null), e([y({\n  readOnly: !0,\n  type: g\n})], Q.prototype, \"associatedLayer\", void 0), e([c(\"service\", \"associatedLayer\", [\"associatedLayerID\"])], Q.prototype, \"readAssociatedLayer\", null), e([y(D.outFields)], Q.prototype, \"outFields\", void 0), e([y({\n  type: String,\n  readOnly: !0\n})], Q.prototype, \"objectIdField\", null), e([y({\n  readOnly: !0,\n  type: String,\n  json: {\n    read: !1\n  }\n})], Q.prototype, \"displayField\", null), e([y({\n  readOnly: !0,\n  type: String\n})], Q.prototype, \"apiKey\", null), e([y({\n  readOnly: !0,\n  type: h\n})], Q.prototype, \"fullExtent\", null), e([y({\n  readOnly: !0,\n  type: f\n})], Q.prototype, \"spatialReference\", null), e([y({\n  readOnly: !0\n})], Q.prototype, \"version\", null), e([y({\n  readOnly: !0,\n  type: R\n})], Q.prototype, \"elevationInfo\", null), e([y({\n  readOnly: !0,\n  type: Number\n})], Q.prototype, \"minScale\", null), e([y({\n  readOnly: !0,\n  type: Number\n})], Q.prototype, \"maxScale\", null), e([y({\n  readOnly: !0,\n  type: Number\n})], Q.prototype, \"effectiveScaleRange\", null), e([y({\n  type: [\"hide\", \"show\"],\n  json: {\n    write: !0\n  }\n})], Q.prototype, \"listMode\", void 0), e([y({\n  types: t,\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"drawingInfo.renderer\"\n        }\n      }\n    },\n    name: \"layerDefinition.drawingInfo.renderer\",\n    write: !0\n  },\n  value: null\n})], Q.prototype, \"renderer\", void 0), e([y({\n  type: String,\n  json: {\n    origins: {\n      service: {\n        read: !1,\n        write: !1\n      }\n    },\n    name: \"layerDefinition.definitionExpression\",\n    write: {\n      enabled: !0,\n      allowNull: !0\n    }\n  }\n})], Q.prototype, \"definitionExpression\", void 0), e([y(b)], Q.prototype, \"popupEnabled\", void 0), e([y({\n  type: r,\n  json: {\n    read: {\n      source: \"popupInfo\"\n    },\n    write: {\n      target: \"popupInfo\"\n    }\n  }\n})], Q.prototype, \"popupTemplate\", void 0), e([y({\n  readOnly: !0,\n  type: String,\n  json: {\n    origins: {\n      service: {\n        read: {\n          source: \"store.normalReferenceFrame\"\n        }\n      }\n    },\n    read: !1\n  }\n})], Q.prototype, \"normalReferenceFrame\", void 0), e([y({\n  readOnly: !0,\n  json: {\n    read: !1\n  }\n})], Q.prototype, \"defaultPopupTemplate\", null), e([y()], Q.prototype, \"types\", null), e([y()], Q.prototype, \"typeIdField\", null), e([y({\n  json: {\n    write: !1\n  }\n}), u(new i({\n  \"3DObject\": \"3d-object\",\n  Point: \"point\"\n}))], Q.prototype, \"layerType\", void 0), e([y()], Q.prototype, \"geometryType\", null), e([y()], Q.prototype, \"profile\", null), e([y({\n  readOnly: !0,\n  json: {\n    read: !1\n  }\n})], Q.prototype, \"capabilities\", null), Q = e([m(\"esri.layers.buildingSublayers.BuildingComponentSublayer\")], Q);\nconst E = Q;\nexport { E as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/layers/buildingSublayers/BuildingComponentSublayer.js"],"names":["_","e","r","webSceneRendererTypes","t","o","s","JSONMap","i","a","n","isSome","p","isNone","l","EsriPromiseMixin","d","property","y","enumeration","u","reader","c","subclass","m","h","f","g","j","zeroCapabilities","v","popupEnabled","b","defineFieldProperties","L","S","fetchIndexInfo","F","I3SNodePageDefinition","I","I3SMaterialDefinition","O","I3STextureSetDefinition","x","I3SGeometryDefinition","w","T","createPopupTemplate","q","R","P","getLogger","D","Q","LoadableMixin","constructor","type","nodePages","materialDefinitions","textureSetDefinitions","geometryDefinitions","serviceUpdateTimeStamp","fields","associatedLayer","outFields","listMode","renderer","definitionExpression","popupTemplate","layerType","parsedUrl","layer","path","id","query","fieldsIndex","readAssociatedLayer","associatedFeatureServiceItem","associatedLayerID","portalItem","layerId","objectIdField","name","displayField","apiKey","fullExtent","spatialReference","version","elevationInfo","minScale","maxScale","effectiveScaleRange","defaultPopupTemplate","load","signal","_fetchService","then","indexInfo","rootNode","addResolvingPromise","Promise","resolve","token","responseType","data","read","origin","url","getField","get","getFieldDomain","getFeatureType","feature","domains","domain","types","typeIdField","geometryType","profile","capabilities","supportsZ","supportsM","isVersioned","createQuery","returnGeometry","returnZ","where","sqlFormat","queryExtent","_getAssociatedLayerForQuery","queryFeatureCount","queryFeatures","features","sourceLayer","queryObjectIds","getFieldUsageInfo","has","supportsLabelingInfo","supportsRenderer","supportsPopupTemplate","supportsLayerQuery","loaded","_loadAssociatedLayerForQuery","error","readOnly","prototype","String","json","source","Number","write","origins","service","value","enabled","allowNull","target","Point","E","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../PopupTemplate.js\";import\"../../renderers/ClassBreaksRenderer.js\";import\"../../renderers/DictionaryRenderer.js\";import\"../../renderers/DotDensityRenderer.js\";import\"../../renderers/HeatmapRenderer.js\";import\"../../renderers/Renderer.js\";import\"../../renderers/SimpleRenderer.js\";import\"../../renderers/UniqueValueRenderer.js\";import\"../../renderers/support/jsonUtils.js\";import{webSceneRendererTypes as t}from\"../../renderers/support/types.js\";import o from\"../../request.js\";import s from\"../../core/Error.js\";import{JSONMap as i}from\"../../core/jsonMap.js\";import a from\"../../core/Loadable.js\";import n from\"../../core/Logger.js\";import{isSome as p,isNone as l}from\"../../core/maybe.js\";import{EsriPromiseMixin as d}from\"../../core/Promise.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{enumeration as u}from\"../../core/accessorSupport/decorators/enumeration.js\";import{reader as c}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../../core/accessorSupport/decorators/subclass.js\";import h from\"../../geometry/Extent.js\";import f from\"../../geometry/SpatialReference.js\";import g from\"../FeatureLayer.js\";import j from\"./BuildingSublayer.js\";import{zeroCapabilities as v}from\"../support/capabilities.js\";import{popupEnabled as b}from\"../support/commonProperties.js\";import{defineFieldProperties as L}from\"../support/fieldProperties.js\";import S from\"../support/FieldsIndex.js\";import{fetchIndexInfo as F}from\"../support/I3SIndexInfo.js\";import{I3SNodePageDefinition as I,I3SMaterialDefinition as O,I3STextureSetDefinition as x,I3SGeometryDefinition as w}from\"../support/I3SLayerDefinitions.js\";import T from\"../../rest/support/Query.js\";import{createPopupTemplate as q}from\"../../support/popupUtils.js\";import R from\"../../symbols/support/ElevationInfo.js\";const P=n.getLogger(\"esri.layers.buildingSublayers.BuildingComponentSublayer\"),D=L();let Q=class extends(a.LoadableMixin(d(j))){constructor(e){super(e),this.type=\"building-component\",this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.fields=null,this.associatedLayer=null,this.outFields=null,this.listMode=\"show\",this.renderer=null,this.definitionExpression=null,this.popupEnabled=!0,this.popupTemplate=null,this.layerType=\"3d-object\"}get parsedUrl(){return this.layer?{path:`${this.layer.parsedUrl.path}/sublayers/${this.id}`,query:this.layer.parsedUrl.query}:null}get fieldsIndex(){return new S(this.fields)}readAssociatedLayer(e,r){const t=this.layer.associatedFeatureServiceItem,o=r.associatedLayerID;return p(t)&&\"number\"==typeof o?new g({portalItem:t,layerId:o}):null}get objectIdField(){if(null!=this.fields)for(const e of this.fields)if(\"oid\"===e.type)return e.name;return null}get displayField(){return p(this.associatedLayer)?this.associatedLayer.displayField:null}get apiKey(){return this.layer.apiKey}get fullExtent(){return this.layer.fullExtent}get spatialReference(){return this.layer.spatialReference}get version(){return this.layer.version}get elevationInfo(){return this.layer.elevationInfo}get minScale(){return this.layer.minScale}get maxScale(){return this.layer.maxScale}get effectiveScaleRange(){return this.layer.effectiveScaleRange}get defaultPopupTemplate(){return this.createPopupTemplate()}load(e){const r=p(e)?e.signal:null,t=this._fetchService(r).then((()=>{this.indexInfo=F(this.parsedUrl.path,this.rootNode,this.nodePages,this.apiKey,P,r)}));return this.addResolvingPromise(t),Promise.resolve(this)}createPopupTemplate(e){return q(this,e)}async _fetchService(e){const r=(await o(this.parsedUrl.path,{query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:e})).data;this.read(r,{origin:\"service\",url:this.parsedUrl})}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,r){var t,o,s,i;const a=null==(t=this.getFeatureType(null==r?void 0:r.feature))||null==(o=t.domains)?void 0:o[e];return a&&\"inherited\"!==a.type?a:null!=(s=null==(i=this.getField(e))?void 0:i.domain)?s:null}getFeatureType(e){return e&&p(this.associatedLayer)?this.associatedLayer.getFeatureType(e):null}get types(){return p(this.associatedLayer)?this.associatedLayer.types:[]}get typeIdField(){return p(this.associatedLayer)?this.associatedLayer.typeIdField:null}get geometryType(){return\"3d-object\"===this.layerType?\"mesh\":\"point\"}get profile(){return\"3d-object\"===this.layerType?\"mesh-pyramids\":\"points\"}get capabilities(){const e=p(this.associatedLayer)&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:v,{query:r,data:{supportsZ:t,supportsM:o,isVersioned:s}}=e;return{query:r,data:{supportsZ:t,supportsM:o,isVersioned:s}}}createQuery(){const e=new T;return\"mesh\"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||\"1=1\",e.sqlFormat=\"standard\",e}queryExtent(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryExtent(e||this.createQuery(),r)))}queryFeatureCount(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatureCount(e||this.createQuery(),r)))}queryFeatures(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryFeatures(e||this.createQuery(),r))).then((e=>{if(null!=e&&e.features)for(const r of e.features)r.layer=this.layer,r.sourceLayer=this;return e}))}queryObjectIds(e,r){return this._getAssociatedLayerForQuery().then((t=>t.queryObjectIds(e||this.createQuery(),r)))}getFieldUsageInfo(e){return this.fieldsIndex.has(e)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:p(this.associatedLayer)}}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return p(e)&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),l(this.associatedLayer))throw new s(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer component layer queries are not available without an associated feature layer\",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new s(\"buildingscenelayer:query-not-available\",\"BuildingSceneLayer associated feature layer could not be loaded\",{layer:this,error:e})}return this.associatedLayer}};e([y({readOnly:!0})],Q.prototype,\"parsedUrl\",null),e([y({type:I,readOnly:!0})],Q.prototype,\"nodePages\",void 0),e([y({type:[O],readOnly:!0})],Q.prototype,\"materialDefinitions\",void 0),e([y({type:[x],readOnly:!0})],Q.prototype,\"textureSetDefinitions\",void 0),e([y({type:[w],readOnly:!0})],Q.prototype,\"geometryDefinitions\",void 0),e([y({readOnly:!0})],Q.prototype,\"serviceUpdateTimeStamp\",void 0),e([y({readOnly:!0})],Q.prototype,\"store\",void 0),e([y({type:String,readOnly:!0,json:{read:{source:\"store.rootNode\"}}})],Q.prototype,\"rootNode\",void 0),e([y({readOnly:!0})],Q.prototype,\"attributeStorageInfo\",void 0),e([y(D.fields)],Q.prototype,\"fields\",void 0),e([y({readOnly:!0})],Q.prototype,\"fieldsIndex\",null),e([y({readOnly:!0,type:g})],Q.prototype,\"associatedLayer\",void 0),e([c(\"service\",\"associatedLayer\",[\"associatedLayerID\"])],Q.prototype,\"readAssociatedLayer\",null),e([y(D.outFields)],Q.prototype,\"outFields\",void 0),e([y({type:String,readOnly:!0})],Q.prototype,\"objectIdField\",null),e([y({readOnly:!0,type:String,json:{read:!1}})],Q.prototype,\"displayField\",null),e([y({readOnly:!0,type:String})],Q.prototype,\"apiKey\",null),e([y({readOnly:!0,type:h})],Q.prototype,\"fullExtent\",null),e([y({readOnly:!0,type:f})],Q.prototype,\"spatialReference\",null),e([y({readOnly:!0})],Q.prototype,\"version\",null),e([y({readOnly:!0,type:R})],Q.prototype,\"elevationInfo\",null),e([y({readOnly:!0,type:Number})],Q.prototype,\"minScale\",null),e([y({readOnly:!0,type:Number})],Q.prototype,\"maxScale\",null),e([y({readOnly:!0,type:Number})],Q.prototype,\"effectiveScaleRange\",null),e([y({type:[\"hide\",\"show\"],json:{write:!0}})],Q.prototype,\"listMode\",void 0),e([y({types:t,json:{origins:{service:{read:{source:\"drawingInfo.renderer\"}}},name:\"layerDefinition.drawingInfo.renderer\",write:!0},value:null})],Q.prototype,\"renderer\",void 0),e([y({type:String,json:{origins:{service:{read:!1,write:!1}},name:\"layerDefinition.definitionExpression\",write:{enabled:!0,allowNull:!0}}})],Q.prototype,\"definitionExpression\",void 0),e([y(b)],Q.prototype,\"popupEnabled\",void 0),e([y({type:r,json:{read:{source:\"popupInfo\"},write:{target:\"popupInfo\"}}})],Q.prototype,\"popupTemplate\",void 0),e([y({readOnly:!0,type:String,json:{origins:{service:{read:{source:\"store.normalReferenceFrame\"}}},read:!1}})],Q.prototype,\"normalReferenceFrame\",void 0),e([y({readOnly:!0,json:{read:!1}})],Q.prototype,\"defaultPopupTemplate\",null),e([y()],Q.prototype,\"types\",null),e([y()],Q.prototype,\"typeIdField\",null),e([y({json:{write:!1}}),u(new i({\"3DObject\":\"3d-object\",Point:\"point\"}))],Q.prototype,\"layerType\",void 0),e([y()],Q.prototype,\"geometryType\",null),e([y()],Q.prototype,\"profile\",null),e([y({readOnly:!0,json:{read:!1}})],Q.prototype,\"capabilities\",null),Q=e([m(\"esri.layers.buildingSublayers.BuildingComponentSublayer\")],Q);const E=Q;export{E as default};\n"]},"metadata":{},"sourceType":"module"}