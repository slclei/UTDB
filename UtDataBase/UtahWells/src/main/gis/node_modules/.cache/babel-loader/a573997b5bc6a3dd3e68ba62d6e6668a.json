{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../config.js\";\nimport { id as r } from \"../kernel.js\";\nimport o from \"../request.js\";\nimport { deprecatedProperty as s, deprecatedFunction as i } from \"../core/deprecate.js\";\nimport a from \"../core/Error.js\";\nimport { JSONSupportMixin as l } from \"../core/JSONSupport.js\";\nimport n from \"../core/Loadable.js\";\nimport u from \"../core/Logger.js\";\nimport { isSome as p } from \"../core/maybe.js\";\nimport { throwIfAborted as d, isAborted as h, createAbortError as c, throwIfAbortError as y } from \"../core/promiseUtils.js\";\nimport { property as m } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/has.js\";\nimport { ensureType as v } from \"../core/accessorSupport/ensureType.js\";\nimport { reader as f } from \"../core/accessorSupport/decorators/reader.js\";\nimport { subclass as S } from \"../core/accessorSupport/decorators/subclass.js\";\nimport g from \"../geometry/Extent.js\";\nimport { getLocale as P } from \"../intl/locale.js\";\nimport _ from \"./PortalQueryParams.js\";\nimport G from \"./PortalQueryResult.js\";\nimport U from \"./PortalUser.js\";\nimport { supportsApiKey as O } from \"../support/apiKeyUtils.js\";\nvar w;\nlet j;\nconst Q = {\n  PortalGroup: () => import(\"./PortalGroup.js\"),\n  PortalItem: () => import(\"./PortalItem.js\"),\n  PortalUser: () => import(\"./PortalUser.js\")\n};\nlet C = w = class extends l(n) {\n  constructor(e) {\n    super(e), this.access = null, this.allSSL = !1, this.authMode = \"auto\", this.authorizedCrossOriginDomains = null, this.basemapGalleryGroupQuery = null, this.bingKey = null, this.canListApps = !1, this.canListData = !1, this.canListPreProvisionedItems = !1, this.canProvisionDirectPurchase = !1, this.canSearchPublic = !0, this.canShareBingPublic = !1, this.canSharePublic = !1, this.canSignInArcGIS = !1, this.canSignInIDP = !1, this.colorSetsGroupQuery = null, this.commentsEnabled = !1, this.created = null, this.culture = null, this.customBaseUrl = null, this.defaultBasemap = null, this.defaultDevBasemap = null, this.defaultExtent = null, this.defaultVectorBasemap = null, this.description = null, this.devBasemapGalleryGroupQuery = null, this.eueiEnabled = null, this.featuredGroups = null, this.featuredItemsGroupQuery = null, this.galleryTemplatesGroupQuery = null, this.livingAtlasGroupQuery = null, this.hasCategorySchema = !1, this.helperServices = null, this.homePageFeaturedContent = null, this.homePageFeaturedContentCount = null, this.httpPort = null, this.httpsPort = null, this.id = null, this.ipCntryCode = null, this.isPortal = !1, this.isReadOnly = !1, this.layerTemplatesGroupQuery = null, this.maxTokenExpirationMinutes = null, this.modified = null, this.name = null, this.portalHostname = null, this.portalMode = null, this.portalProperties = null, this.region = null, this.rotatorPanels = null, this.showHomePageDescription = !1, this.sourceJSON = null, this.supportsHostedServices = !1, this.symbolSetsGroupQuery = null, this.templatesGroupQuery = null, this.units = null, this.url = t.portalUrl, this.urlKey = null, this.user = null, this.useStandardizedQuery = !1, this.useVectorBasemaps = !1, this.vectorBasemapGalleryGroupQuery = null;\n  }\n\n  normalizeCtorArgs(e) {\n    return \"string\" == typeof e ? {\n      url: e\n    } : e;\n  }\n\n  destroy() {\n    this._esriId_credentialCreateHandle && (this._esriId_credentialCreateHandle.remove(), this._esriId_credentialCreateHandle = null);\n  }\n\n  readAuthorizedCrossOriginDomains(e) {\n    if (e) for (const r of e) -1 === t.request.trustedServers.indexOf(r) && t.request.trustedServers.push(r);\n    return e;\n  }\n\n  readDefaultBasemap(e) {\n    return this._readBasemap(e);\n  }\n\n  readDefaultDevBasemap(e) {\n    return this._readBasemap(e);\n  }\n\n  readDefaultVectorBasemap(e) {\n    return this._readBasemap(e);\n  }\n\n  get extraQuery() {\n    const e = !(this.user && this.user.orgId) || this.canSearchPublic;\n    return this.id && !e ? ` AND orgid:${this.id}` : null;\n  }\n\n  get isOrganization() {\n    return !!this.access;\n  }\n\n  get restUrl() {\n    let e = this.url;\n\n    if (e) {\n      const t = e.indexOf(\"/sharing\");\n      e = t > 0 ? e.substring(0, t) : this.url.replace(/\\/+$/, \"\"), e += \"/sharing/rest\";\n    }\n\n    return e;\n  }\n\n  get stylesGroupQuery() {\n    return s(u.getLogger(this.declaredClass), \"stylesGroupQuery\", {\n      replacement: \"stylesGroupQuery3d\",\n      version: \"4.21\"\n    }), this.stylesGroupQuery3d;\n  }\n\n  get thumbnailUrl() {\n    const e = this.restUrl,\n          t = this.thumbnail;\n    return e && t ? this._normalizeSSL(e + \"/portals/self/resources/\" + t) : null;\n  }\n\n  readUrlKey(e) {\n    return e ? e.toLowerCase() : e;\n  }\n\n  readUser(e) {\n    let t = null;\n    return e && (t = U.fromJSON(e), t.portal = this), t;\n  }\n\n  load(e) {\n    const t = import(\"../Basemap.js\").then(_ref => {\n      let {\n        default: t\n      } = _ref;\n      d(e), j = t;\n    }).then(() => this.sourceJSON ? this.sourceJSON : this._fetchSelf(this.authMode, !1, e)).then(e => {\n      if (r) {\n        const e = r;\n        this.credential = e.findCredential(this.restUrl), this.credential || this.authMode !== w.AUTH_MODE_AUTO || (this._esriId_credentialCreateHandle = e.on(\"credential-create\", () => {\n          e.findCredential(this.restUrl) && this._signIn();\n        }));\n      }\n\n      this.sourceJSON = e, this.read(e);\n    });\n    return this.addResolvingPromise(t), Promise.resolve(this);\n  }\n\n  async createClosestFacilityTask() {\n    i(u.getLogger(this.declaredClass), null, {\n      replacement: \"Use helperServices url with esri/rest/closestFacility\",\n      version: \"4.21\"\n    }), await this.load();\n\n    const e = this._getHelperServiceUrl(\"closestFacility\");\n\n    return new (0, (await import(\"../tasks/ClosestFacilityTask.js\")).default)(e);\n  }\n\n  async createElevationLayers() {\n    await this.load();\n\n    const e = this._getHelperService(\"defaultElevationLayers\"),\n          t = (await import(\"../layers/ElevationLayer.js\")).default;\n\n    return e ? e.map(e => new t({\n      id: e.id,\n      url: e.url\n    })) : [];\n  }\n\n  async createGeometryService() {\n    i(u.getLogger(this.declaredClass), null, {\n      replacement: \"Use helperServices url with esri/rest/geometryService\",\n      version: \"4.21\"\n    }), await this.load();\n\n    const e = this._getHelperServiceUrl(\"geometry\");\n\n    return new (0, (await import(\"../tasks/GeometryService.js\")).default)({\n      url: e\n    });\n  }\n\n  async createPrintTask() {\n    i(u.getLogger(this.declaredClass), null, {\n      replacement: \"Use helperServices url with esri/rest/print\",\n      version: \"4.21\"\n    }), await this.load();\n\n    const e = this._getHelperServiceUrl(\"printTask\");\n\n    return new (0, (await import(\"../tasks/PrintTask.js\")).default)(e);\n  }\n\n  async createRouteTask() {\n    i(u.getLogger(this.declaredClass), null, {\n      replacement: \"Use helperServices url with esri/rest/route\",\n      version: \"4.21\"\n    }), await this.load();\n\n    const e = this._getHelperServiceUrl(\"route\");\n\n    return new (0, (await import(\"../tasks/RouteTask.js\")).default)(e);\n  }\n\n  async createServiceAreaTask() {\n    i(u.getLogger(this.declaredClass), null, {\n      replacement: \"Use helperServices url with esri/rest/serviceArea\",\n      version: \"4.21\"\n    }), await this.load();\n\n    const e = this._getHelperServiceUrl(\"serviceArea\");\n\n    return new (0, (await import(\"../tasks/ServiceAreaTask.js\")).default)(e);\n  }\n\n  fetchBasemaps(e, r) {\n    const o = new _();\n    return o.query = e || (t.apiKey && O(this.url) ? this.devBasemapGalleryGroupQuery : this.useVectorBasemaps ? this.vectorBasemapGalleryGroupQuery : this.basemapGalleryGroupQuery), o.disableExtraQuery = !0, this.queryGroups(o, r).then(e => {\n      if (o.num = 100, o.query = 'type:\"Web Map\" -type:\"Web Application\"', e.total) {\n        const t = e.results[0];\n        return o.sortField = t.sortField || \"name\", o.sortOrder = t.sortOrder || \"desc\", t.queryItems(o, r);\n      }\n\n      return null;\n    }).then(e => {\n      let t;\n      return t = e && e.total ? e.results.filter(e => \"Web Map\" === e.type).map(e => new j({\n        portalItem: e\n      })) : [], t;\n    });\n  }\n\n  fetchCategorySchema(e) {\n    return this.hasCategorySchema ? this._request(this.restUrl + \"/portals/self/categorySchema\", e).then(e => e.categorySchema) : h(e) ? Promise.reject(c()) : Promise.resolve([]);\n  }\n\n  fetchFeaturedGroups(e) {\n    const t = this.featuredGroups,\n          r = new _();\n\n    if (r.num = 100, r.sortField = \"title\", t && t.length) {\n      const o = [];\n\n      for (const e of t) o.push(`(title:\"${e.title}\" AND owner:${e.owner})`);\n\n      return r.query = o.join(\" OR \"), this.queryGroups(r, e).then(e => e.results);\n    }\n\n    return h(e) ? Promise.reject(c()) : Promise.resolve([]);\n  }\n\n  fetchRegions(e) {\n    var t;\n    const r = (null == (t = this.user) ? void 0 : t.culture) || this.culture || P();\n    return this._request(this.restUrl + \"/portals/regions\", { ...e,\n      query: {\n        culture: r\n      }\n    });\n  }\n\n  fetchSettings(e) {\n    var t;\n    const r = (null == (t = this.user) ? void 0 : t.culture) || this.culture || P();\n    return this._request(this.restUrl + \"/portals/self/settings\", { ...e,\n      query: {\n        culture: r\n      }\n    });\n  }\n\n  static getDefault() {\n    return w._default && !w._default.destroyed || (w._default = new w()), w._default;\n  }\n\n  queryGroups(e, t) {\n    return this._queryPortal(\"/community/groups\", e, \"PortalGroup\", t);\n  }\n\n  queryItems(e, t) {\n    return this._queryPortal(\"/search\", e, \"PortalItem\", t);\n  }\n\n  queryUsers(e, t) {\n    return e.sortField || (e.sortField = \"username\"), this._queryPortal(\"/community/users\", e, \"PortalUser\", t);\n  }\n\n  toJSON() {\n    throw new a(\"internal:not-yet-implemented\", \"Portal.toJSON is not yet implemented\");\n  }\n\n  static fromJSON(e) {\n    if (!e) return null;\n    if (e.declaredClass) throw new Error(\"JSON object is already hydrated\");\n    return new w({\n      sourceJSON: e\n    });\n  }\n\n  _getHelperService(e) {\n    const t = this.helperServices && this.helperServices[e];\n    if (!t) throw new a(\"portal:service-not-found\", `The \\`helperServices\\` do not include an entry named \"${e}\"`);\n    return t;\n  }\n\n  _getHelperServiceUrl(e) {\n    const t = this._getHelperService(e);\n\n    if (!t.url) throw new a(\"portal:service-url-not-found\", `The \\`helperServices\\` entry \"${e}\" does not include a \\`url\\` value`);\n    return t.url;\n  }\n\n  _fetchSelf() {\n    let e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.authMode;\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;\n    let r = arguments.length > 2 ? arguments[2] : undefined;\n    const o = this.restUrl + \"/portals/self\",\n          s = {\n      authMode: e,\n      query: {\n        culture: P().toLowerCase()\n      },\n      ...r\n    };\n    return \"auto\" === s.authMode && (s.authMode = \"no-prompt\"), t && (s.query.default = !0), this._request(o, s);\n  }\n\n  _queryPortal(e, t, r, o) {\n    const s = v(_, t),\n          i = t => this._request(this.restUrl + e, { ...s.toRequestOptions(this),\n      ...o\n    }).then(e => {\n      const r = s.clone();\n      return r.start = e.nextStart, new G({\n        nextQueryParams: r,\n        queryParams: s,\n        total: e.total,\n        results: w._resultsToTypedArray(t, {\n          portal: this\n        }, e, o)\n      });\n    }).then(e => Promise.all(e.results.map(t => \"function\" == typeof t.when ? t.when() : e)).then(() => e, t => (y(t), e)));\n\n    return r && Q[r] ? Q[r]().then(_ref2 => {\n      let {\n        default: e\n      } = _ref2;\n      return d(o), i(e);\n    }) : i();\n  }\n\n  _signIn() {\n    if (this.authMode === w.AUTH_MODE_ANONYMOUS) return Promise.reject(new a(\"portal:invalid-auth-mode\", `Current \"authMode\"' is \"${this.authMode}\"`));\n    if (\"failed\" === this.loadStatus) return Promise.reject(this.loadError);\n\n    const e = e => Promise.resolve().then(() => \"not-loaded\" === this.loadStatus ? (e || (this.authMode = \"immediate\"), this.load().then(() => null)) : \"loading\" === this.loadStatus ? this.load().then(() => this.credential ? null : (this.credential = e, this._fetchSelf(\"immediate\"))) : this.user && this.credential === e ? null : (this.credential = e, this._fetchSelf(\"immediate\"))).then(e => {\n      e && (this.sourceJSON = e, this.read(e));\n    });\n\n    return r ? r.getCredential(this.restUrl).then(t => e(t)) : e(this.credential);\n  }\n\n  _normalizeSSL(e) {\n    return e.replace(/^http:/i, \"https:\").replace(\":7080\", \":7443\");\n  }\n\n  _normalizeUrl(e) {\n    const t = this.credential && this.credential.token;\n    return this._normalizeSSL(t ? e + (e.indexOf(\"?\") > -1 ? \"&\" : \"?\") + \"token=\" + t : e);\n  }\n\n  _requestToTypedArray(e, t, r) {\n    return this._request(e, t).then(e => {\n      const t = w._resultsToTypedArray(r, {\n        portal: this\n      }, e);\n\n      return Promise.all(t.map(t => \"function\" == typeof t.when ? t.when() : e)).then(() => t, () => t);\n    });\n  }\n\n  _readBasemap(e) {\n    if (e) {\n      const t = j.fromJSON(e);\n      return t.portalItem = {\n        portal: this\n      }, t;\n    }\n\n    return null;\n  }\n\n  _request(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const r = {\n      f: \"json\",\n      ...t.query\n    },\n          {\n      authMode: s = this.authMode === w.AUTH_MODE_ANONYMOUS ? \"anonymous\" : \"auto\",\n      body: i = null,\n      cacheBust: a = !1,\n      method: l = \"auto\",\n      responseType: n = \"json\",\n      signal: u\n    } = t,\n          p = {\n      authMode: s,\n      body: i,\n      cacheBust: a,\n      method: l,\n      query: r,\n      responseType: n,\n      timeout: 0,\n      signal: u\n    };\n    return o(this._normalizeSSL(e), p).then(e => e.data);\n  }\n\n  static _resultsToTypedArray(e, t, r, o) {\n    let s;\n\n    if (r) {\n      const i = p(o) ? o.signal : null;\n      s = r.listings || r.notifications || r.userInvitations || r.tags || r.items || r.groups || r.comments || r.provisions || r.results || r.relatedItems || r, (e || t) && (s = s.map(r => {\n        const o = Object.assign(e ? e.fromJSON(r) : r, t);\n        return \"function\" == typeof o.load && o.load(i), o;\n      }));\n    } else s = [];\n\n    return s;\n  }\n\n};\nC.AUTH_MODE_ANONYMOUS = \"anonymous\", C.AUTH_MODE_AUTO = \"auto\", C.AUTH_MODE_IMMEDIATE = \"immediate\", e([m()], C.prototype, \"access\", void 0), e([m()], C.prototype, \"allSSL\", void 0), e([m()], C.prototype, \"authMode\", void 0), e([m()], C.prototype, \"authorizedCrossOriginDomains\", void 0), e([f(\"authorizedCrossOriginDomains\")], C.prototype, \"readAuthorizedCrossOriginDomains\", null), e([m()], C.prototype, \"basemapGalleryGroupQuery\", void 0), e([m()], C.prototype, \"bingKey\", void 0), e([m()], C.prototype, \"canListApps\", void 0), e([m()], C.prototype, \"canListData\", void 0), e([m()], C.prototype, \"canListPreProvisionedItems\", void 0), e([m()], C.prototype, \"canProvisionDirectPurchase\", void 0), e([m()], C.prototype, \"canSearchPublic\", void 0), e([m()], C.prototype, \"canShareBingPublic\", void 0), e([m()], C.prototype, \"canSharePublic\", void 0), e([m()], C.prototype, \"canSignInArcGIS\", void 0), e([m()], C.prototype, \"canSignInIDP\", void 0), e([m()], C.prototype, \"colorSetsGroupQuery\", void 0), e([m()], C.prototype, \"commentsEnabled\", void 0), e([m({\n  type: Date\n})], C.prototype, \"created\", void 0), e([m()], C.prototype, \"credential\", void 0), e([m()], C.prototype, \"culture\", void 0), e([m()], C.prototype, \"currentVersion\", void 0), e([m()], C.prototype, \"customBaseUrl\", void 0), e([m()], C.prototype, \"defaultBasemap\", void 0), e([f(\"defaultBasemap\")], C.prototype, \"readDefaultBasemap\", null), e([m()], C.prototype, \"defaultDevBasemap\", void 0), e([f(\"defaultDevBasemap\")], C.prototype, \"readDefaultDevBasemap\", null), e([m({\n  type: g\n})], C.prototype, \"defaultExtent\", void 0), e([m()], C.prototype, \"defaultVectorBasemap\", void 0), e([f(\"defaultVectorBasemap\")], C.prototype, \"readDefaultVectorBasemap\", null), e([m()], C.prototype, \"description\", void 0), e([m()], C.prototype, \"devBasemapGalleryGroupQuery\", void 0), e([m()], C.prototype, \"eueiEnabled\", void 0), e([m({\n  readOnly: !0\n})], C.prototype, \"extraQuery\", null), e([m()], C.prototype, \"featuredGroups\", void 0), e([m()], C.prototype, \"featuredItemsGroupQuery\", void 0), e([m()], C.prototype, \"galleryTemplatesGroupQuery\", void 0), e([m()], C.prototype, \"livingAtlasGroupQuery\", void 0), e([m()], C.prototype, \"hasCategorySchema\", void 0), e([m()], C.prototype, \"helpBase\", void 0), e([m()], C.prototype, \"helperServices\", void 0), e([m()], C.prototype, \"helpMap\", void 0), e([m()], C.prototype, \"homePageFeaturedContent\", void 0), e([m()], C.prototype, \"homePageFeaturedContentCount\", void 0), e([m()], C.prototype, \"httpPort\", void 0), e([m()], C.prototype, \"httpsPort\", void 0), e([m()], C.prototype, \"id\", void 0), e([m()], C.prototype, \"ipCntryCode\", void 0), e([m({\n  readOnly: !0\n})], C.prototype, \"isOrganization\", null), e([m()], C.prototype, \"isPortal\", void 0), e([m()], C.prototype, \"isReadOnly\", void 0), e([m()], C.prototype, \"layerTemplatesGroupQuery\", void 0), e([m()], C.prototype, \"maxTokenExpirationMinutes\", void 0), e([m({\n  type: Date\n})], C.prototype, \"modified\", void 0), e([m()], C.prototype, \"name\", void 0), e([m()], C.prototype, \"portalHostname\", void 0), e([m()], C.prototype, \"portalMode\", void 0), e([m()], C.prototype, \"portalProperties\", void 0), e([m()], C.prototype, \"region\", void 0), e([m({\n  readOnly: !0\n})], C.prototype, \"restUrl\", null), e([m()], C.prototype, \"rotatorPanels\", void 0), e([m()], C.prototype, \"showHomePageDescription\", void 0), e([m()], C.prototype, \"sourceJSON\", void 0), e([m()], C.prototype, \"staticImagesUrl\", void 0), e([m({\n  readOnly: !0,\n  json: {\n    read: !1\n  }\n})], C.prototype, \"stylesGroupQuery\", null), e([m({\n  json: {\n    name: \"2DStylesGroupQuery\"\n  }\n})], C.prototype, \"stylesGroupQuery2d\", void 0), e([m({\n  json: {\n    name: \"stylesGroupQuery\"\n  }\n})], C.prototype, \"stylesGroupQuery3d\", void 0), e([m()], C.prototype, \"supportsHostedServices\", void 0), e([m()], C.prototype, \"symbolSetsGroupQuery\", void 0), e([m()], C.prototype, \"templatesGroupQuery\", void 0), e([m()], C.prototype, \"thumbnail\", void 0), e([m({\n  readOnly: !0\n})], C.prototype, \"thumbnailUrl\", null), e([m()], C.prototype, \"units\", void 0), e([m()], C.prototype, \"url\", void 0), e([m()], C.prototype, \"urlKey\", void 0), e([f(\"urlKey\")], C.prototype, \"readUrlKey\", null), e([m()], C.prototype, \"user\", void 0), e([f(\"user\")], C.prototype, \"readUser\", null), e([m()], C.prototype, \"useStandardizedQuery\", void 0), e([m()], C.prototype, \"useVectorBasemaps\", void 0), e([m()], C.prototype, \"vectorBasemapGalleryGroupQuery\", void 0), C = w = e([S(\"esri.portal.Portal\")], C);\nconst B = C;\nexport { B as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/portal/Portal.js"],"names":["_","e","t","id","r","o","deprecatedProperty","s","deprecatedFunction","i","a","JSONSupportMixin","l","n","u","isSome","p","throwIfAborted","d","isAborted","h","createAbortError","c","throwIfAbortError","y","property","m","ensureType","v","reader","f","subclass","S","g","getLocale","P","G","U","supportsApiKey","O","w","j","Q","PortalGroup","PortalItem","PortalUser","C","constructor","access","allSSL","authMode","authorizedCrossOriginDomains","basemapGalleryGroupQuery","bingKey","canListApps","canListData","canListPreProvisionedItems","canProvisionDirectPurchase","canSearchPublic","canShareBingPublic","canSharePublic","canSignInArcGIS","canSignInIDP","colorSetsGroupQuery","commentsEnabled","created","culture","customBaseUrl","defaultBasemap","defaultDevBasemap","defaultExtent","defaultVectorBasemap","description","devBasemapGalleryGroupQuery","eueiEnabled","featuredGroups","featuredItemsGroupQuery","galleryTemplatesGroupQuery","livingAtlasGroupQuery","hasCategorySchema","helperServices","homePageFeaturedContent","homePageFeaturedContentCount","httpPort","httpsPort","ipCntryCode","isPortal","isReadOnly","layerTemplatesGroupQuery","maxTokenExpirationMinutes","modified","name","portalHostname","portalMode","portalProperties","region","rotatorPanels","showHomePageDescription","sourceJSON","supportsHostedServices","symbolSetsGroupQuery","templatesGroupQuery","units","url","portalUrl","urlKey","user","useStandardizedQuery","useVectorBasemaps","vectorBasemapGalleryGroupQuery","normalizeCtorArgs","destroy","_esriId_credentialCreateHandle","remove","readAuthorizedCrossOriginDomains","request","trustedServers","indexOf","push","readDefaultBasemap","_readBasemap","readDefaultDevBasemap","readDefaultVectorBasemap","extraQuery","orgId","isOrganization","restUrl","substring","replace","stylesGroupQuery","getLogger","declaredClass","replacement","version","stylesGroupQuery3d","thumbnailUrl","thumbnail","_normalizeSSL","readUrlKey","toLowerCase","readUser","fromJSON","portal","load","then","default","_fetchSelf","credential","findCredential","AUTH_MODE_AUTO","on","_signIn","read","addResolvingPromise","Promise","resolve","createClosestFacilityTask","_getHelperServiceUrl","createElevationLayers","_getHelperService","map","createGeometryService","createPrintTask","createRouteTask","createServiceAreaTask","fetchBasemaps","query","apiKey","disableExtraQuery","queryGroups","num","total","results","sortField","sortOrder","queryItems","filter","type","portalItem","fetchCategorySchema","_request","categorySchema","reject","fetchFeaturedGroups","length","title","owner","join","fetchRegions","fetchSettings","getDefault","_default","destroyed","_queryPortal","queryUsers","toJSON","Error","toRequestOptions","clone","start","nextStart","nextQueryParams","queryParams","_resultsToTypedArray","all","when","AUTH_MODE_ANONYMOUS","loadStatus","loadError","getCredential","_normalizeUrl","token","_requestToTypedArray","body","cacheBust","method","responseType","signal","timeout","data","listings","notifications","userInvitations","tags","items","groups","comments","provisions","relatedItems","Object","assign","AUTH_MODE_IMMEDIATE","prototype","Date","readOnly","json","B"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../config.js\";import{id as r}from\"../kernel.js\";import o from\"../request.js\";import{deprecatedProperty as s,deprecatedFunction as i}from\"../core/deprecate.js\";import a from\"../core/Error.js\";import{JSONSupportMixin as l}from\"../core/JSONSupport.js\";import n from\"../core/Loadable.js\";import u from\"../core/Logger.js\";import{isSome as p}from\"../core/maybe.js\";import{throwIfAborted as d,isAborted as h,createAbortError as c,throwIfAbortError as y}from\"../core/promiseUtils.js\";import{property as m}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{ensureType as v}from\"../core/accessorSupport/ensureType.js\";import{reader as f}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as S}from\"../core/accessorSupport/decorators/subclass.js\";import g from\"../geometry/Extent.js\";import{getLocale as P}from\"../intl/locale.js\";import _ from\"./PortalQueryParams.js\";import G from\"./PortalQueryResult.js\";import U from\"./PortalUser.js\";import{supportsApiKey as O}from\"../support/apiKeyUtils.js\";var w;let j;const Q={PortalGroup:()=>import(\"./PortalGroup.js\"),PortalItem:()=>import(\"./PortalItem.js\"),PortalUser:()=>import(\"./PortalUser.js\")};let C=w=class extends(l(n)){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode=\"auto\",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=t.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return\"string\"==typeof e?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const r of e)-1===t.request.trustedServers.indexOf(r)&&t.request.trustedServers.push(r);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf(\"/sharing\");e=t>0?e.substring(0,t):this.url.replace(/\\/+$/,\"\"),e+=\"/sharing/rest\"}return e}get stylesGroupQuery(){return s(u.getLogger(this.declaredClass),\"stylesGroupQuery\",{replacement:\"stylesGroupQuery3d\",version:\"4.21\"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+\"/portals/self/resources/\"+t):null}readUrlKey(e){return e?e.toLowerCase():e}readUser(e){let t=null;return e&&(t=U.fromJSON(e),t.portal=this),t}load(e){const t=import(\"../Basemap.js\").then((({default:t})=>{d(e),j=t})).then((()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e))).then((e=>{if(r){const e=r;this.credential=e.findCredential(this.restUrl),this.credential||this.authMode!==w.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=e.on(\"credential-create\",(()=>{e.findCredential(this.restUrl)&&this._signIn()})))}this.sourceJSON=e,this.read(e)}));return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){i(u.getLogger(this.declaredClass),null,{replacement:\"Use helperServices url with esri/rest/closestFacility\",version:\"4.21\"}),await this.load();const e=this._getHelperServiceUrl(\"closestFacility\");return new(0,(await import(\"../tasks/ClosestFacilityTask.js\")).default)(e)}async createElevationLayers(){await this.load();const e=this._getHelperService(\"defaultElevationLayers\"),t=(await import(\"../layers/ElevationLayer.js\")).default;return e?e.map((e=>new t({id:e.id,url:e.url}))):[]}async createGeometryService(){i(u.getLogger(this.declaredClass),null,{replacement:\"Use helperServices url with esri/rest/geometryService\",version:\"4.21\"}),await this.load();const e=this._getHelperServiceUrl(\"geometry\");return new(0,(await import(\"../tasks/GeometryService.js\")).default)({url:e})}async createPrintTask(){i(u.getLogger(this.declaredClass),null,{replacement:\"Use helperServices url with esri/rest/print\",version:\"4.21\"}),await this.load();const e=this._getHelperServiceUrl(\"printTask\");return new(0,(await import(\"../tasks/PrintTask.js\")).default)(e)}async createRouteTask(){i(u.getLogger(this.declaredClass),null,{replacement:\"Use helperServices url with esri/rest/route\",version:\"4.21\"}),await this.load();const e=this._getHelperServiceUrl(\"route\");return new(0,(await import(\"../tasks/RouteTask.js\")).default)(e)}async createServiceAreaTask(){i(u.getLogger(this.declaredClass),null,{replacement:\"Use helperServices url with esri/rest/serviceArea\",version:\"4.21\"}),await this.load();const e=this._getHelperServiceUrl(\"serviceArea\");return new(0,(await import(\"../tasks/ServiceAreaTask.js\")).default)(e)}fetchBasemaps(e,r){const o=new _;return o.query=e||(t.apiKey&&O(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),o.disableExtraQuery=!0,this.queryGroups(o,r).then((e=>{if(o.num=100,o.query='type:\"Web Map\" -type:\"Web Application\"',e.total){const t=e.results[0];return o.sortField=t.sortField||\"name\",o.sortOrder=t.sortOrder||\"desc\",t.queryItems(o,r)}return null})).then((e=>{let t;return t=e&&e.total?e.results.filter((e=>\"Web Map\"===e.type)).map((e=>new j({portalItem:e}))):[],t}))}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+\"/portals/self/categorySchema\",e).then((e=>e.categorySchema)):h(e)?Promise.reject(c()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new _;if(r.num=100,r.sortField=\"title\",t&&t.length){const o=[];for(const e of t)o.push(`(title:\"${e.title}\" AND owner:${e.owner})`);return r.query=o.join(\" OR \"),this.queryGroups(r,e).then((e=>e.results))}return h(e)?Promise.reject(c()):Promise.resolve([])}fetchRegions(e){var t;const r=(null==(t=this.user)?void 0:t.culture)||this.culture||P();return this._request(this.restUrl+\"/portals/regions\",{...e,query:{culture:r}})}fetchSettings(e){var t;const r=(null==(t=this.user)?void 0:t.culture)||this.culture||P();return this._request(this.restUrl+\"/portals/self/settings\",{...e,query:{culture:r}})}static getDefault(){return w._default&&!w._default.destroyed||(w._default=new w),w._default}queryGroups(e,t){return this._queryPortal(\"/community/groups\",e,\"PortalGroup\",t)}queryItems(e,t){return this._queryPortal(\"/search\",e,\"PortalItem\",t)}queryUsers(e,t){return e.sortField||(e.sortField=\"username\"),this._queryPortal(\"/community/users\",e,\"PortalUser\",t)}toJSON(){throw new a(\"internal:not-yet-implemented\",\"Portal.toJSON is not yet implemented\")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error(\"JSON object is already hydrated\");return new w({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new a(\"portal:service-not-found\",`The \\`helperServices\\` do not include an entry named \"${e}\"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new a(\"portal:service-url-not-found\",`The \\`helperServices\\` entry \"${e}\" does not include a \\`url\\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const o=this.restUrl+\"/portals/self\",s={authMode:e,query:{culture:P().toLowerCase()},...r};return\"auto\"===s.authMode&&(s.authMode=\"no-prompt\"),t&&(s.query.default=!0),this._request(o,s)}_queryPortal(e,t,r,o){const s=v(_,t),i=t=>this._request(this.restUrl+e,{...s.toRequestOptions(this),...o}).then((e=>{const r=s.clone();return r.start=e.nextStart,new G({nextQueryParams:r,queryParams:s,total:e.total,results:w._resultsToTypedArray(t,{portal:this},e,o)})})).then((e=>Promise.all(e.results.map((t=>\"function\"==typeof t.when?t.when():e))).then((()=>e),(t=>(y(t),e)))));return r&&Q[r]?Q[r]().then((({default:e})=>(d(o),i(e)))):i()}_signIn(){if(this.authMode===w.AUTH_MODE_ANONYMOUS)return Promise.reject(new a(\"portal:invalid-auth-mode\",`Current \"authMode\"' is \"${this.authMode}\"`));if(\"failed\"===this.loadStatus)return Promise.reject(this.loadError);const e=e=>Promise.resolve().then((()=>\"not-loaded\"===this.loadStatus?(e||(this.authMode=\"immediate\"),this.load().then((()=>null))):\"loading\"===this.loadStatus?this.load().then((()=>this.credential?null:(this.credential=e,this._fetchSelf(\"immediate\")))):this.user&&this.credential===e?null:(this.credential=e,this._fetchSelf(\"immediate\")))).then((e=>{e&&(this.sourceJSON=e,this.read(e))}));return r?r.getCredential(this.restUrl).then((t=>e(t))):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,\"https:\").replace(\":7080\",\":7443\")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf(\"?\")>-1?\"&\":\"?\")+\"token=\"+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then((e=>{const t=w._resultsToTypedArray(r,{portal:this},e);return Promise.all(t.map((t=>\"function\"==typeof t.when?t.when():e))).then((()=>t),(()=>t))}))}_readBasemap(e){if(e){const t=j.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const r={f:\"json\",...t.query},{authMode:s=(this.authMode===w.AUTH_MODE_ANONYMOUS?\"anonymous\":\"auto\"),body:i=null,cacheBust:a=!1,method:l=\"auto\",responseType:n=\"json\",signal:u}=t,p={authMode:s,body:i,cacheBust:a,method:l,query:r,responseType:n,timeout:0,signal:u};return o(this._normalizeSSL(e),p).then((e=>e.data))}static _resultsToTypedArray(e,t,r,o){let s;if(r){const i=p(o)?o.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map((r=>{const o=Object.assign(e?e.fromJSON(r):r,t);return\"function\"==typeof o.load&&o.load(i),o})))}else s=[];return s}};C.AUTH_MODE_ANONYMOUS=\"anonymous\",C.AUTH_MODE_AUTO=\"auto\",C.AUTH_MODE_IMMEDIATE=\"immediate\",e([m()],C.prototype,\"access\",void 0),e([m()],C.prototype,\"allSSL\",void 0),e([m()],C.prototype,\"authMode\",void 0),e([m()],C.prototype,\"authorizedCrossOriginDomains\",void 0),e([f(\"authorizedCrossOriginDomains\")],C.prototype,\"readAuthorizedCrossOriginDomains\",null),e([m()],C.prototype,\"basemapGalleryGroupQuery\",void 0),e([m()],C.prototype,\"bingKey\",void 0),e([m()],C.prototype,\"canListApps\",void 0),e([m()],C.prototype,\"canListData\",void 0),e([m()],C.prototype,\"canListPreProvisionedItems\",void 0),e([m()],C.prototype,\"canProvisionDirectPurchase\",void 0),e([m()],C.prototype,\"canSearchPublic\",void 0),e([m()],C.prototype,\"canShareBingPublic\",void 0),e([m()],C.prototype,\"canSharePublic\",void 0),e([m()],C.prototype,\"canSignInArcGIS\",void 0),e([m()],C.prototype,\"canSignInIDP\",void 0),e([m()],C.prototype,\"colorSetsGroupQuery\",void 0),e([m()],C.prototype,\"commentsEnabled\",void 0),e([m({type:Date})],C.prototype,\"created\",void 0),e([m()],C.prototype,\"credential\",void 0),e([m()],C.prototype,\"culture\",void 0),e([m()],C.prototype,\"currentVersion\",void 0),e([m()],C.prototype,\"customBaseUrl\",void 0),e([m()],C.prototype,\"defaultBasemap\",void 0),e([f(\"defaultBasemap\")],C.prototype,\"readDefaultBasemap\",null),e([m()],C.prototype,\"defaultDevBasemap\",void 0),e([f(\"defaultDevBasemap\")],C.prototype,\"readDefaultDevBasemap\",null),e([m({type:g})],C.prototype,\"defaultExtent\",void 0),e([m()],C.prototype,\"defaultVectorBasemap\",void 0),e([f(\"defaultVectorBasemap\")],C.prototype,\"readDefaultVectorBasemap\",null),e([m()],C.prototype,\"description\",void 0),e([m()],C.prototype,\"devBasemapGalleryGroupQuery\",void 0),e([m()],C.prototype,\"eueiEnabled\",void 0),e([m({readOnly:!0})],C.prototype,\"extraQuery\",null),e([m()],C.prototype,\"featuredGroups\",void 0),e([m()],C.prototype,\"featuredItemsGroupQuery\",void 0),e([m()],C.prototype,\"galleryTemplatesGroupQuery\",void 0),e([m()],C.prototype,\"livingAtlasGroupQuery\",void 0),e([m()],C.prototype,\"hasCategorySchema\",void 0),e([m()],C.prototype,\"helpBase\",void 0),e([m()],C.prototype,\"helperServices\",void 0),e([m()],C.prototype,\"helpMap\",void 0),e([m()],C.prototype,\"homePageFeaturedContent\",void 0),e([m()],C.prototype,\"homePageFeaturedContentCount\",void 0),e([m()],C.prototype,\"httpPort\",void 0),e([m()],C.prototype,\"httpsPort\",void 0),e([m()],C.prototype,\"id\",void 0),e([m()],C.prototype,\"ipCntryCode\",void 0),e([m({readOnly:!0})],C.prototype,\"isOrganization\",null),e([m()],C.prototype,\"isPortal\",void 0),e([m()],C.prototype,\"isReadOnly\",void 0),e([m()],C.prototype,\"layerTemplatesGroupQuery\",void 0),e([m()],C.prototype,\"maxTokenExpirationMinutes\",void 0),e([m({type:Date})],C.prototype,\"modified\",void 0),e([m()],C.prototype,\"name\",void 0),e([m()],C.prototype,\"portalHostname\",void 0),e([m()],C.prototype,\"portalMode\",void 0),e([m()],C.prototype,\"portalProperties\",void 0),e([m()],C.prototype,\"region\",void 0),e([m({readOnly:!0})],C.prototype,\"restUrl\",null),e([m()],C.prototype,\"rotatorPanels\",void 0),e([m()],C.prototype,\"showHomePageDescription\",void 0),e([m()],C.prototype,\"sourceJSON\",void 0),e([m()],C.prototype,\"staticImagesUrl\",void 0),e([m({readOnly:!0,json:{read:!1}})],C.prototype,\"stylesGroupQuery\",null),e([m({json:{name:\"2DStylesGroupQuery\"}})],C.prototype,\"stylesGroupQuery2d\",void 0),e([m({json:{name:\"stylesGroupQuery\"}})],C.prototype,\"stylesGroupQuery3d\",void 0),e([m()],C.prototype,\"supportsHostedServices\",void 0),e([m()],C.prototype,\"symbolSetsGroupQuery\",void 0),e([m()],C.prototype,\"templatesGroupQuery\",void 0),e([m()],C.prototype,\"thumbnail\",void 0),e([m({readOnly:!0})],C.prototype,\"thumbnailUrl\",null),e([m()],C.prototype,\"units\",void 0),e([m()],C.prototype,\"url\",void 0),e([m()],C.prototype,\"urlKey\",void 0),e([f(\"urlKey\")],C.prototype,\"readUrlKey\",null),e([m()],C.prototype,\"user\",void 0),e([f(\"user\")],C.prototype,\"readUser\",null),e([m()],C.prototype,\"useStandardizedQuery\",void 0),e([m()],C.prototype,\"useVectorBasemaps\",void 0),e([m()],C.prototype,\"vectorBasemapGalleryGroupQuery\",void 0),C=w=e([S(\"esri.portal.Portal\")],C);const B=C;export{B as default};\n"]},"metadata":{},"sourceType":"module"}