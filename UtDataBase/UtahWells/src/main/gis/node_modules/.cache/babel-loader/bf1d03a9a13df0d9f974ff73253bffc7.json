{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as e } from \"../chunks/tslib.es6.js\";\nimport t from \"../core/Error.js\";\nimport { HandleOwnerMixin as o } from \"../core/HandleOwner.js\";\nimport r from \"../core/Loadable.js\";\nimport n from \"../core/Logger.js\";\nimport { isNone as s, isSome as i } from \"../core/maybe.js\";\nimport { EsriPromiseMixin as a } from \"../core/Promise.js\";\nimport { whenOrAbort as l } from \"../core/promiseUtils.js\";\nimport { watch as p } from \"../core/reactiveUtils.js\";\nimport { property as c } from \"../core/accessorSupport/decorators/property.js\";\nimport \"../core/arrayUtils.js\";\nimport \"../core/has.js\";\nimport \"../core/accessorSupport/ensureType.js\";\nimport { subclass as m } from \"../core/accessorSupport/decorators/subclass.js\";\nimport { f as h, c as u } from \"../chunks/vec3f64.js\";\nimport f from \"./Extent.js\";\nimport d from \"./Geometry.js\";\nimport x from \"./Point.js\";\nimport y from \"./Polygon.js\";\nimport { fromAxisAndAngle as g, compose as b, create as v } from \"./support/axisAngleDegrees.js\";\nimport j from \"./support/MeshComponent.js\";\nimport w from \"./support/MeshTransform.js\";\nimport { MeshVertexAttributes as M } from \"./support/MeshVertexAttributes.js\";\nimport { triangulate as P } from \"./support/triangulationUtils.js\";\nimport { centerAt as R } from \"./support/meshUtils/centerAt.js\";\nimport { loadExternal as A } from \"./support/meshUtils/loadExternal.js\";\nimport { offset as z } from \"./support/meshUtils/offset.js\";\nimport { convertUnitGeometry as F, createUnitSizeBox as C, extractSingleFaceOfBox as O, createUnitSizeSphere as U, createUnitSizeCylinder as L, convertPlaneSizeParameter as T, createUnitSizePlane as E } from \"./support/meshUtils/primitives.js\";\nimport { rotate as G } from \"./support/meshUtils/rotate.js\";\nimport { scale as S } from \"./support/meshUtils/scale.js\";\nvar I;\nconst B = n.getLogger(\"esri.geometry.Mesh\");\nlet k = I = class extends o(r.LoadableMixin(a(d))) {\n  constructor(e) {\n    super(e), this.components = null, this.transform = null, this.external = null, this.hasZ = !0, this.hasM = !1, this.vertexAttributes = new M(), this.type = \"mesh\";\n  }\n\n  initialize() {\n    (s(this.external) || this.vertexAttributes.position.length) && (this.loadStatus = \"loaded\"), this.when(() => {\n      this.handles.add(p(() => {\n        var e;\n        return {\n          vertexAttributes: this.vertexAttributes,\n          components: null == (e = this.components) ? void 0 : e.map(e => e.clone()),\n          transform: i(this.transform) ? this.transform.clone() : null\n        };\n      }, () => this._set(\"external\", null), {\n        once: !0,\n        sync: !0\n      }));\n    });\n  }\n\n  get hasExtent() {\n    return !this.loaded && i(this.external) && i(this.external.extent) || this.loaded && this.vertexAttributes.position.length > 0 && (!this.components || this.components.length > 0);\n  }\n\n  get boundingInfo() {\n    const e = this.vertexAttributes.position,\n          t = this.spatialReference;\n    if (0 === e.length || this.components && 0 === this.components.length) return {\n      extent: new f({\n        xmin: 0,\n        ymin: 0,\n        zmin: 0,\n        xmax: 0,\n        ymax: 0,\n        zmax: 0,\n        spatialReference: t\n      }),\n      center: new x({\n        x: 0,\n        y: 0,\n        z: 0,\n        spatialReference: t\n      })\n    };\n    const o = i(this.transform) ? this.transform.project(e, t) : e;\n    let r = 1 / 0,\n        n = 1 / 0,\n        s = 1 / 0,\n        a = -1 / 0,\n        l = -1 / 0,\n        p = -1 / 0,\n        c = 0,\n        m = 0,\n        h = 0;\n    const u = o.length,\n          d = 1 / (u / 3);\n    let y = 0;\n\n    for (; y < u;) {\n      const e = o[y++],\n            t = o[y++],\n            i = o[y++];\n      r = Math.min(r, e), n = Math.min(n, t), s = Math.min(s, i), a = Math.max(a, e), l = Math.max(l, t), p = Math.max(p, i), c += d * e, m += d * t, h += d * i;\n    }\n\n    return {\n      extent: new f({\n        xmin: r,\n        ymin: n,\n        zmin: s,\n        xmax: a,\n        ymax: l,\n        zmax: p,\n        spatialReference: t\n      }),\n      center: new x({\n        x: c,\n        y: m,\n        z: h,\n        spatialReference: t\n      })\n    };\n  }\n\n  get anchor() {\n    if (i(this.transform)) return this.transform.getOriginPoint(this.spatialReference);\n    const e = this.boundingInfo;\n    return new x({\n      x: e.center.x,\n      y: e.center.y,\n      z: e.extent.zmin,\n      spatialReference: this.spatialReference\n    });\n  }\n\n  get origin() {\n    return i(this.transform) ? this.transform.getOriginPoint(this.spatialReference) : this.boundingInfo.center;\n  }\n\n  get extent() {\n    return !this.loaded && i(this.external) && i(this.external.extent) ? this.external.extent.clone() : this.boundingInfo.extent;\n  }\n\n  addComponent(e) {\n    this.loaded ? (this.components || (this.components = []), this.components.push(j.from(e)), this.notifyChange(\"components\")) : B.error(\"addComponent()\", \"Mesh must be loaded before applying operations\");\n  }\n\n  removeComponent(e) {\n    if (this.loaded) {\n      if (this.components) {\n        const t = this.components.indexOf(e);\n        if (-1 !== t) return this.components.splice(t, 1), void this.notifyChange(\"components\");\n      }\n\n      B.error(\"removeComponent()\", \"Provided component is not part of the list of components\");\n    } else B.error(\"removeComponent()\", \"Mesh must be loaded before applying operations\");\n  }\n\n  rotate(e, t, o, r) {\n    return g(D.x, e, W), g(D.y, t, Z), g(D.z, o, _), b(W, Z, W), b(W, _, W), G(this, W, r), this;\n  }\n\n  offset(e, t, o, r) {\n    return this.loaded ? (H[0] = e, H[1] = t, H[2] = o, z(this, H, r), this) : (B.error(\"offset()\", \"Mesh must be loaded before applying operations\"), this);\n  }\n\n  scale(e, t) {\n    return this.loaded ? (S(this, e, t), this) : (B.error(\"scale()\", \"Mesh must be loaded before applying operations\"), this);\n  }\n\n  centerAt(e, t) {\n    return this.loaded ? (R(this, e, t), this) : (B.error(\"centerAt()\", \"Mesh must be loaded before applying operations\"), this);\n  }\n\n  load(e) {\n    return i(this.external) && this.addResolvingPromise(A(this, this.external.source, e)), Promise.resolve(this);\n  }\n\n  clone() {\n    const e = this.components ? new Map() : null,\n          t = this.components ? new Map() : null,\n          o = {\n      components: this.components ? this.components.map(o => o.cloneWithDeduplication(e, t)) : null,\n      spatialReference: this.spatialReference,\n      vertexAttributes: this.vertexAttributes.clone(),\n      transform: i(this.transform) ? this.transform.clone() : null,\n      external: i(this.external) ? {\n        source: this.external.source,\n        extent: i(this.external.extent) ? this.external.extent.clone() : null\n      } : null\n    };\n    return new I(o);\n  }\n\n  vertexAttributesChanged() {\n    this.notifyChange(\"vertexAttributes\");\n  }\n\n  async toBinaryGLTF(e) {\n    const {\n      toBinaryGLTF: t\n    } = await import(\"./support/meshUtils/exporters/gltf/gltfexport.js\");\n    return t(this, e);\n  }\n\n  static createBox(e, t) {\n    if (!(e instanceof x)) return B.error(\".createBox()\", \"expected location to be a Point instance\"), null;\n    const o = new I(F(C(), e, t));\n    return t && t.imageFace && \"all\" !== t.imageFace ? O(o, t.imageFace) : o;\n  }\n\n  static createSphere(e, t) {\n    return e instanceof x ? new I(F(U(t && t.densificationFactor || 0), e, t)) : (B.error(\".createSphere()\", \"expected location to be a Point instance\"), null);\n  }\n\n  static createCylinder(e, t) {\n    return e instanceof x ? new I(F(L(t && t.densificationFactor || 0), e, t)) : (B.error(\".createCylinder()\", \"expected location to be a Point instance\"), null);\n  }\n\n  static createPlane(e, t) {\n    var o;\n    if (!(e instanceof x)) return B.error(\".createPlane()\", \"expected location to be a Point instance\"), null;\n    const r = null != (o = null == t ? void 0 : t.facing) ? o : \"up\",\n          n = T(r, null == t ? void 0 : t.size);\n    return new I(F(E(r), e, { ...t,\n      size: n\n    }));\n  }\n\n  static createFromPolygon(e, t) {\n    if (!(e instanceof y)) return B.error(\".createFromPolygon()\", \"expected polygon to be a Polygon instance\"), null;\n    const o = P(e);\n    return new I({\n      vertexAttributes: new M({\n        position: o.position\n      }),\n      components: [new j({\n        faces: o.faces,\n        shading: \"flat\",\n        material: t && t.material || null\n      })],\n      spatialReference: e.spatialReference\n    });\n  }\n\n  static async createFromGLTF(e, o, r) {\n    if (!(e instanceof x)) throw B.error(\".createfromGLTF()\", \"expected location to be a Point instance\"), new t(\"invalid-input\", \"Expected location to be a Point instance\");\n    const {\n      loadGLTFMesh: n\n    } = await l(import(\"./support/meshUtils/loadGLTFMesh.js\"), r);\n    return new I(await n(e, o, r));\n  }\n\n  static createWithExternalSource(e, t, o) {\n    var r, n, s;\n    const i = null != (r = null == o ? void 0 : o.extent) ? r : null,\n          a = null != (n = null == o ? void 0 : o.transform.clone()) ? n : new w();\n    a.origin = [e.x, e.y, null != (s = e.z) ? s : 0];\n    const l = e.spatialReference;\n    return new I({\n      external: {\n        source: t,\n        extent: i\n      },\n      transform: a,\n      spatialReference: l\n    });\n  }\n\n  static createIncomplete(e, o) {\n    var r, n;\n    const s = null != (r = null == o ? void 0 : o.transform.clone()) ? r : new w();\n    s.origin = [e.x, e.y, null != (n = e.z) ? n : 0];\n    const i = e.spatialReference,\n          a = new I({\n      transform: s,\n      spatialReference: i\n    });\n    return a.addResolvingPromise(Promise.reject(new t(\"mesh-incomplete\", \"Mesh resources are not complete\"))), a;\n  }\n\n};\ne([c({\n  type: [j],\n  json: {\n    write: !0\n  }\n})], k.prototype, \"components\", void 0), e([c({\n  type: w,\n  json: {\n    write: !0\n  }\n})], k.prototype, \"transform\", void 0), e([c({\n  constructOnly: !0\n})], k.prototype, \"external\", void 0), e([c({\n  readOnly: !0\n})], k.prototype, \"hasExtent\", null), e([c({\n  readOnly: !0\n})], k.prototype, \"boundingInfo\", null), e([c({\n  readOnly: !0\n})], k.prototype, \"anchor\", null), e([c({\n  readOnly: !0\n})], k.prototype, \"origin\", null), e([c({\n  readOnly: !0,\n  json: {\n    read: !1\n  }\n})], k.prototype, \"extent\", null), e([c({\n  readOnly: !0,\n  json: {\n    read: !1,\n    write: !0,\n    default: !0\n  }\n})], k.prototype, \"hasZ\", void 0), e([c({\n  readOnly: !0,\n  json: {\n    read: !1,\n    write: !0,\n    default: !1\n  }\n})], k.prototype, \"hasM\", void 0), e([c({\n  type: M,\n  nonNullable: !0,\n  json: {\n    write: !0\n  }\n})], k.prototype, \"vertexAttributes\", void 0), k = I = e([m(\"esri.geometry.Mesh\")], k);\n\nconst D = {\n  x: h(1, 0, 0),\n  y: h(0, 1, 0),\n  z: h(0, 0, 1)\n},\n      W = v(),\n      Z = v(),\n      _ = v(),\n      H = u(),\n      N = k;\n\nexport { N as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/geometry/Mesh.js"],"names":["_","e","t","HandleOwnerMixin","o","r","n","isNone","s","isSome","i","EsriPromiseMixin","a","whenOrAbort","l","watch","p","property","c","subclass","m","f","h","u","d","x","y","fromAxisAndAngle","g","compose","b","create","v","j","w","MeshVertexAttributes","M","triangulate","P","centerAt","R","loadExternal","A","offset","z","convertUnitGeometry","F","createUnitSizeBox","C","extractSingleFaceOfBox","O","createUnitSizeSphere","U","createUnitSizeCylinder","L","convertPlaneSizeParameter","T","createUnitSizePlane","E","rotate","G","scale","S","I","B","getLogger","k","LoadableMixin","constructor","components","transform","external","hasZ","hasM","vertexAttributes","type","initialize","position","length","loadStatus","when","handles","add","map","clone","_set","once","sync","hasExtent","loaded","extent","boundingInfo","spatialReference","xmin","ymin","zmin","xmax","ymax","zmax","center","project","Math","min","max","anchor","getOriginPoint","origin","addComponent","push","from","notifyChange","error","removeComponent","indexOf","splice","D","W","Z","H","load","addResolvingPromise","source","Promise","resolve","Map","cloneWithDeduplication","vertexAttributesChanged","toBinaryGLTF","createBox","imageFace","createSphere","densificationFactor","createCylinder","createPlane","facing","size","createFromPolygon","faces","shading","material","createFromGLTF","loadGLTFMesh","createWithExternalSource","createIncomplete","reject","json","write","prototype","constructOnly","readOnly","read","default","nonNullable","N"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as o}from\"../core/HandleOwner.js\";import r from\"../core/Loadable.js\";import n from\"../core/Logger.js\";import{isNone as s,isSome as i}from\"../core/maybe.js\";import{EsriPromiseMixin as a}from\"../core/Promise.js\";import{whenOrAbort as l}from\"../core/promiseUtils.js\";import{watch as p}from\"../core/reactiveUtils.js\";import{property as c}from\"../core/accessorSupport/decorators/property.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import\"../core/accessorSupport/ensureType.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{f as h,c as u}from\"../chunks/vec3f64.js\";import f from\"./Extent.js\";import d from\"./Geometry.js\";import x from\"./Point.js\";import y from\"./Polygon.js\";import{fromAxisAndAngle as g,compose as b,create as v}from\"./support/axisAngleDegrees.js\";import j from\"./support/MeshComponent.js\";import w from\"./support/MeshTransform.js\";import{MeshVertexAttributes as M}from\"./support/MeshVertexAttributes.js\";import{triangulate as P}from\"./support/triangulationUtils.js\";import{centerAt as R}from\"./support/meshUtils/centerAt.js\";import{loadExternal as A}from\"./support/meshUtils/loadExternal.js\";import{offset as z}from\"./support/meshUtils/offset.js\";import{convertUnitGeometry as F,createUnitSizeBox as C,extractSingleFaceOfBox as O,createUnitSizeSphere as U,createUnitSizeCylinder as L,convertPlaneSizeParameter as T,createUnitSizePlane as E}from\"./support/meshUtils/primitives.js\";import{rotate as G}from\"./support/meshUtils/rotate.js\";import{scale as S}from\"./support/meshUtils/scale.js\";var I;const B=n.getLogger(\"esri.geometry.Mesh\");let k=I=class extends(o(r.LoadableMixin(a(d)))){constructor(e){super(e),this.components=null,this.transform=null,this.external=null,this.hasZ=!0,this.hasM=!1,this.vertexAttributes=new M,this.type=\"mesh\"}initialize(){(s(this.external)||this.vertexAttributes.position.length)&&(this.loadStatus=\"loaded\"),this.when((()=>{this.handles.add(p((()=>{var e;return{vertexAttributes:this.vertexAttributes,components:null==(e=this.components)?void 0:e.map((e=>e.clone())),transform:i(this.transform)?this.transform.clone():null}}),(()=>this._set(\"external\",null)),{once:!0,sync:!0}))}))}get hasExtent(){return!this.loaded&&i(this.external)&&i(this.external.extent)||this.loaded&&this.vertexAttributes.position.length>0&&(!this.components||this.components.length>0)}get boundingInfo(){const e=this.vertexAttributes.position,t=this.spatialReference;if(0===e.length||this.components&&0===this.components.length)return{extent:new f({xmin:0,ymin:0,zmin:0,xmax:0,ymax:0,zmax:0,spatialReference:t}),center:new x({x:0,y:0,z:0,spatialReference:t})};const o=i(this.transform)?this.transform.project(e,t):e;let r=1/0,n=1/0,s=1/0,a=-1/0,l=-1/0,p=-1/0,c=0,m=0,h=0;const u=o.length,d=1/(u/3);let y=0;for(;y<u;){const e=o[y++],t=o[y++],i=o[y++];r=Math.min(r,e),n=Math.min(n,t),s=Math.min(s,i),a=Math.max(a,e),l=Math.max(l,t),p=Math.max(p,i),c+=d*e,m+=d*t,h+=d*i}return{extent:new f({xmin:r,ymin:n,zmin:s,xmax:a,ymax:l,zmax:p,spatialReference:t}),center:new x({x:c,y:m,z:h,spatialReference:t})}}get anchor(){if(i(this.transform))return this.transform.getOriginPoint(this.spatialReference);const e=this.boundingInfo;return new x({x:e.center.x,y:e.center.y,z:e.extent.zmin,spatialReference:this.spatialReference})}get origin(){return i(this.transform)?this.transform.getOriginPoint(this.spatialReference):this.boundingInfo.center}get extent(){return!this.loaded&&i(this.external)&&i(this.external.extent)?this.external.extent.clone():this.boundingInfo.extent}addComponent(e){this.loaded?(this.components||(this.components=[]),this.components.push(j.from(e)),this.notifyChange(\"components\")):B.error(\"addComponent()\",\"Mesh must be loaded before applying operations\")}removeComponent(e){if(this.loaded){if(this.components){const t=this.components.indexOf(e);if(-1!==t)return this.components.splice(t,1),void this.notifyChange(\"components\")}B.error(\"removeComponent()\",\"Provided component is not part of the list of components\")}else B.error(\"removeComponent()\",\"Mesh must be loaded before applying operations\")}rotate(e,t,o,r){return g(D.x,e,W),g(D.y,t,Z),g(D.z,o,_),b(W,Z,W),b(W,_,W),G(this,W,r),this}offset(e,t,o,r){return this.loaded?(H[0]=e,H[1]=t,H[2]=o,z(this,H,r),this):(B.error(\"offset()\",\"Mesh must be loaded before applying operations\"),this)}scale(e,t){return this.loaded?(S(this,e,t),this):(B.error(\"scale()\",\"Mesh must be loaded before applying operations\"),this)}centerAt(e,t){return this.loaded?(R(this,e,t),this):(B.error(\"centerAt()\",\"Mesh must be loaded before applying operations\"),this)}load(e){return i(this.external)&&this.addResolvingPromise(A(this,this.external.source,e)),Promise.resolve(this)}clone(){const e=this.components?new Map:null,t=this.components?new Map:null,o={components:this.components?this.components.map((o=>o.cloneWithDeduplication(e,t))):null,spatialReference:this.spatialReference,vertexAttributes:this.vertexAttributes.clone(),transform:i(this.transform)?this.transform.clone():null,external:i(this.external)?{source:this.external.source,extent:i(this.external.extent)?this.external.extent.clone():null}:null};return new I(o)}vertexAttributesChanged(){this.notifyChange(\"vertexAttributes\")}async toBinaryGLTF(e){const{toBinaryGLTF:t}=await import(\"./support/meshUtils/exporters/gltf/gltfexport.js\");return t(this,e)}static createBox(e,t){if(!(e instanceof x))return B.error(\".createBox()\",\"expected location to be a Point instance\"),null;const o=new I(F(C(),e,t));return t&&t.imageFace&&\"all\"!==t.imageFace?O(o,t.imageFace):o}static createSphere(e,t){return e instanceof x?new I(F(U(t&&t.densificationFactor||0),e,t)):(B.error(\".createSphere()\",\"expected location to be a Point instance\"),null)}static createCylinder(e,t){return e instanceof x?new I(F(L(t&&t.densificationFactor||0),e,t)):(B.error(\".createCylinder()\",\"expected location to be a Point instance\"),null)}static createPlane(e,t){var o;if(!(e instanceof x))return B.error(\".createPlane()\",\"expected location to be a Point instance\"),null;const r=null!=(o=null==t?void 0:t.facing)?o:\"up\",n=T(r,null==t?void 0:t.size);return new I(F(E(r),e,{...t,size:n}))}static createFromPolygon(e,t){if(!(e instanceof y))return B.error(\".createFromPolygon()\",\"expected polygon to be a Polygon instance\"),null;const o=P(e);return new I({vertexAttributes:new M({position:o.position}),components:[new j({faces:o.faces,shading:\"flat\",material:t&&t.material||null})],spatialReference:e.spatialReference})}static async createFromGLTF(e,o,r){if(!(e instanceof x))throw B.error(\".createfromGLTF()\",\"expected location to be a Point instance\"),new t(\"invalid-input\",\"Expected location to be a Point instance\");const{loadGLTFMesh:n}=await l(import(\"./support/meshUtils/loadGLTFMesh.js\"),r);return new I(await n(e,o,r))}static createWithExternalSource(e,t,o){var r,n,s;const i=null!=(r=null==o?void 0:o.extent)?r:null,a=null!=(n=null==o?void 0:o.transform.clone())?n:new w;a.origin=[e.x,e.y,null!=(s=e.z)?s:0];const l=e.spatialReference;return new I({external:{source:t,extent:i},transform:a,spatialReference:l})}static createIncomplete(e,o){var r,n;const s=null!=(r=null==o?void 0:o.transform.clone())?r:new w;s.origin=[e.x,e.y,null!=(n=e.z)?n:0];const i=e.spatialReference,a=new I({transform:s,spatialReference:i});return a.addResolvingPromise(Promise.reject(new t(\"mesh-incomplete\",\"Mesh resources are not complete\"))),a}};e([c({type:[j],json:{write:!0}})],k.prototype,\"components\",void 0),e([c({type:w,json:{write:!0}})],k.prototype,\"transform\",void 0),e([c({constructOnly:!0})],k.prototype,\"external\",void 0),e([c({readOnly:!0})],k.prototype,\"hasExtent\",null),e([c({readOnly:!0})],k.prototype,\"boundingInfo\",null),e([c({readOnly:!0})],k.prototype,\"anchor\",null),e([c({readOnly:!0})],k.prototype,\"origin\",null),e([c({readOnly:!0,json:{read:!1}})],k.prototype,\"extent\",null),e([c({readOnly:!0,json:{read:!1,write:!0,default:!0}})],k.prototype,\"hasZ\",void 0),e([c({readOnly:!0,json:{read:!1,write:!0,default:!1}})],k.prototype,\"hasM\",void 0),e([c({type:M,nonNullable:!0,json:{write:!0}})],k.prototype,\"vertexAttributes\",void 0),k=I=e([m(\"esri.geometry.Mesh\")],k);const D={x:h(1,0,0),y:h(0,1,0),z:h(0,0,1)},W=v(),Z=v(),_=v(),H=u(),N=k;export{N as default};\n"]},"metadata":{},"sourceType":"module"}