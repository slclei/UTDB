{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport \"../../../../../core/has.js\";\nimport { BitBlitRenderer as e } from \"../BitBlitRenderer.js\";\nimport { Effect as t } from \"./Effect.js\";\nimport s from \"./highlight/HighlightGradient.js\";\nimport i from \"./highlight/HighlightRenderer.js\";\nimport h from \"./highlight/HighlightSurfaces.js\";\nimport { TextureSamplingMode as r } from \"../../../../webgl/enums.js\";\nconst l = 4,\n      d = 4 / l;\n\nclass n extends t {\n  constructor() {\n    super(...arguments), this.defines = [\"highlight\"], this._hlRenderer = new i(), this._hlGradient = new s(), this._width = void 0, this._height = void 0, this._hlSurfaces = new h(), this._adjustedWidth = void 0, this._adjustedHeight = void 0, this._blitRenderer = new e();\n  }\n\n  dispose() {\n    this._hlSurfaces && this._hlSurfaces.dispose(), this._hlRenderer && this._hlRenderer.dispose(), this._hlGradient && this._hlGradient.destroy(), this._boundFBO = null;\n  }\n\n  bind(e) {\n    const {\n      context: t,\n      painter: s\n    } = e,\n          {\n      width: i,\n      height: h\n    } = t.getViewport(),\n          r = s.getFbos(i, h).effect0;\n    this.setup(e, i, h), t.bindFramebuffer(r), t.setColorMask(!0, !0, !0, !0), t.setClearColor(0, 0, 0, 0), t.clear(t.gl.COLOR_BUFFER_BIT);\n  }\n\n  unbind() {}\n\n  setup(_ref, t, s) {\n    let {\n      context: e\n    } = _ref;\n    this._width = t, this._height = s;\n    const i = t % l,\n          h = s % l;\n    t += i < l / 2 ? -i : l - i, s += h < l / 2 ? -h : l - h, this._adjustedWidth = t, this._adjustedHeight = s, this._boundFBO = e.getBoundFramebufferObject();\n    const r = Math.round(t * d),\n          n = Math.round(s * d);\n    this._hlRenderer.setup(e, r, n), this._hlSurfaces.setup(e, r, n);\n  }\n\n  draw(_ref2) {\n    let {\n      context: e\n    } = _ref2;\n    const t = e.getBoundFramebufferObject();\n    e.setViewport(0, 0, this._adjustedWidth * d, this._adjustedHeight * d), e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo), e.setStencilTestEnabled(!1), e.setClearColor(0, 0, 0, 0), e.clear(e.gl.COLOR_BUFFER_BIT), this._blitRenderer.render(e, t.colorTexture, r.NEAREST, 1), e.setStencilTestEnabled(!1), e.setBlendingEnabled(!1), e.setColorMask(!1, !1, !1, !0), e.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo), e.setClearColor(0, 0, 0, 0), e.clear(e.gl.COLOR_BUFFER_BIT), this._hlRenderer.preBlur(e, this._hlSurfaces.sharedBlur1Tex), e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo), e.setClearColor(0, 0, 0, 0), e.clear(e.gl.COLOR_BUFFER_BIT), this._hlRenderer.finalBlur(e, this._hlSurfaces.sharedBlur2Tex), e.bindFramebuffer(this._boundFBO), e.setBlendingEnabled(!0), e.setColorMask(!0, !0, !0, !0), e.setViewport(0, 0, this._width, this._height), this._hlRenderer.renderHighlight(e, this._hlSurfaces.sharedBlur1Tex, this._hlGradient), this._boundFBO = null;\n  }\n\n  setHighlightOptions(e) {\n    this._hlGradient.setHighlightOptions(e);\n  }\n\n}\n\nexport { n as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/engine/webgl/effects/HighlightEffect.js"],"names":["BitBlitRenderer","e","Effect","t","s","i","h","TextureSamplingMode","r","l","d","n","constructor","arguments","defines","_hlRenderer","_hlGradient","_width","_height","_hlSurfaces","_adjustedWidth","_adjustedHeight","_blitRenderer","dispose","destroy","_boundFBO","bind","context","painter","width","height","getViewport","getFbos","effect0","setup","bindFramebuffer","setColorMask","setClearColor","clear","gl","COLOR_BUFFER_BIT","unbind","getBoundFramebufferObject","Math","round","draw","setViewport","sharedBlur1Fbo","setStencilTestEnabled","render","colorTexture","NEAREST","setBlendingEnabled","sharedBlur2Fbo","preBlur","sharedBlur1Tex","finalBlur","sharedBlur2Tex","renderHighlight","setHighlightOptions","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import{BitBlitRenderer as e}from\"../BitBlitRenderer.js\";import{Effect as t}from\"./Effect.js\";import s from\"./highlight/HighlightGradient.js\";import i from\"./highlight/HighlightRenderer.js\";import h from\"./highlight/HighlightSurfaces.js\";import{TextureSamplingMode as r}from\"../../../../webgl/enums.js\";const l=4,d=4/l;class n extends t{constructor(){super(...arguments),this.defines=[\"highlight\"],this._hlRenderer=new i,this._hlGradient=new s,this._width=void 0,this._height=void 0,this._hlSurfaces=new h,this._adjustedWidth=void 0,this._adjustedHeight=void 0,this._blitRenderer=new e}dispose(){this._hlSurfaces&&this._hlSurfaces.dispose(),this._hlRenderer&&this._hlRenderer.dispose(),this._hlGradient&&this._hlGradient.destroy(),this._boundFBO=null}bind(e){const{context:t,painter:s}=e,{width:i,height:h}=t.getViewport(),r=s.getFbos(i,h).effect0;this.setup(e,i,h),t.bindFramebuffer(r),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.clear(t.gl.COLOR_BUFFER_BIT)}unbind(){}setup({context:e},t,s){this._width=t,this._height=s;const i=t%l,h=s%l;t+=i<l/2?-i:l-i,s+=h<l/2?-h:l-h,this._adjustedWidth=t,this._adjustedHeight=s,this._boundFBO=e.getBoundFramebufferObject();const r=Math.round(t*d),n=Math.round(s*d);this._hlRenderer.setup(e,r,n),this._hlSurfaces.setup(e,r,n)}draw({context:e}){const t=e.getBoundFramebufferObject();e.setViewport(0,0,this._adjustedWidth*d,this._adjustedHeight*d),e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),e.setStencilTestEnabled(!1),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._blitRenderer.render(e,t.colorTexture,r.NEAREST,1),e.setStencilTestEnabled(!1),e.setBlendingEnabled(!1),e.setColorMask(!1,!1,!1,!0),e.bindFramebuffer(this._hlSurfaces.sharedBlur2Fbo),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._hlRenderer.preBlur(e,this._hlSurfaces.sharedBlur1Tex),e.bindFramebuffer(this._hlSurfaces.sharedBlur1Fbo),e.setClearColor(0,0,0,0),e.clear(e.gl.COLOR_BUFFER_BIT),this._hlRenderer.finalBlur(e,this._hlSurfaces.sharedBlur2Tex),e.bindFramebuffer(this._boundFBO),e.setBlendingEnabled(!0),e.setColorMask(!0,!0,!0,!0),e.setViewport(0,0,this._width,this._height),this._hlRenderer.renderHighlight(e,this._hlSurfaces.sharedBlur1Tex,this._hlGradient),this._boundFBO=null}setHighlightOptions(e){this._hlGradient.setHighlightOptions(e)}}export{n as default};\n"]},"metadata":{},"sourceType":"module"}