{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { p as e, c as r, e as n, a as t, r as u, l as s, b as i, d as a, f as o, s as l, g as c } from \"../chunks/arcade.js\";\nexport { h as arcade } from \"../chunks/arcade.js\";\nimport f from \"../arcade/Dictionary.js\";\nexport { default as Dictionary } from \"../arcade/Dictionary.js\";\nimport p from \"../arcade/Feature.js\";\nexport { default as arcadeFeature } from \"../arcade/Feature.js\";\nimport { clone as m } from \"../core/lang.js\";\nimport { isSizeVariable as d } from \"../renderers/visualVariables/support/sizeVariableUtils.js\";\nconst y = /^\\$(feature|aggregatedFeatures)\\./i,\n      v = {\n  vars: {\n    $feature: \"any\",\n    $view: \"any\"\n  },\n  spatialReference: null\n};\n\nfunction x(e) {\n  return e.replace(/[|\\\\{}()[\\]^$+*?.]/g, \"\\\\$&\");\n}\n\nfunction g(r) {\n  if (!r) return null;\n\n  try {\n    return e(r);\n  } catch (n) {}\n\n  return null;\n}\n\nfunction w(e, n) {\n  const t = \"string\" == typeof e ? g(e) : e;\n  if (!t) return null;\n\n  try {\n    return n = n || m(v), r(t, n);\n  } catch (u) {}\n\n  return null;\n}\n\nfunction E(e, r) {\n  return {\n    vars: {\n      $feature: null == e ? new p() : p.createFromGraphic(e),\n      $view: r && r.view\n    },\n    spatialReference: r && r.sr\n  };\n}\n\nfunction F(e, r, n) {\n  return p.createFromGraphicLikeObject(r, e, n);\n}\n\nfunction $(e, r) {\n  e.vars.$feature = r;\n}\n\nfunction b(e, r) {\n  let t;\n\n  try {\n    t = n(e, r);\n  } catch (u) {\n    t = null;\n  }\n\n  return t;\n}\n\nfunction j(e, r) {\n  let n;\n\n  try {\n    n = e ? e(r) : null;\n  } catch (t) {\n    n = null;\n  }\n\n  return n;\n}\n\nfunction S(e, r) {\n  try {\n    return e ? e(r) : Promise.resolve(null);\n  } catch (n) {\n    return Promise.resolve(null);\n  }\n}\n\nfunction R(e, r) {\n  if (!e) return [];\n  const n = \"string\" == typeof e ? g(e) : e;\n  if (!n) return [];\n  const u = t(n);\n  let s = new Array();\n  u.forEach(e => {\n    y.test(e) && (e = e.replace(y, \"\"), s.push(e));\n  });\n  const i = s.filter(e => e.includes(\"*\"));\n  return s = s.filter(e => !i.includes(e)), r && i.forEach(e => {\n    const n = new RegExp(`^${e.split(/\\*+/).map(x).join(\".*\")}$`, \"i\");\n    r.forEach(e => n.test(e) ? s.push(e) : null);\n  }), [...new Set(s.sort())];\n}\n\nfunction z(e) {\n  return u(e, \"$view\");\n}\n\nfunction C(e, r) {\n  return !!e && u(e, r);\n}\n\nfunction I(e) {\n  if (!e || null == e.spatialReference && (null == e.scale || null == e.viewingMode)) return;\n  return {\n    view: e.viewingMode && null != e.scale ? new f({\n      viewingMode: e.viewingMode,\n      scale: e.scale\n    }) : null,\n    sr: e.spatialReference\n  };\n}\n\nfunction M(_ref) {\n  let {\n    url: e,\n    spatialReference: r,\n    lrucache: n,\n    interceptor: t\n  } = _ref;\n  const u = o();\n  return u ? u.createFeatureSetCollectionFromService(e, r, n, t) : null;\n}\n\nfunction k(_ref2) {\n  let {\n    layer: e,\n    spatialReference: r,\n    outFields: n,\n    returnGeometry: t,\n    lrucache: u,\n    interceptor: s\n  } = _ref2;\n  if (null === e) return null;\n  const i = o();\n  return i ? i.constructFeatureSet(e, r, n, null == t || t, u, s) : null;\n}\n\nfunction A(e) {\n  if (null === (null == e ? void 0 : e.map)) return null;\n  const r = o();\n  return r ? r.createFeatureSetCollectionFromMap(e.map, e.spatialReference, e.lrucache, e.interceptor) : null;\n}\n\nfunction D(e, r) {\n  let n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  return s(e, r, n);\n}\n\nfunction G() {\n  return i();\n}\n\nfunction P() {\n  return a();\n}\n\nfunction V(e) {\n  return \"simple\" === e.type || \"class-breaks\" === e.type || \"unique-value\" === e.type || \"dot-density\" === e.type || \"dictionary\" === e.type;\n}\n\nfunction L(e) {\n  return \"esri.layers.support.LabelClass\" === e.declaredClass;\n}\n\nfunction q(e) {\n  return \"esri.PopupTemplate\" === e.declaredClass;\n}\n\nfunction O(e, r) {\n  if (!e) return !1;\n  if (\"string\" == typeof e) return r(e);\n  const n = e;\n\n  if (V(n)) {\n    if (\"dot-density\" === n.type) {\n      const e = n.attributes.some(e => r(e.valueExpression));\n      if (e) return e;\n    }\n\n    const e = n.visualVariables,\n          t = !!e && e.some(e => {\n      let n = r(e.valueExpression);\n      return \"size\" === e.type && (d(e.minSize) && (n = n || r(e.minSize.valueExpression)), d(e.maxSize) && (n = n || r(e.maxSize.valueExpression))), n;\n    });\n    return !(!(\"valueExpression\" in n) || !r(n.valueExpression)) || t;\n  }\n\n  if (L(n)) {\n    const e = n.labelExpressionInfo && n.labelExpressionInfo.expression;\n    return !(!e || !r(e)) || !1;\n  }\n\n  return !!q(n) && (!!n.expressionInfos && n.expressionInfos.some(e => r(e.expression)) || Array.isArray(n.content) && n.content.some(e => {\n    var n;\n    return \"expression\" === e.type && r(null == (n = e.expressionInfo) ? void 0 : n.expression);\n  }));\n}\n\nfunction T(e) {\n  const r = g(e);\n  return !!r && l(r);\n}\n\nfunction U(e) {\n  return O(e, T);\n}\n\nfunction B(e) {\n  const r = g(e);\n  return !!r && c(r);\n}\n\nfunction H(e) {\n  return O(e, B);\n}\n\nexport { k as convertFeatureLayerToFeatureSet, A as convertMapToFeatureSetCollection, M as convertServiceUrlToWorkspace, E as createExecContext, F as createFeature, w as createFunction, g as createSyntaxTree, z as dependsOnView, P as enableFeatureSetOperations, G as enableGeometryOperations, b as evalSyntaxTree, S as executeAsyncFunction, j as executeFunction, R as extractFieldNames, I as getViewInfo, U as hasGeometryFunctions, H as hasGeometryOperations, C as hasVariable, D as loadScriptDependencies, $ as updateExecContext };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/support/arcadeUtils.js"],"names":["p","e","c","r","n","a","t","u","l","s","b","i","d","f","o","g","h","arcade","default","Dictionary","arcadeFeature","clone","m","isSizeVariable","y","v","vars","$feature","$view","spatialReference","x","replace","w","E","createFromGraphic","view","sr","F","createFromGraphicLikeObject","$","j","S","Promise","resolve","R","Array","forEach","test","push","filter","includes","RegExp","split","map","join","Set","sort","z","C","I","scale","viewingMode","M","url","lrucache","interceptor","createFeatureSetCollectionFromService","k","layer","outFields","returnGeometry","constructFeatureSet","A","createFeatureSetCollectionFromMap","D","G","P","V","type","L","declaredClass","q","O","attributes","some","valueExpression","visualVariables","minSize","maxSize","labelExpressionInfo","expression","expressionInfos","isArray","content","expressionInfo","T","U","B","H","convertFeatureLayerToFeatureSet","convertMapToFeatureSetCollection","convertServiceUrlToWorkspace","createExecContext","createFeature","createFunction","createSyntaxTree","dependsOnView","enableFeatureSetOperations","enableGeometryOperations","evalSyntaxTree","executeAsyncFunction","executeFunction","extractFieldNames","getViewInfo","hasGeometryFunctions","hasGeometryOperations","hasVariable","loadScriptDependencies","updateExecContext"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{p as e,c as r,e as n,a as t,r as u,l as s,b as i,d as a,f as o,s as l,g as c}from\"../chunks/arcade.js\";export{h as arcade}from\"../chunks/arcade.js\";import f from\"../arcade/Dictionary.js\";export{default as Dictionary}from\"../arcade/Dictionary.js\";import p from\"../arcade/Feature.js\";export{default as arcadeFeature}from\"../arcade/Feature.js\";import{clone as m}from\"../core/lang.js\";import{isSizeVariable as d}from\"../renderers/visualVariables/support/sizeVariableUtils.js\";const y=/^\\$(feature|aggregatedFeatures)\\./i,v={vars:{$feature:\"any\",$view:\"any\"},spatialReference:null};function x(e){return e.replace(/[|\\\\{}()[\\]^$+*?.]/g,\"\\\\$&\")}function g(r){if(!r)return null;try{return e(r)}catch(n){}return null}function w(e,n){const t=\"string\"==typeof e?g(e):e;if(!t)return null;try{return n=n||m(v),r(t,n)}catch(u){}return null}function E(e,r){return{vars:{$feature:null==e?new p:p.createFromGraphic(e),$view:r&&r.view},spatialReference:r&&r.sr}}function F(e,r,n){return p.createFromGraphicLikeObject(r,e,n)}function $(e,r){e.vars.$feature=r}function b(e,r){let t;try{t=n(e,r)}catch(u){t=null}return t}function j(e,r){let n;try{n=e?e(r):null}catch(t){n=null}return n}function S(e,r){try{return e?e(r):Promise.resolve(null)}catch(n){return Promise.resolve(null)}}function R(e,r){if(!e)return[];const n=\"string\"==typeof e?g(e):e;if(!n)return[];const u=t(n);let s=new Array;u.forEach((e=>{y.test(e)&&(e=e.replace(y,\"\"),s.push(e))}));const i=s.filter((e=>e.includes(\"*\")));return s=s.filter((e=>!i.includes(e))),r&&i.forEach((e=>{const n=new RegExp(`^${e.split(/\\*+/).map(x).join(\".*\")}$`,\"i\");r.forEach((e=>n.test(e)?s.push(e):null))})),[...new Set(s.sort())]}function z(e){return u(e,\"$view\")}function C(e,r){return!!e&&u(e,r)}function I(e){if(!e||null==e.spatialReference&&(null==e.scale||null==e.viewingMode))return;return{view:e.viewingMode&&null!=e.scale?new f({viewingMode:e.viewingMode,scale:e.scale}):null,sr:e.spatialReference}}function M({url:e,spatialReference:r,lrucache:n,interceptor:t}){const u=o();return u?u.createFeatureSetCollectionFromService(e,r,n,t):null}function k({layer:e,spatialReference:r,outFields:n,returnGeometry:t,lrucache:u,interceptor:s}){if(null===e)return null;const i=o();return i?i.constructFeatureSet(e,r,n,null==t||t,u,s):null}function A(e){if(null===(null==e?void 0:e.map))return null;const r=o();return r?r.createFeatureSetCollectionFromMap(e.map,e.spatialReference,e.lrucache,e.interceptor):null}function D(e,r,n=[]){return s(e,r,n)}function G(){return i()}function P(){return a()}function V(e){return\"simple\"===e.type||\"class-breaks\"===e.type||\"unique-value\"===e.type||\"dot-density\"===e.type||\"dictionary\"===e.type}function L(e){return\"esri.layers.support.LabelClass\"===e.declaredClass}function q(e){return\"esri.PopupTemplate\"===e.declaredClass}function O(e,r){if(!e)return!1;if(\"string\"==typeof e)return r(e);const n=e;if(V(n)){if(\"dot-density\"===n.type){const e=n.attributes.some((e=>r(e.valueExpression)));if(e)return e}const e=n.visualVariables,t=!!e&&e.some((e=>{let n=r(e.valueExpression);return\"size\"===e.type&&(d(e.minSize)&&(n=n||r(e.minSize.valueExpression)),d(e.maxSize)&&(n=n||r(e.maxSize.valueExpression))),n}));return!(!(\"valueExpression\"in n)||!r(n.valueExpression))||t}if(L(n)){const e=n.labelExpressionInfo&&n.labelExpressionInfo.expression;return!(!e||!r(e))||!1}return!!q(n)&&(!!n.expressionInfos&&n.expressionInfos.some((e=>r(e.expression)))||Array.isArray(n.content)&&n.content.some((e=>{var n;return\"expression\"===e.type&&r(null==(n=e.expressionInfo)?void 0:n.expression)})))}function T(e){const r=g(e);return!!r&&l(r)}function U(e){return O(e,T)}function B(e){const r=g(e);return!!r&&c(r)}function H(e){return O(e,B)}export{k as convertFeatureLayerToFeatureSet,A as convertMapToFeatureSetCollection,M as convertServiceUrlToWorkspace,E as createExecContext,F as createFeature,w as createFunction,g as createSyntaxTree,z as dependsOnView,P as enableFeatureSetOperations,G as enableGeometryOperations,b as evalSyntaxTree,S as executeAsyncFunction,j as executeFunction,R as extractFieldNames,I as getViewInfo,U as hasGeometryFunctions,H as hasGeometryOperations,C as hasVariable,D as loadScriptDependencies,$ as updateExecContext};\n"]},"metadata":{},"sourceType":"module"}