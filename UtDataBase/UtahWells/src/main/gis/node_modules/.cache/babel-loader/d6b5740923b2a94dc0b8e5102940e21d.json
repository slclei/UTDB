{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { _ as i } from \"../../../chunks/tslib.es6.js\";\nimport e from \"../../../Graphic.js\";\nimport t from \"../../../core/Collection.js\";\nimport { property as s } from \"../../../core/accessorSupport/decorators/property.js\";\nimport \"../../../core/arrayUtils.js\";\nimport \"../../../core/has.js\";\nimport \"../../../core/accessorSupport/ensureType.js\";\nimport { subclass as h } from \"../../../core/accessorSupport/decorators/subclass.js\";\nimport { LayerView2DMixin as r } from \"./LayerView2D.js\";\nimport a from \"./graphics/GraphicContainer.js\";\nimport o from \"./graphics/GraphicsView2D.js\";\nimport p from \"../../layers/LayerView.js\";\nconst g = {\n  remove() {},\n\n  pause() {},\n\n  resume() {}\n\n};\nlet c = class extends r(p) {\n  constructor() {\n    super(...arguments), this._highlightIds = new Map();\n  }\n\n  attach() {\n    this.graphicsView = new o({\n      requestUpdateCallback: () => this.requestUpdate(),\n      view: this.view,\n      graphics: this.layer.graphics,\n      container: new a(this.view.featuresTilingScheme)\n    }), this._updateHighlight(), this.container.addChild(this.graphicsView.container), this.handles.add(this.layer.on(\"graphic-update\", this.graphicsView.graphicUpdateHandler), \"graphicslayerview2d\");\n  }\n\n  detach() {\n    this.container.removeAllChildren(), this.graphicsView.destroy(), this.graphicsView = null, this.handles.remove(\"graphicslayerview2d\");\n  }\n\n  async hitTest(i) {\n    return this.graphicsView ? this.graphicsView.hitTest(i) : null;\n  }\n\n  async fetchPopupFeatures(i) {\n    if (this.graphicsView) return this.graphicsView.hitTest(i).filter(i => !!i.popupTemplate);\n  }\n\n  queryGraphics() {\n    return Promise.resolve(this.graphicsView.graphics);\n  }\n\n  update(i) {\n    this.graphicsView.processUpdate(i);\n  }\n\n  moveStart() {}\n\n  viewChange() {\n    this.graphicsView.viewChange();\n  }\n\n  moveEnd() {}\n\n  isUpdating() {\n    return !this.graphicsView || this.graphicsView.updating;\n  }\n\n  highlight(i) {\n    var s;\n    let h;\n    return \"number\" == typeof i ? h = [i] : i instanceof e ? h = [i.uid] : Array.isArray(i) && i.length > 0 ? h = \"number\" == typeof i[0] ? i : i.map(i => i && i.uid) : t.isCollection(i) && i.length > 0 && (h = i.map(i => i && i.uid).toArray()), h = null == (s = h) ? void 0 : s.filter(i => null != i), h.length ? (this._addHighlight(h), {\n      remove: () => this._removeHighlight(h)\n    }) : g;\n  }\n\n  _addHighlight(i) {\n    for (const e of i) if (this._highlightIds.has(e)) {\n      const i = this._highlightIds.get(e);\n\n      this._highlightIds.set(e, i + 1);\n    } else this._highlightIds.set(e, 1);\n\n    this._updateHighlight();\n  }\n\n  _removeHighlight(i) {\n    for (const e of i) if (this._highlightIds.has(e)) {\n      const i = this._highlightIds.get(e) - 1;\n      0 === i ? this._highlightIds.delete(e) : this._highlightIds.set(e, i);\n    }\n\n    this._updateHighlight();\n  }\n\n  _updateHighlight() {\n    var i;\n    null == (i = this.graphicsView) || i.setHighlight(Array.from(this._highlightIds.keys()));\n  }\n\n};\ni([s()], c.prototype, \"graphicsView\", void 0), c = i([h(\"esri.views.2d.layers.GraphicsLayerView2D\")], c);\nconst l = c;\nexport { l as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/views/2d/layers/GraphicsLayerView2D.js"],"names":["_","i","e","t","property","s","subclass","h","LayerView2DMixin","r","a","o","p","g","remove","pause","resume","c","constructor","arguments","_highlightIds","Map","attach","graphicsView","requestUpdateCallback","requestUpdate","view","graphics","layer","container","featuresTilingScheme","_updateHighlight","addChild","handles","add","on","graphicUpdateHandler","detach","removeAllChildren","destroy","hitTest","fetchPopupFeatures","filter","popupTemplate","queryGraphics","Promise","resolve","update","processUpdate","moveStart","viewChange","moveEnd","isUpdating","updating","highlight","uid","Array","isArray","length","map","isCollection","toArray","_addHighlight","_removeHighlight","has","get","set","delete","setHighlight","from","keys","prototype","l","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{_ as i}from\"../../../chunks/tslib.es6.js\";import e from\"../../../Graphic.js\";import t from\"../../../core/Collection.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as r}from\"./LayerView2D.js\";import a from\"./graphics/GraphicContainer.js\";import o from\"./graphics/GraphicsView2D.js\";import p from\"../../layers/LayerView.js\";const g={remove(){},pause(){},resume(){}};let c=class extends(r(p)){constructor(){super(...arguments),this._highlightIds=new Map}attach(){this.graphicsView=new o({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this.layer.graphics,container:new a(this.view.featuresTilingScheme)}),this._updateHighlight(),this.container.addChild(this.graphicsView.container),this.handles.add(this.layer.on(\"graphic-update\",this.graphicsView.graphicUpdateHandler),\"graphicslayerview2d\")}detach(){this.container.removeAllChildren(),this.graphicsView.destroy(),this.graphicsView=null,this.handles.remove(\"graphicslayerview2d\")}async hitTest(i){return this.graphicsView?this.graphicsView.hitTest(i):null}async fetchPopupFeatures(i){if(this.graphicsView)return this.graphicsView.hitTest(i).filter((i=>!!i.popupTemplate))}queryGraphics(){return Promise.resolve(this.graphicsView.graphics)}update(i){this.graphicsView.processUpdate(i)}moveStart(){}viewChange(){this.graphicsView.viewChange()}moveEnd(){}isUpdating(){return!this.graphicsView||this.graphicsView.updating}highlight(i){var s;let h;return\"number\"==typeof i?h=[i]:i instanceof e?h=[i.uid]:Array.isArray(i)&&i.length>0?h=\"number\"==typeof i[0]?i:i.map((i=>i&&i.uid)):t.isCollection(i)&&i.length>0&&(h=i.map((i=>i&&i.uid)).toArray()),h=null==(s=h)?void 0:s.filter((i=>null!=i)),h.length?(this._addHighlight(h),{remove:()=>this._removeHighlight(h)}):g}_addHighlight(i){for(const e of i)if(this._highlightIds.has(e)){const i=this._highlightIds.get(e);this._highlightIds.set(e,i+1)}else this._highlightIds.set(e,1);this._updateHighlight()}_removeHighlight(i){for(const e of i)if(this._highlightIds.has(e)){const i=this._highlightIds.get(e)-1;0===i?this._highlightIds.delete(e):this._highlightIds.set(e,i)}this._updateHighlight()}_updateHighlight(){var i;null==(i=this.graphicsView)||i.setHighlight(Array.from(this._highlightIds.keys()))}};i([s()],c.prototype,\"graphicsView\",void 0),c=i([h(\"esri.views.2d.layers.GraphicsLayerView2D\")],c);const l=c;export{l as default};\n"]},"metadata":{},"sourceType":"module"}