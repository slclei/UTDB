{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"./ArcadePortal.js\";\nimport r from \"./Attachment.js\";\nimport t from \"./Dictionary.js\";\nimport n from \"./Feature.js\";\nimport o from \"./FunctionWrapper.js\";\nimport a from \"./ImmutablePathArray.js\";\nimport i from \"./ImmutablePointArray.js\";\nimport { p as s, i as l, e as c, N as u, n as f, m as p, v as h, c as w, f as m, a as E, R as d, b as g, k as N, j as I, t as y, I as v, d as T, g as R, h as O, o as S, q as b, r as U, s as A } from \"../chunks/languageUtils.js\";\nimport { nodeErrorMessage as C, addFunctionDeclaration as M, findFieldLiterals as x, findExpectedFieldLiterals as F, validateScript as P, referencesMember as D, referencesFunction as L, findFunctionCalls as j } from \"./treeAnalysis.js\";\nimport { A as _ } from \"../chunks/array.js\";\nimport { registerFunctions as k } from \"./functions/date.js\";\nimport { registerFunctions as V } from \"./functions/geometry.js\";\nimport { registerFunctions as B } from \"./functions/geomsync.js\";\nimport { registerFunctions as Y } from \"./functions/maths.js\";\nimport { registerFunctions as G } from \"./functions/stats.js\";\nimport { registerFunctions as z } from \"./functions/string.js\";\nimport q from \"../geometry/Extent.js\";\nimport Z from \"../geometry/Geometry.js\";\nimport H from \"../geometry/Multipoint.js\";\nimport W from \"../geometry/Point.js\";\nimport K from \"../geometry/Polygon.js\";\nimport X from \"../geometry/Polyline.js\";\nimport J from \"../geometry/SpatialReference.js\";\n\nfunction Q(e, r) {\n  const t = [];\n\n  for (let n = 0; n < r.arguments.length; n++) t.push(ee(e, r.arguments[n]));\n\n  return t;\n}\n\nfunction $(e, r, t) {\n  try {\n    return !0 === r.preparsed ? t(e, null, r.arguments) : t(e, r, Q(e, r));\n  } catch (n) {\n    throw n;\n  }\n}\n\nfunction ee(e, r) {\n  try {\n    switch (r.type) {\n      case \"EmptyStatement\":\n        return h;\n\n      case \"VariableDeclarator\":\n        return me(e, r);\n\n      case \"VariableDeclaration\":\n        return we(e, r);\n\n      case \"BlockStatement\":\n        return fe(e, r);\n\n      case \"FunctionDeclaration\":\n        return he(e, r);\n\n      case \"ReturnStatement\":\n        return pe(e, r);\n\n      case \"IfStatement\":\n        return ue(e, r);\n\n      case \"ExpressionStatement\":\n        return ce(e, r);\n\n      case \"AssignmentExpression\":\n        return le(e, r);\n\n      case \"UpdateExpression\":\n        return ie(e, r);\n\n      case \"BreakStatement\":\n        return p;\n\n      case \"ContinueStatement\":\n        return f;\n\n      case \"TemplateElement\":\n        return Te(e, r);\n\n      case \"TemplateLiteral\":\n        return Re(e, r);\n\n      case \"ForStatement\":\n        return oe(e, r);\n\n      case \"ForInStatement\":\n        return ne(e, r);\n\n      case \"Identifier\":\n        return Oe(e, r);\n\n      case \"MemberExpression\":\n        return ge(e, r);\n\n      case \"Literal\":\n        return r.value;\n\n      case \"CallExpression\":\n        return Se(e, r);\n\n      case \"UnaryExpression\":\n        return Ne(e, r);\n\n      case \"BinaryExpression\":\n        return ye(e, r);\n\n      case \"LogicalExpression\":\n        return ve(e, r);\n\n      case \"ArrayExpression\":\n        return Ie(e, r);\n\n      case \"ObjectExpression\":\n        return re(e, r);\n\n      case \"Property\":\n        return te(e, r);\n\n      default:\n        throw new Error(C(r, \"RUNTIME\", \"UNREOGNISED\"));\n    }\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction re(e, r) {\n  const n = {};\n\n  for (let t = 0; t < r.properties.length; t++) {\n    const o = ee(e, r.properties[t]);\n    if (w(o.value)) throw new Error(\"Illegal Argument\");\n    if (!1 === m(o.key)) throw new Error(\"Illegal Argument\");\n    o.value === h ? n[o.key.toString()] = null : n[o.key.toString()] = o.value;\n  }\n\n  const o = new t(n);\n  return o.immutable = !1, o;\n}\n\nfunction te(e, r) {\n  return {\n    key: \"Identifier\" === r.key.type ? r.key.name : ee(e, r.key),\n    value: ee(e, r.value)\n  };\n}\n\nfunction ne(e, r) {\n  const n = ee(e, r.right);\n  \"VariableDeclaration\" === r.left.type && ee(e, r.left);\n  let o = null,\n      a = \"\";\n\n  if (\"VariableDeclaration\" === r.left.type) {\n    const e = r.left.declarations[0].id;\n    \"Identifier\" === e.type && (a = e.name);\n  } else \"Identifier\" === r.left.type && (a = r.left.name);\n\n  if (!a) throw new Error(C(r, \"RUNTIME\", \"INVALIDVARIABLE\"));\n  if (a = a.toLowerCase(), null !== e.localScope && void 0 !== e.localScope[a] && (o = e.localScope[a]), null === o && void 0 !== e.globalScope[a] && (o = e.globalScope[a]), null === o) throw new Error(C(r, \"RUNTIME\", \"VARIABLENOTDECLARED\"));\n\n  if (E(n) || m(n)) {\n    const t = n.length;\n\n    for (let n = 0; n < t; n++) {\n      o.value = n;\n      const t = ee(e, r.body);\n      if (t === p) break;\n      if (t instanceof d) return t;\n    }\n\n    return h;\n  }\n\n  if (g(n)) {\n    for (let t = 0; t < n.length(); t++) {\n      o.value = t;\n      const n = ee(e, r.body);\n      if (n === p) break;\n      if (n instanceof d) return n;\n    }\n\n    return h;\n  }\n\n  if (!(n instanceof t || N(n))) return h;\n  {\n    const t = n.keys();\n\n    for (let n = 0; n < t.length; n++) {\n      o.value = t[n];\n      const a = ee(e, r.body);\n      if (a === p) break;\n      if (a instanceof d) return a;\n    }\n  }\n}\n\nfunction oe(e, r) {\n  null !== r.init && ee(e, r.init);\n  const t = {\n    testResult: !0,\n    lastAction: h\n  };\n\n  do {\n    ae(e, r, t);\n  } while (!0 === t.testResult);\n\n  return t.lastAction instanceof d ? t.lastAction : h;\n}\n\nfunction ae(e, r, t) {\n  if (null !== r.test) {\n    if (t.testResult = ee(e, r.test), !1 === t.testResult) return;\n    if (!0 !== t.testResult) throw new Error(C(r, \"RUNTIME\", \"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"));\n  }\n\n  t.lastAction = ee(e, r.body), t.lastAction !== p ? t.lastAction instanceof d ? t.testResult = !1 : null !== r.update && ee(e, r.update) : t.testResult = !1;\n}\n\nfunction ie(e, r) {\n  let n,\n      o = null,\n      a = \"\";\n\n  if (\"MemberExpression\" === r.argument.type) {\n    if (o = ee(e, r.argument.object), !0 === r.argument.computed ? a = ee(e, r.argument.property) : \"Identifier\" === r.argument.property.type && (a = r.argument.property.name), E(o)) {\n      if (!I(a)) throw new Error(\"Invalid Parameter\");\n      if (a < 0 && (a = o.length + a), a < 0 || a >= o.length) throw new Error(\"Assignment outside of array bounds\");\n      n = y(o[a]), o[a] = \"++\" === r.operator ? n + 1 : n - 1;\n    } else if (o instanceof t) {\n      if (!1 === m(a)) throw new Error(\"Dictionary accessor must be a string\");\n      if (!0 !== o.hasField(a)) throw new Error(\"Invalid Parameter\");\n      n = y(o.field(a)), o.setField(a, \"++\" === r.operator ? n + 1 : n - 1);\n    } else {\n      if (!N(o)) throw g(o) ? new Error(\"Array is Immutable\") : new Error(\"Invalid Parameter\");\n      if (!1 === m(a)) throw new Error(\"Feature accessor must be a string\");\n      if (!0 !== o.hasField(a)) throw new Error(\"Invalid Parameter\");\n      n = y(o.field(a)), o.setField(a, \"++\" === r.operator ? n + 1 : n - 1);\n    }\n\n    return !1 === r.prefix ? n : \"++\" === r.operator ? n + 1 : n - 1;\n  }\n\n  if (o = \"Identifier\" === r.argument.type ? r.argument.name.toLowerCase() : \"\", !o) throw new Error(\"Invalid identifier\");\n  if (null !== e.localScope && void 0 !== e.localScope[o]) return n = y(e.localScope[o].value), e.localScope[o] = {\n    value: \"++\" === r.operator ? n + 1 : n - 1,\n    valueset: !0,\n    node: r\n  }, !1 === r.prefix ? n : \"++\" === r.operator ? n + 1 : n - 1;\n  if (void 0 !== e.globalScope[o]) return n = y(e.globalScope[o].value), e.globalScope[o] = {\n    value: \"++\" === r.operator ? n + 1 : n - 1,\n    valueset: !0,\n    node: r\n  }, !1 === r.prefix ? n : \"++\" === r.operator ? n + 1 : n - 1;\n  throw new Error(\"Variable not recognised\");\n}\n\nfunction se(e, r, t, n) {\n  switch (r) {\n    case \"=\":\n      return e === h ? null : e;\n\n    case \"/=\":\n      return y(t) / y(e);\n\n    case \"*=\":\n      return y(t) * y(e);\n\n    case \"-=\":\n      return y(t) - y(e);\n\n    case \"+=\":\n      return m(t) || m(e) ? T(t) + T(e) : y(t) + y(e);\n\n    case \"%=\":\n      return y(t) % y(e);\n\n    default:\n      throw new Error(C(n, \"RUNTIME\", \"OPERATORNOTRECOGNISED\"));\n  }\n}\n\nfunction le(e, r) {\n  const n = ee(e, r.right);\n  let o = null,\n      a = \"\";\n\n  if (\"MemberExpression\" === r.left.type) {\n    if (o = ee(e, r.left.object), !0 === r.left.computed ? a = ee(e, r.left.property) : \"Identifier\" === r.left.property.type && (a = r.left.property.name), E(o)) {\n      if (!I(a)) throw new Error(\"Invalid Parameter\");\n      if (a < 0 && (a = o.length + a), a < 0 || a > o.length) throw new Error(\"Assignment outside of array bounds\");\n\n      if (a === o.length) {\n        if (\"=\" !== r.operator) throw new Error(\"Invalid Parameter\");\n        o[a] = se(n, r.operator, o[a], r);\n      } else o[a] = se(n, r.operator, o[a], r);\n    } else if (o instanceof t) {\n      if (!1 === m(a)) throw new Error(\"Dictionary accessor must be a string\");\n      if (!0 === o.hasField(a)) o.setField(a, se(n, r.operator, o.field(a), r));else {\n        if (\"=\" !== r.operator) throw new Error(\"Invalid Parameter\");\n        o.setField(a, se(n, r.operator, null, r));\n      }\n    } else {\n      if (!N(o)) throw g(o) ? new Error(\"Array is Immutable\") : new Error(\"Invalid Parameter\");\n      if (!1 === m(a)) throw new Error(\"Feature accessor must be a string\");\n      if (!0 === o.hasField(a)) o.setField(a, se(n, r.operator, o.field(a), r));else {\n        if (\"=\" !== r.operator) throw new Error(\"Invalid Parameter\");\n        o.setField(a, se(n, r.operator, null, r));\n      }\n    }\n\n    return h;\n  }\n\n  if (o = r.left.name.toLowerCase(), null !== e.localScope && void 0 !== e.localScope[o]) return e.localScope[o] = {\n    value: se(n, r.operator, e.localScope[o].value, r),\n    valueset: !0,\n    node: r.right\n  }, h;\n  if (void 0 !== e.globalScope[o]) return e.globalScope[o] = {\n    value: se(n, r.operator, e.globalScope[o].value, r),\n    valueset: !0,\n    node: r.right\n  }, h;\n  throw new Error(\"Variable not recognised\");\n}\n\nfunction ce(e, r) {\n  if (\"AssignmentExpression\" === r.expression.type || \"UpdateExpression\" === r.expression.type) return ee(e, r.expression);\n\n  if (\"CallExpression\" === r.expression.type) {\n    const t = ee(e, r.expression);\n    return t === h ? h : new v(t);\n  }\n\n  {\n    const t = ee(e, r.expression);\n    return t === h ? h : new v(t);\n  }\n}\n\nfunction ue(e, r) {\n  if (\"AssignmentExpression\" === r.test.type || \"UpdateExpression\" === r.test.type) throw new Error(C(r.test, \"RUNTIME\", \"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));\n  const t = ee(e, r.test);\n  if (!0 === t) return ee(e, r.consequent);\n  if (!1 === t) return null !== r.alternate ? ee(e, r.alternate) : h;\n  throw new Error(C(r, \"RUNTIME\", \"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"));\n}\n\nfunction fe(e, r) {\n  let t = h;\n\n  for (let n = 0; n < r.body.length; n++) if (t = ee(e, r.body[n]), t instanceof d || t === p || t === f) return t;\n\n  return t;\n}\n\nfunction pe(e, r) {\n  if (null === r.argument) return new d(h);\n  const t = ee(e, r.argument);\n  return new d(t);\n}\n\nfunction he(e, r) {\n  const t = r.id.name.toLowerCase();\n  return e.globalScope[t] = {\n    valueset: !0,\n    node: null,\n    value: new o(r, e)\n  }, h;\n}\n\nfunction we(e, r) {\n  for (let t = 0; t < r.declarations.length; t++) ee(e, r.declarations[t]);\n\n  return h;\n}\n\nfunction me(e, r) {\n  let t = null === r.init ? null : ee(e, r.init);\n  if (t === h && (t = null), \"Identifier\" !== r.id.type) throw new Error(\"Can only assign a regular variable\");\n  const n = r.id.name.toLowerCase();\n  return null !== e.localScope ? e.localScope[n] = {\n    value: t,\n    valueset: !0,\n    node: r.init\n  } : e.globalScope[n] = {\n    value: t,\n    valueset: !0,\n    node: r.init\n  }, h;\n}\n\nlet Ee = 0;\n\nfunction de(e, r, n) {\n  let o;\n\n  switch (r = r.toLowerCase()) {\n    case \"hasz\":\n      {\n        const r = e.hasZ;\n        return void 0 !== r && r;\n      }\n\n    case \"hasm\":\n      {\n        const r = e.hasM;\n        return void 0 !== r && r;\n      }\n\n    case \"spatialreference\":\n      {\n        let r = e.spatialReference._arcadeCacheId;\n\n        if (void 0 === r) {\n          let t = !0;\n          Object.freeze && Object.isFrozen(e.spatialReference) && (t = !1), t && (Ee++, e.spatialReference._arcadeCacheId = Ee, r = Ee);\n        }\n\n        const n = new t({\n          wkt: e.spatialReference.wkt,\n          wkid: e.spatialReference.wkid\n        });\n        return void 0 !== r && (n._arcadeCacheId = \"SPREF\" + r.toString()), n;\n      }\n  }\n\n  switch (e.type) {\n    case \"extent\":\n      switch (r) {\n        case \"xmin\":\n        case \"xmax\":\n        case \"ymin\":\n        case \"ymax\":\n        case \"zmin\":\n        case \"zmax\":\n        case \"mmin\":\n        case \"mmax\":\n          {\n            const t = e[r];\n            return void 0 !== t ? t : null;\n          }\n\n        case \"type\":\n          return \"Extent\";\n      }\n\n      break;\n\n    case \"polygon\":\n      switch (r) {\n        case \"rings\":\n          o = e.cache._arcadeCacheId, void 0 === o && (Ee++, o = Ee, e.cache._arcadeCacheId = o);\n          return new a(e.rings, e.spatialReference, !0 === e.hasZ, !0 === e.hasM, o);\n\n        case \"type\":\n          return \"Polygon\";\n      }\n\n      break;\n\n    case \"point\":\n      switch (r) {\n        case \"x\":\n        case \"y\":\n        case \"z\":\n        case \"m\":\n          return void 0 !== e[r] ? e[r] : null;\n\n        case \"type\":\n          return \"Point\";\n      }\n\n      break;\n\n    case \"polyline\":\n      switch (r) {\n        case \"paths\":\n          o = e.cache._arcadeCacheId, void 0 === o && (Ee++, o = Ee, e.cache._arcadeCacheId = o);\n          return new a(e.paths, e.spatialReference, !0 === e.hasZ, !0 === e.hasM, o);\n\n        case \"type\":\n          return \"Polyline\";\n      }\n\n      break;\n\n    case \"multipoint\":\n      switch (r) {\n        case \"points\":\n          o = e.cache._arcadeCacheId, void 0 === o && (Ee++, o = Ee, e.cache._arcadeCacheId = o);\n          return new i(e.points, e.spatialReference, !0 === e.hasZ, !0 === e.hasM, o, 1);\n\n        case \"type\":\n          return \"Multipoint\";\n      }\n\n  }\n\n  throw new Error(C(n, \"RUNTIME\", \"PROPERTYNOTFOUND\"));\n}\n\nfunction ge(e, r) {\n  try {\n    const n = ee(e, r.object);\n    if (null === n) throw new Error(C(r, \"RUNTIME\", \"NOTFOUND\"));\n\n    if (!1 === r.computed) {\n      if (\"Identifier\" === r.property.type) {\n        if (n instanceof t || N(n)) return n.field(r.property.name);\n        if (n instanceof Z) return de(n, r.property.name, r);\n      }\n\n      throw new Error(C(r, \"RUNTIME\", \"INVALIDTYPE\"));\n    }\n\n    {\n      let o = ee(e, r.property);\n\n      if (n instanceof t || N(n)) {\n        if (m(o)) return n.field(o);\n        throw new Error(C(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      if (n instanceof Z) {\n        if (m(o)) return de(n, o, r);\n        throw new Error(C(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      if (E(n)) {\n        if (I(o) && isFinite(o) && Math.floor(o) === o) {\n          if (o < 0 && (o = n.length + o), o >= n.length || o < 0) throw new Error(C(r, \"RUNTIME\", \"OUTOFBOUNDS\"));\n          return n[o];\n        }\n\n        throw new Error(C(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      if (m(n)) {\n        if (I(o) && isFinite(o) && Math.floor(o) === o) {\n          if (o < 0 && (o = n.length + o), o >= n.length || o < 0) throw new Error(C(r, \"RUNTIME\", \"OUTOFBOUNDS\"));\n          return n[o];\n        }\n\n        throw new Error(C(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      if (g(n)) {\n        if (I(o) && isFinite(o) && Math.floor(o) === o) {\n          if (o < 0 && (o = n.length() + o), o >= n.length() || o < 0) throw new Error(C(r, \"RUNTIME\", \"OUTOFBOUNDS\"));\n          return n.get(o);\n        }\n\n        throw new Error(C(r, \"RUNTIME\", \"INVALIDTYPE\"));\n      }\n\n      throw new Error(C(r, \"RUNTIME\", \"INVALIDTYPE\"));\n    }\n  } catch (n) {\n    throw n;\n  }\n}\n\nfunction Ne(e, r) {\n  try {\n    const t = ee(e, r.argument);\n\n    if (l(t)) {\n      if (\"!\" === r.operator) return !t;\n      if (\"-\" === r.operator) return -1 * y(t);\n      if (\"+\" === r.operator) return 1 * y(t);\n      if (\"~\" === r.operator) return ~y(t);\n      throw new Error(C(r, \"RUNTIME\", \"NOTSUPPORTEDUNARYOPERATOR\"));\n    }\n\n    if (\"~\" === r.operator) return ~y(t);\n    if (\"-\" === r.operator) return -1 * y(t);\n    if (\"+\" === r.operator) return 1 * y(t);\n    throw new Error(C(r, \"RUNTIME\", \"NOTSUPPORTEDUNARYOPERATOR\"));\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction Ie(e, r) {\n  try {\n    const t = [];\n\n    for (let n = 0; n < r.elements.length; n++) {\n      const o = ee(e, r.elements[n]);\n      if (w(o)) throw new Error(C(r, \"RUNTIME\", \"FUNCTIONCONTEXTILLEGAL\"));\n      o === h ? t.push(null) : t.push(o);\n    }\n\n    return t;\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction ye(e, r) {\n  try {\n    const t = [ee(e, r.left), ee(e, r.right)],\n          n = t[0],\n          o = t[1];\n\n    switch (r.operator) {\n      case \"|\":\n      case \"<<\":\n      case \">>\":\n      case \">>>\":\n      case \"^\":\n      case \"&\":\n        return O(y(n), y(o), r.operator);\n\n      case \"==\":\n        return c(n, o);\n\n      case \"!=\":\n        return !c(n, o);\n\n      case \"<\":\n      case \">\":\n      case \"<=\":\n      case \">=\":\n        return R(n, o, r.operator);\n\n      case \"+\":\n        return m(n) || m(o) ? T(n) + T(o) : y(n) + y(o);\n\n      case \"-\":\n        return y(n) - y(o);\n\n      case \"*\":\n        return y(n) * y(o);\n\n      case \"/\":\n        return y(n) / y(o);\n\n      case \"%\":\n        return y(n) % y(o);\n\n      default:\n        throw new Error(C(r, \"RUNTIME\", \"OPERATORNOTRECOGNISED\"));\n    }\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction ve(e, r) {\n  try {\n    if (\"AssignmentExpression\" === r.left.type || \"UpdateExpression\" === r.left.type) throw new Error(C(r.left, \"RUNTIME\", \"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));\n    if (\"AssignmentExpression\" === r.right.type || \"UpdateExpression\" === r.right.type) throw new Error(C(r.right, \"RUNTIME\", \"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));\n    const t = ee(e, r.left);\n    if (l(t)) switch (r.operator) {\n      case \"||\":\n        if (!0 === t) return t;\n        {\n          const t = ee(e, r.right);\n          if (l(t)) return t;\n          throw new Error(C(r, \"RUNTIME\", \"ONLYORORAND\"));\n        }\n\n      case \"&&\":\n        if (!1 === t) return t;\n        {\n          const t = ee(e, r.right);\n          if (l(t)) return t;\n          throw new Error(C(r, \"RUNTIME\", \"ONLYORORAND\"));\n        }\n\n      default:\n        throw new Error(C(r, \"RUNTIME\", \"ONLYORORAND\"));\n    }\n    throw new Error(C(r, \"RUNTIME\", \"ONLYBOOLEAN\"));\n  } catch (t) {\n    throw t;\n  }\n}\n\nfunction Te(e, r) {\n  return r.value ? r.value.cooked : \"\";\n}\n\nfunction Re(e, r) {\n  let t = \"\",\n      n = 0;\n\n  for (const o of r.quasis) if (t += o.value ? o.value.cooked : \"\", !1 === o.tail) {\n    t += r.expressions[n] ? T(ee(e, r.expressions[n])) : \"\", n++;\n  }\n\n  return t;\n}\n\nfunction Oe(e, r) {\n  let t;\n\n  try {\n    const n = r.name.toLowerCase();\n    if (null !== e.localScope && void 0 !== e.localScope[n]) return t = e.localScope[n], !0 === t.valueset || (t.value = ee(e, t.node), t.valueset = !0), t.value;\n    if (void 0 !== e.globalScope[n]) return t = e.globalScope[n], !0 === t.valueset || (t.value = ee(e, t.node), t.valueset = !0), t.value;\n    throw new Error(C(r, \"RUNTIME\", \"VARIABLENOTFOUND\"));\n  } catch (n) {\n    throw n;\n  }\n}\n\nfunction Se(e, r) {\n  try {\n    if (\"Identifier\" !== r.callee.type) throw new Error(C(r, \"RUNTIME\", \"ONLYNODESSUPPORTED\"));\n\n    if (null !== e.localScope && void 0 !== e.localScope[r.callee.name.toLowerCase()]) {\n      const t = e.localScope[r.callee.name.toLowerCase()];\n      if (t.value instanceof u) return t.value.fn(e, r);\n      if (t.value instanceof o) return Pe(e, r, t.value.definition);\n      throw new Error(C(r, \"RUNTIME\", \"NOTAFUNCTION\"));\n    }\n\n    if (void 0 !== e.globalScope[r.callee.name.toLowerCase()]) {\n      const t = e.globalScope[r.callee.name.toLowerCase()];\n      if (t.value instanceof u) return t.value.fn(e, r);\n      if (t.value instanceof o) return Pe(e, r, t.value.definition);\n      throw new Error(C(r, \"RUNTIME\", \"NOTAFUNCTION\"));\n    }\n\n    throw new Error(C(r, \"RUNTIME\", \"NOTFOUND\"));\n  } catch (t) {\n    throw t;\n  }\n}\n\nconst be = {};\n\nfunction Ue(n) {\n  return null == n ? \"\" : E(n) || g(n) ? \"Array\" : S(n) ? \"Date\" : m(n) ? \"String\" : l(n) ? \"Boolean\" : I(n) ? \"Number\" : n instanceof r ? \"Attachment\" : n instanceof e ? \"Portal\" : n instanceof t ? \"Dictionary\" : N(n) ? \"Feature\" : n instanceof W ? \"Point\" : n instanceof K ? \"Polygon\" : n instanceof X ? \"Polyline\" : n instanceof H ? \"Multipoint\" : n instanceof q ? \"Extent\" : w(n) ? \"Function\" : b(n) ? \"FeatureSet\" : U(n) ? \"FeatureSetCollection\" : n === h ? \"\" : \"number\" == typeof n && isNaN(n) ? \"Number\" : \"Unrecognised Type\";\n}\n\nfunction Ae(e, r, t, n) {\n  try {\n    const o = ee(e, r.arguments[t]);\n    if (c(o, n)) return ee(e, r.arguments[t + 1]);\n    {\n      const o = r.arguments.length - t;\n      return 1 === o ? ee(e, r.arguments[t]) : 2 === o ? null : 3 === o ? ee(e, r.arguments[t + 2]) : Ae(e, r, t + 2, n);\n    }\n  } catch (o) {\n    throw o;\n  }\n}\n\nfunction Ce(e, r, t, n) {\n  try {\n    if (!0 === n) return ee(e, r.arguments[t + 1]);\n    if (3 === r.arguments.length - t) return ee(e, r.arguments[t + 2]);\n    {\n      const n = ee(e, r.arguments[t + 2]);\n      if (!1 === l(n)) throw new Error(\"WHEN needs boolean test conditions\");\n      return Ce(e, r, t + 2, n);\n    }\n  } catch (o) {\n    throw o;\n  }\n}\n\nfunction Me(e, r) {\n  const t = e.length,\n        n = Math.floor(t / 2);\n  return 0 === t ? [] : 1 === t ? [e[0]] : xe(Me(e.slice(0, n), r), Me(e.slice(n, t), r), r);\n}\n\nfunction xe(e, r, t) {\n  const n = [];\n\n  for (; e.length > 0 || r.length > 0;) if (e.length > 0 && r.length > 0) {\n    let o = t(e[0], r[0]);\n    isNaN(o) && (o = 0), o <= 0 ? (n.push(e[0]), e = e.slice(1)) : (n.push(r[0]), r = r.slice(1));\n  } else e.length > 0 ? (n.push(e[0]), e = e.slice(1)) : r.length > 0 && (n.push(r[0]), r = r.slice(1));\n\n  return n;\n}\n\nfunction Fe(e, r, t) {\n  try {\n    const n = e.body;\n    if (t.length !== e.params.length) throw new Error(\"Invalid Parameter calls to function.\");\n\n    for (let a = 0; a < t.length; a++) r.localScope[e.params[a].name.toLowerCase()] = {\n      value: t[a],\n      valueset: !0,\n      node: null\n    };\n\n    const o = ee(r, n);\n    if (o instanceof d) return o.value;\n    if (o === p) throw new Error(\"Cannot Break from a Function\");\n    if (o === f) throw new Error(\"Cannot Continue from a Function\");\n    return o instanceof v ? o.value : o;\n  } catch (n) {\n    throw n;\n  }\n}\n\nfunction Pe(e, r, t) {\n  return $(e, r, function (r, n, o) {\n    const a = {\n      spatialReference: e.spatialReference,\n      globalScope: e.globalScope,\n      depthCounter: e.depthCounter + 1,\n      console: e.console,\n      lrucache: e.lrucache,\n      interceptor: e.interceptor,\n      localScope: {}\n    };\n    if (a.depthCounter > 64) throw new Error(\"Exceeded maximum function depth\");\n    return Fe(t, a, o);\n  });\n}\n\nfunction De(e) {\n  const r = function () {\n    const r = {\n      spatialReference: e.context.spatialReference,\n      console: e.context.console,\n      lrucache: e.context.lrucache,\n      interceptor: e.context.interceptor,\n      localScope: {},\n      depthCounter: e.context.depthCounter + 1,\n      globalScope: e.context.globalScope\n    };\n    if (r.depthCounter > 64) throw new Error(\"Exceeded maximum function depth\");\n    return Fe(e.definition, r, arguments);\n  };\n\n  return r;\n}\n\nk(be, $), z(be, $), Y(be, $), V(be, $), G(be, $), B(be, $), be.typeof = function (e, r) {\n  return $(e, r, function (e, r, t) {\n    s(t, 1, 1);\n    const n = Ue(t[0]);\n    if (\"Unrecognised Type\" === n) throw new Error(\"Unrecognised Type\");\n    return n;\n  });\n}, be.iif = function (e, r) {\n  try {\n    s(null === r.arguments ? [] : r.arguments, 3, 3);\n    const t = ee(e, r.arguments[0]);\n    if (!1 === l(t)) throw new Error(\"IF Function must have a boolean test condition\");\n    const n = ee(e, r.arguments[1]),\n          o = ee(e, r.arguments[2]);\n    return !0 === t ? n : o;\n  } catch (t) {\n    throw t;\n  }\n}, be.decode = function (e, r) {\n  try {\n    if (r.arguments.length < 2) throw new Error(\"Missing Parameters\");\n    if (2 === r.arguments.length) return ee(e, r.arguments[1]);\n    {\n      if ((r.arguments.length - 1) % 2 == 0) throw new Error(\"Must have a default value result.\");\n      const t = ee(e, r.arguments[0]);\n      return Ae(e, r, 1, t);\n    }\n  } catch (t) {\n    throw t;\n  }\n}, be.when = function (e, r) {\n  try {\n    if (r.arguments.length < 3) throw new Error(\"Missing Parameters\");\n    if (r.arguments.length % 2 == 0) throw new Error(\"Must have a default value result.\");\n    const t = ee(e, r.arguments[0]);\n    if (!1 === l(t)) throw new Error(\"WHEN needs boolean test conditions\");\n    return Ce(e, r, 0, t);\n  } catch (t) {\n    throw t;\n  }\n}, be.top = function (e, r) {\n  return $(e, r, function (e, r, t) {\n    if (s(t, 2, 2), E(t[0])) return y(t[1]) >= t[0].length ? t[0].slice(0) : t[0].slice(0, y(t[1]));\n    if (g(t[0])) return y(t[1]) >= t[0].length() ? t[0].slice(0) : t[0].slice(0, y(t[1]));\n    throw new Error(\"Top cannot accept this parameter type\");\n  });\n}, be.first = function (e, r) {\n  return $(e, r, function (e, r, t) {\n    return s(t, 1, 1), E(t[0]) ? 0 === t[0].length ? null : t[0][0] : g(t[0]) ? 0 === t[0].length() ? null : t[0].get(0) : null;\n  });\n}, be.sort = function (e, r) {\n  return $(e, r, function (e, r, t) {\n    s(t, 1, 2);\n    let n = t[0];\n    if (g(n) && (n = n.toArray()), !1 === E(n)) throw new Error(\"Illegal Argument\");\n\n    if (t.length > 1) {\n      if (!1 === w(t[1])) throw new Error(\"Illegal Argument\");\n      let e = n;\n      const r = De(t[1]);\n      return e = Me(e, function (e, t) {\n        return r(e, t);\n      }), e;\n    }\n\n    {\n      let e = n;\n      if (0 === e.length) return [];\n      const r = {};\n\n      for (let n = 0; n < e.length; n++) {\n        const t = Ue(e[n]);\n        \"\" !== t && (r[t] = !0);\n      }\n\n      if (!0 === r.Array || !0 === r.Dictionary || !0 === r.Feature || !0 === r.Point || !0 === r.Polygon || !0 === r.Polyline || !0 === r.Multipoint || !0 === r.Extent || !0 === r.Function) return e.slice(0);\n      let t = 0,\n          o = \"\";\n\n      for (const n in r) t++, o = n;\n\n      return e = t > 1 || \"String\" === o ? Me(e, function (e, r) {\n        if (null == e || e === h) return null == r || r === h ? 0 : 1;\n        if (null == r || r === h) return -1;\n        const t = T(e),\n              n = T(r);\n        return t < n ? -1 : t === n ? 0 : 1;\n      }) : \"Number\" === o ? Me(e, function (e, r) {\n        return e - r;\n      }) : \"Boolean\" === o ? Me(e, function (e, r) {\n        return e === r ? 0 : r ? -1 : 1;\n      }) : \"Date\" === o ? Me(e, function (e, r) {\n        return r - e;\n      }) : e.slice(0), e;\n    }\n  });\n};\n\nfor (const We in be) be[We] = {\n  value: new u(be[We]),\n  valueset: !0,\n  node: null\n};\n\nconst Le = function () {};\n\nfunction je(e, r) {\n  const o = new Le();\n  e || (e = {}), r || (r = {});\n  const a = new t({\n    newline: \"\\n\",\n    tab: \"\\t\",\n    singlequote: \"'\",\n    doublequote: '\"',\n    forwardslash: \"/\",\n    backwardslash: \"\\\\\"\n  });\n  a.immutable = !1, o.textformatting = {\n    value: a,\n    valueset: !0,\n    node: null\n  };\n\n  for (const t in r) o[t] = {\n    value: new u(r[t]),\n    native: !0,\n    valueset: !0,\n    node: null\n  };\n\n  for (const t in e) e[t] && \"esri.Graphic\" === e[t].declaredClass ? o[t] = {\n    value: n.createFromGraphic(e[t]),\n    valueset: !0,\n    node: null\n  } : o[t] = {\n    value: e[t],\n    valueset: !0,\n    node: null\n  };\n\n  return o;\n}\n\nLe.prototype = be, Le.prototype.infinity = {\n  value: Number.POSITIVE_INFINITY,\n  valueset: !0,\n  node: null\n}, Le.prototype.pi = {\n  value: Math.PI,\n  valueset: !0,\n  node: null\n};\nconst _e = {\n  fixSpatialReference: A,\n  parseArguments: Q,\n  standardFunction: $\n};\n\nfunction ke(e) {\n  console.log(e);\n}\n\nfunction Ve(e) {\n  const r = {\n    mode: \"sync\",\n    compiled: !1,\n    functions: {},\n    signatures: [],\n    standardFunction: $,\n    evaluateIdentifier: Oe,\n    arcadeCustomFunctionHandler: De\n  };\n\n  for (let t = 0; t < e.length; t++) e[t].registerFunctions(r);\n\n  for (const t in r.functions) be[t] = {\n    value: new u(r.functions[t]),\n    valueset: !0,\n    node: null\n  }, Le.prototype[t] = be[t];\n\n  for (let t = 0; t < r.signatures.length; t++) M(r.signatures[t], \"async\");\n}\n\nfunction Be(e, r) {\n  let t = r.spatialReference;\n  null == t && (t = new J({\n    wkid: 102100\n  }));\n  let n = ee({\n    spatialReference: t,\n    globalScope: je(r.vars, r.customfunctions),\n    localScope: null,\n    console: r.console ? r.console : ke,\n    lrucache: r.lrucache,\n    interceptor: r.interceptor,\n    depthCounter: 1\n  }, e.body[0].body);\n  if (n instanceof d && (n = n.value), n instanceof v && (n = n.value), n === h && (n = null), n === p) throw new Error(\"Cannot return BREAK\");\n  if (n === f) throw new Error(\"Cannot return CONTINUE\");\n  if (n instanceof o) throw new Error(\"Cannot return FUNCTION\");\n  if (n instanceof u) throw new Error(\"Cannot return FUNCTION\");\n  return n;\n}\n\nfunction Ye(e, r) {\n  return x(e);\n}\n\nfunction Ge(e) {\n  return F(e);\n}\n\nfunction ze(e, r) {\n  return P(e, r, \"simple\");\n}\n\nfunction qe(e, r) {\n  return D(e, r);\n}\n\nfunction Ze(e, r) {\n  return L(e, r);\n}\n\nfunction He(e) {\n  return j(e);\n}\n\nVe([_]);\nexport { Be as executeScript, Ve as extend, Ge as extractExpectedFieldLiterals, Ye as extractFieldLiterals, He as findFunctionCalls, _e as functionHelper, Ze as referencesFunction, qe as referencesMember, ze as validateScript };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/arcade/arcadeRuntime.js"],"names":["e","r","t","n","o","a","i","p","s","l","c","N","u","f","m","v","h","w","E","R","d","b","g","k","j","I","y","T","O","S","q","U","A","nodeErrorMessage","C","addFunctionDeclaration","M","findFieldLiterals","x","findExpectedFieldLiterals","F","validateScript","P","referencesMember","D","referencesFunction","L","findFunctionCalls","_","registerFunctions","V","B","Y","G","z","Z","H","W","K","X","J","Q","arguments","length","push","ee","$","preparsed","type","me","we","fe","he","pe","ue","ce","le","ie","Te","Re","oe","ne","Oe","ge","value","Se","Ne","ye","ve","Ie","re","te","Error","properties","key","toString","immutable","name","right","left","declarations","id","toLowerCase","localScope","globalScope","body","keys","init","testResult","lastAction","ae","test","update","argument","object","computed","property","operator","hasField","field","setField","prefix","valueset","node","se","expression","consequent","alternate","Ee","de","hasZ","hasM","spatialReference","_arcadeCacheId","Object","freeze","isFrozen","wkt","wkid","cache","rings","paths","points","isFinite","Math","floor","get","elements","cooked","quasis","tail","expressions","callee","fn","Pe","definition","be","Ue","isNaN","Ae","Ce","Me","xe","slice","Fe","params","depthCounter","console","lrucache","interceptor","De","context","typeof","iif","decode","when","top","first","sort","toArray","Array","Dictionary","Feature","Point","Polygon","Polyline","Multipoint","Extent","Function","We","Le","je","newline","tab","singlequote","doublequote","forwardslash","backwardslash","textformatting","native","declaredClass","createFromGraphic","prototype","infinity","Number","POSITIVE_INFINITY","pi","PI","_e","fixSpatialReference","parseArguments","standardFunction","ke","log","Ve","mode","compiled","functions","signatures","evaluateIdentifier","arcadeCustomFunctionHandler","Be","vars","customfunctions","Ye","Ge","ze","qe","Ze","He","executeScript","extend","extractExpectedFieldLiterals","extractFieldLiterals","functionHelper"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"./ArcadePortal.js\";import r from\"./Attachment.js\";import t from\"./Dictionary.js\";import n from\"./Feature.js\";import o from\"./FunctionWrapper.js\";import a from\"./ImmutablePathArray.js\";import i from\"./ImmutablePointArray.js\";import{p as s,i as l,e as c,N as u,n as f,m as p,v as h,c as w,f as m,a as E,R as d,b as g,k as N,j as I,t as y,I as v,d as T,g as R,h as O,o as S,q as b,r as U,s as A}from\"../chunks/languageUtils.js\";import{nodeErrorMessage as C,addFunctionDeclaration as M,findFieldLiterals as x,findExpectedFieldLiterals as F,validateScript as P,referencesMember as D,referencesFunction as L,findFunctionCalls as j}from\"./treeAnalysis.js\";import{A as _}from\"../chunks/array.js\";import{registerFunctions as k}from\"./functions/date.js\";import{registerFunctions as V}from\"./functions/geometry.js\";import{registerFunctions as B}from\"./functions/geomsync.js\";import{registerFunctions as Y}from\"./functions/maths.js\";import{registerFunctions as G}from\"./functions/stats.js\";import{registerFunctions as z}from\"./functions/string.js\";import q from\"../geometry/Extent.js\";import Z from\"../geometry/Geometry.js\";import H from\"../geometry/Multipoint.js\";import W from\"../geometry/Point.js\";import K from\"../geometry/Polygon.js\";import X from\"../geometry/Polyline.js\";import J from\"../geometry/SpatialReference.js\";function Q(e,r){const t=[];for(let n=0;n<r.arguments.length;n++)t.push(ee(e,r.arguments[n]));return t}function $(e,r,t){try{return!0===r.preparsed?t(e,null,r.arguments):t(e,r,Q(e,r))}catch(n){throw n}}function ee(e,r){try{switch(r.type){case\"EmptyStatement\":return h;case\"VariableDeclarator\":return me(e,r);case\"VariableDeclaration\":return we(e,r);case\"BlockStatement\":return fe(e,r);case\"FunctionDeclaration\":return he(e,r);case\"ReturnStatement\":return pe(e,r);case\"IfStatement\":return ue(e,r);case\"ExpressionStatement\":return ce(e,r);case\"AssignmentExpression\":return le(e,r);case\"UpdateExpression\":return ie(e,r);case\"BreakStatement\":return p;case\"ContinueStatement\":return f;case\"TemplateElement\":return Te(e,r);case\"TemplateLiteral\":return Re(e,r);case\"ForStatement\":return oe(e,r);case\"ForInStatement\":return ne(e,r);case\"Identifier\":return Oe(e,r);case\"MemberExpression\":return ge(e,r);case\"Literal\":return r.value;case\"CallExpression\":return Se(e,r);case\"UnaryExpression\":return Ne(e,r);case\"BinaryExpression\":return ye(e,r);case\"LogicalExpression\":return ve(e,r);case\"ArrayExpression\":return Ie(e,r);case\"ObjectExpression\":return re(e,r);case\"Property\":return te(e,r);default:throw new Error(C(r,\"RUNTIME\",\"UNREOGNISED\"))}}catch(t){throw t}}function re(e,r){const n={};for(let t=0;t<r.properties.length;t++){const o=ee(e,r.properties[t]);if(w(o.value))throw new Error(\"Illegal Argument\");if(!1===m(o.key))throw new Error(\"Illegal Argument\");o.value===h?n[o.key.toString()]=null:n[o.key.toString()]=o.value}const o=new t(n);return o.immutable=!1,o}function te(e,r){return{key:\"Identifier\"===r.key.type?r.key.name:ee(e,r.key),value:ee(e,r.value)}}function ne(e,r){const n=ee(e,r.right);\"VariableDeclaration\"===r.left.type&&ee(e,r.left);let o=null,a=\"\";if(\"VariableDeclaration\"===r.left.type){const e=r.left.declarations[0].id;\"Identifier\"===e.type&&(a=e.name)}else\"Identifier\"===r.left.type&&(a=r.left.name);if(!a)throw new Error(C(r,\"RUNTIME\",\"INVALIDVARIABLE\"));if(a=a.toLowerCase(),null!==e.localScope&&void 0!==e.localScope[a]&&(o=e.localScope[a]),null===o&&void 0!==e.globalScope[a]&&(o=e.globalScope[a]),null===o)throw new Error(C(r,\"RUNTIME\",\"VARIABLENOTDECLARED\"));if(E(n)||m(n)){const t=n.length;for(let n=0;n<t;n++){o.value=n;const t=ee(e,r.body);if(t===p)break;if(t instanceof d)return t}return h}if(g(n)){for(let t=0;t<n.length();t++){o.value=t;const n=ee(e,r.body);if(n===p)break;if(n instanceof d)return n}return h}if(!(n instanceof t||N(n)))return h;{const t=n.keys();for(let n=0;n<t.length;n++){o.value=t[n];const a=ee(e,r.body);if(a===p)break;if(a instanceof d)return a}}}function oe(e,r){null!==r.init&&ee(e,r.init);const t={testResult:!0,lastAction:h};do{ae(e,r,t)}while(!0===t.testResult);return t.lastAction instanceof d?t.lastAction:h}function ae(e,r,t){if(null!==r.test){if(t.testResult=ee(e,r.test),!1===t.testResult)return;if(!0!==t.testResult)throw new Error(C(r,\"RUNTIME\",\"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"))}t.lastAction=ee(e,r.body),t.lastAction!==p?t.lastAction instanceof d?t.testResult=!1:null!==r.update&&ee(e,r.update):t.testResult=!1}function ie(e,r){let n,o=null,a=\"\";if(\"MemberExpression\"===r.argument.type){if(o=ee(e,r.argument.object),!0===r.argument.computed?a=ee(e,r.argument.property):\"Identifier\"===r.argument.property.type&&(a=r.argument.property.name),E(o)){if(!I(a))throw new Error(\"Invalid Parameter\");if(a<0&&(a=o.length+a),a<0||a>=o.length)throw new Error(\"Assignment outside of array bounds\");n=y(o[a]),o[a]=\"++\"===r.operator?n+1:n-1}else if(o instanceof t){if(!1===m(a))throw new Error(\"Dictionary accessor must be a string\");if(!0!==o.hasField(a))throw new Error(\"Invalid Parameter\");n=y(o.field(a)),o.setField(a,\"++\"===r.operator?n+1:n-1)}else{if(!N(o))throw g(o)?new Error(\"Array is Immutable\"):new Error(\"Invalid Parameter\");if(!1===m(a))throw new Error(\"Feature accessor must be a string\");if(!0!==o.hasField(a))throw new Error(\"Invalid Parameter\");n=y(o.field(a)),o.setField(a,\"++\"===r.operator?n+1:n-1)}return!1===r.prefix?n:\"++\"===r.operator?n+1:n-1}if(o=\"Identifier\"===r.argument.type?r.argument.name.toLowerCase():\"\",!o)throw new Error(\"Invalid identifier\");if(null!==e.localScope&&void 0!==e.localScope[o])return n=y(e.localScope[o].value),e.localScope[o]={value:\"++\"===r.operator?n+1:n-1,valueset:!0,node:r},!1===r.prefix?n:\"++\"===r.operator?n+1:n-1;if(void 0!==e.globalScope[o])return n=y(e.globalScope[o].value),e.globalScope[o]={value:\"++\"===r.operator?n+1:n-1,valueset:!0,node:r},!1===r.prefix?n:\"++\"===r.operator?n+1:n-1;throw new Error(\"Variable not recognised\")}function se(e,r,t,n){switch(r){case\"=\":return e===h?null:e;case\"/=\":return y(t)/y(e);case\"*=\":return y(t)*y(e);case\"-=\":return y(t)-y(e);case\"+=\":return m(t)||m(e)?T(t)+T(e):y(t)+y(e);case\"%=\":return y(t)%y(e);default:throw new Error(C(n,\"RUNTIME\",\"OPERATORNOTRECOGNISED\"))}}function le(e,r){const n=ee(e,r.right);let o=null,a=\"\";if(\"MemberExpression\"===r.left.type){if(o=ee(e,r.left.object),!0===r.left.computed?a=ee(e,r.left.property):\"Identifier\"===r.left.property.type&&(a=r.left.property.name),E(o)){if(!I(a))throw new Error(\"Invalid Parameter\");if(a<0&&(a=o.length+a),a<0||a>o.length)throw new Error(\"Assignment outside of array bounds\");if(a===o.length){if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");o[a]=se(n,r.operator,o[a],r)}else o[a]=se(n,r.operator,o[a],r)}else if(o instanceof t){if(!1===m(a))throw new Error(\"Dictionary accessor must be a string\");if(!0===o.hasField(a))o.setField(a,se(n,r.operator,o.field(a),r));else{if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");o.setField(a,se(n,r.operator,null,r))}}else{if(!N(o))throw g(o)?new Error(\"Array is Immutable\"):new Error(\"Invalid Parameter\");if(!1===m(a))throw new Error(\"Feature accessor must be a string\");if(!0===o.hasField(a))o.setField(a,se(n,r.operator,o.field(a),r));else{if(\"=\"!==r.operator)throw new Error(\"Invalid Parameter\");o.setField(a,se(n,r.operator,null,r))}}return h}if(o=r.left.name.toLowerCase(),null!==e.localScope&&void 0!==e.localScope[o])return e.localScope[o]={value:se(n,r.operator,e.localScope[o].value,r),valueset:!0,node:r.right},h;if(void 0!==e.globalScope[o])return e.globalScope[o]={value:se(n,r.operator,e.globalScope[o].value,r),valueset:!0,node:r.right},h;throw new Error(\"Variable not recognised\")}function ce(e,r){if(\"AssignmentExpression\"===r.expression.type||\"UpdateExpression\"===r.expression.type)return ee(e,r.expression);if(\"CallExpression\"===r.expression.type){const t=ee(e,r.expression);return t===h?h:new v(t)}{const t=ee(e,r.expression);return t===h?h:new v(t)}}function ue(e,r){if(\"AssignmentExpression\"===r.test.type||\"UpdateExpression\"===r.test.type)throw new Error(C(r.test,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));const t=ee(e,r.test);if(!0===t)return ee(e,r.consequent);if(!1===t)return null!==r.alternate?ee(e,r.alternate):h;throw new Error(C(r,\"RUNTIME\",\"CANNOT_USE_NONBOOLEAN_IN_CONDITION\"))}function fe(e,r){let t=h;for(let n=0;n<r.body.length;n++)if(t=ee(e,r.body[n]),t instanceof d||t===p||t===f)return t;return t}function pe(e,r){if(null===r.argument)return new d(h);const t=ee(e,r.argument);return new d(t)}function he(e,r){const t=r.id.name.toLowerCase();return e.globalScope[t]={valueset:!0,node:null,value:new o(r,e)},h}function we(e,r){for(let t=0;t<r.declarations.length;t++)ee(e,r.declarations[t]);return h}function me(e,r){let t=null===r.init?null:ee(e,r.init);if(t===h&&(t=null),\"Identifier\"!==r.id.type)throw new Error(\"Can only assign a regular variable\");const n=r.id.name.toLowerCase();return null!==e.localScope?e.localScope[n]={value:t,valueset:!0,node:r.init}:e.globalScope[n]={value:t,valueset:!0,node:r.init},h}let Ee=0;function de(e,r,n){let o;switch(r=r.toLowerCase()){case\"hasz\":{const r=e.hasZ;return void 0!==r&&r}case\"hasm\":{const r=e.hasM;return void 0!==r&&r}case\"spatialreference\":{let r=e.spatialReference._arcadeCacheId;if(void 0===r){let t=!0;Object.freeze&&Object.isFrozen(e.spatialReference)&&(t=!1),t&&(Ee++,e.spatialReference._arcadeCacheId=Ee,r=Ee)}const n=new t({wkt:e.spatialReference.wkt,wkid:e.spatialReference.wkid});return void 0!==r&&(n._arcadeCacheId=\"SPREF\"+r.toString()),n}}switch(e.type){case\"extent\":switch(r){case\"xmin\":case\"xmax\":case\"ymin\":case\"ymax\":case\"zmin\":case\"zmax\":case\"mmin\":case\"mmax\":{const t=e[r];return void 0!==t?t:null}case\"type\":return\"Extent\"}break;case\"polygon\":switch(r){case\"rings\":o=e.cache._arcadeCacheId,void 0===o&&(Ee++,o=Ee,e.cache._arcadeCacheId=o);return new a(e.rings,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case\"type\":return\"Polygon\"}break;case\"point\":switch(r){case\"x\":case\"y\":case\"z\":case\"m\":return void 0!==e[r]?e[r]:null;case\"type\":return\"Point\"}break;case\"polyline\":switch(r){case\"paths\":o=e.cache._arcadeCacheId,void 0===o&&(Ee++,o=Ee,e.cache._arcadeCacheId=o);return new a(e.paths,e.spatialReference,!0===e.hasZ,!0===e.hasM,o);case\"type\":return\"Polyline\"}break;case\"multipoint\":switch(r){case\"points\":o=e.cache._arcadeCacheId,void 0===o&&(Ee++,o=Ee,e.cache._arcadeCacheId=o);return new i(e.points,e.spatialReference,!0===e.hasZ,!0===e.hasM,o,1);case\"type\":return\"Multipoint\"}}throw new Error(C(n,\"RUNTIME\",\"PROPERTYNOTFOUND\"))}function ge(e,r){try{const n=ee(e,r.object);if(null===n)throw new Error(C(r,\"RUNTIME\",\"NOTFOUND\"));if(!1===r.computed){if(\"Identifier\"===r.property.type){if(n instanceof t||N(n))return n.field(r.property.name);if(n instanceof Z)return de(n,r.property.name,r)}throw new Error(C(r,\"RUNTIME\",\"INVALIDTYPE\"))}{let o=ee(e,r.property);if(n instanceof t||N(n)){if(m(o))return n.field(o);throw new Error(C(r,\"RUNTIME\",\"INVALIDTYPE\"))}if(n instanceof Z){if(m(o))return de(n,o,r);throw new Error(C(r,\"RUNTIME\",\"INVALIDTYPE\"))}if(E(n)){if(I(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=n.length+o),o>=n.length||o<0)throw new Error(C(r,\"RUNTIME\",\"OUTOFBOUNDS\"));return n[o]}throw new Error(C(r,\"RUNTIME\",\"INVALIDTYPE\"))}if(m(n)){if(I(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=n.length+o),o>=n.length||o<0)throw new Error(C(r,\"RUNTIME\",\"OUTOFBOUNDS\"));return n[o]}throw new Error(C(r,\"RUNTIME\",\"INVALIDTYPE\"))}if(g(n)){if(I(o)&&isFinite(o)&&Math.floor(o)===o){if(o<0&&(o=n.length()+o),o>=n.length()||o<0)throw new Error(C(r,\"RUNTIME\",\"OUTOFBOUNDS\"));return n.get(o)}throw new Error(C(r,\"RUNTIME\",\"INVALIDTYPE\"))}throw new Error(C(r,\"RUNTIME\",\"INVALIDTYPE\"))}}catch(n){throw n}}function Ne(e,r){try{const t=ee(e,r.argument);if(l(t)){if(\"!\"===r.operator)return!t;if(\"-\"===r.operator)return-1*y(t);if(\"+\"===r.operator)return 1*y(t);if(\"~\"===r.operator)return~y(t);throw new Error(C(r,\"RUNTIME\",\"NOTSUPPORTEDUNARYOPERATOR\"))}if(\"~\"===r.operator)return~y(t);if(\"-\"===r.operator)return-1*y(t);if(\"+\"===r.operator)return 1*y(t);throw new Error(C(r,\"RUNTIME\",\"NOTSUPPORTEDUNARYOPERATOR\"))}catch(t){throw t}}function Ie(e,r){try{const t=[];for(let n=0;n<r.elements.length;n++){const o=ee(e,r.elements[n]);if(w(o))throw new Error(C(r,\"RUNTIME\",\"FUNCTIONCONTEXTILLEGAL\"));o===h?t.push(null):t.push(o)}return t}catch(t){throw t}}function ye(e,r){try{const t=[ee(e,r.left),ee(e,r.right)],n=t[0],o=t[1];switch(r.operator){case\"|\":case\"<<\":case\">>\":case\">>>\":case\"^\":case\"&\":return O(y(n),y(o),r.operator);case\"==\":return c(n,o);case\"!=\":return!c(n,o);case\"<\":case\">\":case\"<=\":case\">=\":return R(n,o,r.operator);case\"+\":return m(n)||m(o)?T(n)+T(o):y(n)+y(o);case\"-\":return y(n)-y(o);case\"*\":return y(n)*y(o);case\"/\":return y(n)/y(o);case\"%\":return y(n)%y(o);default:throw new Error(C(r,\"RUNTIME\",\"OPERATORNOTRECOGNISED\"))}}catch(t){throw t}}function ve(e,r){try{if(\"AssignmentExpression\"===r.left.type||\"UpdateExpression\"===r.left.type)throw new Error(C(r.left,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));if(\"AssignmentExpression\"===r.right.type||\"UpdateExpression\"===r.right.type)throw new Error(C(r.right,\"RUNTIME\",\"CANNOT_USE_ASSIGNMENT_IN_CONDITION\"));const t=ee(e,r.left);if(l(t))switch(r.operator){case\"||\":if(!0===t)return t;{const t=ee(e,r.right);if(l(t))return t;throw new Error(C(r,\"RUNTIME\",\"ONLYORORAND\"))}case\"&&\":if(!1===t)return t;{const t=ee(e,r.right);if(l(t))return t;throw new Error(C(r,\"RUNTIME\",\"ONLYORORAND\"))}default:throw new Error(C(r,\"RUNTIME\",\"ONLYORORAND\"))}throw new Error(C(r,\"RUNTIME\",\"ONLYBOOLEAN\"))}catch(t){throw t}}function Te(e,r){return r.value?r.value.cooked:\"\"}function Re(e,r){let t=\"\",n=0;for(const o of r.quasis)if(t+=o.value?o.value.cooked:\"\",!1===o.tail){t+=r.expressions[n]?T(ee(e,r.expressions[n])):\"\",n++}return t}function Oe(e,r){let t;try{const n=r.name.toLowerCase();if(null!==e.localScope&&void 0!==e.localScope[n])return t=e.localScope[n],!0===t.valueset||(t.value=ee(e,t.node),t.valueset=!0),t.value;if(void 0!==e.globalScope[n])return t=e.globalScope[n],!0===t.valueset||(t.value=ee(e,t.node),t.valueset=!0),t.value;throw new Error(C(r,\"RUNTIME\",\"VARIABLENOTFOUND\"))}catch(n){throw n}}function Se(e,r){try{if(\"Identifier\"!==r.callee.type)throw new Error(C(r,\"RUNTIME\",\"ONLYNODESSUPPORTED\"));if(null!==e.localScope&&void 0!==e.localScope[r.callee.name.toLowerCase()]){const t=e.localScope[r.callee.name.toLowerCase()];if(t.value instanceof u)return t.value.fn(e,r);if(t.value instanceof o)return Pe(e,r,t.value.definition);throw new Error(C(r,\"RUNTIME\",\"NOTAFUNCTION\"))}if(void 0!==e.globalScope[r.callee.name.toLowerCase()]){const t=e.globalScope[r.callee.name.toLowerCase()];if(t.value instanceof u)return t.value.fn(e,r);if(t.value instanceof o)return Pe(e,r,t.value.definition);throw new Error(C(r,\"RUNTIME\",\"NOTAFUNCTION\"))}throw new Error(C(r,\"RUNTIME\",\"NOTFOUND\"))}catch(t){throw t}}const be={};function Ue(n){return null==n?\"\":E(n)||g(n)?\"Array\":S(n)?\"Date\":m(n)?\"String\":l(n)?\"Boolean\":I(n)?\"Number\":n instanceof r?\"Attachment\":n instanceof e?\"Portal\":n instanceof t?\"Dictionary\":N(n)?\"Feature\":n instanceof W?\"Point\":n instanceof K?\"Polygon\":n instanceof X?\"Polyline\":n instanceof H?\"Multipoint\":n instanceof q?\"Extent\":w(n)?\"Function\":b(n)?\"FeatureSet\":U(n)?\"FeatureSetCollection\":n===h?\"\":\"number\"==typeof n&&isNaN(n)?\"Number\":\"Unrecognised Type\"}function Ae(e,r,t,n){try{const o=ee(e,r.arguments[t]);if(c(o,n))return ee(e,r.arguments[t+1]);{const o=r.arguments.length-t;return 1===o?ee(e,r.arguments[t]):2===o?null:3===o?ee(e,r.arguments[t+2]):Ae(e,r,t+2,n)}}catch(o){throw o}}function Ce(e,r,t,n){try{if(!0===n)return ee(e,r.arguments[t+1]);if(3===r.arguments.length-t)return ee(e,r.arguments[t+2]);{const n=ee(e,r.arguments[t+2]);if(!1===l(n))throw new Error(\"WHEN needs boolean test conditions\");return Ce(e,r,t+2,n)}}catch(o){throw o}}function Me(e,r){const t=e.length,n=Math.floor(t/2);return 0===t?[]:1===t?[e[0]]:xe(Me(e.slice(0,n),r),Me(e.slice(n,t),r),r)}function xe(e,r,t){const n=[];for(;e.length>0||r.length>0;)if(e.length>0&&r.length>0){let o=t(e[0],r[0]);isNaN(o)&&(o=0),o<=0?(n.push(e[0]),e=e.slice(1)):(n.push(r[0]),r=r.slice(1))}else e.length>0?(n.push(e[0]),e=e.slice(1)):r.length>0&&(n.push(r[0]),r=r.slice(1));return n}function Fe(e,r,t){try{const n=e.body;if(t.length!==e.params.length)throw new Error(\"Invalid Parameter calls to function.\");for(let a=0;a<t.length;a++)r.localScope[e.params[a].name.toLowerCase()]={value:t[a],valueset:!0,node:null};const o=ee(r,n);if(o instanceof d)return o.value;if(o===p)throw new Error(\"Cannot Break from a Function\");if(o===f)throw new Error(\"Cannot Continue from a Function\");return o instanceof v?o.value:o}catch(n){throw n}}function Pe(e,r,t){return $(e,r,(function(r,n,o){const a={spatialReference:e.spatialReference,globalScope:e.globalScope,depthCounter:e.depthCounter+1,console:e.console,lrucache:e.lrucache,interceptor:e.interceptor,localScope:{}};if(a.depthCounter>64)throw new Error(\"Exceeded maximum function depth\");return Fe(t,a,o)}))}function De(e){const r=function(){const r={spatialReference:e.context.spatialReference,console:e.context.console,lrucache:e.context.lrucache,interceptor:e.context.interceptor,localScope:{},depthCounter:e.context.depthCounter+1,globalScope:e.context.globalScope};if(r.depthCounter>64)throw new Error(\"Exceeded maximum function depth\");return Fe(e.definition,r,arguments)};return r}k(be,$),z(be,$),Y(be,$),V(be,$),G(be,$),B(be,$),be.typeof=function(e,r){return $(e,r,(function(e,r,t){s(t,1,1);const n=Ue(t[0]);if(\"Unrecognised Type\"===n)throw new Error(\"Unrecognised Type\");return n}))},be.iif=function(e,r){try{s(null===r.arguments?[]:r.arguments,3,3);const t=ee(e,r.arguments[0]);if(!1===l(t))throw new Error(\"IF Function must have a boolean test condition\");const n=ee(e,r.arguments[1]),o=ee(e,r.arguments[2]);return!0===t?n:o}catch(t){throw t}},be.decode=function(e,r){try{if(r.arguments.length<2)throw new Error(\"Missing Parameters\");if(2===r.arguments.length)return ee(e,r.arguments[1]);{if((r.arguments.length-1)%2==0)throw new Error(\"Must have a default value result.\");const t=ee(e,r.arguments[0]);return Ae(e,r,1,t)}}catch(t){throw t}},be.when=function(e,r){try{if(r.arguments.length<3)throw new Error(\"Missing Parameters\");if(r.arguments.length%2==0)throw new Error(\"Must have a default value result.\");const t=ee(e,r.arguments[0]);if(!1===l(t))throw new Error(\"WHEN needs boolean test conditions\");return Ce(e,r,0,t)}catch(t){throw t}},be.top=function(e,r){return $(e,r,(function(e,r,t){if(s(t,2,2),E(t[0]))return y(t[1])>=t[0].length?t[0].slice(0):t[0].slice(0,y(t[1]));if(g(t[0]))return y(t[1])>=t[0].length()?t[0].slice(0):t[0].slice(0,y(t[1]));throw new Error(\"Top cannot accept this parameter type\")}))},be.first=function(e,r){return $(e,r,(function(e,r,t){return s(t,1,1),E(t[0])?0===t[0].length?null:t[0][0]:g(t[0])?0===t[0].length()?null:t[0].get(0):null}))},be.sort=function(e,r){return $(e,r,(function(e,r,t){s(t,1,2);let n=t[0];if(g(n)&&(n=n.toArray()),!1===E(n))throw new Error(\"Illegal Argument\");if(t.length>1){if(!1===w(t[1]))throw new Error(\"Illegal Argument\");let e=n;const r=De(t[1]);return e=Me(e,(function(e,t){return r(e,t)})),e}{let e=n;if(0===e.length)return[];const r={};for(let n=0;n<e.length;n++){const t=Ue(e[n]);\"\"!==t&&(r[t]=!0)}if(!0===r.Array||!0===r.Dictionary||!0===r.Feature||!0===r.Point||!0===r.Polygon||!0===r.Polyline||!0===r.Multipoint||!0===r.Extent||!0===r.Function)return e.slice(0);let t=0,o=\"\";for(const n in r)t++,o=n;return e=t>1||\"String\"===o?Me(e,(function(e,r){if(null==e||e===h)return null==r||r===h?0:1;if(null==r||r===h)return-1;const t=T(e),n=T(r);return t<n?-1:t===n?0:1})):\"Number\"===o?Me(e,(function(e,r){return e-r})):\"Boolean\"===o?Me(e,(function(e,r){return e===r?0:r?-1:1})):\"Date\"===o?Me(e,(function(e,r){return r-e})):e.slice(0),e}}))};for(const We in be)be[We]={value:new u(be[We]),valueset:!0,node:null};const Le=function(){};function je(e,r){const o=new Le;e||(e={}),r||(r={});const a=new t({newline:\"\\n\",tab:\"\\t\",singlequote:\"'\",doublequote:'\"',forwardslash:\"/\",backwardslash:\"\\\\\"});a.immutable=!1,o.textformatting={value:a,valueset:!0,node:null};for(const t in r)o[t]={value:new u(r[t]),native:!0,valueset:!0,node:null};for(const t in e)e[t]&&\"esri.Graphic\"===e[t].declaredClass?o[t]={value:n.createFromGraphic(e[t]),valueset:!0,node:null}:o[t]={value:e[t],valueset:!0,node:null};return o}Le.prototype=be,Le.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},Le.prototype.pi={value:Math.PI,valueset:!0,node:null};const _e={fixSpatialReference:A,parseArguments:Q,standardFunction:$};function ke(e){console.log(e)}function Ve(e){const r={mode:\"sync\",compiled:!1,functions:{},signatures:[],standardFunction:$,evaluateIdentifier:Oe,arcadeCustomFunctionHandler:De};for(let t=0;t<e.length;t++)e[t].registerFunctions(r);for(const t in r.functions)be[t]={value:new u(r.functions[t]),valueset:!0,node:null},Le.prototype[t]=be[t];for(let t=0;t<r.signatures.length;t++)M(r.signatures[t],\"async\")}function Be(e,r){let t=r.spatialReference;null==t&&(t=new J({wkid:102100}));let n=ee({spatialReference:t,globalScope:je(r.vars,r.customfunctions),localScope:null,console:r.console?r.console:ke,lrucache:r.lrucache,interceptor:r.interceptor,depthCounter:1},e.body[0].body);if(n instanceof d&&(n=n.value),n instanceof v&&(n=n.value),n===h&&(n=null),n===p)throw new Error(\"Cannot return BREAK\");if(n===f)throw new Error(\"Cannot return CONTINUE\");if(n instanceof o)throw new Error(\"Cannot return FUNCTION\");if(n instanceof u)throw new Error(\"Cannot return FUNCTION\");return n}function Ye(e,r){return x(e)}function Ge(e){return F(e)}function ze(e,r){return P(e,r,\"simple\")}function qe(e,r){return D(e,r)}function Ze(e,r){return L(e,r)}function He(e){return j(e)}Ve([_]);export{Be as executeScript,Ve as extend,Ge as extractExpectedFieldLiterals,Ye as extractFieldLiterals,He as findFunctionCalls,_e as functionHelper,Ze as referencesFunction,qe as referencesMember,ze as validateScript};\n"]},"metadata":{},"sourceType":"module"}