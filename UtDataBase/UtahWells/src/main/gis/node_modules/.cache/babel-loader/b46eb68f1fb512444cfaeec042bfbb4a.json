{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from \"../has.js\";\nimport { isAggregate as t, aggregateFunction as a } from \"./AggregateFunctions.js\";\nimport { SqlInterval as r, isStandardized as s, evaluateFunction as n } from \"./StandardizedFunctions.js\";\nimport { WhereGrammar as i } from \"./WhereGrammar.js\";\nconst l = /^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/,\n      u = /^(\\d{4})-(\\d{1,2})-(\\d{1,2}) (\\d{1,2}):(\\d{1,2}):(\\d{1,2}(\\.[0-9]+)?)$/,\n      o = /^(\\d{4})-(\\d{1,2})-(\\d{1,2}) (\\d{1,2}):(\\d{1,2}):(\\d{1,2}(\\.[0-9]+)?)(\\+|\\-)(\\d{1,2}):(\\d{1,2})$/,\n      c = /^(\\d{4})-(\\d{1,2})-(\\d{1,2}) (\\d{1,2}):(\\d{1,2})(\\+|\\-)(\\d{1,2}):(\\d{1,2})$/,\n      h = /^(\\d{4})-(\\d{1,2})-(\\d{1,2}) (\\d{1,2}):(\\d{1,2})$/,\n      d = new Set([\"current_timestamp\", \"current_date\", \"current_time\"]);\n\nfunction p(e, t) {\n  return (e += \"\").length >= t ? e : new Array(t - e.length + 1).join(\"0\") + e;\n}\n\nfunction v(e, t) {\n  let a = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"0\";\n  let r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"0\";\n  let s = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : \"0\";\n  let n = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : \"0\";\n  let i = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : \"\";\n  let l = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : \"0\";\n  let u = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : \"0\";\n\n  if (\"+\" === i || \"-\" === i) {\n    const o = `${p(parseInt(e, 10), 4)}-${p(parseInt(t, 10), 2)}-${p(parseInt(a, 10), 2)}`;\n    let c = \"\";\n    parseFloat(n) < 10 && (c = \"0\");\n    const h = `${p(parseInt(r, 10), 2)}:${p(parseInt(s, 10), 2)}:${c + parseFloat(n).toString()}`,\n          d = `${i}${p(parseInt(l, 10), 2)}:${p(parseInt(u, 10), 2)}`;\n    return new Date(o + \"T\" + h + d);\n  }\n\n  return new Date(parseInt(e, 10), parseInt(t, 10) - 1, parseInt(a, 10), parseInt(r, 10), parseInt(s, 10), parseFloat(n));\n}\n\nclass f {\n  static makeBool(e) {\n    return g(e);\n  }\n\n  static featureValue(e, t, a, r) {\n    return O(e, t, a, r);\n  }\n\n  static equalsNull(e) {\n    return null === e;\n  }\n\n  static applyLike(e, t, a) {\n    return b(e, t, a);\n  }\n\n  static ensureArray(e) {\n    return T(e);\n  }\n\n  static applyIn(e, t) {\n    return I(e, t);\n  }\n\n  static currentDate() {\n    const e = new Date();\n    return e.setHours(0, 0, 0, 0), e;\n  }\n\n  static makeSqlInterval(e, t, a) {\n    return r.createFromValueAndQualifer(e, t, a);\n  }\n\n  static convertInterval(e) {\n    return e instanceof r ? e.valueInMilliseconds() : e;\n  }\n\n  static currentTimestamp() {\n    return new Date();\n  }\n\n  static compare(e, t, a) {\n    return x(e, t, a);\n  }\n\n  static calculate(e, t, a) {\n    return F(e, t, a);\n  }\n\n  static makeComparable(e) {\n    return E(e);\n  }\n\n  static evaluateFunction(e, t) {\n    return n(e, t);\n  }\n\n  static lookup(e, t) {\n    const a = t[e];\n    return void 0 === a ? null : a;\n  }\n\n  static between(e, t) {\n    return null == e || null == t[0] || null == t[1] ? null : e >= t[0] && e <= t[1];\n  }\n\n  static notbetween(e, t) {\n    return null == e || null == t[0] || null == t[1] ? null : e < t[0] || e > t[1];\n  }\n\n  static ternaryNot(e) {\n    return S(e);\n  }\n\n  static ternaryAnd(e, t) {\n    return w(e, t);\n  }\n\n  static ternaryOr(e, t) {\n    return y(e, t);\n  }\n\n}\n\nclass m {\n  constructor(e, t) {\n    this.fieldsIndex = t, this.datefields = {}, this.parameters = {}, this._hasDateFunctions = void 0, this.parseTree = i.parse(e);\n\n    const {\n      isStandardized: a,\n      isAggregate: r,\n      referencedFieldNames: s\n    } = this._extractExpressionInfo(t);\n\n    this.referencedFieldNames = s, this.isStandardized = a, this.isAggregate = r;\n  }\n\n  static create(e, t) {\n    return new m(e, t);\n  }\n\n  get fieldNames() {\n    return this.referencedFieldNames;\n  }\n\n  testSet(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : k;\n    const a = {};\n\n    for (const r of this.fieldNames) a[r] = e.map(e => t.getAttribute(e, r));\n\n    return !!this._evaluateNode(this.parseTree, {\n      attributes: a\n    }, k);\n  }\n\n  calculateValue(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : k;\n\n    const a = this._evaluateNode(this.parseTree, e, t);\n\n    return a instanceof r ? a.valueInMilliseconds() / 864e5 : a;\n  }\n\n  calculateValueCompiled(t) {\n    let a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : k;\n    return null != this.parseTree._compiledVersion ? this.parseTree._compiledVersion(t, this.parameters, a, this.datefields) : e(\"esri-csp-restrictions\") ? this.calculateValue(t, a) : (this._compileMe(), this.parseTree._compiledVersion(t, this.parameters, a, this.datefields));\n  }\n\n  testFeature(e) {\n    let t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : k;\n    return !!this._evaluateNode(this.parseTree, e, t);\n  }\n\n  testFeatureCompiled(t) {\n    let a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : k;\n    return null != this.parseTree._compiledVersion ? !!this.parseTree._compiledVersion(t, this.parameters, a, this.datefields) : e(\"esri-csp-restrictions\") ? this.testFeature(t, a) : (this._compileMe(), !!this.parseTree._compiledVersion(t, this.parameters, a, this.datefields));\n  }\n\n  get hasDateFunctions() {\n    return null != this._hasDateFunctions || (this._hasDateFunctions = !1, this._visitAll(this.parseTree, e => {\n      \"current_time\" === e.type ? this._hasDateFunctions = !0 : \"function\" === e.type && (this._hasDateFunctions = this._hasDateFunctions || d.has(e.name.toLowerCase()));\n    })), this._hasDateFunctions;\n  }\n\n  getFunctions() {\n    const e = new Set();\n    return this._visitAll(this.parseTree, t => {\n      \"function\" === t.type && e.add(t.name.toLowerCase());\n    }), Array.from(e);\n  }\n\n  getExpressions() {\n    const e = new Map();\n    return this._visitAll(this.parseTree, t => {\n      if (\"function\" === t.type) {\n        const a = t.name.toLowerCase(),\n              r = t.args.value[0];\n\n        if (\"column_ref\" === r.type) {\n          const t = r.column,\n                s = `${a}-${t}`;\n          e.has(s) || e.set(s, {\n            aggregateType: a,\n            field: t\n          });\n        }\n      }\n    }), [...e.values()];\n  }\n\n  getVariables() {\n    const e = new Set();\n    return this._visitAll(this.parseTree, t => {\n      \"param\" === t.type && e.add(t.value.toLowerCase());\n    }), Array.from(e);\n  }\n\n  _compileMe() {\n    const e = \"return this.convertInterval(\" + this.evaluateNodeToJavaScript(this.parseTree) + \")\";\n    this.parseTree._compiledVersion = new Function(\"feature\", \"lookups\", \"attributeAdapter\", \"datefields\", e).bind(f);\n  }\n\n  _extractExpressionInfo(e) {\n    const a = [],\n          r = new Set();\n    let n = !0,\n        i = !0;\n    return this._visitAll(this.parseTree, l => {\n      switch (l.type) {\n        case \"column_ref\":\n          {\n            const t = e.get(l.column);\n            let s, n;\n            t ? s = n = t.name : (n = l.column, s = n.toLowerCase()), !t || \"date\" !== t.type && \"esriFieldTypeDate\" !== t.type || (this.datefields[t.name] = 1), r.has(s) || (r.add(s), a.push(n)), l.column = n;\n            break;\n          }\n\n        case \"function\":\n          {\n            const {\n              name: e,\n              args: a\n            } = l,\n                  r = a.value.length;\n            n && (n = s(e, r)), i && (i = t(e, r));\n            break;\n          }\n      }\n    }), {\n      referencedFieldNames: Array.from(a),\n      isStandardized: n,\n      isAggregate: i\n    };\n  }\n\n  _visitAll(e, t) {\n    if (null != e) switch (t(e), e.type) {\n      case \"when_clause\":\n        this._visitAll(e.operand, t), this._visitAll(e.value, t);\n        break;\n\n      case \"case_expression\":\n        for (const a of e.clauses) this._visitAll(a, t);\n\n        \"simple\" === e.format && this._visitAll(e.operand, t), null !== e.else && this._visitAll(e.else, t);\n        break;\n\n      case \"expr_list\":\n        for (const a of e.value) this._visitAll(a, t);\n\n        break;\n\n      case \"unary_expr\":\n        this._visitAll(e.expr, t);\n\n        break;\n\n      case \"binary_expr\":\n        this._visitAll(e.left, t), this._visitAll(e.right, t);\n        break;\n\n      case \"function\":\n        this._visitAll(e.args, t);\n\n    }\n  }\n\n  evaluateNodeToJavaScript(e) {\n    switch (e.type) {\n      case \"interval\":\n        return \"this.makeSqlInterval(\" + this.evaluateNodeToJavaScript(e.value) + \", \" + JSON.stringify(e.qualifier) + \",\" + JSON.stringify(e.op) + \")\";\n\n      case \"case_expression\":\n        {\n          let t = \"\";\n\n          if (\"simple\" === e.format) {\n            const a = \"this.makeComparable(\" + this.evaluateNodeToJavaScript(e.operand) + \")\";\n            t = \"( \";\n\n            for (let r = 0; r < e.clauses.length; r++) t += \" (\" + a + \" === this.makeComparable(\" + this.evaluateNodeToJavaScript(e.clauses[r].operand) + \")) ? (\" + this.evaluateNodeToJavaScript(e.clauses[r].value) + \") : \";\n\n            null !== e.else ? t += this.evaluateNodeToJavaScript(e.else) : t += \"null\", t += \" )\";\n          } else {\n            t = \"( \";\n\n            for (let a = 0; a < e.clauses.length; a++) t += \" this.makeBool(\" + this.evaluateNodeToJavaScript(e.clauses[a].operand) + \")===true ? (\" + this.evaluateNodeToJavaScript(e.clauses[a].value) + \") : \";\n\n            null !== e.else ? t += this.evaluateNodeToJavaScript(e.else) : t += \"null\", t += \" )\";\n          }\n\n          return t;\n        }\n\n      case \"param\":\n        return \"this.lookup(\" + JSON.stringify(e.value.toLowerCase()) + \",lookups)\";\n\n      case \"expr_list\":\n        {\n          let t = \"[\";\n\n          for (const a of e.value) \"[\" !== t && (t += \",\"), t += this.evaluateNodeToJavaScript(a);\n\n          return t += \"]\", t;\n        }\n\n      case \"unary_expr\":\n        return \"this.ternaryNot(\" + this.evaluateNodeToJavaScript(e.expr) + \")\";\n\n      case \"binary_expr\":\n        switch (e.operator) {\n          case \"AND\":\n            return \"this.ternaryAnd(\" + this.evaluateNodeToJavaScript(e.left) + \",\" + this.evaluateNodeToJavaScript(e.right) + \" )\";\n\n          case \"OR\":\n            return \"this.ternaryOr(\" + this.evaluateNodeToJavaScript(e.left) + \",\" + this.evaluateNodeToJavaScript(e.right) + \" )\";\n\n          case \"IS\":\n            if (\"null\" !== e.right.type) throw new Error(\"Unsupported RHS for IS\");\n            return \"this.equalsNull(\" + this.evaluateNodeToJavaScript(e.left) + \")\";\n\n          case \"ISNOT\":\n            if (\"null\" !== e.right.type) throw new Error(\"Unsupported RHS for IS\");\n            return \"(!(this.equalsNull(\" + this.evaluateNodeToJavaScript(e.left) + \")))\";\n\n          case \"IN\":\n            return \"this.applyIn(\" + this.evaluateNodeToJavaScript(e.left) + \",this.ensureArray(\" + this.evaluateNodeToJavaScript(e.right) + \"))\";\n\n          case \"NOT IN\":\n            return \"this.ternaryNot(this.applyIn(\" + this.evaluateNodeToJavaScript(e.left) + \",this.ensureArray(\" + this.evaluateNodeToJavaScript(e.right) + \")))\";\n\n          case \"BETWEEN\":\n            return \"this.between(\" + this.evaluateNodeToJavaScript(e.left) + \",\" + this.evaluateNodeToJavaScript(e.right) + \")\";\n\n          case \"NOTBETWEEN\":\n            return \"this.notbetween(\" + this.evaluateNodeToJavaScript(e.left) + \",\" + this.evaluateNodeToJavaScript(e.right) + \")\";\n\n          case \"LIKE\":\n            return \"this.applyLike(\" + this.evaluateNodeToJavaScript(e.left) + \",\" + this.evaluateNodeToJavaScript(e.right) + \",\" + JSON.stringify(e.escape) + \")\";\n\n          case \"NOT LIKE\":\n            return \"this.ternaryNot(this.applyLike(\" + this.evaluateNodeToJavaScript(e.left) + \",\" + this.evaluateNodeToJavaScript(e.right) + \",\" + JSON.stringify(e.escape) + \"))\";\n\n          case \"<>\":\n          case \"<\":\n          case \">\":\n          case \">=\":\n          case \"<=\":\n          case \"=\":\n            return \"this.compare(\" + JSON.stringify(e.operator) + \",\" + this.evaluateNodeToJavaScript(e.left) + \",\" + this.evaluateNodeToJavaScript(e.right) + \")\";\n\n          case \"*\":\n          case \"-\":\n          case \"+\":\n          case \"/\":\n            return \"this.calculate(\" + JSON.stringify(e.operator) + \",\" + this.evaluateNodeToJavaScript(e.left) + \",\" + this.evaluateNodeToJavaScript(e.right) + \")\";\n        }\n\n        throw new Error(\"Not Supported Operator \" + e.operator);\n\n      case \"null\":\n      case \"bool\":\n      case \"string\":\n      case \"number\":\n        return JSON.stringify(e.value);\n\n      case \"date\":\n        return \"(new Date(\" + _(e.value).getTime().toString() + \"))\";\n\n      case \"timestamp\":\n        return \"(new Date(\" + N(e.value).getTime().toString() + \"))\";\n\n      case \"current_time\":\n        return \"date\" === e.mode ? \"this.currentDate()\" : \"this.currentTimestamp()\";\n\n      case \"column_ref\":\n        return \"this.featureValue(feature,\" + JSON.stringify(e.column) + \",datefields,attributeAdapter)\";\n\n      case \"function\":\n        return \"this.evaluateFunction(\" + JSON.stringify(e.name) + \",\" + this.evaluateNodeToJavaScript(e.args) + \")\";\n    }\n\n    throw new Error(\"Unsupported sql syntax \" + e.type);\n  }\n\n  _evaluateNode(e, t, s) {\n    switch (e.type) {\n      case \"interval\":\n        {\n          const a = this._evaluateNode(e.value, t, s);\n\n          return r.createFromValueAndQualifer(a, e.qualifier, e.op);\n        }\n\n      case \"case_expression\":\n        if (\"simple\" === e.format) {\n          const a = E(this._evaluateNode(e.operand, t, s));\n\n          for (let r = 0; r < e.clauses.length; r++) if (a === E(this._evaluateNode(e.clauses[r].operand, t, s))) return this._evaluateNode(e.clauses[r].value, t, s);\n\n          if (null !== e.else) return this._evaluateNode(e.else, t, s);\n        } else {\n          for (let a = 0; a < e.clauses.length; a++) if (g(this._evaluateNode(e.clauses[a].operand, t, s))) return this._evaluateNode(e.clauses[a].value, t, s);\n\n          if (null !== e.else) return this._evaluateNode(e.else, t, s);\n        }\n\n        return null;\n\n      case \"param\":\n        return this.parameters[e.value.toLowerCase()];\n\n      case \"expr_list\":\n        {\n          const a = [];\n\n          for (const r of e.value) a.push(this._evaluateNode(r, t, s));\n\n          return a;\n        }\n\n      case \"unary_expr\":\n        return S(this._evaluateNode(e.expr, t, s));\n\n      case \"binary_expr\":\n        switch (e.operator) {\n          case \"AND\":\n            return w(this._evaluateNode(e.left, t, s), this._evaluateNode(e.right, t, s));\n\n          case \"OR\":\n            return y(this._evaluateNode(e.left, t, s), this._evaluateNode(e.right, t, s));\n\n          case \"IS\":\n            if (\"null\" !== e.right.type) throw new Error(\"Unsupported RHS for IS\");\n            return null === this._evaluateNode(e.left, t, s);\n\n          case \"ISNOT\":\n            if (\"null\" !== e.right.type) throw new Error(\"Unsupported RHS for IS\");\n            return null !== this._evaluateNode(e.left, t, s);\n\n          case \"IN\":\n            {\n              const a = T(this._evaluateNode(e.right, t, s));\n              return I(this._evaluateNode(e.left, t, s), a);\n            }\n\n          case \"NOT IN\":\n            {\n              const a = T(this._evaluateNode(e.right, t, s));\n              return S(I(this._evaluateNode(e.left, t, s), a));\n            }\n\n          case \"BETWEEN\":\n            {\n              const a = this._evaluateNode(e.left, t, s),\n                    r = this._evaluateNode(e.right, t, s);\n\n              return null == a || null == r[0] || null == r[1] ? null : a >= E(r[0]) && a <= E(r[1]);\n            }\n\n          case \"NOTBETWEEN\":\n            {\n              const a = this._evaluateNode(e.left, t, s),\n                    r = this._evaluateNode(e.right, t, s);\n\n              return null == a || null == r[0] || null == r[1] ? null : a < E(r[0]) || a > E(r[1]);\n            }\n\n          case \"LIKE\":\n            return b(this._evaluateNode(e.left, t, s), this._evaluateNode(e.right, t, s), e.escape);\n\n          case \"NOT LIKE\":\n            return S(b(this._evaluateNode(e.left, t, s), this._evaluateNode(e.right, t, s), e.escape));\n\n          case \"<>\":\n          case \"<\":\n          case \">\":\n          case \">=\":\n          case \"<=\":\n          case \"=\":\n            return x(e.operator, this._evaluateNode(e.left, t, s), this._evaluateNode(e.right, t, s));\n\n          case \"-\":\n          case \"+\":\n          case \"*\":\n          case \"/\":\n            return F(e.operator, this._evaluateNode(e.left, t, s), this._evaluateNode(e.right, t, s));\n        }\n\n      case \"null\":\n      case \"bool\":\n      case \"string\":\n      case \"number\":\n        return e.value;\n\n      case \"date\":\n        return _(e.value);\n\n      case \"timestamp\":\n        return N(e.value);\n\n      case \"current_time\":\n        {\n          const t = new Date();\n          return \"date\" === e.mode && t.setHours(0, 0, 0, 0), t;\n        }\n\n      case \"column_ref\":\n        return O(t, e.column, this.datefields, s);\n\n      case \"function\":\n        {\n          const r = this._evaluateNode(e.args, t, s);\n\n          return this.isAggregate ? a(e.name, r) : n(e.name, r);\n        }\n    }\n\n    throw new Error(\"Unsupported sql syntax \" + e.type);\n  }\n\n}\n\nfunction N(e) {\n  let t = u.exec(e);\n\n  if (null !== t) {\n    const [, e, a, r, s, n, i] = t;\n    return v(e, a, r, s, n, i);\n  }\n\n  if (t = o.exec(e), null !== t) {\n    const [, e, a, r, s, n, i, l, u, o] = t;\n    return v(e, a, r, s, n, i, l, u, o);\n  }\n\n  if (t = c.exec(e), null !== t) {\n    const [, e, a, r, s, n, i, l, u] = t;\n    return v(e, a, r, s, n, \"0\", i, l, u);\n  }\n\n  if (t = h.exec(e), null !== t) {\n    const [, e, a, r, s, n] = t;\n    return v(e, a, r, s, n);\n  }\n\n  if (t = l.exec(e), null !== t) {\n    const [, e, a, r] = t;\n    return v(e, a, r);\n  }\n\n  throw new Error(\"SQL Invalid Timestamp\");\n}\n\nfunction _(e) {\n  const t = l.exec(e);\n  if (null === t) throw new Error(\"SQL Invalid Date\");\n  const [, a, r, s] = t;\n  return new Date(parseInt(a, 10), parseInt(r, 10) - 1, parseInt(s, 10));\n}\n\nfunction g(e) {\n  return !0 === e;\n}\n\nfunction T(e) {\n  return Array.isArray(e) ? e : [e];\n}\n\nfunction S(e) {\n  return null !== e ? !0 !== e : null;\n}\n\nfunction w(e, t) {\n  return null != e && null != t ? !0 === e && !0 === t : !1 !== e && !1 !== t && null;\n}\n\nfunction y(e, t) {\n  return null != e && null != t ? !0 === e || !0 === t : !0 === e || !0 === t || null;\n}\n\nfunction I(e, t) {\n  if (null == e) return null;\n  let a = !1;\n\n  for (const r of t) if (null == r) a = null;else if (e === r) {\n    a = !0;\n    break;\n  }\n\n  return a;\n}\n\nconst J = \"-[]/{}()*+?.\\\\^$|\";\nvar A;\n\nfunction D(e, t) {\n  const a = t;\n  let r = \"\",\n      s = A.Normal;\n\n  for (let n = 0; n < e.length; n++) {\n    const t = e.charAt(n);\n\n    switch (s) {\n      case A.Normal:\n        t === a ? s = A.Escaped : J.includes(t) ? r += \"\\\\\" + t : r += \"%\" === t ? \".*\" : \"_\" === t ? \".\" : t;\n        break;\n\n      case A.Escaped:\n        J.includes(t) ? r += \"\\\\\" + t : r += t, s = A.Normal;\n    }\n  }\n\n  return new RegExp(\"^\" + r + \"$\", \"m\");\n}\n\nfunction b(e, t, a) {\n  if (null == e) return null;\n  return D(t, a).test(e);\n}\n\nfunction E(e) {\n  return e instanceof Date ? e.valueOf() : e;\n}\n\nfunction x(e, t, a) {\n  if (null == t || null == a) return null;\n  const r = E(t),\n        s = E(a);\n\n  switch (e) {\n    case \"<>\":\n      return r !== s;\n\n    case \"=\":\n      return r === s;\n\n    case \">\":\n      return r > s;\n\n    case \"<\":\n      return r < s;\n\n    case \">=\":\n      return r >= s;\n\n    case \"<=\":\n      return r <= s;\n  }\n}\n\nfunction F(e, t, a) {\n  if (t instanceof r) {\n    if (a instanceof Date) switch (e) {\n      case \"+\":\n        return new Date(t.valueInMilliseconds() + a.getTime());\n\n      case \"-\":\n        return t.valueInMilliseconds() - a.getTime();\n\n      case \"*\":\n        return t.valueInMilliseconds() * a.getTime();\n\n      case \"/\":\n        return t.valueInMilliseconds() / a.getTime();\n    } else if (a instanceof r) switch (e) {\n      case \"+\":\n        return r.createFromMilliseconds(t.valueInMilliseconds() + a.valueInMilliseconds());\n\n      case \"-\":\n        return r.createFromMilliseconds(t.valueInMilliseconds() - a.valueInMilliseconds());\n\n      case \"*\":\n        return t.valueInMilliseconds() * a.valueInMilliseconds();\n\n      case \"/\":\n        return t.valueInMilliseconds() / a.valueInMilliseconds();\n    } else t = t.valueInMilliseconds();\n  } else if (a instanceof r) {\n    if (t instanceof Date) switch (e) {\n      case \"+\":\n        return new Date(a.valueInMilliseconds() + t.getTime());\n\n      case \"-\":\n        return new Date(t.getTime() - a.valueInMilliseconds());\n\n      case \"*\":\n        return t.getTime() * a.valueInMilliseconds();\n\n      case \"/\":\n        return t.getTime() / a.valueInMilliseconds();\n    } else a = a.valueInMilliseconds();\n  } else if (t instanceof Date && \"number\" == typeof a) switch (a = 24 * a * 60 * 60 * 1e3, t = t.getTime(), e) {\n    case \"+\":\n      return new Date(t + a);\n\n    case \"-\":\n      return new Date(t - a);\n\n    case \"*\":\n      return new Date(t * a);\n\n    case \"/\":\n      return new Date(t / a);\n  } else if (a instanceof Date && \"number\" == typeof t) switch (t = 24 * t * 60 * 60 * 1e3, a = a.getTime(), e) {\n    case \"+\":\n      return new Date(t + a);\n\n    case \"-\":\n      return new Date(t - a);\n\n    case \"*\":\n      return new Date(t * a);\n\n    case \"/\":\n      return new Date(t / a);\n  }\n\n  switch (e) {\n    case \"+\":\n      return t + a;\n\n    case \"-\":\n      return t - a;\n\n    case \"*\":\n      return t * a;\n\n    case \"/\":\n      return t / a;\n  }\n}\n\nfunction M(e) {\n  return e && \"object\" == typeof e.attributes;\n}\n\nfunction O(e, t, a, r) {\n  const s = r.getAttribute(e, t);\n  return null != s && 1 === a[t] ? new Date(s) : s;\n}\n\n!function (e) {\n  e[e.Normal = 0] = \"Normal\", e[e.Escaped = 1] = \"Escaped\";\n}(A || (A = {}));\nconst k = {\n  getAttribute: (e, t) => (M(e) ? e.attributes : e)[t]\n};\nexport { m as WhereClause, k as defaultAttributeAdapter };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/core/sql/WhereClause.js"],"names":["e","isAggregate","t","aggregateFunction","a","SqlInterval","r","isStandardized","s","evaluateFunction","n","WhereGrammar","i","l","u","o","c","h","d","Set","p","length","Array","join","v","parseInt","parseFloat","toString","Date","f","makeBool","g","featureValue","O","equalsNull","applyLike","b","ensureArray","T","applyIn","I","currentDate","setHours","makeSqlInterval","createFromValueAndQualifer","convertInterval","valueInMilliseconds","currentTimestamp","compare","x","calculate","F","makeComparable","E","lookup","between","notbetween","ternaryNot","S","ternaryAnd","w","ternaryOr","y","m","constructor","fieldsIndex","datefields","parameters","_hasDateFunctions","parseTree","parse","referencedFieldNames","_extractExpressionInfo","create","fieldNames","testSet","k","map","getAttribute","_evaluateNode","attributes","calculateValue","calculateValueCompiled","_compiledVersion","_compileMe","testFeature","testFeatureCompiled","hasDateFunctions","_visitAll","type","has","name","toLowerCase","getFunctions","add","from","getExpressions","Map","args","value","column","set","aggregateType","field","values","getVariables","evaluateNodeToJavaScript","Function","bind","get","push","operand","clauses","format","else","expr","left","right","JSON","stringify","qualifier","op","operator","Error","escape","_","getTime","N","mode","exec","isArray","J","A","D","Normal","charAt","Escaped","includes","RegExp","test","valueOf","createFromMilliseconds","M","WhereClause","defaultAttributeAdapter"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport e from\"../has.js\";import{isAggregate as t,aggregateFunction as a}from\"./AggregateFunctions.js\";import{SqlInterval as r,isStandardized as s,evaluateFunction as n}from\"./StandardizedFunctions.js\";import{WhereGrammar as i}from\"./WhereGrammar.js\";const l=/^(\\d{4})-(\\d{1,2})-(\\d{1,2})$/,u=/^(\\d{4})-(\\d{1,2})-(\\d{1,2}) (\\d{1,2}):(\\d{1,2}):(\\d{1,2}(\\.[0-9]+)?)$/,o=/^(\\d{4})-(\\d{1,2})-(\\d{1,2}) (\\d{1,2}):(\\d{1,2}):(\\d{1,2}(\\.[0-9]+)?)(\\+|\\-)(\\d{1,2}):(\\d{1,2})$/,c=/^(\\d{4})-(\\d{1,2})-(\\d{1,2}) (\\d{1,2}):(\\d{1,2})(\\+|\\-)(\\d{1,2}):(\\d{1,2})$/,h=/^(\\d{4})-(\\d{1,2})-(\\d{1,2}) (\\d{1,2}):(\\d{1,2})$/,d=new Set([\"current_timestamp\",\"current_date\",\"current_time\"]);function p(e,t){return(e+=\"\").length>=t?e:new Array(t-e.length+1).join(\"0\")+e}function v(e,t,a=\"0\",r=\"0\",s=\"0\",n=\"0\",i=\"\",l=\"0\",u=\"0\"){if(\"+\"===i||\"-\"===i){const o=`${p(parseInt(e,10),4)}-${p(parseInt(t,10),2)}-${p(parseInt(a,10),2)}`;let c=\"\";parseFloat(n)<10&&(c=\"0\");const h=`${p(parseInt(r,10),2)}:${p(parseInt(s,10),2)}:${c+parseFloat(n).toString()}`,d=`${i}${p(parseInt(l,10),2)}:${p(parseInt(u,10),2)}`;return new Date(o+\"T\"+h+d)}return new Date(parseInt(e,10),parseInt(t,10)-1,parseInt(a,10),parseInt(r,10),parseInt(s,10),parseFloat(n))}class f{static makeBool(e){return g(e)}static featureValue(e,t,a,r){return O(e,t,a,r)}static equalsNull(e){return null===e}static applyLike(e,t,a){return b(e,t,a)}static ensureArray(e){return T(e)}static applyIn(e,t){return I(e,t)}static currentDate(){const e=new Date;return e.setHours(0,0,0,0),e}static makeSqlInterval(e,t,a){return r.createFromValueAndQualifer(e,t,a)}static convertInterval(e){return e instanceof r?e.valueInMilliseconds():e}static currentTimestamp(){return new Date}static compare(e,t,a){return x(e,t,a)}static calculate(e,t,a){return F(e,t,a)}static makeComparable(e){return E(e)}static evaluateFunction(e,t){return n(e,t)}static lookup(e,t){const a=t[e];return void 0===a?null:a}static between(e,t){return null==e||null==t[0]||null==t[1]?null:e>=t[0]&&e<=t[1]}static notbetween(e,t){return null==e||null==t[0]||null==t[1]?null:e<t[0]||e>t[1]}static ternaryNot(e){return S(e)}static ternaryAnd(e,t){return w(e,t)}static ternaryOr(e,t){return y(e,t)}}class m{constructor(e,t){this.fieldsIndex=t,this.datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=i.parse(e);const{isStandardized:a,isAggregate:r,referencedFieldNames:s}=this._extractExpressionInfo(t);this.referencedFieldNames=s,this.isStandardized=a,this.isAggregate=r}static create(e,t){return new m(e,t)}get fieldNames(){return this.referencedFieldNames}testSet(e,t=k){const a={};for(const r of this.fieldNames)a[r]=e.map((e=>t.getAttribute(e,r)));return!!this._evaluateNode(this.parseTree,{attributes:a},k)}calculateValue(e,t=k){const a=this._evaluateNode(this.parseTree,e,t);return a instanceof r?a.valueInMilliseconds()/864e5:a}calculateValueCompiled(t,a=k){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(t,this.parameters,a,this.datefields):e(\"esri-csp-restrictions\")?this.calculateValue(t,a):(this._compileMe(),this.parseTree._compiledVersion(t,this.parameters,a,this.datefields))}testFeature(e,t=k){return!!this._evaluateNode(this.parseTree,e,t)}testFeatureCompiled(t,a=k){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(t,this.parameters,a,this.datefields):e(\"esri-csp-restrictions\")?this.testFeature(t,a):(this._compileMe(),!!this.parseTree._compiledVersion(t,this.parameters,a,this.datefields))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,(e=>{\"current_time\"===e.type?this._hasDateFunctions=!0:\"function\"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||d.has(e.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const e=new Set;return this._visitAll(this.parseTree,(t=>{\"function\"===t.type&&e.add(t.name.toLowerCase())})),Array.from(e)}getExpressions(){const e=new Map;return this._visitAll(this.parseTree,(t=>{if(\"function\"===t.type){const a=t.name.toLowerCase(),r=t.args.value[0];if(\"column_ref\"===r.type){const t=r.column,s=`${a}-${t}`;e.has(s)||e.set(s,{aggregateType:a,field:t})}}})),[...e.values()]}getVariables(){const e=new Set;return this._visitAll(this.parseTree,(t=>{\"param\"===t.type&&e.add(t.value.toLowerCase())})),Array.from(e)}_compileMe(){const e=\"return this.convertInterval(\"+this.evaluateNodeToJavaScript(this.parseTree)+\")\";this.parseTree._compiledVersion=new Function(\"feature\",\"lookups\",\"attributeAdapter\",\"datefields\",e).bind(f)}_extractExpressionInfo(e){const a=[],r=new Set;let n=!0,i=!0;return this._visitAll(this.parseTree,(l=>{switch(l.type){case\"column_ref\":{const t=e.get(l.column);let s,n;t?s=n=t.name:(n=l.column,s=n.toLowerCase()),!t||\"date\"!==t.type&&\"esriFieldTypeDate\"!==t.type||(this.datefields[t.name]=1),r.has(s)||(r.add(s),a.push(n)),l.column=n;break}case\"function\":{const{name:e,args:a}=l,r=a.value.length;n&&(n=s(e,r)),i&&(i=t(e,r));break}}})),{referencedFieldNames:Array.from(a),isStandardized:n,isAggregate:i}}_visitAll(e,t){if(null!=e)switch(t(e),e.type){case\"when_clause\":this._visitAll(e.operand,t),this._visitAll(e.value,t);break;case\"case_expression\":for(const a of e.clauses)this._visitAll(a,t);\"simple\"===e.format&&this._visitAll(e.operand,t),null!==e.else&&this._visitAll(e.else,t);break;case\"expr_list\":for(const a of e.value)this._visitAll(a,t);break;case\"unary_expr\":this._visitAll(e.expr,t);break;case\"binary_expr\":this._visitAll(e.left,t),this._visitAll(e.right,t);break;case\"function\":this._visitAll(e.args,t)}}evaluateNodeToJavaScript(e){switch(e.type){case\"interval\":return\"this.makeSqlInterval(\"+this.evaluateNodeToJavaScript(e.value)+\", \"+JSON.stringify(e.qualifier)+\",\"+JSON.stringify(e.op)+\")\";case\"case_expression\":{let t=\"\";if(\"simple\"===e.format){const a=\"this.makeComparable(\"+this.evaluateNodeToJavaScript(e.operand)+\")\";t=\"( \";for(let r=0;r<e.clauses.length;r++)t+=\" (\"+a+\" === this.makeComparable(\"+this.evaluateNodeToJavaScript(e.clauses[r].operand)+\")) ? (\"+this.evaluateNodeToJavaScript(e.clauses[r].value)+\") : \";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+=\"null\",t+=\" )\"}else{t=\"( \";for(let a=0;a<e.clauses.length;a++)t+=\" this.makeBool(\"+this.evaluateNodeToJavaScript(e.clauses[a].operand)+\")===true ? (\"+this.evaluateNodeToJavaScript(e.clauses[a].value)+\") : \";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+=\"null\",t+=\" )\"}return t}case\"param\":return\"this.lookup(\"+JSON.stringify(e.value.toLowerCase())+\",lookups)\";case\"expr_list\":{let t=\"[\";for(const a of e.value)\"[\"!==t&&(t+=\",\"),t+=this.evaluateNodeToJavaScript(a);return t+=\"]\",t}case\"unary_expr\":return\"this.ternaryNot(\"+this.evaluateNodeToJavaScript(e.expr)+\")\";case\"binary_expr\":switch(e.operator){case\"AND\":return\"this.ternaryAnd(\"+this.evaluateNodeToJavaScript(e.left)+\",\"+this.evaluateNodeToJavaScript(e.right)+\" )\";case\"OR\":return\"this.ternaryOr(\"+this.evaluateNodeToJavaScript(e.left)+\",\"+this.evaluateNodeToJavaScript(e.right)+\" )\";case\"IS\":if(\"null\"!==e.right.type)throw new Error(\"Unsupported RHS for IS\");return\"this.equalsNull(\"+this.evaluateNodeToJavaScript(e.left)+\")\";case\"ISNOT\":if(\"null\"!==e.right.type)throw new Error(\"Unsupported RHS for IS\");return\"(!(this.equalsNull(\"+this.evaluateNodeToJavaScript(e.left)+\")))\";case\"IN\":return\"this.applyIn(\"+this.evaluateNodeToJavaScript(e.left)+\",this.ensureArray(\"+this.evaluateNodeToJavaScript(e.right)+\"))\";case\"NOT IN\":return\"this.ternaryNot(this.applyIn(\"+this.evaluateNodeToJavaScript(e.left)+\",this.ensureArray(\"+this.evaluateNodeToJavaScript(e.right)+\")))\";case\"BETWEEN\":return\"this.between(\"+this.evaluateNodeToJavaScript(e.left)+\",\"+this.evaluateNodeToJavaScript(e.right)+\")\";case\"NOTBETWEEN\":return\"this.notbetween(\"+this.evaluateNodeToJavaScript(e.left)+\",\"+this.evaluateNodeToJavaScript(e.right)+\")\";case\"LIKE\":return\"this.applyLike(\"+this.evaluateNodeToJavaScript(e.left)+\",\"+this.evaluateNodeToJavaScript(e.right)+\",\"+JSON.stringify(e.escape)+\")\";case\"NOT LIKE\":return\"this.ternaryNot(this.applyLike(\"+this.evaluateNodeToJavaScript(e.left)+\",\"+this.evaluateNodeToJavaScript(e.right)+\",\"+JSON.stringify(e.escape)+\"))\";case\"<>\":case\"<\":case\">\":case\">=\":case\"<=\":case\"=\":return\"this.compare(\"+JSON.stringify(e.operator)+\",\"+this.evaluateNodeToJavaScript(e.left)+\",\"+this.evaluateNodeToJavaScript(e.right)+\")\";case\"*\":case\"-\":case\"+\":case\"/\":return\"this.calculate(\"+JSON.stringify(e.operator)+\",\"+this.evaluateNodeToJavaScript(e.left)+\",\"+this.evaluateNodeToJavaScript(e.right)+\")\"}throw new Error(\"Not Supported Operator \"+e.operator);case\"null\":case\"bool\":case\"string\":case\"number\":return JSON.stringify(e.value);case\"date\":return\"(new Date(\"+_(e.value).getTime().toString()+\"))\";case\"timestamp\":return\"(new Date(\"+N(e.value).getTime().toString()+\"))\";case\"current_time\":return\"date\"===e.mode?\"this.currentDate()\":\"this.currentTimestamp()\";case\"column_ref\":return\"this.featureValue(feature,\"+JSON.stringify(e.column)+\",datefields,attributeAdapter)\";case\"function\":return\"this.evaluateFunction(\"+JSON.stringify(e.name)+\",\"+this.evaluateNodeToJavaScript(e.args)+\")\"}throw new Error(\"Unsupported sql syntax \"+e.type)}_evaluateNode(e,t,s){switch(e.type){case\"interval\":{const a=this._evaluateNode(e.value,t,s);return r.createFromValueAndQualifer(a,e.qualifier,e.op)}case\"case_expression\":if(\"simple\"===e.format){const a=E(this._evaluateNode(e.operand,t,s));for(let r=0;r<e.clauses.length;r++)if(a===E(this._evaluateNode(e.clauses[r].operand,t,s)))return this._evaluateNode(e.clauses[r].value,t,s);if(null!==e.else)return this._evaluateNode(e.else,t,s)}else{for(let a=0;a<e.clauses.length;a++)if(g(this._evaluateNode(e.clauses[a].operand,t,s)))return this._evaluateNode(e.clauses[a].value,t,s);if(null!==e.else)return this._evaluateNode(e.else,t,s)}return null;case\"param\":return this.parameters[e.value.toLowerCase()];case\"expr_list\":{const a=[];for(const r of e.value)a.push(this._evaluateNode(r,t,s));return a}case\"unary_expr\":return S(this._evaluateNode(e.expr,t,s));case\"binary_expr\":switch(e.operator){case\"AND\":return w(this._evaluateNode(e.left,t,s),this._evaluateNode(e.right,t,s));case\"OR\":return y(this._evaluateNode(e.left,t,s),this._evaluateNode(e.right,t,s));case\"IS\":if(\"null\"!==e.right.type)throw new Error(\"Unsupported RHS for IS\");return null===this._evaluateNode(e.left,t,s);case\"ISNOT\":if(\"null\"!==e.right.type)throw new Error(\"Unsupported RHS for IS\");return null!==this._evaluateNode(e.left,t,s);case\"IN\":{const a=T(this._evaluateNode(e.right,t,s));return I(this._evaluateNode(e.left,t,s),a)}case\"NOT IN\":{const a=T(this._evaluateNode(e.right,t,s));return S(I(this._evaluateNode(e.left,t,s),a))}case\"BETWEEN\":{const a=this._evaluateNode(e.left,t,s),r=this._evaluateNode(e.right,t,s);return null==a||null==r[0]||null==r[1]?null:a>=E(r[0])&&a<=E(r[1])}case\"NOTBETWEEN\":{const a=this._evaluateNode(e.left,t,s),r=this._evaluateNode(e.right,t,s);return null==a||null==r[0]||null==r[1]?null:a<E(r[0])||a>E(r[1])}case\"LIKE\":return b(this._evaluateNode(e.left,t,s),this._evaluateNode(e.right,t,s),e.escape);case\"NOT LIKE\":return S(b(this._evaluateNode(e.left,t,s),this._evaluateNode(e.right,t,s),e.escape));case\"<>\":case\"<\":case\">\":case\">=\":case\"<=\":case\"=\":return x(e.operator,this._evaluateNode(e.left,t,s),this._evaluateNode(e.right,t,s));case\"-\":case\"+\":case\"*\":case\"/\":return F(e.operator,this._evaluateNode(e.left,t,s),this._evaluateNode(e.right,t,s))}case\"null\":case\"bool\":case\"string\":case\"number\":return e.value;case\"date\":return _(e.value);case\"timestamp\":return N(e.value);case\"current_time\":{const t=new Date;return\"date\"===e.mode&&t.setHours(0,0,0,0),t}case\"column_ref\":return O(t,e.column,this.datefields,s);case\"function\":{const r=this._evaluateNode(e.args,t,s);return this.isAggregate?a(e.name,r):n(e.name,r)}}throw new Error(\"Unsupported sql syntax \"+e.type)}}function N(e){let t=u.exec(e);if(null!==t){const[,e,a,r,s,n,i]=t;return v(e,a,r,s,n,i)}if(t=o.exec(e),null!==t){const[,e,a,r,s,n,i,l,u,o]=t;return v(e,a,r,s,n,i,l,u,o)}if(t=c.exec(e),null!==t){const[,e,a,r,s,n,i,l,u]=t;return v(e,a,r,s,n,\"0\",i,l,u)}if(t=h.exec(e),null!==t){const[,e,a,r,s,n]=t;return v(e,a,r,s,n)}if(t=l.exec(e),null!==t){const[,e,a,r]=t;return v(e,a,r)}throw new Error(\"SQL Invalid Timestamp\")}function _(e){const t=l.exec(e);if(null===t)throw new Error(\"SQL Invalid Date\");const[,a,r,s]=t;return new Date(parseInt(a,10),parseInt(r,10)-1,parseInt(s,10))}function g(e){return!0===e}function T(e){return Array.isArray(e)?e:[e]}function S(e){return null!==e?!0!==e:null}function w(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function y(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function I(e,t){if(null==e)return null;let a=!1;for(const r of t)if(null==r)a=null;else if(e===r){a=!0;break}return a}const J=\"-[]/{}()*+?.\\\\^$|\";var A;function D(e,t){const a=t;let r=\"\",s=A.Normal;for(let n=0;n<e.length;n++){const t=e.charAt(n);switch(s){case A.Normal:t===a?s=A.Escaped:J.includes(t)?r+=\"\\\\\"+t:r+=\"%\"===t?\".*\":\"_\"===t?\".\":t;break;case A.Escaped:J.includes(t)?r+=\"\\\\\"+t:r+=t,s=A.Normal}}return new RegExp(\"^\"+r+\"$\",\"m\")}function b(e,t,a){if(null==e)return null;return D(t,a).test(e)}function E(e){return e instanceof Date?e.valueOf():e}function x(e,t,a){if(null==t||null==a)return null;const r=E(t),s=E(a);switch(e){case\"<>\":return r!==s;case\"=\":return r===s;case\">\":return r>s;case\"<\":return r<s;case\">=\":return r>=s;case\"<=\":return r<=s}}function F(e,t,a){if(t instanceof r)if(a instanceof Date)switch(e){case\"+\":return new Date(t.valueInMilliseconds()+a.getTime());case\"-\":return t.valueInMilliseconds()-a.getTime();case\"*\":return t.valueInMilliseconds()*a.getTime();case\"/\":return t.valueInMilliseconds()/a.getTime()}else if(a instanceof r)switch(e){case\"+\":return r.createFromMilliseconds(t.valueInMilliseconds()+a.valueInMilliseconds());case\"-\":return r.createFromMilliseconds(t.valueInMilliseconds()-a.valueInMilliseconds());case\"*\":return t.valueInMilliseconds()*a.valueInMilliseconds();case\"/\":return t.valueInMilliseconds()/a.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(a instanceof r)if(t instanceof Date)switch(e){case\"+\":return new Date(a.valueInMilliseconds()+t.getTime());case\"-\":return new Date(t.getTime()-a.valueInMilliseconds());case\"*\":return t.getTime()*a.valueInMilliseconds();case\"/\":return t.getTime()/a.valueInMilliseconds()}else a=a.valueInMilliseconds();else if(t instanceof Date&&\"number\"==typeof a)switch(a=24*a*60*60*1e3,t=t.getTime(),e){case\"+\":return new Date(t+a);case\"-\":return new Date(t-a);case\"*\":return new Date(t*a);case\"/\":return new Date(t/a)}else if(a instanceof Date&&\"number\"==typeof t)switch(t=24*t*60*60*1e3,a=a.getTime(),e){case\"+\":return new Date(t+a);case\"-\":return new Date(t-a);case\"*\":return new Date(t*a);case\"/\":return new Date(t/a)}switch(e){case\"+\":return t+a;case\"-\":return t-a;case\"*\":return t*a;case\"/\":return t/a}}function M(e){return e&&\"object\"==typeof e.attributes}function O(e,t,a,r){const s=r.getAttribute(e,t);return null!=s&&1===a[t]?new Date(s):s}!function(e){e[e.Normal=0]=\"Normal\",e[e.Escaped=1]=\"Escaped\"}(A||(A={}));const k={getAttribute:(e,t)=>(M(e)?e.attributes:e)[t]};export{m as WhereClause,k as defaultAttributeAdapter};\n"]},"metadata":{},"sourceType":"module"}