{"ast":null,"code":"/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport { SymbolHelper as e, slsDashToTemplateArray as t, CIMSymbolHelper as r } from \"./CIMSymbolHelper.js\";\nimport a from \"./Rect.js\";\nimport { getSDFInfo as i, buildSDF as n } from \"./SDFHelper.js\";\nimport { resampleHermite as s } from \"./utils.js\";\nconst o = 512;\n\nclass m {\n  constructor(e) {\n    this._resourceManager = e;\n  }\n\n  dispose() {\n    this._rasterizationCanvas = null;\n  }\n\n  rasterizeJSONResource(s, o, m) {\n    if (this._rasterizationCanvas || (this._rasterizationCanvas = document.createElement(\"canvas\")), \"simple-fill\" === s.type || \"esriSFS\" === s.type) {\n      const [t, r, a] = e.rasterizeSimpleFill(this._rasterizationCanvas, s.style, o);\n      return {\n        size: [r, a],\n        image: new Uint32Array(t.buffer),\n        sdf: !1,\n        simplePattern: !0,\n        anchorX: 0,\n        anchorY: 0\n      };\n    }\n\n    if (\"simple-line\" === s.type || \"esriSLS\" === s.type || \"line\" === s.type && s.dashTemplate) {\n      let r, a;\n      if (\"simple-line\" === s.type || \"esriSLS\" === s.type) switch (r = t(s.style, s.cap), s.cap) {\n        case \"butt\":\n          a = \"Butt\";\n          break;\n\n        case \"square\":\n          a = \"Square\";\n          break;\n\n        default:\n          a = \"Round\";\n      } else r = s.dashTemplate, a = s.cim.capStyle;\n      const [i, n, o] = e.rasterizeSimpleLine(r, a);\n      return {\n        size: [n, o],\n        image: new Uint32Array(i.buffer),\n        sdf: !0,\n        simplePattern: !0,\n        anchorX: 0,\n        anchorY: 0\n      };\n    }\n\n    let l, c, f;\n\n    if (\"simple-marker\" === s.type || \"esriSMS\" === s.type || \"line-marker\" === s.type ? (l = r.fromSimpleMarker(s), f = i(l)) : s.cim && \"CIMHatchFill\" === s.cim.type ? (l = r.fromCIMHatchFill(s.cim), c = new a(l.frame.xmin, -l.frame.ymax, l.frame.xmax - l.frame.xmin, l.frame.ymax - l.frame.ymin)) : s.cim.markerPlacement && \"CIMMarkerPlacementInsidePolygon\" === s.cim.markerPlacement.type ? (l = r.fromCIMInsidePolygon(s.cim), c = new a(l.frame.xmin, -l.frame.ymax, l.frame.xmax - l.frame.xmin, l.frame.ymax - l.frame.ymin)) : (l = s.cim, f = i(l)), f && !m) {\n      const [e, t, r] = n(f);\n      return e ? {\n        size: [t, r],\n        image: new Uint32Array(e.buffer),\n        sdf: !0,\n        simplePattern: !0,\n        anchorX: 0,\n        anchorY: 0\n      } : null;\n    }\n\n    const [p, h, u, y, d] = r.rasterize(this._rasterizationCanvas, l, c, this._resourceManager, !m);\n    return p ? {\n      size: [h, u],\n      image: new Uint32Array(p.buffer),\n      sdf: !1,\n      simplePattern: !1,\n      anchorX: y,\n      anchorY: d\n    } : null;\n  }\n\n  rasterizeImageResource(e, t, r, a) {\n    this._rasterizationCanvas || (this._rasterizationCanvas = document.createElement(\"canvas\")), this._rasterizationCanvas.width = e, this._rasterizationCanvas.height = t;\n\n    const i = this._rasterizationCanvas.getContext(\"2d\");\n\n    r instanceof ImageData ? i.putImageData(r, 0, 0) : (r.setAttribute(\"width\", `${e}px`), r.setAttribute(\"height\", `${t}px`), i.drawImage(r, 0, 0, e, t));\n    const n = i.getImageData(0, 0, e, t),\n          m = new Uint8Array(n.data);\n    if (a) for (const s of a) if (s && s.oldColor && 4 === s.oldColor.length && s.newColor && 4 === s.newColor.length) {\n      const [e, t, r, a] = s.oldColor,\n            [i, n, o, l] = s.newColor;\n      if (e === i && t === n && r === o && a === l) continue;\n\n      for (let s = 0; s < m.length; s += 4) e === m[s] && t === m[s + 1] && r === m[s + 2] && a === m[s + 3] && (m[s] = i, m[s + 1] = n, m[s + 2] = o, m[s + 3] = l);\n    }\n    let l;\n\n    for (let s = 0; s < m.length; s += 4) l = m[s + 3] / 255, m[s] = m[s] * l, m[s + 1] = m[s + 1] * l, m[s + 2] = m[s + 2] * l;\n\n    let c = m,\n        f = e,\n        p = t;\n    const h = o;\n\n    if (f >= h || p >= h) {\n      const r = f / p;\n      r > 1 ? (f = h, p = Math.round(h / r)) : (p = h, f = Math.round(h * r)), c = new Uint8Array(4 * f * p);\n      const a = new Uint8ClampedArray(c.buffer);\n      s(m, e, t, a, f, p, !1);\n    }\n\n    return {\n      size: [f, p],\n      image: new Uint32Array(c.buffer),\n      sdf: !1,\n      simplePattern: !1,\n      anchorX: 0,\n      anchorY: 0\n    };\n  }\n\n}\n\nexport { m as default };","map":{"version":3,"sources":["D:/Github/CUSP_DataBase/CUSP_DB/src/main/gis/node_modules/@arcgis/core/symbols/cim/Rasterizer.js"],"names":["SymbolHelper","e","slsDashToTemplateArray","t","CIMSymbolHelper","r","a","getSDFInfo","i","buildSDF","n","resampleHermite","s","o","m","constructor","_resourceManager","dispose","_rasterizationCanvas","rasterizeJSONResource","document","createElement","type","rasterizeSimpleFill","style","size","image","Uint32Array","buffer","sdf","simplePattern","anchorX","anchorY","dashTemplate","cap","cim","capStyle","rasterizeSimpleLine","l","c","f","fromSimpleMarker","fromCIMHatchFill","frame","xmin","ymax","xmax","ymin","markerPlacement","fromCIMInsidePolygon","p","h","u","y","d","rasterize","rasterizeImageResource","width","height","getContext","ImageData","putImageData","setAttribute","drawImage","getImageData","Uint8Array","data","oldColor","length","newColor","Math","round","Uint8ClampedArray","default"],"mappings":"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","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nimport{SymbolHelper as e,slsDashToTemplateArray as t,CIMSymbolHelper as r}from\"./CIMSymbolHelper.js\";import a from\"./Rect.js\";import{getSDFInfo as i,buildSDF as n}from\"./SDFHelper.js\";import{resampleHermite as s}from\"./utils.js\";const o=512;class m{constructor(e){this._resourceManager=e}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(s,o,m){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===s.type||\"esriSFS\"===s.type){const[t,r,a]=e.rasterizeSimpleFill(this._rasterizationCanvas,s.style,o);return{size:[r,a],image:new Uint32Array(t.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===s.type||\"esriSLS\"===s.type||\"line\"===s.type&&s.dashTemplate){let r,a;if(\"simple-line\"===s.type||\"esriSLS\"===s.type)switch(r=t(s.style,s.cap),s.cap){case\"butt\":a=\"Butt\";break;case\"square\":a=\"Square\";break;default:a=\"Round\"}else r=s.dashTemplate,a=s.cim.capStyle;const[i,n,o]=e.rasterizeSimpleLine(r,a);return{size:[n,o],image:new Uint32Array(i.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let l,c,f;if(\"simple-marker\"===s.type||\"esriSMS\"===s.type||\"line-marker\"===s.type?(l=r.fromSimpleMarker(s),f=i(l)):s.cim&&\"CIMHatchFill\"===s.cim.type?(l=r.fromCIMHatchFill(s.cim),c=new a(l.frame.xmin,-l.frame.ymax,l.frame.xmax-l.frame.xmin,l.frame.ymax-l.frame.ymin)):s.cim.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===s.cim.markerPlacement.type?(l=r.fromCIMInsidePolygon(s.cim),c=new a(l.frame.xmin,-l.frame.ymax,l.frame.xmax-l.frame.xmin,l.frame.ymax-l.frame.ymin)):(l=s.cim,f=i(l)),f&&!m){const[e,t,r]=n(f);return e?{size:[t,r],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[p,h,u,y,d]=r.rasterize(this._rasterizationCanvas,l,c,this._resourceManager,!m);return p?{size:[h,u],image:new Uint32Array(p.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:d}:null}rasterizeImageResource(e,t,r,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext(\"2d\");r instanceof ImageData?i.putImageData(r,0,0):(r.setAttribute(\"width\",`${e}px`),r.setAttribute(\"height\",`${t}px`),i.drawImage(r,0,0,e,t));const n=i.getImageData(0,0,e,t),m=new Uint8Array(n.data);if(a)for(const s of a)if(s&&s.oldColor&&4===s.oldColor.length&&s.newColor&&4===s.newColor.length){const[e,t,r,a]=s.oldColor,[i,n,o,l]=s.newColor;if(e===i&&t===n&&r===o&&a===l)continue;for(let s=0;s<m.length;s+=4)e===m[s]&&t===m[s+1]&&r===m[s+2]&&a===m[s+3]&&(m[s]=i,m[s+1]=n,m[s+2]=o,m[s+3]=l)}let l;for(let s=0;s<m.length;s+=4)l=m[s+3]/255,m[s]=m[s]*l,m[s+1]=m[s+1]*l,m[s+2]=m[s+2]*l;let c=m,f=e,p=t;const h=o;if(f>=h||p>=h){const r=f/p;r>1?(f=h,p=Math.round(h/r)):(p=h,f=Math.round(h*r)),c=new Uint8Array(4*f*p);const a=new Uint8ClampedArray(c.buffer);s(m,e,t,a,f,p,!1)}return{size:[f,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export{m as default};\n"]},"metadata":{},"sourceType":"module"}