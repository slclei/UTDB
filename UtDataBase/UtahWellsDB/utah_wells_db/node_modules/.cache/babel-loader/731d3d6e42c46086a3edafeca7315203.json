{"ast":null,"code":"var _jsxFileName = \"D:\\\\Github\\\\UTDB\\\\UtDataBase\\\\UtahWellsDB\\\\utah_wells_db\\\\src\\\\useMap\\\\useMap.tsx\",\n    _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState, useRef } from \"react\";\nimport mapboxgl from \"mapbox-gl\";\nimport MapService from \"../services/MapService\";\nimport ReactDOM from \"react-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Popup = _ref => {\n  let {\n    featureName,\n    featureNumber\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"popup\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"popField\",\n      children: [\"WellName: \", featureName]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"popField\",\n      children: [\"API: \", featureNumber]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 3\n  }, this);\n};\n\n_c = Popup;\nexport const useMap = (ref, mapConfig) => {\n  _s();\n\n  const [map, setMap] = useState(null);\n  const [mapStatus, setMapStatus] = useState({\n    map: {\n      created: false,\n      loaded: false\n    },\n    sources: {\n      loaded: false,\n      added: false\n    },\n    layers: {\n      loaded: false,\n      added: false\n    }\n  });\n  const [sources, setSources] = useState([]);\n  const [layers, setLayers] = useState([]);\n  const popUpRef = useRef(new mapboxgl.Popup({\n    offset: 15\n  }));\n  useEffect(() => {\n    if (ref !== null && ref !== void 0 && ref.current && !mapStatus.map.created) {\n      var _ref$current;\n\n      const newMap = new mapboxgl.Map({\n        container: (_ref$current = ref.current) !== null && _ref$current !== void 0 ? _ref$current : '',\n        ...mapConfig\n      });\n      setMap(newMap);\n      setMapStatus(s => ({ ...s,\n        map: { ...s.map,\n          created: true\n        }\n      }));\n      newMap.on(\"load\", () => {\n        setMapStatus(s => ({ ...s,\n          map: { ...s.map,\n            loaded: true\n          }\n        }));\n      });\n    }\n  }, [ref, mapConfig, mapStatus.map.created]);\n  const loadMapData = useCallback(() => {\n    const shouldLoadData = !!map && mapStatus.map.loaded && !mapStatus.sources.loaded;\n\n    async function loadData() {\n      const fetchedSources = await MapService.getSources();\n      const fetchedLayers = await MapService.getLayers();\n      setSources(fetchedSources);\n      setLayers(fetchedLayers);\n\n      if (!mapStatus.sources.added) {\n        fetchedSources.forEach(source => {\n          const cleanedSource = { ...source\n          };\n          delete cleanedSource.id;\n          map.addSource(source.id, cleanedSource);\n        });\n\n        if (!mapStatus.layers.added) {\n          fetchedLayers.forEach(layer => {\n            map.addLayer(layer);\n          });\n        }\n      }\n\n      setMapStatus(s => ({ ...s,\n        sources: {\n          loaded: true,\n          added: true\n        },\n        layers: {\n          loaded: true,\n          added: true\n        }\n      }));\n      /**\r\n         * Event handler for defining what happens when a user clicks on the map\r\n         * In this example, we are checking if the user has clicked on one or more feature layers\r\n         * If they have, we want to render a popup with the data for the selected\r\n         * bus feature\r\n         * Else, do nothing\r\n         */\n      //build  a Popup component used to render a map popup with information for chosen feature\n\n      map.on(\"click\", e => {\n        const features = map.queryRenderedFeatures(e.point, {\n          layers: [\"wellsInUTLayer\"]\n        });\n\n        if (features.length > 0) {\n          const feature = features[0];\n          {\n            var _feature$properties, _feature$properties2;\n\n            // create popup node\n            const popupNode = document.createElement(\"div\");\n            ReactDOM.render( /*#__PURE__*/_jsxDEV(Popup, {\n              featureName: feature === null || feature === void 0 ? void 0 : (_feature$properties = feature.properties) === null || _feature$properties === void 0 ? void 0 : _feature$properties.wellname,\n              featureNumber: feature === null || feature === void 0 ? void 0 : (_feature$properties2 = feature.properties) === null || _feature$properties2 === void 0 ? void 0 : _feature$properties2.api\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 17\n            }, this), popupNode);\n            popUpRef.current.setLngLat(e.lngLat).setDOMContent(popupNode).addTo(map);\n          }\n        }\n      }); // Change the cursor to a pointer when the mouse is over the places layer.\n\n      map.on('mouseenter', \"wellsInUTLayer\", () => {\n        map.getCanvas().style.cursor = 'pointer';\n      }); // Change it back to a pointer when it leaves.\n\n      map.on('mouseleave', \"wellsInUTLayer\", () => {\n        map.getCanvas().style.cursor = '';\n      });\n      map.on('mousemove', e => {\n        const features = map.queryRenderedFeatures(e.point, {\n          layers: [\"wellsInUTLayer\"]\n        }); // Limit the number of properties we're displaying for\n        // legibility and performance\n\n        const displayProperties = ['type', 'properties'];\n        const displayFeatures = features.map(feat => {\n          const displayFeat = {};\n          displayProperties.forEach(prop => {\n            displayFeat[prop] = feat[prop];\n          });\n          return displayFeat;\n        }); // Write object as string with an indent of two spaces.\n\n        document.getElementById('features').innerHTML = JSON.stringify(displayFeatures, null, 2);\n      });\n    }\n\n    if (shouldLoadData) {\n      loadData();\n    }\n  }, [map, mapStatus.map.loaded, mapStatus.sources, mapStatus.layers]);\n\n  const updateLayerVisibility = (id, visible) => {\n    if (!!map && !!map.getLayer(id)) {\n      const visibleValue = visible ? \"visible\" : \"none\";\n      map.setLayoutProperty(id, \"visibility\", visibleValue);\n      setLayers(s => {\n        return s.map(layer => {\n          if (layer.id === id) {\n            return { ...layer,\n              layout: { ...layer.layout,\n                visibility: visibleValue\n              }\n            };\n          }\n\n          return layer;\n        });\n      });\n    }\n  };\n\n  useEffect(() => {\n    loadMapData();\n  }, [loadMapData]);\n  return {\n    layers,\n    map,\n    sources,\n    updateLayerVisibility\n  };\n};\n\n_s(useMap, \"FJ4GP6JxVgHij55pa/qLtdqX3dE=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"Popup\");","map":{"version":3,"sources":["D:/Github/UTDB/UtDataBase/UtahWellsDB/utah_wells_db/src/useMap/useMap.tsx"],"names":["useCallback","useEffect","useState","useRef","mapboxgl","MapService","ReactDOM","Popup","featureName","featureNumber","useMap","ref","mapConfig","map","setMap","mapStatus","setMapStatus","created","loaded","sources","added","layers","setSources","setLayers","popUpRef","offset","current","newMap","Map","container","s","on","loadMapData","shouldLoadData","loadData","fetchedSources","getSources","fetchedLayers","getLayers","forEach","source","cleanedSource","id","addSource","layer","addLayer","e","features","queryRenderedFeatures","point","length","feature","popupNode","document","createElement","render","properties","wellname","api","setLngLat","lngLat","setDOMContent","addTo","getCanvas","style","cursor","displayProperties","displayFeatures","feat","displayFeat","prop","getElementById","innerHTML","JSON","stringify","updateLayerVisibility","visible","getLayer","visibleValue","setLayoutProperty","layout","visibility"],"mappings":";;;AAAA,SAAQA,WAAR,EAAqBC,SAArB,EAAgCC,QAAhC,EAA0CC,MAA1C,QAAuD,OAAvD;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AAEA,OAAOC,QAAP,MAAqB,WAArB;;;AAEA,MAAMC,KAAK,GAAG;AAAA,MAAC;AAAEC,IAAAA,WAAF;AAAeC,IAAAA;AAAf,GAAD;AAAA,sBACZ;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA,4BACE;AAAG,MAAA,SAAS,EAAC,UAAb;AAAA,+BAAmCD,WAAnC;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAG,MAAA,SAAS,EAAC,UAAb;AAAA,0BAA8BC,aAA9B;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADY;AAAA,CAAd;;KAAMF,K;AAON,OAAO,MAAMG,MAAM,GAAG,CAACC,GAAD,EAAWC,SAAX,KAA8B;AAAA;;AAChD,QAAM,CAACC,GAAD,EAAMC,MAAN,IAAgBZ,QAAQ,CAA4B,IAA5B,CAA9B;AACA,QAAM,CAACa,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC;AACzCW,IAAAA,GAAG,EAAE;AACHI,MAAAA,OAAO,EAAE,KADN;AAEHC,MAAAA,MAAM,EAAE;AAFL,KADoC;AAKzCC,IAAAA,OAAO,EAAE;AACPD,MAAAA,MAAM,EAAE,KADD;AAEPE,MAAAA,KAAK,EAAE;AAFA,KALgC;AASzCC,IAAAA,MAAM,EAAE;AACNH,MAAAA,MAAM,EAAE,KADF;AAENE,MAAAA,KAAK,EAAE;AAFD;AATiC,GAAD,CAA1C;AAcA,QAAM,CAACD,OAAD,EAAUG,UAAV,IAAwBpB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACmB,MAAD,EAASE,SAAT,IAAsBrB,QAAQ,CAAkB,EAAlB,CAApC;AACA,QAAMsB,QAAQ,GAAGrB,MAAM,CAAC,IAAIC,QAAQ,CAACG,KAAb,CAAmB;AAAEkB,IAAAA,MAAM,EAAE;AAAV,GAAnB,CAAD,CAAvB;AAEAxB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIU,GAAG,SAAH,IAAAA,GAAG,WAAH,IAAAA,GAAG,CAAEe,OAAL,IAAgB,CAACX,SAAS,CAACF,GAAV,CAAcI,OAAnC,EAA4C;AAAA;;AAC1C,YAAMU,MAAM,GAAG,IAAIvB,QAAQ,CAACwB,GAAb,CAAiB;AAC9BC,QAAAA,SAAS,kBAAElB,GAAG,CAACe,OAAN,uDAAgB,EADK;AAE9B,WAAGd;AAF2B,OAAjB,CAAf;AAIAE,MAAAA,MAAM,CAACa,MAAD,CAAN;AACAX,MAAAA,YAAY,CAAEc,CAAD,KAAQ,EACnB,GAAGA,CADgB;AAEnBjB,QAAAA,GAAG,EAAE,EACH,GAAGiB,CAAC,CAACjB,GADF;AAEHI,UAAAA,OAAO,EAAE;AAFN;AAFc,OAAR,CAAD,CAAZ;AAOAU,MAAAA,MAAM,CAACI,EAAP,CAAU,MAAV,EAAkB,MAAM;AACtBf,QAAAA,YAAY,CAAEc,CAAD,KAAQ,EACnB,GAAGA,CADgB;AAEnBjB,UAAAA,GAAG,EAAE,EACH,GAAGiB,CAAC,CAACjB,GADF;AAEHK,YAAAA,MAAM,EAAE;AAFL;AAFc,SAAR,CAAD,CAAZ;AAOD,OARD;AASD;AACF,GAxBQ,EAwBN,CAACP,GAAD,EAAMC,SAAN,EAAiBG,SAAS,CAACF,GAAV,CAAcI,OAA/B,CAxBM,CAAT;AA0BA,QAAMe,WAAW,GAAGhC,WAAW,CAAC,MAAM;AACpC,UAAMiC,cAAc,GAClB,CAAC,CAACpB,GAAF,IAASE,SAAS,CAACF,GAAV,CAAcK,MAAvB,IAAiC,CAACH,SAAS,CAACI,OAAV,CAAkBD,MADtD;;AAEA,mBAAegB,QAAf,GAA0B;AACxB,YAAMC,cAAmB,GAAG,MAAM9B,UAAU,CAAC+B,UAAX,EAAlC;AACA,YAAMC,aAAkB,GAAG,MAAMhC,UAAU,CAACiC,SAAX,EAAjC;AACAhB,MAAAA,UAAU,CAACa,cAAD,CAAV;AACAZ,MAAAA,SAAS,CAACc,aAAD,CAAT;;AACA,UAAI,CAACtB,SAAS,CAACI,OAAV,CAAkBC,KAAvB,EAA8B;AAC5Be,QAAAA,cAAc,CAACI,OAAf,CAAwBC,MAAD,IAA0B;AAC/C,gBAAMC,aAAa,GAAG,EAAE,GAAGD;AAAL,WAAtB;AACA,iBAAOC,aAAa,CAACC,EAArB;AACA7B,UAAAA,GAAG,CAAC8B,SAAJ,CAAcH,MAAM,CAACE,EAArB,EAAyBD,aAAzB;AACD,SAJD;;AAMA,YAAI,CAAC1B,SAAS,CAACM,MAAV,CAAiBD,KAAtB,EAA6B;AAC3BiB,UAAAA,aAAa,CAACE,OAAd,CAAuBK,KAAD,IAAgB;AACpC/B,YAAAA,GAAG,CAACgC,QAAJ,CAAaD,KAAb;AACD,WAFD;AAGD;AACF;;AACD5B,MAAAA,YAAY,CAAEc,CAAD,KAAQ,EACnB,GAAGA,CADgB;AAEnBX,QAAAA,OAAO,EAAE;AACPD,UAAAA,MAAM,EAAE,IADD;AAEPE,UAAAA,KAAK,EAAE;AAFA,SAFU;AAMnBC,QAAAA,MAAM,EAAE;AACNH,UAAAA,MAAM,EAAE,IADF;AAENE,UAAAA,KAAK,EAAE;AAFD;AANW,OAAR,CAAD,CAAZ;AAYA;AACR;AACA;AACA;AACA;AACA;AACA;AACU;;AAEFP,MAAAA,GAAG,CAACkB,EAAJ,CAAO,OAAP,EAAiBe,CAAD,IAAqC;AACnD,cAAMC,QAAQ,GAAGlC,GAAG,CAACmC,qBAAJ,CAA0BF,CAAC,CAACG,KAA5B,EAAmC;AAClD5B,UAAAA,MAAM,EAAE,CAAC,gBAAD;AAD0C,SAAnC,CAAjB;;AAGA,YAAI0B,QAAQ,CAACG,MAAT,GAAkB,CAAtB,EAAyB;AACvB,gBAAMC,OAAO,GAAGJ,QAAQ,CAAC,CAAD,CAAxB;AACA;AAAA;;AACE;AACA,kBAAMK,SAAS,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAlB;AACAhD,YAAAA,QAAQ,CAACiD,MAAT,eACE,QAAC,KAAD;AACE,cAAA,WAAW,EAAEJ,OAAF,aAAEA,OAAF,8CAAEA,OAAO,CAAEK,UAAX,wDAAE,oBAAqBC,QADpC;AAEE,cAAA,aAAa,EAAEN,OAAF,aAAEA,OAAF,+CAAEA,OAAO,CAAEK,UAAX,yDAAE,qBAAqBE;AAFtC;AAAA;AAAA;AAAA;AAAA,oBADF,EAKEN,SALF;AAOA5B,YAAAA,QAAQ,CAACE,OAAT,CACGiC,SADH,CACab,CAAC,CAACc,MADf,EAEGC,aAFH,CAEiBT,SAFjB,EAGGU,KAHH,CAGSjD,GAHT;AAID;AACF;AACF,OAtBD,EAvCwB,CA8DxB;;AACAA,MAAAA,GAAG,CAACkB,EAAJ,CAAO,YAAP,EAAqB,gBAArB,EAAuC,MAAM;AAC3ClB,QAAAA,GAAG,CAACkD,SAAJ,GAAgBC,KAAhB,CAAsBC,MAAtB,GAA+B,SAA/B;AACD,OAFD,EA/DwB,CAmExB;;AACApD,MAAAA,GAAG,CAACkB,EAAJ,CAAO,YAAP,EAAqB,gBAArB,EAAuC,MAAM;AAC3ClB,QAAAA,GAAG,CAACkD,SAAJ,GAAgBC,KAAhB,CAAsBC,MAAtB,GAA+B,EAA/B;AACD,OAFD;AAIApD,MAAAA,GAAG,CAACkB,EAAJ,CAAO,WAAP,EAAqBe,CAAD,IAAqC;AACvD,cAAMC,QAAQ,GAAGlC,GAAG,CAACmC,qBAAJ,CAA0BF,CAAC,CAACG,KAA5B,EAAmC;AAClD5B,UAAAA,MAAM,EAAE,CAAC,gBAAD;AAD0C,SAAnC,CAAjB,CADuD,CAKvD;AACA;;AACA,cAAM6C,iBAAiB,GAAG,CAC1B,MAD0B,EAE1B,YAF0B,CAA1B;AAKA,cAAMC,eAAe,GAAGpB,QAAQ,CAAClC,GAAT,CAAcuD,IAAD,IAAiC;AACtE,gBAAMC,WAAmC,GAAG,EAA5C;AACAH,UAAAA,iBAAiB,CAAC3B,OAAlB,CAA2B+B,IAAD,IAAU;AACpCD,YAAAA,WAAW,CAACC,IAAD,CAAX,GAAoBF,IAAI,CAACE,IAAD,CAAxB;AACC,WAFD;AAGA,iBAAOD,WAAP;AACC,SANuB,CAAxB,CAZuD,CAoBvD;;AACAhB,QAAAA,QAAQ,CAACkB,cAAT,CAAwB,UAAxB,EAAqCC,SAArC,GAAiDC,IAAI,CAACC,SAAL,CACjDP,eADiD,EAEjD,IAFiD,EAGjD,CAHiD,CAAjD;AAKC,OA1BH;AA2BD;;AACD,QAAIlC,cAAJ,EAAoB;AAClBC,MAAAA,QAAQ;AACT;AACF,GA1G8B,EA0G5B,CAACrB,GAAD,EAAME,SAAS,CAACF,GAAV,CAAcK,MAApB,EAA4BH,SAAS,CAACI,OAAtC,EAA+CJ,SAAS,CAACM,MAAzD,CA1G4B,CAA/B;;AA4GA,QAAMsD,qBAAqB,GAAG,CAACjC,EAAD,EAAUkC,OAAV,KAA2B;AACvD,QAAI,CAAC,CAAC/D,GAAF,IAAS,CAAC,CAACA,GAAG,CAACgE,QAAJ,CAAanC,EAAb,CAAf,EAAiC;AAC/B,YAAMoC,YAAY,GAAGF,OAAO,GAAG,SAAH,GAAe,MAA3C;AACA/D,MAAAA,GAAG,CAACkE,iBAAJ,CAAsBrC,EAAtB,EAA0B,YAA1B,EAAwCoC,YAAxC;AACAvD,MAAAA,SAAS,CAAEO,CAAD,IAAO;AACf,eAAOA,CAAC,CAACjB,GAAF,CAAO+B,KAAD,IAAgB;AAC3B,cAAIA,KAAK,CAACF,EAAN,KAAaA,EAAjB,EAAqB;AACnB,mBAAO,EACL,GAAGE,KADE;AAELoC,cAAAA,MAAM,EAAE,EACN,GAAGpC,KAAK,CAACoC,MADH;AAENC,gBAAAA,UAAU,EAAEH;AAFN;AAFH,aAAP;AAOD;;AACD,iBAAOlC,KAAP;AACD,SAXM,CAAP;AAYD,OAbQ,CAAT;AAcD;AACF,GAnBD;;AAqBA3C,EAAAA,SAAS,CAAC,MAAM;AACd+B,IAAAA,WAAW;AACZ,GAFQ,EAEN,CAACA,WAAD,CAFM,CAAT;AAIA,SAAO;AACLX,IAAAA,MADK;AAELR,IAAAA,GAFK;AAGLM,IAAAA,OAHK;AAILwD,IAAAA;AAJK,GAAP;AAMD,CAzLI;;GAAMjE,M","sourcesContent":["import {useCallback, useEffect, useState, useRef} from \"react\";\r\nimport mapboxgl from \"mapbox-gl\";\r\nimport MapService from \"../services/MapService\";\r\nimport {Sources, Layers} from \"../data/SpatialData\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nconst Popup = ({ featureName, featureNumber}: { featureName: any, featureNumber: any }) => (\r\n  <div className=\"popup\">\r\n    <p className=\"popField\">WellName: {featureName}</p>\r\n    <p className=\"popField\">API: {featureNumber}</p>\r\n  </div>\r\n);\r\n\r\nexport const useMap = (ref: any, mapConfig: any) => {\r\n    const [map, setMap] = useState<typeof ref.current | null>(null);\r\n    const [mapStatus, setMapStatus] = useState({\r\n      map: {\r\n        created: false,\r\n        loaded: false,\r\n      },\r\n      sources: {\r\n        loaded: false,\r\n        added: false,\r\n      },\r\n      layers: {\r\n        loaded: false,\r\n        added: false,\r\n      },\r\n    });\r\n    const [sources, setSources] = useState([]);\r\n    const [layers, setLayers] = useState<typeof Layers[]>([]);\r\n    const popUpRef = useRef(new mapboxgl.Popup({ offset: 15 }));\r\n  \r\n    useEffect(() => {\r\n      if (ref?.current && !mapStatus.map.created) {\r\n        const newMap = new mapboxgl.Map({\r\n          container: ref.current?? '',\r\n          ...mapConfig,\r\n        });\r\n        setMap(newMap);\r\n        setMapStatus((s) => ({\r\n          ...s,\r\n          map: {\r\n            ...s.map,\r\n            created: true,\r\n          },\r\n        }));\r\n        newMap.on(\"load\", () => {\r\n          setMapStatus((s) => ({\r\n            ...s,\r\n            map: {\r\n              ...s.map,\r\n              loaded: true,\r\n            },\r\n          }));\r\n        });\r\n      }\r\n    }, [ref, mapConfig, mapStatus.map.created]);\r\n  \r\n    const loadMapData = useCallback(() => {\r\n      const shouldLoadData =\r\n        !!map && mapStatus.map.loaded && !mapStatus.sources.loaded;\r\n      async function loadData() {\r\n        const fetchedSources: any = await MapService.getSources();\r\n        const fetchedLayers: any = await MapService.getLayers();\r\n        setSources(fetchedSources);\r\n        setLayers(fetchedLayers);\r\n        if (!mapStatus.sources.added) {\r\n          fetchedSources.forEach((source: { id: any; }) => {\r\n            const cleanedSource = { ...source };\r\n            delete cleanedSource.id;\r\n            map.addSource(source.id, cleanedSource);\r\n          });\r\n  \r\n          if (!mapStatus.layers.added) {\r\n            fetchedLayers.forEach((layer: any) => {\r\n              map.addLayer(layer);\r\n            });\r\n          }\r\n        }\r\n        setMapStatus((s) => ({\r\n          ...s,\r\n          sources: {\r\n            loaded: true,\r\n            added: true,\r\n          },\r\n          layers: {\r\n            loaded: true,\r\n            added: true,\r\n          },\r\n        }));\r\n\r\n        /**\r\n           * Event handler for defining what happens when a user clicks on the map\r\n           * In this example, we are checking if the user has clicked on one or more feature layers\r\n           * If they have, we want to render a popup with the data for the selected\r\n           * bus feature\r\n           * Else, do nothing\r\n           */\r\n          //build  a Popup component used to render a map popup with information for chosen feature\r\n                    \r\n        map.on(\"click\", (e: { point: any; lngLat: any; }) => {\r\n          const features = map.queryRenderedFeatures(e.point, {\r\n            layers: [\"wellsInUTLayer\"],\r\n          });\r\n          if (features.length > 0) {\r\n            const feature = features[0];\r\n            {\r\n              // create popup node\r\n              const popupNode = document.createElement(\"div\");\r\n              ReactDOM.render(\r\n                <Popup\r\n                  featureName={feature?.properties?.wellname}\r\n                  featureNumber={feature?.properties?.api}\r\n                />,\r\n                popupNode\r\n              );\r\n              popUpRef.current\r\n                .setLngLat(e.lngLat)\r\n                .setDOMContent(popupNode)\r\n                .addTo(map);\r\n            }\r\n          }\r\n        });\r\n        // Change the cursor to a pointer when the mouse is over the places layer.\r\n        map.on('mouseenter', \"wellsInUTLayer\", () => {\r\n          map.getCanvas().style.cursor = 'pointer';\r\n        });\r\n\r\n        // Change it back to a pointer when it leaves.\r\n        map.on('mouseleave', \"wellsInUTLayer\", () => {\r\n          map.getCanvas().style.cursor = '';\r\n        });\r\n\r\n        map.on('mousemove', (e: { point: any; lngLat: any; }) => {\r\n          const features = map.queryRenderedFeatures(e.point, {\r\n            layers: [\"wellsInUTLayer\"],\r\n          });\r\n           \r\n          // Limit the number of properties we're displaying for\r\n          // legibility and performance\r\n          const displayProperties = [\r\n          'type',\r\n          'properties',\r\n          ];\r\n           \r\n          const displayFeatures = features.map((feat: { [x: string]: any; }) => {\r\n          const displayFeat:  { [x: string]: any; } = {};\r\n          displayProperties.forEach((prop) => {\r\n          displayFeat[prop] = feat[prop];\r\n          });\r\n          return displayFeat;\r\n          });\r\n           \r\n          // Write object as string with an indent of two spaces.\r\n          document.getElementById('features')!.innerHTML = JSON.stringify(\r\n          displayFeatures,\r\n          null,\r\n          2\r\n          );\r\n          });\r\n      }\r\n      if (shouldLoadData) {\r\n        loadData();\r\n      }\r\n    }, [map, mapStatus.map.loaded, mapStatus.sources, mapStatus.layers]);\r\n  \r\n    const updateLayerVisibility = (id: any, visible: any) => {\r\n      if (!!map && !!map.getLayer(id)) {\r\n        const visibleValue = visible ? \"visible\" : \"none\";\r\n        map.setLayoutProperty(id, \"visibility\", visibleValue);\r\n        setLayers((s) => {\r\n          return s.map((layer: any) => {\r\n            if (layer.id === id) {\r\n              return {\r\n                ...layer,\r\n                layout: {\r\n                  ...layer.layout,\r\n                  visibility: visibleValue,\r\n                },\r\n              };\r\n            }\r\n            return layer;\r\n          });\r\n        });\r\n      }\r\n    };\r\n  \r\n    useEffect(() => {\r\n      loadMapData();\r\n    }, [loadMapData]);\r\n  \r\n    return {\r\n      layers,\r\n      map,\r\n      sources,\r\n      updateLayerVisibility,\r\n    };\r\n  };"]},"metadata":{},"sourceType":"module"}